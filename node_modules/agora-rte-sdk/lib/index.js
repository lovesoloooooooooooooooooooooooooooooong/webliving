/*! For license information please see index.js.LICENSE.txt */
!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("dayjs"));else if("function"==typeof define&&define.amd)define(["dayjs"],t);else{var n="object"==typeof exports?t(require("dayjs")):t(e.dayjs);for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(self,(function(__WEBPACK_EXTERNAL_MODULE__5760__){return(()=>{var __webpack_modules__={7162:(e,t,n)=>{e.exports=n(5047)},5904:function(e,t,n){"use strict";e.exports=function(){function e(e,t,n){return e(n={path:t,exports:{},require:function(e,t){throw Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}},n.exports),n.exports}function t(e,t,n){return(e=e.match(t))&&e.length>=n&&Xa(e[n],10)}function r(e,t,n){if(e.RTCPeerConnection){var r=(e=e.RTCPeerConnection.prototype).addEventListener;e.addEventListener=function(e,i){if(e!==t)return r.apply(this,arguments);let o=e=>{(e=n(e))&&i(e)};return this._eventMap=this._eventMap||{},this._eventMap[i]=o,r.apply(this,[e,o])};var i=e.removeEventListener;e.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[n])return i.apply(this,arguments);let r=this._eventMap[n];return delete this._eventMap[n],i.apply(this,[e,r])},qa(e,"on"+t,{get(){return this["_on"+t]},set(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}}function i(e){return"boolean"!=typeof e?Error("Argument type: "+typeof e+". Please use a boolean."):(Za=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function o(e){return"boolean"!=typeof e?Error("Argument type: "+typeof e+". Please use a boolean."):($a=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function a(){"object"!=typeof window||Za||"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}function s(e,t){$a&&console.warn(e+" is deprecated, please use "+t+" instead.")}function c(e){let{navigator:n}=e,r={browser:null,version:null};if(void 0===e||!e.navigator)return r.browser="Not a browser.",r;if(n.mozGetUserMedia)r.browser="firefox",r.version=t(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)r.browser="chrome",r.version=t(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(n.mediaDevices&&n.userAgent.match(/Edge\/(\d+).(\d+)$/))r.browser="edge",r.version=t(n.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!e.RTCPeerConnection||!n.userAgent.match(/AppleWebKit\/(\d+)\./))return r.browser="Not a supported browser.",r;r.browser="safari",r.version=t(n.userAgent,/AppleWebKit\/(\d+)\./,1),r.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return r}function u(e){var t;return"[object Object]"===Object.prototype.toString.call(e)?Qa(t=Ba(e)).call(t,(function(t,n){var r="[object Object]"===Object.prototype.toString.call(e[n]);let i=r?u(e[n]):e[n];return r=r&&!Ba(i).length,void 0===i||r?t:La(t,{[n]:i})}),{}):e}function l(e,t,n){let r=n?"outbound-rtp":"inbound-rtp",i=new pa;if(null===t)return i;let o=[];return Oa(e).call(e,(e=>{"track"===e.type&&e.trackIdentifier===t.id&&o.push(e)})),Oa(o).call(o,(t=>{Oa(e).call(e,(n=>{n.type===r&&n.trackId===t.id&&function e(t,n,r){var i;n&&!r.has(n.id)&&(r.set(n.id,n),Oa(i=Ba(n)).call(i,(i=>{if(Ia(i).call(i,"Id"))e(t,t.get(n[i]),r);else if(Ia(i).call(i,"Ids")){var o;Oa(o=n[i]).call(o,(n=>{e(t,t.get(n),r)}))}})))}(e,n,i)}))})),i}function h(e){let t=e&&e.navigator;if(t.mediaDevices){var n=c(e),r=function(e){var t;if("object"!=typeof e||e.mandatory||e.optional)return e;const n={};var r;return Oa(t=Ba(e)).call(t,(t=>{if("require"!==t&&"advanced"!==t&&"mediaSource"!==t){var r="object"==typeof e[t]?e[t]:{ideal:e[t]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);var i,o=function(e,t){return e?e+t.charAt(0).toUpperCase()+qc(t).call(t,1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){n.optional=n.optional||[];let e={};"number"==typeof r.ideal?(e[o("min",t)]=r.ideal,n.optional.push(e),e={},e[o("max",t)]=r.ideal,n.optional.push(e)):(e[o("",t)]=r.ideal,n.optional.push(e))}void 0!==r.exact&&"number"!=typeof r.exact?(n.mandatory=n.mandatory||{},n.mandatory[o("",t)]=r.exact):Oa(i=["min","max"]).call(i,(e=>{void 0!==r[e]&&(n.mandatory=n.mandatory||{},n.mandatory[o(e,t)]=r[e])}))}})),e.advanced&&(n.optional=_i(r=n.optional||[]).call(r,e.advanced)),n},i=function(e,i){if(61<=n.version)return i(e);if((e=JSON.parse(Fr(e)))&&"object"==typeof e.audio){var o=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};o((e=JSON.parse(Fr(e))).audio,"autoGainControl","googAutoGainControl"),o(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=r(e.audio)}if(e&&"object"==typeof e.video){let a=e.video.facingMode;if(a=a&&("object"==typeof a?a:{ideal:a}),o=66>n.version,!(!a||"user"!==a.exact&&"environment"!==a.exact&&"user"!==a.ideal&&"environment"!==a.ideal||t.mediaDevices.getSupportedConstraints&&t.mediaDevices.getSupportedConstraints().facingMode&&!o)){let n;if(delete e.video.facingMode,"environment"===a.exact||"environment"===a.ideal?n=["back","rear"]:"user"!==a.exact&&"user"!==a.ideal||(n=["front"]),n)return t.mediaDevices.enumerateDevices().then((t=>{t=os(t).call(t,(e=>"videoinput"===e.kind));let o=Wc(t).call(t,(e=>au(n).call(n,(t=>{var n;return ru(n=e.label.toLowerCase()).call(n,t)}))));return!o&&t.length&&ru(n).call(n,"back")&&(o=t[t.length-1]),o&&(e.video.deviceId=a.exact?{exact:o.deviceId}:{ideal:o.deviceId}),e.video=r(e.video),su("chrome: "+Fr(e)),i(e)}))}e.video=r(e.video)}return su("chrome: "+Fr(e)),i(e)},o=function(e){return 64<=n.version?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(e=function(e,n,r){i(e,(e=>{t.webkitGetUserMedia(e,n,(e=>{r&&r(o(e))}))}))},t.getUserMedia=Zc(e).call(e,t),t.mediaDevices.getUserMedia){var a;let e=Zc(a=t.mediaDevices.getUserMedia).call(a,t.mediaDevices);t.mediaDevices.getUserMedia=function(t){return i(t,(t=>e(t).then((e=>{var n;if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw Oa(n=e.getTracks()).call(n,(e=>{e.stop()})),new DOMException("","NotFoundError");return e}),(e=>wc.reject(o(e))))))}}}}function d(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function f(e){if("object"!=typeof e||!e.RTCPeerConnection||"ontrack"in e.RTCPeerConnection.prototype)r(e,"track",(e=>(e.transceiver||qa(e,"transceiver",{value:{receiver:e.receiver}}),e)));else{qa(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});let t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=t=>{var n;t.stream.addEventListener("addtrack",(n=>{let r;var i;r=e.RTCPeerConnection.prototype.getReceivers?Wc(i=this.getReceivers()).call(i,(e=>e.track&&e.track.id===n.track.id)):{track:n.track},(i=new Event("track")).track=n.track,i.receiver=r,i.transceiver={receiver:r},i.streams=[t.stream],this.dispatchEvent(i)})),Oa(n=t.stream.getTracks()).call(n,(n=>{let r;var i;r=e.RTCPeerConnection.prototype.getReceivers?Wc(i=this.getReceivers()).call(i,(e=>e.track&&e.track.id===n.id)):{track:n},(i=new Event("track")).track=n,i.receiver=r,i.transceiver={receiver:r},i.streams=[t.stream],this.dispatchEvent(i)}))},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}}function p(e){if("object"==typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){let t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){var e;return this._senders=this._senders||[],qc(e=this._senders).call(e)};let n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){let i=n.apply(this,arguments);return i||(i=t(this,e),this._senders.push(i)),i};let r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t;r.apply(this,arguments);let n=Mc(t=this._senders).call(t,e);var i;-1!==n&&Nc(i=this._senders).call(i,n,1)}}let n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var r;this._senders=this._senders||[],n.apply(this,[e]),Oa(r=e.getTracks()).call(r,(e=>{this._senders.push(t(this,e))}))};let r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t;this._senders=this._senders||[],r.apply(this,[e]),Oa(t=e.getTracks()).call(t,(e=>{var t;let n=Wc(t=this._senders).call(t,(t=>t.track===e));var r,i;n&&Nc(r=this._senders).call(r,Mc(i=this._senders).call(i,n),1)}))}}else if("object"==typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){let t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){let e=t.apply(this,[]);return Oa(e).call(e,(e=>e._pc=this)),e},qa(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function g(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){let[e,n,r]=arguments;if(0<arguments.length&&"function"==typeof e)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof e))return t.apply(this,[]);let i=function(e){const t={};return e=e.result(),Oa(e).call(e,(e=>{var n;const r={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};Oa(n=e.names()).call(n,(t=>{r[t]=e.stat(t)})),t[r.id]=r})),t},o=function(e){var t;return new pa(Sc(t=Ba(e)).call(t,(t=>[t,e[t]])))};return 2<=arguments.length?t.apply(this,[function(e){n(o(i(e)))},e]):new wc(((e,n)=>{t.apply(this,[function(t){e(o(i(t)))},n])})).then(n,r)}}}function A(e){if("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver){if(!("getStats"in e.RTCRtpSender.prototype)){let t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){let e=t.apply(this,[]);return Oa(e).call(e,(e=>e._pc=this)),e});let n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){let e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){let e=this;return this._pc.getStats().then((t=>l(t,e.track,!0)))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){let t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){let e=t.apply(this,[]);return Oa(e).call(e,(e=>e._pc=this)),e}),r(e,"track",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){let e=this;return this._pc.getStats().then((t=>l(t,e.track,!1)))}}if("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype){var t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(0<arguments.length&&arguments[0]instanceof e.MediaStreamTrack){var n,r;let e,t,i,o=arguments[0];return Oa(n=this.getSenders()).call(n,(t=>{t.track===o&&(e?i=!0:e=t)})),Oa(r=this.getReceivers()).call(r,(e=>(e.track===o&&(t?i=!0:t=e),e.track===o))),i||e&&t?wc.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):e?e.getStats():t?t.getStats():wc.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}}}function v(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var e;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Sc(e=Ba(this._shimmedLocalStreams)).call(e,(e=>this._shimmedLocalStreams[e][0]))};let t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){var r;if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};let i=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===Mc(r=this._shimmedLocalStreams[n.id]).call(r,i)&&this._shimmedLocalStreams[n.id].push(i):this._shimmedLocalStreams[n.id]=[n,i],i};let n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var t,r,i;this._shimmedLocalStreams=this._shimmedLocalStreams||{},Oa(t=e.getTracks()).call(t,(e=>{var t;if(Wc(t=this.getSenders()).call(t,(t=>t.track===e)))throw new DOMException("Track already exists.","InvalidAccessError")}));let o=this.getSenders();n.apply(this,arguments),t=os(r=this.getSenders()).call(r,(e=>-1===Mc(o).call(o,e))),this._shimmedLocalStreams[e.id]=_i(i=[e]).call(i,t)};let r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],r.apply(this,arguments)};let i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Oa(t=Ba(this._shimmedLocalStreams)).call(t,(t=>{var n;let r=Mc(n=this._shimmedLocalStreams[t]).call(n,e);var i;-1!==r&&Nc(i=this._shimmedLocalStreams[t]).call(i,r,1),1===this._shimmedLocalStreams[t].length&&delete this._shimmedLocalStreams[t]})),i.apply(this,arguments)}}function m(e){function t(e,t){var n;let r=t.sdp;return Oa(n=Ba(e._reverseStreams||[])).call(n,(t=>{t=e._reverseStreams[t],r=r.replace(new RegExp(e._streams[t.id].id,"g"),t.id)})),new RTCSessionDescription({type:t.type,sdp:r})}function n(e,t){var n;let r=t.sdp;return Oa(n=Ba(e._reverseStreams||[])).call(n,(t=>{t=e._reverseStreams[t],r=r.replace(new RegExp(t.id,"g"),e._streams[t.id].id)})),new RTCSessionDescription({type:t.type,sdp:r})}var r;if(e.RTCPeerConnection){var i=c(e);if(e.RTCPeerConnection.prototype.addTrack&&65<=i.version)return v(e);var o=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){let e=o.apply(this);return this._reverseStreams=this._reverseStreams||{},Sc(e).call(e,(e=>this._reverseStreams[e.id]))};var a=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){var n;this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},Oa(n=t.getTracks()).call(n,(e=>{var t;if(Wc(t=this.getSenders()).call(t,(t=>t.track===e)))throw new DOMException("Track already exists.","InvalidAccessError")})),this._reverseStreams[t.id]||(n=new e.MediaStream(t.getTracks()),this._streams[t.id]=n,this._reverseStreams[n.id]=t,t=n),a.apply(this,[t])};var s=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},s.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){var r,i,o;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");let a=qc([]).call(arguments,1);if(1!==a.length||!Wc(r=a[0].getTracks()).call(r,(e=>e===t)))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(Wc(i=this.getSenders()).call(i,(e=>e.track===t)))throw new DOMException("Track already exists.","InvalidAccessError");return this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},(r=this._streams[n.id])?(r.addTrack(t),wc.resolve().then((()=>{this.dispatchEvent(new Event("negotiationneeded"))}))):(r=new e.MediaStream([t]),this._streams[n.id]=r,this._reverseStreams[r.id]=n,this.addStream(r)),Wc(o=this.getSenders()).call(o,(e=>e.track===t))},Oa(r=["createOffer","createAnswer"]).call(r,(function(n){let r=e.RTCPeerConnection.prototype[n];e.RTCPeerConnection.prototype[n]={[n](){const e=arguments;return arguments.length&&"function"==typeof arguments[0]?r.apply(this,[n=>{n=t(this,n),e[0].apply(null,[n])},t=>{e[1]&&e[1].apply(null,t)},arguments[2]]):r.apply(this,arguments).then((e=>t(this,e)))}}[n]}));var u=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=n(this,arguments[0]),u.apply(this,arguments)):u.apply(this,arguments)};var l=ns(e.RTCPeerConnection.prototype,"localDescription");qa(e.RTCPeerConnection.prototype,"localDescription",{get(){let e=l.get.apply(this);return""===e.type?e:t(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){var t;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(e._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let n;this._streams=this._streams||{},Oa(t=Ba(this._streams)).call(t,(t=>{var r;Wc(r=this._streams[t].getTracks()).call(r,(t=>e.track===t))&&(n=this._streams[t])})),n&&(1===n.getTracks().length?this.removeStream(this._reverseStreams[n.id]):n.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}}function y(e){let t=c(e);if(!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection){var n;53>t.version&&Oa(n=["setLocalDescription","setRemoteDescription","addIceCandidate"]).call(n,(function(t){let n=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}}[t]}));var r=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?78>t.version&&arguments[0]&&""===arguments[0].candidate?wc.resolve():r.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),wc.resolve())}}}function b(e){r(e,"negotiationneeded",(e=>{if("stable"===e.target.signalingState)return e}))}function _(e,t,n,r,i){return t=_u.writeRtpDescription(e.kind,t),t+=_u.writeIceParameters(e.iceGatherer.getLocalParameters()),t+=_u.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":i||"active"),t+="a=mid:"+e.mid+"\r\n",e.rtpSender&&e.rtpReceiver?t+="a=sendrecv\r\n":e.rtpSender?t+="a=sendonly\r\n":e.rtpReceiver?t+="a=recvonly\r\n":t+="a=inactive\r\n",e.rtpSender&&(n=e.rtpSender._initialTrackId||e.rtpSender.track.id,e.rtpSender._initialTrackId=n,t=t+"a="+(r="msid:"+(r?r.id:"-")+" "+n+"\r\n")+"a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+r,e.sendEncodingParameters[0].rtx&&(t+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+r,t+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")),t+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+_u.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(t+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+_u.localCName+"\r\n"),t}function E(e,t){var n={codecs:[],headerExtensions:[],fecMechanisms:[]},r=function(e,t){e=parseInt(e,10);for(var n=0;n<t.length;n++)if(t[n].payloadType===e||t[n].preferredPayloadType===e)return t[n]},i=function(e,t,n,i){return e=r(e.parameters.apt,n),t=r(t.parameters.apt,i),e&&t&&e.name.toLowerCase()===t.name.toLowerCase()};return e.codecs.forEach((function(r){for(var o=0;o<t.codecs.length;o++){var a=t.codecs[o];if(r.name.toLowerCase()===a.name.toLowerCase()&&r.clockRate===a.clockRate&&("rtx"!==r.name.toLowerCase()||!r.parameters||!a.parameters.apt||i(r,a,e.codecs,t.codecs))){(a=JSON.parse(JSON.stringify(a))).numChannels=Math.min(r.numChannels,a.numChannels),n.codecs.push(a),a.rtcpFeedback=a.rtcpFeedback.filter((function(e){for(var t=0;t<r.rtcpFeedback.length;t++)if(r.rtcpFeedback[t].type===e.type&&r.rtcpFeedback[t].parameter===e.parameter)return!0;return!1}));break}}})),e.headerExtensions.forEach((function(e){for(var r=0;r<t.headerExtensions.length;r++){var i=t.headerExtensions[r];if(e.uri===i.uri){n.headerExtensions.push(i);break}}})),n}function w(e,t,n){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(n)}function I(e,t){var n=e.getRemoteCandidates().find((function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type}));return n||e.addRemoteCandidate(t),!n}function C(e,t){return(t=Error(t)).name=e,t.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],t}function S(e){var t;e=e&&e.navigator;let n=Zc(t=e.mediaDevices.getUserMedia).call(t,e.mediaDevices);e.mediaDevices.getUserMedia=function(e){return n(e).catch((e=>wc.reject(function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString(){return this.name}}}(e))))}}function T(e){var t;"getDisplayMedia"in e.navigator&&e.navigator.mediaDevices&&(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=Zc(t=e.navigator.getDisplayMedia).call(t,e.navigator)))}function R(e){let t=c(e);if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),15025>t.version)){let t=ns(e.MediaStreamTrack.prototype,"enabled");qa(e.MediaStreamTrack.prototype,"enabled",{set(e){t.set.call(this,e);let n=new Event("enabled");n.enabled=e,this.dispatchEvent(n)}})}!e.RTCRtpSender||"dtmf"in e.RTCRtpSender.prototype||qa(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);let n=Eu(e,t.version);e.RTCPeerConnection=function(e){return e&&e.iceServers&&(e.iceServers=function(e,t){let n=!1;return e=JSON.parse(Fr(e)),os(e).call(e,(e=>{if(e&&(e.urls||e.url)){var t=e.urls||e.url;e.url&&!e.urls&&s("RTCIceServer.url","RTCIceServer.urls");let r="string"==typeof t;return r&&(t=[t]),t=os(t).call(t,(e=>0!==Mc(e).call(e,"stun:")&&((e=pu(e).call(e,"turn")&&!pu(e).call(e,"turn:[")&&ru(e).call(e,"transport=udp"))&&!n?(n=!0,!0):e&&!n))),delete e.url,e.urls=r?t[0]:t,!!t.length}}))}(e.iceServers,t.version),a("ICE servers after filtering:",e.iceServers)),new n(e)},e.RTCPeerConnection.prototype=n.prototype}function k(e){!e.RTCRtpSender||"replaceTrack"in e.RTCRtpSender.prototype||(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)}function O(e){let t=c(e),n=e&&e.navigator;if(e=e&&e.MediaStreamTrack,n.getUserMedia=function(e,t,r){s("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(t,r)},!(55<t.version&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){var r;let t=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},i=Zc(r=n.mediaDevices.getUserMedia).call(r,n.mediaDevices);if(n.mediaDevices.getUserMedia=function(e){return"object"==typeof e&&"object"==typeof e.audio&&(e=JSON.parse(Fr(e)),t(e.audio,"autoGainControl","mozAutoGainControl"),t(e.audio,"noiseSuppression","mozNoiseSuppression")),i(e)},e&&e.prototype.getSettings){let n=e.prototype.getSettings;e.prototype.getSettings=function(){let e=n.apply(this,arguments);return t(e,"mozAutoGainControl","autoGainControl"),t(e,"mozNoiseSuppression","noiseSuppression"),e}}if(e&&e.prototype.applyConstraints){let n=e.prototype.applyConstraints;e.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"==typeof e&&(e=JSON.parse(Fr(e)),t(e,"autoGainControl","mozAutoGainControl"),t(e,"noiseSuppression","mozNoiseSuppression")),n.apply(this,[e])}}}}function N(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&qa(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function x(e){let t=c(e);if("object"==typeof e&&(e.RTCPeerConnection||e.mozRTCPeerConnection)){var n;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),53>t.version&&Oa(n=["setLocalDescription","setRemoteDescription","addIceCandidate"]).call(n,(function(t){let n=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}}[t]}));var r=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?68>t.version&&arguments[0]&&""===arguments[0].candidate?wc.resolve():r.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),wc.resolve())};var i={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},o=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){let[e,n,r]=arguments;return o.apply(this,[e||null]).then((e=>{if(53>t.version&&!n)try{Oa(e).call(e,(e=>{e.type=i[e.type]||e.type}))}catch(t){if("TypeError"!==t.name)throw t;Oa(e).call(e,((t,n)=>{e.set(n,La({},t,{type:i[t.type]||t.type}))}))}return e})).then(n,r)}}}function D(e){if("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpSender.prototype))){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){let e=t.apply(this,[]);return Oa(e).call(e,(e=>e._pc=this)),e});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){let e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):wc.resolve(new pa)}}}function L(e){if("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpReceiver.prototype))){var t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){let e=t.apply(this,[]);return Oa(e).call(e,(e=>e._pc=this)),e}),r(e,"track",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}}function P(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t;s("removeStream","removeTrack"),Oa(t=this.getSenders()).call(t,(t=>{var n;t.track&&ru(n=e.getTracks()).call(n,t.track)&&this.removeTrack(t)}))})}function B(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function M(e){if("object"==typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){let t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){var n,r,i;this._localStreams||(this._localStreams=[]),ru(n=this._localStreams).call(n,e)||this._localStreams.push(e),Oa(r=e.getAudioTracks()).call(r,(n=>t.call(this,n,e))),Oa(i=e.getVideoTracks()).call(i,(n=>t.call(this,n,e)))},e.RTCPeerConnection.prototype.addTrack=function(e,n){var r;return n&&(this._localStreams?ru(r=this._localStreams).call(r,n)||this._localStreams.push(n):this._localStreams=[n]),t.call(this,e,n)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t,n,r;this._localStreams||(this._localStreams=[]);let i=Mc(t=this._localStreams).call(t,e);if(-1!==i){Nc(n=this._localStreams).call(n,i,1);var o=e.getTracks();Oa(r=this.getSenders()).call(r,(e=>{ru(o).call(o,e.track)&&this.removeTrack(e)}))}})}}function j(e){if("object"==typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){qa(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(e){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=e=>{var t;Oa(t=e.streams).call(t,(e=>{var t;this._remoteStreams||(this._remoteStreams=[]),ru(t=this._remoteStreams).call(t,e)||(this._remoteStreams.push(e),(t=new Event("addstream")).stream=e,this.dispatchEvent(t))}))})}});let t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){let e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){var n;Oa(n=t.streams).call(n,(t=>{var n;e._remoteStreams||(e._remoteStreams=[]),0<=Mc(n=e._remoteStreams).call(n,t)||(e._remoteStreams.push(t),(n=new Event("addstream")).stream=t,e.dispatchEvent(n))}))}),t.apply(e,arguments)}}}function U(e){if("object"==typeof e&&e.RTCPeerConnection){var t=(e=e.RTCPeerConnection.prototype).createOffer,n=e.createAnswer,r=e.setLocalDescription,i=e.setRemoteDescription,o=e.addIceCandidate;e.createOffer=function(e,n){let r=t.apply(this,[2<=arguments.length?arguments[2]:arguments[0]]);return n?(r.then(e,n),wc.resolve()):r},e.createAnswer=function(e,t){let r=n.apply(this,[2<=arguments.length?arguments[2]:arguments[0]]);return t?(r.then(e,t),wc.resolve()):r};var a=function(e,t,n){return e=r.apply(this,[e]),n?(e.then(t,n),wc.resolve()):e};e.setLocalDescription=a,a=function(e,t,n){return e=i.apply(this,[e]),n?(e.then(t,n),wc.resolve()):e},e.setRemoteDescription=a,a=function(e,t,n){return e=o.apply(this,[e]),n?(e.then(t,n),wc.resolve()):e},e.addIceCandidate=a}}function F(e){let t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){var n;e=t.mediaDevices;let r=Zc(n=e.getUserMedia).call(n,e);t.mediaDevices.getUserMedia=e=>r(Q(e))}var r;!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=Zc(r=function(e,n,r){t.mediaDevices.getUserMedia(e).then(n,r)}).call(r,t))}function Q(e){return e&&void 0!==e.video?La({},e,{video:u(e.video)}):e}function G(e){let t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){let t=[];for(let n=0;n<e.iceServers.length;n++){let r=e.iceServers[n];!r.hasOwnProperty("urls")&&r.hasOwnProperty("url")?(s("RTCIceServer.url","RTCIceServer.urls"),r=JSON.parse(Fr(r)),r.urls=r.url,delete r.url,t.push(r)):t.push(e.iceServers[n])}e.iceServers=t}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in e.RTCPeerConnection&&qa(e.RTCPeerConnection,"generateCertificate",{get:()=>t.generateCertificate})}function q(e){"object"==typeof e&&e.RTCPeerConnection&&"receiver"in e.RTCTrackEvent.prototype&&!e.RTCTransceiver&&qa(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function V(e){let t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){var n,r;void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);let t=Wc(n=this.getTransceivers()).call(n,(e=>"audio"===e.receiver.track.kind));!1===e.offerToReceiveAudio&&t?"sendrecv"===t.direction?t.setDirection?t.setDirection("sendonly"):t.direction="sendonly":"recvonly"===t.direction&&(t.setDirection?t.setDirection("inactive"):t.direction="inactive"):!0!==e.offerToReceiveAudio||t||this.addTransceiver("audio"),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo),n=Wc(r=this.getTransceivers()).call(r,(e=>"video"===e.receiver.track.kind)),!1===e.offerToReceiveVideo&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveVideo||n||this.addTransceiver("video")}return t.apply(this,arguments)}}function K(e){if(e.RTCIceCandidate&&(!e.RTCIceCandidate||!("foundation"in e.RTCIceCandidate.prototype))){var t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){var n;if("object"==typeof e&&e.candidate&&0===Mc(n=e.candidate).call(n,"a=")&&((e=JSON.parse(Fr(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){n=new t(e),e=_u.parseCandidate(e.candidate);let r=La(n,e);return r.toJSON=function(){return{candidate:r.candidate,sdpMid:r.sdpMid,sdpMLineIndex:r.sdpMLineIndex,usernameFragment:r.usernameFragment}},r}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,r(e,"icecandidate",(t=>(t.candidate&&qa(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t)))}}function H(e){if(e.RTCPeerConnection){var t=c(e);"sctp"in e.RTCPeerConnection.prototype||qa(e.RTCPeerConnection.prototype,"sctp",{get(){return void 0===this._sctp?null:this._sctp}});var n=function(e){return!(!e||!e.sdp)&&((e=_u.splitSections(e.sdp)).shift(),au(e).call(e,(e=>{var t;return(e=_u.parseMLine(e))&&"application"===e.kind&&-1!==Mc(t=e.protocol).call(t,"SCTP")})))},r=function(e){return null===(e=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/))||2>e.length||(e=Xa(e[1],10))!=e?-1:e},i=function(e){let n=65536;return"firefox"===t.browser&&(n=57>t.version?-1===e?16384:2147483637:60>t.version?57===t.version?65535:65536:2147483637),n},o=function(e,n){let r=65536;return"firefox"===t.browser&&57===t.version&&(r=65535),0<(e=_u.matchPrefix(e.sdp,"a=max-message-size:")).length?r=Xa(e[0].substr(19),10):"firefox"===t.browser&&-1!==n&&(r=2147483637),r},a=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&76<=t.version){var{sdpSemantics:e}=this.getConfiguration();"plan-b"===e&&qa(this,"sctp",{get(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){var s=r(arguments[0]);let t;e=i(s),s=o(arguments[0],s),t=0===e&&0===s?Number.POSITIVE_INFINITY:0===e||0===s?Math.max(e,s):Math.min(e,s),qa(e={},"maxMessageSize",{get:()=>t}),this._sctp=e}return a.apply(this,arguments)}}}function W(e){function t(e,t){let n=e.send;e.send=function(){var r=arguments[0];if(r=r.length||r.size||r.byteLength,"open"===e.readyState&&t.sctp&&r>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}if(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype){var n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){let e=n.apply(this,arguments);return t(e,this),e},r(e,"datachannel",(e=>(t(e.channel,e.target),e)))}}function z(e){var t;if(e.RTCPeerConnection&&!("connectionState"in e.RTCPeerConnection.prototype)){var n=e.RTCPeerConnection.prototype;qa(n,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),qa(n,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),Oa(t=["setLocalDescription","setRemoteDescription"]).call(t,(e=>{let t=n[e];n[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=e=>{let t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;let n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),t.apply(this,arguments)}}))}}function Y(e){if(e.RTCPeerConnection){var t=c(e);if(!("chrome"===t.browser&&71<=t.version)){var n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(e){var t,r;return e&&e.sdp&&-1!==Mc(t=e.sdp).call(t,"\na=extmap-allow-mixed")&&(e.sdp=os(r=e.sdp.split("\n")).call(r,(e=>"a=extmap-allow-mixed"!==bu(e).call(e))).join("\n")),n.apply(this,arguments)}}}}function J(e){var t;e&&Tu.setUA(e),Ru=Tu.getResult(),e=X(Ru);var n=(t="Blink"===Ru.engine.name?Ru.engine.version||"":Ru.browser.version||"").split(".")[0];return t="Windows"===Ru.os.name?Ru.os.version?Ru.os.name+" "+Ru.os.version:Ru.os.name:Ru.os.name||"",{name:e,version:n,os:t,osVersion:Ru.os.version}}function X(e){if("Blink"===e.engine.name)return Au.CHROME;switch(e.browser.name){case"Chrome Headless":case"Chrome":case"Chromium":return Au.CHROME;case"Safari":case"Mobile Safari":return Au.SAFARI;case"Edge":return Au.EDGE;case"Firefox":return Au.FIREFOX;case"QQBrowser":return Au.QQ;case"Opera":return Au.OPERA;case"WeChat":return Au.WECHAT;default:return e.browser.name||""}}function Z(){let e=J();return!!("WebKit"===Ru.engine.name&&e.os===gu.MAC_OS&&navigator.maxTouchPoints&&0<navigator.maxTouchPoints&&e.name!==Au.SAFARI||re()&&e.name!==Au.SAFARI)}function $(){var e=J();return!(!Z()||!(e.os===gu.MAC_OS||e.os===gu.IOS&&((e=Ru.os.version&&Ru.os.version.split("."))&&14===Number(e[0])&&e[1]&&3<=Number(e[1])||e&&14<Number(e[0]))))}function ee(){return J().name===Au.CHROME}function te(){return J().name===Au.SAFARI}function ne(){return J().name===Au.FIREFOX}function re(){return J().os===gu.IOS}function ie(){var e=J();return!(e.os!==gu.IOS||!e.osVersion)&&(e=e.osVersion.split("."),15===Number(e[0]))}function oe(){var e=J();return!(e.os!==gu.IOS||!e.osVersion)&&(e=e.osVersion.split("."),15===Number(e[0])&&0===Number(e[1]))}function ae(){var e=J();return!(e.os!==gu.IOS||!e.osVersion)&&(e=e.osVersion.split("."),15===Number(e[0])&&1<=Number(e[1]))}function se(){return te()&&0<navigator.maxTouchPoints}function ce(){return window.navigator.appVersion&&null!==window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)&&35>=window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)[1]}function ue(){let e=J();return e.name!==Au.EDGE&&e.name!==Au.SAFARI&&!!navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]./i)}function le(e){return"string"==typeof e?La({},Du[e]):e}function he(e){return"string"==typeof e?La({},Lu[e]):e}function de(e){return"string"==typeof e?La({},Pu[e]):e}function fe(e){return"string"==typeof e?La({},Bu[e]):e}function pe(e,t){var n;ru(n=Ba(Mu)).call(n,e)&&(Mu[e]=t)}function ge(e,t,n){return{sampleRate:e,stereo:t,bitrate:n}}function Ae(e,t,n,r,i){return{width:e,height:t,frameRate:n,bitrateMin:r,bitrateMax:i}}function ve(e,t,n,r,i){return{width:{max:e},height:{max:t},frameRate:n,bitrateMin:r,bitrateMax:i}}function me(e,t){return{numSpatialLayers:e,numTemporalLayers:t}}function ye(e){return"[object Array]"===rl.call(e)}function be(e){return null!==e&&"object"==typeof e}function _e(e){return"[object Function]"===rl.call(e)}function Ee(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),ye(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.call(null,e[n],n,e)}function we(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Ie(){this.handlers=[]}function Ce(e,t){!il.isUndefined(e)&&il.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function Se(e){this.defaults=e,this.interceptors={request:new sl,response:new sl}}function Te(e){this.message=e}function Re(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new _l(e),t(n.reason))}))}function ke(e){e=new bl(e);var t=nl(bl.prototype.request,e);return il.extend(t,bl.prototype,e),il.extend(t,e),t}function Oe(){let e=new Date;return e.toTimeString().split(" ")[0]+":"+e.getMilliseconds()}function Ne(e,t){if("boolean"!=typeof e)throw new Rl(Yu.INVALID_PARAMS,"Invalid ".concat(t,": The value is of the boolean type."))}function xe(e,t,n){var r;if(!ru(n).call(n,e))throw new Rl(Yu.INVALID_PARAMS,_i(r="".concat(t," can only be set as ")).call(r,Fr(n)))}function De(e,t,n=1,r=1e4,i=!0){var o,a;if(e<n||e>r||i&&("number"!=typeof e||0!=e%1))throw new Rl(Yu.INVALID_PARAMS,_i(o=_i(a="invalid ".concat(t,": the value range is [")).call(a,n,", ")).call(o,r,"]. integer only"))}function Le(e,t,n=1,r=255,i=!0){if(null==e)throw new Rl(Yu.INVALID_PARAMS,"".concat(t||"param"," cannot be empty"));var o,a,s;if(!je(e,n,r,i))throw new Rl(Yu.INVALID_PARAMS,_i(o=_i(a=_i(s="Invalid ".concat(t||"string param",": Length of the string: [")).call(s,n,",")).call(a,r,"].")).call(o,i?" ASCII characters only.":""))}function Pe(e,t){if(!Ju(e))throw new Rl(Yu.INVALID_PARAMS,"".concat(t," should be an array"))}function Be(e){if("string"!=typeof e||!/^[a-zA-Z0-9 !#\$%&\(\)\+\-:;<=\.>\?@\[\]\^_\{\}\|~,]{1,64}$/.test(e))throw Tl.error("Invalid Channel Name ".concat(e)),new Rl(Yu.INVALID_PARAMS,"The length must be within 64 bytes. The supported characters: a-z,A-Z,0-9,space,!, #, $, %, &, (, ), +, -, :, ;, <, =, ., >, ?, @, [, ], ^, _,  {, }, |, ~, ,")}function Me(e){var t;if(!("number"==typeof e&&Math.floor(e)===e&&0<=e&&4294967295>=e||je(e,1,255)))throw Tl.error(_i(t="Invalid UID ".concat(e," ")).call(t,typeof e)),new Rl(Yu.INVALID_PARAMS,"[String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is [0,10000]");"string"==typeof e&&Tl.warning("You input a string as the user ID, to ensure better end-user experience, Agora highly suggests not using a string as the user ID.")}function je(e,t=1,n=255,r=!0){if(t="string"==typeof e&&e.length<=n&&e.length>=t){if(!(r=!r))e:if("string"!=typeof e)r=!1;else{for(r=0;r<e.length;r+=1)if(0>(t=e.charCodeAt(r))||255<t){r=!1;break e}r=!0}t=r}return t}function Ue(e){return Le(e.reportId,"params.reportId",0,100,!1),Le(e.category,"params.category",0,100,!1),Le(e.event,"params.event",0,100,!1),Le(e.label,"params.label",0,100,!1),De(e.value,"params.value",-9007199254740991,9007199254740991,!1),!0}function Fe(e){return De(e.timeout,"config.timeout",0,1e5),De(e.timeoutFactor,"config.timeoutFactor",0,100,!1),De(e.maxRetryCount,"config.maxRetryConfig",0,1/0),De(e.maxRetryTimeout,"config.maxRetryTimeout",0,1/0),!0}function Qe(e){if(!Ju(e)||1>e.length)return!1;try{Oa(e).call(e,(e=>{if(!e.urls)throw Error()}))}catch(e){return!1}return!0}function Ge(e){return Le(e.turnServerURL,"turnServerURL"),Le(e.username,"username"),Le(e.password,"password"),e.udpport&&De(e.udpport,"udpport",1,99999,!0),e.forceturn&&Ne(e.forceturn,"forceturn"),e.security&&Ne(e.security,"security"),e.tcpport&&De(e.tcpport,"tcpport",1,99999,!0),!0}function qe(e){return void 0!==e.level&&xe(e.level,"level",[1,2,3]),!0}function Ve(e,t){Le(e.url,"".concat(t,".url"),1,1e3,!1),null==e.x||De(e.x,"".concat(t,".x"),0,1e4),null==e.y||De(e.y,"".concat(t,".y"),0,1e4),null==e.width||De(e.width,"".concat(t,".width"),0,1e4),null==e.height||De(e.height,"".concat(t,".height"),0,1e4),null==e.zOrder||De(e.zOrder,"".concat(t,".zOrder"),0,255),null==e.alpha||De(e.alpha,"".concat(t,".alpha"),0,1,!1)}function Ke(e){if(!e.channelName)throw new Rl(Yu.INVALID_PARAMS,"invalid channelName in info");if(!e.uid||"number"!=typeof e.uid)throw new Rl(Yu.INVALID_PARAMS,"invalid uid in info, uid must be a number");return e.token&&Le(e.token,"info.token",1,2047),Me(e.uid),Be(e.channelName),!0}function He(e){return xe(e,"mediaSource",["screen","window","application"]),!0}function We(e,t){var n=Ba(e);if(pd){var r=pd(e);t&&(r=os(r).call(r,(function(t){return ns(e,t).enumerable}))),n.push.apply(n,r)}return n}function ze(e,t,n){return new wc(((r,i)=>{t.timeout=t.timeout||Mu.HTTP_CONNECT_TIMEOUT,t.responseType=t.responseType||"json",t.data&&!n?(t.data=Fr(t.data),Id+=Nt(t.data)):n&&(t.data.size?Id+=t.data.size:t.data instanceof FormData?Id+=function(e){let t=0;return/DingTalk/i.test(navigator.userAgent)&&e.realFormData&&(e=e.realFormData),Oa(e).call(e,(e=>{t+="string"==typeof e?Nt(e):e.size})),t+138}(t.data):Id+=Nt(Fr(t.data))),t.headers=t.headers||{},t.headers["Content-Type"]=t.headers["Content-Type"]||"application/json",t.method="POST",t.url=e,wl.request(t).then((e=>{"string"==typeof e.data?Cd+=Nt(e.data):e.data instanceof ArrayBuffer||e.data instanceof Uint8Array?Cd+=e.data.byteLength:Cd+=Nt(Fr(e.data)),r(e.data)})).catch((e=>{wl.isCancel(e)?i(new Rl(Yu.OPERATION_ABORTED,"cancel token canceled")):"ECONNABORTED"===e.code?i(new Rl(Yu.NETWORK_TIMEOUT,e.message)):e.response?i(new Rl(Yu.NETWORK_RESPONSE_ERROR,e.response.status)):i(new Rl(Yu.NETWORK_ERROR,e.message))}))}))}async function Ye(e,t){let n=new Blob([t.data],{type:"buffer"});return await ze(e,function(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)Oa(n=We(Object(r),!0)).call(n,(function(t){gd(e,t,r[t])}));else if(xh)Rh(e,xh(r));else{var i;Oa(i=We(Object(r))).call(i,(function(t){qa(e,t,ns(r,t))}))}}return e}({},t,{data:n,headers:{"Content-Type":"application/octet-stream"}}),!0)}function Je(e,t,n,r){let i=La({},Td,r),o=i.timeout,a=async()=>{await xt(o),o*=i.timeoutFactor,o=Math.min(i.maxRetryTimeout,o)},s=!1;return r=new wc((async(r,o)=>{t=t||(()=>!1),n=n||(()=>!0);for(let c=0;c<i.maxRetryCount;c+=1){if(s)return o(new Rl(Yu.OPERATION_ABORTED));try{const n=await e();if(!t(n,c)||c+1===i.maxRetryCount)return r(n);await a()}catch(e){if(!n(e,c)||c+1===i.maxRetryCount)return o(e);await a()}}})),r.cancel=()=>s=!0,r}function Xe(e,t){var n=Ba(e);if(pd){var r=pd(e);t&&(r=os(r).call(r,(function(t){return ns(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ze(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)Oa(n=Xe(Object(r),!0)).call(n,(function(t){gd(e,t,r[t])}));else if(xh)Rh(e,xh(r));else{var i;Oa(i=Xe(Object(r))).call(i,(function(t){qa(e,t,ns(r,t))}))}}return e}function $e(e={report:Rd}){return function(t,n,r){let i=t[n];if("function"==typeof i){let o="AgoraRTCClient"===t.constructor.name?"Client":t.constructor.name;r.value=function(...t){var r;let a=e.report.reportApiInvoke(this._sessionId||null,{name:_i(r="".concat(o,".")).call(r,n),options:t,tag:Bl.TRACER});try{let e=i.apply(this,t);return a.onSuccess(),e}catch(e){throw a.onError(e),e}}}return r}}function et(e={report:Rd}){return function(t,n,r){let i=t[n];if("function"==typeof i){let o="AgoraRTCClient"===t.constructor.name?"Client":t.constructor.name;r.value=async function(...t){var r;let a=e.report.reportApiInvoke(this._sessionId||null,{name:_i(r="".concat(o,".")).call(r,n),options:t,tag:Bl.TRACER});try{let e=await i.apply(this,t);return a.onSuccess(),e}catch(e){throw a.onError(e),e}}}return r}}function tt(){Ld?(Tl.info("create audio context"),Pd=new Ld,Bd.curState=Pd.state,Pd.onstatechange=()=>{var e;Bd.prevState=Bd.curState,Bd.curState=Pd?Pd.state:void 0,Tl.debug("AudioContext State Change",_i(e="".concat(Bd.prevState,"=>")).call(e,Bd.curState)),(re()||se())&&"running"===Bd.prevState&&"interrupted"===Bd.curState&&(Tl.info("ios-interruption-start"),Bd.emit(Dd.IOS_INTERRUPTION_START)),(re()||se())&&"interrupted"===Bd.prevState&&"running"===Bd.curState&&(Tl.info("ios-interruption-end"),Bd.emit(Dd.IOS_INTERRUPTION_END)),Bd.emit("state-change")},async function(e){function t(t){"running"===e.state?n(!1):re()||se()?"suspended"===e.state&&(n(!0),t?e.resume().then(r,r):n(!1)):"closed"!==e.state&&(n(!0),t?e.resume().then(r,r):n(!1))}function n(e){if(h!==e){h=e;for(let t=0,n=l;t<n.length;t+=1){let r=n[t];e?window.addEventListener(r,i,{capture:!0,passive:!0}):window.removeEventListener(r,i,{capture:!0,passive:!0})}}}function r(){t(!1)}function i(){t(!0)}function o(e){if(!f)if(u.paused)if(e){a(!1),f=!0,e=void 0;try{(e=u.play())?e.then(s,s):(u.addEventListener("playing",s),u.addEventListener("abort",s),u.addEventListener("error",s))}catch(e){s()}}else a(!0);else a(!1)}function a(e){if(d!==e){d=e;for(let t=0,n=l;t<n.length;t++){let r=n[t];e?window.addEventListener(r,c,{capture:!0,passive:!0}):window.removeEventListener(r,c,{capture:!0,passive:!0})}}}function s(){u.removeEventListener("playing",s),u.removeEventListener("abort",s),u.removeEventListener("error",s),f=!1,o(!1)}function c(){o(!0)}let u,l="click contextmenu auxclick dblclick mousedown mouseup touchend keydown keyup".split(" "),h=!1,d=!1,f=!1;if(re()){let t=e.createMediaStreamDestination(),n=document.createElement("div");n.innerHTML="<audio x-webkit-airplay='deny'></audio>",u=n.children.item(0),u.controls=!1,u.disableRemotePlayback=!0,u.preload="auto",u.srcObject=t.stream,o(!0)}Bd.on("state-change",(function(){t(!0)})),t(!1)}(Pd)):Tl.error("your browser is not support web audio")}function nt(){if(!Pd&&(tt(),!Pd))throw new Rl(Yu.NOT_SUPPORTED,"can not create audio context");return Pd}function rt(e){if(!function(){if(null!==Md)return Md;var e=nt();let t=e.createBufferSource(),n=e.createGain();e=e.createGain(),t.connect(n),t.connect(e),t.disconnect(n),e=!1;try{t.disconnect(n)}catch(t){e=!0}return t.disconnect(),Md=e,e}()){Tl.debug("polyfill audio node");var t=e.connect,n=e.disconnect;e.connect=(n,r,i)=>{var o;return e._inputNodes||(e._inputNodes=[]),ru(o=e._inputNodes).call(o,n)||(n instanceof AudioNode?(e._inputNodes.push(n),t.call(e,n,r,i)):t.call(e,n,r)),e},e.disconnect=(r,i,o)=>{n.call(e),r?Qt(e._inputNodes,r):e._inputNodes=[];for(let n of e._inputNodes)t.call(e,n)}}}function it(e,t){let n=1/t,r=nt(),i=r.createGain();i.gain.value=0,i.connect(r.destination);let o=!1,a=()=>{if(o)return void(i=null);const t=r.createOscillator();t.onended=a,t.connect(i),t.start(0),t.stop(r.currentTime+n),e(r.currentTime)};return a(),()=>{o=!0}}async function ot(e,t){let n=(e,t)=>e?"number"!=typeof e?e.max||e.exact||e.ideal||e.min||t:e:t;return e={audio:!1,video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:e,maxHeight:n(t.height,1080),maxWidth:n(t.width,1920)}}},t.frameRate&&"number"!=typeof t.frameRate?(e.video.mandatory.maxFrameRate=t.frameRate.max,e.video.mandatory.minFrameRate=t.frameRate.min):"number"==typeof t.frameRate&&(e.video.mandatory.maxFrameRate=t.frameRate),await navigator.mediaDevices.getUserMedia(e)}async function at(e){let t=await(n=await st(e.mediaSource),new wc(((e,t)=>{const r=document.createElement("div");r.innerText="share screen",r.setAttribute("style","text-align: center; height: 25px; line-height: 25px; border-radius: 4px 4px 0 0; background: #D4D2D4; border-bottom:  solid 1px #B9B8B9;");const i=document.createElement("div");i.setAttribute("style","width: 100%; height: 500px; padding: 15px 25px ; box-sizing: border-box;");const o=document.createElement("div");o.innerText="Agora Web Screensharing wants to share the contents of your screen with webdemo.agorabeckon.com. Choose what you'd like to share.",o.setAttribute("style","height: 12%;");const a=document.createElement("div");a.setAttribute("style","width: 100%; height: 80%; background: #FFF; border:  solid 1px #CBCBCB; display: flex; flex-wrap: wrap; justify-content: space-around; overflow-y: scroll; padding: 0 15px; box-sizing: border-box;");const s=document.createElement("div");s.setAttribute("style","text-align: right; padding: 16px 0;");const c=document.createElement("button");c.innerHTML="cancel",c.setAttribute("style","width: 85px;"),c.onclick=()=>{document.body.removeChild(u);const e=Error("NotAllowedError");e.name="NotAllowedError",t(e)},s.appendChild(c),i.appendChild(o),i.appendChild(a),i.appendChild(s);const u=document.createElement("div");u.setAttribute("style","position: fixed; z-index: 99999999; top: 50%; left: 50%; width: 620px; height: 525px; background: #ECECEC; border-radius: 4px; -webkit-transform: translate(-50%,-50%); transform: translate(-50%,-50%);"),u.appendChild(r),u.appendChild(i),document.body.appendChild(u),Sc(n).call(n,(t=>{if(t.id){const n=document.createElement("div");n.setAttribute("style","width: 30%; height: 160px; padding: 20px 0; text-align: center;box-sizing: content-box;");let r=t.thumbnail;const{width:i}=r.getSize();1920<i&&(r=r.resize({width:1920})),n.innerHTML='<div style="height: 120px; display: table-cell; vertical-align: middle;"><img style="width: 100%; background: #333333; box-shadow: 1px 1px 1px 1px rgba(0, 0, 0, 0.2);" src='+r.toDataURL()+' /></div><span style="\theight: 40px; line-height: 40px; display: inline-block; width: 70%; word-break: keep-all; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">'+t.name.replace(/[\u00A0-\u9999<>&]/g,(function(e){return"&#"+e.charCodeAt(0)+";"}))+"</span>",n.onclick=()=>{document.body.removeChild(u),e(t.id)},a.appendChild(n)}}))})));var n;return await ot(t,e)}async function st(e){let t=["window","screen"];"application"!==e&&"window"!==e||(t=["window"]),"screen"===e&&(t=["screen"]);let n=ct();if(!n)throw new Rl(Yu.ELECTRON_IS_NULL);e=null;try{e=n.desktopCapturer.getSources({types:t})}catch(t){e=null}e&&e.then||(e=new wc(((e,r)=>{n.desktopCapturer.getSources({types:t},((t,n)=>{t?r(t):e(n)}))})));try{return await e}catch(e){throw new Rl(Yu.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR,e.toString())}}function ct(){if(Fd)return Fd;try{return Fd=window.require("electron"),Fd}catch(e){return null}}async function ut(e,t){let n=0,r=null;for(;2>n;)try{r=await lt(e,t,0<n);break}catch(e){var i,o;if(e instanceof Rl)throw Tl.error(_i(o="[".concat(t,"] ")).call(o,e.toString())),e;let r=ht(e.name||e.code||e,e.message);if(r.code!==Yu.MEDIA_OPTION_INVALID)throw Tl.error(_i(i="[".concat(t,"] ")).call(i,r.toString())),r;Tl.debug("[".concat(t,"] detect media option invalid, retry")),n+=1,await xt(500)}if(!r)throw new Rl(Yu.UNEXPECTED_ERROR,"can not find stream after getUserMedia");return r}async function lt(e,t,n){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Rl(Yu.NOT_SUPPORTED,"can not find getUserMedia");n&&(e.video&&(delete e.video.width,delete e.video.height),e.screen&&(delete e.screen.width,delete e.screen.height));var r,i,o=Th;if(n=new MediaStream,e.audioSource&&n.addTrack(e.audioSource),e.videoSource&&n.addTrack(e.videoSource),!e.audio&&!e.video&&!e.screen)return Tl.debug("Using Video Source/ Audio Source"),n;if(e.screen)if(ct())e.screen.sourceId?dt(n,await ot(e.screen.sourceId,e.screen)):dt(n,await at(e.screen));else if(ee()&&e.screen.extensionId&&e.screen.mandatory){if(!o.getStreamFromExtension)throw new Rl(Yu.NOT_SUPPORTED,"This browser does not support screen sharing");Tl.debug("[".concat(t,'] Screen access on chrome stable, looking for extension"'));var a=await(r=e.screen.extensionId,i=t,new wc(((e,t)=>{try{chrome.runtime.sendMessage(r,{getStream:!0},(n=>{if(!n||!n.streamId)return Tl.error("[".concat(i,"] No response from Chrome Plugin. Plugin not installed properly"),n),void t(new Rl(Yu.CHROME_PLUGIN_NO_RESPONSE,"No response from Chrome Plugin. Plugin not installed properly"));e(n.streamId)}))}catch(e){var n;Tl.error(_i(n="[".concat(i,"] AgoraRTC screensharing plugin is not accessible(")).call(n,r,")"),e.toString()),t(new Rl(Yu.CHROME_PLUGIN_NOT_INSTALL))}})));e.screen.mandatory.chromeMediaSourceId=a,dt(n,await navigator.mediaDevices.getUserMedia({video:{mandatory:e.screen.mandatory}}))}else if(o.getDisplayMedia)e.screen.mediaSource&&He(e.screen.mediaSource),a={width:e.screen.width,height:e.screen.height,frameRate:e.screen.frameRate,displaySurface:"screen"===e.screen.mediaSource?"monitor":e.screen.mediaSource},Tl.debug("[".concat(t,"] getDisplayMedia:"),Fr({video:a,audio:!!e.screenAudio})),dt(n,await navigator.mediaDevices.getDisplayMedia({video:a,audio:!!e.screenAudio}));else{if(!ne())throw Tl.error("[".concat(t,"] This browser does not support screenSharing")),new Rl(Yu.NOT_SUPPORTED,"This browser does not support screen sharing");e.screen.mediaSource&&He(e.screen.mediaSource),o={video:{mediaSource:e.screen.mediaSource,width:e.screen.width,height:e.screen.height,frameRate:e.screen.frameRate}},Tl.debug(_i(a="[".concat(t,"] getUserMedia: ")).call(a,Fr(o))),dt(n,await navigator.mediaDevices.getUserMedia(o))}if(!e.video&&!e.audio)return n;let s;e={video:e.video,audio:e.audio},Tl.debug("[".concat(t,"] GetUserMedia"),Fr(e)),J(),t=null,(te()||re()||Z())&&(t=await Qd.lock());try{s=await navigator.mediaDevices.getUserMedia(e)}catch(e){throw t&&t(),e}return e.audio&&(Gd=!0),e.video&&(qd=!0),dt(n,s),t&&t(),n}function ht(e,t){switch(e){case"Starting video failed":case"OverconstrainedError":case"TrackStartError":var n;return new Rl(Yu.MEDIA_OPTION_INVALID,_i(n="".concat(e,": ")).call(n,t));case"NotFoundError":case"DevicesNotFoundError":var r;return new Rl(Yu.DEVICE_NOT_FOUND,_i(r="".concat(e,": ")).call(r,t));case"NotSupportedError":var i;return new Rl(Yu.NOT_SUPPORTED,_i(i="".concat(e,": ")).call(i,t));case"NotReadableError":var o;return new Rl(Yu.NOT_READABLE,_i(o="".concat(e,": ")).call(o,t));case"InvalidStateError":case"NotAllowedError":case"PERMISSION_DENIED":case"PermissionDeniedError":var a;return new Rl(Yu.PERMISSION_DENIED,_i(a="".concat(e,": ")).call(a,t));case"ConstraintNotSatisfiedError":var s;return new Rl(Yu.CONSTRAINT_NOT_SATISFIED,_i(s="".concat(e,": ")).call(s,t));default:var c;return Tl.error("getUserMedia unexpected error",e),new Rl(Yu.UNEXPECTED_ERROR,_i(c="".concat(e,": ")).call(c,t))}}function dt(e,t){let n=e.getVideoTracks()[0],r=e.getAudioTracks()[0],i=t.getVideoTracks()[0];(t=t.getAudioTracks()[0])&&(r&&e.removeTrack(r),e.addTrack(t)),i&&(n&&e.removeTrack(n),e.addTrack(i))}function ft(){if(!Yd){let e=t=>{t.preventDefault(),Yd=!1,document.body.removeEventListener("touchstart",e,!0),document.body.removeEventListener("mousedown",e,!0)};Yd=!0,document.body.addEventListener("touchstart",e,!0),document.body.addEventListener("mousedown",e,!0),Jd.emit("autoplay-failed")}}function pt(){return function(e,t,n){let r=e[t];"function"==typeof r&&(n.value=function(...e){this._isClosed&&new Rl(Yu.INVALID_OPERATION,"[".concat(this.getTrackId(),"] cannot operate a closed track")).print("warning");let t=r.apply(this,e);return t instanceof wc?new wc(((e,n)=>{t.then(e).catch(n)})):t})}}function gt(e,t){var n=Ba(e);if(pd){var r=pd(e);t&&(r=os(r).call(r,(function(t){return ns(e,t).enumerable}))),n.push.apply(n,r)}return n}function At(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)Oa(n=gt(Object(r),!0)).call(n,(function(t){gd(e,t,r[t])}));else if(xh)Rh(e,xh(r));else{var i;Oa(i=gt(Object(r))).call(i,(function(t){qa(e,t,ns(r,t))}))}}return e}function vt(e,t){var n=Ba(e);if(pd){var r=pd(e);t&&(r=os(r).call(r,(function(t){return ns(e,t).enumerable}))),n.push.apply(n,r)}return n}function mt(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)Oa(n=vt(Object(r),!0)).call(n,(function(t){gd(e,t,r[t])}));else if(xh)Rh(e,xh(r));else{var i;Oa(i=vt(Object(r))).call(i,(function(t){qa(e,t,ns(r,t))}))}}return e}function yt(e,t){var n=Ba(e);if(pd){var r=pd(e);t&&(r=os(r).call(r,(function(t){return ns(e,t).enumerable}))),n.push.apply(n,r)}return n}function bt(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)Oa(n=yt(Object(r),!0)).call(n,(function(t){gd(e,t,r[t])}));else if(xh)Rh(e,xh(r));else{var i;Oa(i=yt(Object(r))).call(i,(function(t){qa(e,t,ns(r,t))}))}}return e}function _t(e){if(!e.address||!e.tcp)throw new Rl(Yu.UNEXPECTED_RESPONSE,"Invalid address format ".concat(e));return e.address.match(/^[\.:\d]+$/)?"".concat(e.address.replace(/[^\d]/g,"-"),".edge.agora.io"):(Tl.info("Cannot recognized as IP address ".concat(e.address,". Used As Host instead")),_i(t="".concat(e.address,":")).call(t,e.tcp));var t}function Et(e,t){var n;let r=Mu.GATEWAY_DOMAINS,i=r[1]&&-1!==Mc(t).call(t,r[1])?1:0;return e.addresses=e.addresses||[],{gatewayAddrs:Sc(n=e.addresses).call(n,(e=>{var t,n,o;return e.ip.match(/^[\.:\d]+$/)?_i(t=_i(n="".concat(e.ip.replace(/[^\d]/g,"-"),".")).call(n,r[i++%r.length],":")).call(t,e.port):(Tl.info("Cannot recognized as IP address ".concat(e.ip,". Used As Host instead")),_i(o="".concat(e.ip,":")).call(o,e.port))})),uid:e.uid,cid:e.cid,vid:e.detail&&e.detail[8],uni_lbs_ip:e.detail&&e.detail[1],res:e,csIp:e.detail&&e.detail[502]}}function wt(e){return"number"==typeof e?e:e.exact||e.ideal||e.max||e.min||0}function It(e,t){let n=e.videoSend[0];return n?(t=t&&t.videoSend[0]?t.videoSend[0].inputFrame:void 0,e={id:Lt(10,""),timestamp:new Date(e.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:n.ssrc.toString()},n.inputFrame&&(t&&n.inputFrame.height===t.height||(e.A_fhi=n.inputFrame.height?n.inputFrame.height.toString():"0"),t&&n.inputFrame.width===t.width||(e.A_fwi=n.inputFrame.width?n.inputFrame.width.toString():"0"),t&&n.inputFrame.frameRate===t.frameRate||(e.A_fri=n.inputFrame.frameRate?n.inputFrame.frameRate.toString():"0")),e):null}function Ct(e){return 0<=e&&.17>e?1:.17<=e&&.36>e?2:.36<=e&&.59>e?3:.59<=e&&1>=e?4:1<e?5:0}function St(e,t){let n={};return e.height&&e.width&&(t=t._videoHeight||t.getMediaStreamTrack(!0).getSettings().height,n.scaleResolutionDownBy=t?t/wt(e.height):4),n.maxFramerate=e.framerate?wt(e.framerate):void 0,n.maxBitrate=e.bitrate?1e3*e.bitrate:void 0,n}function Tt(e,t){var n;let r,i;switch(t){case fd.CHOOSE_SERVER:r=4096,t="choose server";break;case fd.CLOUD_PROXY:r=1048576,t="proxy";break;case fd.CLOUD_PROXY_5:r=4194304,t="proxy5";break;default:throw new Rl(Yu.UNEXPECTED_ERROR,"multi unlibs response transformer get unknown service id",{csIp:e.detail&&e.detail[502],retry:!1})}if(Oa(n=e.response_body).call(n,(t=>{var n;t.buffer&&t.buffer.flag===r&&(i={code:t.buffer.code,addresses:Sc(n=t.buffer.edges_services).call(n,(e=>bt({},e,{ticket:t.buffer.cert}))),server_ts:e.enter_ts,uid:t.buffer.uid,cid:t.buffer.cid,cname:t.buffer.cname,detail:bt({},t.buffer.detail,{},e.detail),flag:t.buffer.flag,opid:e.opid})})),!i)throw new Rl(Yu.MULTI_UNILBS_RESPONSE_ERROR,"cannot parse response ".concat(t," from multi unilbs response"),{csIp:e.detail&&e.detail[502]});return i}function Rt(e){var t;return Sc(t=e.addresses).call(t,(e=>({address:e.ip,tcpport:e.port,udpport:e.port,username:xu.username,password:xu.password})))}function kt(e,t){var n=Ba(e);if(pd){var r=pd(e);t&&(r=os(r).call(r,(function(t){return ns(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ot(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)Oa(n=kt(Object(r),!0)).call(n,(function(t){gd(e,t,r[t])}));else if(xh)Rh(e,xh(r));else{var i;Oa(i=kt(Object(r))).call(i,(function(t){qa(e,t,ns(r,t))}))}}return e}function Nt(e){return window.TextEncoder?(new TextEncoder).encode(e).length:e.length}function xt(e){return new wc((t=>{window.setTimeout(t,e)}))}function Dt(e){let t=new Rl(Yu.TIMEOUT,"timeout");return new wc(((n,r)=>{window.setTimeout((()=>r(t)),e)}))}function Lt(e=7,t){var n,r;let i=Math.random().toString(16).substr(2,e).toLowerCase();return i.length===e?_i(n="".concat(t)).call(n,i):_i(r="".concat(t)).call(r,i)+Lt(e-i.length,"")}function Pt(e){return new wc(((t,n)=>{let r=!1,i=document.createElement("video");i.setAttribute("autoplay",""),i.setAttribute("muted",""),i.muted=!0,i.autoplay=!0,i.setAttribute("playsinline",""),i.setAttribute("style","position: fixed; top: 0; left: 0; width: 1px; height: 1px"),document.body.appendChild(i),n=re()?"canplay":"playing",i.addEventListener(n,(()=>{let e=i.videoWidth,n=i.videoHeight;!e&&ne()||(r=!0,i.srcObject=null,i.remove(),t([e,n]))})),i.srcObject=new MediaStream([e]),i.play().catch(lf),el((()=>{r||(i.srcObject=null,i.remove(),t([i.videoWidth,i.videoHeight]))}),4e3)}))}function Bt(e){return wc.all(Sc(e).call(e,(e=>e.then((e=>{throw e}),(e=>e))))).then((e=>{throw e}),(e=>e))}function Mt(e,t,...n){return 0===e.getListeners(t).length?wc.reject(new Rl(Yu.UNEXPECTED_ERROR,"can not emit promise")):new wc(((r,i)=>{e.emit(t,...n,r,i)}))}function jt(e,t,...n){return 0===e.getListeners(t).length?wc.resolve():Mt(e,t,...n)}function Ut(e,t,...n){return 0===e.getListeners(t).length?null:Ft(e,t,...n)}function Ft(e,t,...n){let r=null,i=null;if(e.emit(t,...n,(e=>{r=e}),(e=>{i=e})),null!==i)throw i;if(null===r)throw new Rl(Yu.UNEXPECTED_ERROR,"handler is not sync");return r}function Qt(e,t){-1!==(t=Mc(e).call(e,t))&&Nc(e).call(e,t,1)}function Gt(e){let t=[];return Oa(e).call(e,(e=>{-1===Mc(t).call(t,e)&&t.push(e)})),t}function qt(e){wc.resolve().then(e)}function Vt(e,t){hf[t]||(hf[t]=!0,e())}function Kt(e){e=window.atob(e);let t=new Uint8Array(new ArrayBuffer(e.length));for(let n=0;n<e.length;n+=1)t[n]=e.charCodeAt(n);return t}function Ht(e){let t="";for(let n=0;n<e.length;n+=1)t+=String.fromCharCode(e[n]);return window.btoa(t)}function Wt(e){var t=gf[Math.floor(e/1e4)];if(!t)return{desc:"unkonw error",retry:!1};if(!(t=t[e%1e4])){if(Math.floor(e/1e4)===Ul.ACCESS_POINT){if("1"===(t=e%1e4).toString()[0])return{desc:e.toString(),retry:!1};if("2"===t.toString()[0])return{desc:e.toString(),retry:!0}}return{desc:"unkonw error",retry:!1}}return t}function zt(e){return Af[e]||{desc:"UNKNOW_ERROR_".concat(e),action:"failed"}}async function Yt(){function e(e){let t=c["_"+e];return t||n("Assertion failed: Cannot call unknown function "+e+", make sure it is exported"),t}function t(t,n,r,i,o){o={string:function(e){let t=0;if(null!=e&&0!==e){var n=1+(e.length<<2);t=D(n);var r=m,i=t;if(0<n){n=i+n-1;for(let t=0;t<e.length;++t){let o=e.charCodeAt(t);if(55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&e.charCodeAt(++t)),127>=o){if(i>=n)break;r[i++]=o}else{if(2047>=o){if(i+1>=n)break;r[i++]=192|o>>6}else{if(65535>=o){if(i+2>=n)break;r[i++]=224|o>>12}else{if(i+3>=n)break;r[i++]=240|o>>18,r[i++]=128|o>>12&63}r[i++]=128|o>>6&63}r[i++]=128|63&o}}r[i]=0}}return t},array:function(e){const t=D(e.length);return v.set(e,t),t}};let a=e(t),s=[];if(t=0,i)for(let e=0;e<i.length;e++){let n=o[r[e]];n?(0===t&&(t=N()),s[e]=n(i[e])):s[e]=i[e]}return r=function(e){if("string"===n)if(i=e){e=m;var t=i+r,r=i;let n="";for(;e[r]&&!(r>=t);)++r;if(16<r-i&&e.subarray&&A)e=A.decode(e.subarray(i,r));else{for(;i<r;){if(!(128&(t=e[i++]))){n+=String.fromCharCode(t);continue}let r=63&e[i++];if(192==(224&t)){n+=String.fromCharCode((31&t)<<6|r);continue}let o=63&e[i++];t=224==(240&t)?(15&t)<<12|r<<6|o:(7&t)<<18|r<<12|o<<6|63&e[i++],65536>t?n+=String.fromCharCode(t):(t-=65536,n+=String.fromCharCode(55296|t>>10,56320|1023&t))}e=n}}else e="";else e="boolean"===n?!!e:e;return e;var i}(r=a.apply(null,s)),0!==t&&x(t),r}function n(e){throw c.onAbort&&c.onAbort(e),p(e+=""),g=!0,new WebAssembly.RuntimeError("abort("+e+"). Build with -s ASSERTIONS=1 for more info.")}function r(e){for(;0<e.length;){let t=e.shift();if("function"==typeof t){t(c);continue}let n=t.func;"number"==typeof n?void 0===t.arg?y.get(n)():y.get(n)(t.arg):n(void 0===t.arg?null:t.arg)}}function i(e){function t(){if(!R&&(R=!0,c.calledRun=!0,!g)){if(r(_),r(E),c.onRuntimeInitialized&&c.onRuntimeInitialized(),c.postRun)for("function"==typeof c.postRun&&(c.postRun=[c.postRun]);c.postRun.length;){var e=c.postRun.shift();w.unshift(e)}r(w)}}0<I||(function(){if(c.preRun)for("function"==typeof c.preRun&&(c.preRun=[c.preRun]);c.preRun.length;){var e=c.preRun.shift();b.unshift(e)}r(b)}(),0<I||(c.setStatus?(c.setStatus("Running..."),el((function(){el((function(){c.setStatus("")}),1),t()}),1)):t()))}var o,a;if(Ff)return Ff;let s,c={},u={};for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(u[s]=c[s]);let l=!1,h=!1;l="object"==typeof window,h="function"==typeof importScripts;let d="";(l||h)&&(h?d=self.location.href:"undefined"!=typeof document&&document.currentScript&&(d=document.currentScript.src),d=0!==Mc(d).call(d,"blob:")?d.substr(0,Uf(d).call(d,"/")+1):""),c.print||Zc(o=console.log).call(o,console);let f,p=c.printErr||Zc(a=console.warn).call(a,console);for(s in u)Object.prototype.hasOwnProperty.call(u,s)&&(c[s]=u[s]);u=null,"object"!=typeof WebAssembly&&n("no native wasm support detected");let g=!1,A="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");let v,m,y,b=[],_=[],E=[],w=[];_.push({func:function(){k()}});let I=0,C=null;var S;c.preloadedImages={},c.preloadedAudios={},pu(S=o="deflate.wasm").call(S,"data:application/octet-stream;base64,")||(o=function(e){return c.locateFile?c.locateFile(e,d):d+e}(o));let T={emscripten_memcpy_big:function(e,t,n){var r=m.copyWithin;(m===bf||m instanceof Array&&r===bf.copyWithin?yf:r).call(m,e,t,t+n)},emscripten_resize_heap:function(e){n("OOM")}};await async function(){function e(e,t){c.asm=e.exports,f=c.asm.memory,e=f.buffer,c.HEAP8=v=new Int8Array(e),c.HEAP16=new Int16Array(e),c.HEAP32=new Int32Array(e),c.HEAPU8=m=new Uint8Array(e),c.HEAPU16=new Uint16Array(e),c.HEAPU32=new Uint32Array(e),c.HEAPF32=new Float32Array(e),c.HEAPF64=new Float64Array(e),y=c.asm.__indirect_function_table,I--,c.monitorRunDependencies&&c.monitorRunDependencies(I),0==I&&C&&(e=C,C=null,e())}let t={env:T,wasi_snapshot_preview1:T};if(I++,c.monitorRunDependencies&&c.monitorRunDependencies(I),c.instantiateWasm)try{return c.instantiateWasm(t,e)}catch(e){return p("Module.instantiateWasm callback failed with error: "+e),!1}return await function(e){return new wc(((e,t)=>{e(qf().buffer)})).then((function(e){return WebAssembly.instantiate(e,t)})).then(e,(function(e){p("failed to asynchronously prepare wasm: "+e),n(e)}))}((function(t){e(t.instance)})),{}}();let R,k=c.___wasm_call_ctors=function(){return(k=c.___wasm_call_ctors=c.asm.__wasm_call_ctors).apply(null,arguments)},O=c._malloc=function(){return(O=c._malloc=c.asm.malloc).apply(null,arguments)};c._free=function(){return(c._free=c.asm.free).apply(null,arguments)},c.___errno_location=function(){return(c.___errno_location=c.asm.__errno_location).apply(null,arguments)},c._zlibCompress=function(){return(c._zlibCompress=c.asm.zlibCompress).apply(null,arguments)};let N=c.stackSave=function(){return(N=c.stackSave=c.asm.stackSave).apply(null,arguments)},x=c.stackRestore=function(){return(x=c.stackRestore=c.asm.stackRestore).apply(null,arguments)},D=c.stackAlloc=function(){return(D=c.stackAlloc=c.asm.stackAlloc).apply(null,arguments)};if(c.ccall=t,c.cwrap=function(n,r,i,o){let a=wf(i=i||[]).call(i,(function(e){return"number"===e}));return"string"!==r&&a&&!o?e(n):function(){return t(n,r,i,arguments)}},c.allocate=function(e,t){let n;return n=1==t?D(e.length):O(e.length),e.subarray||qc(e)?m.set(e,n):m.set(new Uint8Array(e),n),n},C=function e(){R||i(),R||(C=e)},c.run=i,c.preInit)for("function"==typeof c.preInit&&(c.preInit=[c.preInit]);0<c.preInit.length;)c.preInit.pop()();return i(),Ff=c,c}function Jt(e,t){var n=Ba(e);if(pd){var r=pd(e);t&&(r=os(r).call(r,(function(t){return ns(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xt(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)Oa(n=Jt(Object(r),!0)).call(n,(function(t){gd(e,t,r[t])}));else if(xh)Rh(e,xh(r));else{var i;Oa(i=Jt(Object(r))).call(i,(function(t){qa(e,t,ns(r,t))}))}}return e}function Zt(e,t){var n=Ba(e);if(pd){var r=pd(e);t&&(r=os(r).call(r,(function(t){return ns(e,t).enumerable}))),n.push.apply(n,r)}return n}function $t(e,t,n,r,i){Yg+=1;let o,a,s={sid:n.sid,command:"convergeAllocateEdge",uid:"666",appId:n.appId,ts:Math.floor(tl()/1e3),seq:Yg,requestId:Yg,version:ku,cname:n.cname},c={service_name:t,json_body:Fr(s)},u=e[0];return Je((async()=>{o=tl();var e=await ze(u,{data:c,cancelToken:r,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"}});if(a=tl()-o,0!==e.code){var n=new Rl(Yu.UNEXPECTED_RESPONSE,"live streaming ap error, code"+e.code,{retry:!0,responseTime:a});throw Tl.error(n.toString()),n}if(200!==(e=JSON.parse(e.json_body)).code)throw e=new Rl(Yu.UNEXPECTED_RESPONSE,_i(n="live streaming app center error, code: ".concat(e.code,", reason: ")).call(n,e.reason),{code:e.code,responseTime:a}),Tl.error(e.toString()),e;if(!e.servers||0===e.servers.length)throw n=new Rl(Yu.UNEXPECTED_RESPONSE,"live streaming app center empty server",{code:e.code,responseTime:a}),Tl.error(n.toString()),n;return n=function(e,t){var n;return{addressList:Sc(n=e.servers).call(n,(e=>{var n,r;return _i(n=_i(r="wss://".concat(e.address.replace(/\./g,"-"),".edge.agora.io:")).call(r,e.wss,"?serviceName=")).call(n,encodeURIComponent(t))})),workerToken:e.workerToken,vid:e.vid}}(e,t),Mu.LIVE_STREAMING_ADDRESS&&(n.addressList=Mu.LIVE_STREAMING_ADDRESS instanceof Array?Mu.LIVE_STREAMING_ADDRESS:[Mu.LIVE_STREAMING_ADDRESS]),function(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)Oa(n=Zt(Object(r),!0)).call(n,(function(t){gd(e,t,r[t])}));else if(xh)Rh(e,xh(r));else{var i;Oa(i=Zt(Object(r))).call(i,(function(t){qa(e,t,ns(r,t))}))}}return e}({},n,{responseTime:a})}),((r,i)=>(Rd.apworkerEvent(n.sid,{success:!0,sc:200,serviceName:t,responseDetail:Fr(r.addressList),firstSuccess:0===i,responseTime:a,serverIp:e[i%e.length]}),!1)),((r,i)=>(Rd.apworkerEvent(n.sid,{success:!1,sc:r.data&&r.data.code||200,serviceName:t,responseTime:a,serverIp:e[i%e.length]}),!!(r.code!==Yu.OPERATION_ABORTED&&r.code!==Yu.UNEXPECTED_RESPONSE||r.data&&r.data.retry)&&(u=e[(i+1)%e.length],!0))),i)}function en({url:e,areaCode:t},n,r,i){let o=tl(),[a,s]=$g(n,t,[fd.CHOOSE_SERVER]),c=Sd.networkState;return Je((async()=>{c&&Sd.networkState===Ih.OFFLINE&&Sd.onlineWaiter&&await wc.race([Sd.onlineWaiter,xt(i&&i.maxRetryTimeout||Td.maxRetryTimeout)]),c=Sd.networkState;var t=await ze(e,{data:a,cancelToken:r,headers:{"Content-Type":"multipart/form-data;"}},!0);return Xg(t,e,n,o,[fd.CHOOSE_SERVER]),t=Tt(t,fd.CHOOSE_SERVER),Zg(t),Et(t,e)}),(t=>(t&&Rd.joinChooseServer(n.sid,{lts:o,succ:!0,csAddr:e,opid:s,serverList:t.gatewayAddrs,ec:null,cid:t.cid.toString(),uid:t.uid.toString(),csIp:t.csIp,unilbsServerIds:[fd.CHOOSE_SERVER].toString()}),!1)),(t=>t.code!==Yu.OPERATION_ABORTED&&(t.code===Yu.CAN_NOT_GET_GATEWAY_SERVER?t.data.retry:(Rd.joinChooseServer(n.sid,{lts:o,succ:!1,csAddr:e,serverList:null,opid:s,ec:t.code,csIp:t.data&&t.data.csIp,unilbsServerIds:[fd.CHOOSE_SERVER].toString(),extend:Fr({networkState:c})}),Tl.warning("[".concat(n.clientId,"] Choose server network error, retry"),t),!0))),i)}function tn({url:e,areaCode:t,serviceIds:n},r,i,o){let a,s=tl(),[c,u]=$g(r,t,n);return Je((async()=>{a&&Sd.networkState===Ih.OFFLINE&&Sd.onlineWaiter&&await wc.race([Sd.onlineWaiter,xt(o&&o.maxRetryTimeout||Td.maxRetryTimeout)]),a=Sd.networkState;var t=await ze(e,{data:c,cancelToken:i,headers:{"Content-Type":"multipart/form-data;"}},!0);Xg(t,e,r,s,n);let u=Tt(t,fd.CHOOSE_SERVER);return t=Tt(t,"proxy5"===r.cloudProxyServer?fd.CLOUD_PROXY_5:fd.CLOUD_PROXY),Zg(u),{gatewayInfo:Et(u,e),proxyInfo:t,url:e}}),(t=>{var i;return t.gatewayInfo&&Rd.joinChooseServer(r.sid,{lts:s,succ:!0,csAddr:e,serverList:t.gatewayInfo.gatewayAddrs,ec:null,opid:u,cid:t.gatewayInfo.cid.toString(),uid:t.gatewayInfo.uid.toString(),csIp:t.gatewayInfo.csIp,unilbsServerIds:n.toString()}),t.proxyInfo&&Rd.joinWebProxyAP(r.sid,{lts:s,sucess:1,apServerAddr:e,turnServerAddrList:Sc(i=t.proxyInfo.addresses).call(i,(e=>e.ip)).join(","),errorCode:null,eventType:r.cloudProxyServer,unilbsServerIds:n.toString()}),!1}),(t=>t.code!==Yu.OPERATION_ABORTED&&(t.code===Yu.CAN_NOT_GET_GATEWAY_SERVER?t.data.retry:(Rd.joinWebProxyAP(r.sid,{lts:s,sucess:0,apServerAddr:e,turnServerAddrList:null,errorCode:t.code,eventType:r.cloudProxyServer,unilbsServerIds:n.toString(),extend:Fr({networkState:a})}),Tl.warning("[".concat(r.clientId,"] multi unilbs network error, retry"),t),!0))),o)}async function nn(e,t,n){return{gatewayInfo:await async function(e,t,n){var r,i;const o=Sc(r=qc(i=Mu.WEBCS_DOMAIN).call(i,0,Mu.AJAX_REQUEST_CONCURRENT)).call(r,(t=>{var n;return{url:e.proxyServer?_i(n="https://".concat(e.proxyServer,"/ap/?url=")).call(n,t+"/api/v2/transpond/webrtc?v=2"):"https://".concat(t,"/api/v2/transpond/webrtc?v=2"),areaCode:eA()}}));let a=null;const s=[];return a=await Bt([(async()=>await pf({fragementLength:Mu.FRAGEMENT_LENGTH,referenceList:o,asyncMapHandler:r=>(Tl.debug("[".concat(e.clientId,"] Connect to choose_server:"),r.url),en(r,e,t,n)),allFailedhandler:e=>{throw e[0]},promisesCollector:s}))(),(async()=>{var r;if(await xt(1e3),null!==a)return a;const i=Sc(r=Mu.WEBCS_DOMAIN_BACKUP_LIST).call(r,(t=>{var n;return{url:e.proxyServer?_i(n="https://".concat(e.proxyServer,"/ap/?url=")).call(n,t+"/api/v2/transpond/webrtc?v=2"):"https://".concat(t,"/api/v2/transpond/webrtc?v=2"),areaCode:eA()}}));return await pf({fragementLength:Mu.FRAGEMENT_LENGTH,referenceList:i,asyncMapHandler:r=>(Tl.debug("[".concat(e.clientId,"] Connect to backup choose_server:"),r.url),en(r,e,t,n)),allFailedhandler:e=>{throw e[0]},promisesCollector:s})})()]),s.length&&Oa(s).call(s,(e=>e.cancel&&"function"==typeof e.cancel&&e.cancel())),a}(e,t,n)}}async function rn(e,t,n,r){var i,o;if("disabled"===e.cloudProxyServer)return r?await nn(e,t,n):void 0;let a;if("443only"===e.cloudProxyServer||"normal"===e.cloudProxyServer){var s;let i;r?"normal"!==e.cloudProxyServer?[i,a]=await wc.all([an(e,t,n),nn(e,t,n)]):(i=await an(e,t,n),e.proxyServer=i.addresses[0],Rd.setProxyServer(e.proxyServer),Tl.setProxyServer(e.proxyServer),a=await nn(e,t,n)):(a=void 0,"normal"!==e.cloudProxyServer?i=await an(e,t,n):(i=await an(e,t,n),e.proxyServer=i.addresses[0],Rd.setProxyServer(e.proxyServer),Tl.setProxyServer(e.proxyServer))),e.turnServer={mode:"manual",servers:Sc(s=i.addresses).call(s,(t=>({turnServerURL:t,tcpport:"proxy3"===e.cloudProxyServer?void 0:i.serverResponse.tcpport?i.serverResponse.tcpport:xu.tcpport,udpport:"proxy4"===e.cloudProxyServer?void 0:i.serverResponse.udpport?i.serverResponse.udpport:xu.udpport,username:i.serverResponse.username||xu.username,password:i.serverResponse.password||xu.password,forceturn:"proxy4"!==e.cloudProxyServer&&"proxy5"!==e.cloudProxyServer,security:"proxy5"===e.cloudProxyServer})))}}else{let{proxyInfo:r,gatewayInfo:i}=await async function(e,t,n){var r,i;const o=Mu.PROXY_SERVER_TYPE3,a=(e,t)=>{var n;let r=o;return Ju(r)&&(r=0==t%2?o[1]:o[0]),_i(n="https://".concat(r,"/ap/?url=")).call(n,e)},s=Sc(r=qc(i=Mu.WEBCS_DOMAIN).call(i,0,Mu.AJAX_REQUEST_CONCURRENT)).call(r,((t,n)=>({url:a("".concat(t,"/api/v2/transpond/webrtc?v=2"),n),areaCode:eA(),serviceIds:[fd.CHOOSE_SERVER,"proxy5"===e.cloudProxyServer?fd.CLOUD_PROXY_5:fd.CLOUD_PROXY]})));let c=null;const u=[],{gatewayInfo:l,proxyInfo:h,url:d}=await Bt([(async()=>await pf({fragementLength:Mu.FRAGEMENT_LENGTH,referenceList:s,asyncMapHandler:r=>(Tl.debug("[".concat(e.clientId,"] Connect to choose_server:"),r.url),tn(r,e,t,n)),allFailedhandler:e=>{throw e[0]},promisesCollector:u}))(),(async()=>{var r;if(await xt(1e3),null!==c)return c;const i=Sc(r=Mu.WEBCS_DOMAIN_BACKUP_LIST).call(r,((e,t)=>({url:a("".concat(e,"/api/v2/transpond/webrtc?v=2"),t),areaCode:eA(),serviceIds:[11,18]})));return await pf({fragementLength:Mu.FRAGEMENT_LENGTH,referenceList:i,asyncMapHandler:r=>(Tl.debug("[".concat(e.clientId,"] Connect to backup choose_server:"),r.url),tn(r,e,t,n)),allFailedhandler:e=>{throw e[0]},promisesCollector:u})})()]);if(u.length&&Oa(u).call(u,(e=>e.cancel&&"function"==typeof e.cancel&&e.cancel())),!l||!h)throw new Rl(Yu.UNEXPECTED_ERROR,"missing gateway or proxy response").print();return Ju(o)&&d&&(r=new zg(d).host,ru(o).call(o,r)&&(e.proxyServer=r,Tl.setProxyServer(r),Rd.setProxyServer(r))),c={gatewayInfo:l,proxyInfo:Rt(h)},c}(e,t,n);a={gatewayInfo:i},e.turnServer={mode:"manual",servers:Sc(r).call(r,(t=>({turnServerURL:t.address,tcpport:"proxy3"===e.cloudProxyServer?void 0:t.tcpport?t.tcpport:xu.tcpport,udpport:"proxy4"===e.cloudProxyServer?void 0:t.udpport?t.udpport:xu.udpport,username:t.username||xu.username,password:t.password||xu.password,forceturn:"proxy4"!==e.cloudProxyServer&&"proxy5"!==e.cloudProxyServer,security:"proxy5"===e.cloudProxyServer})))}}return Tl.debug(_i(i=_i(o="[".concat(e.clientId,"] set proxy server: ")).call(o,e.proxyServer,", mode: ")).call(i,e.cloudProxyServer)),a}async function on(e,t,n,r){var i;let o=qc(i=Mu.ACCOUNT_REGISTER).call(i,0,Mu.AJAX_REQUEST_CONCURRENT);return i=[],i=t.proxyServer?Sc(o).call(o,(e=>{var n;return _i(n="https://".concat(t.proxyServer,"/ap/?url=")).call(n,e+"/api/v1")})):Sc(o).call(o,(e=>"https://".concat(e,"/api/v1"))),(await async function(e,t,n,r,i){let o=tl(),a={sid:n.sid,opid:10,appid:n.appId,string_uid:t},s=e[0];if(n=await Je((()=>ze(s+"".concat(-1===Mc(s).call(s,"?")?"?":"&","action=stringuid"),{data:a,cancelToken:r,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":72}})),((n,r)=>{if(0===n.code){var i;if(0>=n.uid||n.uid>=Math.pow(2,32))throw Tl.error(_i(i="Invalid Uint Uid ".concat(t," => ")).call(i,n.uid),n),Rd.reqUserAccount(a.sid,{lts:o,success:!1,serverAddr:s,stringUid:a.string_uid,uid:n.uid,errorCode:Yu.INVALID_UINT_UID_FROM_STRING_UID,extend:a}),new Rl(Yu.INVALID_UINT_UID_FROM_STRING_UID);return Rd.reqUserAccount(a.sid,{lts:o,success:!0,serverAddr:s,stringUid:a.string_uid,uid:n.uid,errorCode:null,extend:a}),!1}return(i=Wt(n.code)).retry&&(s=e[(r+1)%e.length]),Rd.reqUserAccount(a.sid,{lts:o,success:!1,serverAddr:s,stringUid:a.string_uid,uid:n.uid,errorCode:i.desc,extend:a}),i.retry}),((t,n)=>t.code!==Yu.OPERATION_ABORTED&&(Rd.reqUserAccount(a.sid,{lts:o,success:!1,serverAddr:s,stringUid:a.string_uid,uid:null,errorCode:t.code,extend:a}),s=e[(n+1)%e.length],!0)),i),0!==n.code)throw n=Wt(n.code),new Rl(Yu.UNEXPECTED_RESPONSE,n.desc);return n}(i,e,t,n,r)).uid}async function an(e,t,n){var r,i=tl(),o=Sc(r=Mu["normal"===e.cloudProxyServer?"PROXY_CS":"WEBCS_DOMAIN"]).call(r,(t=>{var n;return e.proxyServer?_i(n="https://".concat(e.proxyServer,"/ap/?url=")).call(n,t+"/api/v1"):"https://".concat(t,"/api/v1")}));if("proxy3"===e.cloudProxyServer||"proxy4"===e.cloudProxyServer||"proxy5"===e.cloudProxyServer){i=Sc(o).call(o,(e=>({url:e,areaCode:eA()})));var a=null;if(a=await pf({fragementLength:Mu.FRAGEMENT_LENGTH,referenceList:i,asyncMapHandler:r=>function({url:e,areaCode:t},n,r,i){let o=tl(),a={opid:133,flag:"proxy5"===n.cloudProxyServer?4194304:1048576,ts:+new Date,key:n.token,cname:n.cname,sid:n.sid,detail:{6:n.stringUid,11:t},uid:n.uid||0};return Je((async()=>await ze(e,{data:a,cancelToken:r,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":69}})),(t=>{var r;if(0===t.code)return Rd.joinWebProxyAP(n.sid,{lts:o,sucess:1,apServerAddr:e,turnServerAddrList:Sc(r=t.addresses).call(r,(e=>e.ip)).join(","),errorCode:null,eventType:n.cloudProxyServer}),!1;throw t=Wt(t.code),new Rl(Yu.CAN_NOT_GET_GATEWAY_SERVER,t.desc,{retry:t.retry})}),(t=>{return t.code!==Yu.OPERATION_ABORTED&&(t.code===Yu.CAN_NOT_GET_GATEWAY_SERVER?(Rd.joinWebProxyAP(a.sid,{lts:o,sucess:0,apServerAddr:e,turnServerAddrList:null,errorCode:t.code,eventType:n.cloudProxyServer}),Tl.warning(_i(r=_i(i=_i(s="[".concat(n.clientId,"] proxy ap server ")).call(s,e," failed, message: ")).call(i,t.message,", retry: ")).call(r,t.data.retry)),t.data.retry):(Rd.joinWebProxyAP(a.sid,{lts:o,sucess:0,apServerAddr:e,turnServerAddrList:null,errorCode:t.code,eventType:n.cloudProxyServer}),!0));var r,i,s}),i)}(r,e,t,n),allFailedhandler:()=>{throw Tl.error("[".concat(e.clientId,"] can not get proxy server after trying several times")),new Rl(Yu.CAN_NOT_GET_PROXY_SERVER)}}),!(i=a.addresses)||0===i.length)throw Tl.error("[".concat(e.clientId,"] can not get proxy server, empty proxy server list")),new Rl(Yu.CAN_NOT_GET_PROXY_SERVER,"empty proxy server list");return{addresses:Sc(i).call(i,(e=>e.ip)),serverResponse:{tcpport:i[0].port||443,udpport:i[0].port||xu.udpport,username:xu.username,password:xu.password}}}if(r=null,r=await pf({fragementLength:Mu.FRAGEMENT_LENGTH,referenceList:o,asyncMapHandler:r=>function(e,t,n,r){let i=tl(),o={command:"convergeAllocateEdge",sid:t.sid,appId:t.appId,token:t.token,uid:t.uid,cname:t.cname,ts:Math.floor(tl()/1e3),version:ku,seq:0,requestId:1};return Je((async()=>({res:await ze(e,{data:{service_name:"webrtc_proxy",json_body:Fr(o)},cancelToken:n,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":61}}),url:e})),(e=>{if(!e.res.json_body)throw Tl.debug("[".concat(t.clientId,"] Get proxy server failed: no json_body")),new Rl(Yu.UNEXPECTED_RESPONSE,Fr(e.res));let n=JSON.parse(e.res.json_body);var r,i;if(200!==n.code)throw Tl.debug(_i(r=_i(i="[".concat(t.clientId,"] Get proxy server failed: response code [")).call(i,n.code,"], reason [")).call(r,n.reason,"]")),new Rl(Yu.UNEXPECTED_RESPONSE,Fr(e.res));return Tl.debug("[".concat(t.clientId,"] App return server length"),n.servers.length),!1}),(t=>t.code!==Yu.OPERATION_ABORTED&&(Rd.requestProxyAppCenter(o.sid,{lts:i,succ:!1,APAddr:e,workerManagerList:null,ec:t.code,response:t.message}),!0)),r)}(r,e,t,n),allFailedhandler:()=>{throw Tl.error("[".concat(e.clientId,"] can not get proxy server after trying several times")),new Rl(Yu.CAN_NOT_GET_PROXY_SERVER)}}),o=JSON.parse(r.res.json_body),o=Sc(a=o.servers).call(a,_t),"443only"===e.cloudProxyServer)return{addresses:o,serverResponse:{tcpport:443,udpport:xu.udpport,username:xu.username,password:xu.password}};Rd.requestProxyAppCenter(e.sid,{lts:i,succ:!0,APAddr:r.url,workerManagerList:Fr(o),ec:null,response:Fr(r.res)}),i=tl(),a=Sc(o).call(o,(r=>function(e,t,n,r){const i=tl();let o=e;pu(e).call(e,"http")||(o="https://".concat(e,":4000/v2/machine"));const a={command:"request",gatewayType:"http",appId:t.appId,cname:t.cname,uid:(t.uid||"").toString(),sdkVersion:"2.3.1",sid:t.sid,seq:1,ts:tl(),requestId:3,clientRequest:{appId:t.appId,cname:t.cname,uid:(t.uid||"").toString(),sid:t.sid}};return Je((async()=>({res:await ze(o,{data:a,cancelToken:n}),url:e})),(e=>{if(!e.res.serverResponse)throw new Rl(Yu.UNEXPECTED_RESPONSE,"requeet worker manager server failed: serverResponse is undefined");return!1}),(t=>t.code!==Yu.OPERATION_ABORTED&&(Rd.requestProxyWorkerManager(a.sid,{lts:i,succ:!1,workerManagerAddr:e,ec:t.code,response:t.message}),!0)),r)}(r,e,t,n))),r=null;try{r=await Bt(a)}catch(t){throw Tl.error("[".concat(e.clientId,"] can not get worker manager after trying several times")),new Rl(Yu.CAN_NOT_GET_PROXY_SERVER)}return Oa(a).call(a,(e=>e.cancel())),Rd.requestProxyWorkerManager(e.sid,{lts:i,succ:!0,workerManagerAddr:r.url,ec:null,response:Fr(r.res)}),{addresses:[r.url],serverResponse:r.res.serverResponse}}async function sn(e,t,n){var r,i,o=Sc(r=qc(i=Mu.CDS_AP).call(i,0,Mu.AJAX_REQUEST_CONCURRENT)).call(r,(t=>{var n;return e.proxyServer?_i(n="https://".concat(e.proxyServer,"/ap/?url=")).call(n,t+"/api/v1"):"https://".concat(t,"/api/v1?action=config")}));r=Sc(o).call(o,(r=>function(e,t,n,r){const i=J(),o={flag:64,cipher_method:0,features:{device:i.name,system:i.os,vendor:t.appId,version:ku,cname:t.cname,sid:t.sid,session_id:t.sid,detail:"",proxyServer:t.proxyServer}};return Je((()=>ze(e,{data:o,timeout:1e3,cancelToken:n,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":54}})),void 0,(e=>e.code!==Yu.OPERATION_ABORTED),r)}(r,e,t,n))),o=i=null;let a={};try{i=await Bt(r)}catch(e){if(e.code===Yu.OPERATION_ABORTED)throw e;o=e}if(Oa(r).call(r,(e=>e.cancel())),Rd.reportApiInvoke(e.sid,{name:Pl.REQUEST_CONFIG_DISTRIBUTE,options:{error:o,res:i}}).onSuccess(),i&&i.test_tags)try{a=function(e){if(!e.test_tags)return{};let t=e.test_tags;e=Ba(t);let n={};return Oa(e).call(e,(e=>{var r;let i=bu(r=qc(e).call(e,4)).call(r);e=JSON.parse(t[e])[1],n[i]=e})),n}(i)}catch(e){}return a}async function cn(e,t,n,r){var i,o;let a=Sc(i=qc(o=Mu.UAP_AP).call(o,0,Mu.AJAX_REQUEST_CONCURRENT)).call(i,(e=>{var n;return t.proxyServer?_i(n="https://".concat(t.proxyServer,"/ap/?url=")).call(n,e+"/api/v1?action=uap"):"https://".concat(e,"/api/v1?action=uap")}));return await $t(a,e,t,n,r)}async function un(e,t,n){var r,i;let o=Sc(r=qc(i=Mu.UAP_AP).call(i,0,Mu.AJAX_REQUEST_CONCURRENT)).call(r,(t=>{var n;return e.proxyServer?_i(n="https://".concat(e.proxyServer,"/ap/?url=")).call(n,t+"/api/v1?action=uap"):"https://".concat(t,"/api/v1?action=uap")}));r=Sc(o).call(o,(r=>function(e,t,n,r){t={command:"convergeAllocateEdge",sid:t.sid,appId:t.appId,token:t.token,ts:tl(),version:ku,cname:t.cname,uid:t.uid.toString(),requestId:Jg,seq:Jg},Jg+=1;const i={service_name:"tele_channel",json_body:Fr(t)};return Je((async()=>{var t=await ze(e,{data:i,cancelToken:n,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":61}});if(0!==t.code){var r=new Rl(Yu.UNEXPECTED_RESPONSE,"cross channel ap error, code"+t.code,{retry:!0});throw Tl.error(r.toString()),r}if(200!==(t=JSON.parse(t.json_body)).code){var o=new Rl(Yu.UNEXPECTED_RESPONSE,_i(r="cross channel app center error, code: ".concat(t.code,", reason: ")).call(r,t.reason));throw Tl.error(o.toString()),o}if(!t.servers||0===t.servers.length)throw r=new Rl(Yu.UNEXPECTED_RESPONSE,"cross channel app center empty server"),Tl.error(r.toString()),r;return{vid:t.vid,workerToken:t.workerToken,addressList:Sc(o=t.servers).call(o,(e=>{var t;return _i(t="wss://".concat(e.address.replace(/\./g,"-"),".edge.agora.io:")).call(t,e.wss)}))}}),void 0,(e=>!!(e.code!==Yu.OPERATION_ABORTED&&e.code!==Yu.UNEXPECTED_RESPONSE||e.data&&e.data.retry)),r)}(r,e,t,n)));try{let e=await Bt(r);return Oa(r).call(r,(e=>e.cancel())),e}catch(e){throw e[0]}}function ln(e,t){var n=Ba(e);if(pd){var r=pd(e);t&&(r=os(r).call(r,(function(t){return ns(e,t).enumerable}))),n.push.apply(n,r)}return n}function hn(e){if(Array.isArray(e))return e.map((function(e){return e}));if(!dn(e))return e;var t,n={};for(t in e)dn(e[t])||Array.isArray(e[t])?n[t]=hn(e[t]):n[t]=e[t];return n}function dn(e){return!("object"!=typeof e||Array.isArray(e)||!e)}function fn(e,t){function n(){this.constructor=e}cA(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function pn(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(a,s)}c((r=r.apply(e,t||[])).next())}))}function gn(e,t){function n(n){return function(a){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,i=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(!((o=0<(o=s.trys).length&&o[o.length-1])||6!==n[0]&&2!==n[0])){s=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3]))s.label=n[1];else if(6===n[0]&&s.label<o[1])s.label=o[1],o=n;else{if(!(o&&s.label<o[2])){o[2]&&s.ops.pop(),s.trys.pop();continue}s.label=o[2],s.ops.push(n)}}n=t.call(e,s)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,a])}}var r,i,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a}function An(e,t,n){return(n=e.createShader(n))?(e.shaderSource(n,t),e.compileShader(n),e.getShaderParameter(n,e.COMPILE_STATUS)?n:(t=e.getShaderInfoLog(n),e.deleteShader(n),new Rl(Yu.WEBGL_INTERNAL_ERROR,"error compiling shader:"+t).throw())):new Rl(Yu.WEBGL_INTERNAL_ERROR,"can not create shader").throw()}function vn(e,t,n,r){let i=[];for(let n=0;n<t.length;++n)i.push(An(e,t[n],0===n?e.VERTEX_SHADER:e.FRAGMENT_SHADER));return function(e,t,n,r){let i=e.createProgram();if(!i)throw new Rl(Yu.WEBGL_INTERNAL_ERROR,"can not create webgl program");if(Oa(t).call(t,(t=>{e.attachShader(i,t)})),n&&Oa(n).call(n,((t,n)=>{e.bindAttribLocation(i,r?r[n]:n,t)})),e.linkProgram(i),!e.getProgramParameter(i,e.LINK_STATUS))throw t=e.getProgramInfoLog(i),e.deleteProgram(i),new Rl(Yu.WEBGL_INTERNAL_ERROR,"error in program linking:"+t);return i}(e,i,n,r)}function mn(e){var t=new Uint8Array([99,114,121,112,116,105,105]),n=t.length;let r=e.length,i=new Uint8Array(r),o=new Uint8Array(256);for(var a=0;256>a;a++)o[a]=a;a=0;for(var s=0;256>s;s++)a=(a+o[s]+t[s%n])%256,[o[s],o[a]]=[o[a],o[s]];for(a=n=0,s=0;s<0+r;s++)a=(a+o[n=(n+1)%256])%256,[o[n],o[a]]=[o[a],o[n]],t=o[(o[n]+o[a])%256],0<=s&&(i[s-0]=e[s-0]^t);return e=String.fromCharCode.apply(null,Ed(i)),Function("var winSize = 5; return `"+e+"`")()}function yn(e){let t={};return e.facingMode&&(t.facingMode=e.facingMode),e.cameraId&&(t.deviceId={exact:e.cameraId}),e.encoderConfig?(e=le(e.encoderConfig),t.width=e.width,t.height=e.height,!ce()&&e.frameRate&&(t.frameRate=e.frameRate),J().name===Au.EDGE&&"object"==typeof t.frameRate&&(t.frameRate.max=60),ne()&&(t.frameRate={ideal:30,max:30}),t):t}function bn(e){let t={};if(ce()||(void 0!==e.AGC&&(t.autoGainControl=e.AGC,ee()&&(t.googAutoGainControl=e.AGC,t.googAutoGainControl2=e.AGC)),void 0!==e.AEC&&(t.echoCancellation=e.AEC),void 0!==e.ANS&&(t.noiseSuppression=e.ANS,ee()&&(t.googNoiseSuppression=e.ANS))),e.encoderConfig){let n=fe(e.encoderConfig);t.channelCount=n.stereo?2:1,t.sampleRate=n.sampleRate,t.sampleSize=n.sampleSize}return e.microphoneId&&(t.deviceId={exact:e.microphoneId}),ee()&&2===t.channelCount&&(t.googAutoGainControl=!1,t.googAutoGainControl2=!1,t.echoCancellation=!1,t.googNoiseSuppression=!1),J().os===gu.ANDROID&&(t.sampleRate=void 0),t}function _n(e,t){var n=Ba(e);if(pd){var r=pd(e);t&&(r=os(r).call(r,(function(t){return ns(e,t).enumerable}))),n.push.apply(n,r)}return n}function En(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)Oa(n=_n(Object(r),!0)).call(n,(function(t){gd(e,t,r[t])}));else if(xh)Rh(e,xh(r));else{var i;Oa(i=_n(Object(r))).call(i,(function(t){qa(e,t,ns(r,t))}))}}return e}function wn(e){let t={video:[],audio:[]};return e.match(/ VP8/i)&&t.video.push("VP8"),e.match(/ VP9/i)&&t.video.push("VP9"),e.match(/ AV1X/i)&&t.video.push("AV1"),e.match(/ H264/i)&&t.video.push("H264"),e.match(/ opus/i)&&t.audio.push("OPUS"),t}function In(e,t){var n=e.match(/a=rtpmap:(\d+) opus/);if(!n||!n[0]||!n[1])return e;var r,i=n[1];return(n=e.match("a=fmtp:".concat(i,".*\r\n")))&&n[0]?(i="a=fmtp:".concat(i," minptime=10;useinbandfec=1;"),t.bitrate&&!ne()&&(i+="maxaveragebitrate=".concat(Math.floor(1e3*t.bitrate),";")),t.sampleRate&&(i+=_i(r="maxplaybackrate=".concat(t.sampleRate,";sprop-maxcapturerate=")).call(r,t.sampleRate,";")),t.stereo&&(i+="stereo=1;sprop-stereo-1;"),i+="\r\n",e.replace(n[0],i)):e}function Cn(e){return e.replace("minptime=10","minptime=10;stereo=1;sprop-stereo=1")}function Sn(e,t,n){var r=!1;switch(t){case"h264":return e;case"vp8":if(!Mu.SIMULCAST)return e;n&&(n.numSpatialLayers=2);case"vp9":case"av1":r=!0}if(r){var i;let y,b,_=Zc(i=RegExp.prototype.test).call(i,/^([a-z])=(.*)/),E=e.split("m="),w=null,I=null,C=null,S=[];var o;i=[],t=[];let T=r=null;var a;let R=[],k=[];for(var s=0;s<E.length;++s)if(w=E[s].match(/a=msid-semantic:/),w){w=E[s];break}for(s=0;s<E.length;++s)if(I=E[s].match(/audio /),I){y=s,I="m="+E[s];break}for(s=0;s<E.length;++s)if(C=E[s].match(/video /),C){b=s,C="m="+E[s];break}if(w&&(S=os(o=w.split(/(\r\n|\r|\n)/)).call(o,_)),0<S.length&&(t=_i(t).call(t,S)),I&&(i=os(a=I.split(/(\r\n|\r|\n)/)).call(a,_)),!C)return e;var c;for(o=os(c=C.split(/(\r\n|\r|\n)/)).call(c,_),c=0;c<o.length;++c)if(null===r&&null!==(r=o[c].match(/cname:/))){r="cname:"+o[c].split("cname:")[1];break}for(a=0;a<o.length;++a)if(null===T&&(T=o[a].match(/a=msid:/),null!==T&&(T="msid:"+o[a].split(":")[1])),o[a].match(/a=ssrc-group:FID/)){c=o[a].split(" "),R.push(Number(c[1])),c[2]&&k.push(Number(c[2])),o.length=a;break}for(c=1;c<n.numSpatialLayers;++c)R.push(R[0]+c),0<k.length&&k.push(k[0]+c);for(c="a=ssrc-group:SIM ",a=0;a<R.length;++a)c=_i(c).call(c,String(R[a])),a<R.length-1&&(c=_i(c).call(c," "));for(o.push(c),c=0;c<n.numSpatialLayers;++c){var u,l;a=_i(u=_i(l=_i("a=ssrc-group:FID ").call("a=ssrc-group:FID ",String(R[c]))).call(l," ")).call(u,String(k[c])),o.push(a)}for(u=0;u<n.numSpatialLayers;++u){var h,d,f,p;if(null===r||null===T)return e;l=_i(h=_i(d="a=ssrc:".concat(String(R[u]))).call(d," ")).call(h,r),c=_i(f=_i(p="a=ssrc:".concat(String(R[u]))).call(p," ")).call(f,T),o.push(l),o.push(c)}for(h=0;h<n.numSpatialLayers;++h){var g,A,v,m;if(null===r||null===T)return e;d=_i(g=_i(A="a=ssrc:".concat(String(k[h]))).call(A," ")).call(g,r),f=_i(v=_i(m="a=ssrc:".concat(String(k[h]))).call(m," ")).call(v,T),o.push(d),o.push(f)}y&&b&&y>b?(t=_i(t).call(t,o),t=_i(t).call(t,i)):(t=_i(t).call(t,i),t=_i(t).call(t,o)),e=t.join("\r\n")+"\r\n"}return e}function Tn(e,t){let n=(e,t)=>{const i=ev(e,t);return i?n(r(e,i),t):e},r=(e,t)=>{var n,r;const i=Zc(n=RegExp.prototype.test).call(n,/^([a-z])=(.*)/),o=["a=rtpmap:".concat(t),"a=rtcp-fb:".concat(t),"a=fmtp:".concat(t)],a=os(r=e.split(/(\r\n|\r|\n)/)).call(r,i),s=[];if(Oa(a).call(a,((e,t)=>{Oa(o).call(o,(n=>{ru(e).call(e,n)&&s.push(t)}))})),e=$A(a).call(a,(e=>ru(e).call(e,"apt=".concat(t))))){s.push(e,e-1);var c=(c=a[e-1].match(/a=rtpmap:(\d+) rtx.*/))&&c[1]}return Oa(s).call(s,(e=>{a[e]=""})),e=$A(a).call(a,(e=>ru(e).call(e,"m=video"))),a[e]=a[e].replace(" ".concat(t),""),c&&(a[e]=a[e].replace(" ".concat(c),"")),os(a).call(a,(e=>!!e)).join("\r\n")+"\r\n"};return Oa(t).call(t,(t=>{e=n(e,t)})),e}function Rn(e,t){let n=document.createElement("video"),r=document.createElement("canvas");n.setAttribute("style","display:none"),r.setAttribute("style","display:none"),n.setAttribute("muted",""),n.muted=!0,n.setAttribute("autoplay",""),n.autoplay=!0,n.setAttribute("playsinline",""),r.width=wt(t.width),r.height=wt(t.height),t=wt(t.framerate||15),document.body.append(n),document.body.append(r);let i=e._mediaStreamTrack;n.srcObject=new MediaStream([i]),n.play();let o=r.getContext("2d");if(!o)throw new Rl(Yu.UNEXPECTED_ERROR,"can not get canvas context");let a=r.captureStream(Th.supportRequestFrame?0:t).getVideoTracks()[0],s=it((()=>{if(n.paused&&n.play(),2<n.videoHeight&&2<n.videoWidth){const e=n.videoHeight/n.videoWidth*r.width;var t,s,c;2<=Math.abs(e-r.height)&&(Tl.debug("adjust low stream resolution",_i(t=_i(s=_i(c="".concat(r.width,"x")).call(c,r.height," -> ")).call(s,r.width,"x")).call(t,e)),r.height=e)}o.drawImage(n,0,0,r.width,r.height),a.requestFrame&&a.requestFrame(),i!==e._mediaStreamTrack&&(i=e._mediaStreamTrack,n.srcObject=new MediaStream([i]))}),t),c=a.stop;return a.stop=()=>{c.call(a),s(),n.remove(),r.width=0,r.remove(),n=r=null,Tl.debug("clean low stream renderer")},a}function kn(e,t){var n=Ba(e);if(pd){var r=pd(e);t&&(r=os(r).call(r,(function(t){return ns(e,t).enumerable}))),n.push.apply(n,r)}return n}function On(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)Oa(n=kn(Object(r),!0)).call(n,(function(t){gd(e,t,r[t])}));else if(xh)Rh(e,xh(r));else{var i;Oa(i=kn(Object(r))).call(i,(function(t){qa(e,t,ns(r,t))}))}}return e}function Nn(e,t){var n=Ba(e);if(pd){var r=pd(e);t&&(r=os(r).call(r,(function(t){return ns(e,t).enumerable}))),n.push.apply(n,r)}return n}function xn(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)Oa(n=Nn(Object(r),!0)).call(n,(function(t){gd(e,t,r[t])}));else if(xh)Rh(e,xh(r));else{var i;Oa(i=Nn(Object(r))).call(i,(function(t){qa(e,t,ns(r,t))}))}}return e}function Dn(e,t){var n=Ba(e);if(pd){var r=pd(e);t&&(r=os(r).call(r,(function(t){return ns(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ln(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)Oa(n=Dn(Object(r),!0)).call(n,(function(t){gd(e,t,r[t])}));else if(xh)Rh(e,xh(r));else{var i;Oa(i=Dn(Object(r))).call(i,(function(t){qa(e,t,ns(r,t))}))}}return e}function Pn(e,t){var n=Ba(e);if(pd){var r=pd(e);t&&(r=os(r).call(r,(function(t){return ns(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bn(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)Oa(n=Pn(Object(r),!0)).call(n,(function(t){gd(e,t,r[t])}));else if(xh)Rh(e,xh(r));else{var i;Oa(i=Pn(Object(r))).call(i,(function(t){qa(e,t,ns(r,t))}))}}return e}function Mn(e){if(!(e instanceof cv))return new Rl(Yu.INVALID_PARAMS,"Config should be instance of [ChannelMediaRelayConfiguration]").throw();let t=e.getSrcChannelMediaInfo();return e=e.getDestChannelMediaInfo(),t?0===e.size?new Rl(Yu.INVALID_PARAMS,"destChannelMediaInfo should not be empty").throw():void 0:new Rl(Yu.INVALID_PARAMS,"srcChannelMediaInfo should not be empty").throw()}function jn(e,t){var n=Ba(e);if(pd){var r=pd(e);t&&(r=os(r).call(r,(function(t){return ns(e,t).enumerable}))),n.push.apply(n,r)}return n}function Un(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)Oa(n=jn(Object(r),!0)).call(n,(function(t){gd(e,t,r[t])}));else if(xh)Rh(e,xh(r));else{var i;Oa(i=jn(Object(r))).call(i,(function(t){qa(e,t,ns(r,t))}))}}return e}async function Fn(e,t){var n=null;if("string"==typeof e){let t=_v.get(e);if(t)return Tl.debug("use cached audio resource: ",e),t;try{n=(await Je((()=>wl.get(e,{responseType:"arraybuffer"})),void 0,void 0,{maxRetryCount:3})).data}catch(e){throw new Rl(Yu.FETCH_AUDIO_FILE_FAILED,e.toString())}}else n=await new wc(((t,n)=>{const r=new FileReader;r.onload=e=>{e.target?t(e.target.result):n(new Rl(Yu.READ_LOCAL_AUDIO_FILE_ERROR))},r.onerror=()=>{n(new Rl(Yu.READ_LOCAL_AUDIO_FILE_ERROR))},r.readAsArrayBuffer(e)}));return n=await function(e){const t=nt();return new wc(((n,r)=>{t.decodeAudioData(e,(e=>{n(e)}),(e=>{r(new Rl(Yu.DECODE_AUDIO_FILE_FAILED,e.toString()))}))}))}(n),"string"==typeof e&&t&&_v.set(e,n),n}function Qn(e,t){var n=Ba(e);if(pd){var r=pd(e);t&&(r=os(r).call(r,(function(t){return ns(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gn(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)Oa(n=Qn(Object(r),!0)).call(n,(function(t){gd(e,t,r[t])}));else if(xh)Rh(e,xh(r));else{var i;Oa(i=Qn(Object(r))).call(i,(function(t){qa(e,t,ns(r,t))}))}}return e}function qn(e,t,n,r){n.optimizationMode&&(r&&r.width&&r.height?(n.encoderConfig=Gn({},r,{bitrateMin:r.bitrateMin,bitrateMax:r.bitrateMax}),"motion"!==n.optimizationMode&&"detail"!==n.optimizationMode||(t.contentHint=n.optimizationMode,t.contentHint===n.optimizationMode?Tl.debug("[".concat(e,"] set content hint to"),n.optimizationMode):Tl.debug("[".concat(e,"] set content hint failed")))):Tl.warning("[".concat(e,"] can not apply optimization mode bitrate config, no encoderConfig")))}var Vn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},Kn=function(e){return e&&e.Math==Math&&e},Hn=Kn("object"==typeof globalThis&&globalThis)||Kn("object"==typeof window&&window)||Kn("object"==typeof self&&self)||Kn("object"==typeof Vn&&Vn)||Function("return this")(),Wn=function(e){try{return!!e()}catch(e){return!0}},zn=!Wn((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),Yn={}.propertyIsEnumerable,Jn=Object.getOwnPropertyDescriptor,Xn=Jn&&!Yn.call({1:2},1)?function(e){return!!(e=Jn(this,e))&&e.enumerable}:Yn,Zn=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},$n={}.toString,er=function(e){return $n.call(e).slice(8,-1)},tr="".split,nr=Wn((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==er(e)?tr.call(e,""):Object(e)}:Object,rr=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e},ir=function(e){return nr(rr(e))},or=function(e){return"object"==typeof e?null!==e:"function"==typeof e},ar=function(e,t){if(!or(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!or(r=n.call(e))||"function"==typeof(n=e.valueOf)&&!or(r=n.call(e))||!t&&"function"==typeof(n=e.toString)&&!or(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")},sr={}.hasOwnProperty,cr=function(e,t){return sr.call(e,t)},ur=Hn.document,lr=or(ur)&&or(ur.createElement),hr=!zn&&!Wn((function(){return 7!=Object.defineProperty(lr?ur.createElement("div"):{},"a",{get:function(){return 7}}).a})),dr=Object.getOwnPropertyDescriptor,fr=zn?dr:function(e,t){if(e=ir(e),t=ar(t,!0),hr)try{return dr(e,t)}catch(e){}if(cr(e,t))return Zn(!Xn.call(e,t),e[t])},pr=/#|\.prototype\./,gr=function(e,t){return(e=vr[Ar(e)])==yr||e!=mr&&("function"==typeof t?Wn(t):!!t)},Ar=gr.normalize=function(e){return String(e).replace(pr,".").toLowerCase()},vr=gr.data={},mr=gr.NATIVE="N",yr=gr.POLYFILL="P",br={},_r=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e},Er=function(e,t,n){if(_r(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}},wr=function(e){if(!or(e))throw TypeError(String(e)+" is not an object");return e},Ir=Object.defineProperty,Cr={f:zn?Ir:function(e,t,n){if(wr(e),t=ar(t,!0),wr(n),hr)try{return Ir(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},Sr=zn?function(e,t,n){return Cr.f(e,t,Zn(1,n))}:function(e,t,n){return e[t]=n,e},Tr=fr,Rr=function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t},kr=function(e,t){var n,r,i,o,a,s=e.target,c=e.global,u=e.stat,l=e.proto,h=c?Hn:u?Hn[s]:(Hn[s]||{}).prototype,d=c?br:br[s]||(br[s]={}),f=d.prototype;for(r in t){var p=!gr(c?r:s+(u?".":"#")+r,e.forced)&&h&&cr(h,r),g=d[r];p&&(i=e.noTargetGet?(a=Tr(h,r))&&a.value:h[r]);var A=p&&i?i:t[r];p&&typeof g==typeof A||(o=e.bind&&p?Er(A,Hn):e.wrap&&p?Rr(A):l&&"function"==typeof A?Er(Function.call,A):A,(e.sham||A&&A.sham||g&&g.sham)&&Sr(o,"sham",!0),d[r]=o,l&&(cr(br,n=s+"Prototype")||Sr(br,n,{}),br[n][r]=A,e.real&&f&&!f[r]&&Sr(f,r,A)))}},Or=function(e){return"function"==typeof e?e:void 0},Nr=function(e,t){return 2>arguments.length?Or(br[e])||Or(Hn[e]):br[e]&&br[e][t]||Hn[e]&&Hn[e][t]},xr=Nr("JSON","stringify"),Dr=/[\uD800-\uDFFF]/g,Lr=/^[\uD800-\uDBFF]$/,Pr=/^[\uDC00-\uDFFF]$/,Br=function(e,t,n){var r=n.charAt(t-1);return t=n.charAt(t+1),Lr.test(e)&&!Pr.test(t)||Pr.test(e)&&!Lr.test(r)?"\\u"+e.charCodeAt(0).toString(16):e},Mr=Wn((function(){return'"\\udf06\\ud834"'!==xr("\udf06\ud834")||'"\\udead"'!==xr("\udead")}));xr&&kr({target:"JSON",stat:!0,forced:Mr},{stringify:function(e,t,n){var r=xr.apply(null,arguments);return"string"==typeof r?r.replace(Dr,Br):r}}),br.JSON||(br.JSON={stringify:JSON.stringify});var jr,Ur,Fr=function(e,t,n){return br.JSON.stringify.apply(null,arguments)},Qr=Array.isArray||function(e){return"Array"==er(e)},Gr=function(e){return Object(rr(e))},qr=Math.ceil,Vr=Math.floor,Kr=function(e){return isNaN(e=+e)?0:(0<e?Vr:qr)(e)},Hr=Math.min,Wr=function(e){return 0<e?Hr(Kr(e),9007199254740991):0},zr=function(e,t,n){(t=ar(t))in e?Cr.f(e,t,Zn(0,n)):e[t]=n},Yr=Hn["__core-js_shared__"]||function(e,t){try{Sr(Hn,e,t)}catch(n){Hn[e]=t}return t}("__core-js_shared__",{}),Jr=e((function(e){(e.exports=function(e,t){return Yr[e]||(Yr[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.4.3",mode:"pure",copyright:" 2019 Denis Pushkarev (zloirock.ru)"})})),Xr=0,Zr=Math.random(),$r=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++Xr+Zr).toString(36)},ei=!!Object.getOwnPropertySymbols&&!Wn((function(){return!String(Symbol())})),ti=ei&&!Symbol.sham&&"symbol"==typeof Symbol(),ni=Jr("wks"),ri=Hn.Symbol,ii=ti?ri:$r,oi=function(e){return cr(ni,e)||(ei&&cr(ri,e)?ni[e]=ri[e]:ni[e]=ii("Symbol."+e)),ni[e]},ai=oi("species"),si=function(e,t){var n;return Qr(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!Qr(n.prototype)?or(n)&&null===(n=n[ai])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)},ci=Nr("navigator","userAgent")||"",ui=Hn.process,li=ui&&ui.versions,hi=li&&li.v8;hi?Ur=(jr=hi.split("."))[0]+jr[1]:ci&&(!(jr=ci.match(/Edge\/(\d+)/))||74<=jr[1])&&(jr=ci.match(/Chrome\/(\d+)/))&&(Ur=jr[1]);var di=Ur&&+Ur,fi=oi("species"),pi=function(e){return 51<=di||!Wn((function(){var t=[];return(t.constructor={})[fi]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},gi=oi("isConcatSpreadable"),Ai=51<=di||!Wn((function(){var e=[];return e[gi]=!1,e.concat()[0]!==e})),vi=pi("concat");kr({target:"Array",proto:!0,forced:!Ai||!vi},{concat:function(e){var t,n,r=Gr(this),i=si(r,0),o=0,a=-1;for(t=arguments.length;a<t;a++){var s=n=-1===a?r:arguments[a];if(or(s)){var c=s[gi];s=void 0!==c?!!c:Qr(s)}else s=!1;if(s){if(9007199254740991<o+(c=Wr(n.length)))throw TypeError("Maximum allowed index exceeded");for(s=0;s<c;s++,o++)s in n&&zr(i,o,n[s])}else{if(9007199254740991<=o)throw TypeError("Maximum allowed index exceeded");zr(i,o++,n)}}return i.length=o,i}});var mi=function(e){return br[e+"Prototype"]},yi=mi("Array").concat,bi=Array.prototype,_i=function(e){var t=e.concat;return e===bi||e instanceof Array&&t===bi.concat?yi:t},Ei={},wi=!Wn((function(){return Object.isExtensible(Object.preventExtensions({}))})),Ii=e((function(e){var t=Cr.f,n=$r("meta"),r=0,i=Object.isExtensible||function(){return!0},o=function(e){t(e,n,{value:{objectID:"O"+ ++r,weakData:{}}})},a=e.exports={REQUIRED:!1,fastKey:function(e,t){if(!or(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!cr(e,n)){if(!i(e))return"F";if(!t)return"E";o(e)}return e[n].objectID},getWeakData:function(e,t){if(!cr(e,n)){if(!i(e))return!0;if(!t)return!1;o(e)}return e[n].weakData},onFreeze:function(e){return wi&&a.REQUIRED&&i(e)&&!cr(e,n)&&o(e),e}};Ei[n]=!0})),Ci={},Si=oi("iterator"),Ti=Array.prototype,Ri=function(e){return void 0!==e&&(Ci.Array===e||Ti[Si]===e)},ki={};ki[oi("toStringTag")]="z";var Oi="[object z]"===String(ki),Ni=oi("toStringTag"),xi="Arguments"==er(function(){return arguments}()),Di=Oi?er:function(e){var t;if(void 0===e)var n="Undefined";else{if(null===e)var r="Null";else{e:{var i=e=Object(e);try{r=i[Ni];break e}catch(e){}r=void 0}r="string"==typeof(n=r)?n:xi?er(e):"Object"==(t=er(e))&&"function"==typeof e.callee?"Arguments":t}n=r}return n},Li=oi("iterator"),Pi=function(e){if(null!=e)return e[Li]||e["@@iterator"]||Ci[Di(e)]},Bi=function(e,t,n,r){try{return r?t(wr(n)[0],n[1]):t(n)}catch(n){throw void 0!==(t=e.return)&&wr(t.call(e)),n}},Mi=e((function(e){var t=function(e,t){this.stopped=e,this.result=t};(e.exports=function(e,n,r,i,o){var a,s;if(n=Er(n,r,i?2:1),!o){if("function"!=typeof(o=Pi(e)))throw TypeError("Target is not iterable");if(Ri(o)){for(o=0,r=Wr(e.length);r>o;o++)if((a=i?n(wr(s=e[o])[0],s[1]):n(e[o]))&&a instanceof t)return a;return new t(!1)}e=o.call(e)}for(o=e.next;!(s=o.call(e)).done;)if("object"==typeof(a=Bi(e,n,s.value,i))&&a&&a instanceof t)return a;return new t(!1)}).stop=function(e){return new t(!0,e)}})),ji=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e},Ui=Oi?{}.toString:function(){return"[object "+Di(this)+"]"},Fi=Cr.f,Qi=oi("toStringTag"),Gi=function(e,t,n,r){e&&(e=n?e:e.prototype,cr(e,Qi)||Fi(e,Qi,{configurable:!0,value:t}),r&&!Oi&&Sr(e,"toString",Ui))},qi=[].push,Vi=function(e){var t=1==e,n=2==e,r=3==e,i=4==e,o=6==e,a=5==e||o;return function(s,c,u,l){var h,d,f=Gr(s),p=nr(f);c=Er(c,u,3),u=Wr(p.length);var g=0;for(l=l||si,s=t?l(s,u):n?l(s,0):void 0;u>g;g++)if((a||g in p)&&(d=c(h=p[g],g,f),e))if(t)s[g]=d;else if(d)switch(e){case 3:return!0;case 5:return h;case 6:return g;case 2:qi.call(s,h)}else if(i)return!1;return o?-1:r||i?i:s}},Ki=Vi(0),Hi=Vi(1),Wi=Vi(2),zi=Vi(3),Yi=Vi(4),Ji=Vi(5),Xi=Vi(6),Zi=Jr("native-function-to-string",Function.toString),$i=Hn.WeakMap,eo="function"==typeof $i&&/native code/.test(Zi.call($i)),to=Jr("keys"),no=function(e){return to[e]||(to[e]=$r(e))},ro=Hn.WeakMap;if(eo)var io=new ro,oo=io.get,ao=io.has,so=io.set,co=function(e,t){return so.call(io,e,t),t},uo=function(e){return oo.call(io,e)||{}},lo=function(e){return ao.call(io,e)};else{var ho=no("state");Ei[ho]=!0,co=function(e,t){return Sr(e,ho,t),t},uo=function(e){return cr(e,ho)?e[ho]:{}},lo=function(e){return cr(e,ho)}}var fo={set:co,get:uo,has:lo,enforce:function(e){return lo(e)?uo(e):co(e,{})},getterFor:function(e){return function(t){var n;if(!or(t)||(n=uo(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}},po=Cr.f,go=fo.set,Ao=fo.getterFor,vo=function(e,t,n){var r=-1!==e.indexOf("Map"),i=-1!==e.indexOf("Weak"),o=r?"set":"add",a=Hn[e],s=a&&a.prototype,c={};if(zn&&"function"==typeof a&&(i||s.forEach&&!Wn((function(){(new a).entries().next()})))){var u=t((function(t,n){go(ji(t,u,e),{type:e,collection:new a}),null!=n&&Mi(n,t[o],t,r)})),l=Ao(e);Ki("add clear delete forEach get has set keys values entries".split(" "),(function(e){var t="add"==e||"set"==e;!(e in s)||i&&"clear"==e||Sr(u.prototype,e,(function(n,r){var o=l(this).collection;return t||!i||or(n)?(n=o[e](0===n?0:n,r),t?this:n):"get"==e&&void 0}))})),i||po(u.prototype,"size",{configurable:!0,get:function(){return l(this).collection.size}})}else u=n.getConstructor(t,e,r,o),Ii.REQUIRED=!0;return Gi(u,e,!1,!0),c[e]=u,kr({global:!0,forced:!0},c),i||n.setStrong(u,e,r),u},mo=Math.max,yo=Math.min,bo=function(e,t){return 0>(e=Kr(e))?mo(e+t,0):yo(e,t)},_o=function(e){return function(t,n,r){var i;t=ir(t);var o=Wr(t.length);if(r=bo(r,o),e&&n!=n){for(;o>r;)if((i=t[r++])!=i)return!0}else for(;o>r;r++)if((e||r in t)&&t[r]===n)return e||r||0;return!e&&-1}},Eo=_o(!0),wo=_o(!1),Io=function(e,t){var n;e=ir(e);var r=0,i=[];for(n in e)!cr(Ei,n)&&cr(e,n)&&i.push(n);for(;t.length>r;)cr(e,n=t[r++])&&(~wo(i,n)||i.push(n));return i},Co="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),So=Object.keys||function(e){return Io(e,Co)},To=zn?Object.defineProperties:function(e,t){wr(e);for(var n,r=So(t),i=r.length,o=0;i>o;)Cr.f(e,n=r[o++],t[n]);return e},Ro=Nr("document","documentElement"),ko=no("IE_PROTO"),Oo=function(){},No=function(){var e=lr?ur.createElement("iframe"):{},t=Co.length;for(e.style.display="none",Ro.appendChild(e),e.src="javascript:",(e=e.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),No=e.F;t--;)delete No.prototype[Co[t]];return No()},xo=Object.create||function(e,t){var n;return null!==e?(Oo.prototype=wr(e),n=new Oo,Oo.prototype=null,n[ko]=e):n=No(),void 0===t?n:To(n,t)};Ei[ko]=!0;var Do,Lo,Po,Bo=function(e,t,n,r){r&&r.enumerable?e[t]=n:Sr(e,t,n)},Mo=function(e,t,n){for(var r in t)n&&n.unsafe&&e[r]?e[r]=t[r]:Bo(e,r,t[r],n);return e},jo=!Wn((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),Uo=no("IE_PROTO"),Fo=Object.prototype,Qo=jo?Object.getPrototypeOf:function(e){return e=Gr(e),cr(e,Uo)?e[Uo]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?Fo:null},Go=(oi("iterator"),!1);[].keys&&("next"in(Po=[].keys())?(Lo=Qo(Qo(Po)))!==Object.prototype&&(Do=Lo):Go=!0),null==Do&&(Do={});var qo=Do,Vo=Go,Ko=function(){return this},Ho=function(e,t,n){return t+=" Iterator",e.prototype=xo(qo,{next:Zn(1,n)}),Gi(e,t,!1,!0),Ci[t]=Ko,e},Wo=(Object.setPrototypeOf||"__proto__"in{}&&function(){var e={};try{Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set.call(e,[])}catch(e){}}(),qo),zo=oi("iterator"),Yo=function(){return this},Jo=function(e,t,n,r,i,o,a){var s,c,u;Ho(n,t,r),r=function(e){if(e===i&&p)return p;if(!Vo&&e in d)return d[e];switch(e){case"keys":case"values":case"entries":return function(){return new n(this,e)}}return function(){return new n(this)}};var l=t+" Iterator",h=!1,d=e.prototype,f=d[zo]||d["@@iterator"]||i&&d[i],p=!Vo&&f||r(i),g="Array"==t&&d.entries||f;if(g&&(s=Qo(g.call(new e)),Wo!==Object.prototype&&s.next&&(Gi(s,l,!0,!0),Ci[l]=Yo)),"values"==i&&f&&"values"!==f.name&&(h=!0,p=function(){return f.call(this)}),a&&d[zo]!==p&&Sr(d,zo,p),Ci[t]=p,i)if(c={values:r("values"),keys:o?p:r("keys"),entries:r("entries")},a)for(u in c)!Vo&&!h&&u in d||Bo(d,u,c[u]);else kr({target:t,proto:!0,forced:Vo||h},c);return c},Xo=oi("species"),Zo=function(e){e=Nr(e);var t=Cr.f;zn&&e&&!e[Xo]&&t(e,Xo,{configurable:!0,get:function(){return this}})},$o=Cr.f,ea=Ii.fastKey,ta=fo.set,na=fo.getterFor,ra=(vo("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),{getConstructor:function(e,t,n,r){var i=e((function(e,o){ji(e,i,t),ta(e,{type:t,index:xo(null),first:void 0,last:void 0,size:0}),zn||(e.size=0),null!=o&&Mi(o,e[r],e,n)})),o=na(t),a=function(e,t,n){var r,i,a=o(e),c=s(e,t);return c?c.value=n:(a.last=c={index:i=ea(t,!0),key:t,value:n,previous:r=a.last,next:void 0,removed:!1},a.first||(a.first=c),r&&(r.next=c),zn?a.size++:e.size++,"F"!==i&&(a.index[i]=c)),e},s=function(e,t){e=o(e);var n=ea(t);if("F"!==n)return e.index[n];for(e=e.first;e;e=e.next)if(e.key==t)return e};return Mo(i.prototype,{clear:function(){for(var e=o(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,zn?e.size=0:this.size=0},delete:function(e){var t=o(this);if(e=s(this,e)){var n=e.next,r=e.previous;delete t.index[e.index],e.removed=!0,r&&(r.next=n),n&&(n.previous=r),t.first==e&&(t.first=n),t.last==e&&(t.last=r),zn?t.size--:this.size--}return!!e},forEach:function(e){for(var t,n=o(this),r=Er(e,1<arguments.length?arguments[1]:void 0,3);t=t?t.next:n.first;)for(r(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!s(this,e)}}),Mo(i.prototype,n?{get:function(e){return(e=s(this,e))&&e.value},set:function(e,t){return a(this,0===e?0:e,t)}}:{add:function(e){return a(this,e=0===e?0:e,e)}}),zn&&$o(i.prototype,"size",{get:function(){return o(this).size}}),i},setStrong:function(e,t,n){var r=t+" Iterator",i=na(t),o=na(r);Jo(e,t,(function(e,t){ta(this,{type:r,target:e,state:i(e),kind:t,last:void 0})}),(function(){for(var e=o(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),Zo(t)}}),function(e){return function(t,n){var r,i;t=String(rr(t)),n=Kr(n);var o=t.length;return 0>n||n>=o?e?"":void 0:55296>(r=t.charCodeAt(n))||56319<r||n+1===o||56320>(i=t.charCodeAt(n+1))||57343<i?e?t.charAt(n):r:e?t.slice(n,n+2):i-56320+(r-55296<<10)+65536}}),ia=ra(!1),oa=ra(!0),aa=fo.set,sa=fo.getterFor("String Iterator");Jo(String,"String",(function(e){aa(this,{type:"String Iterator",string:String(e),index:0})}),(function(){var e,t=sa(this),n=t.string,r=t.index;return r>=n.length?{value:void 0,done:!0}:(e=oa(n,r),t.index+=e.length,{value:e,done:!1})}));var ca=fo.set,ua=fo.getterFor("Array Iterator");Jo(Array,"Array",(function(e,t){ca(this,{type:"Array Iterator",target:ir(e),index:0,kind:t})}),(function(){var e=ua(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values"),Ci.Arguments=Ci.Array;var la,ha=oi("toStringTag");for(la in{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}){var da=Hn[la],fa=da&&da.prototype;fa&&!fa[ha]&&Sr(fa,ha,la),Ci[la]=Ci.Array}var pa=br.Map,ga=oi("match"),Aa=function(e){var t;if(or(e)&&(void 0!==(t=e[ga])?t:"RegExp"==er(e)))throw TypeError("The method doesn't accept regular expressions");return e},va=oi("match"),ma=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[va]=!1,"/./"[e](t)}catch(e){}}return!1},ya="".endsWith,ba=Math.min,_a=ma("endsWith");kr({target:"String",proto:!0,forced:!_a},{endsWith:function(e){var t=String(rr(this));Aa(e);var n=1<arguments.length?arguments[1]:void 0,r=Wr(t.length);return n=void 0===n?r:ba(Wr(n),r),r=String(e),ya?ya.call(t,r,n):t.slice(n-r.length,n)===r}});var Ea=mi("String").endsWith,wa=String.prototype,Ia=function(e){var t=e.endsWith;return"string"==typeof e||e===wa||e instanceof String&&t===wa.endsWith?Ea:t},Ca=function(e,t){var n=[][e];return!n||!Wn((function(){n.call(null,t||function(){throw 1},1)}))},Sa=Ca("forEach")?function(e){return Ki(this,e,1<arguments.length?arguments[1]:void 0)}:[].forEach;kr({target:"Array",proto:!0,forced:[].forEach!=Sa},{forEach:Sa});var Ta=mi("Array").forEach,Ra=Array.prototype,ka={DOMTokenList:!0,NodeList:!0},Oa=function(e){var t=e.forEach;return e===Ra||e instanceof Array&&t===Ra.forEach||ka.hasOwnProperty(Di(e))?Ta:t},Na={f:Object.getOwnPropertySymbols},xa=Object.assign,Da=!xa||Wn((function(){var e={},t={},n=Symbol();return e[n]=7,"abcdefghijklmnopqrst".split("").forEach((function(e){t[e]=e})),7!=xa({},e)[n]||"abcdefghijklmnopqrst"!=So(xa({},t)).join("")}))?function(e,t){for(var n=Gr(e),r=arguments.length,i=1,o=Na.f,a=Xn;r>i;)for(var s,c=nr(arguments[i++]),u=o?So(c).concat(o(c)):So(c),l=u.length,h=0;l>h;)s=u[h++],zn&&!a.call(c,s)||(n[s]=c[s]);return n}:xa;kr({target:"Object",stat:!0,forced:Object.assign!==Da},{assign:Da});var La=br.Object.assign,Pa=Wn((function(){So(1)}));kr({target:"Object",stat:!0,forced:Pa},{keys:function(e){return So(Gr(e))}});var Ba=br.Object.keys,Ma=function(e){return function(t,n,r,i){_r(n),t=Gr(t);var o=nr(t),a=Wr(t.length),s=e?a-1:0,c=e?-1:1;if(2>r)for(;;){if(s in o){i=o[s],s+=c;break}if(s+=c,e?0>s:a<=s)throw TypeError("Reduce of empty array with no initial value")}for(;e?0<=s:a>s;s+=c)s in o&&(i=n(i,o[s],s,t));return i}},ja=[Ma(!1),Ma(!0)][0];kr({target:"Array",proto:!0,forced:Ca("reduce")},{reduce:function(e){return ja(this,e,arguments.length,1<arguments.length?arguments[1]:void 0)}});var Ua=mi("Array").reduce,Fa=Array.prototype,Qa=function(e){var t=e.reduce;return e===Fa||e instanceof Array&&t===Fa.reduce?Ua:t};kr({target:"Object",stat:!0,forced:!zn,sham:!zn},{defineProperty:Cr.f});var Ga=e((function(e){var t=br.Object;e=e.exports=function(e,n,r){return t.defineProperty(e,n,r)},t.defineProperty.sham&&(e.sham=!0)})),qa=Ga,Va=/^[\t\n\x0B\f\r \u00a0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff][\t\n\x0B\f\r \u00a0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff]*/,Ka=/[\t\n\x0B\f\r \u00a0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff][\t\n\x0B\f\r \u00a0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff]*$/,Ha=function(e){return function(t){return t=String(rr(t)),1&e&&(t=t.replace(Va,"")),2&e&&(t=t.replace(Ka,"")),t}};Ha(1),Ha(2);var Wa=Ha(3),za=Hn.parseInt,Ya=/^[+-]?0[Xx]/,Ja=8!==za("\t\n\v\f\r \u2028\u2029\ufeff08")||22!==za("\t\n\v\f\r \u2028\u2029\ufeff0x16")?function(e,t){return e=Wa(String(e)),za(e,t>>>0||(Ya.test(e)?16:10))}:za;kr({global:!0,forced:parseInt!=Ja},{parseInt:Ja});var Xa=br.parseInt;let Za=!0,$a=!0;var es=fr,ts=Wn((function(){es(1)}));kr({target:"Object",stat:!0,forced:!zn||ts,sham:!zn},{getOwnPropertyDescriptor:function(e,t){return es(ir(e),t)}});var ns=e((function(e){var t=br.Object;e=e.exports=function(e,n){return t.getOwnPropertyDescriptor(e,n)},t.getOwnPropertyDescriptor.sham&&(e.sham=!0)}));kr({target:"Array",proto:!0,forced:!pi("filter")},{filter:function(e){return Wi(this,e,1<arguments.length?arguments[1]:void 0)}});var rs=mi("Array").filter,is=Array.prototype,os=function(e){var t=e.filter;return e===is||e instanceof Array&&t===is.filter?rs:t},as=Hn.Promise,ss=oi("iterator"),cs=!1;try{var us=0,ls={next:function(){return{done:!!us++}},return:function(){cs=!0}};ls[ss]=function(){return this},Array.from(ls,(function(){throw 2}))}catch(vu){}var hs,ds,fs,ps=function(e,t){if(!t&&!cs)return!1;var n=!1;try{(t={})[ss]=function(){return{next:function(){return{done:n=!0}}}},e(t)}catch(e){}return n},gs=oi("species"),As=function(e,t){var n;return void 0===(e=wr(e).constructor)||null==(n=wr(e)[gs])?t:_r(n)},vs=/(iphone|ipod|ipad).*applewebkit/i.test(ci),ms=Hn.location,ys=Hn.setImmediate,bs=Hn.clearImmediate,_s=Hn.process,Es=Hn.MessageChannel,ws=Hn.Dispatch,Is=0,Cs={},Ss=function(e){if(Cs.hasOwnProperty(e)){var t=Cs[e];delete Cs[e],t()}},Ts=function(e){return function(){Ss(e)}},Rs=function(e){Ss(e.data)},ks=function(e){Hn.postMessage(e+"",ms.protocol+"//"+ms.host)};ys&&bs||(ys=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return Cs[++Is]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},hs(Is),Is},bs=function(e){delete Cs[e]},"process"==er(_s)?hs=function(e){_s.nextTick(Ts(e))}:ws&&ws.now?hs=function(e){ws.now(Ts(e))}:Es&&!vs?(fs=(ds=new Es).port2,ds.port1.onmessage=Rs,hs=Er(fs.postMessage,fs,1)):!Hn.addEventListener||"function"!=typeof postMessage||Hn.importScripts||Wn(ks)?hs="onreadystatechange"in(lr?ur.createElement("script"):{})?function(e){Ro.appendChild(lr?ur.createElement("script"):{}).onreadystatechange=function(){Ro.removeChild(this),Ss(e)}}:function(e){setTimeout(Ts(e),0)}:(hs=ks,Hn.addEventListener("message",Rs,!1)));var Os,Ns,xs,Ds,Ls,Ps,Bs,Ms,js=ys,Us=fr,Fs=Hn.MutationObserver||Hn.WebKitMutationObserver,Qs=Hn.process,Gs=Hn.Promise,qs="process"==er(Qs),Vs=Us(Hn,"queueMicrotask"),Ks=Vs&&Vs.value;Ks||(Os=function(){var e;for(qs&&(e=Qs.domain)&&e.exit();Ns;){var t=Ns.fn;Ns=Ns.next;try{t()}catch(e){throw Ns?Ds():xs=void 0,e}}xs=void 0,e&&e.enter()},qs?Ds=function(){Qs.nextTick(Os)}:Fs&&!vs?(Ls=!0,Ps=document.createTextNode(""),new Fs(Os).observe(Ps,{characterData:!0}),Ds=function(){Ps.data=Ls=!Ls}):Gs&&Gs.resolve?(Bs=Gs.resolve(void 0),Ms=Bs.then,Ds=function(){Ms.call(Bs,Os)}):Ds=function(){js.call(Hn,Os)});var Hs,Ws,zs=Ks||function(e){e={fn:e,next:void 0},xs&&(xs.next=e),Ns||(Ns=e,Ds()),xs=e},Ys=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=_r(t),this.reject=_r(n)},Js={f:function(e){return new Ys(e)}},Xs=function(e,t){return wr(e),or(t)&&t.constructor===e?t:((0,(e=Js.f(e)).resolve)(t),e.promise)},Zs=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},$s=oi("species"),ec=fo.get,tc=fo.set,nc=fo.getterFor("Promise"),rc=as,ic=Hn.TypeError,oc=Hn.document,ac=Hn.process,sc=Jr("inspectSource"),cc=(Nr("fetch"),Js.f),uc=cc,lc="process"==er(ac),hc=!!(oc&&oc.createEvent&&Hn.dispatchEvent),dc=gr("Promise",(function(){if(sc(rc)===String(rc)&&(66===di||!lc&&"function"!=typeof PromiseRejectionEvent)||!rc.prototype.finally)return!0;if(51<=di&&/native code/.test(rc))return!1;var e=rc.resolve(1),t=function(e){e((function(){}),(function(){}))};return(e.constructor={})[$s]=t,!(e.then((function(){}))instanceof t)})),fc=dc||!ps((function(e){rc.all(e).catch((function(){}))})),pc=function(e){var t;return!(!or(e)||"function"!=typeof(t=e.then))&&t},gc=function(e,t,n){if(!t.notified){t.notified=!0;var r=t.reactions;zs((function(){for(var i=t.value,o=1==t.state,a=0;r.length>a;){var s,c,u,l=r[a++],h=o?l.ok:l.fail,d=l.resolve,f=l.reject,p=l.domain;try{h?(o||(2===t.rejection&&mc(e,t),t.rejection=1),!0===h?s=i:(p&&p.enter(),s=h(i),p&&(p.exit(),u=!0)),s===l.promise?f(ic("Promise-chain cycle")):(c=pc(s))?c.call(s,d,f):d(s)):f(i)}catch(e){p&&!u&&p.exit(),f(e)}}t.reactions=[],t.notified=!1,n&&!t.rejection&&vc(e,t)}))}},Ac=function(e,t,n){var r,i;hc?((r=oc.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),Hn.dispatchEvent(r)):r={promise:t,reason:n},(i=Hn["on"+e])?i(r):"unhandledrejection"===e&&function(e,t){var n=Hn.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}("Unhandled promise rejection",n)},vc=function(e,t){js.call(Hn,(function(){var n,r=t.value;if(1!==t.rejection&&!t.parent&&(n=Zs((function(){lc?ac.emit("unhandledRejection",r,e):Ac("unhandledrejection",e,r)})),t.rejection=lc||1!==t.rejection&&!t.parent?2:1,n.error))throw n.value}))},mc=function(e,t){js.call(Hn,(function(){lc?ac.emit("rejectionHandled",e):Ac("rejectionhandled",e,t.value)}))},yc=function(e,t,n,r){return function(i){e(t,n,i,r)}},bc=function(e,t,n,r){t.done||(t.done=!0,r&&(t=r),t.value=n,t.state=2,gc(e,t,!0))},_c=function(e,t,n,r){if(!t.done){t.done=!0,r&&(t=r);try{if(e===n)throw ic("Promise can't be resolved itself");var i=pc(n);i?zs((function(){var r={done:!1};try{i.call(n,yc(_c,e,r,t),yc(bc,e,r,t))}catch(n){bc(e,r,n,t)}})):(t.value=n,t.state=1,gc(e,t,!1))}catch(n){bc(e,{done:!1},n,t)}}};dc&&(rc=function(e){ji(this,rc,"Promise"),_r(e),Hs.call(this);var t=ec(this);try{e(yc(_c,this,t),yc(bc,this,t))}catch(e){bc(this,t,e)}},(Hs=function(e){tc(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=Mo(rc.prototype,{then:function(e,t){var n=nc(this),r=cc(As(this,rc));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=lc?ac.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&gc(this,n,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),Ws=function(){var e=new Hs,t=ec(e);this.promise=e,this.resolve=yc(_c,e,t),this.reject=yc(bc,e,t)},Js.f=cc=function(e){return e===rc||e===Ec?new Ws(e):uc(e)}),kr({global:!0,wrap:!0,forced:dc},{Promise:rc}),Gi(rc,"Promise",!1,!0),Zo("Promise");var Ec=Nr("Promise");kr({target:"Promise",stat:!0,forced:dc},{reject:function(e){var t=cc(this);return t.reject.call(void 0,e),t.promise}}),kr({target:"Promise",stat:!0,forced:!0},{resolve:function(e){return Xs(this===Ec?rc:this,e)}}),kr({target:"Promise",stat:!0,forced:fc},{all:function(e){var t=this,n=cc(t),r=n.resolve,i=n.reject,o=Zs((function(){var n=_r(t.resolve),o=[],a=0,s=1;Mi(e,(function(e){var c=a++,u=!1;o.push(void 0),s++,n.call(t,e).then((function(e){u||(u=!0,o[c]=e,--s||r(o))}),i)})),--s||r(o)}));return o.error&&i(o.value),n.promise},race:function(e){var t=this,n=cc(t),r=n.reject,i=Zs((function(){var i=_r(t.resolve);Mi(e,(function(e){i.call(t,e).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}}),kr({target:"Promise",stat:!0},{allSettled:function(e){var t=this,n=Js.f(t),r=n.resolve,i=n.reject,o=Zs((function(){var n=_r(t.resolve),i=[],o=0,a=1;Mi(e,(function(e){var s=o++,c=!1;i.push(void 0),a++,n.call(t,e).then((function(e){c||(c=!0,i[s]={status:"fulfilled",value:e},--a||r(i))}),(function(e){c||(c=!0,i[s]={status:"rejected",reason:e},--a||r(i))}))})),--a||r(i)}));return o.error&&i(o.value),n.promise}}),kr({target:"Promise",proto:!0,real:!0},{finally:function(e){var t=As(this,Nr("Promise")),n="function"==typeof e;return this.then(n?function(n){return Xs(t,e()).then((function(){return n}))}:e,n?function(n){return Xs(t,e()).then((function(){throw n}))}:e)}});var wc=br.Promise;kr({target:"Array",proto:!0,forced:!pi("map")},{map:function(e){return Hi(this,e,1<arguments.length?arguments[1]:void 0)}});var Ic=mi("Array").map,Cc=Array.prototype,Sc=function(e){var t=e.map;return e===Cc||e instanceof Array&&t===Cc.map?Ic:t},Tc=Math.max,Rc=Math.min;kr({target:"Array",proto:!0,forced:!pi("splice")},{splice:function(e,t){var n,r,i,o,a=Gr(this),s=Wr(a.length),c=bo(e,s),u=arguments.length;if(0===u?n=r=0:1===u?(n=0,r=s-c):(n=u-2,r=Rc(Tc(Kr(t),0),s-c)),9007199254740991<s+n-r)throw TypeError("Maximum allowed length exceeded");for(u=si(a,r),i=0;i<r;i++)(o=c+i)in a&&zr(u,i,a[o]);if(u.length=r,n<r){for(i=c;i<s-r;i++){var l=i+n;(o=i+r)in a?a[l]=a[o]:delete a[l]}for(i=s;i>s-r+n;i--)delete a[i-1]}else if(n>r)for(i=s-r;i>c;i--)l=i+n-1,(o=i+r-1)in a?a[l]=a[o]:delete a[l];for(i=0;i<n;i++)a[i+c]=arguments[i+2];return a.length=s-r+n,u}});var kc=mi("Array").splice,Oc=Array.prototype,Nc=function(e){var t=e.splice;return e===Oc||e instanceof Array&&t===Oc.splice?kc:t},xc=[].indexOf,Dc=!!xc&&0>1/[1].indexOf(1,-0),Lc=Ca("indexOf");kr({target:"Array",proto:!0,forced:Dc||Lc},{indexOf:function(e){return Dc?xc.apply(this,arguments)||0:wo(this,e,1<arguments.length?arguments[1]:void 0)}});var Pc=mi("Array").indexOf,Bc=Array.prototype,Mc=function(e){var t=e.indexOf;return e===Bc||e instanceof Array&&t===Bc.indexOf?Pc:t},jc=oi("species"),Uc=[].slice,Fc=Math.max;kr({target:"Array",proto:!0,forced:!pi("slice")},{slice:function(e,t){var n,r=ir(this),i=Wr(r.length);if(e=bo(e,i),t=bo(void 0===t?i:t,i),Qr(r)&&("function"!=typeof(n=r.constructor)||n!==Array&&!Qr(n.prototype)?or(n)&&null===(n=n[jc])&&(n=void 0):n=void 0,n===Array||void 0===n))return Uc.call(r,e,t);for(n=new(void 0===n?Array:n)(Fc(t-e,0)),i=0;e<t;e++,i++)e in r&&zr(n,i,r[e]);return n.length=i,n}});var Qc=mi("Array").slice,Gc=Array.prototype,qc=function(e){var t=e.slice;return e===Gc||e instanceof Array&&t===Gc.slice?Qc:t},Vc=!0;"find"in[]&&Array(1).find((function(){Vc=!1})),kr({target:"Array",proto:!0,forced:Vc},{find:function(e){return Ji(this,e,1<arguments.length?arguments[1]:void 0)}});var Kc=mi("Array").find,Hc=Array.prototype,Wc=function(e){var t=e.find;return e===Hc||e instanceof Array&&t===Hc.find?Kc:t},zc=[].slice,Yc={};kr({target:"Function",proto:!0},{bind:Function.bind||function(e){var t=_r(this),n=zc.call(arguments,1),r=function(){var i=n.concat(zc.call(arguments));if(this instanceof r){var o=i.length;if(!(o in Yc)){for(var a=[],s=0;s<o;s++)a[s]="a["+s+"]";Yc[o]=Function("C,a","return new C("+a.join(",")+")")}i=Yc[o](t,i)}else i=t.apply(e,i);return i};return or(t.prototype)&&(r.prototype=t.prototype),r}});var Jc=mi("Function").bind,Xc=Function.prototype,Zc=function(e){var t=e.bind;return e===Xc||e instanceof Function&&t===Xc.bind?Jc:t};kr({target:"Array",proto:!0},{includes:function(e){return Eo(this,e,1<arguments.length?arguments[1]:void 0)}});var $c=mi("Array").includes;kr({target:"String",proto:!0,forced:!ma("includes")},{includes:function(e){return!!~String(rr(this)).indexOf(Aa(e),1<arguments.length?arguments[1]:void 0)}});var eu=mi("String").includes,tu=Array.prototype,nu=String.prototype,ru=function(e){var t=e.includes;return e===tu||e instanceof Array&&t===tu.includes?$c:"string"==typeof e||e===nu||e instanceof String&&t===nu.includes?eu:t};kr({target:"Array",proto:!0,forced:Ca("some")},{some:function(e){return zi(this,e,1<arguments.length?arguments[1]:void 0)}});var iu=mi("Array").some,ou=Array.prototype,au=function(e){var t=e.some;return e===ou||e instanceof Array&&t===ou.some?iu:t};let su=a;var cu=Object.freeze({__proto__:null,shimMediaStream:d,shimOnTrack:f,shimGetSendersWithDtmf:p,shimGetStats:g,shimSenderReceiverGetStats:A,shimAddTrackRemoveTrackWithNative:v,shimAddTrackRemoveTrack:m,shimPeerConnection:y,fixNegotiationNeeded:b,shimGetUserMedia:h,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then((t=>{let r=n.video&&n.video.width,i=n.video&&n.video.height;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:n.video&&n.video.frameRate||3}},r&&(n.video.mandatory.maxWidth=r),i&&(n.video.mandatory.maxHeight=i),e.navigator.mediaDevices.getUserMedia(n)}))}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}}),uu="".startsWith,lu=Math.min,hu=ma("startsWith");kr({target:"String",proto:!0,forced:!hu},{startsWith:function(e){var t=String(rr(this));Aa(e);var n=Wr(lu(1<arguments.length?arguments[1]:void 0,t.length)),r=String(e);return uu?uu.call(t,r,n):t.slice(n,n+r.length)===r}});var du=mi("String").startsWith,fu=String.prototype,pu=function(e){var t=e.startsWith;return"string"==typeof e||e===fu||e instanceof String&&t===fu.startsWith?du:t};kr({target:"String",proto:!0,forced:Wn((function(){return"trim"!=="\t\n\v\f\r \u2028\u2029\ufeff".trim.name}))},{trim:function(){return Wa(this)}});var gu,Au,vu,mu=mi("String").trim,yu=String.prototype,bu=function(e){var t=e.trim;return"string"==typeof e||e===yu||e instanceof String&&t===yu.trim?mu:t},_u=e((function(e){var t={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};t.localCName=t.generateIdentifier(),t.splitLines=function(e){var t;return Sc(t=bu(e).call(e).split("\n")).call(t,(function(e){return bu(e).call(e)}))},t.splitSections=function(e){return e=e.split("\nm="),Sc(e).call(e,(function(e,t){var n;return bu(n=0<t?"m="+e:e).call(n)+"\r\n"}))},t.getDescription=function(e){return(e=t.splitSections(e))&&e[0]},t.getMediaSections=function(e){return(e=t.splitSections(e)).shift(),e},t.matchPrefix=function(e,n){var r;return os(r=t.splitLines(e)).call(r,(function(e){return 0===Mc(e).call(e,n)}))},t.parseCandidate=function(e){var t;e={foundation:(t=0===Mc(e).call(e,"a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:Xa(t[1],10),protocol:t[2].toLowerCase(),priority:Xa(t[3],10),ip:t[4],address:t[4],port:Xa(t[5],10),type:t[7]};for(var n=8;n<t.length;n+=2)switch(t[n]){case"raddr":e.relatedAddress=t[n+1];break;case"rport":e.relatedPort=Xa(t[n+1],10);break;case"tcptype":e.tcpType=t[n+1];break;case"ufrag":e.ufrag=t[n+1],e.usernameFragment=t[n+1];break;default:e[t[n]]=t[n+1]}return e},t.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var n=e.type;return t.push("typ"),t.push(n),"host"!==n&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},t.parseIceOptions=function(e){return e.substr(14).split(" ")},t.parseRtpMap=function(e){e=e.substr(9).split(" ");var t={payloadType:Xa(e.shift(),10)};return e=e[0].split("/"),t.name=e[0],t.clockRate=Xa(e[1],10),t.channels=3===e.length?Xa(e[2],10):1,t.numChannels=t.channels,t},t.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},t.parseExtmap=function(e){var t;return e=e.substr(9).split(" "),{id:Xa(e[0],10),direction:0<Mc(t=e[0]).call(t,"/")?e[0].split("/")[1]:"sendrecv",uri:e[1]}},t.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},t.parseFmtp=function(e){for(var t={},n=e.substr(Mc(e).call(e," ")+1).split(";"),r=0;r<n.length;r++){var i,o;e=bu(i=n[r]).call(i).split("="),t[bu(o=e[0]).call(o)]=e[1]}return t},t.writeFmtp=function(e){var t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Ba(e.parameters).length){var r,i=[];Oa(r=Ba(e.parameters)).call(r,(function(t){e.parameters[t]?i.push(t+"="+e.parameters[t]):i.push(t)})),t+="a=fmtp:"+n+" "+i.join(";")+"\r\n"}return t},t.parseRtcpFb=function(e){return{type:(e=e.substr(Mc(e).call(e," ")+1).split(" ")).shift(),parameter:e.join(" ")}},t.writeRtcpFb=function(e){var t,n="",r=e.payloadType;return void 0!==e.preferredPayloadType&&(r=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&Oa(t=e.rtcpFeedback).call(t,(function(e){n+="a=rtcp-fb:"+r+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),n},t.parseSsrcMedia=function(e){var t=Mc(e).call(e," "),n={ssrc:Xa(e.substr(7,t-7),10)},r=Mc(e).call(e,":",t);return-1<r?(n.attribute=e.substr(t+1,r-t-1),n.value=e.substr(r+1)):n.attribute=e.substr(t+1),n},t.parseSsrcGroup=function(e){return{semantics:(e=e.substr(13).split(" ")).shift(),ssrcs:Sc(e).call(e,(function(e){return Xa(e,10)}))}},t.getMid=function(e){if(e=t.matchPrefix(e,"a=mid:")[0])return e.substr(6)},t.parseFingerprint=function(e){return{algorithm:(e=e.substr(14).split(" "))[0].toLowerCase(),value:e[1]}},t.getDtlsParameters=function(e,n){return e=t.matchPrefix(e+n,"a=fingerprint:"),{role:"auto",fingerprints:Sc(e).call(e,t.parseFingerprint)}},t.writeDtlsParameters=function(e,t){var n,r="a=setup:"+t+"\r\n";return Oa(n=e.fingerprints).call(n,(function(e){r+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),r},t.getIceParameters=function(e,n){return e=t.splitLines(e),e=_i(e).call(e,t.splitLines(n)),{usernameFragment:os(e).call(e,(function(e){return 0===Mc(e).call(e,"a=ice-ufrag:")}))[0].substr(12),password:os(e).call(e,(function(e){return 0===Mc(e).call(e,"a=ice-pwd:")}))[0].substr(10)}},t.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},t.parseRtpParameters=function(e){for(var n,r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},i=t.splitLines(e)[0].split(" "),o=3;o<i.length;o++){var a=i[o],s=t.matchPrefix(e,"a=rtpmap:"+a+" ")[0];if(s){var c;s=t.parseRtpMap(s);var u=t.matchPrefix(e,"a=fmtp:"+a+" ");switch(s.parameters=u.length?t.parseFmtp(u[0]):{},s.rtcpFeedback=Sc(c=t.matchPrefix(e,"a=rtcp-fb:"+a+" ")).call(c,t.parseRtcpFb),r.codecs.push(s),s.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(s.name.toUpperCase())}}}return Oa(n=t.matchPrefix(e,"a=extmap:")).call(n,(function(e){r.headerExtensions.push(t.parseExtmap(e))})),r},t.writeRtpDescription=function(e,n){var r,i,o,a="";a+="m="+e+" ",a+=0<n.codecs.length?"9":"0",a+=" UDP/TLS/RTP/SAVPF ",a+=Sc(r=n.codecs).call(r,(function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType})).join(" ")+"\r\n",a+="c=IN IP4 0.0.0.0\r\n",a+="a=rtcp:9 IN IP4 0.0.0.0\r\n",Oa(i=n.codecs).call(i,(function(e){a+=t.writeRtpMap(e),a+=t.writeFmtp(e),a+=t.writeRtcpFb(e)}));var s,c=0;return Oa(o=n.codecs).call(o,(function(e){e.maxptime>c&&(c=e.maxptime)})),0<c&&(a+="a=maxptime:"+c+"\r\n"),a+="a=rtcp-mux\r\n",n.headerExtensions&&Oa(s=n.headerExtensions).call(s,(function(e){a+=t.writeExtmap(e)})),a},t.parseRtpEncodingParameters=function(e){var n,r,i,o,a,s,c,u=[],l=t.parseRtpParameters(e),h=-1!==Mc(n=l.fecMechanisms).call(n,"RED"),d=-1!==Mc(r=l.fecMechanisms).call(r,"ULPFEC"),f=0<(n=os(i=Sc(o=t.matchPrefix(e,"a=ssrc:")).call(o,(function(e){return t.parseSsrcMedia(e)}))).call(i,(function(e){return"cname"===e.attribute}))).length&&n[0].ssrc;i=Sc(a=t.matchPrefix(e,"a=ssrc-group:FID")).call(a,(function(e){return e=e.substr(17).split(" "),Sc(e).call(e,(function(e){return Xa(e,10)}))})),0<i.length&&1<i[0].length&&i[0][0]===f&&(c=i[0][1]),Oa(s=l.codecs).call(s,(function(e){"RTX"===e.name.toUpperCase()&&e.parameters.apt&&(e={ssrc:f,codecPayloadType:Xa(e.parameters.apt,10)},f&&c&&(e.rtx={ssrc:c}),u.push(e),h&&((e=JSON.parse(Fr(e))).fec={ssrc:f,mechanism:d?"red+ulpfec":"red"},u.push(e)))})),0===u.length&&f&&u.push({ssrc:f});var p,g,A=t.matchPrefix(e,"b=");return A.length&&(A=0===Mc(p=A[0]).call(p,"b=TIAS:")?Xa(A[0].substr(7),10):0===Mc(g=A[0]).call(g,"b=AS:")?950*Xa(A[0].substr(5),10)-16e3:void 0,Oa(u).call(u,(function(e){e.maxBitrate=A}))),u},t.parseRtcpParameters=function(e){var n,r,i={},o=os(n=Sc(r=t.matchPrefix(e,"a=ssrc:")).call(r,(function(e){return t.parseSsrcMedia(e)}))).call(n,(function(e){return"cname"===e.attribute}))[0];return o&&(i.cname=o.value,i.ssrc=o.ssrc),n=t.matchPrefix(e,"a=rtcp-rsize"),i.reducedSize=0<n.length,i.compound=0===n.length,e=t.matchPrefix(e,"a=rtcp-mux"),i.mux=0<e.length,i},t.parseMsid=function(e){var n,r,i,o=t.matchPrefix(e,"a=msid:");return 1===o.length?{stream:(i=o[0].substr(7).split(" "))[0],track:i[1]}:0<(e=os(n=Sc(r=t.matchPrefix(e,"a=ssrc:")).call(r,(function(e){return t.parseSsrcMedia(e)}))).call(n,(function(e){return"msid"===e.attribute}))).length?{stream:(i=e[0].value.split(" "))[0],track:i[1]}:void 0},t.generateSessionId=function(){return Math.random().toString().substr(2,21)},t.writeSessionBoilerplate=function(e,n,r){return n=void 0!==n?n:2,"v=0\r\no="+(r||"thisisadapterortc")+" "+(e||t.generateSessionId())+" "+n+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},t.writeMediaSection=function(e,n,r,i){return n=t.writeRtpDescription(e.kind,n),n+=t.writeIceParameters(e.iceGatherer.getLocalParameters()),n+=t.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===r?"actpass":"active"),n+="a=mid:"+e.mid+"\r\n",e.direction?n+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?n+="a=sendrecv\r\n":e.rtpSender?n+="a=sendonly\r\n":e.rtpReceiver?n+="a=recvonly\r\n":n+="a=inactive\r\n",e.rtpSender&&(n=n+"a="+(r="msid:"+i.id+" "+e.rtpSender.track.id+"\r\n")+"a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+r,e.sendEncodingParameters[0].rtx&&(n+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+r,n+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")),n+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+t.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(n+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+t.localCName+"\r\n"),n},t.getDirection=function(e,n){e=t.splitLines(e);for(var r=0;r<e.length;r++)switch(e[r]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return e[r].substr(2)}return n?t.getDirection(n):"sendrecv"},t.getKind=function(e){return t.splitLines(e)[0].split(" ")[0].substr(2)},t.isRejected=function(e){return"0"===e.split(" ",2)[1]},t.parseMLine=function(e){return{kind:(e=t.splitLines(e)[0].substr(2).split(" "))[0],port:Xa(e[1],10),protocol:e[2],fmt:qc(e).call(e,3).join(" ")}},t.parseOLine=function(e){return{username:(e=t.matchPrefix(e,"o=")[0].substr(2).split(" "))[0],sessionId:e[1],sessionVersion:Xa(e[2],10),netType:e[3],addressType:e[4],address:e[5]}},t.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;e=t.splitLines(e);for(var n=0;n<e.length;n++)if(2>e[n].length||"="!==e[n].charAt(1))return!1;return!0},e.exports=t})),Eu=function(e,t){function n(t,n){n.addTrack(t),n.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:t}))}function r(t,n,r,i){var o=new Event("track");o.track=n,o.receiver=r,o.transceiver={receiver:r},o.streams=i,e.setTimeout((function(){t._dispatchEvent("track",o)}))}var i=function(n){var r=this,i=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach((function(e){r[e]=i[e].bind(i)})),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",n=JSON.parse(JSON.stringify(n||{})),this.usingBundle="max-bundle"===n.bundlePolicy,"negotiate"===n.rtcpMuxPolicy)throw C("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(n.rtcpMuxPolicy||(n.rtcpMuxPolicy="require"),n.iceTransportPolicy){case"all":case"relay":break;default:n.iceTransportPolicy="all"}switch(n.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:n.bundlePolicy="balanced"}if(n.iceServers=function(e,t){var n=!1;return(e=JSON.parse(JSON.stringify(e))).filter((function(e){if(e&&(e.urls||e.url)){var r=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var i="string"==typeof r;return i&&(r=[r]),r=r.filter((function(e){return 0!==e.indexOf("turn:")||-1===e.indexOf("transport=udp")||-1!==e.indexOf("turn:[")||n?0===e.indexOf("stun:")&&14393<=t&&-1===e.indexOf("?transport=udp"):(n=!0,!0)})),delete e.url,e.urls=i?r[0]:r,!!r.length}}))}(n.iceServers||[],t),this._iceGatherers=[],n.iceCandidatePoolSize)for(var o=n.iceCandidatePoolSize;0<o;o--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:n.iceServers,gatherPolicy:n.iceTransportPolicy}));else n.iceCandidatePoolSize=0;this._config=n,this.transceivers=[],this._sdpSessionId=_u.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(i.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(i.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),i.prototype.onicecandidate=null,i.prototype.onaddstream=null,i.prototype.ontrack=null,i.prototype.onremovestream=null,i.prototype.onsignalingstatechange=null,i.prototype.oniceconnectionstatechange=null,i.prototype.onconnectionstatechange=null,i.prototype.onicegatheringstatechange=null,i.prototype.onnegotiationneeded=null,i.prototype.ondatachannel=null,i.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"==typeof this["on"+e]&&this["on"+e](t))},i.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},i.prototype.getConfiguration=function(){return this._config},i.prototype.getLocalStreams=function(){return this.localStreams},i.prototype.getRemoteStreams=function(){return this.remoteStreams},i.prototype._createTransceiver=function(e,t){var n=0<this.transceivers.length;return e={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0},this.usingBundle&&n?(e.iceTransport=this.transceivers[0].iceTransport,e.dtlsTransport=this.transceivers[0].dtlsTransport):(n=this._createIceAndDtlsTransports(),e.iceTransport=n.iceTransport,e.dtlsTransport=n.dtlsTransport),t||this.transceivers.push(e),e},i.prototype.addTrack=function(t,n){if(this._isClosed)throw C("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var r;if(this.transceivers.find((function(e){return e.track===t})))throw C("InvalidAccessError","Track already exists.");for(var i=0;i<this.transceivers.length;i++)this.transceivers[i].track||this.transceivers[i].kind!==t.kind||(r=this.transceivers[i]);return r||(r=this._createTransceiver(t.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(n)&&this.localStreams.push(n),r.track=t,r.stream=n,r.rtpSender=new e.RTCRtpSender(t,r.dtlsTransport),r.rtpSender},i.prototype.addStream=function(e){var n=this;if(15025<=t)e.getTracks().forEach((function(t){n.addTrack(t,e)}));else{var r=e.clone();e.getTracks().forEach((function(e,t){var n=r.getTracks()[t];e.addEventListener("enabled",(function(e){n.enabled=e.enabled}))})),r.getTracks().forEach((function(e){n.addTrack(e,r)}))}},i.prototype.removeTrack=function(t){if(this._isClosed)throw C("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(t instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var n=this.transceivers.find((function(e){return e.rtpSender===t}));if(!n)throw C("InvalidAccessError","Sender was not created by this connection.");var r=n.stream;n.rtpSender.stop(),n.rtpSender=null,n.track=null,n.stream=null,-1===this.transceivers.map((function(e){return e.stream})).indexOf(r)&&-1<this.localStreams.indexOf(r)&&this.localStreams.splice(this.localStreams.indexOf(r),1),this._maybeFireNegotiationNeeded()},i.prototype.removeStream=function(e){var t=this;e.getTracks().forEach((function(e){var n=t.getSenders().find((function(t){return t.track===e}));n&&t.removeTrack(n)}))},i.prototype.getSenders=function(){return this.transceivers.filter((function(e){return!!e.rtpSender})).map((function(e){return e.rtpSender}))},i.prototype.getReceivers=function(){return this.transceivers.filter((function(e){return!!e.rtpReceiver})).map((function(e){return e.rtpReceiver}))},i.prototype._createIceGatherer=function(t,n){var r=this;if(n&&0<t)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var i=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(i,"state",{value:"new",writable:!0}),this.transceivers[t].bufferedCandidateEvents=[],this.transceivers[t].bufferCandidates=function(e){var n=!e.candidate||0===Object.keys(e.candidate).length;i.state=n?"completed":"gathering",null!==r.transceivers[t].bufferedCandidateEvents&&r.transceivers[t].bufferedCandidateEvents.push(e)},i.addEventListener("localcandidate",this.transceivers[t].bufferCandidates),i},i.prototype._gather=function(t,n){var r=this,i=this.transceivers[n].iceGatherer;if(!i.onlocalcandidate){var o=this.transceivers[n].bufferedCandidateEvents;this.transceivers[n].bufferedCandidateEvents=null,i.removeEventListener("localcandidate",this.transceivers[n].bufferCandidates),i.onlocalcandidate=function(e){if(!(r.usingBundle&&0<n)){var o=new Event("icecandidate");o.candidate={sdpMid:t,sdpMLineIndex:n};var a=e.candidate;(e=!a||0===Object.keys(a).length)?"new"!==i.state&&"gathering"!==i.state||(i.state="completed"):("new"===i.state&&(i.state="gathering"),a.component=1,a.ufrag=i.getLocalParameters().usernameFragment,a=_u.writeCandidate(a),o.candidate=Object.assign(o.candidate,_u.parseCandidate(a)),o.candidate.candidate=a,o.candidate.toJSON=function(){return{candidate:o.candidate.candidate,sdpMid:o.candidate.sdpMid,sdpMLineIndex:o.candidate.sdpMLineIndex,usernameFragment:o.candidate.usernameFragment}}),(a=_u.getMediaSections(r._localDescription.sdp))[o.candidate.sdpMLineIndex]+=e?"a=end-of-candidates\r\n":"a="+o.candidate.candidate+"\r\n",r._localDescription.sdp=_u.getDescription(r._localDescription.sdp)+a.join(""),a=r.transceivers.every((function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state})),"gathering"!==r.iceGatheringState&&(r.iceGatheringState="gathering",r._emitGatheringStateChange()),e||r._dispatchEvent("icecandidate",o),a&&(r._dispatchEvent("icecandidate",new Event("icecandidate")),r.iceGatheringState="complete",r._emitGatheringStateChange())}},e.setTimeout((function(){o.forEach((function(e){i.onlocalcandidate(e)}))}),0)}},i.prototype._createIceAndDtlsTransports=function(){var t=this,n=new e.RTCIceTransport(null);n.onicestatechange=function(){t._updateIceConnectionState(),t._updateConnectionState()};var r=new e.RTCDtlsTransport(n);return r.ondtlsstatechange=function(){t._updateConnectionState()},r.onerror=function(){Object.defineProperty(r,"state",{value:"failed",writable:!0}),t._updateConnectionState()},{iceTransport:n,dtlsTransport:r}},i.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer),(t=this.transceivers[e].iceTransport)&&(delete t.onicestatechange,delete this.transceivers[e].iceTransport),(t=this.transceivers[e].dtlsTransport)&&(delete t.ondtlsstatechange,delete t.onerror,delete this.transceivers[e].dtlsTransport)},i.prototype._transceive=function(e,n,r){var i=E(e.localCapabilities,e.remoteCapabilities);n&&e.rtpSender&&(i.encodings=e.sendEncodingParameters,i.rtcp={cname:_u.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(i.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(i)),r&&e.rtpReceiver&&0<i.codecs.length&&("video"===e.kind&&e.recvEncodingParameters&&15019>t&&e.recvEncodingParameters.forEach((function(e){delete e.rtx})),e.recvEncodingParameters.length?i.encodings=e.recvEncodingParameters:i.encodings=[{}],i.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(i.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(i.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(i))},i.prototype.setLocalDescription=function(e){var t=this;if(-1===["offer","answer"].indexOf(e.type))return Promise.reject(C("TypeError",'Unsupported type "'+e.type+'"'));if(!w("setLocalDescription",e.type,t.signalingState)||t._isClosed)return Promise.reject(C("InvalidStateError","Can not set local "+e.type+" in state "+t.signalingState));if("offer"===e.type){var n=_u.splitSections(e.sdp),r=n.shift();n.forEach((function(e,n){e=_u.parseRtpParameters(e),t.transceivers[n].localCapabilities=e})),t.transceivers.forEach((function(e,n){t._gather(e.mid,n)}))}else if("answer"===e.type){n=_u.splitSections(t._remoteDescription.sdp),r=n.shift();var i=0<_u.matchPrefix(r,"a=ice-lite").length;n.forEach((function(e,n){var o=t.transceivers[n],a=o.iceGatherer,s=o.iceTransport,c=o.dtlsTransport,u=o.localCapabilities,l=o.remoteCapabilities;if(!(_u.isRejected(e)&&0===_u.matchPrefix(e,"a=bundle-only").length||o.rejected)){var h=_u.getIceParameters(e,r);e=_u.getDtlsParameters(e,r),i&&(e.role="server"),t.usingBundle&&0!==n||(t._gather(o.mid,n),"new"===s.state&&s.start(a,h,i?"controlling":"controlled"),"new"===c.state&&c.start(e)),n=E(u,l),t._transceive(o,0<n.codecs.length,!1)}}))}return t._localDescription={type:e.type,sdp:e.sdp},"offer"===e.type?t._updateSignalingState("have-local-offer"):t._updateSignalingState("stable"),Promise.resolve()},i.prototype.setRemoteDescription=function(i){var o=this;if(-1===["offer","answer"].indexOf(i.type))return Promise.reject(C("TypeError",'Unsupported type "'+i.type+'"'));if(!w("setRemoteDescription",i.type,o.signalingState)||o._isClosed)return Promise.reject(C("InvalidStateError","Can not set remote "+i.type+" in state "+o.signalingState));var a={};o.remoteStreams.forEach((function(e){a[e.id]=e}));var s=[],c=_u.splitSections(i.sdp),u=c.shift(),l=0<_u.matchPrefix(u,"a=ice-lite").length,h=0<_u.matchPrefix(u,"a=group:BUNDLE ").length;o.usingBundle=h;var d=_u.matchPrefix(u,"a=ice-options:")[0];return o.canTrickleIceCandidates=!!d&&0<=d.substr(14).split(" ").indexOf("trickle"),c.forEach((function(r,c){var d=_u.splitLines(r),f=_u.getKind(r),p=_u.isRejected(r)&&0===_u.matchPrefix(r,"a=bundle-only").length,g=d[0].substr(2).split(" ")[2];d=_u.getDirection(r,u);var A=_u.parseMsid(r),v=_u.getMid(r)||_u.generateIdentifier();if(p||"application"===f&&("DTLS/SCTP"===g||"UDP/DTLS/SCTP"===g))o.transceivers[c]={mid:v,kind:f,protocol:g,rejected:!0};else{var m,y;!p&&o.transceivers[c]&&o.transceivers[c].rejected&&(o.transceivers[c]=o._createTransceiver(f,!0));var b,_,w=_u.parseRtpParameters(r);p||(b=_u.getIceParameters(r,u),(_=_u.getDtlsParameters(r,u)).role="client"),g=_u.parseRtpEncodingParameters(r);var C=_u.parseRtcpParameters(r),S=0<_u.matchPrefix(r,"a=end-of-candidates",u).length;if(r=_u.matchPrefix(r,"a=candidate:").map((function(e){return _u.parseCandidate(e)})).filter((function(e){return 1===e.component})),("offer"===i.type||"answer"===i.type)&&!p&&h&&0<c&&o.transceivers[c]&&(o._disposeIceAndDtlsTransports(c),o.transceivers[c].iceGatherer=o.transceivers[0].iceGatherer,o.transceivers[c].iceTransport=o.transceivers[0].iceTransport,o.transceivers[c].dtlsTransport=o.transceivers[0].dtlsTransport,o.transceivers[c].rtpSender&&o.transceivers[c].rtpSender.setTransport(o.transceivers[0].dtlsTransport),o.transceivers[c].rtpReceiver&&o.transceivers[c].rtpReceiver.setTransport(o.transceivers[0].dtlsTransport)),"offer"!==i.type||p){if("answer"===i.type&&!p){f=(m=o.transceivers[c]).iceGatherer;var T=m.iceTransport,R=m.dtlsTransport,k=m.rtpReceiver;p=m.sendEncodingParameters,v=m.localCapabilities,o.transceivers[c].recvEncodingParameters=g,o.transceivers[c].remoteCapabilities=w,o.transceivers[c].rtcpParameters=C,r.length&&"new"===T.state&&(!l&&!S||h&&0!==c?r.forEach((function(e){I(m.iceTransport,e)})):T.setRemoteCandidates(r)),h&&0!==c||("new"===T.state&&T.start(f,b,"controlling"),"new"===R.state&&R.start(_)),!E(m.localCapabilities,m.remoteCapabilities).codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&m.sendEncodingParameters[0].rtx&&delete m.sendEncodingParameters[0].rtx,o._transceive(m,"sendrecv"===d||"recvonly"===d,"sendrecv"===d||"sendonly"===d),!k||"sendrecv"!==d&&"sendonly"!==d?delete m.rtpReceiver:(y=k.track,A?(a[A.stream]||(a[A.stream]=new e.MediaStream),n(y,a[A.stream]),s.push([y,k,a[A.stream]])):(a.default||(a.default=new e.MediaStream),n(y,a.default),s.push([y,k,a.default])))}}else(m=o.transceivers[c]||o._createTransceiver(f)).mid=v,m.iceGatherer||(m.iceGatherer=o._createIceGatherer(c,h)),r.length&&"new"===m.iceTransport.state&&(!S||h&&0!==c?r.forEach((function(e){I(m.iceTransport,e)})):m.iceTransport.setRemoteCandidates(r)),v=e.RTCRtpReceiver.getCapabilities(f),15019>t&&(v.codecs=v.codecs.filter((function(e){return"rtx"!==e.name}))),p=m.sendEncodingParameters||[{ssrc:1001*(2*c+2)}],b=!1,"sendrecv"===d||"sendonly"===d?(b=!m.rtpReceiver,k=m.rtpReceiver||new e.RTCRtpReceiver(m.dtlsTransport,f),b&&(y=k.track,A&&"-"===A.stream||(A?(a[A.stream]||(a[A.stream]=new e.MediaStream,Object.defineProperty(a[A.stream],"id",{get:function(){return A.stream}})),Object.defineProperty(y,"id",{get:function(){return A.track}}),T=a[A.stream]):(a.default||(a.default=new e.MediaStream),T=a.default)),T&&(n(y,T),m.associatedRemoteMediaStreams.push(T)),s.push([y,k,T]))):m.rtpReceiver&&m.rtpReceiver.track&&(m.associatedRemoteMediaStreams.forEach((function(t){var n=t.getTracks().find((function(e){return e.id===m.rtpReceiver.track.id}));n&&function(t,n){n.removeTrack(t),n.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:t}))}(n,t)})),m.associatedRemoteMediaStreams=[]),m.localCapabilities=v,m.remoteCapabilities=w,m.rtpReceiver=k,m.rtcpParameters=C,m.sendEncodingParameters=p,m.recvEncodingParameters=g,o._transceive(o.transceivers[c],!1,b)}})),void 0===o._dtlsRole&&(o._dtlsRole="offer"===i.type?"active":"passive"),o._remoteDescription={type:i.type,sdp:i.sdp},"offer"===i.type?o._updateSignalingState("have-remote-offer"):o._updateSignalingState("stable"),Object.keys(a).forEach((function(t){var n=a[t];if(n.getTracks().length){if(-1===o.remoteStreams.indexOf(n)){o.remoteStreams.push(n);var i=new Event("addstream");i.stream=n,e.setTimeout((function(){o._dispatchEvent("addstream",i)}))}s.forEach((function(e){var t=e[0],i=e[1];n.id===e[2].id&&r(o,t,i,[n])}))}})),s.forEach((function(e){e[2]||r(o,e[0],e[1],[])})),e.setTimeout((function(){o&&o.transceivers&&o.transceivers.forEach((function(e){e.iceTransport&&"new"===e.iceTransport.state&&0<e.iceTransport.getRemoteCandidates().length&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))}))}),4e3),Promise.resolve()},i.prototype.close=function(){this.transceivers.forEach((function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()})),this._isClosed=!0,this._updateSignalingState("closed")},i.prototype._updateSignalingState=function(e){this.signalingState=e,e=new Event("signalingstatechange"),this._dispatchEvent("signalingstatechange",e)},i.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,e.setTimeout((function(){if(t.needNegotiation){t.needNegotiation=!1;var e=new Event("negotiationneeded");t._dispatchEvent("negotiationneeded",e)}}),0))},i.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};this.transceivers.forEach((function(e){e.iceTransport&&!e.rejected&&t[e.iceTransport.state]++})),e="new",0<t.failed?e="failed":0<t.checking?e="checking":0<t.disconnected?e="disconnected":0<t.new?e="new":0<t.connected?e="connected":0<t.completed&&(e="completed"),e!==this.iceConnectionState&&(this.iceConnectionState=e,e=new Event("iceconnectionstatechange"),this._dispatchEvent("iceconnectionstatechange",e))},i.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};this.transceivers.forEach((function(e){e.iceTransport&&e.dtlsTransport&&!e.rejected&&(t[e.iceTransport.state]++,t[e.dtlsTransport.state]++)})),t.connected+=t.completed,e="new",0<t.failed?e="failed":0<t.connecting?e="connecting":0<t.disconnected?e="disconnected":0<t.new?e="new":0<t.connected&&(e="connected"),e!==this.connectionState&&(this.connectionState=e,e=new Event("connectionstatechange"),this._dispatchEvent("connectionstatechange",e))},i.prototype.createOffer=function(n){var r=this;if(r._isClosed)return Promise.reject(C("InvalidStateError","Can not call createOffer after close"));var i=r.transceivers.filter((function(e){return"audio"===e.kind})).length,o=r.transceivers.filter((function(e){return"video"===e.kind})).length;if(n){if(n.mandatory||n.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==n.offerToReceiveAudio&&(i=!0===n.offerToReceiveAudio?1:!1===n.offerToReceiveAudio?0:n.offerToReceiveAudio),void 0!==n.offerToReceiveVideo&&(o=!0===n.offerToReceiveVideo?1:!1===n.offerToReceiveVideo?0:n.offerToReceiveVideo)}for(r.transceivers.forEach((function(e){"audio"===e.kind?0>--i&&(e.wantReceive=!1):"video"===e.kind&&0>--o&&(e.wantReceive=!1)}));0<i||0<o;)0<i&&(r._createTransceiver("audio"),i--),0<o&&(r._createTransceiver("video"),o--);var a=_u.writeSessionBoilerplate(r._sdpSessionId,r._sdpSessionVersion++);return r.transceivers.forEach((function(n,i){var o=n.track,a=n.kind,s=n.mid||_u.generateIdentifier();n.mid=s,n.iceGatherer||(n.iceGatherer=r._createIceGatherer(i,r.usingBundle)),s=e.RTCRtpSender.getCapabilities(a),15019>t&&(s.codecs=s.codecs.filter((function(e){return"rtx"!==e.name}))),s.codecs.forEach((function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1"),n.remoteCapabilities&&n.remoteCapabilities.codecs&&n.remoteCapabilities.codecs.forEach((function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)}))})),s.headerExtensions.forEach((function(e){(n.remoteCapabilities&&n.remoteCapabilities.headerExtensions||[]).forEach((function(t){e.uri===t.uri&&(e.id=t.id)}))})),i=n.sendEncodingParameters||[{ssrc:1001*(2*i+1)}],o&&15019<=t&&"video"===a&&!i[0].rtx&&(i[0].rtx={ssrc:i[0].ssrc+1}),n.wantReceive&&(n.rtpReceiver=new e.RTCRtpReceiver(n.dtlsTransport,a)),n.localCapabilities=s,n.sendEncodingParameters=i})),"max-compat"!==r._config.bundlePolicy&&(a+="a=group:BUNDLE "+r.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),a+="a=ice-options:trickle\r\n",r.transceivers.forEach((function(e,t){a+=_(e,e.localCapabilities,"offer",e.stream,r._dtlsRole),a+="a=rtcp-rsize\r\n",!e.iceGatherer||"new"===r.iceGatheringState||0!==t&&r.usingBundle||(e.iceGatherer.getLocalCandidates().forEach((function(e){e.component=1,a+="a="+_u.writeCandidate(e)+"\r\n"})),"completed"===e.iceGatherer.state&&(a+="a=end-of-candidates\r\n"))})),n=new e.RTCSessionDescription({type:"offer",sdp:a}),Promise.resolve(n)},i.prototype.createAnswer=function(){var n=this;if(n._isClosed)return Promise.reject(C("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==n.signalingState&&"have-local-pranswer"!==n.signalingState)return Promise.reject(C("InvalidStateError","Can not call createAnswer in signalingState "+n.signalingState));var r=_u.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.usingBundle&&(r+="a=group:BUNDLE "+n.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),r+="a=ice-options:trickle\r\n";var i=_u.getMediaSections(n._remoteDescription.sdp).length;n.transceivers.forEach((function(e,o){if(!(o+1>i)){if(e.rejected)return"application"===e.kind?"DTLS/SCTP"===e.protocol?r+="m=application 0 DTLS/SCTP 5000\r\n":r+="m=application 0 "+e.protocol+" webrtc-datachannel\r\n":"audio"===e.kind?r+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(r+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(r+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n");var a;e.stream&&("audio"===e.kind?a=e.stream.getAudioTracks()[0]:"video"===e.kind&&(a=e.stream.getVideoTracks()[0]),a&&15019<=t&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1})),!(o=E(e.localCapabilities,e.remoteCapabilities)).codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,r+=_(e,o,"answer",e.stream,n._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(r+="a=rtcp-rsize\r\n")}}));var o=new e.RTCSessionDescription({type:"answer",sdp:r});return Promise.resolve(o)},i.prototype.addIceCandidate=function(e){var t,n=this;return e&&void 0===e.sdpMLineIndex&&!e.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise((function(r,i){if(!n._remoteDescription)return i(C("InvalidStateError","Can not add ICE candidate without a remote description"));if(e&&""!==e.candidate){var o=e.sdpMLineIndex;if(e.sdpMid)for(var a=0;a<n.transceivers.length;a++)if(n.transceivers[a].mid===e.sdpMid){o=a;break}var s=n.transceivers[o];if(!s)return i(C("OperationError","Can not add ICE candidate"));if(s.rejected)return r();if("tcp"===(a=0<Object.keys(e.candidate).length?_u.parseCandidate(e.candidate):{}).protocol&&(0===a.port||9===a.port)||a.component&&1!==a.component)return r();if((0===o||0<o&&s.iceTransport!==n.transceivers[0].iceTransport)&&!I(s.iceTransport,a))return i(C("OperationError","Can not add ICE candidate"));0===(i=e.candidate.trim()).indexOf("a=")&&(i=i.substr(2)),(t=_u.getMediaSections(n._remoteDescription.sdp))[o]+="a="+(a.type?i:"end-of-candidates")+"\r\n",n._remoteDescription.sdp=_u.getDescription(n._remoteDescription.sdp)+t.join("")}else for(o=0;o<n.transceivers.length&&(n.transceivers[o].rejected||(n.transceivers[o].iceTransport.addRemoteCandidate({}),(t=_u.getMediaSections(n._remoteDescription.sdp))[o]+="a=end-of-candidates\r\n",n._remoteDescription.sdp=_u.getDescription(n._remoteDescription.sdp)+t.join(""),!n.usingBundle));o++);r()}))},i.prototype.getStats=function(t){if(t&&t instanceof e.MediaStreamTrack){var n=null;if(this.transceivers.forEach((function(e){e.rtpSender&&e.rtpSender.track===t?n=e.rtpSender:e.rtpReceiver&&e.rtpReceiver.track===t&&(n=e.rtpReceiver)})),!n)throw C("InvalidAccessError","Invalid selector.");return n.getStats()}var r=[];return this.transceivers.forEach((function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach((function(t){e[t]&&r.push(e[t].getStats())}))})),Promise.all(r).then((function(e){var t=new Map;return e.forEach((function(e){e.forEach((function(e){t.set(e.id,e)}))})),t}))},["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach((function(t){if((t=e[t])&&t.prototype&&t.prototype.getStats){var n=t.prototype.getStats;t.prototype.getStats=function(){return n.apply(this).then((function(e){var t=new Map;return Object.keys(e).forEach((function(n){var r;e[n].type={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[(r=e[n]).type]||r.type,t.set(n,e[n])})),t}))}}}));var o=["createOffer","createAnswer"];return o.forEach((function(e){var t=i.prototype[e];i.prototype[e]=function(){var e=arguments;return"function"==typeof e[0]||"function"==typeof e[1]?t.apply(this,[arguments[2]]).then((function(t){"function"==typeof e[0]&&e[0].apply(null,[t])}),(function(t){"function"==typeof e[1]&&e[1].apply(null,[t])})):t.apply(this,arguments)}})),(o=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach((function(e){var t=i.prototype[e];i.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]||"function"==typeof e[2]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)}),(function(t){"function"==typeof e[2]&&e[2].apply(null,[t])})):t.apply(this,arguments)}})),["getStats"].forEach((function(e){var t=i.prototype[e];i.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)})):t.apply(this,arguments)}})),i},wu=Object.freeze({__proto__:null,shimPeerConnection:R,shimReplaceTrack:k,shimGetUserMedia:S,shimGetDisplayMedia:T}),Iu=Object.freeze({__proto__:null,shimOnTrack:N,shimPeerConnection:x,shimSenderGetStats:D,shimReceiverGetStats:L,shimRemoveStream:P,shimRTCDataChannel:B,shimGetUserMedia:O,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){return n&&n.video?(!0===n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)):((n=new DOMException("getDisplayMedia without video constraints is undefined")).name="NotFoundError",n.code=8,wc.reject(n))})}}),Cu=Object.freeze({__proto__:null,shimLocalStreamsAPI:M,shimRemoteStreamsAPI:j,shimCallbacksAPI:U,shimGetUserMedia:F,shimConstraints:Q,shimRTCIceServerUrls:G,shimTrackEventTransceiver:q,shimCreateOfferLegacy:V}),Su=Object.freeze({__proto__:null,shimRTCIceCandidate:K,shimMaxMessageSize:H,shimSendThrowTypeError:W,shimConnectionState:z,removeAllowExtmapMixed:Y});!function({window:e}={},n={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0}){let r=c(e),s={browserDetails:r,commonShim:Su,extractVersion:t,disableLog:i,disableWarnings:o};switch(r.browser){case"chrome":if(!cu||!y||!n.shimChrome)return a("Chrome shim is not included in this adapter release."),s;a("adapter.js shimming chrome."),s.browserShim=cu,h(e),d(e),y(e),f(e),m(e),p(e),g(e),A(e),b(e),K(e),z(e),H(e),W(e),Y(e);break;case"firefox":if(!Iu||!x||!n.shimFirefox)return a("Firefox shim is not included in this adapter release."),s;a("adapter.js shimming firefox."),s.browserShim=Iu,O(e),x(e),N(e),P(e),D(e),L(e),B(e),K(e),z(e),H(e),W(e);break;case"edge":if(!wu||!R||!n.shimEdge)return a("MS edge shim is not included in this adapter release."),s;a("adapter.js shimming edge."),s.browserShim=wu,S(e),T(e),R(e),k(e),H(e),W(e);break;case"safari":if(!Cu||!n.shimSafari)return a("Safari shim is not included in this adapter release."),s;a("adapter.js shimming safari."),s.browserShim=Cu,G(e),V(e),U(e),M(e),j(e),q(e),F(e),K(e),H(e),W(e),Y(e);break;default:a("Unsupported browser!")}}({window}),(vu=gu||(gu={})).WIN_10="Windows 10",vu.WIN_81="Windows 8.1",vu.WIN_8="Windows 8",vu.WIN_7="Windows 7",vu.WIN_VISTA="Windows Vista",vu.WIN_SERVER_2003="Windows Server 2003",vu.WIN_XP="Windows XP",vu.WIN_2000="Windows 2000",vu.ANDROID="Android",vu.OPEN_BSD="Open BSD",vu.SUN_OS="Sun OS",vu.LINUX="Linux",vu.IOS="iOS",vu.MAC_OS="Mac OS",vu.QNX="QNX",vu.UNIX="UNIX",vu.BEOS="BeOS",vu.OS_2="OS/2",vu.SEARCH_BOT="Search Bot",function(e){e.CHROME="Chrome",e.SAFARI="Safari",e.EDGE="Edge",e.FIREFOX="Firefox",e.OPERA="OPR",e.QQ="QQBrowser",e.WECHAT="MicroMessenger"}(Au||(Au={}));let Tu=new(e((function(e,t){!function(n,r){var i={extend:function(e,t){var n,r={};for(n in e)t[n]&&0==t[n].length%2?r[n]=t[n].concat(e[n]):r[n]=e[n];return r},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"==typeof e?e.replace(/[^\d\.]/g,"").split(".")[0]:r},trim:function(e,t){return e=e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),void 0===t?e:e.substring(0,255)}},o=function(e,t){for(var n,i,o,a,s,c,u=0;u<t.length&&!s;){var l=t[u],h=t[u+1];for(n=i=0;n<l.length&&!s;)if(s=l[n++].exec(e))for(o=0;o<h.length;o++)c=s[++i],"object"==typeof(a=h[o])&&0<a.length?2==a.length?"function"==typeof a[1]?this[a[0]]=a[1].call(this,c):this[a[0]]=a[1]:3==a.length?"function"!=typeof a[1]||a[1].exec&&a[1].test?this[a[0]]=c?c.replace(a[1],a[2]):r:this[a[0]]=c?a[1].call(this,c,a[2]):r:4==a.length&&(this[a[0]]=c?a[3].call(this,c.replace(a[1],a[2])):r):this[a]=c||r;u+=2}},a=function(e,t){for(var n in t)if("object"==typeof t[n]&&0<t[n].length){for(var o=0;o<t[n].length;o++)if(i.has(t[n][o],e))return"?"===n?r:n}else if(i.has(t[n],e))return"?"===n?r:n;return e},s={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},c={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],["version",["name","Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],["version",["name","Edge"]],[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]{3,6})\b.+version\/([\w\.-]+)/i,/(opera)(?:.+version\/|[\/\s]+)([\w\.]+)/i],["name","version"],[/opios[\/\s]+([\w\.]+)/i],["version",["name","Opera Mini"]],[/\sopr\/([\w\.]+)/i],["version",["name","Opera"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim)(?:browser)?[\/\s]?([\w\.]*)/i,/(ba?idubrowser)[\/\s]?([\w\.]+)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i,/(rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([\w\.]+)/i,/(weibo)__([\d\.]+)/i],["name","version"],[/(?:[\s\/]uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],["version",["name","UCBrowser"]],[/(?:windowswechat)?\sqbcore\/([\w\.]+)\b.*(?:windowswechat)?/i],["version",["name","WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],["version",["name","WeChat"]],[/konqueror\/([\w\.]+)/i],["version",["name","Konqueror"]],[/trident.+rv[:\s]([\w\.]{1,9})\b.+like\sgecko/i],["version",["name","IE"]],[/yabrowser\/([\w\.]+)/i],["version",["name","Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[["name",/(.+)/,"$1 Secure Browser"],"version"],[/focus\/([\w\.]+)/i],["version",["name","Firefox Focus"]],[/opt\/([\w\.]+)/i],["version",["name","Opera Touch"]],[/coc_coc_browser\/([\w\.]+)/i],["version",["name","Coc Coc"]],[/dolfin\/([\w\.]+)/i],["version",["name","Dolphin"]],[/coast\/([\w\.]+)/i],["version",["name","Opera Coast"]],[/xiaomi\/miuibrowser\/([\w\.]+)/i],["version",["name","MIUI Browser"]],[/fxios\/([\w\.-]+)/i],["version",["name","Firefox"]],[/(qihu|qhbrowser|qihoobrowser|360browser)/i],[["name","360 Browser"]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[["name",/(.+)/,"$1 Browser"],"version"],[/(comodo_dragon)\/([\w\.]+)/i],[["name",/_/g," "],"version"],[/\s(electron)\/([\w\.]+)\ssafari/i,/(tesla)(?:\sqtcarbrowser|\/(20[12]\d\.[\w\.-]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/\s]?([\w\.]+)/i],["name","version"],[/(MetaSr)[\/\s]?([\w\.]+)/i,/(LBBROWSER)/i],["name"],[/;fbav\/([\w\.]+);/i],["version",["name","Facebook"]],[/FBAN\/FBIOS|FB_IAB\/FB4A/i],[["name","Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/\s]([\w\.-]+)/i],["name","version"],[/\bgsa\/([\w\.]+)\s.*safari\//i],["version",["name","GSA"]],[/headlesschrome(?:\/([\w\.]+)|\s)/i],["version",["name","Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[["name","Chrome WebView"],"version"],[/droid.+\sversion\/([\w\.]+)\b.+(?:mobile\ssafari|safari)/i],["version",["name","Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],["name","version"],[/version\/([\w\.]+)\s.*mobile\/\w+\s(safari)/i],["version",["name","Mobile Safari"]],[/version\/([\w\.]+)\s.*(mobile\s?safari|safari)/i],["version","name"],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],["name",["version",a,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],["name","version"],[/(navigator|netscape)\/([\w\.-]+)/i],[["name","Netscape"],"version"],[/ile\svr;\srv:([\w\.]+)\).+firefox/i],["version",["name","Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(firefox)\/([\w\.]+)\s[\w\s\-]+\/[\w\.]+$/i,/(mozilla)\/([\w\.]+)\s.+rv:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],["name","version"]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",i.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/\b(aarch64|armv?8e?l?)\b/i],[["architecture","arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[["architecture","armhf"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",i.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?:64|(?=v(?:[1-7]|[5-7]1)l?|;|eabi))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[["architecture",i.lowerize]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus\s10)/i],["model",["vendor","Samsung"],["type","tablet"]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy\snexus)/i,/\ssamsung[\s-]([\w-]+)/i,/sec-(sgh\w+)/i],["model",["vendor","Samsung"],["type","mobile"]],[/\((ip(?:hone|od)[\s\w]*);/i],["model",["vendor","Apple"],["type","mobile"]],[/\((ipad);[\w\s\),;-]+apple/i,/applecoremedia\/[\w\.]+\s\((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],["model",["vendor","Apple"],["type","tablet"]],[/\b((?:agr|ags[23]|bah2?|sht?)-a?[lw]\d{2})/i],["model",["vendor","Huawei"],["type","tablet"]],[/d\/huawei([\w\s-]+)[;\)]/i,/\b(nexus\s6p|vog-[at]?l\d\d|ane-[at]?l[x\d]\d|eml-a?l\d\da?|lya-[at]?l\d[\dc]|clt-a?l\d\di?|ele-l\d\d)/i,/\b(\w{2,4}-[atu][ln][01259][019])[;\)\s]/i],["model",["vendor","Huawei"],["type","mobile"]],[/\b(poco[\s\w]+)(?:\sbuild|\))/i,/\b;\s(\w+)\sbuild\/hm\1/i,/\b(hm[\s\-_]?note?[\s_]?(?:\d\w)?)\sbuild/i,/\b(redmi[\s\-_]?(?:note|k)?[\w\s_]+)(?:\sbuild|\))/i,/\b(mi[\s\-_]?(?:a\d|one|one[\s_]plus|note lte)?[\s_]?(?:\d?\w?)[\s_]?(?:plus)?)\sbuild/i],[["model",/_/g," "],["vendor","Xiaomi"],["type","mobile"]],[/\b(mi[\s\-_]?(?:pad)(?:[\w\s_]+))(?:\sbuild|\))/i],[["model",/_/g," "],["vendor","Xiaomi"],["type","tablet"]],[/;\s(\w+)\sbuild.+\soppo/i,/\s(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007)\b/i],["model",["vendor","OPPO"],["type","mobile"]],[/\svivo\s(\w+)(?:\sbuild|\))/i,/\s(v[12]\d{3}\w?[at])(?:\sbuild|;)/i],["model",["vendor","Vivo"],["type","mobile"]],[/\s(rmx[12]\d{3})(?:\sbuild|;)/i],["model",["vendor","Realme"],["type","mobile"]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)\b[\w\s]+build\//i,/\smot(?:orola)?[\s-](\w*)/i,/((?:moto[\s\w\(\)]+|xt\d{3,4}|nexus\s6)(?=\sbuild|\)))/i],["model",["vendor","Motorola"],["type","mobile"]],[/\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],["model",["vendor","Motorola"],["type","tablet"]],[/((?=lg)?[vl]k\-?\d{3})\sbuild|\s3\.[\s\w;-]{10}lg?-([06cv9]{3,4})/i],["model",["vendor","LG"],["type","tablet"]],[/(lm-?f100[nv]?|nexus\s[45])/i,/lg[e;\s\/-]+((?!browser|netcast)\w+)/i,/\blg(\-?[\d\w]+)\sbuild/i],["model",["vendor","LG"],["type","mobile"]],[/(ideatab[\w\-\s]+)/i,/lenovo\s?(s(?:5000|6000)(?:[\w-]+)|tab(?:[\s\w]+)|yt[\d\w-]{6}|tb[\d\w-]{6})/i],["model",["vendor","Lenovo"],["type","tablet"]],[/(?:maemo|nokia).*(n900|lumia\s\d+)/i,/nokia[\s_-]?([\w\.-]*)/i],[["model",/_/g," "],["vendor","Nokia"],["type","mobile"]],[/droid.+;\s(pixel\sc)[\s)]/i],["model",["vendor","Google"],["type","tablet"]],[/droid.+;\s(pixel[\s\daxl]{0,6})(?:\sbuild|\))/i],["model",["vendor","Google"],["type","mobile"]],[/droid.+\s([c-g]\d{4}|so[-l]\w+|xq-a\w[4-7][12])(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i],["model",["vendor","Sony"],["type","mobile"]],[/sony\stablet\s[ps]\sbuild\//i,/(?:sony)?sgp\w+(?:\sbuild\/|\))/i],[["model","Xperia Tablet"],["vendor","Sony"],["type","tablet"]],[/\s(kb2005|in20[12]5|be20[12][59])\b/i,/\ba000(1)\sbuild/i,/\boneplus\s(a\d{4})[\s)]/i],["model",["vendor","OnePlus"],["type","mobile"]],[/(alexa)webm/i,/(kf[a-z]{2}wi)(\sbuild\/|\))/i,/(kf[a-z]+)(\sbuild\/|\)).+silk\//i],["model",["vendor","Amazon"],["type","tablet"]],[/(sd|kf)[0349hijorstuw]+(\sbuild\/|\)).+silk\//i],[["model","Fire Phone"],["vendor","Amazon"],["type","mobile"]],[/\((playbook);[\w\s\),;-]+(rim)/i],["model","vendor",["type","tablet"]],[/((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10;\s(\w+)/i],["model",["vendor","BlackBerry"],["type","mobile"]],[/(?:\b|asus_)(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus\s7|padfone|p00[cj])/i],["model",["vendor","ASUS"],["type","tablet"]],[/\s(z[es]6[027][01][km][ls]|zenfone\s\d\w?)\b/i],["model",["vendor","ASUS"],["type","mobile"]],[/(nexus\s9)/i],["model",["vendor","HTC"],["type","tablet"]],[/(htc)[;_\s-]{1,2}([\w\s]+(?=\)|\sbuild)|\w+)/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],["vendor",["model",/_/g," "],["type","mobile"]],[/droid[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i],["model",["vendor","Acer"],["type","tablet"]],[/droid.+;\s(m[1-5]\snote)\sbuild/i,/\bmz-([\w-]{2,})/i],["model",["vendor","Meizu"],["type","mobile"]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i,/(microsoft);\s(lumia[\s\w]+)/i,/(lenovo)[_\s-]?([\w-]+)/i,/linux;.+(jolla);/i,/droid.+;\s(oppo)\s?([\w\s]+)\sbuild/i],["vendor","model",["type","mobile"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i,/[;\/]\s?(le[\s\-]+pan)[\s\-]+(\w{1,9})\sbuild/i,/[;\/]\s?(trinity)[\-\s]*(t\d{3})\sbuild/i,/\b(gigaset)[\s\-]+(q\w{1,9})\sbuild/i,/\b(vodafone)\s([\w\s]+)(?:\)|\sbuild)/i],["vendor","model",["type","tablet"]],[/\s(surface\sduo)\s/i],["model",["vendor","Microsoft"],["type","tablet"]],[/droid\s[\d\.]+;\s(fp\du?)\sbuild/i],["model",["vendor","Fairphone"],["type","mobile"]],[/\s(u304aa)\sbuild/i],["model",["vendor","AT&T"],["type","mobile"]],[/sie-(\w*)/i],["model",["vendor","Siemens"],["type","mobile"]],[/[;\/]\s?(rct\w+)\sbuild/i],["model",["vendor","RCA"],["type","tablet"]],[/[;\/\s](venue[\d\s]{2,7})\sbuild/i],["model",["vendor","Dell"],["type","tablet"]],[/[;\/]\s?(q(?:mv|ta)\w+)\sbuild/i],["model",["vendor","Verizon"],["type","tablet"]],[/[;\/]\s(?:barnes[&\s]+noble\s|bn[rt])([\w\s\+]*)\sbuild/i],["model",["vendor","Barnes & Noble"],["type","tablet"]],[/[;\/]\s(tm\d{3}\w+)\sbuild/i],["model",["vendor","NuVision"],["type","tablet"]],[/;\s(k88)\sbuild/i],["model",["vendor","ZTE"],["type","tablet"]],[/;\s(nx\d{3}j)\sbuild/i],["model",["vendor","ZTE"],["type","mobile"]],[/[;\/]\s?(gen\d{3})\sbuild.*49h/i],["model",["vendor","Swiss"],["type","mobile"]],[/[;\/]\s?(zur\d{3})\sbuild/i],["model",["vendor","Swiss"],["type","tablet"]],[/[;\/]\s?((zeki)?tb.*\b)\sbuild/i],["model",["vendor","Zeki"],["type","tablet"]],[/[;\/]\s([yr]\d{2})\sbuild/i,/[;\/]\s(dragon[\-\s]+touch\s|dt)(\w{5})\sbuild/i],[["vendor","Dragon Touch"],"model",["type","tablet"]],[/[;\/]\s?(ns-?\w{0,9})\sbuild/i],["model",["vendor","Insignia"],["type","tablet"]],[/[;\/]\s?((nxa|Next)-?\w{0,9})\sbuild/i],["model",["vendor","NextBook"],["type","tablet"]],[/[;\/]\s?(xtreme_)?(v(1[045]|2[015]|[3469]0|7[05]))\sbuild/i],[["vendor","Voice"],"model",["type","mobile"]],[/[;\/]\s?(lvtel\-)?(v1[12])\sbuild/i],[["vendor","LvTel"],"model",["type","mobile"]],[/;\s(ph-1)\s/i],["model",["vendor","Essential"],["type","mobile"]],[/[;\/]\s?(v(100md|700na|7011|917g).*\b)\sbuild/i],["model",["vendor","Envizen"],["type","tablet"]],[/[;\/]\s?(trio[\s\w\-\.]+)\sbuild/i],["model",["vendor","MachSpeed"],["type","tablet"]],[/[;\/]\s?tu_(1491)\sbuild/i],["model",["vendor","Rotor"],["type","tablet"]],[/(shield[\w\s]+)\sbuild/i],["model",["vendor","Nvidia"],["type","tablet"]],[/(sprint)\s(\w+)/i],["vendor","model",["type","mobile"]],[/(kin\.[onetw]{3})/i],[["model",/\./g," "],["vendor","Microsoft"],["type","mobile"]],[/droid\s[\d\.]+;\s(cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],["model",["vendor","Zebra"],["type","tablet"]],[/droid\s[\d\.]+;\s(ec30|ps20|tc[2-8]\d[kx])\)/i],["model",["vendor","Zebra"],["type","mobile"]],[/\s(ouya)\s/i,/(nintendo)\s([wids3utch]+)/i],["vendor","model",["type","console"]],[/droid.+;\s(shield)\sbuild/i],["model",["vendor","Nvidia"],["type","console"]],[/(playstation\s[345portablevi]+)/i],["model",["vendor","Sony"],["type","console"]],[/[\s\(;](xbox(?:\sone)?(?!;\sxbox))[\s\);]/i],["model",["vendor","Microsoft"],["type","console"]],[/smart-tv.+(samsung)/i],["vendor",["type","smarttv"]],[/hbbtv.+maple;(\d+)/i],[["model",/^/,"SmartTV"],["vendor","Samsung"],["type","smarttv"]],[/(?:linux;\snetcast.+smarttv|lg\snetcast\.tv-201\d)/i],[["vendor","LG"],["type","smarttv"]],[/(apple)\s?tv/i],["vendor",["model","Apple TV"],["type","smarttv"]],[/crkey/i],[["model","Chromecast"],["vendor","Google"],["type","smarttv"]],[/droid.+aft([\w])(\sbuild\/|\))/i],["model",["vendor","Amazon"],["type","smarttv"]],[/\(dtv[\);].+(aquos)/i],["model",["vendor","Sharp"],["type","smarttv"]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[["vendor",i.trim],["model",i.trim],["type","smarttv"]],[/[\s\/\(](android\s|smart[-\s]?|opera\s)tv[;\)\s]/i],[["type","smarttv"]],[/((pebble))app\/[\d\.]+\s/i],["vendor","model",["type","wearable"]],[/droid.+;\s(glass)\s\d/i],["model",["vendor","Google"],["type","wearable"]],[/droid\s[\d\.]+;\s(wt63?0{2,3})\)/i],["model",["vendor","Zebra"],["type","wearable"]],[/(tesla)(?:\sqtcarbrowser|\/20[12]\d\.[\w\.-]+)/i],["vendor",["type","embedded"]],[/droid .+?; ([^;]+?)(?: build|\) applewebkit).+? mobile safari/i],["model",["type","mobile"]],[/droid .+?;\s([^;]+?)(?: build|\) applewebkit).+?(?! mobile) safari/i],["model",["type","tablet"]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[["type",i.lowerize]],[/(android[\w\.\s\-]{0,9});.+build/i],["model",["vendor","Generic"]],[/(phone)/i],[["type","mobile"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],["version",["name","EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],["version",["name","Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],["name","version"],[/rv:([\w\.]{1,9})\b.+(gecko)/i],["version","name"]],os:[[/microsoft\s(windows)\s(vista|xp)/i],["name","version"],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)(?!.+xbox)/i],["name",["version",a,s]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[["name","Windows"],["version",a,s]],[/ip[honead]{2,4}\b(?:.*os\s([\w]+)\slike\smac|;\sopera)/i,/cfnetwork\/.+darwin/i],[["version",/_/g,"."],["name","iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)(?!.+haiku)/i],[["name","Mac OS"],["version",/_/g,"."]],[/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/\s]([\w\.]+)/i,/\((series40);/i],["name","version"],[/\(bb(10);/i],["version",["name","BlackBerry"]],[/(?:symbian\s?os|symbos|s60(?=;)|series60)[\/\s-]?([\w\.]*)/i],["version",["name","Symbian"]],[/mozilla.+\(mobile;.+gecko.+firefox/i],[["name","Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],["version",["name","webOS"]],[/crkey\/([\d\.]+)/i],["version",["name","Chromecast"]],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[["name","Chromium OS"],"version"],[/(nintendo|playstation)\s([wids345portablevuch]+)/i,/(xbox);\s+xbox\s([^\);]+)/i,/(mint)[\/\s\(\)]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?=\slinux)|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus|raspbian)(?:\sgnu\/linux)?(?:\slinux)?[\/\s-]?(?!chrom|package)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i,/\s([frentopc-]{0,4}bsd|dragonfly)\s?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku)\s(\w+)/i],["name","version"],[/(sunos)\s?([\w\.\d]*)/i],[["name","Solaris"],"version"],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],["name","version"]]},u=function(e,t){if("object"==typeof e&&(t=e,e=r),!(this instanceof u))return new u(e,t).getResult();var a=e||(void 0!==n&&n.navigator&&n.navigator.userAgent?n.navigator.userAgent:""),s=t?i.extend(c,t):c;return this.getBrowser=function(){var e={name:r,version:r};return o.call(e,a,s.browser),e.major=i.major(e.version),e},this.getCPU=function(){var e={architecture:r};return o.call(e,a,s.cpu),e},this.getDevice=function(){var e={vendor:r,model:r,type:r};return o.call(e,a,s.device),e},this.getEngine=function(){var e={name:r,version:r};return o.call(e,a,s.engine),e},this.getOS=function(){var e={name:r,version:r};return o.call(e,a,s.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return a},this.setUA=function(e){return a="string"==typeof e&&255<e.length?i.trim(e,255):e,this},this.setUA(a),this};u.VERSION="0.7.28",u.BROWSER={NAME:"name",MAJOR:"major",VERSION:"version"},u.CPU={ARCHITECTURE:"architecture"},u.DEVICE={MODEL:"model",VENDOR:"vendor",TYPE:"type",CONSOLE:"console",MOBILE:"mobile",SMARTTV:"smarttv",TABLET:"tablet",WEARABLE:"wearable",EMBEDDED:"embedded"},u.ENGINE={NAME:"name",VERSION:"version"},u.OS={NAME:"name",VERSION:"version"},e.exports&&(t=e.exports=u),t.UAParser=u;var l=void 0!==n&&(n.jQuery||n.Zepto);if(l&&!l.ua){var h=new u;l.ua=h.getResult(),l.ua.get=function(){return h.getUA()},l.ua.set=function(e){for(var t in h.setUA(e),e=h.getResult())l.ua[t]=e[t]}}}("object"==typeof window?window:Vn)}))),Ru=Tu.getResult(),ku=function(e){if(e.match(/[0-9]+\.[0-9]+\.[0-9]+$/))return e;var t=e.match(/([0-9]+\.[0-9]+\.[0-9]+)\-alpha\.([0-9]+)/);if(t&&t[1]&&t[2]){var n,r=t[2];return _i(n="".concat(t[1],".")).call(n,r)}return(t=e.match(/([0-9]+\.[0-9]+\.[0-9]+)\-special\.([0-9]+)/))&&t[1]&&t[2]?(n=t[2],_i(r="".concat(t[1],".")).call(r,100*(Number(n)+1))):"4.0.0.999"}("4.7.3");try{var Ou=!0===JSON.parse("true")}catch(vu){Ou=!0}let Nu=Ou,xu={username:"test",password:"111111",turnServerURL:"",tcpport:3433,udpport:3478,forceturn:!1},Du={"90p":Ae(160,90),"90p_1":Ae(160,90),"120p":Ae(160,120,15,30,65),"120p_1":Ae(160,120,15,30,65),"120p_3":Ae(120,120,15,30,50),"120p_4":Ae(212,120),"180p":Ae(320,180,15,30,140),"180p_1":Ae(320,180,15,30,140),"180p_3":Ae(180,180,15,30,100),"180p_4":Ae(240,180,15,30,120),"240p":Ae(320,240,15,40,200),"240p_1":Ae(320,240,15,40,200),"240p_3":Ae(240,240,15,40,140),"240p_4":Ae(424,240,15,40,220),"360p":Ae(640,360,15,80,400),"360p_1":Ae(640,360,15,80,400),"360p_3":Ae(360,360,15,80,260),"360p_4":Ae(640,360,30,80,600),"360p_6":Ae(360,360,30,80,400),"360p_7":Ae(480,360,15,80,320),"360p_8":Ae(480,360,30,80,490),"360p_9":Ae(640,360,15,80,800),"360p_10":Ae(640,360,24,80,800),"360p_11":Ae(640,360,24,80,1e3),"480p":Ae(640,480,15,100,500),"480p_1":Ae(640,480,15,100,500),"480p_2":Ae(640,480,30,100,1e3),"480p_3":Ae(480,480,15,100,400),"480p_4":Ae(640,480,30,100,750),"480p_6":Ae(480,480,30,100,600),"480p_8":Ae(848,480,15,100,610),"480p_9":Ae(848,480,30,100,930),"480p_10":Ae(640,480,10,100,400),"720p":Ae(1280,720,15,120,1130),"720p_1":Ae(1280,720,15,120,1130),"720p_2":Ae(1280,720,30,120,2e3),"720p_3":Ae(1280,720,30,120,1710),"720p_5":Ae(960,720,15,120,910),"720p_6":Ae(960,720,30,120,1380),"1080p":Ae(1920,1080,15,120,2080),"1080p_1":Ae(1920,1080,15,120,2080),"1080p_2":Ae(1920,1080,30,120,3e3),"1080p_3":Ae(1920,1080,30,120,3150),"1080p_5":Ae(1920,1080,60,120,4780),"1440p":Ae(2560,1440,30,120,4850),"1440p_1":Ae(2560,1440,30,120,4850),"1440p_2":Ae(2560,1440,60,120,7350),"4k":Ae(3840,2160,30,120,8910),"4k_1":Ae(3840,2160,30,120,8910),"4k_3":Ae(3840,2160,60,120,13500)},Lu={"480p":ve(640,480,5),"480p_1":ve(640,480,5),"480p_2":ve(640,480,30),"480p_3":ve(640,480,15),"720p":ve(1280,720,5),"720p_1":ve(1280,720,5),"720p_2":ve(1280,720,30),"720p_3":ve(1280,720,15),"1080p":ve(1920,1080,5),"1080p_1":ve(1920,1080,5),"1080p_2":ve(1920,1080,30),"1080p_3":ve(1920,1080,15)},Pu={"1SL1TL":me(1,1),"3SL3TL":me(3,3),"2SL3TL":me(2,3)},Bu={speech_low_quality:ge(16e3,!1),speech_standard:ge(32e3,!1,18),music_standard:ge(48e3,!1),standard_stereo:ge(48e3,!0,56),high_quality:ge(48e3,!1,128),high_quality_stereo:ge(48e3,!0,192)},Mu={PROCESS_ID:"",ENCRYPT_AES:!0,AREAS:["CHINA","GLOBAL"],WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io","webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io","webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-web-2.ap.sd-rtn.com","cds-ap-web-3.agora.io","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-web-2.ap.sd-rtn.com","sua-ap-web-3.agora.io","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-ap-web-1.agora.io","uap-web-2.ap.sd-rtn.com","uap-ap-web-3.agora.io","uap-web-4.ap.sd-rtn.com"],LOG_UPLOAD_SERVER:"logservice.agora.io",EVENT_REPORT_DOMAIN:"statscollector-1.agora.io",EVENT_REPORT_BACKUP_DOMAIN:"web-2.statscollector.sd-rtn.com",GATEWAY_ADDRESS:[],GATEWAY_WSS_ADDRESS:"",LIVE_STREAMING_ADDRESS:"",ACCOUNT_REGISTER_RETRY_TIMEOUT:1,ACCOUNT_REGISTER_RETRY_RATIO:2,ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX:6e4,ACCOUNT_REGISTER_RETRY_COUNT_MAX:1e5,AUDIO_CONTEXT:null,WEBCS_BACKUP_CONNECT_TIMEOUT:6e3,HTTP_CONNECT_TIMEOUT:5e3,PLAYER_STATE_DEFER:2e3,SIGNAL_REQUEST_TIMEOUT:1e4,SIGNAL_REQUEST_WATCH_INTERVAL:1e3,REPORT_STATS:!0,UPLOAD_LOG:!1,NOT_REPORT_EVENT:[],FILEPATH_LENMAX:255,SUBSCRIBE_TCC:!0,PING_PONG_TIME_OUT:10,DUALSTREAM_OPERATION_CHECK:!0,WEBSOCKET_TIMEOUT_MIN:1e4,EVENT_REPORT_SEND_INTERVAL:3e3,CONFIG_DISTRIBUTE_INTERVAL:3e5,MEDIA_ELEMENT_EXISTS_DEPTH:3,CANDIDATE_TIMEOUT:5e3,SHIM_CANDIDATE:!1,LEAVE_MSG_TIMEOUT:2e3,SHOW_REPORT_INVOKER_LOG:!1,STATS_FILTER:{transportId:!0,googTrackId:!0},JOIN_EXTEND:"",PUB_EXTEND:"",SUB_EXTEND:"",FORCE_TURN:!1,TURN_ENABLE_TCP:!0,TURN_ENABLE_UDP:!0,MAX_UPLOAD_CACHE:50,UPLOAD_CACHE_INTERVAL:2e3,AJAX_REQUEST_CONCURRENT:3,REPORT_APP_SCENARIO:void 0,GATEWAY_DOMAINS:["edge.agora.io","edge.sd-rtn.com"],EVENT_REPORT_RETRY:!0,CHROME_FORCE_PLAN_B:!1,AUDIO_SOURCE_VOLUME_UPDATE_INTERVAL:400,AUDIO_SOURCE_AVG_VOLUME_DURATION:3e3,AUDIO_VOLUME_INDICATION_INTERVAL:2e3,VOLUME_VOICE_WEIGHT:10,NORMAL_EVENT_QUEUE_CAPACITY:100,CUSTOM_REPORT:!0,CUSTOM_REPORT_LIMIT:20,PROXY_SERVER_TYPE2:"webnginx-proxy.agora.io",PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com","webrtc-cloud-proxy.agora.io"],CUSTOM_PUB_ANSWER_MODIFIER:null,CUSTOM_SUB_ANSWER_MODIFIER:null,CUSTOM_PUB_OFFER_MODIFIER:null,CUSTOM_SUB_OFFER_MODIFIER:null,DSCP_TYPE:"high",REMOVE_NEW_CODECS:!0,FRAGEMENT_LENGTH:3,WEBSOCKET_COMPRESS:!1,SIMULCAST:!1,ENUMERATE_DEVICES_INTERVAL:!0};Nu||(Mu.WEBCS_DOMAIN=["ap-web-1-oversea.agora.io","ap-web-1-north-america.agora.io"],Mu.WEBCS_DOMAIN_BACKUP_LIST=["ap-web-2-oversea.agora.io","ap-web-2-north-america.agora.io"],Mu.PROXY_CS=["proxy-ap-web-oversea.agora.io","proxy-ap-web-america.agora.io"],Mu.CDS_AP=["cds-ap-web-oversea.agora.io","cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],Mu.ACCOUNT_REGISTER=["sua-ap-web-oversea.agora.io","sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],Mu.UAP_AP=["uap-ap-web-oversea.agora.io","uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],Mu.LOG_UPLOAD_SERVER="logservice-oversea.agora.io",Mu.EVENT_REPORT_DOMAIN="statscollector-1-oversea.agora.io",Mu.EVENT_REPORT_BACKUP_DOMAIN="statscollector-2-oversea.agora.io",Mu.PROXY_SERVER_TYPE3="webrtc-cloud-proxy.agora.io",Mu.AREAS=["NORTH_AMERICA","OVERSEA"]);let ju=[[0,1,2,3,4,5,5],[0,2,2,3,4,5,5],[0,3,3,3,4,5,5],[0,4,4,4,4,5,5],[0,5,5,5,5,5,5]],Uu=[],Fu=[];var Qu=[],Gu=Qu.sort,qu=Wn((function(){Qu.sort(void 0)})),Vu=Wn((function(){Qu.sort(null)})),Ku=Ca("sort");kr({target:"Array",proto:!0,forced:qu||!Vu||Ku},{sort:function(e){return void 0===e?Gu.call(Gr(this)):Gu.call(Gr(this),_r(e))}});var Hu=mi("Array").sort,Wu=Array.prototype,zu=function(e){var t=e.sort;return e===Wu||e instanceof Array&&t===Wu.sort?Hu:t};kr({target:"Array",stat:!0},{isArray:Qr});var Yu,Ju=br.Array.isArray;!function(e){e.UNEXPECTED_ERROR="UNEXPECTED_ERROR",e.UNEXPECTED_RESPONSE="UNEXPECTED_RESPONSE",e.TIMEOUT="TIMEOUT",e.INVALID_PARAMS="INVALID_PARAMS",e.NOT_READABLE="NOT_READABLE",e.NOT_SUPPORTED="NOT_SUPPORTED",e.INVALID_OPERATION="INVALID_OPERATION",e.OPERATION_ABORTED="OPERATION_ABORTED",e.WEB_SECURITY_RESTRICT="WEB_SECURITY_RESTRICT",e.NETWORK_ERROR="NETWORK_ERROR",e.NETWORK_TIMEOUT="NETWORK_TIMEOUT",e.NETWORK_RESPONSE_ERROR="NETWORK_RESPONSE_ERROR",e.API_INVOKE_TIMEOUT="API_INVOKE_TIMEOUT",e.ENUMERATE_DEVICES_FAILED="ENUMERATE_DEVICES_FAILED",e.DEVICE_NOT_FOUND="DEVICE_NOT_FOUND",e.ELECTRON_IS_NULL="ELECTRON_IS_NULL",e.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR="ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR",e.CHROME_PLUGIN_NO_RESPONSE="CHROME_PLUGIN_NO_RESPONSE",e.CHROME_PLUGIN_NOT_INSTALL="CHROME_PLUGIN_NOT_INSTALL",e.MEDIA_OPTION_INVALID="MEDIA_OPTION_INVALID",e.PERMISSION_DENIED="PERMISSION_DENIED",e.CONSTRAINT_NOT_SATISFIED="CONSTRAINT_NOT_SATISFIED",e.TRACK_IS_DISABLED="TRACK_IS_DISABLED",e.SHARE_AUDIO_NOT_ALLOWED="SHARE_AUDIO_NOT_ALLOWED",e.LOW_STREAM_ENCODING_ERROR="LOW_STREAM_ENCODING_ERROR",e.SET_ENCODING_PARAMETER_ERROR="SET_ENCODING_PARAMETER_ERROR",e.TRACK_STATE_UNREACHABLE="TRACK_STATE_UNREACHABLE",e.INVALID_UINT_UID_FROM_STRING_UID="INVALID_UINT_UID_FROM_STRING_UID",e.CAN_NOT_GET_PROXY_SERVER="CAN_NOT_GET_PROXY_SERVER",e.CAN_NOT_GET_GATEWAY_SERVER="CAN_NOT_GET_GATEWAY_SERVER",e.VOID_GATEWAY_ADDRESS="VOID_GATEWAY_ADDRESS",e.UID_CONFLICT="UID_CONFLICT",e.MULTI_UNILBS_RESPONSE_ERROR="MULTI_UNILBS_RESPONSE_ERROR",e.INVALID_LOCAL_TRACK="INVALID_LOCAL_TRACK",e.INVALID_TRACK="INVALID_TRACK",e.SENDER_NOT_FOUND="SENDER_NOT_FOUND",e.CREATE_OFFER_FAILED="CREATE_OFFER_FAILED",e.SET_ANSWER_FAILED="SET_ANSWER_FAILED",e.ICE_FAILED="ICE_FAILED",e.PC_CLOSED="PC_CLOSED",e.SENDER_REPLACE_FAILED="SENDER_REPLACE_FAILED",e.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",e.NO_ICE_CANDIDATE="NO_ICE_CANDIDATE",e.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS="CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS",e.CAN_NOT_PUBLISH_MULTIPLE_AUDIO_TRACKS="CAN_NOT_PUBLISH_MULTIPLE_AUDIO_TRACKS",e.EXIST_DISABLED_VIDEO_TRACK="EXIST_DISABLED_VIDEO_TRACK",e.INVALID_REMOTE_USER="INVALID_REMOTE_USER",e.REMOTE_USER_IS_NOT_PUBLISHED="REMOTE_USER_IS_NOT_PUBLISHED",e.CUSTOM_REPORT_SEND_FAILED="CUSTOM_REPORT_SEND_FAILED",e.CUSTOM_REPORT_FREQUENCY_TOO_HIGH="CUSTOM_REPORT_FREQUENCY_TOO_HIGH",e.FETCH_AUDIO_FILE_FAILED="FETCH_AUDIO_FILE_FAILED",e.READ_LOCAL_AUDIO_FILE_ERROR="READ_LOCAL_AUDIO_FILE_ERROR",e.DECODE_AUDIO_FILE_FAILED="DECODE_AUDIO_FILE_FAILED",e.WS_ABORT="WS_ABORT",e.WS_DISCONNECT="WS_DISCONNECT",e.WS_ERR="WS_ERR",e.LIVE_STREAMING_TASK_CONFLICT="LIVE_STREAMING_TASK_CONFLICT",e.LIVE_STREAMING_INVALID_ARGUMENT="LIVE_STREAMING_INVALID_ARGUMENT",e.LIVE_STREAMING_INTERNAL_SERVER_ERROR="LIVE_STREAMING_INTERNAL_SERVER_ERROR",e.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED="LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED",e.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED="LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED",e.LIVE_STREAMING_CDN_ERROR="LIVE_STREAMING_CDN_ERROR",e.LIVE_STREAMING_INVALID_RAW_STREAM="LIVE_STREAMING_INVALID_RAW_STREAM",e.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT="LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT",e.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE="LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE",e.LIVE_STREAMING_WARN_FREQUENT_REQUEST="LIVE_STREAMING_WARN_FREQUENT_REQUEST",e.WEBGL_INTERNAL_ERROR="WEBGL_INTERNAL_ERROR",e.BEAUTY_PROCESSOR_INTERNAL_ERROR="BEAUTY_PROCESSOR_INTERNAL_ERROR",e.CROSS_CHANNEL_WAIT_STATUS_ERROR="CROSS_CHANNEL_WAIT_STATUS_ERROR",e.CROSS_CHANNEL_FAILED_JOIN_SRC="CROSS_CHANNEL_FAILED_JOIN_SEC",e.CROSS_CHANNEL_FAILED_JOIN_DEST="CROSS_CHANNEL_FAILED_JOIN_DEST",e.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST="CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST",e.CROSS_CHANNEL_SERVER_ERROR_RESPONSE="CROSS_CHANNEL_SERVER_ERROR_RESPONSE",e.METADATA_OUT_OF_RANGE="METADATA_OUT_OF_RANGE",e.LOCAL_AEC_ERROR="LOCAL_AEC_ERROR",e.INVALID_PLUGIN="INVALID_PLUGIN"}(Yu||(Yu={}));var Xu=[].slice,Zu=/MSIE .\./.test(ci),$u=function(e){return function(t,n){var r=2<arguments.length,i=r?Xu.call(arguments,2):void 0;return e(r?function(){("function"==typeof t?t:Function(t)).apply(this,i)}:t,n)}};kr({global:!0,bind:!0,forced:Zu},{setTimeout:$u(Hn.setTimeout),setInterval:$u(Hn.setInterval)});var el=br.setTimeout;kr({target:"Date",stat:!0},{now:function(){return(new Date).getTime()}});var tl=br.Date.now,nl=function(e,t){return function(){for(var n=Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}},rl=Object.prototype.toString,il={isArray:ye,isArrayBuffer:function(e){return"[object ArrayBuffer]"===rl.call(e)},isBuffer:function(e){return null!=e&&null!=e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:be,isUndefined:function(e){return void 0===e},isDate:function(e){return"[object Date]"===rl.call(e)},isFile:function(e){return"[object File]"===rl.call(e)},isBlob:function(e){return"[object Blob]"===rl.call(e)},isFunction:_e,isStream:function(e){return be(e)&&_e(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:Ee,merge:function e(){function t(t,r){"object"==typeof n[r]&&"object"==typeof t?n[r]=e(n[r],t):n[r]=t}for(var n={},r=0,i=arguments.length;r<i;r++)Ee(arguments[r],t);return n},deepMerge:function e(){function t(t,r){"object"==typeof n[r]&&"object"==typeof t?n[r]=e(n[r],t):n[r]="object"==typeof t?e({},t):t}for(var n={},r=0,i=arguments.length;r<i;r++)Ee(arguments[r],t);return n},extend:function(e,t,n){return Ee(t,(function(t,r){e[r]=n&&"function"==typeof t?nl(t,n):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}},ol=function(e,t,n){if(!t)return e;if(n)t=n(t);else if(il.isURLSearchParams(t))t=t.toString();else{var r=[];il.forEach(t,(function(e,t){null!=e&&(il.isArray(e)?t+="[]":e=[e],il.forEach(e,(function(e){il.isDate(e)?e=e.toISOString():il.isObject(e)&&(e=JSON.stringify(e)),r.push(we(t)+"="+we(e))})))})),t=r.join("&")}return t&&(-1!==(n=e.indexOf("#"))&&(e=e.slice(0,n)),e+=(-1===e.indexOf("?")?"?":"&")+t),e};Ie.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},Ie.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},Ie.prototype.forEach=function(e){il.forEach(this.handlers,(function(t){null!==t&&e(t)}))};var al,sl=Ie,cl=function(e,t,n){return il.forEach(n,(function(n){e=n(e,t)})),e},ul=function(e){return!(!e||!e.__CANCEL__)},ll=function(e,t){il.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))},hl=function(e,t,n,r,i){return function(e,t,n,r,i){return e.config=t,n&&(e.code=n),e.request=r,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}(Error(e),t,n,r,i)},dl="age authorization content-length content-type etag expires from host if-modified-since if-unmodified-since last-modified location max-forwards proxy-authorization referer retry-after user-agent".split(" "),fl=il.isStandardBrowserEnv()?function(){function e(e){return n&&(r.setAttribute("href",e),e=r.href),r.setAttribute("href",e),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}var t,n=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");return t=e(window.location.href),function(n){return(n=il.isString(n)?e(n):n).protocol===t.protocol&&n.host===t.host}}():function(){return!0},pl=il.isStandardBrowserEnv()?{write:function(e,t,n,r,i,o){var a=[];a.push(e+"="+encodeURIComponent(t)),il.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),il.isString(r)&&a.push("path="+r),il.isString(i)&&a.push("domain="+i),!0===o&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){return(e=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)")))?decodeURIComponent(e[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},gl=function(e){return new Promise((function(t,n){var r=e.data,i=e.headers;il.isFormData(r)&&delete i["Content-Type"];var o=new XMLHttpRequest;if(e.auth&&(i.Authorization="Basic "+btoa((e.auth.username||"")+":"+(e.auth.password||""))),o.open(e.method.toUpperCase(),ol(e.url,e.params,e.paramsSerializer),!0),o.timeout=e.timeout,o.onreadystatechange=function(){if(o&&4===o.readyState&&(0!==o.status||o.responseURL&&0===o.responseURL.indexOf("file:"))){var r,i,a,s,c,u="getAllResponseHeaders"in o?(r=o.getAllResponseHeaders(),c={},r?(il.forEach(r.split("\n"),(function(e){s=e.indexOf(":"),i=il.trim(e.substr(0,s)).toLowerCase(),a=il.trim(e.substr(s+1)),!i||c[i]&&0<=dl.indexOf(i)||(c[i]="set-cookie"===i?(c[i]?c[i]:[]).concat([a]):c[i]?c[i]+", "+a:a)})),c):c):null;!function(e,t,n){var r=n.config.validateStatus;!r||r(n.status)?e(n):t(hl("Request failed with status code "+n.status,n.config,null,n.request,n))}(t,n,{data:e.responseType&&"text"!==e.responseType?o.response:o.responseText,status:o.status,statusText:o.statusText,headers:u,config:e,request:o}),o=null}},o.onabort=function(){o&&(n(hl("Request aborted",e,"ECONNABORTED",o)),o=null)},o.onerror=function(){n(hl("Network Error",e,null,o)),o=null},o.ontimeout=function(){n(hl("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",o)),o=null},il.isStandardBrowserEnv()){var a=(e.withCredentials||fl(e.url))&&e.xsrfCookieName?pl.read(e.xsrfCookieName):void 0;a&&(i[e.xsrfHeaderName]=a)}if("setRequestHeader"in o&&il.forEach(i,(function(e,t){void 0===r&&"content-type"===t.toLowerCase()?delete i[t]:o.setRequestHeader(t,e)})),e.withCredentials&&(o.withCredentials=!0),e.responseType)try{o.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&o.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&o.upload&&o.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){o&&(o.abort(),n(e),o=null)})),void 0===r&&(r=null),o.send(r)}))},Al={"Content-Type":"application/x-www-form-urlencoded"},vl={adapter:(("undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process)||"undefined"!=typeof XMLHttpRequest)&&(al=gl),al),transformRequest:[function(e,t){return ll(t,"Accept"),ll(t,"Content-Type"),il.isFormData(e)||il.isArrayBuffer(e)||il.isBuffer(e)||il.isStream(e)||il.isFile(e)||il.isBlob(e)?e:il.isArrayBufferView(e)?e.buffer:il.isURLSearchParams(e)?(Ce(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):il.isObject(e)?(Ce(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return 200<=e&&300>e},headers:{common:{Accept:"application/json, text/plain, */*"}}};il.forEach(["delete","get","head"],(function(e){vl.headers[e]={}})),il.forEach(["post","put","patch"],(function(e){vl.headers[e]=il.merge(Al)}));var ml=function(e){var t,n;return e.cancelToken&&e.cancelToken.throwIfRequested(),e.baseURL&&!/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e.url)&&(e.url=(t=e.baseURL,(n=e.url)?t.replace(/\/+$/,"")+"/"+n.replace(/^\/+/,""):t)),e.headers=e.headers||{},e.data=cl(e.data,e.headers,e.transformRequest),e.headers=il.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),il.forEach("delete get head post put patch common".split(" "),(function(t){delete e.headers[t]})),(e.adapter||vl.adapter)(e).then((function(t){return e.cancelToken&&e.cancelToken.throwIfRequested(),t.data=cl(t.data,t.headers,e.transformResponse),t}),(function(t){return ul(t)||(e.cancelToken&&e.cancelToken.throwIfRequested(),t&&t.response&&(t.response.data=cl(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))},yl=function(e,t){t=t||{};var n={};return il.forEach(["url","method","params","data"],(function(e){void 0!==t[e]&&(n[e]=t[e])})),il.forEach(["headers","auth","proxy"],(function(r){il.isObject(t[r])?n[r]=il.deepMerge(e[r],t[r]):void 0!==t[r]?n[r]=t[r]:il.isObject(e[r])?n[r]=il.deepMerge(e[r]):void 0!==e[r]&&(n[r]=e[r])})),il.forEach("baseURL transformRequest transformResponse paramsSerializer timeout withCredentials adapter responseType xsrfCookieName xsrfHeaderName onUploadProgress onDownloadProgress maxContentLength validateStatus maxRedirects httpAgent httpsAgent cancelToken socketPath".split(" "),(function(r){void 0!==t[r]?n[r]=t[r]:void 0!==e[r]&&(n[r]=e[r])})),n};Se.prototype.request=function(e,t){"string"==typeof e?(e=t||{}).url=e:e=e||{},(e=yl(this.defaults,e)).method=e.method?e.method.toLowerCase():"get";var n=[ml,void 0];for(e=Promise.resolve(e),this.interceptors.request.forEach((function(e){n.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){n.push(e.fulfilled,e.rejected)}));n.length;)e=e.then(n.shift(),n.shift());return e},Se.prototype.getUri=function(e){return e=yl(this.defaults,e),ol(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},il.forEach(["delete","get","head","options"],(function(e){Se.prototype[e]=function(t,n){return this.request(il.merge(n||{},{method:e,url:t}))}})),il.forEach(["post","put","patch"],(function(e){Se.prototype[e]=function(t,n,r){return this.request(il.merge(r||{},{method:e,url:t,data:n}))}}));var bl=Se;Te.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},Te.prototype.__CANCEL__=!0;var _l=Te;Re.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},Re.source=function(){var e;return{token:new Re((function(t){e=t})),cancel:e}};var El=ke(vl);El.Axios=bl,El.create=function(e){return ke(yl(El.defaults,e))},El.Cancel=_l,El.CancelToken=Re,El.isCancel=ul,El.all=function(e){return Promise.all(e)},El.spread=function(e){return function(t){return e.apply(null,t)}};var wl=El.default=El;let Il={DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4},Cl=tl(),Sl=e=>{for(const t in Il)if(Object.prototype.hasOwnProperty.call(Il,t)&&Il[t]===e)return t;return"DEFAULT"},Tl=new class{constructor(){this.logLevel=Il.DEBUG,this.uploadState="collecting",this.uploadLogWaitingList=[],this.uploadLogUploadingList=[],this.currentLogID=this.uploadErrorCount=0}debug(...e){var t;e=_i(t=[Il.DEBUG]).call(t,e),this.log.apply(this,e)}info(...e){var t;e=_i(t=[Il.INFO]).call(t,e),this.log.apply(this,e)}warning(...e){var t;e=_i(t=[Il.WARNING]).call(t,e),this.log.apply(this,e)}error(...e){var t;e=_i(t=[Il.ERROR]).call(t,e),this.log.apply(this,e)}setLogLevel(e){this.logLevel=e=Math.min(Math.max(0,e),4)}enableLogUpload(){pe("UPLOAD_LOG",!0)}disableLogUpload(){pe("UPLOAD_LOG",!1),this.uploadLogUploadingList=[],this.uploadLogWaitingList=[]}setProxyServer(e){this.proxyServerURL=e}log(...e){var t,n,r,i;if(100>tl()-Cl)return void el((()=>{this.log(...e)}),tl()-Cl);const o=Math.max(0,Math.min(4,e[0]));if(e[0]=Oe()+" Agora-SDK [".concat(Sl(o),"]:"),this.appendLogToWaitingList(o,e),!(o<this.logLevel)){var a=Oe()+" %cAgora-SDK [".concat(Sl(o),"]:"),s=[];switch(o){case Il.DEBUG:s=_i(t=[a,"color: #64B5F6;"]).call(t,qc(e).call(e,1)),console.log.apply(console,s);break;case Il.INFO:s=_i(n=[a,"color: #1E88E5; font-weight: bold;"]).call(n,qc(e).call(e,1)),console.log.apply(console,s);break;case Il.WARNING:s=_i(r=[a,"color: #FB8C00; font-weight: bold;"]).call(r,qc(e).call(e,1)),console.warn.apply(console,s);break;case Il.ERROR:s=_i(i=[a,"color: #B00020; font-weight: bold;"]).call(i,qc(e).call(e,1)),console.error.apply(console,s)}}}appendLogToWaitingList(e,...t){if(Mu.UPLOAD_LOG){var n="";Oa(t).call(t,(e=>{"object"==typeof e&&(e=Fr(e)),n+="".concat(e," ")})),this.uploadLogWaitingList.push({payload_str:n,log_level:e,log_item_id:this.currentLogID++}),"uploading"===this.uploadState&&0===this.uploadLogUploadingList.length&&this.uploadLogInterval()}}startUpload(){this.uploadState="uploading",0===this.uploadLogUploadingList.length&&this.uploadLogInterval()}async uploadLogs(){var e,t={sdk_version:ku,process_id:Mu.PROCESS_ID,payload:Fr(this.uploadLogUploadingList)};if("OK"!==(t=await wl.post(this.url||(this.proxyServerURL?_i(e="https://".concat(this.proxyServerURL,"/ls/?h=")).call(e,Mu.LOG_UPLOAD_SERVER,"&p=443&d=upload/v1"):"https://".concat(Mu.LOG_UPLOAD_SERVER,"/upload/v1")),t,{responseType:"text"})).data)throw Error("unexpected upload log response: "+t.data);this.uploadLogUploadingList=[]}uploadLogInterval(){var e;0===this.uploadLogUploadingList.length&&0===this.uploadLogWaitingList.length||(0===this.uploadLogUploadingList.length&&(this.uploadLogUploadingList=Nc(e=this.uploadLogWaitingList).call(e,0,10)),this.uploadLogs().then((()=>{this.uploadErrorCount=0,0<this.uploadLogWaitingList.length&&window.setTimeout((()=>this.uploadLogInterval()),3e3)})).catch((e=>{this.uploadErrorCount+=1,2>this.uploadErrorCount?window.setTimeout((()=>this.uploadLogInterval()),200):window.setTimeout((()=>this.uploadLogInterval()),1e3)})))}};class Rl{constructor(e,t="",n){var r;this.name="AgoraRTCException",this.code=e,this.message=_i(r="AgoraRTCError ".concat(this.code,": ")).call(r,t),this.data=n}toString(){var e;return this.data?_i(e="".concat(this.message," data: ")).call(e,Fr(this.data)):this.message}print(e="error"){return"error"===e&&Tl.error(this.toString()),"warning"===e&&Tl.warning(this.toString()),this}throw(){throw this.print(),this}}var kl,Ol;!function(e){e.FREE="free",e.UPLOADING="uploading"}(kl||(kl={})),function(e){e.NONE="none",e.INIT="init",e.CANPLAY="canplay",e.PLAYING="playing",e.PAUSED="paused",e.SUSPEND="suspend",e.STALLED="stalled",e.WAITING="waiting",e.ERROR="error",e.DESTROYED="destroyed",e.ABORT="abort",e.ENDED="ended",e.EMPTIED="emptied"}(Ol||(Ol={})),kr({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991}),kr({target:"Number",stat:!0},{MIN_SAFE_INTEGER:-9007199254740991});let Nl={sid:"",lts:0,success:null,cname:null,uid:null,peer:null,cid:null,elapse:null,extend:null,vid:0};var xl,Dl,Ll,Pl,Bl,Ml,jl,Ul,Fl,Ql,Gl,ql,Vl,Kl,Hl,Wl,zl,Yl,Jl,Xl,Zl;!function(e){e.PUBLISH="publish",e.SUBSCRIBE="subscribe",e.SESSION_INIT="session_init",e.JOIN_CHOOSE_SERVER="join_choose_server",e.REQ_USER_ACCOUNT="req_user_account",e.JOIN_GATEWAY="join_gateway",e.STREAM_SWITCH="stream_switch",e.REQUEST_PROXY_WORKER_MANAGER="request_proxy_worker_manager",e.REQUEST_PROXY_APPCENTER="request_proxy_appcenter",e.FIRST_VIDEO_RECEIVED="first_video_received",e.FIRST_AUDIO_RECEIVED="first_audio_received",e.FIRST_VIDEO_DECODE="first_video_decode",e.FIRST_AUDIO_DECODE="first_audio_decode",e.ON_ADD_AUDIO_STREAM="on_add_audio_stream",e.ON_ADD_VIDEO_STREAM="on_add_video_stream",e.ON_UPDATE_STREAM="on_update_stream",e.ON_REMOVE_STREAM="on_remove_stream",e.USER_ANALYTICS="req_user_analytics"}(xl||(xl={})),function(e){e.SESSION="io.agora.pb.Wrtc.Session",e.JOIN_CHOOSE_SERVER="io.agora.pb.Wrtc.JoinChooseServer",e.REQ_USER_ACCOUNT="io.agora.pb.Wrtc.ReqUserAccount",e.JOIN_GATEWAT="io.agora.pb.Wrtc.JoinGateway",e.PUBLISH="io.agora.pb.Wrtc.Publish",e.SUBSCRIBE="io.agora.pb.Wrtc.Subscribe",e.STREAM_SWITCH="io.agora.pb.Wrtc.StreamSwitch",e.AUDIO_SENDING_STOPPED="io.agora.pb.Wrtc.AudioSendingStopped",e.VIDEO_SENDING_STOPPED="io.agora.pb.Wrtc.VideoSendingStopped",e.REQUEST_PROXY_APPCENTER="io.agora.pb.Wrtc.RequestProxyAppCenter",e.REQUEST_PROXY_WORKER_MANAGER="io.agora.pb.Wrtc.RequestProxyWorkerManager",e.API_INVOKE="io.agora.pb.Wrtc.ApiInvoke",e.FIRST_VIDEO_RECEIVED="io.agora.pb.Wrtc.FirstVideoReceived",e.FIRST_AUDIO_RECEIVED="io.agora.pb.Wrtc.FirstAudioReceived",e.FIRST_VIDEO_DECODE="io.agora.pb.Wrtc.FirstVideoDecode",e.FIRST_AUDIO_DECODE="io.agora.pb.Wrtc.FirstAudioDecode",e.ON_ADD_AUDIO_STREAM="io.agora.pb.Wrtc.OnAddAudioStream",e.ON_ADD_VIDEO_STREAM="io.agora.pb.Wrtc.OnAddVideoStream",e.ON_UPDATE_STREAM="io.agora.pb.Wrtc.OnUpdateStream",e.ON_REMOVE_STREAM="io.agora.pb.Wrtc.OnRemoveStream",e.JOIN_CHANNEL_TIMEOUT="io.agora.pb.Wrtc.JoinChannelTimeout",e.PEER_PUBLISH_STATUS="io.agora.pb.Wrtc.PeerPublishStatus",e.WORKER_EVENT="io.agora.pb.Wrtc.WorkerEvent",e.AP_WORKER_EVENT="io.agora.pb.Wrtc.APWorkerEvent",e.JOIN_WEB_PROXY_AP="io.agora.pb.Wrtc.JoinWebProxyAP",e.WEBSOCKET_QUIT="io.agora.pb.Wrtc.WebSocketQuit",e.USER_ANALYTICS="io.agora.pb.Wrtc.UserAnalytics"}(Dl||(Dl={})),function(e){e[e.WORKER_EVENT=156]="WORKER_EVENT",e[e.AP_WORKER_EVENT=160]="AP_WORKER_EVENT"}(Ll||(Ll={})),function(e){e.CREATE_CLIENT="createClient",e.CHECK_SYSTEM_REQUIREMENTS="checkSystemRequirements",e.SET_AREA="setArea",e.CHECK_VIDEO_TRACK_IS_ACTIVE="checkVideoTrackIsActive",e.CHECK_AUDIO_TRACK_IS_ACTIVE="checkAudioTrackIsActive",e.CREATE_MIC_AUDIO_TRACK="createMicrophoneAudioTrack",e.CREATE_CUSTOM_AUDIO_TRACK="createCustomAudioTrack",e.CREATE_BUFFER_AUDIO_TRACK="createBufferSourceAudioTrack",e.CREATE_CAM_VIDEO_TRACK="createCameraVideoTrack",e.CREATE_CUSTOM_VIDEO_TRACK="createCustomVideoTrack",e.CREATE_MIC_AND_CAM_TRACKS="createMicrophoneAndCameraTracks",e.CREATE_SCREEN_VIDEO_TRACK="createScreenVideoTrack",e.SET_ENCRYPTION_CONFIG="Client.setEncryptionConfig",e.START_PROXY_SERVER="Client.startProxyServer",e.STOP_PROXY_SERVER="Client.stopProxyServer",e.SET_PROXY_SERVER="Client.setProxyServer",e.SET_TURN_SERVER="Client.setTurnServer",e.SET_CLIENT_ROLE="Client.setClientRole",e.SET_LOW_STREAM_PARAMETER="Client.setLowStreamParameter",e.ENABLE_DUAL_STREAM="Client.enableDualStream",e.DISABLE_DUAL_STREAM="Client.disableDualStream",e.JOIN="Client.join",e.LEAVE="Client.leave",e.PUBLISH="Client.publish",e.UNPUBLISH="Client.unpublish",e.SUBSCRIBE="Client.subscribe",e.UNSUBSCRIBE="Client.unsubscribe",e.RENEW_TOKEN="Client.renewToken",e.SET_REMOTE_VIDEO_STREAM_TYPE="Client.setRemoteVideoStreamType",e.SET_STREAM_FALLBACK_OPTION="Client.setStreamFallbackOption",e.ENABLE_AUDIO_VOLUME_INDICATOR="Client.enableAudioVolumeIndicator",e.SEND_CUSTOM_REPORT_MESSAGE="Client.sendCustomReportMessage",e.ON_LIVE_STREAM_WARNING="Client.onLiveStreamWarning",e.ON_LIVE_STREAM_ERROR="Client.onLiveStreamingError",e.START_LIVE_STREAMING="Client.startLiveStreaming",e.SET_LIVE_TRANSCODING="Client.setLiveTranscoding",e.STOP_LIVE_STREAMING="Client.stopLiveStreaming",e.ADD_INJECT_STREAM_URL="Client.addInjectStreamUrl",e.REMOVE_INJECT_STREAM_URL="Client.removeInjectStreamUrl",e.START_CHANNEL_MEDIA_RELAY="Client.startChannelMediaRelay",e.UPDATE_CHANNEL_MEDIA_RELAY="Client.updateChannelMediaRelay",e.STOP_CHANNEL_MEDIA_RELAY="Client.stopChannelMediaRelay",e.REQUEST_CONFIG_DISTRIBUTE="_config-distribute-request",e.SET_CONFIG_DISTRIBUTE="_configDistribute",e.LOCAL_TRACK_SET_MUTED="LocalTrack.setMute",e.LOCAL_AUDIO_TRACK_PLAY="LocalAudioTrack.play",e.LOCAL_AUDIO_TRACK_PLAY_IN_ELEMENT="LocalAudioTrack.playInElement",e.LOCAL_AUDIO_TRACK_STOP="LocalAudioTrack.stop",e.LOCAL_AUDIO_TRACK_SET_VOLUME="LocalAudioTrack.setVolume",e.MIC_AUDIO_TRACK_SET_DEVICE="MicrophoneAudioTrack.setDevice",e.BUFFER_AUDIO_TRACK_START="BufferSourceAudioTrack.startProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_STOP="BufferSourceAudioTrack.stopProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_PAUSE="BufferSourceAudioTrack.pauseProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_RESUME="BufferSourceAudioTrack.resumeProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_SEEK="BufferSourceAudioTrack.seekAudioBuffer",e.LOCAL_VIDEO_TRACK_PLAY="LocalVideoTrack.play",e.LOCAL_VIDEO_TRACK_STOP="LocalVideoTrack.stop",e.LOCAL_VIDEO_TRACK_BEAUTY="LocalVideoTrack.setBeautyEffect",e.CAM_VIDEO_TRACK_SET_DEVICE="CameraVideoTrack.setDevice",e.CAM_VIDEO_TRACK_SET_ENCODER_CONFIG="CameraVideoTrack.setEncoderConfiguration",e.REMOTE_VIDEO_TRACK_PLAY="RemoteVideoTrack.play",e.REMOTE_VIDEO_TRACK_STOP="RemoteVideoTrack.stop",e.REMOTE_AUDIO_TRACK_PLAY="RemoteAudioTrack.play",e.REMOTE_AUDIO_TRACK_STOP="RemoteAudioTrack.stop",e.REMOTE_AUDIO_SET_VOLUME="RemoteAudioTrack.setVolume",e.REMOTE_AUDIO_SET_OUTPUT_DEVICE="RemoteAudioTrack.setOutputDevice",e.GET_MEDIA_STREAM_TRACK="Track.getMediaStreamTrack",e.STREAM_TYPE_CHANGE="streamTypeChange"}(Pl||(Pl={})),(Bl||(Bl={})).TRACER="tracer",function(e){e.IDLE="IDLE",e.INITING="INITING",e.INITEND="INITEND"}(Ml||(Ml={})),function(e){e.STATE_CHANGE="state_change",e.RECORDING_DEVICE_CHANGED="recordingDeviceChanged",e.PLAYOUT_DEVICE_CHANGED="playoutDeviceChanged",e.CAMERA_DEVICE_CHANGED="cameraDeviceChanged"}(jl||(jl={})),function(e){e[e.ACCESS_POINT=101]="ACCESS_POINT",e[e.UNILBS=201]="UNILBS",e[e.STRING_UID_ALLOCATOR=901]="STRING_UID_ALLOCATOR"}(Ul||(Ul={})),function(e){e[e.IIIEGAL_APPID=1]="IIIEGAL_APPID",e[e.IIIEGAL_UID=2]="IIIEGAL_UID",e[e.INTERNAL_ERROR=3]="INTERNAL_ERROR"}(Fl||(Fl={})),function(e){e[e.INVALID_VENDOR_KEY=5]="INVALID_VENDOR_KEY",e[e.INVALID_CHANNEL_NAME=7]="INVALID_CHANNEL_NAME",e[e.INTERNAL_ERROR=8]="INTERNAL_ERROR",e[e.NO_AUTHORIZED=9]="NO_AUTHORIZED",e[e.DYNAMIC_KEY_TIMEOUT=10]="DYNAMIC_KEY_TIMEOUT",e[e.NO_ACTIVE_STATUS=11]="NO_ACTIVE_STATUS",e[e.DYNAMIC_KEY_EXPIRED=13]="DYNAMIC_KEY_EXPIRED",e[e.STATIC_USE_DYNAMIC_KEY=14]="STATIC_USE_DYNAMIC_KEY",e[e.DYNAMIC_USE_STATIC_KEY=15]="DYNAMIC_USE_STATIC_KEY",e[e.USER_OVERLOAD=16]="USER_OVERLOAD",e[e.FORBIDDEN_REGION=18]="FORBIDDEN_REGION",e[e.CANNOT_MEET_AREA_DEMAND=19]="CANNOT_MEET_AREA_DEMAND"}(Ql||(Ql={})),function(e){e[e.NO_FLAG_SET=100]="NO_FLAG_SET",e[e.FLAG_SET_BUT_EMPTY=101]="FLAG_SET_BUT_EMPTY",e[e.INVALID_FALG_SET=102]="INVALID_FALG_SET",e[e.NO_SERVICE_AVAILABLE=200]="NO_SERVICE_AVAILABLE",e[e.NO_SERVICE_AVAILABLE_P2P=201]="NO_SERVICE_AVAILABLE_P2P",e[e.NO_SERVICE_AVAILABLE_VOICE=202]="NO_SERVICE_AVAILABLE_VOICE",e[e.NO_SERVICE_AVAILABLE_WEBRTC=203]="NO_SERVICE_AVAILABLE_WEBRTC",e[e.NO_SERVICE_AVAILABLE_CDS=204]="NO_SERVICE_AVAILABLE_CDS",e[e.NO_SERVICE_AVAILABLE_CDN=205]="NO_SERVICE_AVAILABLE_CDN",e[e.NO_SERVICE_AVAILABLE_TDS=206]="NO_SERVICE_AVAILABLE_TDS",e[e.NO_SERVICE_AVAILABLE_REPORT=207]="NO_SERVICE_AVAILABLE_REPORT",e[e.NO_SERVICE_AVAILABLE_APP_CENTER=208]="NO_SERVICE_AVAILABLE_APP_CENTER",e[e.NO_SERVICE_AVAILABLE_ENV0=209]="NO_SERVICE_AVAILABLE_ENV0",e[e.NO_SERVICE_AVAILABLE_VOET=210]="NO_SERVICE_AVAILABLE_VOET",e[e.NO_SERVICE_AVAILABLE_STRING_UID=211]="NO_SERVICE_AVAILABLE_STRING_UID",e[e.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS=212]="NO_SERVICE_AVAILABLE_WEBRTC_UNILBS",e[e.NO_SERVICE_AVAILABLE_UNILBS_FLV=213]="NO_SERVICE_AVAILABLE_UNILBS_FLV"}(Gl||(Gl={})),function(e){e[e.K_TIMESTAMP_EXPIRED=2]="K_TIMESTAMP_EXPIRED",e[e.K_CHANNEL_PERMISSION_INVALID=3]="K_CHANNEL_PERMISSION_INVALID",e[e.K_CERTIFICATE_INVALID=4]="K_CERTIFICATE_INVALID",e[e.K_CHANNEL_NAME_EMPTY=5]="K_CHANNEL_NAME_EMPTY",e[e.K_CHANNEL_NOT_FOUND=6]="K_CHANNEL_NOT_FOUND",e[e.K_TICKET_INVALID=7]="K_TICKET_INVALID",e[e.K_CHANNEL_CONFLICTED=8]="K_CHANNEL_CONFLICTED",e[e.K_SERVICE_NOT_READY=9]="K_SERVICE_NOT_READY",e[e.K_SERVICE_TOO_HEAVY=10]="K_SERVICE_TOO_HEAVY",e[e.K_UID_BANNED=14]="K_UID_BANNED",e[e.K_IP_BANNED=15]="K_IP_BANNED",e[e.K_CHANNEL_BANNED=16]="K_CHANNEL_BANNED",e[e.WARN_NO_AVAILABLE_CHANNEL=103]="WARN_NO_AVAILABLE_CHANNEL",e[e.WARN_LOOKUP_CHANNEL_TIMEOUT=104]="WARN_LOOKUP_CHANNEL_TIMEOUT",e[e.WARN_LOOKUP_CHANNEL_REJECTED=105]="WARN_LOOKUP_CHANNEL_REJECTED",e[e.WARN_OPEN_CHANNEL_TIMEOUT=106]="WARN_OPEN_CHANNEL_TIMEOUT",e[e.WARN_OPEN_CHANNEL_REJECTED=107]="WARN_OPEN_CHANNEL_REJECTED",e[e.WARN_REQUEST_DEFERRED=108]="WARN_REQUEST_DEFERRED",e[e.ERR_DYNAMIC_KEY_TIMEOUT=109]="ERR_DYNAMIC_KEY_TIMEOUT",e[e.ERR_NO_AUTHORIZED=110]="ERR_NO_AUTHORIZED",e[e.ERR_VOM_SERVICE_UNAVAILABLE=111]="ERR_VOM_SERVICE_UNAVAILABLE",e[e.ERR_NO_CHANNEL_AVAILABLE_CODE=112]="ERR_NO_CHANNEL_AVAILABLE_CODE",e[e.ERR_MASTER_VOCS_UNAVAILABLE=114]="ERR_MASTER_VOCS_UNAVAILABLE",e[e.ERR_INTERNAL_ERROR=115]="ERR_INTERNAL_ERROR",e[e.ERR_NO_ACTIVE_STATUS=116]="ERR_NO_ACTIVE_STATUS",e[e.ERR_INVALID_UID=117]="ERR_INVALID_UID",e[e.ERR_DYNAMIC_KEY_EXPIRED=118]="ERR_DYNAMIC_KEY_EXPIRED",e[e.ERR_STATIC_USE_DYANMIC_KE=119]="ERR_STATIC_USE_DYANMIC_KE",e[e.ERR_DYNAMIC_USE_STATIC_KE=120]="ERR_DYNAMIC_USE_STATIC_KE",e[e.ERR_NO_VOCS_AVAILABLE=2e3]="ERR_NO_VOCS_AVAILABLE",e[e.ERR_NO_VOS_AVAILABLE=2001]="ERR_NO_VOS_AVAILABLE",e[e.ERR_JOIN_CHANNEL_TIMEOUT=2002]="ERR_JOIN_CHANNEL_TIMEOUT",e[e.ERR_REPEAT_JOIN_CHANNEL=2003]="ERR_REPEAT_JOIN_CHANNEL",e[e.ERR_JOIN_BY_MULTI_IP=2004]="ERR_JOIN_BY_MULTI_IP",e[e.ERR_NOT_JOINED=2011]="ERR_NOT_JOINED",e[e.ERR_REPEAT_JOIN_REQUEST=2012]="ERR_REPEAT_JOIN_REQUEST",e[e.ERR_INVALID_VENDOR_KEY=2013]="ERR_INVALID_VENDOR_KEY",e[e.ERR_INVALID_CHANNEL_NAME=2014]="ERR_INVALID_CHANNEL_NAME",e[e.ERR_INVALID_STRINGUID=2015]="ERR_INVALID_STRINGUID",e[e.ERR_TOO_MANY_USERS=2016]="ERR_TOO_MANY_USERS",e[e.ERR_SET_CLIENT_ROLE_TIMEOUT=2017]="ERR_SET_CLIENT_ROLE_TIMEOUT",e[e.ERR_SET_CLIENT_ROLE_NO_PERMISSION=2018]="ERR_SET_CLIENT_ROLE_NO_PERMISSION",e[e.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE=2019]="ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",e[e.ERR_PUBLISH_REQUEST_INVALID=2020]="ERR_PUBLISH_REQUEST_INVALID",e[e.ERR_SUBSCRIBE_REQUEST_INVALID=2021]="ERR_SUBSCRIBE_REQUEST_INVALID",e[e.ERR_NOT_SUPPORTED_MESSAGE=2022]="ERR_NOT_SUPPORTED_MESSAGE",e[e.ERR_ILLEAGAL_PLUGIN=2023]="ERR_ILLEAGAL_PLUGIN",e[e.ERR_REJOIN_TOKEN_INVALID=2024]="ERR_REJOIN_TOKEN_INVALID",e[e.ERR_REJOIN_USER_NOT_JOINED=2025]="ERR_REJOIN_USER_NOT_JOINED",e[e.ERR_INVALID_OPTIONAL_INFO=2027]="ERR_INVALID_OPTIONAL_INFO",e[e.ILLEGAL_AES_PASSWORD=2028]="ILLEGAL_AES_PASSWORD",e[e.ILLEGAL_CLIENT_ROLE_LEVEL=2029]="ILLEGAL_CLIENT_ROLE_LEVEL",e[e.ERR_TEST_RECOVER=9e3]="ERR_TEST_RECOVER",e[e.ERR_TEST_TRYNEXT=9001]="ERR_TEST_TRYNEXT",e[e.ERR_TEST_RETRY=9002]="ERR_TEST_RETRY"}(ql||(ql={})),function(e){e.CONNECTION_STATE_CHANGE="connection-state-change",e.MEDIA_RECONNECT_START="media-reconnect-start",e.MEDIA_RECONNECT_END="media-reconnect-end",e.IS_USING_CLOUD_PROXY="is-using-cloud-proxy",e.USER_JOINED="user-joined",e.USER_LEAVED="user-left",e.USER_PUBLISHED="user-published",e.USER_UNPUBLISHED="user-unpublished",e.USER_INFO_UPDATED="user-info-updated",e.CLIENT_BANNED="client-banned",e.CHANNEL_MEDIA_RELAY_STATE="channel-media-relay-state",e.CHANNEL_MEDIA_RELAY_EVENT="channel-media-relay-event",e.VOLUME_INDICATOR="volume-indicator",e.CRYPT_ERROR="crypt-error",e.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="token-privilege-will-expire",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="token-privilege-did-expire",e.NETWORK_QUALITY="network-quality",e.STREAM_TYPE_CHANGED="stream-type-changed",e.STREAM_FALLBACK="stream-fallback",e.RECEIVE_METADATA="receive-metadata",e.STREAM_MESSAGE="stream-message",e.LIVE_STREAMING_ERROR="live-streaming-error",e.LIVE_STREAMING_WARNING="live-streaming-warning",e.INJECT_STREAM_STATUS="stream-inject-status",e.EXCEPTION="exception",e.ERROR="error",e.P2P_LOST="p2p_lost"}(Vl||(Vl={})),function(e){e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.MULTI_IP="MULTI_IP",e.TIMEOUT="TIMEOUT",e.OFFLINE="OFFLINE",e.LEAVE="LEAVE"}(Kl||(Kl={})),function(e){e.CONNECTING="connecting",e.CONNECTED="connected",e.RECONNECTING="reconnecting",e.CLOSED="closed"}(Hl||(Hl={})),function(e){e.WS_CONNECTED="ws_connected",e.WS_RECONNECTING="ws_reconnecting",e.WS_CLOSED="ws_closed",e.ON_BINARY_DATA="on_binary_data",e.REQUEST_RECOVER="request_recover",e.REQUEST_JOIN_INFO="request_join_info",e.REQUEST_REJOIN_INFO="req_rejoin_info",e.IS_P2P_DISCONNECTED="is_p2p_dis",e.DISCONNECT_P2P="dis_p2p",e.NEED_RENEW_SESSION="need-sid",e.REPORT_JOIN_GATEWAY="report_join_gateway",e.REQUEST_TIMEOUT="request_timeout",e.REQUEST_SUCCESS="request_success"}(Wl||(Wl={})),function(e){e.PING="ping",e.PING_BACK="ping_back",e.JOIN="join_v2",e.REJOIN="rejoin",e.LEAVE="leave",e.SET_CLIENT_ROLE="set_client_role",e.PUBLISH="publish",e.UNPUBLISH="unpublish",e.SUBSCRIBE="subscribe",e.UNSUBSCRIBE="unsubscribe",e.SUBSCRIBE_CHANGE="subscribe_change",e.TRAFFIC_STATS="traffic_stats",e.RENEW_TOKEN="renew_token",e.SWITCH_VIDEO_STREAM="switch_video_stream",e.SET_FALLBACK_OPTION="set_fallback_option",e.GATEWAY_INFO="gateway_info",e.CONTROL="control",e.SEND_METADATA="send_metadata",e.DATA_STREAM="data_stream",e.PICK_SVC_LAYER="pick_svc_layer"}(zl||(zl={})),function(e){e.PUBLISH_STATS="publish_stats",e.PUBLISH_RELATED_STATS="publish_related_stats",e.SUBSCRIBE_STATS="subscribe_stats",e.SUBSCRIBE_RELATED_STATS="subscribe_related_stats",e.WS_INFLATE_DATA_LENGTH="ws_inflate_data_length"}(Yl||(Yl={})),function(e){e.ON_USER_ONLINE="on_user_online",e.ON_USER_OFFLINE="on_user_offline",e.ON_STREAM_FALLBACK_UPDATE="on_stream_fallback_update",e.ON_PUBLISH_STREAM="on_publish_stream",e.ON_UPLINK_STATS="on_uplink_stats",e.ON_P2P_LOST="on_p2p_lost",e.ON_REMOVE_STREAM="on_remove_stream",e.ON_ADD_AUDIO_STREAM="on_add_audio_stream",e.ON_ADD_VIDEO_STREAM="on_add_video_stream",e.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="on_token_privilege_will_expire",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="on_token_privilege_did_expire",e.ON_USER_BANNED="on_user_banned",e.ON_NOTIFICATION="on_notification",e.ON_CRYPT_ERROR="on_crypt_error",e.MUTE_AUDIO="mute_audio",e.MUTE_VIDEO="mute_video",e.UNMUTE_AUDIO="unmute_audio",e.UNMUTE_VIDEO="unmute_video",e.RECEIVE_METADATA="receive_metadata",e.ON_DATA_STREAM="on_data_stream",e.ENABLE_LOCAL_VIDEO="enable_local_video",e.DISABLE_LOCAL_VIDEO="disable_local_video",e.ENABLE_LOCAL_AUDIO="enable_local_audio",e.DISABLE_LOCAL_AUDIO="disable_local_audio"}(Jl||(Jl={})),function(e){e.CONNECTION_STATE_CHANGE="CONNECTION_STATE_CHANGE",e.NEED_ANSWER="NEED_ANSWER",e.NEED_RENEGOTIATE="NEED_RENEGOTIATE",e.P2P_LOST="P2P_LOST",e.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",e.NEED_UNPUB="NEED_UNPUB",e.NEED_UNSUB="NEED_UNSUB",e.NEED_UPLOAD="NEED_UPLOAD",e.NEED_CONTROL="NEED_CONTROL",e.START_RECONNECT="START_RECONNECT",e.END_RECONNECT="END_RECONNECT",e.NEED_SIGNAL_RTT="NEED_SIGNAL_RTT"}(Xl||(Xl={})),function(e){e.AUDIO_SOURCE_STATE_CHANGE="audio_source_state_change",e.RECEIVE_TRACK_BUFFER="receive_track_buffer",e.ON_AUDIO_BUFFER="on_audio_buffer"}(Zl||(Zl={}));let $l={sendVolumeLevel:0,sendBitrate:0,sendBytes:0,sendPackets:0,sendPacketsLost:0,currentPacketLossRate:0},eh={sendBytes:0,sendBitrate:0,sendPackets:0,sendPacketsLost:0,sendResolutionHeight:0,sendResolutionWidth:0,captureResolutionHeight:0,captureResolutionWidth:0,targetSendBitrate:0,totalDuration:0,totalFreezeTime:0,currentPacketLossRate:0},th={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveLevel:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1},nh={uplinkNetworkQuality:0,downlinkNetworkQuality:0},rh={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,receiveResolutionHeight:0,receiveResolutionWidth:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1};var ih,oh;!function(e){e.CONNECTED="websocket:connected",e.RECONNECTING="websocket:reconnecting",e.WILL_RECONNECT="websocket:will_reconnect",e.CLOSED="websocket:closed",e.FAILED="websocket:failed",e.ON_MESSAGE="websocket:on_message",e.REQUEST_NEW_URLS="websocket:request_new_urls"}(ih||(ih={})),function(e){e.TRANSCODE="mix_streaming",e.RAW="raw_streaming",e.INJECT="inject_streaming"}(oh||(oh={}));let ah={alpha:1,height:640,width:360,x:0,y:0,zOrder:0,audioChannel:0},sh={x:0,y:0,width:160,height:160,zOrder:255,alpha:1},ch={audioBitrate:48,audioChannels:1,audioSampleRate:48e3,backgroundColor:0,height:360,lowLatency:!1,videoBitrate:400,videoCodecProfile:100,videoCodecType:1,videoFrameRate:15,videoGop:30,width:640,images:[],userConfigs:[],userConfigExtraInfo:""},uh={audioBitrate:48,audioChannels:2,audioVolume:100,audioSampleRate:48e3,height:0,width:0,videoBitrate:400,videoFramerate:15,videoGop:30};var lh,hh,dh,fh,ph,gh,Ah,vh,mh,yh;!function(e){e.WARNING="@live_uap-warning",e.ERROR="@line_uap-error",e.PUBLISH_STREAM_STATUS="@live_uap-publish-status",e.INJECT_STREAM_STATUS="@live_uap-inject-status",e.WORKER_STATUS="@live_uap-worker-status",e.REQUEST_NEW_ADDRESS="@live_uap-request-address"}(lh||(lh={})),(hh||(hh={})).REQUEST_WORKER_MANAGER_LIST="@live_req_worker_manager",function(e){e[e.LIVE_STREAM_RESPONSE_SUCCEED=200]="LIVE_STREAM_RESPONSE_SUCCEED",e[e.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM=454]="LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM",e[e.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR=450]="LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR",e[e.LIVE_STREAM_RESPONSE_BAD_STREAM=451]="LIVE_STREAM_RESPONSE_BAD_STREAM",e[e.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR=400]="LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR",e[e.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST=404]="LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST",e[e.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED=456]="LIVE_STREAM_RESPONSE_NOT_AUTHORIZED",e[e.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE=457]="LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE",e[e.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN=429]="LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN",e[e.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH=452]="LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH",e[e.LIVE_STREAM_RESPONSE_NOT_SUPPORTED=453]="LIVE_STREAM_RESPONSE_NOT_SUPPORTED",e[e.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM=455]="LIVE_STREAM_RESPONSE_MAX_STREAM_NUM",e[e.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR=500]="LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR",e[e.LIVE_STREAM_RESPONSE_WORKER_LOST=501]="LIVE_STREAM_RESPONSE_WORKER_LOST",e[e.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT=502]="LIVE_STREAM_RESPONSE_RESOURCE_LIMIT",e[e.LIVE_STREAM_RESPONSE_WORKER_QUIT=503]="LIVE_STREAM_RESPONSE_WORKER_QUIT",e[e.ERROR_FAIL_SEND_MESSAGE=504]="ERROR_FAIL_SEND_MESSAGE",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE=30]="PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT=31]="PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH=32]="PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH",e[e.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN=33]="PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN"}(dh||(dh={})),function(e){e.CONNECT_FAILED="connect failed",e.CONNECT_TIMEOUT="connect timeout",e.WS_DISCONNECTED="websocket disconnected",e.REQUEST_TIMEOUT="request timeout",e.REQUEST_FAILED="request failed",e.WAIT_STATUS_TIMEOUT="wait status timeout",e.WAIT_STATUS_ERROR="wait status error",e.BAD_STATE="bad state",e.WS_ABORT="ws abort",e.AP_REQUEST_TIMEOUT="AP request timeout",e.AP_JSON_PARSE_ERROR="AP json parse error",e.AP_REQUEST_ERROR="AP request error",e.AP_REQUEST_ABORT="AP request abort"}(fh||(fh={})),function(e){e[e.SetSdkProfile=0]="SetSdkProfile",e[e.SetSourceChannel=1]="SetSourceChannel",e[e.SetSourceUserId=2]="SetSourceUserId",e[e.SetDestChannel=3]="SetDestChannel",e[e.StartPacketTransfer=4]="StartPacketTransfer",e[e.StopPacketTransfer=5]="StopPacketTransfer",e[e.UpdateDestChannel=6]="UpdateDestChannel",e[e.Reconnect=7]="Reconnect",e[e.SetVideoProfile=8]="SetVideoProfile"}(ph||(ph={})),function(e){e.DISCONNECT="disconnect",e.CONNECTION_STATE_CHANGE="connection-state-change",e.NETWORK_QUALITY="network-quality",e.STREAM_TYPE_CHANGE="stream-type-change",e.IS_P2P_DISCONNECTED="is-p2p-dis",e.DISCONNECT_P2P="dis-p2p",e.REQUEST_NEW_GATEWAY_LIST="req-gate-url",e.NEED_RENEW_SESSION="need-sid"}(gh||(gh={})),function(e){e.NEED_RENEGOTIATE="@need_renegotiate",e.NEED_REPLACE_TRACK="@need_replace_track",e.NEED_CLOSE="@need_close",e.NEED_ADD_TRACK="@need_add_track",e.NEED_REMOVE_TRACK="@need_remove_track",e.NEED_SESSION_ID="@need_sid",e.SET_OPTIMIZATION_MODE="@set_optimization_mode",e.GET_STATS="@get_stats",e.GET_LOW_VIDEO_TRACK="@get_low_video_track",e.NEED_RESET_REMOTE_SDP="@need_reset_remote_sdp",e.SET_VIDEO_TRACK_MUTED="@set_video_track_muted",e.SET_AUDIO_TRACK_MUTED="@set_audio_track_muted"}(Ah||(Ah={})),function(e){e.SCREEN_TRACK="screen_track",e.LOW_STREAM="low_stream"}(vh||(vh={})),function(e){e.SOURCE_STATE_CHANGE="source-state-change",e.TRACK_ENDED="track-ended",e.BEAUTY_EFFECT_OVERLOAD="beauty-effect-overload"}(mh||(mh={})),(yh||(yh={})).FIRST_FRAME_DECODED="first-frame-decoded";let bh="AFRICA ASIA CHINA EUROPE GLOBAL INDIA JAPAN NORTH_AMERICA OCEANIA OVERSEA SOUTH_AMERICA".split(" ");var _h;!function(e){e.CHINA="CN",e.ASIA="AS",e.NORTH_AMERICA="NA",e.EUROPE="EU",e.JAPAN="JP",e.INDIA="IN",e.OCEANIA="OC",e.SOUTH_AMERICA="SA",e.AFRICA="AF",e.OVERSEA="OVERSEA",e.GLOBAL="GLOBAL"}(_h||(_h={}));let Eh={CHINA:{},ASIA:{CODE:_h.ASIA,WEBCS_DOMAIN:["ap-web-1-asia.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-asia.agora.io"],PROXY_CS:["proxy-ap-web-asia.agora.io"],CDS_AP:["cds-ap-web-asia.agora.io","cds-ap-web-asia2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-asia.agora.io","sua-ap-web-asia2.agora.io"],UAP_AP:["uap-ap-web-asia.agora.io","uap-ap-web-asia2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-asia.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-asia.agora.io"],LOG_UPLOAD_SERVER:["logservice-asia.agora.io"],PROXY_SERVER_TYPE3:["southeast-asia.webrtc-cloud-proxy.sd-rtn.com"]},NORTH_AMERICA:{CODE:_h.NORTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-north-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-north-america.agora.io"],PROXY_CS:["proxy-ap-web-america.agora.io"],CDS_AP:["cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],UAP_AP:["uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-north-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-north-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-north-america.agora.io"],PROXY_SERVER_TYPE3:["east-usa.webrtc-cloud-proxy.sd-rtn.com"]},EUROPE:{CODE:_h.EUROPE,WEBCS_DOMAIN:["ap-web-1-europe.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-europe.agora.io"],PROXY_CS:["proxy-ap-web-europe.agora.io"],CDS_AP:["cds-ap-web-europe.agora.io","cds-ap-web-europe2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-europe.agora.io","sua-ap-web-europe.agora.io"],UAP_AP:["uap-ap-web-europe.agora.io","uap-ap-web-europe2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-europe.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-europe.agora.io"],LOG_UPLOAD_SERVER:["logservice-europe.agora.io"],PROXY_SERVER_TYPE3:["europe.webrtc-cloud-proxy.sd-rtn.com"]},JAPAN:{CODE:_h.JAPAN,WEBCS_DOMAIN:["ap-web-1-japan.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-japan.agora.io"],PROXY_CS:["proxy-ap-web-japan.agora.io"],CDS_AP:["cds-ap-web-japan.agora.io","cds-ap-web-japan2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-japan.agora.io","sua-ap-web-japan2.agora.io"],UAP_AP:["uap-ap-web-japan.agora.io","\tuap-ap-web-japan2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-japan.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-japan.agora.io"],LOG_UPLOAD_SERVER:["logservice-japan.agora.io"],PROXY_SERVER_TYPE3:["japan.webrtc-cloud-proxy.sd-rtn.com"]},INDIA:{CODE:_h.INDIA,WEBCS_DOMAIN:["ap-web-1-india.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-india.agora.io"],PROXY_CS:["proxy-ap-web-india.agora.io"],CDS_AP:["cds-ap-web-india.agora.io","cds-ap-web-india2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-india.agora.io","sua-ap-web-india2.agora.io"],UAP_AP:["uap-ap-web-india.agora.io","uap-ap-web-india2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-india.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-india.agora.io"],LOG_UPLOAD_SERVER:["logservice-india.agora.io"],PROXY_SERVER_TYPE3:["india.webrtc-cloud-proxy.sd-rtn.com"]},OVERSEA:{CODE:_h.OVERSEA,WEBCS_DOMAIN:["ap-web-1-oversea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oversea.agora.io"],PROXY_CS:["proxy-ap-web-oversea.agora.io"],CDS_AP:["cds-ap-web-oversea.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oversea.agora.io"],UAP_AP:["uap-ap-web-oversea.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oversea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oversea.agora.io"],LOG_UPLOAD_SERVER:["logservice-oversea.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.agora.io"]},GLOBAL:{CODE:_h.GLOBAL,WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-ap-web-3.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-ap-web-3.agora.io"],UAP_AP:["uap-ap-web-1.agora.io","uap-ap-web-3.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2.agora.io"],LOG_UPLOAD_SERVER:["logservice.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com"]},OCEANIA:{CODE:_h.OCEANIA,WEBCS_DOMAIN:["ap-web-1-oceania.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oceania.agora.io"],PROXY_CS:["proxy-ap-web-oceania.agora.io"],CDS_AP:["cds-ap-web-oceania.agora.io","cds-ap-web-oceania2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oceania.agora.io","sua-ap-web-oceania2.agora.io"],UAP_AP:["uap-ap-web-oceania.agora.io","uap-ap-web-oceania2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oceania.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oceania.agora.io"],LOG_UPLOAD_SERVER:["logservice-oceania.agora.io"],PROXY_SERVER_TYPE3:["oceania.webrtc-cloud-proxy.sd-rtn.com"]},SOUTH_AMERICA:{CODE:_h.SOUTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-south-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-south-america.agora.io"],PROXY_CS:["proxy-ap-web-south-america.agora.io"],CDS_AP:["cds-ap-web-south-america.agora.io","cds-ap-web-south-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-south-america.agora.io","sua-ap-web-south-america2.agora.io"],UAP_AP:["uap-ap-web-south-america.agora.io","uap-ap-web-south-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-south-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-south-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-america.agora.io"],PROXY_SERVER_TYPE3:["south-america.webrtc-cloud-proxy.sd-rtn.com"]},AFRICA:{CODE:_h.AFRICA,WEBCS_DOMAIN:["ap-web-1-africa.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-africa.agora.io"],PROXY_CS:["proxy-ap-web-africa.agora.io"],CDS_AP:["cds-ap-web-africa.agora.io","cds-ap-web-africa2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-africa.agora.io","sua-ap-web-africa2.agora.io"],UAP_AP:["uap-ap-web-africa.agora.io","uap-ap-web-africa2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-africa.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-africa.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-africa.agora.io"],PROXY_SERVER_TYPE3:["africa.webrtc-cloud-proxy.sd-rtn.com"]}};var wh,Ih,Ch;Nu&&(Eh.CHINA={CODE:_h.CHINA,WEBCS_DOMAIN:["webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["proxy-web.ap.sd-rtn.com"],CDS_AP:["cds-web-2.ap.sd-rtn.com","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-web-2.ap.sd-rtn.com","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-web-2.ap.sd-rtn.com","uap-web-4.ap.sd-rtn.com"],EVENT_REPORT_DOMAIN:["web-3.statscollector.sd-rtn.com"],EVENT_REPORT_BACKUP_DOMAIN:["web-4.statscollector.sd-rtn.com"],LOG_UPLOAD_SERVER:["logservice-china.agora.io"],PROXY_SERVER_TYPE3:["east-cn.webrtc-cloud-proxy.sd-rtn.com"]}),(wh||(wh={})).UPDATE_BITRATE_LIMIT="update_bitrate_limit",function(e){e.ONLINE="ONLINE",e.OFFLINE="OFFLINE"}(Ih||(Ih={})),function(e){e.NETWORK_STATE_CHANGE="NETWORK_STATE_CHANGE",e.ONLINE="ONLINE",e.OFFLINE="OFFLINE"}(Ch||(Ch={}));let Sh={join:["startJoin","startRequestAp","startJoinGateway","finishJoin"],publish:["startPublish"]},Th={getDisplayMedia:!1,getStreamFromExtension:!1,supportUnifiedPlan:!1,supportMinBitrate:!1,supportSetRtpSenderParameters:!1,supportDualStream:!0,webAudioMediaStreamDest:!1,supportReplaceTrack:!1,supportWebGL:!1,webAudioWithAEC:!1,supportRequestFrame:!1,supportShareAudio:!1,supportDualStreamEncoding:!1};kr({target:"Object",stat:!0,forced:!zn,sham:!zn},{defineProperties:To});var Rh=e((function(e){var t=br.Object;e=e.exports=function(e,n){return t.defineProperties(e,n)},t.defineProperties.sham&&(e.sham=!0)})),kh=Co.concat("length","prototype"),Oh={f:Object.getOwnPropertyNames||function(e){return Io(e,kh)}},Nh=Nr("Reflect","ownKeys")||function(e){var t=Oh.f(wr(e)),n=Na.f;return n?t.concat(n(e)):t};kr({target:"Object",stat:!0,sham:!zn},{getOwnPropertyDescriptors:function(e){var t,n;e=ir(e);for(var r=fr,i=Nh(e),o={},a=0;i.length>a;)void 0!==(n=r(e,t=i[a++]))&&zr(o,t,n);return o}});var xh=br.Object.getOwnPropertyDescriptors,Dh=Oh.f,Lh={}.toString,Ph="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Bh=function(e){if(Ph&&"[object Window]"==Lh.call(e))try{var t=Dh(e)}catch(e){t=Ph.slice()}else t=Dh(ir(e));return t},Mh={f:oi},jh=Cr.f,Uh=no("hidden"),Fh=oi("toPrimitive"),Qh=fo.set,Gh=fo.getterFor("Symbol"),qh=Object.prototype,Vh=Hn.Symbol,Kh=Nr("JSON","stringify"),Hh=fr,Wh=Cr.f,zh=Bh,Yh=Xn,Jh=Jr("symbols"),Xh=Jr("op-symbols"),Zh=Jr("string-to-symbol-registry"),$h=Jr("symbol-to-string-registry"),ed=Jr("wks"),td=Hn.QObject,nd=!td||!td.prototype||!td.prototype.findChild,rd=zn&&Wn((function(){return 7!=xo(Wh({},"a",{get:function(){return Wh(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=Hh(qh,t);r&&delete qh[t],Wh(e,t,n),r&&e!==qh&&Wh(qh,t,r)}:Wh,id=function(e,t){var n=Jh[e]=xo(Vh.prototype);return Qh(n,{type:"Symbol",tag:e,description:t}),zn||(n.description=t),n},od=ei&&"symbol"==typeof Vh.iterator?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof Vh},ad=function(e,t,n){return e===qh&&ad(Xh,t,n),wr(e),t=ar(t,!0),wr(n),cr(Jh,t)?(n.enumerable?(cr(e,Uh)&&e[Uh][t]&&(e[Uh][t]=!1),n=xo(n,{enumerable:Zn(0,!1)})):(cr(e,Uh)||Wh(e,Uh,Zn(1,{})),e[Uh][t]=!0),rd(e,t,n)):Wh(e,t,n)},sd=function(e,t){wr(e);var n=ir(t);return t=So(n).concat(hd(n)),Ki(t,(function(t){zn&&!cd.call(n,t)||ad(e,t,n[t])})),e},cd=function(e){e=ar(e,!0);var t=Yh.call(this,e);return!(this===qh&&cr(Jh,e)&&!cr(Xh,e))&&(!(t||!cr(this,e)||!cr(Jh,e)||cr(this,Uh)&&this[Uh][e])||t)},ud=function(e,t){if(e=ir(e),t=ar(t,!0),e!==qh||!cr(Jh,t)||cr(Xh,t)){var n=Hh(e,t);return!n||!cr(Jh,t)||cr(e,Uh)&&e[Uh][t]||(n.enumerable=!0),n}},ld=function(e){e=zh(ir(e));var t=[];return Ki(e,(function(e){cr(Jh,e)||cr(Ei,e)||t.push(e)})),t},hd=function(e){var t=e===qh;e=zh(t?Xh:ir(e));var n=[];return Ki(e,(function(e){!cr(Jh,e)||t&&!cr(qh,e)||n.push(Jh[e])})),n};if(ei||(Bo((Vh=function(){if(this instanceof Vh)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=$r(e),n=function(e){this===qh&&n.call(Xh,e),cr(this,Uh)&&cr(this[Uh],t)&&(this[Uh][t]=!1),rd(this,t,Zn(1,e))};return zn&&nd&&rd(qh,t,{configurable:!0,set:n}),id(t,e)}).prototype,"toString",(function(){return Gh(this).tag})),Xn=cd,Cr.f=ad,fr=ud,Oh.f=Bh=ld,Na.f=hd,zn&&Wh(Vh.prototype,"description",{configurable:!0,get:function(){return Gh(this).description}})),ti||(Mh.f=function(e){return id(oi(e),e)}),kr({global:!0,wrap:!0,forced:!ei,sham:!ei},{Symbol:Vh}),Ki(So(ed),(function(e){var t=br.Symbol||(br.Symbol={});cr(t,e)||jh(t,e,{value:Mh.f(e)})})),kr({target:"Symbol",stat:!0,forced:!ei},{for:function(e){if(e=String(e),cr(Zh,e))return Zh[e];var t=Vh(e);return Zh[e]=t,$h[t]=e,t},keyFor:function(e){if(!od(e))throw TypeError(e+" is not a symbol");if(cr($h,e))return $h[e]},useSetter:function(){nd=!0},useSimple:function(){nd=!1}}),kr({target:"Object",stat:!0,forced:!ei,sham:!zn},{create:function(e,t){return void 0===t?xo(e):sd(xo(e),t)},defineProperty:ad,defineProperties:sd,getOwnPropertyDescriptor:ud}),kr({target:"Object",stat:!0,forced:!ei},{getOwnPropertyNames:ld,getOwnPropertySymbols:hd}),kr({target:"Object",stat:!0,forced:Wn((function(){Na.f(1)}))},{getOwnPropertySymbols:function(e){return Na.f(Gr(e))}}),Kh){var dd=!ei||Wn((function(){var e=Vh();return"[null]"!=Kh([e])||"{}"!=Kh({a:e})||"{}"!=Kh(Object(e))}));kr({target:"JSON",stat:!0,forced:dd},{stringify:function(e,t,n){for(var r,i=[e],o=1;arguments.length>o;)i.push(arguments[o++]);if(r=t,(or(t)||void 0!==e)&&!od(e))return Qr(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!od(t))return t}),i[1]=t,Kh.apply(null,i)}})}Vh.prototype[Fh]||Sr(Vh.prototype,Fh,Vh.prototype.valueOf),Gi(Vh,"Symbol"),Ei[Uh]=!0;var fd,pd=br.Object.getOwnPropertySymbols,gd=function(e,t,n){return t in e?Ga(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e};!function(e){e[e.CHOOSE_SERVER=11]="CHOOSE_SERVER",e[e.CLOUD_PROXY=18]="CLOUD_PROXY",e[e.CLOUD_PROXY_5=20]="CLOUD_PROXY_5"}(fd||(fd={}));var Ad=mi("Array").values,vd=Array.prototype,md={DOMTokenList:!0,NodeList:!0},yd=function(e){var t=e.values;return e===vd||e instanceof Array&&t===vd.values||md.hasOwnProperty(Di(e))?Ad:t},bd=function(e){var t=Gr(e),n="function"==typeof this?this:Array,r=arguments.length,i=1<r?arguments[1]:void 0,o=void 0!==i,a=0,s=Pi(t);if(o&&(i=Er(i,2<r?arguments[2]:void 0,2)),null==s||n==Array&&Ri(s))for(n=new n(r=Wr(t.length));r>a;a++)zr(n,a,o?i(t[a],a):t[a]);else for(r=(t=s.call(t)).next,n=new n;!(s=r.call(t)).done;a++)zr(n,a,o?Bi(t,i,[s.value,a],!0):s.value);return n.length=a,n},_d=!ps((function(e){Array.from(e)}));kr({target:"Array",stat:!0,forced:_d},{from:bd});var Ed=br.Array.from;class wd{constructor(){this._events={},this.addListener=this.on}getListeners(e){var t;return this._events[e]?Sc(t=this._events[e]).call(t,(e=>e.listener)):[]}on(e,t){this._events[e]||(this._events[e]=[]),e=this._events[e],-1===this._indexOfListener(e,t)&&e.push({listener:t,once:!1})}once(e,t){this._events[e]||(this._events[e]=[]),e=this._events[e],-1===this._indexOfListener(e,t)&&e.push({listener:t,once:!0})}off(e,t){if(this._events[e]){var n=this._events[e];-1!==(t=this._indexOfListener(n,t))&&Nc(n).call(n,t,1),0===this._events[e].length&&delete this._events[e]}}removeAllListeners(e){e?delete this._events[e]:this._events={}}emit(e,...t){var n;this._events[e]||(this._events[e]=[]);let r=Sc(n=this._events[e]).call(n,(e=>e));for(n=0;n<r.length;n+=1){let i=r[n];i.once&&this.off(e,i.listener),i.listener.apply(this,t||[])}}_indexOfListener(e,t){let n=e.length;for(;n--;)if(e[n].listener===t)return n;return-1}}let Id=0,Cd=0,Sd=new class extends wd{constructor(){super(),this._moduleName="network-indicator",this._networkState=Ih.ONLINE,window.addEventListener("online",(()=>{this.networkState=Ih.ONLINE})),window.addEventListener("offline",(()=>{this.networkState=Ih.OFFLINE}))}set networkState(e){Tl.info("[".concat(this._moduleName,"]")+"network state changed, "+this._networkState+" -> "+e),this.emit(Ch.NETWORK_STATE_CHANGE,e,this._networkState),e===Ih.ONLINE?this.emit(Ch.ONLINE):e===Ih.OFFLINE&&(this.onlineWaiter=new wc((e=>{this.once(Ch.ONLINE,(()=>{this.onlineWaiter=void 0,e(Ih.ONLINE)}))})),this.emit(Ch.OFFLINE)),this._networkState=e}get networkState(){return this._networkState}},Td={timeout:500,timeoutFactor:1.5,maxRetryCount:1/0,maxRetryTimeout:1e4},Rd=new class{constructor(){var e,t;this.baseInfoMap=new pa,this.clientList=Uu,this.keyEventUploadPendingItems=[],this.normalEventUploadPendingItems=[],this.apiInvokeUploadPendingItems=[],this.apiInvokeCount=0,this.ltsList=[],this.lastSendNormalEventTime=tl(),this.customReportCount=0,this.eventUploadTimer=window.setInterval(Zc(e=this.doSend).call(e,this),Mu.EVENT_REPORT_SEND_INTERVAL),this.setSessionIdTimer=window.setInterval(Zc(t=this.appendSessionId).call(t,this),Mu.EVENT_REPORT_SEND_INTERVAL)}reportApiInvoke(e,t,n){t.timeout=t.timeout||6e4,t.reportResult=void 0===t.reportResult||t.reportResult;const r=tl(),i=this.apiInvokeCount+=1,o=()=>({tag:t.tag,invokeId:i,sid:e,name:t.name,apiInvokeTime:r,options:t.options,states:t.states||null}),a=!!Mu.SHOW_REPORT_INVOKER_LOG;a&&Tl.info("".concat(t.name," start"),t.options);let s=!1;xt(t.timeout).then((()=>{s||(this.sendApiInvoke(Ze({},o(),{error:Yu.API_INVOKE_TIMEOUT,success:!1})),Tl.debug("".concat(t.name," timeout")))}));const c=new Rl(Yu.UNEXPECTED_ERROR,"".concat(t.name,": this api invoke is end"));return{onSuccess:e=>{const r=()=>{if(s)throw c;return s=!0,this.sendApiInvoke(Ze({},o(),{success:!0},t.reportResult&&{result:e})),a&&Tl.info("".concat(t.name," onSuccess")),e};return n?ff(r,t.name+"Success",n,(()=>s=!0)):r()},onError:e=>{const r=()=>{if(s)throw e;s=!0,this.sendApiInvoke(Ze({},o(),{success:!1,error:e.toString()})),a&&Tl.info("".concat(t.name," onFailure"),e.toString())};return n?ff(r,t.name+"Error",n,(()=>s=!0)):r()}}}sessionInit(e,t){if(!this.baseInfoMap.has(e)){var n=tl();(e=this.createBaseInfo(e,n)).cname=t.cname;var r=La({},{willUploadConsoleLog:Mu.UPLOAD_LOG,maxTouchPoints:navigator.maxTouchPoints,areaVersion:Nu?"global":"oversea",areas:Mu.AREAS&&Mu.AREAS.join(",")},t.extend),i=tl();t=Ze({},e,{eventType:xl.SESSION_INIT,appid:t.appid,browser:navigator.userAgent,build:"v4.7.3-0-g0eb931c7(11/16/2021, 7:57:58 PM)",lts:i,elapse:i-n,extend:Fr(r),mode:t.mode,process:Mu.PROCESS_ID,success:!0,version:ku}),this.send({type:Dl.SESSION,data:t},!0)}}joinChooseServer(e,t){if(e=this.baseInfoMap.get(e)){var n=e.info,r=tl();t=Ze({},n,{eventType:xl.JOIN_CHOOSE_SERVER,lts:r,eventElapse:r-t.lts,chooseServerAddr:t.csAddr,errorCode:t.ec,elapse:r-e.startTime,success:t.succ,chooseServerAddrList:Fr(t.serverList),uid:t.uid?Xa(t.uid):null,cid:t.cid?Xa(t.cid):null,chooseServerIp:t.csIp||"",opid:t.opid,unilbsServerIds:t.unilbsServerIds,extend:t.extend||void 0}),this.send({type:Dl.JOIN_CHOOSE_SERVER,data:t},!0)}}reqUserAccount(e,t){if(e=this.baseInfoMap.get(e)){var n=e.info,r=tl();t=Ze({},n,{eventType:xl.REQ_USER_ACCOUNT,lts:r,success:t.success,serverAddress:t.serverAddr,stringUid:t.stringUid,uid:t.uid,errorCode:t.errorCode,elapse:r-e.startTime,eventElapse:r-t.lts,extend:Fr(t.extend)}),this.send({type:Dl.REQ_USER_ACCOUNT,data:t},!0)}}joinGateway(e,t){if(e=this.baseInfoMap.get(e)){var n=e.info;t.vid&&(n.vid=t.vid),n.uid=t.uid,n.cid=t.cid;var r=tl();n=Ze({},n,{eventType:xl.JOIN_GATEWAY,lts:r,gatewayAddr:t.addr,success:t.succ,errorCode:t.ec,elapse:r-e.startTime,eventElapse:r-t.lts}),t.succ&&(e.lastJoinSuccessTime=r),this.send({type:Dl.JOIN_GATEWAT,data:n},!0)}}joinChannelTimeout(e,t){if(e=this.baseInfoMap.get(e)){var n=tl();t=Ze({},e.info,{lts:n,timeout:t,elapse:n-e.startTime}),this.send({type:Dl.JOIN_CHANNEL_TIMEOUT,data:t},!0)}}publish(e,t){if(e=this.baseInfoMap.get(e)){var n=e.info,r=tl();t=Ze({},n,{eventType:xl.PUBLISH,lts:r,eventElapse:r-t.lts,elapse:r-e.startTime,success:t.succ,errorCode:t.ec,videoName:t.videoName,audioName:t.audioName,screenName:t.screenName,screenshare:t.screenshare,audio:t.audio,video:t.video,p2pid:t.p2pid,publishRequestid:t.publishRequestid}),this.send({type:Dl.PUBLISH,data:t},!0)}}subscribe(e,t){if(e=this.baseInfoMap.get(e)){var n=e.info,r=tl();e=Ze({},n,{eventType:xl.SUBSCRIBE,lts:r,eventElapse:r-t.lts,elapse:r-e.startTime,success:t.succ,errorCode:t.ec,video:t.video,audio:t.audio,subscribeRequestid:t.subscribeRequestid,p2pid:t.p2pid}),"string"==typeof t.peerid?e.peerSuid=t.peerid:e.peer=t.peerid,this.send({type:Dl.SUBSCRIBE,data:e},!0)}}firstRemoteFrame(e,t,n,r){if(e=this.baseInfoMap.get(e)){var i=e.info,o=tl();t=Ze({},i,{},r,{elapse:o-e.startTime,eventType:t,lts:o}),this.send({type:n,data:t},!0)}}onGatewayStream(e,t,n,r){(e=this.baseInfoMap.get(e))&&(t=Ze({},e.info,{},r,{eventType:t,lts:tl()}),this.send({type:n,data:t},!0))}streamSwitch(e,t){if(e=this.baseInfoMap.get(e)){var n=e.info,r=tl();t=Ze({},n,{eventType:xl.STREAM_SWITCH,lts:r,isDual:t.isdual,elapse:r-e.startTime,success:t.succ}),this.send({type:Dl.STREAM_SWITCH,data:t},!0)}}requestProxyAppCenter(e,t){if(e=this.baseInfoMap.get(e)){var n=e.info,r=tl();t=Ze({},n,{eventType:xl.REQUEST_PROXY_APPCENTER,lts:r,eventElapse:r-t.lts,elapse:r-e.startTime,APAddr:t.APAddr,workerManagerList:t.workerManagerList,response:t.response,errorCode:t.ec,success:t.succ}),this.send({type:Dl.REQUEST_PROXY_APPCENTER,data:t},!0)}}requestProxyWorkerManager(e,t){if(e=this.baseInfoMap.get(e)){var n=e.info,r=tl();t=Ze({},n,{eventType:xl.REQUEST_PROXY_WORKER_MANAGER,lts:r,eventElapse:r-t.lts,elapse:r-e.startTime,workerManagerAddr:t.workerManagerAddr,response:t.response,errorCode:t.ec,success:t.succ}),this.send({type:Dl.REQUEST_PROXY_WORKER_MANAGER,data:t},!0)}}setProxyServer(e){(this.proxyServer=e)?Tl.debug("reportProxyServerurl: ".concat(e)):Tl.debug("disable reportProxyServerurl: ".concat(e))}peerPublishStatus(e,t){if(e=this.baseInfoMap.get(e)){var n=e.info,r=tl();t=Ze({},n,{subscribeElapse:t.subscribeElapse,peer:t.peer,peerPublishDuration:Math.max(t.audioPublishDuration,t.videoPublishDuration),audiotag:0<t.audioPublishDuration?1:-1,videotag:0<t.videoPublishDuration?1:-1,lts:r,elapse:r-e.startTime,joinChannelSuccessElapse:r-(e.lastJoinSuccessTime||r)}),this.send({type:Dl.PEER_PUBLISH_STATUS,data:t},!0)}}workerEvent(e,t){if(e=this.baseInfoMap.get(e)){var n=e.info,r=tl();t=function(e,t,n){const r=e[t];if(!r||"string"!=typeof r)return[e];e[t]="";const i=Nt(Fr(e));let o=0;const a=[];let s=0;for(let c=0;c<r.length;c++)s+=127>=r.charCodeAt(c)?1:3,s<=n-i||(a[a.length]=Ot({},e,{[t]:r.substring(o,c)}),o=c,s=127>=r.charCodeAt(c)?1:3);return o!==r.length-1&&(a[a.length]=Ot({},e,{[t]:r.substring(o)})),a}(Ze({},n,{},t,{elapse:r-e.startTime,lts:r,productType:"WebRTC"}),"payload",1300),Oa(t).call(t,(e=>this.send({type:Dl.WORKER_EVENT,data:e},!0)))}}apworkerEvent(e,t){if(e=this.baseInfoMap.get(e)){var n=e.info,r=tl();t=Ze({},n,{},t,{elapse:r-e.startTime,lts:r}),this.send({type:Dl.AP_WORKER_EVENT,data:t},!0)}}joinWebProxyAP(e,t){if(e=this.baseInfoMap.get(e)){var n=e.info,r=tl();t=Ze({},n,{},t,{elapse:r-e.startTime,lts:r,extend:t.extend||void 0}),this.send({type:Dl.JOIN_WEB_PROXY_AP,data:t},!0)}}WebSocketQuit(e,t){if(e=this.baseInfoMap.get(e)){var n=e.info,r=tl();t=Ze({},n,{},t,{elapse:r-e.startTime,lts:r}),this.send({type:Dl.WEBSOCKET_QUIT,data:t},!0)}}async sendCustomReportMessage(e,t){if(this.customReportCount+=t.length,this.customReportCount>Mu.CUSTOM_REPORT_LIMIT)throw new Rl(Yu.CUSTOM_REPORT_FREQUENCY_TOO_HIGH);this.customReportCounterTimer||(this.customReportCounterTimer=window.setInterval((()=>{this.customReportCount=0}),5e3)),t=Sc(t).call(t,(t=>({type:Dl.USER_ANALYTICS,data:Ze({sid:e},t)}))),t={msgType:"EventMessages",sentTs:Math.round(tl()/1e3),payloads:Sc(t).call(t,(e=>Fr(e)))};try{await this.postDataToStatsCollector(t)}catch(e){throw Tl.error("send custom report message failed",e.toString()),new Rl(Yu.CUSTOM_REPORT_SEND_FAILED,e.message)}}sendApiInvoke(e){var t=Mu.NOT_REPORT_EVENT;if(e.tag&&ru(t)&&ru(t).call(t,e.tag))return!1;if(null===e.sid)return this.apiInvokeUploadPendingItems.push(e),!1;if(!(t=this.baseInfoMap.get(e.sid)))return this.apiInvokeUploadPendingItems.push(e),!1;const{cname:n,uid:r,cid:i}=t.info;return e.lts=e.lts||tl(),e={invokeId:e.invokeId,sid:e.sid,cname:n,cid:i,uid:r,lts:e.lts,success:e.success,elapse:e.lts-t.startTime,execElapse:e.lts-e.apiInvokeTime,apiName:e.name,options:e.options?Fr(e.options):void 0,execStates:e.states?Fr(e.states):void 0,execResult:e.result?Fr(e.result):void 0,errorCode:e.error?Fr(e.error):void 0},this.send({type:Dl.API_INVOKE,data:e},!1),!0}appendSessionId(){var e;Oa(e=this.clientList).call(e,(e=>{if(e._sessionId){const t=this.apiInvokeUploadPendingItems.length;for(let n=0;n<t;n++){const t=this.apiInvokeUploadPendingItems.shift();t&&(t.sid=e._sessionId,this.sendApiInvoke(La({},t)))}}}))}send(e,t){if(t)return this.keyEventUploadPendingItems.push(e),void this.sendItems(this.keyEventUploadPendingItems,!0);var n;this.normalEventUploadPendingItems.push(e),this.normalEventUploadPendingItems.length>Mu.NORMAL_EVENT_QUEUE_CAPACITY&&Nc(n=this.normalEventUploadPendingItems).call(n,0,1),10<=this.normalEventUploadPendingItems.length&&this.sendItems(this.normalEventUploadPendingItems,!1)}doSend(){0<this.keyEventUploadPendingItems.length&&this.sendItems(this.keyEventUploadPendingItems,!0),0<this.normalEventUploadPendingItems.length&&5e3<=tl()-this.lastSendNormalEventTime&&this.sendItems(this.normalEventUploadPendingItems,!1)}sendItems(e,t){const n=[];for(var r=[];e.length;){const t=e.shift();20>n.length?n.push(t):r.push(t)}e.push(...r);for(const e of[...n]){var i,o;-1!==Mc(i=this.ltsList).call(i,e.data.lts)?(e.data.lts=this.ltsList[this.ltsList.length-1]+1,this.ltsList.push(e.data.lts)):(this.ltsList.push(e.data.lts),zu(o=this.ltsList).call(o,((e,t)=>e-t)))}return t||(this.lastSendNormalEventTime=tl()),r={msgType:"EventMessages",sentTs:Math.round(tl()/1e3),payloads:Sc(n).call(n,(e=>Fr(e))),vid:(e=>(e=e&&e.data.sid&&this.baseInfoMap.get(e.data.sid))&&e.info.vid&&+e.info.vid||0)(n[0])},n.length&&this.postDataToStatsCollector(r).catch((e=>n=>{var r,i,o;Mu.EVENT_REPORT_RETRY&&(t?this.keyEventUploadPendingItems=_i(r=this.keyEventUploadPendingItems).call(r,e):(this.normalEventUploadPendingItems=_i(i=this.normalEventUploadPendingItems).call(i,e),this.normalEventUploadPendingItems.length>Mu.NORMAL_EVENT_QUEUE_CAPACITY&&(Nc(o=this.normalEventUploadPendingItems).call(o,0,this.normalEventUploadPendingItems.length-Mu.NORMAL_EVENT_QUEUE_CAPACITY),Tl.warning("report: drop normal events"))))})(n)),e}async postDataToStatsCollector(e,t=!1){var n,r,i;Sd.networkState===Ih.OFFLINE&&await wc.race([Sd.onlineWaiter,xt(2*Td.maxRetryTimeout)]);const o=t?"/events/proto-raws":"/events/messages";let a=this.url||(this.proxyServer?_i(n=_i(r="https://".concat(this.proxyServer,"/rs/?h=")).call(r,Mu.EVENT_REPORT_DOMAIN,"&p=6443&d=")).call(n,o):_i(i="https://".concat(Mu.EVENT_REPORT_DOMAIN,":6443")).call(i,o));for(n=0;2>n;n+=1){var s,c,u;1===n&&(a=this.backupUrl||(this.proxyServer?_i(s=_i(c="https://".concat(this.proxyServer,"/rs/?h=")).call(c,Mu.EVENT_REPORT_BACKUP_DOMAIN,"&p=6443&d=")).call(s,o):_i(u="https://".concat(Mu.EVENT_REPORT_BACKUP_DOMAIN,":6443")).call(u,o)));try{t?await Ye(a,{timeout:1e4,data:e}):await ze(a,{timeout:1e4,data:e})}catch(e){if(1===n)throw e;continue}break}}createBaseInfo(e,t){const n=La({},Nl);return n.sid=e,this.baseInfoMap.set(e,{info:n,startTime:t}),n}};class kd extends wd{constructor(e,t){super(),this._hints=[],this._isClosed=!1,this._ID=t||Lt(8,"track-"),this._mediaStreamTrack=this._originMediaStreamTrack=e,ru(Fu).call(Fu,this)||Fu.push(this)}toString(){return this._ID}getTrackId(){return this._ID}getMediaStreamTrack(e){return e||(e=Rd.reportApiInvoke(null,{name:Pl.GET_MEDIA_STREAM_TRACK,options:[],tag:Bl.TRACER}),this._mediaStreamTrack&&"string"==typeof this._mediaStreamTrack.label?e.onSuccess(this._mediaStreamTrack.label):e.onSuccess("")),this._mediaStreamTrack}close(){this._isClosed=!0;{let e=Mc(Fu).call(Fu,this);-1!==e&&Nc(Fu).call(Fu,e,1)}}}let Od=1;class Nd{constructor(e){var t;this.lockingPromise=wc.resolve(),this.locks=0,this.name="",this.lockId=Od++,e&&(this.name=e),Tl.debug(_i(t="[lock-".concat(this.name,"-")).call(t,this.lockId,"] is created."))}get isLocked(){return 0<this.locks}lock(){var e,t;let n;this.locks+=1,Tl.debug(_i(e=_i(t="[lock-".concat(this.name,"-")).call(t,this.lockId,"] is locked, current queue ")).call(e,this.locks,"."));let r=new wc((e=>{n=()=>{var t,n;--this.locks,Tl.debug(_i(t=_i(n="[lock-".concat(this.name,"-")).call(n,this.lockId,"] is not locked, current queue ")).call(t,this.locks,".")),e()}}));return e=this.lockingPromise.then((()=>n)),this.lockingPromise=this.lockingPromise.then((()=>r)),e}}class xd extends kd{constructor(e,t){super(e,t),this._enabled=!0,this._isClosed=this._muted=!1,this._trackProcessors=[],this._handleTrackEnded=()=>{this.onTrackEnded()},this._enabledMutex=new Nd("".concat(t)),e.addEventListener("ended",this._handleTrackEnded)}get muted(){return this._muted}get enabled(){return this._enabled}getTrackLabel(){return this._originMediaStreamTrack.label}close(){var e;this._isClosed||(this.stop(),Oa(e=this._trackProcessors).call(e,(e=>e.destroy())),this._trackProcessors=[],this._originMediaStreamTrack.stop(),this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack.stop(),this._mediaStreamTrack=null),this._originMediaStreamTrack=null,this._enabledMutex=null,Tl.debug("[".concat(this.getTrackId(),"] close")),this.emit(Ah.NEED_CLOSE),super.close())}async _registerTrackProcessor(e){var t;if(-1===Mc(t=this._trackProcessors).call(t,e)){var n=this._trackProcessors[this._trackProcessors.length-1];this._trackProcessors.push(e),e.onOutputChange=async()=>{this._mediaStreamTrack=e.output||this._originMediaStreamTrack,this._updatePlayerSource(),await jt(this,Ah.NEED_REPLACE_TRACK,this._mediaStreamTrack)},n?(n.onOutputChange=async()=>{n.output&&await e.setInput(n.output)},await e.setInput(n.output||n.input||this._originMediaStreamTrack)):await e.setInput(this._originMediaStreamTrack)}}_getOutputFromProcessors(){if(0===this._trackProcessors.length)return this._originMediaStreamTrack;let e=this._trackProcessors[this._trackProcessors.length-1];return e.output||e.input||this._originMediaStreamTrack}async _updateOriginMediaStreamTrack(e,t){e!==this._originMediaStreamTrack&&(this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),t&&this._originMediaStreamTrack.stop(),e.addEventListener("ended",this._handleTrackEnded),this._originMediaStreamTrack=e,0<this._trackProcessors.length?(await this._trackProcessors[0].setInput(e),this._mediaStreamTrack=this._getOutputFromProcessors()):this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await jt(this,Ah.NEED_REPLACE_TRACK,this._mediaStreamTrack))}_getDefaultPlayerConfig(){return{}}onTrackEnded(){Tl.debug("[".concat(this.getTrackId(),"] track ended")),this.emit(mh.TRACK_ENDED)}stateCheck(e,t){var n,r,i;if(Tl.debug(_i(n=_i(r=_i(i="check track state, [muted: ".concat(this._muted,", enabled: ")).call(i,this._enabled,"] to [")).call(r,e,": ")).call(n,t,"]")),"muted"===e&&!Th.webAudioMediaStreamDest)throw new Rl(Yu.NOT_SUPPORTED,"current environment does not support set mute").print();if(Ne(t,e),this._enabled&&this._muted&&"enabled"===e&&!1===t)throw new Rl(Yu.TRACK_STATE_UNREACHABLE,"cannot set enabled while the track is muted").print();if(!this._enabled&&!this._muted&&"muted"===e&&!0===t)throw new Rl(Yu.TRACK_STATE_UNREACHABLE,"cannot set muted while the track is disabled").print()}}var Dd;!function(e){e.IOS_15_INTERRUPTION_START="ios15-interruption-start",e.IOS_15_INTERRUPTION_END="ios15-interruption-end",e.IOS_INTERRUPTION_START="ios-interruption-start",e.IOS_INTERRUPTION_END="ios-interruption-end"}(Dd||(Dd={}));let Ld=window.AudioContext||window.webkitAudioContext,Pd=null,Bd=new class extends wd{constructor(){super(...arguments),this.onLocalAudioTrackMute=()=>{Tl.info("ios15-interruption-start"),this.emit(Dd.IOS_15_INTERRUPTION_START)},this.onLocalAudioTrackUnmute=async()=>{Tl.info("ios15-interruption-end"),"running"!==this.curState||this.duringInterruption?Tl.info("ios15-interruption-end-canceled"):(Pd&&await Pd.suspend(),this.emit(Dd.IOS_15_INTERRUPTION_END))}}get duringInterruption(){return"running"===this.prevState&&"interrupted"===this.curState}bindInterruptDetectorTrack(e){Tl.debug("webaudio bindInterruptDetectorTrack ".concat(e.getTrackId())),this.interruptDetectorTrack||(this.interruptDetectorTrack=e,this.interruptDetectorTrack._mediaStreamTrack.onmute=this.onLocalAudioTrackMute,this.interruptDetectorTrack._mediaStreamTrack.onunmute=this.onLocalAudioTrackUnmute)}unbindInterruptDetectorTrack(e){Tl.debug("webaudio unbindInterruptDetectorTrack ".concat(e.getTrackId())),this.interruptDetectorTrack&&this.interruptDetectorTrack===e&&(this.interruptDetectorTrack._mediaStreamTrack&&(this.interruptDetectorTrack._mediaStreamTrack.onmute=null,this.interruptDetectorTrack._mediaStreamTrack.onunmute=null),this.interruptDetectorTrack=void 0)}},Md=null;class jd extends wd{constructor(){super(),this.isPlayed=!1,this.audioOutputLevel=0,this.isNoAudioInput=this.isDestroyed=!1,this._noAudioInputCount=0,this.context=nt(),this.playNode=this.context.destination,this.outputNode=this.context.createGain(),rt(this.outputNode),this.analyserNode=this.context.createAnalyser(),this.analyserNode.smoothingTimeConstant=.4,this.analyserNode.fftSize=2048}startGetAudioBuffer(e){this.audioBufferNode||(this.audioBufferNode=this.context.createScriptProcessor(e),this.outputNode.connect(this.audioBufferNode),this.audioBufferNode.connect(this.context.destination),this.audioBufferNode.onaudioprocess=e=>{this.emit(Zl.ON_AUDIO_BUFFER,function(e){for(let t=0;t<e.outputBuffer.numberOfChannels;t+=1){let n=e.outputBuffer.getChannelData(t);for(let e=0;e<n.length;e+=1)n[e]=0}return e.inputBuffer}(e))})}stopGetAudioBuffer(){this.audioBufferNode&&(this.audioBufferNode.onaudioprocess=null,this.outputNode.disconnect(this.audioBufferNode),this.audioBufferNode=void 0)}createOutputTrack(){if(!Th.webAudioMediaStreamDest)throw new Rl(Yu.NOT_SUPPORTED,"your browser is not support audio processor");return this.destNode&&this.outputTrack||(this.destNode=this.context.createMediaStreamDestination(),this.outputNode.connect(this.destNode),this.outputTrack=this.destNode.stream.getAudioTracks()[0]),this.outputTrack}play(e){"running"!==this.context.state&&qt((()=>{Bd.emit("autoplay-failed")})),this.isPlayed=!0,this.playNode=e||this.context.destination,this.outputNode.connect(this.playNode)}stop(){if(this.isPlayed)try{this.outputNode.disconnect(this.playNode)}catch(e){}this.isPlayed=!1}getAccurateVolumeLevel(){if(!this.context||re()||se()||"running"!==this.context.state&&this.context.resume(),!this.analyserNode)return 0;let e=new Uint8Array(this.analyserNode.frequencyBinCount);this.analyserNode.getByteFrequencyData(e);let t=0;for(let n=0;n<e.length;n++)t+=64>n?Math.abs(10*e[n]):Math.abs(6*e[n]/15);return t/e.length/255}async checkHasAudioInput(e=0){if(5<e)return this.isNoAudioInput=!0,this.onNoAudioInput&&this.onNoAudioInput(),!1;if(re()||se()?"suspended"===this.context.state&&this.context.resume():"running"!==this.context.state&&this.context.resume(),!this.analyserNode)return!1;let t=new Uint8Array(this.analyserNode.frequencyBinCount);this.analyserNode.getByteFrequencyData(t);let n=!1;for(let e=0;e<t.length;e++)0!==t[e]&&(n=!0);return n?(this.isNoAudioInput=!1,!0):(await xt(200),await this.checkHasAudioInput(e?e+1:1)&&n)}getAudioVolume(){return this.outputNode.gain.value}setVolume(e){this.outputNode.gain.setValueAtTime(e,this.context.currentTime)}setMute(e){e?(this.disconnect(),this.audioOutputLevel=0):this.connect()}destroy(){this.disconnect(),this.stop(),this.isDestroyed=!0,this.onNoAudioInput=void 0}disconnect(){this.sourceNode&&this.sourceNode.disconnect(),this.outputNode&&this.outputNode.disconnect()}connect(){this.sourceNode&&this.sourceNode.connect(this.outputNode),this.outputNode.connect(this.analyserNode)}}class Ud extends jd{constructor(e,t){if(super(),this.isCurrentTrackCloned=!1,this.isRemoteTrack=!1,this.rebuildWebAudio=async()=>{if(Tl.debug("ready to rebuild web audio, state:",this.context.state),this.isNoAudioInput&&await this.checkHasAudioInput(),!this.isNoAudioInput||this.isDestroyed)return document.body.removeEventListener("click",this.rebuildWebAudio,!0),void Tl.debug("rebuild web audio success, current volume status",this.getAccurateVolumeLevel());this.context.resume().then((()=>Tl.info("resume success"))),Tl.debug("rebuild web audio because of ios 12 bugs"),this.disconnect();var e=this.track;this.track=this.track.clone(),this.isCurrentTrackCloned?e.stop():this.isCurrentTrackCloned=!0,e=new MediaStream([this.track]),this.sourceNode=this.context.createMediaStreamSource(e),rt(this.sourceNode),this.analyserNode=this.context.createAnalyser();let t=this.outputNode.gain.value;this.outputNode=this.context.createGain(),this.outputNode.gain.setValueAtTime(t,this.context.currentTime),rt(this.outputNode),this.connect(),this.audioElement.srcObject=e,this.isPlayed&&this.play(this.playNode),this.checkHasAudioInput()},"audio"!==e.kind)throw new Rl(Yu.UNEXPECTED_ERROR);this.track=e,e=new MediaStream([this.track]),this.isRemoteTrack=!!t,this.sourceNode=this.context.createMediaStreamSource(e),rt(this.sourceNode),this.connect(),this.audioElement=document.createElement("audio"),this.audioElement.srcObject=e,e=J(),t&&e.os===gu.IOS&&15>Number(e.osVersion&&e.osVersion.split(".")[0])&&(Bd.on("state-change",(()=>{"suspended"===this.context.state?document.body.addEventListener("click",this.rebuildWebAudio,!0):"running"===this.context.state&&this.rebuildWebAudio()})),this.checkHasAudioInput().then((e=>{e||document.body.addEventListener("click",this.rebuildWebAudio,!0)})))}get isFreeze(){return!1}updateTrack(e){this.sourceNode.disconnect(),this.track=e,this.isCurrentTrackCloned=!1,e=new MediaStream([e]),this.sourceNode=this.context.createMediaStreamSource(e),rt(this.sourceNode),this.sourceNode.connect(this.outputNode),this.audioElement.srcObject=e}destroy(){this.audioElement.srcObject=null,this.audioElement.remove(),Bd.off("state-change",this.rebuildWebAudio),super.destroy()}}let Fd=null,Qd=new Nd("safari"),Gd=!1,qd=!1,Vd=new class extends wd{constructor(){super(),this._state=Ml.IDLE,this.lastAccessCameraPermission=this.lastAccessMicrophonePermission=this.isAccessCameraPermission=this.isAccessMicrophonePermission=!1,this.deviceInfoMap=new pa,this.init().then((()=>{var e;navigator.mediaDevices.addEventListener&&navigator.mediaDevices.addEventListener("devicechange",Zc(e=this.updateDevicesInfo).call(e,this)),window.setInterval((()=>J().name!==Au.WECHAT&&Mu.ENUMERATE_DEVICES_INTERVAL&&this.updateDevicesInfo()),6e4)})).catch((e=>Tl.error(e.toString())))}get state(){return this._state}set state(e){e!==this._state&&(this.emit(jl.STATE_CHANGE,e),this._state=e)}async enumerateDevices(e,t,n=!1){if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return new Rl(Yu.NOT_SUPPORTED,"enumerateDevices() not supported.").throw();var r=await navigator.mediaDevices.enumerateDevices();r=this.checkMediaDeviceInfoIsOk(r);let i=!this.isAccessMicrophonePermission&&e,o=!this.isAccessCameraPermission&&t;r.audio&&(i=!1),r.video&&(o=!1);let a=r=null,s=null;if(!n&&(i||o)){if(Qd.isLocked&&(Tl.debug("[device manager] wait GUM lock"),(await Qd.lock())(),Tl.debug("[device manager] GUM unlock")),Gd&&(i=!1,this.isAccessMicrophonePermission=!0),qd&&(o=!1,this.isAccessCameraPermission=!0),Tl.debug("[device manager] check media device permissions",e,t,i,o),i&&o){try{s=await navigator.mediaDevices.getUserMedia({audio:!0,video:!0})}catch(e){if((n=ht(e.name||e.code||e,e.message)).code===Yu.PERMISSION_DENIED)throw n;Tl.warning("getUserMedia failed in getDevices",n)}this.isAccessMicrophonePermission=this.isAccessCameraPermission=!0}else if(i){try{r=await navigator.mediaDevices.getUserMedia({audio:e})}catch(e){if((n=ht(e.name||e.code||e,e.message)).code===Yu.PERMISSION_DENIED)throw n;Tl.warning("getUserMedia failed in getDevices",n)}this.isAccessMicrophonePermission=!0}else if(o){try{a=await navigator.mediaDevices.getUserMedia({video:t})}catch(e){if((n=ht(e.name||e.code||e,e.message)).code===Yu.PERMISSION_DENIED)throw n;Tl.warning("getUserMedia failed in getDevices",n)}this.isAccessCameraPermission=!0}Tl.debug("[device manager] mic permission",e,"cam permission",t)}try{var c,u,l;const e=await navigator.mediaDevices.enumerateDevices();return r&&Oa(c=r.getTracks()).call(c,(e=>e.stop())),a&&Oa(u=a.getTracks()).call(u,(e=>e.stop())),s&&Oa(l=s.getTracks()).call(l,(e=>e.stop())),r=null,a=null,s=null,e}catch(e){var h,d,f;return r&&Oa(h=r.getTracks()).call(h,(e=>e.stop())),a&&Oa(d=a.getTracks()).call(d,(e=>e.stop())),s&&Oa(f=s.getTracks()).call(f,(e=>e.stop())),s=a=r=null,new Rl(Yu.ENUMERATE_DEVICES_FAILED,e.toString()).throw()}}async getRecordingDevices(e=!1){return e=await this.enumerateDevices(!0,!1,e),os(e).call(e,(e=>"audioinput"===e.kind))}async getCamerasDevices(e=!1){return e=await this.enumerateDevices(!1,!0,e),os(e).call(e,(e=>"videoinput"===e.kind))}async getSpeakers(e=!1){return e=await this.enumerateDevices(!0,!1,e),os(e).call(e,(e=>"audiooutput"===e.kind))}searchDeviceNameById(e){return(e=this.deviceInfoMap.get(e))?e.device.label||e.device.deviceId:null}searchDeviceIdByName(e){var t;let n=null;return Oa(t=this.deviceInfoMap).call(t,(t=>{t.device.label===e&&(n=t.device.deviceId)})),n}async getDeviceById(e){var t=await this.enumerateDevices(!0,!0,!0);if(!(t=Wc(t).call(t,(t=>t.deviceId===e))))throw new Rl(Yu.DEVICE_NOT_FOUND,"deviceId: ".concat(e));return t}async init(){this.state=Ml.INITING;try{await this.updateDevicesInfo(),this.state=Ml.INITEND}catch(e){throw Tl.warning("Device Detection functionality cannot start properly.",e.toString()),this.state=Ml.IDLE,("boolean"==typeof isSecureContext?isSecureContext:"https:"===location.protocol||"file:"===location.protocol||"localhost"===location.hostname||"127.0.0.1"===location.hostname||"::1"===location.hostname)||new Rl(Yu.WEB_SECURITY_RESTRICT,"Your context is limited by web security, please try using https protocol or localhost.").throw(),e}}async updateDevicesInfo(){var e;const t=await this.enumerateDevices(!0,!0,!0),n=tl(),r=[],i=this.checkMediaDeviceInfoIsOk(t);if(Oa(t).call(t,(e=>{if(e.deviceId){var t=this.deviceInfoMap.get(e.deviceId);if("ACTIVE"!==(t?t.state:"INACTIVE")){const t={initAt:n,updateAt:n,device:e,state:"ACTIVE"};this.deviceInfoMap.set(e.deviceId,t),r.push(t)}t&&(t.updateAt=n)}})),Oa(e=this.deviceInfoMap).call(e,((e,t)=>{"ACTIVE"===e.state&&e.updateAt!==n&&(e.state="INACTIVE",r.push(e))})),this.state!==Ml.INITEND)return i.audio&&(this.lastAccessMicrophonePermission=!0,this.isAccessMicrophonePermission=!0),void(i.video&&(this.lastAccessCameraPermission=!0,this.isAccessCameraPermission=!0));Oa(r).call(r,(e=>{switch(e.device.kind){case"audioinput":this.lastAccessMicrophonePermission&&this.isAccessMicrophonePermission&&this.emit(jl.RECORDING_DEVICE_CHANGED,e);break;case"videoinput":this.lastAccessCameraPermission&&this.isAccessCameraPermission&&this.emit(jl.CAMERA_DEVICE_CHANGED,e);break;case"audiooutput":this.lastAccessMicrophonePermission&&this.isAccessMicrophonePermission&&this.emit(jl.PLAYOUT_DEVICE_CHANGED,e)}})),i.audio&&(this.lastAccessMicrophonePermission=!0,this.isAccessMicrophonePermission=!0),i.video&&(this.lastAccessCameraPermission=!0,this.isAccessCameraPermission=!0)}checkMediaDeviceInfoIsOk(e){const t=os(e).call(e,(e=>"audioinput"===e.kind));e=os(e).call(e,(e=>"videoinput"===e.kind));const n={audio:!1,video:!1};for(const e of t)if(e.label&&e.deviceId){n.audio=!0;break}for(const t of e)if(t.label&&t.deviceId){n.video=!0;break}return n}};var Kd=mi("Array").entries,Hd=Array.prototype,Wd={DOMTokenList:!0,NodeList:!0},zd=function(e){var t=e.entries;return e===Hd||e instanceof Array&&t===Hd.entries||Wd.hasOwnProperty(Di(e))?Kd:t};let Yd=!1,Jd=new wd,Xd="play playing loadeddata canplay pause stalled suspend waiting abort emptied ended".split(" "),Zd=new class{constructor(){this.elementMap=new pa,this.elementStateMap=new pa,this.elementsNeedToResume=[],this.sinkIdMap=new pa,this.autoResumeAfterInterruption=()=>{var e,t;Oa(e=Ed(zd(t=this.elementMap).call(t))).call(e,(([e,t])=>{e=this.elementStateMap.get(e);const n=t.srcObject.getAudioTracks()[0];ie()?n&&"live"===n.readyState&&"running"===Bd.curState&&(Tl.debug("auto resume after interruption for iOS 15"),t.pause(),t.play()):e&&"pause"===e&&n&&"live"===n.readyState&&"running"===Bd.curState&&(Tl.debug("auto resume after interruption for iOS"),t.play())}))},this.autoResumeAfterInterruptionOnIOS15=()=>{var e,t;Oa(e=Ed(zd(t=this.elementMap).call(t))).call(e,(([,e])=>{const t=e.srcObject.getAudioTracks()[0];t&&"live"===t.readyState&&(Tl.debug("auto resume after interruption inside autoResumeAfterInterruptionOnIOS15"),e.pause(),e.play())}))},this.autoResumeAudioElement(),Bd.on(Dd.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),Bd.on(Dd.IOS_15_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15)}async setSinkID(e,t){const n=this.elementMap.get(e);if(this.sinkIdMap.set(e,t),n)try{await n.setSinkId(t)}catch(e){throw new Rl(Yu.PERMISSION_DENIED,"can not set sink id: "+e.toString())}}play(e,t,n){if(!this.elementMap.has(t)){var r=document.createElement("audio");r.autoplay=!0,r.srcObject=new MediaStream([e]),this.bindAudioElementEvents(t,r),this.elementMap.set(t,r),this.elementStateMap.set(t,Ol.INIT),this.setVolume(t,n),(e=this.sinkIdMap.get(t))&&r.setSinkId(e).catch((e=>{Tl.warning("[".concat(t,"] set sink id failed"),e.toString())})),(e=r.play())&&e.then&&e.catch((e=>{Tl.warning("audio element play warning",e.toString()),this.elementMap.has(t)&&"NotAllowedError"===e.name&&(Tl.warning("detected audio element autoplay failed"),this.elementsNeedToResume.push(r),qt((()=>{this.onAutoplayFailed&&this.onAutoplayFailed(),ft()})))}))}}updateTrack(e,t){(e=this.elementMap.get(e))&&(e.srcObject=new MediaStream([t]))}isPlaying(e){return this.elementMap.has(e)}setVolume(e,t){(e=this.elementMap.get(e))&&(t=Math.max(0,Math.min(100,t)),e.volume=t/100)}stop(e){var t,n;const r=this.elementMap.get(e);if(this.sinkIdMap.delete(e),r){var i=Mc(t=this.elementsNeedToResume).call(t,r);Nc(n=this.elementsNeedToResume).call(n,i,1),r.srcObject=null,r.remove(),this.elementMap.delete(e),this.elementStateMap.delete(e)}}bindAudioElementEvents(e,t){Oa(Xd).call(Xd,(n=>{t.addEventListener(n,(t=>{var n,r;const i=this.elementStateMap.get(e);t=t.type,Tl.debug(_i(n=_i(r="[".concat(e,"] audio-element-status change ")).call(r,i," => ")).call(n,t)),this.elementStateMap.set(e,t)}))}))}autoResumeAudioElement(){const e=()=>{var e;Oa(e=this.elementsNeedToResume).call(e,(e=>{e.play().then((e=>{Tl.debug("Auto resume audio element success")})).catch((e=>{Tl.warning("Auto resume audio element failed!",e)}))})),this.elementsNeedToResume=[]};new wc((e=>{document.body?e():window.addEventListener("load",(()=>e()))})).then((()=>{document.body.addEventListener("touchstart",e,!0),document.body.addEventListener("mousedown",e,!0)}))}};var $d=function(e,t,n,r){var i,o=arguments.length,a=3>o?t:null===r?r=ns(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;0<=s;s--)(i=e[s])&&(a=(3>o?i(a):3<o?i(t,n,a):i(t,n))||a);return 3<o&&a&&qa(t,n,a),a},ef=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};class tf extends xd{constructor(e,t,n){super(e,n),this.trackMediaType="audio",this._enabled=!0,this._volume=100,this._bypassWebAudio=this._useAudioElement=!1,this._encoderConfig=t,this._source=new Ud(e)}get isPlaying(){return this._useAudioElement?Zd.isPlaying(this.getTrackId()):this._source.isPlayed}setVolume(e){De(e,"volume",0,1e3);let t=Rd.reportApiInvoke(null,{tag:Bl.TRACER,name:Pl.LOCAL_AUDIO_TRACK_SET_VOLUME,options:[this.getTrackId(),e]},300);this._volume=e,this._source.setVolume(e/100),this._useAudioElement&&Zd.setVolume(this.getTrackId(),e);try{if(this._bypassWebAudio)return void Tl.debug("[".concat(this.getTrackId(),"] setVolume returned because no pass through WebAudio."));let e=this._source.createOutputTrack();this._mediaStreamTrack!==e&&(this._mediaStreamTrack=e,jt(this,Ah.NEED_REPLACE_TRACK,this._mediaStreamTrack).then((()=>{Tl.debug("[".concat(this.getTrackId(),"] replace web audio track success"))})).catch((e=>{Tl.warning("[".concat(this.getTrackId(),"] replace web audio track failed"),e)})))}catch(e){}t.onSuccess()}getVolumeLevel(){return this._source.getAccurateVolumeLevel()}async setPlaybackDevice(e){let t=Rd.reportApiInvoke(null,{tag:Bl.TRACER,name:Pl.REMOTE_AUDIO_SET_OUTPUT_DEVICE,options:[this.getTrackId(),e]});if(!this._useAudioElement)throw new Rl(Yu.NOT_SUPPORTED,"your browser does not support setting the audio output device");try{await Zd.setSinkID(this.getTrackId(),e)}catch(e){throw t.onError(e),e}t.onSuccess()}async setEnabled(e,t,n){var r;if(!n){if(e===this._enabled)return;this.stateCheck("enabled",e)}if(Tl.info("[".concat(this.getTrackId(),"] start setEnabled"),e),t=await this._enabledMutex.lock(),!e){this._originMediaStreamTrack.enabled=!1;try{await jt(this,Ah.NEED_REMOVE_TRACK,this)}catch(e){throw Tl.error("[".concat(this.getTrackId(),"] setEnabled to false error"),e.toString()),t(),e}return n||(this._enabled=!1),t()}this._originMediaStreamTrack.enabled=!0;try{await jt(this,Ah.NEED_ADD_TRACK,this)}catch(e){throw Tl.error("[".concat(this.getTrackId(),"] setEnabled to true error"),e.toString()),t(),e}Tl.info(_i(r="[".concat(this.getTrackId(),"] setEnabled to ")).call(r,e," success")),n||(this._enabled=!0),t()}async setMuted(e){var t,n;if(this._bypassWebAudio)return Tl.debug(_i(n="[".concat(this.getTrackId(),"] setMuted:")).call(n,e," fallback to setEnabled because no pass through.")),void await this.setEnabled(!e);if(e!==this._muted){if(this.stateCheck("muted",e),this._muted=e,J().name===Au.FIREFOX)return Tl.debug("[".concat(this.getTrackId(),"] firefox set mute fallback to set enabled")),void await this.setEnabled(!e,void 0,!0);this._mediaStreamTrack.enabled=!e,Tl.debug(_i(t="[".concat(this.getTrackId(),"] start set muted: ")).call(t,e)),await jt(this,Ah.SET_AUDIO_TRACK_MUTED,{track:this,muted:e})}}getStats(){return Vt((()=>{Tl.warning("[deprecated] LocalAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalAudioStats instead")}),"localAudioTrackGetStatsWarning"),Ut(this,Ah.GET_STATS)||At({},$l)}setAudioFrameCallback(e,t=4096){if(!e)return this._source.removeAllListeners(Zl.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(t),this._source.removeAllListeners(Zl.ON_AUDIO_BUFFER),this._source.on(Zl.ON_AUDIO_BUFFER,(t=>e(t)))}play(){let e=Rd.reportApiInvoke(null,{tag:Bl.TRACER,name:Pl.LOCAL_AUDIO_TRACK_PLAY,options:[this.getTrackId()]});Tl.debug("[".concat(this.getTrackId(),"] start audio playback")),this._useAudioElement?(Tl.debug("[".concat(this.getTrackId(),"] start audio playback in element")),Zd.play(this._mediaStreamTrack,this.getTrackId(),this._volume)):this._source.play(),e.onSuccess()}stop(){let e=Rd.reportApiInvoke(null,{tag:Bl.TRACER,name:Pl.LOCAL_AUDIO_TRACK_STOP,options:[this.getTrackId()]});Tl.debug("[".concat(this.getTrackId(),"] stop audio playback")),this._useAudioElement?Zd.stop(this.getTrackId()):this._source.stop(),e.onSuccess()}close(){super.close(),this._source.destroy()}_updatePlayerSource(){Tl.debug("[".concat(this.getTrackId(),"] update player source track")),this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&Zd.updateTrack(this.getTrackId(),this._mediaStreamTrack)}async _updateOriginMediaStreamTrack(e,t){this._originMediaStreamTrack!==e&&(this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),e.addEventListener("ended",this._handleTrackEnded),t&&this._originMediaStreamTrack.stop(),this._originMediaStreamTrack=e,this._source.updateTrack(this._originMediaStreamTrack),this._mediaStreamTrack!==this._source.outputTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await jt(this,Ah.NEED_REPLACE_TRACK,this._mediaStreamTrack)))}renewMediaStreamTrack(){return wc.resolve(void 0)}}$d([pt(),ef("design:type",Function),ef("design:paramtypes",[String]),ef("design:returntype",wc)],tf.prototype,"setPlaybackDevice",null),$d([pt(),ef("design:type",Function),ef("design:paramtypes",[Boolean,Object,Boolean]),ef("design:returntype",wc)],tf.prototype,"setEnabled",null),$d([pt(),et({report:Rd}),ef("design:type",Function),ef("design:paramtypes",[Boolean]),ef("design:returntype",wc)],tf.prototype,"setMuted",null),$d([pt(),ef("design:type",Function),ef("design:paramtypes",[]),ef("design:returntype",Object)],tf.prototype,"getStats",null),$d([pt(),ef("design:type",Function),ef("design:paramtypes",[Object,Number]),ef("design:returntype",void 0)],tf.prototype,"setAudioFrameCallback",null),$d([pt(),ef("design:type",Function),ef("design:paramtypes",[]),ef("design:returntype",void 0)],tf.prototype,"play",null),$d([pt(),ef("design:type",Function),ef("design:paramtypes",[]),ef("design:returntype",void 0)],tf.prototype,"stop",null);class nf extends tf{constructor(e,t,n,r){super(e,t.encoderConfig?fe(t.encoderConfig):{},r),this._deviceName="default",this._enabled=!0,this._config=t,this._constraints=n,this._deviceName=e.label,"boolean"==typeof t.bypassWebAudio&&(this._bypassWebAudio=t.bypassWebAudio),ie()&&Bd.bindInterruptDetectorTrack(this)}async setDevice(e){var t,n;let r=Rd.reportApiInvoke(null,{tag:Bl.TRACER,name:Pl.MIC_AUDIO_TRACK_SET_DEVICE,options:[this.getTrackId(),e]});if(Tl.info(_i(t="[".concat(this.getTrackId(),"] start set device to ")).call(t,e)),this._enabled)try{let n=await Vd.getDeviceById(e);(t={}).audio=At({},this._constraints),t.audio.deviceId={exact:e},this._originMediaStreamTrack.stop();let r=null;try{r=await ut(t,this.getTrackId())}catch(e){throw Tl.error("[".concat(this.getTrackId(),"] setDevice failed"),e.toString()),r=await ut({video:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(r.getAudioTracks()[0],!1),e}await this._updateOriginMediaStreamTrack(r.getAudioTracks()[0],!1),this._deviceName=n.label,this._config.microphoneId=e,this._constraints.deviceId={exact:e}}catch(e){throw r.onError(e),Tl.error("[".concat(this.getTrackId(),"] setDevice error"),e.toString()),e}else try{this._deviceName=(await Vd.getDeviceById(e)).label,this._config.microphoneId=e,this._constraints.deviceId={exact:e}}catch(e){throw r.onError(e),Tl.error("[".concat(this.getTrackId(),"] setDevice error"),e.toString()),e}r.onSuccess(),Tl.info(_i(n="[".concat(this.getTrackId(),"] set device to ")).call(n,e," success"))}async setEnabled(e,t,n){if(t)return Tl.debug("[".concat(this.getTrackId,"] setEnabled false (do not close microphone)")),await super.setEnabled(e);if(!n){if(e===this._enabled)return;this.stateCheck("enabled",e)}if(Tl.info("[".concat(this.getTrackId(),"] start setEnabled"),e),t=await this._enabledMutex.lock(),!e){this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop(),n||(this._enabled=!1);try{await jt(this,Ah.NEED_REMOVE_TRACK,this)}catch(e){throw Tl.error("[".concat(this.getTrackId(),"] setEnabled false failed"),e.toString()),t(),e}return void t()}e=At({},this._constraints);let r=Vd.searchDeviceIdByName(this._deviceName);r&&!e.deviceId&&(e.deviceId=r);try{let e=await ut({audio:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(e.getAudioTracks()[0],!1),await jt(this,Ah.NEED_ADD_TRACK,this)}catch(e){throw t(),Tl.error("[".concat(this.getTrackId(),"] setEnabled true failed"),e.toString()),e}n||(this._enabled=!0),Tl.info("[".concat(this.getTrackId(),"] setEnabled success")),t()}close(){super.close(),ie()&&Bd.unbindInterruptDetectorTrack(this)}onTrackEnded(){if((re()||se())&&this._enabled&&!this._isClosed&&Bd.duringInterruption){let e=async()=>{Bd.off(Dd.IOS_INTERRUPTION_END,e),this._enabled&&!this._isClosed&&(Tl.debug("[".concat(this.getTrackId(),"] try capture microphone media device for interrupted iOS device.")),await this.setEnabled(!1),await this.setEnabled(!0))};Bd.on(Dd.IOS_INTERRUPTION_END,e)}else Tl.debug("[".concat(this.getTrackId(),"] track ended")),this.emit(mh.TRACK_ENDED)}async renewMediaStreamTrack(){var e=At({},this._constraints);let t=Vd.searchDeviceIdByName(this._deviceName);t&&!e.deviceId&&(e.deviceId=t),e=await ut({audio:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(e.getAudioTracks()[0],!0)}}$d([pt(),ef("design:type",Function),ef("design:paramtypes",[String]),ef("design:returntype",wc)],nf.prototype,"setDevice",null),$d([pt(),ef("design:type",Function),ef("design:paramtypes",[Boolean,Boolean,Boolean]),ef("design:returntype",wc)],nf.prototype,"setEnabled",null);class rf extends tf{constructor(e,t,n,r){super(t.createOutputTrack(),n,r),this.source=e,this._bufferSource=t,this._bufferSource.on(Zl.AUDIO_SOURCE_STATE_CHANGE,(e=>{this.emit(mh.SOURCE_STATE_CHANGE,e)}));try{this._mediaStreamTrack=this._source.createOutputTrack()}catch(e){}}get currentState(){return this._bufferSource.currentState}get duration(){return this._bufferSource.duration}getCurrentTime(){return this._bufferSource.currentTime}startProcessAudioBuffer(e){let t=Rd.reportApiInvoke(null,{tag:Bl.TRACER,name:Pl.BUFFER_AUDIO_TRACK_START,options:[this.getTrackId(),e,this.duration]});e&&this._bufferSource.updateOptions(e),this._bufferSource.startProcessAudioBuffer(),t.onSuccess()}pauseProcessAudioBuffer(){let e=Rd.reportApiInvoke(null,{tag:Bl.TRACER,name:Pl.BUFFER_AUDIO_TRACK_PAUSE,options:[this.getTrackId()]});this._bufferSource.pauseProcessAudioBuffer(),e.onSuccess()}seekAudioBuffer(e){let t=Rd.reportApiInvoke(null,{tag:Bl.TRACER,name:Pl.BUFFER_AUDIO_TRACK_SEEK,options:[this.getTrackId()]});this._bufferSource.seekAudioBuffer(e),t.onSuccess()}resumeProcessAudioBuffer(){let e=Rd.reportApiInvoke(null,{tag:Bl.TRACER,name:Pl.BUFFER_AUDIO_TRACK_RESUME,options:[this.getTrackId()]});this._bufferSource.resumeProcessAudioBuffer(),e.onSuccess()}stopProcessAudioBuffer(){let e=Rd.reportApiInvoke(null,{tag:Bl.TRACER,name:Pl.BUFFER_AUDIO_TRACK_STOP,options:[this.getTrackId()]});this._bufferSource.stopProcessAudioBuffer(),e.onSuccess()}}$d([pt(),ef("design:type",Function),ef("design:paramtypes",[Object]),ef("design:returntype",void 0)],rf.prototype,"startProcessAudioBuffer",null),$d([pt(),ef("design:type",Function),ef("design:paramtypes",[]),ef("design:returntype",void 0)],rf.prototype,"pauseProcessAudioBuffer",null),$d([pt(),ef("design:type",Function),ef("design:paramtypes",[Number]),ef("design:returntype",void 0)],rf.prototype,"seekAudioBuffer",null),$d([pt(),ef("design:type",Function),ef("design:paramtypes",[]),ef("design:returntype",void 0)],rf.prototype,"resumeProcessAudioBuffer",null),$d([pt(),ef("design:type",Function),ef("design:paramtypes",[]),ef("design:returntype",void 0)],rf.prototype,"stopProcessAudioBuffer",null);class of extends tf{constructor(){let e=nt().createMediaStreamDestination();super(e.stream.getAudioTracks()[0],void 0,Lt(8,"track-mix-"));try{this._mediaStreamTrack=this._source.createOutputTrack()}catch(e){}this.destNode=e,this.trackList=[]}get isActive(){var e;return!(!this.trackList.length||!Wc(e=this.trackList).call(e,(e=>!e.muted)))}getSubTrackLabels(){var e;return Sc(e=this.trackList).call(e,(e=>e.getTrackLabel()))}hasAudioTrack(e){var t;return-1!==Mc(t=this.trackList).call(t,e)}addAudioTrack(e){var t;-1===Mc(t=this.trackList).call(t,e)?(Tl.debug("add ".concat(e.getTrackId()," to mixing track")),e._source.outputNode.connect(this.destNode),this.trackList.push(e),this.updateEncoderConfig()):Tl.debug("track ".concat(e.getTrackId()," is already added"))}removeAudioTrack(e){var t;if(-1!==Mc(t=this.trackList).call(t,e)){Tl.debug("remove ".concat(e.getTrackId()," from mixing track"));try{e._source.outputNode.disconnect(this.destNode)}catch(e){}Qt(this.trackList,e),this.updateEncoderConfig()}}updateEncoderConfig(){var e;let t={};Oa(e=this.trackList).call(e,(e=>{e._encoderConfig&&((e._encoderConfig.bitrate||0)>(t.bitrate||0)&&(t.bitrate=e._encoderConfig.bitrate),(e._encoderConfig.sampleRate||0)>(t.sampleRate||0)&&(t.sampleRate=e._encoderConfig.sampleRate),(e._encoderConfig.sampleSize||0)>(t.sampleSize||0)&&(t.sampleSize=e._encoderConfig.sampleSize),e._encoderConfig.stereo&&(t.stereo=!0))})),this._encoderConfig=t}}class af extends wd{constructor(){super(...arguments),this.resultStorage=new pa}setLocalAudioStats(e,t,n){this.record("AUDIO_INPUT_LEVEL_TOO_LOW",e,this.checkAudioInputLevel(n,t)),this.record("SEND_AUDIO_BITRATE_TOO_LOW",e,this.checkSendAudioBitrate(n,t))}setLocalVideoStats(e,t,n){this.record("SEND_VIDEO_BITRATE_TOO_LOW",e,this.checkSendVideoBitrate(n,t)),this.record("FRAMERATE_INPUT_TOO_LOW",e,this.checkFramerateInput(n,t)),this.record("FRAMERATE_SENT_TOO_LOW",e,this.checkFramerateSent(n))}setRemoteAudioStats(e,t){e=e.getUserId(),this.record("AUDIO_OUTPUT_LEVEL_TOO_LOW",e,this.checkAudioOutputLevel(t))}setRemoteVideoStats(e,t){e=e.getUserId(),this.record("RECV_VIDEO_DECODE_FAILED",e,this.checkVideoDecode(t))}record(e,t,n){this.resultStorage.has(e)||this.resultStorage.set(e,{result:[],isPrevNormal:!0});let r=this.resultStorage.get(e);var i;r&&(r.result.push(n),5<=r.result.length)&&(n=ru(i=r.result).call(i,!0),r.isPrevNormal&&!n&&this.emit("exception",sf[e],e,t),!r.isPrevNormal&&n&&this.emit("exception",sf[e]+2e3,e+"_RECOVER",t),r.isPrevNormal=n,r.result=[])}checkAudioOutputLevel(e){return!(0<e.receiveBitrate&&0===e.receiveLevel)}checkAudioInputLevel(e,t){return t instanceof of&&!t.isActive||!!t.muted||0!==e.sendVolumeLevel}checkFramerateInput(e,t){let n=null;return t._encoderConfig&&t._encoderConfig.frameRate&&(n=wt(t._encoderConfig.frameRate)),e=e.captureFrameRate,!n||!e||!(10<n&&5>e||10>n&&5<=n&&1>=e)}checkFramerateSent(e){return!(e.captureFrameRate&&e.sendFrameRate&&5<e.captureFrameRate&&1>=e.sendFrameRate)}checkSendVideoBitrate(e,t){return!!t.muted||0!==e.sendBitrate}checkSendAudioBitrate(e,t){return t instanceof of&&!t.isActive||!!t.muted||0!==e.sendBitrate}checkVideoDecode(e){return 0===e.receiveBitrate||0!==e.decodeFrameRate}}let sf={FRAMERATE_INPUT_TOO_LOW:1001,FRAMERATE_SENT_TOO_LOW:1002,SEND_VIDEO_BITRATE_TOO_LOW:1003,RECV_VIDEO_DECODE_FAILED:1005,AUDIO_INPUT_LEVEL_TOO_LOW:2001,AUDIO_OUTPUT_LEVEL_TOO_LOW:2002,SEND_AUDIO_BITRATE_TOO_LOW:2003};class cf{constructor(e){this.localConnectionsMap=new pa,this.remoteConnectionsMap=new pa,this.trafficStatsPeerList=[],this.updateStats=()=>{var e,t;Oa(e=this.remoteConnectionsMap).call(e,(e=>{var t;let n=e.audioStats;var r=e.videoStats,i=e.pcStats;let o=mt({},th),a=mt({},rh),s=mt({},nh),c=e.connection.pc.getStats(),u=c.audioRecv[0],l=c.videoRecv[0];i=i?i.videoRecv[0]:void 0;let h=!0===e.connection.pc._statsFilter.videoIsReady,d=this.trafficStats&&Wc(t=this.trafficStats.peer_delay).call(t,(t=>t.peer_uid===e.connection.getUserId()));u&&("opus"!==u.codec&&"aac"!==u.codec||(o.codecType=u.codec),u.outputLevel?o.receiveLevel=Math.round(32767*u.outputLevel):e.connection.user.audioTrack&&(o.receiveLevel=Math.round(32767*e.connection.user.audioTrack.getVolumeLevel())),o.receiveBytes=u.bytes,o.receivePackets=u.packets,o.receivePacketsLost=u.packetsLost,o.packetLossRate=o.receivePacketsLost/(o.receivePackets+o.receivePacketsLost),o.receiveBitrate=n?8*Math.max(0,o.receiveBytes-n.receiveBytes):0,o.totalDuration=n?n.totalDuration+1:1,o.totalFreezeTime=n?n.totalFreezeTime:0,o.freezeRate=o.totalFreezeTime/o.totalDuration,o.receiveDelay=u.jitterBufferMs,t=e.connection.user.audioTrack,10<o.totalDuration&&cf.isRemoteAudioFreeze(t)&&(o.totalFreezeTime+=1)),l&&("H264"!==l.codec&&"VP8"!==l.codec&&"VP9"!==l.codec&&"AV1X"!==l.codec||(a.codecType=l.codec),a.receiveBytes=l.bytes,a.receiveBitrate=r?8*Math.max(0,a.receiveBytes-r.receiveBytes):0,a.decodeFrameRate=l.decodeFrameRate,a.renderFrameRate=l.decodeFrameRate,l.outputFrame&&(a.renderFrameRate=l.outputFrame.frameRate),l.receivedFrame?(a.receiveFrameRate=l.receivedFrame.frameRate,a.receiveResolutionHeight=l.receivedFrame.height,a.receiveResolutionWidth=l.receivedFrame.width):e.connection.user.videoTrack&&(a.receiveResolutionHeight=e.connection.user.videoTrack._videoHeight||0,a.receiveResolutionWidth=e.connection.user.videoTrack._videoWidth||0),void 0!==l.framesRateFirefox&&(a.receiveFrameRate=Math.round(l.framesRateFirefox)),a.receivePackets=l.packets,a.receivePacketsLost=l.packetsLost,a.packetLossRate=a.receivePacketsLost/(a.receivePackets+a.receivePacketsLost),a.totalDuration=r?r.totalDuration+1:1,a.totalFreezeTime=r?r.totalFreezeTime:0,a.receiveDelay=l.jitterBufferMs||0,r=e.connection.user.videoTrack,e.connection.subscribeOptions.video&&h&&cf.isRemoteVideoFreeze(r,l,i)&&(a.totalFreezeTime+=1),a.freezeRate=a.totalFreezeTime/a.totalDuration),d&&(o.end2EndDelay=d.B_ad,a.end2EndDelay=d.B_vd,o.transportDelay=d.B_ed,a.transportDelay=d.B_ed,o.currentPacketLossRate=d.B_ealr4/100,a.currentPacketLossRate=d.B_evlr4/100,s.uplinkNetworkQuality=d.B_punq?d.B_punq:0,s.downlinkNetworkQuality=d.B_pdnq?d.B_punq:0),e.audioStats=o,e.videoStats=a,e.pcStats=c,e.networkStats=s,e.connection.user.audioTrack&&this.exceptionMonitor.setRemoteAudioStats(e.connection.user.audioTrack,o),e.connection.user.videoTrack&&this.exceptionMonitor.setRemoteVideoStats(e.connection.user.videoTrack,a)})),Oa(t=this.localConnectionsMap).call(t,(e=>{let t=e.audioStats,n=e.videoStats,r=mt({},$l),i=mt({},eh);var o=e.connection.pc.getStats();let a=o.audioSend[0];o=o.videoSend[0];let s=e.connection.getUserId();a&&("opus"!==a.codec&&"aac"!==a.codec||(r.codecType=a.codec),a.inputLevel?r.sendVolumeLevel=Math.round(32767*a.inputLevel):e.connection.audioTrack&&(r.sendVolumeLevel=Math.round(32767*e.connection.audioTrack.getVolumeLevel())),r.sendBytes=a.bytes,r.sendPackets=a.packets,r.sendPacketsLost=a.packetsLost,r.sendBitrate=t?8*Math.max(0,r.sendBytes-t.sendBytes):0),o&&("H264"!==o.codec&&"VP8"!==o.codec&&"VP9"!==o.codec&&"AV1X"!==o.codec||(i.codecType=o.codec),i.sendBytes=o.bytes,i.sendBitrate=n?8*Math.max(0,i.sendBytes-n.sendBytes):0,o.inputFrame?(i.captureFrameRate=o.inputFrame.frameRate,i.captureResolutionHeight=o.inputFrame.height,i.captureResolutionWidth=o.inputFrame.width):e.connection.videoTrack&&(i.captureResolutionWidth=e.connection.videoTrack._videoWidth||0,i.captureResolutionHeight=e.connection.videoTrack._videoHeight||0),o.sentFrame?(i.sendFrameRate=o.sentFrame.frameRate,i.sendResolutionHeight=o.sentFrame.height,i.sendResolutionWidth=o.sentFrame.width):e.connection.videoTrack&&(i.sendResolutionWidth=e.connection.videoTrack._videoWidth||0,i.sendResolutionHeight=e.connection.videoTrack._videoHeight||0),o.avgEncodeMs&&(i.encodeDelay=o.avgEncodeMs),e.connection.videoTrack&&e.connection.videoTrack._encoderConfig&&e.connection.videoTrack._encoderConfig.bitrateMax&&(i.targetSendBitrate=1e3*e.connection.videoTrack._encoderConfig.bitrateMax),i.sendPackets=o.packets,i.sendPacketsLost=o.packetsLost,i.totalDuration=n?n.totalDuration+1:1,i.totalFreezeTime=n?n.totalFreezeTime:0,this.isLocalVideoFreeze(o)&&(i.totalFreezeTime+=1)),this.trafficStats&&(r.sendPacketsLost=this.trafficStats.B_palr4/100,i.sendPacketsLost=this.trafficStats.B_pvlr4/100),e.audioStats=r,e.videoStats=i,e.audioStats&&e.connection.audioTrack&&this.exceptionMonitor.setLocalAudioStats(s,e.connection.audioTrack,e.audioStats),e.videoStats&&e.connection.videoTrack&&this.exceptionMonitor.setLocalVideoStats(s,e.connection.videoTrack,e.videoStats)}))},this.clientId=e,this.updateStatsInterval=window.setInterval(this.updateStats,1e3),this.exceptionMonitor=new af,this.exceptionMonitor.on("exception",((e,t,n)=>{this.onStatsException&&this.onStatsException(e,t,n)}))}reset(){this.localConnectionsMap=new pa,this.remoteConnectionsMap=new pa,this.trafficStats=void 0,this.trafficStatsPeerList=[],this.uplinkStats=void 0}getLocalAudioTrackStats(e){return(e=this.localConnectionsMap.get(e))&&e.audioStats?e.audioStats:mt({},$l)}getLocalVideoTrackStats(e){return(e=this.localConnectionsMap.get(e))&&e.videoStats?e.videoStats:mt({},eh)}getRemoteAudioTrackStats(e){var t;let n=this.remoteConnectionsMap.get(e);return n&&n.audioStats?this.trafficStats?((e=Wc(t=this.trafficStats.peer_delay).call(t,(e=>e.peer_uid===n.connection.user.uid)))&&(n.audioStats.publishDuration=e.B_ppad+(tl()-this.trafficStats.timestamp)),n.audioStats):n.audioStats:mt({},th)}getRemoteNetworkQualityStats(e){return(e=this.remoteConnectionsMap.get(e))&&e.networkStats?e.networkStats:mt({},nh)}getRemoteVideoTrackStats(e){var t;let n=this.remoteConnectionsMap.get(e);return n&&n.videoStats?this.trafficStats?((e=Wc(t=this.trafficStats.peer_delay).call(t,(e=>e.peer_uid===n.connection.user.uid)))&&(n.videoStats.publishDuration=e.B_ppvd+(tl()-this.trafficStats.timestamp)),n.videoStats):n.videoStats:mt({},rh)}getRTCStats(){var e,t;let n=0,r=0,i=0,o=0;return Oa(e=this.localConnectionsMap).call(e,(e=>{e.audioStats&&(n+=e.audioStats.sendBytes,r+=e.audioStats.sendBitrate),e.videoStats&&(n+=e.videoStats.sendBytes,r+=e.videoStats.sendBitrate)})),Oa(t=this.remoteConnectionsMap).call(t,(e=>{e.audioStats&&(i+=e.audioStats.receiveBytes,o+=e.audioStats.receiveBitrate),e.videoStats&&(i+=e.videoStats.receiveBytes,o+=e.videoStats.receiveBitrate)})),e=1,this.trafficStats&&(e+=this.trafficStats.peer_delay.length),{Duration:0,UserCount:e,SendBitrate:r,SendBytes:n,RecvBytes:i,RecvBitrate:o,OutgoingAvailableBandwidth:this.uplinkStats?this.uplinkStats.B_uab/1e3:0,RTT:this.trafficStats?2*this.trafficStats.B_acd:0}}removeConnection(e){this.localConnectionsMap.delete(e),this.remoteConnectionsMap.delete(e)}addLocalConnection(e){let t=e.connectionId;this.localConnectionsMap.has(t)||this.localConnectionsMap.set(t,{connection:e})}addRemoteConnection(e){let t=e.connectionId;this.remoteConnectionsMap.has(t)||this.remoteConnectionsMap.set(t,{connection:e})}updateTrafficStats(e){var t;let n=os(t=e.peer_delay).call(t,(e=>{var t;return-1===Mc(t=this.trafficStatsPeerList).call(t,e.peer_uid)}));Oa(n).call(n,(e=>{var t,n;let r=Wc(t=Ed(yd(n=this.remoteConnectionsMap).call(n))).call(t,(t=>t.connection._userId===e.peer_uid));void 0!==e.B_ppad&&void 0!==e.B_ppvd&&(this.onUploadPublishDuration&&this.onUploadPublishDuration(e.peer_uid,e.B_ppad,e.B_ppvd,r?tl()-r.connection.startTime:0),this.trafficStatsPeerList.push(e.peer_uid))})),this.trafficStats=e}updateUplinkStats(e){var t;this.uplinkStats&&this.uplinkStats.B_fir!==e.B_fir&&Tl.debug(_i(t="[".concat(this.clientId,"]: Period fir changes to ")).call(t,e.B_fir)),this.uplinkStats=e}static isRemoteVideoFreeze(e,t,n){return!!e&&(e=!n||t.framesDecodeCount>n.framesDecodeCount,!!n&&t.framesDecodeFreezeTime>n.framesDecodeFreezeTime||!e)}static isRemoteAudioFreeze(e){return!!e&&e._isFreeze()}isLocalVideoFreeze(e){return!(!e.inputFrame||!e.sentFrame)&&5<e.inputFrame.frameRate&&3>e.sentFrame.frameRate}}var uf;let lf=()=>{},hf={},df=new class{constructor(){this.fnMap=new pa}throttleByKey(e,t,n,r,...i){if(this.fnMap.has(t)){var o=this.fnMap.get(t);o.threshold!==n?(o.fn(...o.args),clearTimeout(o.timer),o=window.setTimeout((()=>{const e=this.fnMap.get(t);e&&e.fn(...e.args),this.fnMap.delete(t)}),n),this.fnMap.set(t,{fn:e,threshold:n,timer:o,args:i,skipFn:r})):(o.skipFn&&o.skipFn(...o.args),this.fnMap.set(t,Ot({},o,{fn:e,args:i,skipFn:r})))}else o=window.setTimeout((()=>{const e=this.fnMap.get(t);e&&e.fn(...e.args),this.fnMap.delete(t)}),n),this.fnMap.set(t,{fn:e,threshold:n,timer:o,args:i,skipFn:r})}},ff=Zc(uf=df.throttleByKey).call(uf,df),pf=async({fragementLength:e,referenceList:t,asyncMapHandler:n,allFailedhandler:r,promisesCollector:i})=>{let o,a=0,s=0;const c=async()=>{const u=(()=>{var r=a*e;const i=r+e;return r=qc(t).call(t,r,i),Sc(r).call(r,n)})();i&&i.push(...u);try{o=await Bt(u)}catch(n){if(s+=e,a++,!(s>=t.length))return void await c();r(n)}Oa(u).call(u,(e=>e.cancel()))};return await c(),o},gf={[Ul.ACCESS_POINT]:{[Gl.NO_FLAG_SET]:{desc:"flag is zero",retry:!1},[Gl.FLAG_SET_BUT_EMPTY]:{desc:"flag is empty",retry:!1},[Gl.INVALID_FALG_SET]:{desc:"invalid flag",retry:!1},[Gl.NO_SERVICE_AVAILABLE]:{desc:"no service available",retry:!0},[Gl.NO_SERVICE_AVAILABLE_P2P]:{desc:"no unilbs p2p service available",retry:!0},[Gl.NO_SERVICE_AVAILABLE_VOET]:{desc:"no unilbs voice service available",retry:!0},[Gl.NO_SERVICE_AVAILABLE_WEBRTC]:{desc:"no unilbs webrtc service available",retry:!0},[Gl.NO_SERVICE_AVAILABLE_CDS]:{desc:"no cds service available",retry:!0},[Gl.NO_SERVICE_AVAILABLE_CDN]:{desc:"no cdn dispatcher service available",retry:!0},[Gl.NO_SERVICE_AVAILABLE_TDS]:{desc:"no tds service available",retry:!0},[Gl.NO_SERVICE_AVAILABLE_REPORT]:{desc:"no unilbs report service available",retry:!0},[Gl.NO_SERVICE_AVAILABLE_APP_CENTER]:{desc:"no app center service available",retry:!0},[Gl.NO_SERVICE_AVAILABLE_ENV0]:{desc:"no unilbs sig env0 service available",retry:!0},[Gl.NO_SERVICE_AVAILABLE_VOET]:{desc:"no unilbs voet service available",retry:!0},[Gl.NO_SERVICE_AVAILABLE_STRING_UID]:{desc:"no string uid service available",retry:!0},[Gl.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS]:{desc:"no webrtc unilbs service available",retry:!0}},[Ul.UNILBS]:{[Ql.INVALID_VENDOR_KEY]:{desc:"invalid vendor key, can not find appid",retry:!1},[Ql.INVALID_CHANNEL_NAME]:{desc:"invalid channel name",retry:!1},[Ql.INTERNAL_ERROR]:{desc:"unilbs internal error",retry:!1},[Ql.NO_AUTHORIZED]:{desc:"invalid token, authorized failed",retry:!1},[Ql.DYNAMIC_KEY_TIMEOUT]:{desc:"dynamic key or token timeout",retry:!1},[Ql.NO_ACTIVE_STATUS]:{desc:"no active status",retry:!1},[Ql.DYNAMIC_KEY_EXPIRED]:{desc:"dynamic key expired",retry:!1},[Ql.STATIC_USE_DYNAMIC_KEY]:{desc:"static use dynamic key",retry:!1},[Ql.DYNAMIC_USE_STATIC_KEY]:{desc:"dynamic use static key",retry:!1},[Ql.USER_OVERLOAD]:{desc:"amount of users over load",retry:!1},[Ql.FORBIDDEN_REGION]:{desc:"the request is forbidden in this area",retry:!1},[Ql.CANNOT_MEET_AREA_DEMAND]:{desc:"unable to allocate services in this area",retry:!1}},[Ul.STRING_UID_ALLOCATOR]:{[Fl.IIIEGAL_APPID]:{desc:"invalid appid",retry:!1},[Fl.IIIEGAL_UID]:{desc:"invalid string uid",retry:!1},[Fl.INTERNAL_ERROR]:{desc:"string uid allocator internal error",retry:!0}}},Af={[ql.K_TIMESTAMP_EXPIRED]:{desc:"K_TIMESTAMP_EXPIRED",action:"failed"},[ql.K_CHANNEL_PERMISSION_INVALID]:{desc:"K_CHANNEL_PERMISSION_INVALID",action:"failed"},[ql.K_CERTIFICATE_INVALID]:{desc:"K_CERTIFICATE_INVALID",action:"failed"},[ql.K_CHANNEL_NAME_EMPTY]:{desc:"K_CHANNEL_NAME_EMPTY",action:"failed"},[ql.K_CHANNEL_NOT_FOUND]:{desc:"K_CHANNEL_NOT_FOUND",action:"failed"},[ql.K_TICKET_INVALID]:{desc:"K_TICKET_INVALID",action:"failed"},[ql.K_CHANNEL_CONFLICTED]:{desc:"K_CHANNEL_CONFLICTED",action:"failed"},[ql.K_SERVICE_NOT_READY]:{desc:"K_SERVICE_NOT_READY",action:"tryNext"},[ql.K_SERVICE_TOO_HEAVY]:{desc:"K_SERVICE_TOO_HEAVY",action:"tryNext"},[ql.K_UID_BANNED]:{desc:"K_UID_BANNED",action:"failed"},[ql.K_IP_BANNED]:{desc:"K_IP_BANNED",action:"failed"},[ql.ERR_INVALID_VENDOR_KEY]:{desc:"ERR_INVALID_VENDOR_KEY",action:"failed"},[ql.ERR_INVALID_CHANNEL_NAME]:{desc:"ERR_INVALID_CHANNEL_NAME",action:"failed"},[ql.WARN_NO_AVAILABLE_CHANNEL]:{desc:"WARN_NO_AVAILABLE_CHANNEL",action:"failed"},[ql.WARN_LOOKUP_CHANNEL_TIMEOUT]:{desc:"WARN_LOOKUP_CHANNEL_TIMEOUT",action:"tryNext"},[ql.WARN_LOOKUP_CHANNEL_REJECTED]:{desc:"WARN_LOOKUP_CHANNEL_REJECTED",action:"failed"},[ql.WARN_OPEN_CHANNEL_TIMEOUT]:{desc:"WARN_OPEN_CHANNEL_TIMEOUT",action:"tryNext"},[ql.WARN_OPEN_CHANNEL_REJECTED]:{desc:"WARN_OPEN_CHANNEL_REJECTED",action:"failed"},[ql.WARN_REQUEST_DEFERRED]:{desc:"WARN_REQUEST_DEFERRED",action:"failed"},[ql.ERR_DYNAMIC_KEY_TIMEOUT]:{desc:"ERR_DYNAMIC_KEY_TIMEOUT",action:"failed"},[ql.ERR_NO_AUTHORIZED]:{desc:"ERR_NO_AUTHORIZED",action:"failed"},[ql.ERR_VOM_SERVICE_UNAVAILABLE]:{desc:"ERR_VOM_SERVICE_UNAVAILABLE",action:"tryNext"},[ql.ERR_NO_CHANNEL_AVAILABLE_CODE]:{desc:"ERR_NO_CHANNEL_AVAILABLE_CODE",action:"failed"},[ql.ERR_MASTER_VOCS_UNAVAILABLE]:{desc:"ERR_MASTER_VOCS_UNAVAILABLE",action:"tryNext"},[ql.ERR_INTERNAL_ERROR]:{desc:"ERR_INTERNAL_ERROR",action:"tryNext"},[ql.ERR_NO_ACTIVE_STATUS]:{desc:"ERR_NO_ACTIVE_STATUS",action:"failed"},[ql.ERR_INVALID_UID]:{desc:"ERR_INVALID_UID",action:"failed"},[ql.ERR_DYNAMIC_KEY_EXPIRED]:{desc:"ERR_DYNAMIC_KEY_EXPIRED",action:"failed"},[ql.ERR_STATIC_USE_DYANMIC_KE]:{desc:"ERR_STATIC_USE_DYANMIC_KE",action:"failed"},[ql.ERR_DYNAMIC_USE_STATIC_KE]:{desc:"ERR_DYNAMIC_USE_STATIC_KE",action:"failed"},[ql.ERR_NO_VOCS_AVAILABLE]:{desc:"ERR_NO_VOCS_AVAILABLE",action:"tryNext"},[ql.ERR_NO_VOS_AVAILABLE]:{desc:"ERR_NO_VOS_AVAILABLE",action:"tryNext"},[ql.ERR_JOIN_CHANNEL_TIMEOUT]:{desc:"ERR_JOIN_CHANNEL_TIMEOUT",action:"tryNext"},[ql.ERR_JOIN_BY_MULTI_IP]:{desc:"ERR_JOIN_BY_MULTI_IP",action:"recover"},[ql.ERR_NOT_JOINED]:{desc:"ERR_NOT_JOINED",action:"failed"},[ql.ERR_REPEAT_JOIN_REQUEST]:{desc:"ERR_REPEAT_JOIN_REQUEST",action:"quit"},[ql.ERR_REPEAT_JOIN_CHANNEL]:{desc:"ERR_REPEAT_JOIN_CHANNEL",action:"quit"},[ql.ERR_INVALID_VENDOR_KEY]:{desc:"ERR_INVALID_VENDOR_KEY",action:"failed"},[ql.ERR_INVALID_CHANNEL_NAME]:{desc:"ERR_INVALID_CHANNEL_NAME",action:"failed"},[ql.ERR_INVALID_STRINGUID]:{desc:"ERR_INVALID_STRINGUID",action:"failed"},[ql.ERR_TOO_MANY_USERS]:{desc:"ERR_TOO_MANY_USERS",action:"tryNext"},[ql.ERR_SET_CLIENT_ROLE_TIMEOUT]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[ql.ERR_SET_CLIENT_ROLE_NO_PERMISSION]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[ql.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE]:{desc:"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",action:"success"},[ql.ERR_PUBLISH_REQUEST_INVALID]:{desc:"ERR_PUBLISH_REQUEST_INVALID",action:"failed"},[ql.ERR_SUBSCRIBE_REQUEST_INVALID]:{desc:"ERR_SUBSCRIBE_REQUEST_INVALID",action:"failed"},[ql.ERR_NOT_SUPPORTED_MESSAGE]:{desc:"ERR_NOT_SUPPORTED_MESSAGE",action:"failed"},[ql.ERR_ILLEAGAL_PLUGIN]:{desc:"ERR_ILLEAGAL_PLUGIN",action:"failed"},[ql.ILLEGAL_CLIENT_ROLE_LEVEL]:{desc:"ILLEGAL_CLIENT_ROLE_LEVEL",action:"failed"},[ql.ERR_REJOIN_TOKEN_INVALID]:{desc:"ERR_REJOIN_TOKEN_INVALID",action:"failed"},[ql.ERR_REJOIN_USER_NOT_JOINED]:{desc:"ERR_REJOIN_NOT_JOINED",action:"failed"},[ql.ERR_INVALID_OPTIONAL_INFO]:{desc:"ERR_INVALID_OPTIONAL_INFO",action:"quit"},[ql.ERR_TEST_RECOVER]:{desc:"ERR_TEST_RECOVER",action:"recover"},[ql.ERR_TEST_TRYNEXT]:{desc:"ERR_TEST_TRYNEXT",action:"recover"},[ql.ERR_TEST_RETRY]:{desc:"ERR_TEST_RETRY",action:"recover"},[ql.ILLEGAL_AES_PASSWORD]:{desc:"ERR_TEST_RETRY",action:"failed"}};var vf=e((function(e,t){e.exports=function(){function e(e){for(var t=e.length,n=0,r=0;r<t;){var i=e.charCodeAt(r++);if(0!=(4294967168&i))if(0==(4294965248&i))n+=2;else{if(55296<=i&&56319>=i&&r<t){var o=e.charCodeAt(r);56320==(64512&o)&&(++r,i=((1023&i)<<10)+(1023&o)+65536)}n+=0==(4294901760&i)?3:4}else n++}return n}function t(e,t,n){n=t+n;for(var r=[],i="";t<n;){var o=e[t++];if(0==(128&o))r.push(o);else if(192==(224&o)){var a=63&e[t++];r.push((31&o)<<6|a)}else if(224==(240&o)){a=63&e[t++];var s=63&e[t++];r.push((31&o)<<12|a<<6|s)}else 240==(248&o)?(65535<(o=(7&o)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|1023&o),r.push(o)):r.push(o);4096<=r.length&&(i+=String.fromCharCode.apply(String,E([],_(r))),r.length=0)}return 0<r.length&&(i+=String.fromCharCode.apply(String,E([],_(r)))),i}function n(e,t){return 4294967296*e.getInt32(t)+e.getUint32(t+4)}function r(e){var t,n=e.sec;if(e=e.nsec,0<=n&&0<=e&&17179869183>=n){if(0===e&&4294967295>=n){var r=new Uint8Array(4);return new DataView(r.buffer).setUint32(0,n),r}var i=n/4294967296;return n&=4294967295,r=new Uint8Array(8),(t=new DataView(r.buffer)).setUint32(0,e<<2|3&i),t.setUint32(4,n),r}return r=new Uint8Array(12),(t=new DataView(r.buffer)).setUint32(0,e),t.setUint32(4,Math.floor(n/4294967296)),t.setUint32(8,n),r}function i(e){var t=e.getTime();t=1e6*(t-1e3*(e=Math.floor(t/1e3)));var n=Math.floor(t/1e9);return{sec:e+n,nsec:t-1e9*n}}function o(e){return e instanceof Date?r(i(e)):null}function a(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);switch(e.byteLength){case 4:return{sec:t.getUint32(0),nsec:0};case 8:return{sec:4294967296*(3&(e=t.getUint32(0)))+t.getUint32(4),nsec:e>>>2};case 12:return{sec:n(t,4),nsec:t.getUint32(0)};default:throw Error("Unrecognized data size for timestamp: "+e.length)}}function s(e){return e=a(e),new Date(1e3*e.sec+e.nsec/1e6)}function c(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer?new Uint8Array(e):Uint8Array.from(e)}function u(e,t){return void 0===t&&(t=P),new L(t.extensionCodec,t.context,t.maxDepth,t.initialBufferSize,t.sortKeys,t.forceFloat32,t.ignoreUndefined,t.forceIntegerToFloat).encode(e)}function l(e){return(0>e?"-":"")+"0x"+Math.abs(e).toString(16).padStart(2,"0")}function h(e,t){return void 0===t&&(t=z),new W(t.extensionCodec,t.context,t.maxStrLength,t.maxBinLength,t.maxArrayLength,t.maxMapLength,t.maxExtLength).decode(e)}function d(e,t){return void 0===t&&(t=z),new W(t.extensionCodec,t.context,t.maxStrLength,t.maxBinLength,t.maxArrayLength,t.maxMapLength,t.maxExtLength).decodeMulti(e)}function f(e){return null!=e[Symbol.asyncIterator]?e:function(e){return X(this,arguments,(function(){var t,n,r,i;return Y(this,(function(o){switch(o.label){case 0:t=e.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,J(t.read())];case 3:return n=o.sent(),r=n.done,i=n.value,r?[4,J(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:if(null==i)throw Error("Assertion Failure: value must not be null nor undefined");return[4,J(i)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}}))}))}(e)}function p(e,t){return void 0===t&&(t=z),n=this,r=void 0,o=function(){var n;return function(e,t){function n(n){return function(a){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,i=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(!((o=0<(o=s.trys).length&&o[o.length-1])||6!==n[0]&&2!==n[0])){s=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3]))s.label=n[1];else if(6===n[0]&&s.label<o[1])s.label=o[1],o=n;else{if(!(o&&s.label<o[2])){o[2]&&s.ops.pop(),s.trys.pop();continue}s.label=o[2],s.ops.push(n)}}n=t.call(e,s)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,a])}}var r,i,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a}(this,(function(r){return n=f(e),[2,new W(t.extensionCodec,t.context,t.maxStrLength,t.maxBinLength,t.maxArrayLength,t.maxMapLength,t.maxExtLength).decodeAsync(n)]}))},new(i=void 0,i=Promise)((function(e,t){function a(e){try{c(o.next(e))}catch(e){t(e)}}function s(e){try{c(o.throw(e))}catch(e){t(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(a,s)}c((o=o.apply(n,r||[])).next())}));var n,r,i,o}function g(e,t){return void 0===t&&(t=z),e=f(e),new W(t.extensionCodec,t.context,t.maxStrLength,t.maxBinLength,t.maxArrayLength,t.maxMapLength,t.maxExtLength).decodeArrayStream(e)}function A(e,t){return void 0===t&&(t=z),e=f(e),new W(t.extensionCodec,t.context,t.maxStrLength,t.maxBinLength,t.maxArrayLength,t.maxMapLength,t.maxExtLength).decodeStream(e)}function v(e,t){return void 0===t&&(t=z),A(e,t)}var m={d:function(e,t){for(var n in t)m.o(t,n)&&!m.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r:function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},y={};m.r(y),m.d(y,{DecodeError:function(){return H},Decoder:function(){return W},EXT_TIMESTAMP:function(){return O},Encoder:function(){return L},ExtData:function(){return k},ExtensionCodec:function(){return x},decode:function(){return h},decodeArrayStream:function(){return g},decodeAsync:function(){return p},decodeMulti:function(){return d},decodeMultiStream:function(){return A},decodeStream:function(){return v},decodeTimestampExtension:function(){return s},decodeTimestampToTimeSpec:function(){return a},encode:function(){return u},encodeDateToTimeSpec:function(){return i},encodeTimeSpecToTimestamp:function(){return r},encodeTimestampExtension:function(){return o}});var b,_=function(e,t){var n,r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;e=r.call(e);var i=[];try{for(;(void 0===t||0<t--)&&!(n=e.next()).done;)i.push(n.value)}catch(e){var o={error:e}}finally{try{n&&!n.done&&(r=e.return)&&r.call(e)}finally{if(o)throw o.error}}return i},E=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},w="undefined"!=typeof TextEncoder&&"undefined"!=typeof TextDecoder,I=w?new TextEncoder:void 0,C=w?"undefined"!=typeof process?200:0:4294967295,S=null!=I&&I.encodeInto?function(e,t,n){I.encodeInto(e,t.subarray(n))}:function(e,t,n){t.set(I.encode(e),n)},T=w?new TextDecoder:null,R=w?"undefined"!=typeof process?200:0:4294967295,k=function(e,t){this.type=e,this.data=t},O=-1,N={type:O,encode:o,decode:s},x=function(){function e(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(N)}return e.prototype.register=function(e){var t=e.type,n=e.encode;e=e.decode,0<=t?(this.encoders[t]=n,this.decoders[t]=e):(t=1+t,this.builtInEncoders[t]=n,this.builtInDecoders[t]=e)},e.prototype.tryToEncode=function(e,t){for(var n=0;n<this.builtInEncoders.length;n++)if(null!=(r=this.builtInEncoders[n])&&null!=(i=r(e,t)))return new k(-1-n,i);for(n=0;n<this.encoders.length;n++){var r,i;if(null!=(r=this.encoders[n])&&null!=(i=r(e,t)))return new k(n,i)}return e instanceof k?e:null},e.prototype.decode=function(e,t,n){var r=0>t?this.builtInDecoders[-1-t]:this.decoders[t];return r?r(e,t,n):new k(t,e)},e.defaultCodec=new e,e}(),D=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},L=function(){function t(e,t,n,r,i,o,a,s){void 0===e&&(e=x.defaultCodec),void 0===t&&(t=void 0),void 0===n&&(n=100),void 0===r&&(r=2048),void 0===i&&(i=!1),void 0===o&&(o=!1),void 0===a&&(a=!1),void 0===s&&(s=!1),this.extensionCodec=e,this.context=t,this.maxDepth=n,this.initialBufferSize=r,this.sortKeys=i,this.forceFloat32=o,this.ignoreUndefined=a,this.forceIntegerToFloat=s,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}return t.prototype.getUint8Array=function(){return this.bytes.subarray(0,this.pos)},t.prototype.reinitializeState=function(){this.pos=0},t.prototype.encode=function(e){return this.reinitializeState(),this.doEncode(e,1),this.getUint8Array()},t.prototype.doEncode=function(e,t){if(t>this.maxDepth)throw Error("Too deep objects in depth "+t);null==e?this.encodeNil():"boolean"==typeof e?this.encodeBoolean(e):"number"==typeof e?this.encodeNumber(e):"string"==typeof e?this.encodeString(e):this.encodeObject(e,t)},t.prototype.ensureBufferSizeToWrite=function(e){e=this.pos+e,this.view.byteLength<e&&this.resizeBuffer(2*e)},t.prototype.resizeBuffer=function(e){var t=new ArrayBuffer(e);e=new Uint8Array(t),t=new DataView(t),e.set(this.bytes),this.view=t,this.bytes=e},t.prototype.encodeNil=function(){this.writeU8(192)},t.prototype.encodeBoolean=function(e){!1===e?this.writeU8(194):this.writeU8(195)},t.prototype.encodeNumber=function(e){Number.isSafeInteger(e)&&!this.forceIntegerToFloat?0<=e?128>e?this.writeU8(e):256>e?(this.writeU8(204),this.writeU8(e)):65536>e?(this.writeU8(205),this.writeU16(e)):4294967296>e?(this.writeU8(206),this.writeU32(e)):(this.writeU8(207),this.writeU64(e)):-32<=e?this.writeU8(224|e+32):-128<=e?(this.writeU8(208),this.writeI8(e)):-32768<=e?(this.writeU8(209),this.writeI16(e)):-2147483648<=e?(this.writeU8(210),this.writeI32(e)):(this.writeU8(211),this.writeI64(e)):this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))},t.prototype.writeStringHeader=function(e){if(32>e)this.writeU8(160+e);else if(256>e)this.writeU8(217),this.writeU8(e);else if(65536>e)this.writeU8(218),this.writeU16(e);else{if(!(4294967296>e))throw Error("Too long string: "+e+" bytes in UTF-8");this.writeU8(219),this.writeU32(e)}},t.prototype.encodeString=function(t){if(t.length>C){var n=e(t);this.ensureBufferSizeToWrite(5+n),this.writeStringHeader(n),S(t,this.bytes,this.pos)}else{n=e(t),this.ensureBufferSizeToWrite(5+n),this.writeStringHeader(n);for(var r=this.bytes,i=t.length,o=this.pos,a=0;a<i;){var s=t.charCodeAt(a++);if(0!=(4294967168&s)){if(0==(4294965248&s))r[o++]=s>>6&31|192;else{if(55296<=s&&56319>=s&&a<i){var c=t.charCodeAt(a);56320==(64512&c)&&(++a,s=((1023&s)<<10)+(1023&c)+65536)}0==(4294901760&s)?(r[o++]=s>>12&15|224,r[o++]=s>>6&63|128):(r[o++]=s>>18&7|240,r[o++]=s>>12&63|128,r[o++]=s>>6&63|128)}r[o++]=63&s|128}else r[o++]=s}}this.pos+=n},t.prototype.encodeObject=function(e,t){var n=this.extensionCodec.tryToEncode(e,this.context);if(null!=n)this.encodeExtension(n);else if(Array.isArray(e))this.encodeArray(e,t);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else{if("object"!=typeof e)throw Error("Unrecognized object: "+Object.prototype.toString.apply(e));this.encodeMap(e,t)}},t.prototype.encodeBinary=function(e){var t=e.byteLength;if(256>t)this.writeU8(196),this.writeU8(t);else if(65536>t)this.writeU8(197),this.writeU16(t);else{if(!(4294967296>t))throw Error("Too large binary: "+t);this.writeU8(198),this.writeU32(t)}e=c(e),this.writeU8a(e)},t.prototype.encodeArray=function(e,t){var n,r=e.length;if(16>r)this.writeU8(144+r);else if(65536>r)this.writeU8(220),this.writeU16(r);else{if(!(4294967296>r))throw Error("Too large array: "+r);this.writeU8(221),this.writeU32(r)}try{for(var i=D(e),o=i.next();!o.done;o=i.next())this.doEncode(o.value,t+1)}catch(e){var a={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}},t.prototype.countWithoutUndefined=function(e,t){var n,r=0;try{for(var i=D(t),o=i.next();!o.done;o=i.next())void 0!==e[o.value]&&r++}catch(e){var a={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return r},t.prototype.encodeMap=function(e,t){var n,r=Object.keys(e);this.sortKeys&&r.sort();var i=this.ignoreUndefined?this.countWithoutUndefined(e,r):r.length;if(16>i)this.writeU8(128+i);else if(65536>i)this.writeU8(222),this.writeU16(i);else{if(!(4294967296>i))throw Error("Too large map object: "+i);this.writeU8(223),this.writeU32(i)}try{for(var o=D(r),a=o.next();!a.done;a=o.next()){var s=a.value,c=e[s];this.ignoreUndefined&&void 0===c||(this.encodeString(s),this.doEncode(c,t+1))}}catch(e){var u={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(u)throw u.error}}},t.prototype.encodeExtension=function(e){var t=e.data.length;if(1===t)this.writeU8(212);else if(2===t)this.writeU8(213);else if(4===t)this.writeU8(214);else if(8===t)this.writeU8(215);else if(16===t)this.writeU8(216);else if(256>t)this.writeU8(199),this.writeU8(t);else if(65536>t)this.writeU8(200),this.writeU16(t);else{if(!(4294967296>t))throw Error("Too large extension object: "+t);this.writeU8(201),this.writeU32(t)}this.writeI8(e.type),this.writeU8a(e.data)},t.prototype.writeU8=function(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++},t.prototype.writeU8a=function(e){var t=e.length;this.ensureBufferSizeToWrite(t),this.bytes.set(e,this.pos),this.pos+=t},t.prototype.writeI8=function(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++},t.prototype.writeU16=function(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2},t.prototype.writeI16=function(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2},t.prototype.writeU32=function(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4},t.prototype.writeI32=function(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4},t.prototype.writeF32=function(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4},t.prototype.writeF64=function(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8},t.prototype.writeU64=function(e){this.ensureBufferSizeToWrite(8);var t=this.view,n=this.pos;t.setUint32(n,e/4294967296),t.setUint32(n+4,e),this.pos+=8},t.prototype.writeI64=function(e){this.ensureBufferSizeToWrite(8);var t=this.view,n=this.pos;t.setUint32(n,Math.floor(e/4294967296)),t.setUint32(n+4,e),this.pos+=8},t}(),P={};w=function(){function e(e,t){for(void 0===e&&(e=16),void 0===t&&(t=16),this.maxKeyLength=e,this.maxLengthPerKey=t,this.miss=this.hit=0,this.caches=[],e=0;e<this.maxKeyLength;e++)this.caches.push([])}return e.prototype.canBeCached=function(e){return 0<e&&e<=this.maxKeyLength},e.prototype.find=function(e,t,n){var r,i=this.caches[n-1];try{var o=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(i),a=o.next();e:for(;!a.done;a=o.next()){var s=a.value,c=s.bytes;for(i=0;i<n;i++)if(c[i]!==e[t+i])continue e;return s.str}}catch(e){var u={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(u)throw u.error}}return null},e.prototype.store=function(e,t){var n=this.caches[e.length-1];e={bytes:e,str:t},n.length>=this.maxLengthPerKey?n[Math.random()*n.length|0]=e:n.push(e)},e.prototype.decode=function(e,n,r){var i=this.find(e,n,r);return null!=i?(this.hit++,i):(this.miss++,i=t(e,n,r),e=Uint8Array.prototype.slice.call(e,n,n+r),this.store(e,i),i)},e}();var B=(b=function(e,t){return(b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");b(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),M=function(e,t){function n(n){return function(a){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,i=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(!((o=0<(o=s.trys).length&&o[o.length-1])||6!==n[0]&&2!==n[0])){s=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3]))s.label=n[1];else if(6===n[0]&&s.label<o[1])s.label=o[1],o=n;else{if(!(o&&s.label<o[2])){o[2]&&s.ops.pop(),s.trys.pop();continue}s.label=o[2],s.ops.push(n)}}n=t.call(e,s)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,a])}}var r,i,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a},j=function(e){function t(t){n[t]=e[t]&&function(n){return new Promise((function(r,i){!function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)}(r,i,(n=e[t](n)).done,n.value)}))}}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,r=e[Symbol.asyncIterator];return r?r.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),n={},t("next"),t("throw"),t("return"),n[Symbol.asyncIterator]=function(){return this},n)},U=function(e){return this instanceof U?(this.v=e,this):new U(e)},F=function(e,t,n){function r(e){u[e]&&(c[e]=function(t){return new Promise((function(n,r){1<l.push([e,t,n,r])||i(e,t)}))})}function i(e,t){try{(n=u[e](t)).value instanceof U?Promise.resolve(n.value.v).then(o,a):s(l[0][2],n)}catch(e){s(l[0][3],e)}var n}function o(e){i("next",e)}function a(e){i("throw",e)}function s(e,t){e(t),l.shift(),l.length&&i(l[0][0],l[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var c,u=n.apply(e,t||[]),l=[];return c={},r("next"),r("throw"),r("return"),c[Symbol.asyncIterator]=function(){return this},c},Q=new DataView(new ArrayBuffer(0)),G=new Uint8Array(Q.buffer);e:{try{Q.getInt8(0)}catch(e){var q=e.constructor;break e}throw Error("never reached")}var V=new q("Insufficient data"),K=new w,H=function(e){function t(n){n=e.call(this,n)||this;var r=Object.create(t.prototype);return Object.setPrototypeOf(n,r),Object.defineProperty(n,"name",{configurable:!0,enumerable:!1,value:t.name}),n}return B(t,e),t}(Error),W=function(){function e(e,t,n,r,i,o,a,s){void 0===e&&(e=x.defaultCodec),void 0===t&&(t=void 0),void 0===n&&(n=4294967295),void 0===r&&(r=4294967295),void 0===i&&(i=4294967295),void 0===o&&(o=4294967295),void 0===a&&(a=4294967295),void 0===s&&(s=K),this.extensionCodec=e,this.context=t,this.maxStrLength=n,this.maxBinLength=r,this.maxArrayLength=i,this.maxMapLength=o,this.maxExtLength=a,this.keyDecoder=s,this.pos=this.totalPos=0,this.view=Q,this.bytes=G,this.headByte=-1,this.stack=[]}return e.prototype.reinitializeState=function(){this.totalPos=0,this.headByte=-1,this.stack.length=0},e.prototype.setBuffer=function(e){this.bytes=c(e),(e=this.bytes)instanceof ArrayBuffer?e=new DataView(e):(e=c(e),e=new DataView(e.buffer,e.byteOffset,e.byteLength)),this.view=e,this.pos=0},e.prototype.appendBuffer=function(e){if(-1!==this.headByte||this.hasRemaining()){var t=this.bytes.subarray(this.pos);e=c(e);var n=new Uint8Array(t.length+e.length);n.set(t),n.set(e,t.length),this.setBuffer(n)}else this.setBuffer(e)},e.prototype.hasRemaining=function(e){return void 0===e&&(e=1),this.view.byteLength-this.pos>=e},e.prototype.createExtraByteError=function(e){var t=this.view;return new RangeError("Extra "+(t.byteLength-this.pos)+" of "+t.byteLength+" byte(s) found at buffer["+e+"]")},e.prototype.decode=function(e){if(this.reinitializeState(),this.setBuffer(e),e=this.doDecodeSync(),this.hasRemaining())throw this.createExtraByteError(this.pos);return e},e.prototype.decodeMulti=function(e){return M(this,(function(t){switch(t.label){case 0:this.reinitializeState(),this.setBuffer(e),t.label=1;case 1:return this.hasRemaining()?[4,this.doDecodeSync()]:[3,3];case 2:return t.sent(),[3,1];case 3:return[2]}}))},e.prototype.decodeAsync=function(e){var t,n,r,i,o,a,s;return o=this,s=function(){var o,a,s,c,u,h,d,f;return M(this,(function(p){switch(p.label){case 0:o=!1,p.label=1;case 1:p.trys.push([1,6,7,12]),t=j(e),p.label=2;case 2:return[4,t.next()];case 3:if((n=p.sent()).done)return[3,5];if(s=n.value,o)throw this.createExtraByteError(this.totalPos);this.appendBuffer(s);try{a=this.doDecodeSync(),o=!0}catch(e){if(!(e instanceof q))throw e}this.totalPos+=this.pos,p.label=4;case 4:return[3,2];case 5:return[3,12];case 6:return c=p.sent(),r={error:c},[3,12];case 7:return p.trys.push([7,,10,11]),n&&!n.done&&(i=t.return)?[4,i.call(t)]:[3,9];case 8:p.sent(),p.label=9;case 9:return[3,11];case 10:if(r)throw r.error;return[7];case 11:return[7];case 12:if(o){if(this.hasRemaining())throw this.createExtraByteError(this.totalPos);return[2,a]}throw h=(u=this).headByte,d=u.pos,f=u.totalPos,new RangeError("Insufficient data in parsing "+l(h)+" at "+f+" ("+d+" in the current buffer)")}}))},new(a=void 0,a=Promise)((function(e,t){function n(e){try{i(s.next(e))}catch(e){t(e)}}function r(e){try{i(s.throw(e))}catch(e){t(e)}}function i(t){var i;t.done?e(t.value):(i=t.value,i instanceof a?i:new a((function(e){e(i)}))).then(n,r)}i((s=s.apply(o,[])).next())}))},e.prototype.decodeArrayStream=function(e){return this.decodeMultiAsync(e,!0)},e.prototype.decodeStream=function(e){return this.decodeMultiAsync(e,!1)},e.prototype.decodeMultiAsync=function(e,t){return F(this,arguments,(function(){var n,r,i,o,a,s,c,u,l;return M(this,(function(h){switch(h.label){case 0:n=t,r=-1,h.label=1;case 1:h.trys.push([1,13,14,19]),i=j(e),h.label=2;case 2:return[4,U(i.next())];case 3:if((o=h.sent()).done)return[3,12];if(a=o.value,t&&0===r)throw this.createExtraByteError(this.totalPos);this.appendBuffer(a),n&&(r=this.readArraySize(),n=!1,this.complete()),h.label=4;case 4:h.trys.push([4,9,,10]),h.label=5;case 5:return[4,U(this.doDecodeSync())];case 6:return[4,h.sent()];case 7:return h.sent(),0==--r?[3,8]:[3,5];case 8:return[3,10];case 9:if(!((s=h.sent())instanceof q))throw s;return[3,10];case 10:this.totalPos+=this.pos,h.label=11;case 11:return[3,2];case 12:return[3,19];case 13:return c=h.sent(),u={error:c},[3,19];case 14:return h.trys.push([14,,17,18]),o&&!o.done&&(l=i.return)?[4,U(l.call(i))]:[3,16];case 15:h.sent(),h.label=16;case 16:return[3,18];case 17:if(u)throw u.error;return[7];case 18:return[7];case 19:return[2]}}))}))},e.prototype.doDecodeSync=function(){e:for(;;){var e=this.readHeadByte();if(224<=e)e-=256;else if(192>e){if(!(128>e))if(144>e){if(0!=(e-=128)){this.pushMapState(e),this.complete();continue e}e={}}else if(160>e){if(0!=(e-=144)){this.pushArrayState(e),this.complete();continue e}e=[]}else e-=160,e=this.decodeUtf8String(e,0)}else if(192===e)e=null;else if(194===e)e=!1;else if(195===e)e=!0;else if(202===e)e=this.readF32();else if(203===e)e=this.readF64();else if(204===e)e=this.readU8();else if(205===e)e=this.readU16();else if(206===e)e=this.readU32();else if(207===e)e=this.readU64();else if(208===e)e=this.readI8();else if(209===e)e=this.readI16();else if(210===e)e=this.readI32();else if(211===e)e=this.readI64();else if(217===e)e=this.lookU8(),e=this.decodeUtf8String(e,1);else if(218===e)e=this.lookU16(),e=this.decodeUtf8String(e,2);else if(219===e)e=this.lookU32(),e=this.decodeUtf8String(e,4);else if(220===e){if(0!==(e=this.readU16())){this.pushArrayState(e),this.complete();continue e}e=[]}else if(221===e){if(0!==(e=this.readU32())){this.pushArrayState(e),this.complete();continue e}e=[]}else if(222===e){if(0!==(e=this.readU16())){this.pushMapState(e),this.complete();continue e}e={}}else if(223===e){if(0!==(e=this.readU32())){this.pushMapState(e),this.complete();continue e}e={}}else if(196===e)e=this.lookU8(),e=this.decodeBinary(e,1);else if(197===e)e=this.lookU16(),e=this.decodeBinary(e,2);else if(198===e)e=this.lookU32(),e=this.decodeBinary(e,4);else if(212===e)e=this.decodeExtension(1,0);else if(213===e)e=this.decodeExtension(2,0);else if(214===e)e=this.decodeExtension(4,0);else if(215===e)e=this.decodeExtension(8,0);else if(216===e)e=this.decodeExtension(16,0);else if(199===e)e=this.lookU8(),e=this.decodeExtension(e,1);else if(200===e)e=this.lookU16(),e=this.decodeExtension(e,2);else{if(201!==e)throw new H("Unrecognized type byte: "+l(e));e=this.lookU32(),e=this.decodeExtension(e,4)}this.complete();for(var t=this.stack;0<t.length;){var n=t[t.length-1];if(0===n.type){if(n.array[n.position]=e,n.position++,n.position!==n.size)continue e;t.pop(),e=n.array}else{if(1===n.type){if("string"!=(r=typeof e)&&"number"!==r)throw new H("The type of key must be string or number but "+typeof e);if("__proto__"===e)throw new H("The key __proto__ is not allowed");n.key=e,n.type=2;continue e}if(n.map[n.key]=e,n.readCount++,n.readCount!==n.size){n.key=null,n.type=1;continue e}t.pop(),e=n.map}}return e}var r},e.prototype.readHeadByte=function(){return-1===this.headByte&&(this.headByte=this.readU8()),this.headByte},e.prototype.complete=function(){this.headByte=-1},e.prototype.readArraySize=function(){var e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:if(160>e)return e-144;throw new H("Unrecognized array type byte: "+l(e))}},e.prototype.pushMapState=function(e){if(e>this.maxMapLength)throw new H("Max length exceeded: map length ("+e+") > maxMapLengthLength ("+this.maxMapLength+")");this.stack.push({type:1,size:e,key:null,readCount:0,map:{}})},e.prototype.pushArrayState=function(e){if(e>this.maxArrayLength)throw new H("Max length exceeded: array length ("+e+") > maxArrayLength ("+this.maxArrayLength+")");this.stack.push({type:0,size:e,array:Array(e),position:0})},e.prototype.decodeUtf8String=function(e,n){var r;if(e>this.maxStrLength)throw new H("Max length exceeded: UTF-8 byte length ("+e+") > maxStrLength ("+this.maxStrLength+")");if(this.bytes.byteLength<this.pos+n+e)throw V;var i,o=this.pos+n;return this.stateIsMapKey()&&null!==(r=this.keyDecoder)&&void 0!==r&&r.canBeCached(e)?r=this.keyDecoder.decode(this.bytes,o,e):e>R?(r=this.bytes.subarray(o,o+e),r=T.decode(r)):r=t(this.bytes,o,e),i=r,this.pos+=n+e,i},e.prototype.stateIsMapKey=function(){return 0<this.stack.length&&1===this.stack[this.stack.length-1].type},e.prototype.decodeBinary=function(e,t){if(e>this.maxBinLength)throw new H("Max length exceeded: bin length ("+e+") > maxBinLength ("+this.maxBinLength+")");if(!this.hasRemaining(e+t))throw V;var n=this.pos+t;return n=this.bytes.subarray(n,n+e),this.pos+=t+e,n},e.prototype.decodeExtension=function(e,t){if(e>this.maxExtLength)throw new H("Max length exceeded: ext length ("+e+") > maxExtLength ("+this.maxExtLength+")");var n=this.view.getInt8(this.pos+t);return e=this.decodeBinary(e,t+1),this.extensionCodec.decode(e,n,this.context)},e.prototype.lookU8=function(){return this.view.getUint8(this.pos)},e.prototype.lookU16=function(){return this.view.getUint16(this.pos)},e.prototype.lookU32=function(){return this.view.getUint32(this.pos)},e.prototype.readU8=function(){var e=this.view.getUint8(this.pos);return this.pos++,e},e.prototype.readI8=function(){var e=this.view.getInt8(this.pos);return this.pos++,e},e.prototype.readU16=function(){var e=this.view.getUint16(this.pos);return this.pos+=2,e},e.prototype.readI16=function(){var e=this.view.getInt16(this.pos);return this.pos+=2,e},e.prototype.readU32=function(){var e=this.view.getUint32(this.pos);return this.pos+=4,e},e.prototype.readI32=function(){var e=this.view.getInt32(this.pos);return this.pos+=4,e},e.prototype.readU64=function(){var e,t,n=(e=this.view,t=this.pos,4294967296*e.getUint32(t)+e.getUint32(t+4));return this.pos+=8,n},e.prototype.readI64=function(){var e=n(this.view,this.pos);return this.pos+=8,e},e.prototype.readF32=function(){var e=this.view.getFloat32(this.pos);return this.pos+=4,e},e.prototype.readF64=function(){var e=this.view.getFloat64(this.pos);return this.pos+=8,e},e}(),z={},Y=function(e,t){function n(n){return function(a){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,i=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(!((o=0<(o=s.trys).length&&o[o.length-1])||6!==n[0]&&2!==n[0])){s=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3]))s.label=n[1];else if(6===n[0]&&s.label<o[1])s.label=o[1],o=n;else{if(!(o&&s.label<o[2])){o[2]&&s.ops.pop(),s.trys.pop();continue}s.label=o[2],s.ops.push(n)}}n=t.call(e,s)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,a])}}var r,i,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a},J=function(e){return this instanceof J?(this.v=e,this):new J(e)},X=function(e,t,n){function r(e){u[e]&&(c[e]=function(t){return new Promise((function(n,r){1<l.push([e,t,n,r])||i(e,t)}))})}function i(e,t){try{(n=u[e](t)).value instanceof J?Promise.resolve(n.value.v).then(o,a):s(l[0][2],n)}catch(e){s(l[0][3],e)}var n}function o(e){i("next",e)}function a(e){i("throw",e)}function s(e,t){e(t),l.shift(),l.length&&i(l[0][0],l[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var c,u=n.apply(e,t||[]),l=[];return c={},r("next"),r("throw"),r("return"),c[Symbol.asyncIterator]=function(){return this},c};return y}()})),mf=Math.min;kr({target:"Array",proto:!0},{copyWithin:[].copyWithin||function(e,t){var n=Gr(this),r=Wr(n.length),i=bo(e,r),o=bo(t,r),a=2<arguments.length?arguments[2]:void 0;for(r=mf((void 0===a?r:bo(a,r))-o,r-i),a=1,o<i&&i<o+r&&(a=-1,o+=r-1,i+=r-1);0<r--;)o in n?n[i]=n[o]:delete n[i],i+=a,o+=a;return n}});var yf=mi("Array").copyWithin,bf=Array.prototype;kr({target:"Array",proto:!0,forced:Ca("every")},{every:function(e){return Yi(this,e,1<arguments.length?arguments[1]:void 0)}});var _f=mi("Array").every,Ef=Array.prototype,wf=function(e){var t=e.every;return e===Ef||e instanceof Array&&t===Ef.every?_f:t},If=Ii.getWeakData,Cf=fo.set,Sf=fo.getterFor,Tf=0,Rf=function(e){return e.frozen||(e.frozen=new kf)},kf=function(){this.entries=[]},Of=function(e,t){return Ji(e.entries,(function(e){return e[0]===t}))};kf.prototype={get:function(e){if(e=Of(this,e))return e[1]},has:function(e){return!!Of(this,e)},set:function(e,t){var n=Of(this,e);n?n[1]=t:this.entries.push([e,t])},delete:function(e){var t=Xi(this.entries,(function(t){return t[0]===e}));return~t&&this.entries.splice(t,1),!!~t}};var Nf={getConstructor:function(e,t,n,r){var i=e((function(e,o){ji(e,i,t),Cf(e,{type:t,id:Tf++,frozen:void 0}),null!=o&&Mi(o,e[r],e,n)})),o=Sf(t),a=function(e,t,n){var r=o(e),i=If(wr(t),!0);return!0===i?Rf(r).set(t,n):i[r.id]=n,e};return Mo(i.prototype,{delete:function(e){var t=o(this);if(!or(e))return!1;var n=If(e);return!0===n?Rf(t).delete(e):n&&cr(n,t.id)&&delete n[t.id]},has:function(e){var t=o(this);if(!or(e))return!1;var n=If(e);return!0===n?Rf(t).has(e):n&&cr(n,t.id)}}),Mo(i.prototype,n?{get:function(e){var t=o(this);if(or(e)){var n=If(e);return!0===n?Rf(t).get(e):n?n[t.id]:void 0}},set:function(e,t){return a(this,e,t)}}:{add:function(e){return a(this,e,!0)}}),i}},xf=(e((function(e){var t=fo.enforce,n=!Hn.ActiveXObject&&"ActiveXObject"in Hn,r=Object.isExtensible,i=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}};if(e=e.exports=vo("WeakMap",i,Nf),eo&&n){var o=Nf.getConstructor(i,"WeakMap",!0);Ii.REQUIRED=!0;var a=(n=e.prototype).delete,s=n.has,c=n.get,u=n.set;Mo(n,{delete:function(e){if(or(e)&&!r(e)){var n=t(this);return n.frozen||(n.frozen=new o),a.call(this,e)||n.frozen.delete(e)}return a.call(this,e)},has:function(e){if(or(e)&&!r(e)){var n=t(this);return n.frozen||(n.frozen=new o),s.call(this,e)||n.frozen.has(e)}return s.call(this,e)},get:function(e){if(or(e)&&!r(e)){var n=t(this);return n.frozen||(n.frozen=new o),s.call(this,e)?c.call(this,e):n.frozen.get(e)}return c.call(this,e)},set:function(e,n){if(or(e)&&!r(e)){var i=t(this);i.frozen||(i.frozen=new o),s.call(this,e)?u.call(this,e,n):i.frozen.set(e,n)}else u.call(this,e,n);return this}})}})),Math.min),Df=[].lastIndexOf,Lf=!!Df&&0>1/[1].lastIndexOf(1,-0),Pf=Ca("lastIndexOf"),Bf=Lf||Pf?function(e){if(Lf)return Df.apply(this,arguments)||0;var t=ir(this),n=Wr(t.length),r=n-1;for(1<arguments.length&&(r=xf(r,Kr(arguments[1]))),0>r&&(r=n+r);0<=r;r--)if(r in t&&t[r]===e)return r||0;return-1}:Df;kr({target:"Array",proto:!0,forced:Bf!==[].lastIndexOf},{lastIndexOf:Bf});var Mf=mi("Array").lastIndexOf,jf=Array.prototype,Uf=function(e){var t=e.lastIndexOf;return e===jf||e instanceof Array&&t===jf.lastIndexOf?Mf:t};let Ff,Qf,Gf,qf=()=>function(e){var t;return e=Sc(t=window.atob(e).split("")).call(t,(e=>e.charCodeAt(0))),new Uint8Array(e,0,e.length/Uint8Array.BYTES_PER_ELEMENT)}("AGFzbQEAAAABMAlgA39/fwF/YAF/AGACf38AYAF/AX9gAn9/AX9gA39/fwBgBH9/f38AYAABf2AAAAI6AgNlbnYWZW1zY3JpcHRlbl9yZXNpemVfaGVhcAADA2VudhVlbXNjcmlwdGVuX21lbWNweV9iaWcAAAMjIggAAAAAAQEDAQEEBAQEAQEGAQYCBQUAAgAHAwEDAAIHAQMEBQFwAQYGBQYBAYACgAIGCQF/AUHQ48ACCweUAQoGbWVtb3J5AgARX193YXNtX2NhbGxfY3RvcnMAAhlfX2luZGlyZWN0X2Z1bmN0aW9uX3RhYmxlAQAGbWFsbG9jABwEZnJlZQAdEF9fZXJybm9fbG9jYXRpb24AGwx6bGliQ29tcHJlc3MAGglzdGFja1NhdmUAIQxzdGFja1Jlc3RvcmUAIgpzdGFja0FsbG9jACMJCwEAQQELBRgZDA0PCq6FAiIDAAELpQcBBH8gAEH//wNxIQMgAEEQdiEEQQEhACACQQFGBEAgAyABLQAAaiIAQfH/A2sgACAAQfD/A0sbIgAgBGoiA0EQdCIEQYCAPGogBCADQfD/A0sbIAByDwsgAQR/IAJBEE8EQAJAAkACQCACQa8rSwRAA0AgAkGwK2shAkHbAiEFIAEhAANAIAMgAC0AAGoiAyAEaiADIAAtAAFqIgNqIAMgAC0AAmoiA2ogAyAALQADaiIDaiADIAAtAARqIgNqIAMgAC0ABWoiA2ogAyAALQAGaiIDaiADIAAtAAdqIgNqIAMgAC0ACGoiA2ogAyAALQAJaiIDaiADIAAtAApqIgNqIAMgAC0AC2oiA2ogAyAALQAMaiIDaiADIAAtAA1qIgNqIAMgAC0ADmoiA2ogAyAALQAPaiIDaiEEIABBEGohACAFQQFrIgUNAAsgBEHx/wNwIQQgA0Hx/wNwIQMgAUGwK2ohASACQa8rSw0ACyACRQ0DIAJBEEkNAQsDQCADIAEtAABqIgAgBGogACABLQABaiIAaiAAIAEtAAJqIgBqIAAgAS0AA2oiAGogACABLQAEaiIAaiAAIAEtAAVqIgBqIAAgAS0ABmoiAGogACABLQAHaiIAaiAAIAEtAAhqIgBqIAAgAS0ACWoiAGogACABLQAKaiIAaiAAIAEtAAtqIgBqIAAgAS0ADGoiAGogACABLQANaiIAaiAAIAEtAA5qIgBqIAAgAS0AD2oiA2ohBCABQRBqIQEgAkEQayICQQ9LDQALIAJFDQELIAJBAWshBiACQQNxIgUEQCABIQADQCACQQFrIQIgAyAALQAAaiIDIARqIQQgAEEBaiIBIQAgBUEBayIFDQALCyAGQQNJDQADQCADIAEtAABqIgAgAS0AAWoiBSABLQACaiIGIAEtAANqIgMgBiAFIAAgBGpqamohBCABQQRqIQEgAkEEayICDQALCyAEQfH/A3AhBCADQfH/A3AhAwsgBEEQdCADcg8LAkAgAkUNACACQQFrIQYgAkEDcSIFBEAgASEAA0AgAkEBayECIAMgAC0AAGoiAyAEaiEEIABBAWoiASEAIAVBAWsiBQ0ACwsgBkEDSQ0AA0AgAyABLQAAaiIAIAEtAAFqIgUgAS0AAmoiBiABLQADaiIDIAYgBSAAIARqampqIQQgAUEEaiEBIAJBBGsiAg0ACwsgBEHx/wNwQRB0IANB8f8DayADIANB8P8DSxtyBSAACwsKACAAIAEgAhADC4UJAQJ/IAFFBEBBAA8LIABBf3MhAAJAIAJFDQAgAUEDcUUNACABLQAAIABB/wFxc0ECdEGACGooAgAgAEEIdnMhACACQQFrIgRBACABQQFqIgNBA3EbRQRAIAMhASAEIQIMAQsgAS0AASAAQf8BcXNBAnRBgAhqKAIAIABBCHZzIQAgAUECaiEDAkAgAkECayIERQ0AIANBA3FFDQAgAS0AAiAAQf8BcXNBAnRBgAhqKAIAIABBCHZzIQAgAUEDaiEDAkAgAkEDayIERQ0AIANBA3FFDQAgAS0AAyAAQf8BcXNBAnRBgAhqKAIAIABBCHZzIQAgAkEEayECIAFBBGohAQwCCyADIQEgBCECDAELIAMhASAEIQILIAJBH0sEQANAIAEoAhwgASgCGCABKAIUIAEoAhAgASgCDCABKAIIIAEoAgQgASgCACAAcyIAQQZ2QfwHcUGAGGooAgAgAEH/AXFBAnRBgCBqKAIAcyAAQQ52QfwHcUGAEGooAgBzIABBFnZB/AdxQYAIaigCAHNzIgBBBnZB/AdxQYAYaigCACAAQf8BcUECdEGAIGooAgBzIABBDnZB/AdxQYAQaigCAHMgAEEWdkH8B3FBgAhqKAIAc3MiAEEGdkH8B3FBgBhqKAIAIABB/wFxQQJ0QYAgaigCAHMgAEEOdkH8B3FBgBBqKAIAcyAAQRZ2QfwHcUGACGooAgBzcyIAQQZ2QfwHcUGAGGooAgAgAEH/AXFBAnRBgCBqKAIAcyAAQQ52QfwHcUGAEGooAgBzIABBFnZB/AdxQYAIaigCAHNzIgBBBnZB/AdxQYAYaigCACAAQf8BcUECdEGAIGooAgBzIABBDnZB/AdxQYAQaigCAHMgAEEWdkH8B3FBgAhqKAIAc3MiAEEGdkH8B3FBgBhqKAIAIABB/wFxQQJ0QYAgaigCAHMgAEEOdkH8B3FBgBBqKAIAcyAAQRZ2QfwHcUGACGooAgBzcyIAQQZ2QfwHcUGAGGooAgAgAEH/AXFBAnRBgCBqKAIAcyAAQQ52QfwHcUGAEGooAgBzIABBFnZB/AdxQYAIaigCAHNzIgBBBnZB/AdxQYAYaigCACAAQf8BcUECdEGAIGooAgBzIABBDnZB/AdxQYAQaigCAHMgAEEWdkH8B3FBgAhqKAIAcyEAIAFBIGohASACQSBrIgJBH0sNAAsLIAJBA0sEQANAIAEoAgAgAHMiAEEGdkH8B3FBgBhqKAIAIABB/wFxQQJ0QYAgaigCAHMgAEEOdkH8B3FBgBBqKAIAcyAAQRZ2QfwHcUGACGooAgBzIQAgAUEEaiEBIAJBBGsiAkEDSw0ACwsCQCACRQ0AIAJBAXEEfyABLQAAIABB/wFxc0ECdEGACGooAgAgAEEIdnMhACABQQFqIQEgAkEBawUgAgshAyACQQFGDQADQCABLQABIAEtAAAgAEH/AXFzQQJ0QYAIaigCACAAQQh2cyIAQf8BcXNBAnRBgAhqKAIAIABBCHZzIQAgAUECaiEBIANBAmsiAw0ACwsgAEF/cwsKACAAIAEgAhAFC9wEAQN/AkBByN8ALQAAQTFHDQAgAEUNACAAQQA2AhggACgCICIBRQRAIABBADYCKCAAQQE2AiBBASEBCyAAKAIkRQRAIABBAjYCJAsgACgCKEEBQcQtIAERAAAiAUUNACAAIAE2AhwgAUEPNgIwIAFBADYCHCABQQA2AhggAUEqNgIEIAEgADYCACABQQs2AlAgAUGAgAI2AiwgAUH//wE2AjQgAUGAEDYCTCABQQQ2AlggAUH/DzYCVCABIAAoAihBgIACQQIgACgCIBEAADYCOCABIAAoAiggASgCLEECIAAoAiARAAA2AkAgACgCKCABKAJMQQIgACgCIBEAACECIAFBADYCwC0gASACNgJEIAFBgAg2ApwtIAEgACgCKEGACEEEIAAoAiARAAAiAjYCCCABIAEoApwtIgNBAnQ2AgwCQAJAIAEoAjhFDQAgASgCQEUNACACRQ0AIAEoAkQNAQsgAUGaBTYCBCAAQbjfACgCADYCGCAAEAgPCyABQQA2AogBIAFBCTYChAEgAUEIOgAkIAEgAiADQQNsajYCmC0gASACIANBfnFqNgKkLSAAEAkNACAAKAIcIgAgACgCLEEBdDYCPCAAKAJEIgEgACgCTEEBdEECayIDakEAOwEAIAEgAxAgIABBADYCtC0gAEKAgICAIDcCdCAAQgA3AmggAEKAgICAIDcCXCAAQQA2AkggACAAKAKEAUEMbCIBQYTIAGovAQA2ApABIAAgAUGAyABqLwEANgKMASAAIAFBgsgAai8BADYCgAEgACABQYbIAGovAQA2AnwLC6kCAQN/AkAgAEUNACAAKAIgRQ0AIAAoAiQiA0UNACAAKAIcIgFFDQAgASgCACAARw0AAkACQCABKAIEIgJBOWsOOQECAgICAgICAgICAgECAgIBAgICAgICAgICAgICAgICAgIBAgICAgICAgICAgIBAgICAgICAgICAQALIAJBmgVGDQAgAkEqRw0BCwJ/An8CfyABKAIIIgIEQCAAKAIoIAIgAxECACAAKAIcIQELIAEoAkQiAgsEQCAAKAIoIAIgACgCJBECACAAKAIcIQELIAEoAkAiAgsEQCAAKAIoIAIgACgCJBECACAAKAIcIQELIAEoAjgiAgsEQCAAKAIoIAIgACgCJBECACAAKAIcIQELIAAoAiggASAAKAIkEQIAIABBADYCHAsLlgIBA39BfiECAkAgAEUNACAAKAIgRQ0AIAAoAiRFDQAgACgCHCIBRQ0AIAEoAgAgAEcNAAJAAkAgASgCBCIDQTlrDjkBAgICAgICAgICAgIBAgICAQICAgICAgICAgICAgICAgICAQICAgICAgICAgICAQICAgICAgICAgEACyADQZoFRg0AIANBKkcNAQsgAEECNgIsIABBADYCCCAAQgA3AhQgAUEANgIUIAEgASgCCDYCECABKAIYIgJBf0wEQCABQQAgAmsiAjYCGAsgAUE5QSpB8QAgAhsgAkECRhs2AgQgAAJ/IAJBAkYEQEEAQQBBABAGDAELQQBBAEEAEAQLNgIwQQAhAiABQQA2AiggARAQCyACC9wIAQt/IAAoAiwiB0GGAmshCyAAKAJ0IQUgByEBA0AgACgCPCAFayAAKAJsIghrIQYgASALaiAITQRAIAAoAjgiASABIAdqIAcgBmsQHxogACAAKAJwIAdrNgJwIAAgACgCbCAHayIINgJsIAAgACgCXCAHazYCXCAAKAJMIgRBAWshCiAAKAJEIARBAXRqIQMgACgCLCEBIARBA3EiAgRAA0AgA0ECayIDQQAgAy8BACIFIAFrIgkgBSAJSRs7AQAgBEEBayEEIAJBAWsiAg0ACwsgCkEDTwRAA0AgA0ECayICQQAgAi8BACICIAFrIgUgAiAFSRs7AQAgA0EEayICQQAgAi8BACICIAFrIgUgAiAFSRs7AQAgA0EGayICQQAgAi8BACICIAFrIgUgAiAFSRs7AQAgA0EIayIDQQAgAy8BACICIAFrIgUgAiAFSRs7AQAgBEEEayIEDQALCyABQQFrIQogACgCQCABQQF0aiEDIAEhBCABQQNxIgIEQANAIANBAmsiA0EAIAMvAQAiBSABayIJIAUgCUkbOwEAIARBAWshBCACQQFrIgINAAsLIApBA08EQANAIANBAmsiAkEAIAIvAQAiAiABayIFIAIgBUkbOwEAIANBBGsiAkEAIAIvAQAiAiABayIFIAIgBUkbOwEAIANBBmsiAkEAIAIvAQAiAiABayIFIAIgBUkbOwEAIANBCGsiA0EAIAMvAQAiAiABayIFIAIgBUkbOwEAIARBBGsiBA0ACwsgBiAHaiEGCwJAIAAoAgAiASgCBCIERQ0AIAAoAnQhAiAGIAQgBCAGSxsiAwRAIAAoAjghBSABIAQgA2s2AgQgBSAIaiACaiABKAIAIAMQHyEEAkACQAJAIAEoAhwoAhhBAWsOAgABAgsgASABKAIwIAQgAxAENgIwDAELIAEgASgCMCAEIAMQBjYCMAsgASABKAIAIANqNgIAIAEgASgCCCADajYCCCAAKAJ0IQILIAAgAiADaiIFNgJ0AkAgACgCtC0iAyAFakEDSQ0AIAAgACgCOCIJIAAoAmwgA2siAWoiBC0AACICNgJIIAAgACgCVCIIIAQtAAEgAiAAKAJYIgZ0c3EiBDYCSANAIANFDQEgACABIAlqLQACIAQgBnRzIAhxIgQ2AkggACgCQCAAKAI0IAFxQQF0aiAAKAJEIARBAXRqIgIvAQA7AQAgAiABOwEAIAAgA0EBayIDNgK0LSABQQFqIQEgAyAFakECSw0ACwsgBUGFAksNACAAKAIAKAIERQ0AIAAoAiwhAQwBCwsCQCAAKAI8IgQgACgCwC0iAU0NACAAKAJ0IAAoAmxqIgMgAUsEQCAAKAI4IANqIAQgA2siAUGCAiABQYICSRsiARAgIAAgASADajYCwC0PCyADQYICaiIDIAFNDQAgACgCOCABaiAEIAFrIgQgAyABayIBIAEgBEsbIgEQICAAIAAoAsAtIAFqNgLALQsLsSwBCn8CQCAARQ0AIAAoAiBFDQAgACgCJEUNACAAKAIcIgFFDQAgASgCACAARw0AAkACQCABKAIEIgNBOWsOOQECAgICAgICAgICAgECAgIBAgICAgICAgICAgICAgICAgIBAgICAgICAgICAgIBAgICAgICAgICAQALIANBmgVGDQAgA0EqRw0BCwJAAkAgACgCDEUNACAAKAIEIgIEQCAAKAIARQ0BCyADQZoFRw0BCyAAQbDfACgCADYCGA8LIAAoAhBFBEAgAEG83wAoAgA2AhgPCyABKAIoIQUgAUEDNgIoAkAgASgCFARAIAEQEwJAIAAoAhAiAyABKAIUIgQgAyAESRsiAkUNACAAKAIMIAEoAhAgAhAfGiAAIAAoAgwgAmo2AgwgASABKAIQIAJqNgIQIAAgACgCFCACajYCFCAAIAAoAhAgAmsiAzYCECABIAEoAhQgAmsiBDYCFCAEDQAgASABKAIINgIQQQAhBAsgAwRAIAEoAgQhAwwCCyABQX82AigPCyACDQAgBUEBdEF3QQAgBUEEShtqQQZIDQAgAEG83wAoAgA2AhgPCwJAAkACQAJAAn8CQAJAAkACQAJAAkAgA0EqRwRAIANBmgVHDQEgACgCBEUNAiAAQbzfACgCADYCGA8LIAEoAjBBDHRBgPABayEDQQAhAgJAIAEoAogBQQFKDQAgASgChAEiBUECSA0AQcAAIQIgBUEGSA0AQYABQcABIAVBBkYbIQILIAEgBEEBajYCFCABKAIIIARqIAIgA3IiAkEgciACIAEoAmwbIgJBCHY6AAAgASABKAIUIgNBAWo2AhQgAyABKAIIaiACQR9wIAJyQR9zOgAAIAEoAmwEQCAAKAIwIQIgASABKAIUIgNBAWo2AhQgAyABKAIIaiACQRh2OgAAIAEgASgCFCIDQQFqNgIUIAMgASgCCGogAkEQdjoAACAAKAIwIQIgASABKAIUIgNBAWo2AhQgAyABKAIIaiACQQh2OgAAIAEgASgCFCIDQQFqNgIUIAMgASgCCGogAjoAAAsgAEEAQQBBABAENgIwIAFB8QA2AgQgACgCHCICEBMCQCAAKAIQIgMgAigCFCIEIAMgBEkbIgNFDQAgACgCDCACKAIQIAMQHxogACAAKAIMIANqNgIMIAIgAigCECADajYCECAAIAAoAhQgA2o2AhQgACAAKAIQIANrNgIQIAIgAigCFCADayIDNgIUIAMNACACIAIoAgg2AhALIAEoAhQNBCABKAIEIQMLAkACQAJAAkACQAJAAkAgA0E5RgR/IABBAEEAQQAQBjYCMCABIAEoAhQiAkEBajYCFCACIAEoAghqQR86AAAgASABKAIUIgJBAWo2AhQgAiABKAIIakGLAToAACABIAEoAhQiAkEBajYCFCACIAEoAghqQQg6AAAgASgCHCICDQIgASABKAIUIgJBAWo2AhQgAiABKAIIakEAOgAAIAEgASgCFCICQQFqNgIUIAIgASgCCGpBADoAACABIAEoAhQiAkEBajYCFCACIAEoAghqQQA6AAAgASABKAIUIgJBAWo2AhQgAiABKAIIakEAOgAAIAEgASgCFCICQQFqNgIUIAIgASgCCGpBADoAAEECIQIgASgChAEiA0EJRwRAQQQgASgCiAFBAUpBAnQgA0ECSBshAgsgASABKAIUIgNBAWo2AhQgAyABKAIIaiACOgAAIAEgASgCFCICQQFqNgIUIAIgASgCCGpBAzoAACABQfEANgIEIAAoAhwiAhATAkAgACgCECIDIAIoAhQiBCADIARJGyIDRQ0AIAAoAgwgAigCECADEB8aIAAgACgCDCADajYCDCACIAIoAhAgA2o2AhAgACAAKAIUIANqNgIUIAAgACgCECADazYCECACIAIoAhQgA2siAzYCFCADDQAgAiACKAIINgIQCyABKAIUDQEgASgCBAUgAwtBxQBrDiMCBgYGAwYGBgYGBgYGBgYGBgYGBgYGBAYGBgYGBgYGBgYGBQYLIAFBfzYCKA8LIAIoAiQhAyACKAIcIQQgAigCECEFIAIoAiwhBiACKAIAIQggASABKAIUIgdBAWo2AhRBAiECIAcgASgCCGogBkEAR0EBdCAIQQBHciAFQQBHQQJ0ciAEQQBHQQN0ciADQQBHQQR0cjoAACABKAIcKAIEIQMgASABKAIUIgRBAWo2AhQgBCABKAIIaiADOgAAIAEoAhwoAgQhAyABIAEoAhQiBEEBajYCFCAEIAEoAghqIANBCHY6AAAgASgCHC8BBiEDIAEgASgCFCIEQQFqNgIUIAQgASgCCGogAzoAACABKAIcLQAHIQMgASABKAIUIgRBAWo2AhQgBCABKAIIaiADOgAAIAEoAoQBIgNBCUcEQEEEIAEoAogBQQFKQQJ0IANBAkgbIQILIAEgASgCFCIDQQFqNgIUIAMgASgCCGogAjoAACABKAIcKAIMIQIgASABKAIUIgNBAWo2AhQgAyABKAIIaiACOgAAIAEoAhwiAigCEAR/IAIoAhQhAiABIAEoAhQiA0EBajYCFCADIAEoAghqIAI6AAAgASgCHCgCFCECIAEgASgCFCIDQQFqNgIUIAMgASgCCGogAkEIdjoAACABKAIcBSACCygCLARAIAAgACgCMCABKAIIIAEoAhQQBjYCMAsgAUHFADYCBCABQQA2AiALIAEoAhwiBCgCECIDBEAgASgCFCICIAQvARQgASgCICIGayIFaiABKAIMIgRLBEADQCABKAIIIAJqIAMgBmogBCACayIEEB8aIAEgASgCDCIDNgIUAkAgAiADTw0AIAEoAhwoAixFDQAgACAAKAIwIAEoAgggAmogAyACaxAGNgIwCyABIAEoAiAgBGo2AiAgACgCHCICEBMCQCAAKAIQIgMgAigCFCIGIAMgBkkbIgNFDQAgACgCDCACKAIQIAMQHxogACAAKAIMIANqNgIMIAIgAigCECADajYCECAAIAAoAhQgA2o2AhQgACAAKAIQIANrNgIQIAIgAigCFCADayIDNgIUIAMNACACIAIoAgg2AhALIAEoAhQEQCABQX82AigPCyABKAIgIQYgASgCHCgCECEDQQAhAiAFIARrIgUgASgCDCIESw0ACwsgASgCCCACaiADIAZqIAUQHxogASABKAIUIAVqIgM2AhQCQCACIANPDQAgASgCHCgCLEUNACAAIAAoAjAgASgCCCACaiADIAJrEAY2AjALIAFBADYCIAsgAUHJADYCBAsgASgCHCgCHARAIAEoAhQiAiEFA0ACQCACIAEoAgxHDQACQCACIAVNDQAgASgCHCgCLEUNACAAIAAoAjAgASgCCCAFaiACIAVrEAY2AjALIAAoAhwiAhATAkAgACgCECIDIAIoAhQiBCADIARJGyIDRQ0AIAAoAgwgAigCECADEB8aIAAgACgCDCADajYCDCACIAIoAhAgA2o2AhAgACAAKAIUIANqNgIUIAAgACgCECADazYCECACIAIoAhQgA2siAzYCFCADDQAgAiACKAIINgIQC0EAIQJBACEFIAEoAhRFDQAgAUF/NgIoDwsgASgCHCgCHCEDIAEgASgCICIEQQFqNgIgIAMgBGotAAAhAyABIAJBAWo2AhQgASgCCCACaiADOgAAIAMEQCABKAIUIQIMAQsLAkAgASgCHCgCLEUNACABKAIUIgIgBU0NACAAIAAoAjAgASgCCCAFaiACIAVrEAY2AjALIAFBADYCIAsgAUHbADYCBAsCQCABKAIcKAIkRQ0AIAEoAhQiAiEFA0ACQCACIAEoAgxHDQACQCACIAVNDQAgASgCHCgCLEUNACAAIAAoAjAgASgCCCAFaiACIAVrEAY2AjALIAAoAhwiAhATAkAgACgCECIDIAIoAhQiBCADIARJGyIDRQ0AIAAoAgwgAigCECADEB8aIAAgACgCDCADajYCDCACIAIoAhAgA2o2AhAgACAAKAIUIANqNgIUIAAgACgCECADazYCECACIAIoAhQgA2siAzYCFCADDQAgAiACKAIINgIQC0EAIQJBACEFIAEoAhRFDQAgAUF/NgIoDwsgASgCHCgCJCEDIAEgASgCICIEQQFqNgIgIAMgBGotAAAhAyABIAJBAWo2AhQgASgCCCACaiADOgAAIAMEQCABKAIUIQIMAQsLIAEoAhwoAixFDQAgASgCFCICIAVNDQAgACAAKAIwIAEoAgggBWogAiAFaxAGNgIwCyABQecANgIECyABKAIcKAIsBEAgASgCDCABKAIUIgJBAmpJBEAgACgCHCICEBMCQCAAKAIQIgMgAigCFCIEIAMgBEkbIgNFDQAgACgCDCACKAIQIAMQHxogACAAKAIMIANqNgIMIAIgAigCECADajYCECAAIAAoAhQgA2o2AhQgACAAKAIQIANrNgIQIAIgAigCFCADayIDNgIUIAMNACACIAIoAgg2AhALIAEoAhQNBUEAIQILIAAoAjAhAyABIAJBAWo2AhQgASgCCCACaiADOgAAIAAoAjAhAiABIAEoAhQiA0EBajYCFCADIAEoAghqIAJBCHY6AAAgAEEAQQBBABAGNgIwCyABQfEANgIEIAAoAhwiAhATAkAgACgCECIDIAIoAhQiBCADIARJGyIDRQ0AIAAoAgwgAigCECADEB8aIAAgACgCDCADajYCDCACIAIoAhAgA2o2AhAgACAAKAIUIANqNgIUIAAgACgCECADazYCECACIAIoAhQgA2siAzYCFCADDQAgAiACKAIINgIQCyABKAIURQ0AIAFBfzYCKA8LIAAoAgQNAQsgASgCdA0AIAEoAgRBmgVGDQgLIAEoAoQBIgJFBEAgAUEDEAwMBAsCQAJAIAEoAogBQQJrDgIAAQQLA0ACQAJAIAEoAnQNACABEAogASgCdA0AIAFBADYCtC0MAQsgAUEANgJgIAEoAjggASgCbGotAAAhAiABKAKkLSABKAKgLSIDQQF0akEAOwEAIAEgA0EBajYCoC0gAyABKAKYLWogAjoAACABIAJBAnRqQZQBaiICIAIvAQBBAWo7AQAgASABKAJ0QQFrNgJ0IAEgASgCbEEBaiICNgJsIAEoAqAtIAEoApwtQQFrRw0BIAEgASgCXCIEQQBOBH8gASgCOCAEagVBAAsgAiAEa0EAEBQgASABKAJsNgJcIAEoAgAiAigCHCIDEBMCQCACKAIQIgQgAygCFCIFIAQgBUkbIgRFDQAgAigCDCADKAIQIAQQHxogAiACKAIMIARqNgIMIAMgAygCECAEajYCECACIAIoAhQgBGo2AhQgAiACKAIQIARrNgIQIAMgAygCFCAEayICNgIUIAINACADIAMoAgg2AhALIAEoAgAoAhANAQwHCwsgASgCoC1FDQcgASABKAJcIgNBAE4EfyABKAI4IANqBUEACyABKAJsIANrQQAQFCABIAEoAmw2AlwgASgCACICKAIcIgMQEwJAIAIoAhAiBCADKAIUIgUgBCAFSRsiBEUNACACKAIMIAMoAhAgBBAfGiACIAIoAgwgBGo2AgwgAyADKAIQIARqNgIQIAIgAigCFCAEajYCFCACIAIoAhAgBGs2AhAgAyADKAIUIARrIgI2AhQgAg0AIAMgAygCCDYCEAsgASgCACgCEEUNBQwHCwNAAkACQAJAIAEoAnQiAkGDAk8EQCABQQA2AmAMAQsgARAKIAEoAnQiAgRAIAFBADYCYCACQQJLDQEgASgCbCEDDAILIAFBADYCtC0gASgCoC1FDQogASABKAJcIgNBAE4EfyABKAI4IANqBUEACyABKAJsIANrQQAQFCABIAEoAmw2AlwgASgCACICKAIcIgMQEwJAIAIoAhAiBCADKAIUIgUgBCAFSRsiBEUNACACKAIMIAMoAhAgBBAfGiACIAIoAgwgBGo2AgwgAyADKAIQIARqNgIQIAIgAigCFCAEajYCFCACIAIoAhAgBGs2AhAgAyADKAIUIARrIgI2AhQgAg0AIAMgAygCCDYCEAsgASgCACgCEEUNCAwKCyABKAJsIgNFBEBBACEDDAELIAEoAjggA2oiBkEBayIFLQAAIgQgBi0AAEcNACAEIAUtAAJHDQAgBCAFLQADRw0AIAZBggJqIQlBfyEIAkACQAJAAkACQAJAA0AgBiAIaiIFLQAEIARGBEAgBCAFLQAFRw0CIAQgBS0ABkcNAyAEIAUtAAdHDQQgBCAGIAhBCGoiCmoiBy0AAEcNByAEIAUtAAlHDQUgBCAFLQAKRw0GIAVBC2ohByAIQfYBSg0HIAohCCAEIActAABGDQEMBwsLIAVBBGohBwwFCyAFQQVqIQcMBAsgBUEGaiEHDAMLIAVBB2ohBwwCCyAFQQlqIQcMAQsgBUEKaiEHCyABIAIgByAJa0GCAmoiBCACIARJGyICNgJgIAJBA0kNACABKAKkLSABKAKgLSIDQQF0akEBOwEAIAEgA0EBajYCoC0gAyABKAKYLWogAkEDayICOgAAIAJB/wFxQYDNAGotAABBAnQgAWpBmAlqIgIgAi8BAEEBajsBACABQYDJAC0AAEECdGpBiBNqIgIgAi8BAEEBajsBACABKAJgIQIgAUEANgJgIAEgASgCdCACazYCdCABIAIgASgCbGoiAjYCbCABKAKgLSABKAKcLUEBa0cNAgwBCyABKAI4IANqLQAAIQIgASgCpC0gASgCoC0iA0EBdGpBADsBACABIANBAWo2AqAtIAMgASgCmC1qIAI6AAAgASACQQJ0akGUAWoiAiACLwEAQQFqOwEAIAEgASgCdEEBazYCdCABIAEoAmxBAWoiAjYCbCABKAKgLSABKAKcLUEBa0cNAQsgASABKAJcIgRBAE4EfyABKAI4IARqBUEACyACIARrQQAQFCABIAEoAmw2AlwgASgCACICKAIcIgMQEwJAIAIoAhAiBCADKAIUIgUgBCAFSRsiBEUNACACKAIMIAMoAhAgBBAfGiACIAIoAgwgBGo2AgwgAyADKAIQIARqNgIQIAIgAigCFCAEajYCFCACIAIoAhAgBGs2AhAgAyADKAIUIARrIgI2AhQgAg0AIAMgAygCCDYCEAsgASgCACgCEA0ACwwECyABQX82AigPCyABQX82AigPCyABQQMgAkEMbEGIyABqKAIAEQQACyICQX5xQQJGBEAgAUGaBTYCBAsgAkF9cQ0BCyAAKAIQDQMgAUF/NgIoDwsgAkEBRw0BCyABQQBBAEEAEBIgASgCRCICIAEoAkxBAXRBAmsiA2pBADsBACACIAMQICABKAJ0RQRAIAFBADYCtC0gAUEANgJcIAFBADYCbAsgACgCHCICEBMCQCAAKAIQIgQgAigCFCIDIAMgBEsbIgNFDQAgACgCDCACKAIQIAMQHxogACAAKAIMIANqNgIMIAIgAigCECADajYCECAAIAAoAhQgA2o2AhQgACAAKAIQIANrIgQ2AhAgAiACKAIUIANrIgM2AhQgAw0AIAIgAigCCDYCEAsgBA0AIAFBfzYCKAsLC7YNAQt/IAAoAgAiBCgCBCEJQQEhCAJAIAQoAhAiAyAAKAK8LUEqakEDdSICSQ0AIAAoAiwiBSAAKAIMQQVrIgYgBSAGSRshCiABQQRHIQsDQCAKIAMgAmsiAyAAKAJsIAAoAlxrIgYgBCgCBGoiAkH//wMgAkH//wNJGyIFIAMgBUkbIgNLBEAgAiADRw0CIAFFDQIgCyADRXENAgsgAEEAQQAgAUEERiACIANGcSIHEBIgACgCFCAAKAIIakEEayADOgAAIAAoAhQgACgCCGpBA2sgA0EIdjoAACAAKAIUIAAoAghqQQJrIANBf3MiAjoAACAAKAIUIAAoAghqQQFrIAJBCHY6AAAgACgCACICKAIcIgQQEwJAIAIoAhAiBSAEKAIUIgwgBSAMSRsiBUUNACACKAIMIAQoAhAgBRAfGiACIAIoAgwgBWo2AgwgBCAEKAIQIAVqNgIQIAIgAigCFCAFajYCFCACIAIoAhAgBWs2AhAgBCAEKAIUIAVrIgI2AhQgAg0AIAQgBCgCCDYCEAsCfyAGBEAgACgCACgCDCAAKAI4IAAoAlxqIAMgBiADIAZJGyICEB8aIAAoAgAiBCAEKAIMIAJqNgIMIAQgBCgCECACazYCECAEIAQoAhQgAmo2AhQgACAAKAJcIAJqNgJcIAMgAmshAwsgAwsEQCAAKAIAIgIoAgwhBSADIAIoAgQiBiADIAZJGyIEBEAgAiAGIARrNgIEIAUgAigCACAEEB8hBQJAAkACQCACKAIcKAIYQQFrDgIAAQILIAIgAigCMCAFIAQQBDYCMAwBCyACIAIoAjAgBSAEEAY2AjALIAIgAigCACAEajYCACACIAIoAgggBGo2AgggACgCACICKAIMIQULIAIgAyAFajYCDCACIAIoAhAgA2s2AhAgAiACKAIUIANqNgIUCyAAKAIAIQQgBwRAQQAhCAwCCyAEKAIQIgMgACgCvC1BKmpBA3UiAk8NAAsLAkAgCSAEKAIEayIDRQRAIAAoAmwhAgwBCwJAIAAoAiwiAiADTQRAIABBAjYCsC0gACgCOCAEKAIAIAJrIAIQHxogACAAKAIsIgQ2AmwgBCECDAELAkAgACgCPCAAKAJsIgRrIANLDQAgACAEIAJrIgQ2AmwgACgCOCIFIAIgBWogBBAfGiAAKAKwLSICQQFLDQAgACACQQFqNgKwLQsgACgCOCAAKAJsaiAAKAIAKAIAIANrIAMQHxogACAAKAJsIANqIgI2AmwgACgCLCEECyAAIAI2AlwgACAEIAAoArQtIgVrIgQgAyADIARLGyAFajYCtC0LIAIgACgCwC1LBEAgACACNgLALQtBAyEDAkAgCEUNACAAKAIAIgQoAgQhAwJAAkAgAUF7cUUNACADDQBBASEDIAIgACgCXEYNAiAAKAI8IAJBf3NqIQVBACEDDAELIAMgACgCPCACQX9zaiIFTQ0AIAAoAlwiByAAKAIsIgZIDQAgACACIAZrIgM2AmwgACAHIAZrNgJcIAAoAjgiAiACIAZqIAMQHxogACgCsC0iA0EBTQRAIAAgA0EBajYCsC0LIAAoAiwgBWohBSAAKAIAIgQoAgQhAwsCQCADIAUgAyAFSRsiAkUEQCAAKAJsIQMMAQsgACgCbCEFIAAoAjghBiAEIAMgAms2AgQgBSAGaiAEKAIAIAIQHyEDAkACQAJAIAQoAhwoAhhBAWsOAgABAgsgBCAEKAIwIAMgAhAENgIwDAELIAQgBCgCMCADIAIQBjYCMAsgBCAEKAIAIAJqNgIAIAQgBCgCCCACajYCCCAAIAAoAmwgAmoiAzYCbAsgAyAAKALALUsEQCAAIAM2AsAtCyADIAAoAlwiBmsiBCAAKAIsIgMgACgCDCAAKAK8LUEqakEDdWsiAkH//wMgAkH//wNJGyICIAIgA0sbSQRAQQAhAyABRQ0BIAFBBEYgBEEAR3JFDQEgAiAESQ0BIAAoAgAoAgQNAQtBACEFIAAgACgCOCAGaiACIAQgAiAESRsiAwJ/IAFBBEYEQCAAKAIAKAIERSACIARPcSEFCyAFCxASIAAgACgCXCADajYCXCAAKAIAIgAoAhwiAxATAkAgACgCECICIAMoAhQiBCACIARJGyICRQ0AIAAoAgwgAygCECACEB8aIAAgACgCDCACajYCDCADIAMoAhAgAmo2AhAgACAAKAIUIAJqNgIUIAAgACgCECACazYCECADIAMoAhQgAmsiADYCFCAADQAgAyADKAIINgIQC0ECQQAgBRshAwsgAwu5CwENfwJAA0ACQAJAIAAoAnRBhQJNBEAgABAKIAAoAnQhAgJAIAENACACQYYCTw0AQQAPCyACRQ0EIAJBA0kNAQsgACAAKAJUIAAoAmwiAiAAKAI4ai0AAiAAKAJIIAAoAlh0c3EiAzYCSCAAKAJAIAIgACgCNHFBAXRqIAAoAkQgA0EBdGoiBC8BACIDOwEAIAQgAjsBACADRQ0AIAAoAixBhgJrIAIgA2tJDQAgACAAIAMQDiICNgJgDAELIAAoAmAhAgsCQCACQQNPBEAgACgCpC0gACgCoC0iA0EBdGogACgCbCAAKAJwayIEOwEAIAAgA0EBajYCoC0gAyAAKAKYLWogAkEDayICOgAAIAJB/wFxQYDNAGotAABBAnQgAGpBmAlqIgIgAi8BAEEBajsBACAAIARBAWtB//8DcSICIAJBB3ZBgAJqIAJBgAJJG0GAyQBqLQAAQQJ0akGIE2oiAiACLwEAQQFqOwEAIAAgACgCdCAAKAJgIgJrIgM2AnQgACgCnC1BAWshBiAAKAKgLSEHAkAgA0EDSQ0AIAIgACgCgAFLDQAgACACQQFrIgM2AmAgACgCSCEEIAAoAmwhAiAAKAI0IQggACgCQCEJIAAoAkQhCiAAKAJUIQsgACgCOCEMIAAoAlghDQNAIAAgAiIFQQFqIgI2AmwgACAFIAxqLQADIAQgDXRzIAtxIgQ2AkggCSACIAhxQQF0aiAKIARBAXRqIg4vAQA7AQAgDiACOwEAIAAgA0EBayIDNgJgIAMNAAsgACAFQQJqIgI2AmwgBiAHRw0DDAILIABBADYCYCAAIAAoAmwgAmoiAjYCbCAAIAAoAjggAmoiAy0AACIENgJIIAAgACgCVCADLQABIAQgACgCWHRzcTYCSCAGIAdHDQIMAQsgACgCOCAAKAJsai0AACECIAAoAqQtIAAoAqAtIgNBAXRqQQA7AQAgACADQQFqNgKgLSADIAAoApgtaiACOgAAIAAgAkECdGpBlAFqIgIgAi8BAEEBajsBACAAIAAoAnRBAWs2AnQgACAAKAJsQQFqIgI2AmwgACgCoC0gACgCnC1BAWtHDQELQQAhAyAAIAAoAlwiBEEATgR/IAAoAjggBGoFIAMLIAIgBGtBABAUIAAgACgCbDYCXCAAKAIAIgIoAhwiAxATAkAgAigCECIEIAMoAhQiBSAEIAVJGyIERQ0AIAIoAgwgAygCECAEEB8aIAIgAigCDCAEajYCDCADIAMoAhAgBGo2AhAgAiACKAIUIARqNgIUIAIgAigCECAEazYCECADIAMoAhQgBGsiAjYCFCACDQAgAyADKAIINgIQCyAAKAIAKAIQDQALQQAPCyAAIAAoAmwiAkECIAJBAkkbNgK0LSABQQRGBEBBACEDIAAgACgCXCIEQQBOBH8gACgCOCAEagUgAwsgAiAEa0EBEBQgACAAKAJsNgJcIAAoAgAiAigCHCIDEBMCQCACKAIQIgQgAygCFCIFIAQgBUkbIgRFDQAgAigCDCADKAIQIAQQHxogAiACKAIMIARqNgIMIAMgAygCECAEajYCECACIAIoAhQgBGo2AhQgAiACKAIQIARrNgIQIAMgAygCFCAEayICNgIUIAINACADIAMoAgg2AhALQQNBAiAAKAIAKAIQGw8LAkAgACgCoC1FDQBBACEDIAAgACgCXCIEQQBOBH8gACgCOCAEagUgAwsgAiAEa0EAEBQgACAAKAJsNgJcIAAoAgAiAigCHCIDEBMCQCACKAIQIgQgAygCFCIFIAQgBUkbIgRFDQAgAigCDCADKAIQIAQQHxogAiACKAIMIARqNgIMIAMgAygCECAEajYCECACIAIoAhQgBGo2AhQgAiACKAIQIARrNgIQIAMgAygCFCAEayICNgIUIAINACADIAMoAgg2AhALIAAoAgAoAhANAEEADwtBAQukBAEQfyAAKAJ8IgMgA0ECdiAAKAJ4IgQgACgCjAFJGyEJQQAgACgCbCIDIAAoAixrQYYCaiICIAIgA0sbIQwgACgCdCIHIAAoApABIgIgAiAHSxshDSAAKAI4Ig4gA2oiBUGCAmohDyAEIAVqIgMtAAAhCiADQQFrLQAAIQsgACgCNCEQIAAoAkAhEQNAAkACQCABIA5qIgMgBGoiAi0AACAKRw0AIAJBAWstAAAgC0cNACADLQAAIAUtAABHDQBBAiEGIAMtAAEgBS0AAUcNAAJAAkACQAJAAkACQAJAA0AgBSAGaiICLQABIAMtAANHDQYgAi0AAiADLQAERw0FIAItAAMgAy0ABUcNBCACLQAEIAMtAAZHDQMgAi0ABSADLQAHRw0CIAItAAYgAy0ACEcNASACLQAHIAMtAAlGBEAgBkH5AUshCCAFIAZBCGoiBmohAiAIDQggAy0ACiEIIANBCGohAyACLQAAIAhGDQEMCAsLIAJBB2ohAgwGCyACQQZqIQIMBQsgAkEFaiECDAQLIAJBBGohAgwDCyACQQNqIQIMAgsgAkECaiECDAELIAJBAWohAgsgAiAPayICQYICaiIDIARMDQAgACABNgJwIAMgDU4EQCADIQQMAgsgAyAFai0AACEKIAIgBWotAIECIQsgAyEECyAJQQFrIglFDQAgDCARIAEgEHFBAXRqLwEAIgFJDQELCyAHIAQgBCAHSxsL3Q4BB38DQAJAAkACQCAAKAJ0QYUCSw0AIAAQCiAAKAJ0IQICQCABDQAgAkGGAk8NAEEADwsgAkUNAiACQQJLDQAgACAAKAJgIgI2AnggACAAKAJwNgJkQQIhAyAAQQI2AmAMAQtBAiEDIAAgACgCVCAAKAJsIgIgACgCOGotAAIgACgCSCAAKAJYdHNxIgQ2AkggACgCQCACIAAoAjRxQQF0aiAAKAJEIARBAXRqIgUvAQAiBDsBACAFIAI7AQAgACAAKAJgIgI2AnggACAAKAJwNgJkIABBAjYCYCAERQ0AAkAgAiAAKAKAAU8NACAAKAIsQYYCayAAKAJsIARrSQ0AIAAgACAEEA4iAzYCYCADQQVLDQAgACgCiAFBAUcEQCADQQNHDQFBAyEDIAAoAmwgACgCcGtBgSBJDQELQQIhAyAAQQI2AmALIAAoAnghAgsCQCACQQNJDQAgAiADSQ0AIAAoAnQhBCAAKAKkLSAAKAKgLSIDQQF0aiAAKAJsIgUgACgCZEF/c2oiBjsBACAAIANBAWo2AqAtIAMgACgCmC1qIAJBA2siAjoAACACQf8BcUGAzQBqLQAAQQJ0IABqQZgJaiICIAIvAQBBAWo7AQAgACAGQQFrQf//A3EiAiACQQd2QYACaiACQYACSRtBgMkAai0AAEECdGpBiBNqIgIgAi8BAEEBajsBACAAIAAoAngiAkECayIDNgJ4IAAgACgCdCACa0EBajYCdCAEIAVqQQNrIQUgACgCnC1BAWshByAAKAJsIQIgACgCoC0hCANAIAAgAiIEQQFqIgI2AmwgAiAFTQRAIAAgACgCVCAEIAAoAjhqLQADIAAoAkggACgCWHRzcSIGNgJIIAAoAkAgACgCNCACcUEBdGogACgCRCAGQQF0aiIGLwEAOwEAIAYgAjsBAAsgACADQQFrIgM2AnggAw0ACyAAQQI2AmAgAEEANgJoIAAgBEECaiICNgJsIAcgCEcNAkEAIQMgACAAKAJcIgRBAE4EfyAAKAI4IARqBSADCyACIARrQQAQFCAAIAAoAmw2AlwgACgCACICKAIcIgMQEwJAIAIoAhAiBCADKAIUIgUgBCAFSRsiBEUNACACKAIMIAMoAhAgBBAfGiACIAIoAgwgBGo2AgwgAyADKAIQIARqNgIQIAIgAigCFCAEajYCFCACIAIoAhAgBGs2AhAgAyADKAIUIARrIgI2AhQgAg0AIAMgAygCCDYCEAsgACgCACgCEA0CQQAPCyAAKAJoBEAgACgCbCAAKAI4akEBay0AACECIAAoAqQtIAAoAqAtIgNBAXRqQQA7AQAgACADQQFqNgKgLSADIAAoApgtaiACOgAAIAAgAkECdGpBlAFqIgIgAi8BAEEBajsBAAJAIAAoAqAtIAAoApwtQQFrRw0AQQAhAyAAIAAoAlwiAkEATgR/IAAoAjggAmoFIAMLIAAoAmwgAmtBABAUIAAgACgCbDYCXCAAKAIAIgIoAhwiAxATIAIoAhAiBCADKAIUIgUgBCAFSRsiBEUNACACKAIMIAMoAhAgBBAfGiACIAIoAgwgBGo2AgwgAyADKAIQIARqNgIQIAIgAigCFCAEajYCFCACIAIoAhAgBGs2AhAgAyADKAIUIARrIgI2AhQgAg0AIAMgAygCCDYCEAsgACAAKAJsQQFqNgJsIAAgACgCdEEBazYCdCAAKAIAKAIQDQJBAA8FIABBATYCaCAAIAAoAmxBAWo2AmwgACAAKAJ0QQFrNgJ0DAILAAsLIAAoAmgEQCAAKAJsIAAoAjhqQQFrLQAAIQIgACgCpC0gACgCoC0iA0EBdGpBADsBACAAIANBAWo2AqAtIAMgACgCmC1qIAI6AAAgACACQQJ0akGUAWoiAiACLwEAQQFqOwEAIABBADYCaAsgACAAKAJsIgJBAiACQQJJGzYCtC0gAUEERgRAQQAhAyAAIAAoAlwiBEEATgR/IAAoAjggBGoFIAMLIAIgBGtBARAUIAAgACgCbDYCXCAAKAIAIgIoAhwiAxATAkAgAigCECIEIAMoAhQiBSAEIAVJGyIERQ0AIAIoAgwgAygCECAEEB8aIAIgAigCDCAEajYCDCADIAMoAhAgBGo2AhAgAiACKAIUIARqNgIUIAIgAigCECAEazYCECADIAMoAhQgBGsiAjYCFCACDQAgAyADKAIINgIQC0EDQQIgACgCACgCEBsPCwJAIAAoAqAtRQ0AQQAhAyAAIAAoAlwiBEEATgR/IAAoAjggBGoFIAMLIAIgBGtBABAUIAAgACgCbDYCXCAAKAIAIgIoAhwiAxATAkAgAigCECIEIAMoAhQiBSAEIAVJGyIERQ0AIAIoAgwgAygCECAEEB8aIAIgAigCDCAEajYCDCADIAMoAhAgBGo2AhAgAiACKAIUIARqNgIUIAIgAigCECAEazYCECADIAMoAhQgBGsiAjYCFCACDQAgAyADKAIINgIQCyAAKAIAKAIQDQBBAA8LQQELYQAgAEEANgK8LSAAQQA7AbgtIABBuBZqQajPADYCACAAIABB/BRqNgKwFiAAQawWakGUzwA2AgAgACAAQYgTajYCpBYgAEGgFmpBgM8ANgIAIAAgAEGUAWo2ApgWIAAQEQvwBAEDfyAAQZQBaiECA0AgAiABQQJ0IgNqQQA7AQAgAiADQQRyakEAOwEAIAFBAmoiAUGeAkcNAAsgAEEAOwH8FCAAQQA7AYgTIABBxBVqQQA7AQAgAEHAFWpBADsBACAAQbwVakEAOwEAIABBuBVqQQA7AQAgAEG0FWpBADsBACAAQbAVakEAOwEAIABBrBVqQQA7AQAgAEGoFWpBADsBACAAQaQVakEAOwEAIABBoBVqQQA7AQAgAEGcFWpBADsBACAAQZgVakEAOwEAIABBlBVqQQA7AQAgAEGQFWpBADsBACAAQYwVakEAOwEAIABBiBVqQQA7AQAgAEGEFWpBADsBACAAQYAVakEAOwEAIABB/BNqQQA7AQAgAEH4E2pBADsBACAAQfQTakEAOwEAIABB8BNqQQA7AQAgAEHsE2pBADsBACAAQegTakEAOwEAIABB5BNqQQA7AQAgAEHgE2pBADsBACAAQdwTakEAOwEAIABB2BNqQQA7AQAgAEHUE2pBADsBACAAQdATakEAOwEAIABBzBNqQQA7AQAgAEHIE2pBADsBACAAQcQTakEAOwEAIABBwBNqQQA7AQAgAEG8E2pBADsBACAAQbgTakEAOwEAIABBtBNqQQA7AQAgAEGwE2pBADsBACAAQawTakEAOwEAIABBqBNqQQA7AQAgAEGkE2pBADsBACAAQaATakEAOwEAIABBnBNqQQA7AQAgAEGYE2pBADsBACAAQZQTakEAOwEAIABBkBNqQQA7AQAgAEGME2pBADsBACAAQgA3AqwtIABBlAlqQQE7AQAgAEEANgKoLSAAQQA2AqAtC7IDAQJ/IAAgAC8BuC0gA0H//wNxIgUgACgCvC0iBHRyIgM7AbgtAkACQAJ/IARBDk4EQCAAIAAoAhQiBEEBajYCFCAEIAAoAghqIAM6AAAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAAQbktai0AADoAACAAIAVBECAAKAK8LSIEa3YiAzsBuC0gBEENawwBCyAEQQNqCyIEQQlOBEAgACAAKAIUIgRBAWo2AhQgBCAAKAIIaiADOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGohBCAAQbktai0AACEDDAELIARBAUgNASAAIAAoAhQiBEEBajYCFCAEIAAoAghqIQQLIAQgAzoAAAsgAEEANgK8LSAAQQA7AbgtIAAgACgCFCIDQQFqNgIUIAMgACgCCGogAjoAACAAIAAoAhQiA0EBajYCFCADIAAoAghqIAJBCHY6AAAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiACQX9zIgM6AAAgACAAKAIUIgRBAWo2AhQgBCAAKAIIaiADQQh2OgAAIAAoAgggACgCFGogASACEB8aIAAgACgCFCACajYCFAusAQEBfwJAIAACfyAAKAK8LSIBQRBGBEAgACAAKAIUIgFBAWo2AhQgASAAKAIIaiAALQC4LToAACAAIAAoAhQiAUEBajYCFCABIAAoAghqIABBuS1qLQAAOgAAIABBADsBuC1BAAwBCyABQQhIDQEgACAAKAIUIgFBAWo2AhQgASAAKAIIaiAALQC4LToAACAAIABBuS1qLQAAOwG4LSAAKAK8LUEIaws2ArwtCwuhEwENfwJ/AkACQAJAIAAoAoQBQQFOBEAgACgCACIGKAIsQQJHDQNB/4D/n38hBANAAkAgBEEBcUUNACAAIAVBAnRqLwGUAUUNAEEAIQQMBAsCQCAEQQJxRQ0AIAAgBUECdEEEcmovAZQBRQ0AQQAhBAwECyAEQQJ2IQQgBUECaiIFQSBHDQALDAELIAJBBWoiBQwDCwJAIAAvAbgBDQAgAC8BvAENACAALwHIAQ0AQSAhBQNAIAAgBUECdCIEai8BlAENASAAIARBBHJqLwGUAQ0BIAAgBEEIcmovAZQBDQEgACAEQQxyai8BlAENAUEAIQQgBUEEaiIFQYACRw0ACwwBC0EBIQQLIAYgBDYCLAsgACAAQZgWahAVIAAgAEGkFmoQFSAALwGWASEEIAAgAEGcFmooAgAiCkECdGpB//8DOwGaASAKQQBOBEBBB0GKASAEGyEJQQRBAyAEGyELIABBwBVqIQ4gAEHEFWohDyAAQbwVaiEQQX8hDANAIAQhBSAAIAgiDUEBaiIIQQJ0ai8BlgEhBAJAAkAgB0EBaiIGIAlODQAgBCAFRw0AIAYhBwwBCwJ/IAYgC0gEQCAAIAVBAnRqQfwUaiIHLwEAIAZqDAELIAUEQCAFIAxHBEAgACAFQQJ0akH8FGoiBiAGLwEAQQFqOwEACyAQIgcvAQBBAWoMAQsgB0EJTARAIA4iBy8BAEEBagwBCyAPIgcvAQBBAWoLIQYgByAGOwEAQQAhBwJ/IARFBEBBAyELQYoBDAELQQNBBCAEIAVGIgYbIQtBBkEHIAYbCyEJIAUhDAsgCiANRw0ACwsgAEGKE2ovAQAhBCAAIABBqBZqKAIAIgpBAnRqQY4TakH//wM7AQBBACEHIApBAE4EQEEHQYoBIAQbIQlBBEEDIAQbIQsgAEHAFWohDiAAQcQVaiEPIABBvBVqIRBBfyEMQQAhCANAIAQhBSAAIAgiDUEBaiIIQQJ0akGKE2ovAQAhBAJAAkAgB0EBaiIGIAlODQAgBCAFRw0AIAYhBwwBCwJ/IAYgC0gEQCAAIAVBAnRqQfwUaiIHLwEAIAZqDAELIAUEQCAFIAxHBEAgACAFQQJ0akH8FGoiBiAGLwEAQQFqOwEACyAQIgcvAQBBAWoMAQsgB0EJTARAIA4iBy8BAEEBagwBCyAPIgcvAQBBAWoLIQYgByAGOwEAQQAhBwJ/IARFBEBBAyELQYoBDAELQQNBBCAEIAVGIgYbIQtBBkEHIAYbCyEJIAUhDAsgCiANRw0ACwsgACAAQbAWahAVIAAgACgCqC0Cf0ESIABBuhVqLwEADQAaQREgAEGCFWovAQANABpBECAAQbYVai8BAA0AGkEPIABBhhVqLwEADQAaQQ4gAEGyFWovAQANABpBDSAAQYoVai8BAA0AGkEMIABBrhVqLwEADQAaQQsgAEGOFWovAQANABpBCiAAQaoVai8BAA0AGkEJIABBkhVqLwEADQAaQQggAEGmFWovAQANABpBByAAQZYVai8BAA0AGkEGIABBohVqLwEADQAaQQUgAEGaFWovAQANABpBBCAAQZ4Vai8BAA0AGkEDQQIgAEH+FGovAQAbCyIIQQNsaiIEQRFqNgKoLSAEQRtqQQN2IgQgACgCrC1BCmpBA3YiBSAEIAVJGwshBAJAAkAgAUUNACACQQRqIARLDQAgACABIAIgAxASDAELIAAoArwtIQYCQCAEIAVHBEAgACgCiAFBBEcNAQsgACAALwG4LSADQQJqQf//A3EiBCAGdHIiBTsBuC0gAAJ/IAZBDk4EQCAAIAAoAhQiBkEBajYCFCAGIAAoAghqIAU6AAAgACAAKAIUIgVBAWo2AhQgBSAAKAIIaiAAQbktai0AADoAACAAIARBECAAKAK8LSIFa3Y7AbgtIAVBDWsMAQsgBkEDags2ArwtIABBwM8AQcDYABAWDAELIAAvAbgtIANBBGpB//8DcSIHIAZ0ciEFAkAgBkEOTgRAIAAgBTsBuC0gACAAKAIUIgRBAWo2AhQgBCAAKAIIaiAFOgAAIAAgACgCFCIEQQFqNgIUIAQgACgCCGogAEG5LWotAAA6AAAgACgCvC0iBUENayEEIAdBECAFa3YhBQwBCyAGQQNqIQQLIAAgBDYCvC0gAEGcFmooAgAiCkGA/gNqQf//A3EiByAEdCEGIABBqBZqKAIAIQkCfyAEQQxOBEAgACAFIAZyIgQ7AbgtIAAgACgCFCIFQQFqNgIUIAUgACgCCGogBDoAACAAIAAoAhQiBEEBajYCFCAEIAAoAghqIABBuS1qLQAAOgAAIAAoArwtIgVBC2shBCAHQRAgBWt2DAELIARBBWohBCAFIAZyCyEFIAAgBDYCvC0gCUH//wNxIgcgBHQhBgJ/IARBDE4EQCAAIAUgBnIiBDsBuC0gACAAKAIUIgVBAWo2AhQgBSAAKAIIaiAEOgAAIAAgACgCFCIEQQFqNgIUIAQgACgCCGogAEG5LWotAAA6AAAgACgCvC0iBUELayEEIAdBECAFa3YMAQsgBEEFaiEEIAUgBnILIQUgACAENgK8LSAIQf3/A2pB//8DcSIHIAR0IQYCfyAEQQ1OBEAgACAFIAZyIgQ7AbgtIAAgACgCFCIFQQFqNgIUIAUgACgCCGogBDoAACAAIAAoAhQiBEEBajYCFCAEIAAoAghqIABBuS1qLQAAOgAAIAAoArwtIgVBDGshBCAHQRAgBWt2DAELIARBBGohBCAFIAZyCyEGIAAgBDYCvC1BACEFIABBuS1qIQ0DQCAAIAYgACAFQZDcAGotAABBAnRqQf4Uai8BACIHIAR0ciIGOwG4LSAAAn8gBEEOTgRAIAAgACgCFCIEQQFqNgIUIAQgACgCCGogBjoAACAAIAAoAhQiBEEBajYCFCAEIAAoAghqIA0tAAA6AAAgACAHQRAgACgCvC0iBGt2IgY7AbgtIARBDWsMAQsgBEEDagsiBDYCvC0gBSAIRyEHIAVBAWohBSAHDQALIAAgAEGUAWoiBCAKEBcgACAAQYgTaiIFIAkQFyAAIAQgBRAWCyAAEBEgAwRAAkACfyAAKAK8LSIEQQlOBEAgACAAKAIUIgRBAWo2AhQgBCAAKAIIaiAALQC4LToAACAAIAAoAhQiBEEBajYCFCAEIAAoAghqIQQgAEG5LWotAAAMAQsgBEEBSA0BIAAgACgCFCIEQQFqNgIUIAQgACgCCGohBCAALQC4LQshBSAEIAU6AAALIABBADYCvC0gAEEAOwG4LQsLsRUBFX8jAEEgayEKIAEoAgAhCSABKAIIIgIoAgAhBSACKAIMIQ0gAEKAgICA0McANwLQKEF/IRACQCANQQBKBEBBACECA0ACQCAJIAJBAnRqIgMvAQAEQCAAIAAoAtAoQQFqIgM2AtAoIAAgA0ECdGpB3BZqIAI2AgAgACACakHYKGpBADoAACACIRAMAQsgA0EAOwECCyACQQFqIgIgDUcNAAsgACgC0CgiBEEBSg0BCwNAIAAgBEEBaiICNgLQKCAAIAJBAnRqQdwWaiAQQQFqIgNBACAQQQJIIgQbIgI2AgAgCSACQQJ0IgdqQQE7AQAgACACakHYKGpBADoAACAAIAAoAqgtQQFrNgKoLSAFBEAgACAAKAKsLSAFIAdqLwECazYCrC0LIAMgECAEGyEQIAAoAtAoIgRBAkgNAAsLIAEgEDYCBCAEQQF2IQgDQCAAIAhBAnRqQdwWaigCACELAkAgCCICQQF0IgMgBEoNACAAIAtqQdgoaiEPIAkgC0ECdGohBiAIIQUDQAJAIAMgBE4EQCADIQIMAQsgCSAAQdwWaiICIANBAXIiBEECdGooAgAiDkECdGovAQAiByAJIAIgA0ECdGooAgAiDEECdGovAQAiAk8EQCACIAdHBEAgAyECDAILIAMhAiAAQdgoaiIDIA5qLQAAIAMgDGotAABLDQELIAQhAgsgBi8BACIEIAkgACACQQJ0akHcFmooAgAiA0ECdGovAQAiB0kEQCAFIQIMAgsCQCAEIAdHDQAgDy0AACAAIANqQdgoai0AAEsNACAFIQIMAgsgACAFQQJ0akHcFmogAzYCACACIQUgAkEBdCIDIAAoAtAoIgRMDQALCyAAIAJBAnRqQdwWaiALNgIAIAhBAk4EQCAIQQFrIQggACgC0CghBAwBCwsgACgC0CghAwNAIA0hCCAAIANBAWsiBDYC0CggACgC4BYhCyAAIAAgA0ECdGpB3BZqKAIAIg02AuAWQQEhAgJAIANBA0gNACAAIA1qQdgoaiEPQQIhAyAJIA1BAnRqIQZBASEFA0ACQCADIAROBEAgAyECDAELIAkgAEHcFmoiAiADQQFyIgRBAnRqKAIAIg5BAnRqLwEAIgcgCSACIANBAnRqKAIAIgxBAnRqLwEAIgJPBEAgAiAHRwRAIAMhAgwCCyADIQIgAEHYKGoiAyAOai0AACADIAxqLQAASw0BCyAEIQILIAYvAQAiBCAJIAAgAkECdGpB3BZqKAIAIgNBAnRqLwEAIgdJBEAgBSECDAILAkAgBCAHRw0AIA8tAAAgACADakHYKGotAABLDQAgBSECDAILIAAgBUECdGpB3BZqIAM2AgAgAiEFIAJBAXQiAyAAKALQKCIETA0ACwtBAiEDIABB3BZqIgYgAkECdGogDTYCACAAIAAoAtQoQQFrIgQ2AtQoIAAoAuAWIQIgBiAEQQJ0aiALNgIAIAAgACgC1ChBAWsiBDYC1CggBiAEQQJ0aiACNgIAIAkgCEECdGoiDiAJIAJBAnRqIgQvAQAgCSALQQJ0aiIFLwEAajsBACAAQdgoaiIMIAhqIg8gAiAMai0AACICIAsgDGotAAAiByACIAdLG0EBajoAACAEIAg7AQIgBSAIOwECIAAgCDYC4BZBASEFQQEhAgJAIAAoAtAoIgRBAkgNAANAAn8gAyADIARODQAaIAkgBiADQQFyIgRBAnRqKAIAIgtBAnRqLwEAIgIgCSAGIANBAnRqKAIAIg1BAnRqLwEAIgdPBEAgAyACIAdHDQEaIAMgCyAMai0AACAMIA1qLQAASw0BGgsgBAshAiAOLwEAIgQgCSAAIAJBAnRqQdwWaigCACIDQQJ0ai8BACIHSQRAIAUhAgwCCwJAIAQgB0cNACAPLQAAIAAgA2pB2ChqLQAASw0AIAUhAgwCCyAAIAVBAnRqQdwWaiADNgIAIAIhBSACQQF0IgMgACgC0CgiBEwNAAsLIAhBAWohDSAAIAJBAnRqQdwWaiAINgIAIAAoAtAoIgNBAUoNAAsgACAAKALUKEEBayICNgLUKCAAQdwWaiIDIAJBAnRqIAAoAuAWNgIAIAEoAgQhByABKAIIIgIoAhAhBiACKAIIIREgAigCBCETIAIoAgAhEiABKAIAIQwgAEHUFmoiAUIANwEAIABBzBZqIhRCADcBACAAQcQWaiIVQgA3AQAgAEG8FmoiFkIANwEAQQAhCCAMIAMgACgC1ChBAnRqKAIAQQJ0akEAOwECAkAgACgC1CgiAkG7BEoNACACQQFqIQJBACEOA0AgDCAAIAJBAnRqQdwWaigCACIEQQJ0Ig1qIgUgDCAFLwECQQJ0ai8BAiIDQQFqIAYgAyAGSBsiDzsBAiADIAZOIQMCQCAEIAdKDQAgACAPQQF0akG8FmoiCyALLwEAQQFqOwEAQQAhCyAEIBFOBEAgEyAEIBFrQQJ0aigCACELCyAAIAAoAqgtIAUvAQAiBCALIA9qbGo2AqgtIBJFDQAgACAAKAKsLSALIA0gEmovAQJqIARsajYCrC0LIAMgDmohDiACQQFqIgJBvQRHDQALIA5FDQAgACAGQQF0akG8FmohDwNAIAYhAgNAIAAgAiIDQQFrIgJBAXRqQbwWaiIELwEAIgVFDQALIAQgBUEBazsBACAAIANBAXRqQbwWaiICIAIvAQBBAmo7AQAgDyAPLwEAQQFrIgI7AQAgDkECSiEDIA5BAmshDiADDQALIAZFDQBBvQQhBQNAIAJB//8DcSEDIAUhAgNAIAMEQCAAIAJBAWsiAkECdGpB3BZqKAIAIgQgB0oNASAMIARBAnRqIgQvAQIiBSAGRwRAIAAgACgCqC0gBC8BACAGIAVrbGo2AqgtIAQgBjsBAgsgA0EBayEDIAIhBQwBCwsgBkEBayIGRQ0BIAAgBkEBdGpBvBZqLwEAIQIMAAsACyAKIBYvAQBBAXQiAjsBAiAKIAIgAEG+FmovAQBqQQF0IgI7AQQgCiACIABBwBZqLwEAakEBdCICOwEGIAogAiAAQcIWai8BAGpBAXQiAjsBCCAKIAIgFS8BAGpBAXQiAjsBCiAKIAIgAEHGFmovAQBqQQF0IgI7AQwgCiACIABByBZqLwEAakEBdCICOwEOIAogAiAAQcoWai8BAGpBAXQiAjsBECAKIAIgFC8BAGpBAXQiAjsBEiAKIAIgAEHOFmovAQBqQQF0IgI7ARQgCiACIABB0BZqLwEAakEBdCICOwEWIAogAiAAQdIWai8BAGpBAXQiAjsBGCAKIAEvAQAgAmpBAXQiAjsBGiAKIABB1hZqLwEAIAJqQQF0IgI7ARwgCiACIABB2BZqLwEAakEBdDsBHiAQQQBOBEADQCAJIAhBAnRqIgcvAQIiBARAIAogBEEBdGoiACAALwEAIgBBAWo7AQAgBEEDcSEDQQAhAiAEQQFrQQNPBEAgBEH8/wNxIQUDQCAAQQN2QQFxIABBAnZBAXEgAEECcSACIABBAXFyQQJ0cnJBAXRyIgRBAXQhAiAAQQR2IQAgBUEEayIFDQALCyADBEADQCACIABBAXFyIgRBAXQhAiAAQQF2IQAgA0EBayIDDQALCyAHIAQ7AQALIAggEEchACAIQQFqIQggAA0ACwsL2QgBCn8CQCAAKAKgLUUEQCAAKAK8LSEDDAELIABBuS1qIQgDQCAEQQFqIQogACgCmC0gBGotAAAhBQJAIAACfyAAKAKkLSAEQQF0ai8BACIHRQRAIAEgBUECdGoiAy8BAiEEIAAgAC8BuC0gAy8BACIFIAAoArwtIgN0ciIHOwG4LUEQIARrIANIBEAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAHOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogCC0AADoAACAAIAVBECAAKAK8LSIDa3Y7AbgtIAMgBGpBEGsMAgsgAyAEagwBCyAFQYDNAGotAAAiC0ECdCIJQYAIciABaiIDLwEGIQQgACAALwG4LSADLwEEIgwgACgCvC0iBnRyIgM7AbgtIAACf0EQIARrIAZIBEAgACAAKAIUIgZBAWo2AhQgBiAAKAIIaiADOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogCC0AADoAACAAIAxBECAAKAK8LSIGa3YiAzsBuC0gBCAGakEQawwBCyAEIAZqCyIENgK8LSALQQhrQRNNBEAgACADIAUgCUGw3ABqKAIAa0H//wNxIgYgBHRyIgM7AbgtIAACf0EQIAlBwNkAaigCACIFayAESARAIAAgACgCFCIEQQFqNgIUIAQgACgCCGogAzoAACAAIAAoAhQiBEEBajYCFCAEIAAoAghqIAgtAAA6AAAgACAGQRAgACgCvC0iBGt2IgM7AbgtIAQgBWpBEGsMAQsgBCAFagsiBDYCvC0LIAIgB0EBayIFIAVBB3ZBgAJqIAVBgAJJG0GAyQBqLQAAIgtBAnQiCWoiBi8BAiEHIAAgAyAGLwEAIgwgBHRyIgY7AbgtIAACf0EQIAdrIARIBEAgACAAKAIUIgRBAWo2AhQgBCAAKAIIaiAGOgAAIAAgACgCFCIEQQFqNgIUIAQgACgCCGogCC0AADoAACAAIAxBECAAKAK8LSIEa3YiBjsBuC0gBCAHakEQawwBCyAEIAdqCyIDNgK8LSALQQRJDQEgACAGIAUgCUGw3QBqKAIAa0H//wNxIgUgA3RyIgc7AbgtQRAgCUHA2gBqKAIAIgRrIANIBEAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAHOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogCC0AADoAACAAIAVBECAAKAK8LSIDa3Y7AbgtIAMgBGpBEGsMAQsgAyAEagsiAzYCvC0LIAoiBCAAKAKgLUkNAAsLIAFBgghqLwEAIQQgACAALwG4LSABLwGACCIKIAN0ciIFOwG4LUEQIARrIANIBEAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAFOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogAEG5LWotAAA6AAAgACAKQRAgACgCvC0iA2t2OwG4LSAAIAMgBGpBEGs2ArwtDwsgACADIARqNgK8LQuXCwEMfyACQQBOBEBBBEEDIAEvAQIiChshBkEHQYoBIAobIQMgAEG5LWohCEF/IQcDQCAKIQkgASALIgxBAWoiC0ECdGovAQIhCgJAAkAgBUEBaiIEIANODQAgCSAKRw0AIAQhBQwBCwJAIAQgBkgEQCAAIAlBAnRqIgVB/BRqIQ0gBUH+FGohDiAAKAK8LSEFA0AgDi8BACEDIAAgAC8BuC0gDS8BACIGIAV0ciIHOwG4LSAAAn9BECADayAFSARAIAAgACgCFCIFQQFqNgIUIAUgACgCCGogBzoAACAAIAAoAhQiBUEBajYCFCAFIAAoAghqIAgtAAA6AAAgACAGQRAgACgCvC0iBWt2OwG4LSADIAVqQRBrDAELIAMgBWoLIgU2ArwtIARBAWsiBA0ACwwBCyAAAn8gCQRAAkAgByAJRgRAIAAoArwtIQMgBCEFDAELIAAgCUECdGoiBEH+FGovAQAhAyAAIAAvAbgtIARB/BRqLwEAIgYgACgCvC0iBHRyIgc7AbgtIAACf0EQIANrIARIBEAgACAAKAIUIgRBAWo2AhQgBCAAKAIIaiAHOgAAIAAgACgCFCIEQQFqNgIUIAQgACgCCGogCC0AADoAACAAIAZBECAAKAK8LSIEa3Y7AbgtIAMgBGpBEGsMAQsgAyAEagsiAzYCvC0LIAAvAbgtIAAvAbwVIgcgA3RyIQQCQEEQIAAvAb4VIgZrIANIBEAgACAEOwG4LSAAIAAoAhQiA0EBajYCFCADIAAoAghqIAQ6AAAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAILQAAOgAAIAYgACgCvC0iBGpBEGshAyAHQRAgBGt2IQQMAQsgAyAGaiEDCyAAIAM2ArwtIAAgBCAFQf3/A2pB//8DcSIFIAN0ciIEOwG4LSADQQ9OBEAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAEOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogCC0AADoAACAAIAVBECAAKAK8LSIDa3Y7AbgtIANBDmsMAgsgA0ECagwBCyAFQQlMBEAgAC8BuC0gAC8BwBUiByAAKAK8LSIDdHIhBAJAQRAgAC8BwhUiBmsgA0gEQCAAIAQ7AbgtIAAgACgCFCIDQQFqNgIUIAMgACgCCGogBDoAACAAIAAoAhQiA0EBajYCFCADIAAoAghqIAgtAAA6AAAgBiAAKAK8LSIEakEQayEDIAdBECAEa3YhBAwBCyADIAZqIQMLIAAgAzYCvC0gACAEIAVB/v8DakH//wNxIgUgA3RyIgQ7AbgtIANBDk4EQCAAIAAoAhQiA0EBajYCFCADIAAoAghqIAQ6AAAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAILQAAOgAAIAAgBUEQIAAoArwtIgNrdjsBuC0gA0ENawwCCyADQQNqDAELIAAvAbgtIAAvAcQVIgcgACgCvC0iA3RyIQQCQEEQIAAvAcYVIgZrIANIBEAgACAEOwG4LSAAIAAoAhQiA0EBajYCFCADIAAoAghqIAQ6AAAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAILQAAOgAAIAYgACgCvC0iBGpBEGshAyAHQRAgBGt2IQQMAQsgAyAGaiEDCyAAIAM2ArwtIAAgBCAFQfb/A2pB//8DcSIFIAN0ciIEOwG4LSADQQpOBEAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAEOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogCC0AADoAACAAIAVBECAAKAK8LSIDa3Y7AbgtIANBCWsMAQsgA0EHags2ArwtC0EAIQUCfyAKRQRAQYoBIQNBAwwBC0EGQQcgCSAKRiIEGyEDQQNBBCAEGwshBiAJIQcLIAIgDEcNAAsLCwkAIAEgAmwQHAsGACABEB0LXwEBfyMAQUBqIgMkACADQQA2AjAgA0IANwMoIAMgADYCCCADIAI2AhQgAyABNgIMIAMgAUEDbDYCGCADQQhqEAcgA0EIahALIANBCGoQCCADKAIcIQEgA0FAayQAIAELBgBB1N8AC6QuAQx/IwBBEGsiDCQAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB9AFNBEBB2N8AKAIAIgZBECAAQQtqQXhxIABBC0kbIgRBA3YiAXYiAEEDcQRAIABBf3NBAXEgAWoiAkEDdCIDQYjgAGooAgAiAUEIaiEAAkAgASgCCCIEIANBgOAAaiIDRgRAQdjfACAGQX4gAndxNgIADAELIAQgAzYCDCADIAQ2AggLIAEgAkEDdCICQQNyNgIEIAEgAmoiASABKAIEQQFyNgIEDA0LIARB4N8AKAIAIghNDQEgAARAAkAgACABdEECIAF0IgBBACAAa3JxIgBBACAAa3FBAWsiACAAQQx2QRBxIgB2IgFBBXZBCHEiAiAAciABIAJ2IgBBAnZBBHEiAXIgACABdiIAQQF2QQJxIgFyIAAgAXYiAEEBdkEBcSIBciAAIAF2aiICQQN0IgNBiOAAaigCACIBKAIIIgAgA0GA4ABqIgNGBEBB2N8AIAZBfiACd3EiBjYCAAwBCyAAIAM2AgwgAyAANgIICyABQQhqIQAgASAEQQNyNgIEIAEgBGoiAyACQQN0IgUgBGsiAkEBcjYCBCABIAVqIAI2AgAgCARAIAhBA3YiBUEDdEGA4ABqIQRB7N8AKAIAIQECfyAGQQEgBXQiBXFFBEBB2N8AIAUgBnI2AgAgBAwBCyAEKAIICyEFIAQgATYCCCAFIAE2AgwgASAENgIMIAEgBTYCCAtB7N8AIAM2AgBB4N8AIAI2AgAMDQtB3N8AKAIAIglFDQEgCUEAIAlrcUEBayIAIABBDHZBEHEiAHYiAUEFdkEIcSICIAByIAEgAnYiAEECdkEEcSIBciAAIAF2IgBBAXZBAnEiAXIgACABdiIAQQF2QQFxIgFyIAAgAXZqQQJ0QYjiAGooAgAiAygCBEF4cSAEayEBIAMhAgNAAkAgAigCECIARQRAIAIoAhQiAEUNAQsgACgCBEF4cSAEayICIAEgASACSyICGyEBIAAgAyACGyEDIAAhAgwBCwsgAyAEaiILIANNDQIgAygCGCEKIAMgAygCDCIFRwRAIAMoAggiAEHo3wAoAgBJGiAAIAU2AgwgBSAANgIIDAwLIANBFGoiAigCACIARQRAIAMoAhAiAEUNBCADQRBqIQILA0AgAiEHIAAiBUEUaiICKAIAIgANACAFQRBqIQIgBSgCECIADQALIAdBADYCAAwLC0F/IQQgAEG/f0sNACAAQQtqIgBBeHEhBEHc3wAoAgAiCEUNAEEfIQcgBEH///8HTQRAIABBCHYiACAAQYD+P2pBEHZBCHEiAHQiASABQYDgH2pBEHZBBHEiAXQiAiACQYCAD2pBEHZBAnEiAnRBD3YgACABciACcmsiAEEBdCAEIABBFWp2QQFxckEcaiEHC0EAIARrIQECQAJAAkAgB0ECdEGI4gBqKAIAIgJFBEBBACEADAELQQAhACAEQQBBGSAHQQF2ayAHQR9GG3QhAwNAAkAgAigCBEF4cSAEayIGIAFPDQAgAiEFIAYiAQ0AQQAhASACIQAMAwsgACACKAIUIgYgBiACIANBHXZBBHFqKAIQIgJGGyAAIAYbIQAgA0EBdCEDIAINAAsLIAAgBXJFBEBBAiAHdCIAQQAgAGtyIAhxIgBFDQMgAEEAIABrcUEBayIAIABBDHZBEHEiAHYiAkEFdkEIcSIDIAByIAIgA3YiAEECdkEEcSICciAAIAJ2IgBBAXZBAnEiAnIgACACdiIAQQF2QQFxIgJyIAAgAnZqQQJ0QYjiAGooAgAhAAsgAEUNAQsDQCAAKAIEQXhxIARrIgYgAUkhAyAGIAEgAxshASAAIAUgAxshBSAAKAIQIgIEfyACBSAAKAIUCyIADQALCyAFRQ0AIAFB4N8AKAIAIARrTw0AIAQgBWoiByAFTQ0BIAUoAhghCSAFIAUoAgwiA0cEQCAFKAIIIgBB6N8AKAIASRogACADNgIMIAMgADYCCAwKCyAFQRRqIgIoAgAiAEUEQCAFKAIQIgBFDQQgBUEQaiECCwNAIAIhBiAAIgNBFGoiAigCACIADQAgA0EQaiECIAMoAhAiAA0ACyAGQQA2AgAMCQsgBEHg3wAoAgAiAE0EQEHs3wAoAgAhAQJAIAAgBGsiAkEQTwRAQeDfACACNgIAQezfACABIARqIgM2AgAgAyACQQFyNgIEIAAgAWogAjYCACABIARBA3I2AgQMAQtB7N8AQQA2AgBB4N8AQQA2AgAgASAAQQNyNgIEIAAgAWoiACAAKAIEQQFyNgIECyABQQhqIQAMCwsgBEHk3wAoAgAiA0kEQEHk3wAgAyAEayIBNgIAQfDfAEHw3wAoAgAiACAEaiICNgIAIAIgAUEBcjYCBCAAIARBA3I2AgQgAEEIaiEADAsLQQAhACAEQS9qIggCf0Gw4wAoAgAEQEG44wAoAgAMAQtBvOMAQn83AgBBtOMAQoCggICAgAQ3AgBBsOMAIAxBDGpBcHFB2KrVqgVzNgIAQcTjAEEANgIAQZTjAEEANgIAQYAgCyIBaiIGQQAgAWsiB3EiBSAETQ0KQZDjACgCACIBBEBBiOMAKAIAIgIgBWoiCSACTQ0LIAEgCUkNCwtBlOMALQAAQQRxDQUCQAJAQfDfACgCACIBBEBBmOMAIQADQCABIAAoAgAiAk8EQCACIAAoAgRqIAFLDQMLIAAoAggiAA0ACwtBABAeIgNBf0YNBiAFIQZBtOMAKAIAIgBBAWsiASADcQRAIAUgA2sgASADakEAIABrcWohBgsgBCAGTw0GIAZB/v///wdLDQZBkOMAKAIAIgAEQEGI4wAoAgAiASAGaiICIAFNDQcgACACSQ0HCyAGEB4iACADRw0BDAgLIAYgA2sgB3EiBkH+////B0sNBSAGEB4iAyAAKAIAIAAoAgRqRg0EIAMhAAsCQCAEQTBqIAZNDQAgAEF/Rg0AQbjjACgCACIBIAggBmtqQQAgAWtxIgFB/v///wdLBEAgACEDDAgLIAEQHkF/RwRAIAEgBmohBiAAIQMMCAtBACAGaxAeGgwFCyAAIQMgAEF/Rw0GDAQLAAtBACEFDAcLQQAhAwwFCyADQX9HDQILQZTjAEGU4wAoAgBBBHI2AgALIAVB/v///wdLDQEgBRAeIgNBABAeIgBPDQEgA0F/Rg0BIABBf0YNASAAIANrIgYgBEEoak0NAQtBiOMAQYjjACgCACAGaiIANgIAQYzjACgCACAASQRAQYzjACAANgIACwJAAkACQEHw3wAoAgAiAQRAQZjjACEAA0AgAyAAKAIAIgIgACgCBCIFakYNAiAAKAIIIgANAAsMAgtB6N8AKAIAIgBBACAAIANNG0UEQEHo3wAgAzYCAAtBACEAQZzjACAGNgIAQZjjACADNgIAQfjfAEF/NgIAQfzfAEGw4wAoAgA2AgBBpOMAQQA2AgADQCAAQQN0IgFBiOAAaiABQYDgAGoiAjYCACABQYzgAGogAjYCACAAQQFqIgBBIEcNAAtB5N8AIAZBKGsiAEF4IANrQQdxQQAgA0EIakEHcRsiAWsiAjYCAEHw3wAgASADaiIBNgIAIAEgAkEBcjYCBCAAIANqQSg2AgRB9N8AQcDjACgCADYCAAwCCyABIANPDQAgASACSQ0AIAAoAgxBCHENACAAIAUgBmo2AgRB8N8AIAFBeCABa0EHcUEAIAFBCGpBB3EbIgBqIgI2AgBB5N8AQeTfACgCACAGaiIDIABrIgA2AgAgAiAAQQFyNgIEIAEgA2pBKDYCBEH03wBBwOMAKAIANgIADAELQejfACgCACADSwRAQejfACADNgIACyADIAZqIQJBmOMAIQACQAJAAkACQAJAAkADQCACIAAoAgBHBEAgACgCCCIADQEMAgsLIAAtAAxBCHFFDQELQZjjACEAA0AgASAAKAIAIgJPBEAgAiAAKAIEaiICIAFLDQMLIAAoAgghAAwACwALIAAgAzYCACAAIAAoAgQgBmo2AgQgA0F4IANrQQdxQQAgA0EIakEHcRtqIgcgBEEDcjYCBCACQXggAmtBB3FBACACQQhqQQdxG2oiBiAHayAEayECIAQgB2ohBCABIAZGBEBB8N8AIAQ2AgBB5N8AQeTfACgCACACaiIANgIAIAQgAEEBcjYCBAwDCyAGQezfACgCAEYEQEHs3wAgBDYCAEHg3wBB4N8AKAIAIAJqIgA2AgAgBCAAQQFyNgIEIAAgBGogADYCAAwDCyAGKAIEIgBBA3FBAUYEQCAAQXhxIQgCQCAAQf8BTQRAIAYoAggiASAAQQN2IgVBA3RBgOAAakYaIAEgBigCDCIARgRAQdjfAEHY3wAoAgBBfiAFd3E2AgAMAgsgASAANgIMIAAgATYCCAwBCyAGKAIYIQkCQCAGIAYoAgwiA0cEQCAGKAIIIgAgAzYCDCADIAA2AggMAQsCQCAGQRRqIgAoAgAiAQ0AIAZBEGoiACgCACIBDQBBACEDDAELA0AgACEFIAEiA0EUaiIAKAIAIgENACADQRBqIQAgAygCECIBDQALIAVBADYCAAsgCUUNAAJAIAYgBigCHCIBQQJ0QYjiAGoiACgCAEYEQCAAIAM2AgAgAw0BQdzfAEHc3wAoAgBBfiABd3E2AgAMAgsgCUEQQRQgCSgCECAGRhtqIAM2AgAgA0UNAQsgAyAJNgIYIAYoAhAiAARAIAMgADYCECAAIAM2AhgLIAYoAhQiAEUNACADIAA2AhQgACADNgIYCyAGIAhqIQYgAiAIaiECCyAGIAYoAgRBfnE2AgQgBCACQQFyNgIEIAIgBGogAjYCACACQf8BTQRAIAJBA3YiAUEDdEGA4ABqIQACf0HY3wAoAgAiAkEBIAF0IgFxRQRAQdjfACABIAJyNgIAIAAMAQsgACgCCAshASAAIAQ2AgggASAENgIMIAQgADYCDCAEIAE2AggMAwtBHyEAIAJB////B00EQCACQQh2IgAgAEGA/j9qQRB2QQhxIgB0IgEgAUGA4B9qQRB2QQRxIgF0IgMgA0GAgA9qQRB2QQJxIgN0QQ92IAAgAXIgA3JrIgBBAXQgAiAAQRVqdkEBcXJBHGohAAsgBCAANgIcIARCADcCECAAQQJ0QYjiAGohAQJAQdzfACgCACIDQQEgAHQiBXFFBEBB3N8AIAMgBXI2AgAgASAENgIAIAQgATYCGAwBCyACQQBBGSAAQQF2ayAAQR9GG3QhACABKAIAIQMDQCADIgEoAgRBeHEgAkYNAyAAQR12IQMgAEEBdCEAIAEgA0EEcWpBEGoiBSgCACIDDQALIAUgBDYCACAEIAE2AhgLIAQgBDYCDCAEIAQ2AggMAgtB5N8AIAZBKGsiAEF4IANrQQdxQQAgA0EIakEHcRsiBWsiBzYCAEHw3wAgAyAFaiIFNgIAIAUgB0EBcjYCBCAAIANqQSg2AgRB9N8AQcDjACgCADYCACABIAJBJyACa0EHcUEAIAJBJ2tBB3EbakEvayIAIAAgAUEQakkbIgVBGzYCBCAFQaDjACkCADcCECAFQZjjACkCADcCCEGg4wAgBUEIajYCAEGc4wAgBjYCAEGY4wAgAzYCAEGk4wBBADYCACAFQRhqIQADQCAAQQc2AgQgAEEIaiEDIABBBGohACACIANLDQALIAEgBUYNAyAFIAUoAgRBfnE2AgQgASAFIAFrIgZBAXI2AgQgBSAGNgIAIAZB/wFNBEAgBkEDdiICQQN0QYDgAGohAAJ/QdjfACgCACIDQQEgAnQiAnFFBEBB2N8AIAIgA3I2AgAgAAwBCyAAKAIICyECIAAgATYCCCACIAE2AgwgASAANgIMIAEgAjYCCAwEC0EfIQAgAUIANwIQIAZB////B00EQCAGQQh2IgAgAEGA/j9qQRB2QQhxIgB0IgIgAkGA4B9qQRB2QQRxIgJ0IgMgA0GAgA9qQRB2QQJxIgN0QQ92IAAgAnIgA3JrIgBBAXQgBiAAQRVqdkEBcXJBHGohAAsgASAANgIcIABBAnRBiOIAaiECAkBB3N8AKAIAIgNBASAAdCIFcUUEQEHc3wAgAyAFcjYCACACIAE2AgAgASACNgIYDAELIAZBAEEZIABBAXZrIABBH0YbdCEAIAIoAgAhAwNAIAMiAigCBEF4cSAGRg0EIABBHXYhAyAAQQF0IQAgAiADQQRxakEQaiIFKAIAIgMNAAsgBSABNgIAIAEgAjYCGAsgASABNgIMIAEgATYCCAwDCyABKAIIIgAgBDYCDCABIAQ2AgggBEEANgIYIAQgATYCDCAEIAA2AggLIAdBCGohAAwFCyACKAIIIgAgATYCDCACIAE2AgggAUEANgIYIAEgAjYCDCABIAA2AggLQeTfACgCACIAIARNDQBB5N8AIAAgBGsiATYCAEHw3wBB8N8AKAIAIgAgBGoiAjYCACACIAFBAXI2AgQgACAEQQNyNgIEIABBCGohAAwDC0HU3wBBMDYCAEEAIQAMAgsCQCAJRQ0AAkAgBSgCHCICQQJ0QYjiAGoiACgCACAFRgRAIAAgAzYCACADDQFB3N8AIAhBfiACd3EiCDYCAAwCCyAJQRBBFCAJKAIQIAVGG2ogAzYCACADRQ0BCyADIAk2AhggBSgCECIABEAgAyAANgIQIAAgAzYCGAsgBSgCFCIARQ0AIAMgADYCFCAAIAM2AhgLAkAgAUEPTQRAIAUgASAEaiIAQQNyNgIEIAAgBWoiACAAKAIEQQFyNgIEDAELIAUgBEEDcjYCBCAHIAFBAXI2AgQgASAHaiABNgIAIAFB/wFNBEAgAUEDdiIBQQN0QYDgAGohAAJ/QdjfACgCACICQQEgAXQiAXFFBEBB2N8AIAEgAnI2AgAgAAwBCyAAKAIICyEBIAAgBzYCCCABIAc2AgwgByAANgIMIAcgATYCCAwBC0EfIQAgAUH///8HTQRAIAFBCHYiACAAQYD+P2pBEHZBCHEiAHQiAiACQYDgH2pBEHZBBHEiAnQiBCAEQYCAD2pBEHZBAnEiBHRBD3YgACACciAEcmsiAEEBdCABIABBFWp2QQFxckEcaiEACyAHIAA2AhwgB0IANwIQIABBAnRBiOIAaiECAkACQCAIQQEgAHQiBHFFBEBB3N8AIAQgCHI2AgAgAiAHNgIAIAcgAjYCGAwBCyABQQBBGSAAQQF2ayAAQR9GG3QhACACKAIAIQQDQCAEIgIoAgRBeHEgAUYNAiAAQR12IQQgAEEBdCEAIAIgBEEEcWpBEGoiAygCACIEDQALIAMgBzYCACAHIAI2AhgLIAcgBzYCDCAHIAc2AggMAQsgAigCCCIAIAc2AgwgAiAHNgIIIAdBADYCGCAHIAI2AgwgByAANgIICyAFQQhqIQAMAQsCQCAKRQ0AAkAgAygCHCICQQJ0QYjiAGoiACgCACADRgRAIAAgBTYCACAFDQFB3N8AIAlBfiACd3E2AgAMAgsgCkEQQRQgCigCECADRhtqIAU2AgAgBUUNAQsgBSAKNgIYIAMoAhAiAARAIAUgADYCECAAIAU2AhgLIAMoAhQiAEUNACAFIAA2AhQgACAFNgIYCwJAIAFBD00EQCADIAEgBGoiAEEDcjYCBCAAIANqIgAgACgCBEEBcjYCBAwBCyADIARBA3I2AgQgCyABQQFyNgIEIAEgC2ogATYCACAIBEAgCEEDdiIEQQN0QYDgAGohAkHs3wAoAgAhAAJ/QQEgBHQiBCAGcUUEQEHY3wAgBCAGcjYCACACDAELIAIoAggLIQQgAiAANgIIIAQgADYCDCAAIAI2AgwgACAENgIIC0Hs3wAgCzYCAEHg3wAgATYCAAsgA0EIaiEACyAMQRBqJAAgAAvMDAEHfwJAIABFDQAgAEEIayICIABBBGsoAgAiAUF4cSIAaiEFAkAgAUEBcQ0AIAFBA3FFDQEgAiACKAIAIgFrIgJB6N8AKAIASQ0BIAAgAWohACACQezfACgCAEcEQCABQf8BTQRAIAIoAggiBCABQQN2IgdBA3RBgOAAakYaIAQgAigCDCIBRgRAQdjfAEHY3wAoAgBBfiAHd3E2AgAMAwsgBCABNgIMIAEgBDYCCAwCCyACKAIYIQYCQCACIAIoAgwiA0cEQCACKAIIIgEgAzYCDCADIAE2AggMAQsCQCACQRRqIgEoAgAiBA0AIAJBEGoiASgCACIEDQBBACEDDAELA0AgASEHIAQiA0EUaiIBKAIAIgQNACADQRBqIQEgAygCECIEDQALIAdBADYCAAsgBkUNAQJAIAIgAigCHCIEQQJ0QYjiAGoiASgCAEYEQCABIAM2AgAgAw0BQdzfAEHc3wAoAgBBfiAEd3E2AgAMAwsgBkEQQRQgBigCECACRhtqIAM2AgAgA0UNAgsgAyAGNgIYIAIoAhAiAQRAIAMgATYCECABIAM2AhgLIAIoAhQiAUUNASADIAE2AhQgASADNgIYDAELIAUoAgQiAUEDcUEDRw0AQeDfACAANgIAIAUgAUF+cTYCBCACIABBAXI2AgQgACACaiAANgIADwsgAiAFTw0AIAUoAgQiAUEBcUUNAAJAIAFBAnFFBEAgBUHw3wAoAgBGBEBB8N8AIAI2AgBB5N8AQeTfACgCACAAaiIANgIAIAIgAEEBcjYCBCACQezfACgCAEcNA0Hg3wBBADYCAEHs3wBBADYCAA8LIAVB7N8AKAIARgRAQezfACACNgIAQeDfAEHg3wAoAgAgAGoiADYCACACIABBAXI2AgQgACACaiAANgIADwsgAUF4cSAAaiEAAkAgAUH/AU0EQCAFKAIIIgQgAUEDdiIHQQN0QYDgAGpGGiAEIAUoAgwiAUYEQEHY3wBB2N8AKAIAQX4gB3dxNgIADAILIAQgATYCDCABIAQ2AggMAQsgBSgCGCEGAkAgBSAFKAIMIgNHBEAgBSgCCCIBQejfACgCAEkaIAEgAzYCDCADIAE2AggMAQsCQCAFQRRqIgEoAgAiBA0AIAVBEGoiASgCACIEDQBBACEDDAELA0AgASEHIAQiA0EUaiIBKAIAIgQNACADQRBqIQEgAygCECIEDQALIAdBADYCAAsgBkUNAAJAIAUgBSgCHCIEQQJ0QYjiAGoiASgCAEYEQCABIAM2AgAgAw0BQdzfAEHc3wAoAgBBfiAEd3E2AgAMAgsgBkEQQRQgBigCECAFRhtqIAM2AgAgA0UNAQsgAyAGNgIYIAUoAhAiAQRAIAMgATYCECABIAM2AhgLIAUoAhQiAUUNACADIAE2AhQgASADNgIYCyACIABBAXI2AgQgACACaiAANgIAIAJB7N8AKAIARw0BQeDfACAANgIADwsgBSABQX5xNgIEIAIgAEEBcjYCBCAAIAJqIAA2AgALIABB/wFNBEAgAEEDdiIBQQN0QYDgAGohAAJ/QdjfACgCACIEQQEgAXQiAXFFBEBB2N8AIAEgBHI2AgAgAAwBCyAAKAIICyEBIAAgAjYCCCABIAI2AgwgAiAANgIMIAIgATYCCA8LQR8hASACQgA3AhAgAEH///8HTQRAIABBCHYiASABQYD+P2pBEHZBCHEiAXQiBCAEQYDgH2pBEHZBBHEiBHQiAyADQYCAD2pBEHZBAnEiA3RBD3YgASAEciADcmsiAUEBdCAAIAFBFWp2QQFxckEcaiEBCyACIAE2AhwgAUECdEGI4gBqIQQCQAJAAkBB3N8AKAIAIgNBASABdCIFcUUEQEHc3wAgAyAFcjYCACAEIAI2AgAgAiAENgIYDAELIABBAEEZIAFBAXZrIAFBH0YbdCEBIAQoAgAhAwNAIAMiBCgCBEF4cSAARg0CIAFBHXYhAyABQQF0IQEgBCADQQRxakEQaiIFKAIAIgMNAAsgBSACNgIAIAIgBDYCGAsgAiACNgIMIAIgAjYCCAwBCyAEKAIIIgAgAjYCDCAEIAI2AgggAkEANgIYIAIgBDYCDCACIAA2AggLQfjfAEH43wAoAgBBAWsiAkF/IAIbNgIACwtVAQJ/QdDfACgCACIBIABBA2pBfHEiAmohAAJAIAJBAU5BACAAIAFNGw0APwBBEHQgAEkEQCAAEABFDQELQdDfACAANgIAIAEPC0HU3wBBMDYCAEF/C4IEAQN/IAJBgARPBEAgACABIAIQARogAA8LIAAgAmohAwJAIAAgAXNBA3FFBEACQCACQQFIBEAgACECDAELIABBA3FFBEAgACECDAELIAAhAgNAIAIgAS0AADoAACABQQFqIQEgAkEBaiICIANPDQEgAkEDcQ0ACwsCQCADQXxxIgRBwABJDQAgAiAEQUBqIgVLDQADQCACIAEoAgA2AgAgAiABKAIENgIEIAIgASgCCDYCCCACIAEoAgw2AgwgAiABKAIQNgIQIAIgASgCFDYCFCACIAEoAhg2AhggAiABKAIcNgIcIAIgASgCIDYCICACIAEoAiQ2AiQgAiABKAIoNgIoIAIgASgCLDYCLCACIAEoAjA2AjAgAiABKAI0NgI0IAIgASgCODYCOCACIAEoAjw2AjwgAUFAayEBIAJBQGsiAiAFTQ0ACwsgAiAETw0BA0AgAiABKAIANgIAIAFBBGohASACQQRqIgIgBEkNAAsMAQsgA0EESQRAIAAhAgwBCyAAIANBBGsiBEsEQCAAIQIMAQsgACECA0AgAiABLQAAOgAAIAIgAS0AAToAASACIAEtAAI6AAIgAiABLQADOgADIAFBBGohASACQQRqIgIgBE0NAAsLIAIgA0kEQANAIAIgAS0AADoAACABQQFqIQEgAkEBaiICIANHDQALCyAAC9YCAQJ/AkAgAUUNACAAIAFqIgJBAWtBADoAACAAQQA6AAAgAUEDSQ0AIAJBAmtBADoAACAAQQA6AAEgAkEDa0EAOgAAIABBADoAAiABQQdJDQAgAkEEa0EAOgAAIABBADoAAyABQQlJDQAgAEEAIABrQQNxIgNqIgJBADYCACACIAEgA2tBfHEiA2oiAUEEa0EANgIAIANBCUkNACACQQA2AgggAkEANgIEIAFBCGtBADYCACABQQxrQQA2AgAgA0EZSQ0AIAJBADYCGCACQQA2AhQgAkEANgIQIAJBADYCDCABQRBrQQA2AgAgAUEUa0EANgIAIAFBGGtBADYCACABQRxrQQA2AgAgAyACQQRxQRhyIgNrIgFBIEkNACACIANqIQIDQCACQgA3AxggAkIANwMQIAJCADcDCCACQgA3AwAgAkEgaiECIAFBIGsiAUEfSw0ACwsLBAAjAAsGACAAJAALEAAjACAAa0FwcSIAJAAgAAsLvVYIAEGECAvxQJYwB3csYQ7uulEJmRnEbQeP9GpwNaVj6aOVZJ4yiNsOpLjceR7p1eCI2dKXK0y2Cb18sX4HLbjnkR2/kGQQtx3yILBqSHG5895BvoR91Noa6+TdbVG11PTHhdODVphsE8Coa2R6+WL97Mllik9cARTZbAZjYz0P+vUNCI3IIG47XhBpTORBYNVycWei0eQDPEfUBEv9hQ3Sa7UKpfqotTVsmLJC1sm720D5vKzjbNgydVzfRc8N1txZPdGrrDDZJjoA3lGAUdfIFmHQv7X0tCEjxLNWmZW6zw+lvbieuAIoCIgFX7LZDMYk6Quxh3xvLxFMaFirHWHBPS1mtpBB3HYGcdsBvCDSmCoQ1e+JhbFxH7W2BqXkv58z1LjooskHeDT5AA+OqAmWGJgO4bsNan8tPW0Il2xkkQFcY+b0UWtrYmFsHNgwZYVOAGLy7ZUGbHulARvB9AiCV8QP9cbZsGVQ6bcS6ri+i3yIufzfHd1iSS3aFfN804xlTNT7WGGyTc5RtTp0ALyj4jC71EGl30rXldg9bcTRpPv01tNq6WlD/NluNEaIZ63QuGDacy0EROUdAzNfTAqqyXwN3TxxBVCqQQInEBALvoYgDMkltWhXs4VvIAnUZrmf5GHODvneXpjJ2SkimNCwtKjXxxc9s1mBDbQuO1y9t61susAgg7jttrO/mgzitgOa0rF0OUfV6q930p0VJtsEgxbccxILY+OEO2SUPmptDahaanoLzw7knf8JkyeuAAqxngd9RJMP8NKjCIdo8gEe/sIGaV1XYvfLZ2WAcTZsGecGa252G9T+4CvTiVp62hDMSt1nb9+5+fnvvo5DvrcX1Y6wYOij1tZ+k9GhxMLYOFLy30/xZ7vRZ1e8pt0GtT9LNrJI2isN2EwbCq/2SgM2YHoEQcPvYN9V32eo745uMXm+aUaMs2HLGoNmvKDSbyU24mhSlXcMzANHC7u5FgIiLyYFVb47usUoC72yklq0KwRqs1yn/9fCMc/QtYue2Swdrt5bsMJkmybyY+yco2p1CpNtAqkGCZw/Ng7rhWcHchNXAAWCSr+VFHq44q4rsXs4G7YMm47Skg2+1eW379x8Id/bC9TS04ZC4tTx+LPdaG6D2h/NFr6BWya59uF3sG93R7cY5loIiHBqD//KOwZmXAsBEf+eZY9prmL40/9rYUXPbBZ44gqg7tIN11SDBE7CswM5YSZnp/cWYNBNR2lJ23duPkpq0a7cWtbZZgvfQPA72DdTrrypxZ673n/Pskfp/7UwHPK9vYrCusowk7NTpqO0JAU20LqTBtfNKVfeVL9n2SMuemazuEphxAIbaF2UK28qN74LtKGODMMb3wVaje8CLQAAAABBMRsZgmI2MsNTLSsExWxkRfR3fYanWlbHlkFPCIrZyEm7wtGK6O/6y9n04wxPtaxNfq61ji2Dns8cmIdREsJKECPZU9Nw9HiSQe9hVdeuLhTmtTfXtZgcloSDBVmYG4IYqQCb2/otsJrLNqldXXfmHGxs/98/QdSeDlrNoiSEleMVn4wgRrKnYXepvqbh6PHn0PPoJIPew2Wyxdqqrl1d659GRCjMa29p/XB2rmsxOe9aKiAsCQcLbTgcEvM2Rt+yB13GcVRw7TBla/T38yq7tsIxonWRHIk0oAeQ+7yfF7qNhA553qklOO+yPP9583O+SOhqfRvFQTwq3lgFT3nwRH5i6YctT8LGHFTbAYoVlEC7Do2D6COmwtk4vw3FoDhM9Lshj6eWCs6WjRMJAMxcSDHXRYti+m7KU+F3VF27uhVsoKPWP42Ilw6WkVCY194RqczH0vrh7JPL+vVc12JyHeZ5a961VECfhE9ZWBIOFhkjFQ/acDgkm0EjPadr/WXmWuZ8JQnLV2Q40E6jrpEB4p+KGCHMpzNg/bwqr+Ekre7QP7QtgxKfbLIJhqskSMnqFVPQKUZ++2h3ZeL2eT8vt0gkNnQbCR01KhIE8rxTS7ONSFJw3mV5Me9+YP7z5ue/wv3+fJHQ1T2gy8z6NoqDuweRmnhUvLE5ZaeoS5iDOwqpmCLJ+rUJiMuuEE9d718ObPRGzT/ZbYwOwnRDElrzAiNB6sFwbMGAQXfYR9c2lwbmLY7FtQClhIQbvBqKQXFbu1pomOh3Q9nZbFoeTy0VX342DJwtGyfdHAA+EgCYuVMxg6CQYq6L0VO1khbF9N1X9O/ElKfC79WW2fbpvAeuqI0ct2veMZwq7yqF7XlryqxIcNNvG134LipG4eE23magB8V/Y1ToVCJl803l87ICpMKpG2eRhDAmoJ8puK7F5Pmf3v06zPPWe/3oz7xrqYD9WrKZPgmfsn84hKuwJBws8RUHNTJGKh5zdzEHtOFwSPXQa1E2g0Z6d7JdY07X+ssP5uHSzLXM+Y2E1+BKEpavCyONtshwoJ2JQbuERl0jAwdsOBrEPxUxhQ4OKEKYT2cDqVR+wPp5VYHLYkwfxTiBXvQjmJ2nDrPclhWqGwBU5VoxT/yZYmLX2FN5zhdP4UlWfvpQlS3Xe9QczGITio0tUruWNJHoux/Q2aAG7PN+Xq3CZUdukUhsL6BTdeg2EjqpBwkjalQkCCtlPxHkeaeWpUi8j2YbkaQnKoq94LzL8qGN0Oti3v3AI+/m2b3hvBT80KcNP4OKJn6ykT+5JNBw+BXLaTtG5kJ6d/1btWtl3PRafsU3CVPudjhI97GuCbjwnxKhM8w/inL9JJMAAAAAN2rCAW7UhANZvkYC3KgJB+vCywayfI0EhRZPBbhREw6PO9EP1oWXDeHvVQxk+RoJU5PYCAotngo9R1wLcKMmHEfJ5B0ed6IfKR1gHqwLLxubYe0awt+rGPW1aRnI8jUS/5j3E6YmsRGRTHMQFFo8FSMw/hR6jrgWTeR6F+BGTTjXLI85jpLJO7n4Czo87kQ/C4SGPlI6wDxlUAI9WBdeNm99nDc2w9o1AakYNIS/VzGz1ZUw6mvTMt0BETOQ5Wskp4+pJf4x7yfJWy0mTE1iI3snoCIimeYgFfMkISi0eCof3rorRmD8KXEKPij0HHEtw3azLJrI9S6tojcvwI2acPfnWHGuWR5zmTPcchwlk3crT1F2cvEXdEWb1XV43Il+T7ZLfxYIDX0hYs98pHSAeZMeQnjKoAR6/crGe7AuvGyHRH5t3vo4b+mQ+m5shrVrW+x3agJSMWg1OPNpCH+vYj8VbWNmqythUcHpYNTXpmXjvWRkugMiZo1p4Gcgy9dIF6EVSU4fU0t5dZFK/GPeT8sJHE6St1pMpd2YTZiaxEav8AZH9k5ARcEkgkREMs1Bc1gPQCrmSUIdjItDUGjxVGcCM1U+vHVXCda3VozA+FO7qjpS4hR8UNV+vlHoOeJa31MgW4btZlmxh6RYNJHrXQP7KVxaRW9ebS+tX4AbNeG3cffg7s+x4tmlc+Ncszzma9n+5zJnuOUFDXrkOEom7w8g5O5WnqLsYfRg7eTiL+jTiO3pijar671caerwuBP9x9LR/J5sl/6pBlX/LBAa+ht62PtCxJ75da5c+EjpAPN/g8LyJj2E8BFXRvGUQQn0oyvL9fqVjffN/0/2YF142Vc3utgOifzaOeM+27z1cd6Ln7Pf0iH13eVLN9zYDGvX72ap1rbY79SBsi3VBKRi0DPOoNFqcObTXRok0hD+XsUnlJzEfiraxklAGMfMVlfC+zyVw6KC08GV6BHAqK9Ny5/Fj8rGe8nI8RELyXQHRMxDbYbNGtPAzy25As5Alq+Rd/xtkC5CK5IZKOmTnD6mlqtUZJfy6iKVxYDglPjHvJ/PrX6elhM4nKF5+p0kb7WYEwV3mUq7MZt90fOaMDWJjQdfS4xe4Q2OaYvPj+ydgIrb90KLgkkEibUjxoiIZJqDvw5YguawHoDR2tyBVMyThGOmUYU6GBeHDXLVhqDQ4qmXuiCozgRmqvlupKt8eOuuSxIprxKsb60lxq2sGIHxpy/rM6Z2VXWkQT+3pcQp+KDzQzqhqv18o52XvqLQc8S15xkGtL6nQLaJzYK3DNvNsjuxD7NiD0mxVWWLsGgi17tfSBW6BvZTuDGckbm0it68g+AcvdpeWr/tNJi+AAAAAGVnvLiLyAmq7q+1EleXYo8y8N433F9rJbk4153vKLTFik8IfWTgvW8BhwHXuL/WSt3YavIzd9/gVhBjWJ9XGVD6MKXoFJ8Q+nH4rELIwHvfrafHZ0MIcnUmb87NcH+tlRUYES37t6Q/ntAYhyfozxpCj3OirCDGsMlHegg+rzKgW8iOGLVnOwrQAIeyaThQLwxf7Jfi8FmFh5flPdGHhmW04DrdWk+Pzz8oM3eGEOTq43dYUg3Y7UBov1H4ofgr8MSfl0gqMCJaT1ee4vZvSX+TCPXHfadA1RjA/G1O0J81K7cjjcUYlp+gfyonGUf9unwgQQKSj/QQ9+hIqD1YFJtYP6gjtpAdMdP3oYlqz3YUD6jKrOEHf76EYMMG0nCgXrcXHOZZuKn0PN8VTIXnwtHggH5pDi/Le2tId8OiDw3Lx2ixcynHBGFMoLjZ9ZhvRJD/0/x+UGbuGzfaVk0nuQ4oQAW2xu+wpKOIDBwasNuBf9dnOZF40iv0H26TA/cmO2aQmoOIPy+R7ViTKVRgRLQxB/gM36hNHrrP8abs35L+ibguRmcXm1QCcCfsu0jwcd4vTMkwgPnbVedFY5ygP2v5x4PTF2g2wXIPinnLN13krlDhXED/VE4lmOj2c4iLrhbvNxb4QIIEnSc+vCQf6SFBeFWZr9fgi8qwXDM7tlntXtHlVbB+UEfVGez/bCE7YglGh9rn6TLIgo6OcNSe7Six+VGQX1bkgjoxWDqDCY+n5m4zHwjBhg1tpjq1pOFAvcGG/AUvKUkXSk71r/N2IjKWEZ6KeL4rmB3ZlyBLyfR4Lq5IwMAB/dKlZkFqHF6W93k5Kk+Xlp9d8vEj5QUZa01gftf1jtFi5+u23l9SjgnCN+m1etlGAGi8IbzQ6jHfiI9WYzBh+dYiBJ5qmr2mvQfYwQG/Nm60rVMJCBWaTnId/ynOpRGGe7d04ccPzdkQkqi+rCpGERk4I3algHVmxtgQAXpg/q7PcpvJc8oi8aRXR5YY76k5rf3MXhFFBu5NdmOJ8c6NJkTc6EH4ZFF5L/k0HpNB2rEmU7/WmuvpxvmzjKFFC2IO8BkHaUyhvlGbPNs2J4Q1mZKWUP4uLpm5VCb83uieEnFdjHcW4TTOLjapq0mKEUXmPwMggYO7dpHg4xP2XFv9WelJmD5V8SEGgmxEYT7Uqs6Lxs+pN344QX/WXSbDbrOJdnzW7srEb9YdWQqxoeHkHhTzgXmoS9dpyxOyDnerXKHCuTnGfgGA/qmc5ZkVJAs2oDZuURyOpxZmhsJx2j4s3m8sSbnTlPCBBAmV5rixe0kNox4usRtIPtJDLVlu+8P22+mmkWdRH6mwzHrODHSUYblm8QYF3gAAAAB3BzCW7g5hLJkJUboHbcQZcGr0j+ljpTWeZJWjDtuIMnncuKTg1ekel9LZiAm2TCt+sXy957gtB5C/HZEdtxBkarAg8vO5cUiEvkHeGtrUfW3d5Ov01LVRg9OFxxNsmFZka6jA/WL5eoplyewUAVxPYwZs2foPPWONCA31O24gyExpEF7VYEHkomdxcjwD5NFLBNRH0g2F/aUKtWs1taj6QrKYbNu7ydasvPlAMths40XfXHXc1g3Pq9E9WSbZMKxR3gA6yNdRgL/QYRYhtPS1VrPEI8+6lZm4vaUPKAK4nl8FiAjGDNmysQvpJC9vfIdYaEwRwWEdq7ZmLT123EGQAdtxBpjSILzv1RAqcbGFiQa2tR+fv+Sl6LjUM3gHyaIPAPk0lgmojuEOmBh/ag27CG09LZFkbJfmY1wBa2tR9BxsYWKFZTDY8mIATmwGle0bAaV7ggj0wfUPxFdlsNnGErfpUIu+uOr8uYh8Yt0d3xXaLUmM03zz+9RMZU2yYVg6tVHOo7wAdNS7MOJK36VBPdiV16TRxG3T1vT7Q2npajRu2fytZ4hG2mC40EQELXMzAx3lqgpMX90NfMlQBXE8JwJBqr4LEBDJDCCGV2i1JSBvhbO5ZtQJzmHkn17e+Q4p2cmYsNCYIsfXqLRZsz0XLrQNgbe9XDvAumyt7biDIJq/s7YDtuIMdLHSmurVRzmd0nevBNsmFXPcFoPjYwsSlGQ7hA1taj56alqo5A7PC5MJ/50KAK4nfQeesfAPk0SHCKPSHgHyaGkGwv73YlddgGVnyxlsNnFuawbn/tQbdonTK+AQ2npaZ91KzPm532+Ovu/5F7e+Q2CwjtXW1qPoodGTfjjYwsRP3/JS0btn8aa8V2c/tQbdSLI2S9gNK9qvChtMNgNK9kEEemDfYO/DqGffVTFuju9Gab55y2GzjLxmgxolb9KgUmjiNswMd5W7C0cDIgIWuVUFJi/Fuju+sr0LKCu0WpJcs2oEwtf/p7XQzzEs2Z6LW96uHZtkwrDsY/ImdWqjnAJtkwqcCQap6w42P3IHZ4UFAFcTlb9KguK4ehR7sSuuDLYbOJLSjpvl1b4NfNzvtwvb3yGG09LU8dTiQmjds/gf2oNugb4Wzfa5JltvsHfhGLdHd4gIWub/D2pwZgY7yhEBC1yPZZ7/+GKuaWFr/9MWbM9FoArieNcN0u5OBINUOQOzwqdnJmHQYBb3SWlHTT5ud9uu0WpK2dZa3EDfC2Y32DvwqbyuU967nsVHss9/MLX/6b298hzKusKKU7OTMCS0o6a60DYFzdcGk1TeVykj2We/s2Z6LsRhSrhdaBsCKm8rlLQLvjfDDI6hWgXfGy0C740AAAAAGRsxQTI2YoIrLVPDZGzFBH139EVWWqeGT0GWx8jZigjRwrtJ+u/oiuP02custU8Mta5+TZ6DLY6HmBzPSsISUVPZIxB49HDTYe9Bki6u11U3teYUHJi11wWDhJaCG5hZmwCpGLAt+tupNsua5nddXf9sbBzUQT/fzVoOnpWEJKKMnxXjp7JGIL6pd2Hx6OGm6PPQ58PegyTaxbJlXV2uqkRGn+tva8wodnD9aTkxa64gKlrvCwcJLBIcOG3fRjbzxl0Hsu1wVHH0a2Uwuyrz96IxwraJHJF1kAegNBefvPsOhI26JaneeTyy7zhz83n/auhIvkHFG31Y3io88HlPBelifkTCTy2H21QcxpQVigGNDrtApiPog7842cI4oMUNIbv0TAqWp48TjZbOXMwACUXXMUhu+mKLd+FTyrq7XVSjoGwViI0/1pGWDpfe15hQx8ypEezh+tL1+suTcmLXXGt55h1AVLXeWU+EnxYOElgPFSMZJDhw2j0jQZtl/WunfOZa5lfLCSVO0DhkAZGuoxiKn+Izp8whKrz9YK0k4a+0P9DunxKDLYYJsmzJSCSr0FMV6vt+RiniZXdoLz959jYkSLcdCRt0BBIqNUtTvPJSSI2zeWXecGB+7zHn5vP+/v3Cv9XQkXzMy6A9g4o2+pqRB7uxvFR4qKdlOTuDmEsimKkKCbX6yRCuy4hf711PRvRsDm3ZP810wg6M81oSQ+pBIwLBbHDB2HdBgJc210eOLeYGpQC1xbwbhIRxQYoaaFq7W0N36JhabNnZFS1PHgw2fl8nGy2cPgAc3bmYABKggzFTi65ikJK1U9Hd9MUWxO/0V+/Cp5T22ZbVrge86bccjaicMd5rhSrvKspree3TcEis+F0bb+FGKi5m3jbhf8UHoFToVGNN82UiArLz5RupwqQwhJFnKZ+gJuTFrrj93p/51vPMOs/o/XuAqWu8mbJa/bKfCT6rhDh/LBwksDUHFfEeKkYyBzF3c0hw4bRRa9D1ekaDNmNdsnfL+tdO0uHmD/nMtczg14SNr5YSSraNIwudoHDIhLtBiQMjXUYaOGwHMRU/xCgODoVnT5hCflSpA1V5+sBMYsuBgTjFH5gj9F6zDqedqhWW3OVUABv8TzFa12Jimc55U9hJ4U8XUPp+VnvXLZVizBzULY2KEzSWu1Ifu+iRBqDZ0F5+8+xHZcKtbEiRbnVToC86EjboIwkHqQgkVGoRP2Urlqd55I+8SKWkkRtmvYoqJ/LLvODr0I2hwP3eYtnm7yMUvOG9DafQ/CaKgz8/kbJ+cNAkuWnLFfhC5kY7W/13etxla7XFflr07lMJN/dIOHa4Ca6xoRKf8Io/zDOTJP1yAAAAAAHCajcDhNRuAka+WQcJqNwGy8LrBI18sgVPFoUOE1G4D9E7jw2XhdYMVe/hCRr5ZAjYk1MKni0KC1xHPRwmo3Ad5MlHH6J3Hh5gHSkbLwusGu1hmxir38IZabX1EjXyyBP3mP8RsSamEHNMkRU8WhQU/jAjFriOehd65E04TUbgOY8s1zvJko46C/i5P0TuPD6GhAs8wDpSPQJQZTZeF1g3nH1vNdrDNjQYqQExV7+EMJXVszLTa+ozEQHdJGvlkCWpj6cn7zH+Ji1bySNiTUwioCd7IOaZIiEk8xUqeLQoK7reHyn8YEYoPgpxLXEc9CyzdsMu9ciaLzeirXCajcBxWOf3cx5ZrnLcM5l3kyUcdlFPK3QX8XJ11ZtFfonceH9Ltk99DQgWfM9iIXmAdKR4Qh6TegSgynvGyv1svC6wbX5Eh284+t5u+pDpa7WGbGp37FtoMVICafM4NWKvfwhjbRU/YSurZmDpwVFlptfUZGS942YiA7pn4GmNSNfLIEkVoRdLUx9OSpF1eU/eY/xOHAnLTFq3kk2Y3aVGxJqYRwbwr0VATvZEgiTBQc0yREAPWHNCSeYqQ4uMHVTxaFBVMwJnV3W8Pla31glT+MCMUjqqu1B8FOJRvn7VWuI56FsgU99ZZu2GWKSHsV3rkTRcKfsDXm9FWl+tL23hNRuA4Pdxt+Kxz+7jc6XZ5jyzXOf+2WvluGcy5HoNBe8mSjju5CAP7KKeVu1g9GHoL+Lk6e2I0+urNorqaVy9/RO48PzR0sf+l2ye/1UGqfoaECz72Hob+Z7EQvhcrnXzAOlI8sKDf/CEPSbxRlcR9AlBlPXLK6P3jZX69k//zdl4XWDYujdX2vyJDts+4znecfW837Ofi931IdLcN0vl12sM2NapZu/U79i21S2ygdBipATRoM4z0+ZwatIkGl3FXv4QxJyUJ8baKn7HGEBJwldWzMOVPPvB04KiwBHolctNr6jKj8WfyMl7xskLEfHMRAd0zYZtQ8/A0xrOArktka+WQJBt/HeSK0Iuk+koGZamPpyXZFSrlSLq8pTggMWfvMf4nn6tz5w4E5ad+nmhmLVvJJl3BRObMbtKmvPRfY2JNTCMS18Hjg3hXo/Pi2mKgJ3si0L324kESYKIxiO1g5pkiIJYDr+AHrDmgdza0YSTzFSFUaZjhxcYOobVcg2p4tCgqCC6l6pmBM6rpG75rut4fK8pEkutb6wSrK3GJafxgRimM+svpHVVdqW3P0Gg+CnEoTpD86N8/aqivpedtcRz0LQGGee2QKe+t4LNibLN2wyzD7E7sUkPYrCLZVW71yJouhVIX7hT9ga5kZwxvN6KtL0c4IO/Wl7avpg07QAAAAC4vGdlqgnIixK1r+6PYpdXN97wMiVrX9yd1zi5xbQo730IT4pvveBk1wGHAUrWv7jyatjd4N93M1hjEFZQGVef6KUw+voQnxRCrPhx33vAyGfHp611cghDzc5vJpWtf3AtERgVP6S3+4cY0J4az+gnonOPQrDGIKwIekfJoDKvPhiOyFsKO2e1socA0C9QOGmX7F8MhVnw4j3ll4dlhofR3TrgtM+PT1p3Myg/6uQQhlJYd+NA7dgN+FG/aPAr+KFIl5/EWiIwKuKeV09/SW/2x/UIk9VAp31t/MAYNZ/QTo0jtyuflhjFJyp/oLr9RxkCQSB8EPSPkqhI6PebFFg9I6g/WDEdkLaJoffTFHbPaqzKqA++fwfhBsNghF6gcNLmHBe39Km4WUwV3zzRwueFaX6A4HvLLw7Dd0hryw0PonOxaMdhBMcp2bigTERvmPX80/+Q7mZQflbaNxsOuSdNtgVAKKSw78YcDIijgduwGjln138r0niRk24f9Dsm9wODmpBmkS8/iCmTWO20RGBUDPgHMR5NqN+m8c+6/pLf7EYuuIlUmxdn7CdwAnHwSLvJTC/e2/mAMGNF51VrP6Cc04PH+cE2aBd5ig9y5F03y1zhUK5OVP9A9uiYJa6LiHMWN+8WBIJA+Lw+J50h6R8kmVV4QYvg168zXLDK7Vm2O1Xl0V5HUH6w/+wZ1WI7IWzah0YJyDLp53COjoIo7Z7UkFH5sYLkVl86WDE6p48Jgx8zbuYNhsEItTqmbb1A4aQF/IbBF0kpL6/1TkoyInbzip4Rlpgrvnggl9kdePTJS8BIri7S/QHAakFmpfeWXhxPKjl5XZ+Wl+Uj8fJNaxkF9dd+YOdi0Y5f3rbrwgmOUnq16TdoAEbZ0LwhvIjfMeowY1aPItb5YZpqngQHvaa9vwHB2K20bjYVCAlTHXJOmqXOKf+3e4YRD8fhdJIQ2c0qrL6oOBkRRoCldiPYxmZ1YHoBEHLPrv7Kc8mbV6TxIu8Ylkf9rTmpRRFezHZN7gbO8Ylj3EQmjWT4Qej5L3lRQZMeNFMmsdrrmta/s/nG6QtFoYwZ8A5ioUxpBzybUb6EJzbblpKZNS4u/lAmVLmZnuje/IxdcRI04RZ3qTYuzhGKSasDP+ZFu4OBIOPgkXZbXPYTSelZ/fFVPphsggYh1D5hRMaLzqp+N6nP1n9BOG7DJl18domzxMru1lkd1m/hobEK8xQe5EuoeYETy2nXq3cOsrnCoVwBfsY5nKn+gCQVmeU2oDYLjhxRboZmFqc+2nHCLG/eLJTTuUkJBIHwsbjmlaMNSXsbsS4eQ9I+SPtuWS3p2/bDUWeRpsywqR90DM56ZrlhlN4FBvEAAAAAAAAAAAMAAAAEAAQACAAEAAQAAAAEAAUAEAAIAAQAAAAEAAYAIAAgAAQAAAAEAAQAEAAQAAUAAAAIABAAIAAgAAUAAAAIABAAgACAAAUAAAAIACAAgAAAAQUAAAAgAIAAAgEABAUAAAAgAAIBAgEAEAUAQYHJAAu2EAECAwQEBQUGBgYGBwcHBwgICAgICAgICQkJCQkJCQkKCgoKCgoKCgoKCgoKCgoKCwsLCwsLCwsLCwsLCwsLCwwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDwAAEBESEhMTFBQUFBUVFRUWFhYWFhYWFhcXFxcXFxcXGBgYGBgYGBgYGBgYGBgYGBkZGRkZGRkZGRkZGRkZGRkaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHB0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0AAQIDBAUGBwgICQkKCgsLDAwMDA0NDQ0ODg4ODw8PDxAQEBAQEBAQERERERERERESEhISEhISEhMTExMTExMTFBQUFBQUFBQUFBQUFBQUFBUVFRUVFRUVFRUVFRUVFRUWFhYWFhYWFhYWFhYWFhYWFxcXFxcXFxcXFxcXFxcXFxgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxscwCcAAMAsAAABAQAAHgEAAA8AAABALAAAQC0AAAAAAAAeAAAADwAAAAAAAADALQAAAAAAABMAAAAHAAAAAAAAAAwACACMAAgATAAIAMwACAAsAAgArAAIAGwACADsAAgAHAAIAJwACABcAAgA3AAIADwACAC8AAgAfAAIAPwACAACAAgAggAIAEIACADCAAgAIgAIAKIACABiAAgA4gAIABIACACSAAgAUgAIANIACAAyAAgAsgAIAHIACADyAAgACgAIAIoACABKAAgAygAIACoACACqAAgAagAIAOoACAAaAAgAmgAIAFoACADaAAgAOgAIALoACAB6AAgA+gAIAAYACACGAAgARgAIAMYACAAmAAgApgAIAGYACADmAAgAFgAIAJYACABWAAgA1gAIADYACAC2AAgAdgAIAPYACAAOAAgAjgAIAE4ACADOAAgALgAIAK4ACABuAAgA7gAIAB4ACACeAAgAXgAIAN4ACAA+AAgAvgAIAH4ACAD+AAgAAQAIAIEACABBAAgAwQAIACEACAChAAgAYQAIAOEACAARAAgAkQAIAFEACADRAAgAMQAIALEACABxAAgA8QAIAAkACACJAAgASQAIAMkACAApAAgAqQAIAGkACADpAAgAGQAIAJkACABZAAgA2QAIADkACAC5AAgAeQAIAPkACAAFAAgAhQAIAEUACADFAAgAJQAIAKUACABlAAgA5QAIABUACACVAAgAVQAIANUACAA1AAgAtQAIAHUACAD1AAgADQAIAI0ACABNAAgAzQAIAC0ACACtAAgAbQAIAO0ACAAdAAgAnQAIAF0ACADdAAgAPQAIAL0ACAB9AAgA/QAIABMACQATAQkAkwAJAJMBCQBTAAkAUwEJANMACQDTAQkAMwAJADMBCQCzAAkAswEJAHMACQBzAQkA8wAJAPMBCQALAAkACwEJAIsACQCLAQkASwAJAEsBCQDLAAkAywEJACsACQArAQkAqwAJAKsBCQBrAAkAawEJAOsACQDrAQkAGwAJABsBCQCbAAkAmwEJAFsACQBbAQkA2wAJANsBCQA7AAkAOwEJALsACQC7AQkAewAJAHsBCQD7AAkA+wEJAAcACQAHAQkAhwAJAIcBCQBHAAkARwEJAMcACQDHAQkAJwAJACcBCQCnAAkApwEJAGcACQBnAQkA5wAJAOcBCQAXAAkAFwEJAJcACQCXAQkAVwAJAFcBCQDXAAkA1wEJADcACQA3AQkAtwAJALcBCQB3AAkAdwEJAPcACQD3AQkADwAJAA8BCQCPAAkAjwEJAE8ACQBPAQkAzwAJAM8BCQAvAAkALwEJAK8ACQCvAQkAbwAJAG8BCQDvAAkA7wEJAB8ACQAfAQkAnwAJAJ8BCQBfAAkAXwEJAN8ACQDfAQkAPwAJAD8BCQC/AAkAvwEJAH8ACQB/AQkA/wAJAP8BCQAAAAcAQAAHACAABwBgAAcAEAAHAFAABwAwAAcAcAAHAAgABwBIAAcAKAAHAGgABwAYAAcAWAAHADgABwB4AAcABAAHAEQABwAkAAcAZAAHABQABwBUAAcANAAHAHQABwADAAgAgwAIAEMACADDAAgAIwAIAKMACABjAAgA4wAIAAAABQAQAAUACAAFABgABQAEAAUAFAAFAAwABQAcAAUAAgAFABIABQAKAAUAGgAFAAYABQAWAAUADgAFAB4ABQABAAUAEQAFAAkABQAZAAUABQAFABUABQANAAUAHQAFAAMABQATAAUACwAFABsABQAHAAUAFwAFAEHg2QALTQEAAAABAAAAAQAAAAEAAAACAAAAAgAAAAIAAAACAAAAAwAAAAMAAAADAAAAAwAAAAQAAAAEAAAABAAAAAQAAAAFAAAABQAAAAUAAAAFAEHQ2gALZQEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAUAAAAGAAAABgAAAAcAAAAHAAAACAAAAAgAAAAJAAAACQAAAAoAAAAKAAAACwAAAAsAAAAMAAAADAAAAA0AAAANAEGA3AALIwIAAAADAAAABwAAAAAAAAAQERIACAcJBgoFCwQMAw0CDgEPAEG03AALaQEAAAACAAAAAwAAAAQAAAAFAAAABgAAAAcAAAAIAAAACgAAAAwAAAAOAAAAEAAAABQAAAAYAAAAHAAAACAAAAAoAAAAMAAAADgAAABAAAAAUAAAAGAAAABwAAAAgAAAAKAAAADAAAAA4ABBtN0AC5oCAQAAAAIAAAADAAAABAAAAAYAAAAIAAAADAAAABAAAAAYAAAAIAAAADAAAABAAAAAYAAAAIAAAADAAAAAAAEAAIABAAAAAgAAAAMAAAAEAAAABgAAAAgAAAAMAAAAEAAAABgAAAAgAAAAMAAAAEAAAABgAABuZWVkIGRpY3Rpb25hcnkAc3RyZWFtIGVuZAAAZmlsZSBlcnJvcgBzdHJlYW0gZXJyb3IAZGF0YSBlcnJvcgBpbnN1ZmZpY2llbnQgbWVtb3J5AGJ1ZmZlciBlcnJvcgBpbmNvbXBhdGlibGUgdmVyc2lvbgAAAAAoLwAAOC8AAEMvAABELwAATy8AAFwvAABnLwAAey8AAIgvAABDLwAAMS4yLjExAEHQ3wALA9AxUA=="),Vf=Uint8Array.BYTES_PER_ELEMENT,Kf={bytesReceived:"br",frameDropped:"fd",frameReceived:"fr",googJitterReceived:"jr",isAudioMute:"am",isFreeze:"fz",mediaType:"mt",packetsLost:"pl",packetsReceived:"pr",peerId:"pid",id:"id",ssrc:"ssrc",timestamp:"ts",type:"tp",frameRateInput:"fi",frameRateSent:"fs",googRtt:"rt",isVideoMute:"vm"},Hf={stats:"sts",state:"st",stream_id:"stid",session_id:"seid",stream_type:"stt",app_id:"aid",channel_key:"ck",channel_name:"cn",sdk_version:"sv",browser:"b",process_id:"pcid",mode:"m",codec:"c",role:"r",has_changed_gateway:"hcg",ap_response:"ar",extends:"es",details:"d",features:"ft",p2p_id:"ppid",sdp:"sdp",audio:"a",video:"v",attributes:"at",hq:"h",lq:"l",stereo:"str",speech:"spe",extend:"e",pingpongElapse:"ppe"},Wf={_message:"m",_type:"t",_id:"id"},zf={join_v2:"j2",publish:"pub",publish_related_stats:"prs",ping:"pi",traffic_stats:"ts",ping_back:"pib",publish_stats:"pubs"};class Yf{constructor(){}async init(){Gf||(Gf=(await(async()=>(Qf||(Qf=await Yt()),{zlibCompress:e=>{var t,n=new Uint8Array(e);const r=Vf*n.byteLength;e=Qf._malloc(r);const i=Qf._malloc(3*r);for(let t=0;t<r;t++)Qf.HEAP8[e/Vf+t]=n[t];return n=Qf._zlibCompress(e,r,i),n=new Uint8Array(qc(t=Qf.HEAP8).call(t,i,i+n)),Qf._free(e),Qf._free(i),n}}))()).zlibCompress),this.zlibCompress=Gf}msgPackCompress(e){return vf.encode(e)}compress(e){let t=tl(),n=this.compressKeyAndValue(JSON.parse(Fr(e))),r=this.msgPackCompress(n);var i=this.zlibCompress(r);return i=new Uint8Array([49,49,49,50,...Ed(i)]),{origin:La({},e),originLength:Fr(e).length,shortKeyAndValue:n,msgpackSer:r,compressed:i,compressedLength:i.length,time:tl()-t}}compressKeyAndValue(e){return this._ObjectKeyCompress(this._typeCompress(e))}_typeCompress(e){let t=e._type;return t?(e._type=zf[t]||t,e):e}_ObjectKeyCompress(e){let t=e._message;if(t){let n=t.stats;n&&(t.stats=this._statsCompress(n)),e._message=this._messageCompress(t)}return this._reportCompress(e)}_statsCompress(e){return this._keyCompress(e,Kf)}_messageCompress(e){return this._keyCompress(e,Hf)}_reportCompress(e){return this._keyCompress(e,Wf)}_keyCompress(e,t){let n={},r=Ba(e);return Qa(r).call(r,((r,i)=>(r=e[i],t[i]?n[t[i]]=r:n[i]=r,n)),n),n}}class Jf extends wd{constructor(e){super(),this.lowPriorityQueue=[],this.highPriorityQueue=[],this.AgoraWebSocketManager=e}get queue(){return[...this.highPriorityQueue,...this.lowPriorityQueue]}reset(){this.lowPriorityQueue=[],this.highPriorityQueue=[]}pushMessage(e,t=!1){t?this.highPriorityQueue.push(e):this.lowPriorityQueue.push(e),this.sendMessage()}sendMessage(){let e=this.queue.length;el((()=>{this._sendMessage()}),5>e?15*e:60+3*(e-4))}_sendMessage(){var e;if(this.queue.length){var t=this.AgoraWebSocketManager.getConnection();if(t&&1===t.readyState){var n=this.queue.shift();return ru(e=this.lowPriorityQueue).call(e,n)?this.lowPriorityQueue.shift():this.highPriorityQueue.shift(),t.send(n.compressed),n}}}}class Xf extends wd{constructor(e,t,n=!1){super(),this.currentURLIndex=this.connectionID=0,this.reconnectMode="tryNext",this._state="closed",this.reconnectCount=0,this.isCompressorInitSuccess=!1,this.wsDeflateLength=this.wsInflateLength=0,this.name=e,this.retryConfig=t,this.useCompress=n}get url(){return this.websocket?this.websocket.url:null}get state(){return this._state}set state(e){e!==this._state&&(this._state=e,"reconnecting"===this._state?this.emit(ih.RECONNECTING,this.reconnectReason):"connected"===this._state?this.emit(ih.CONNECTED):"closed"===this._state?this.emit(ih.CLOSED):"failed"===this._state&&this.emit(ih.FAILED))}getConnection(){return this.websocket||void 0}init(e){let t=(t,n)=>{this.urls=e;const r=this.urls[this.currentURLIndex];this.state="connecting",this.messageSender=new Jf(this),this.createWebSocketConnection(r).then(t).catch(n),this.once(ih.CLOSED,(()=>n(new Rl(Yu.WS_DISCONNECT)))),this.once(ih.CONNECTED,(()=>t()))};return new wc(((e,n)=>{this.compressor=new Yf,this.compressor.init().then((()=>{var r;Tl.debug("websocket compressor initialized successfully"),this.isCompressorInitSuccess=!0,this.compress=Zc(r=this.compressor.compress).call(r,this.compressor),t(e,n)})).catch((()=>{Tl.debug("websocket compressor failed to initialize"),t(e,n)}))}))}close(e,t){if(this.currentURLIndex=0,this.reconnectCount=0,this.websocket){this.websocket.onclose=null,this.websocket.onopen=null,this.websocket.onmessage=null;let e=this.websocket;t?el((()=>e.close()),500):e.close(),this.websocket=void 0}this.state=e?"failed":"closed"}reconnect(e,t){this.websocket?(void 0!==e&&(this.reconnectMode=e),Tl.debug("[".concat(this.name,"] reconnect is triggered initiative")),e=this.websocket.onclose,this.websocket.onclose=null,this.websocket.close(),e&&Zc(e).call(e,this.websocket)({code:9999,reason:t})):Tl.warning("[".concat(this.name,"] can not reconnect, no websocket"))}sendMessage(e,t=!1){if(!this.websocket||this.websocket.readyState!==WebSocket.OPEN)throw new Rl(Yu.WS_ABORT,"websocket is not ready");try{let n=null;if(this.isCompressorInitSuccess&&this.useCompress&&Mu.WEBSOCKET_COMPRESS)n=this.compress(e),this.setWsInflateData(n);else{if(this.isCompressorInitSuccess&&this.useCompress){let t=this.compress(e);this.setWsInflateData(t)}let t=Fr(e);n={compressed:t,compressedLength:t.length,origin:e}}t?this.websocket.send(n.compressed):this.messageSender.pushMessage(n)}catch(e){throw new Rl(Yu.WS_ERR,"send websocket message error"+e.toString())}}setWsInflateData(e){this.wsDeflateLength+=e.originLength,this.wsInflateLength+=e.compressedLength}getWsInflateData(){let e=this.wsInflateLength,t=this.wsDeflateLength;return this.clearWsInflateData(),{wsInflateLength:e,wsDeflateLength:t}}clearWsInflateData(){this.wsDeflateLength=this.wsInflateLength=0}async createWebSocketConnection(e){let t=this.connectionID+=1;return new wc(((n,r)=>{var i,o;this.websocket&&(this.websocket.onclose=null,this.websocket.close()),Mu.GATEWAY_WSS_ADDRESS&&pu(i=this.name).call(i,"gateway")&&(e=Mu.GATEWAY_WSS_ADDRESS),Tl.debug(_i(o="[".concat(this.name,"] start connect, url: ")).call(o,e));try{this.websocket=new WebSocket(e),this.websocket.binaryType="arraybuffer"}catch(e){var a;return i=new Rl(Yu.WS_ERR,"init websocket failed! Error: ".concat(e.toString())),Tl.error(_i(a="[".concat(this.name,"]")).call(a,i)),void r(i)}xt(5e3).then((()=>{t===this.connectionID&&this.websocket&&this.websocket.readyState!==WebSocket.OPEN&&this.websocket&&this.websocket.close()})),this.websocket.onopen=()=>{Tl.debug("[".concat(this.name,"] websocket opened:"),e),this.reconnectMode="retry",this.state="connected",this.reconnectCount=0,n()},this.websocket.onclose=async e=>{var t,i,o,a;if(Tl.debug(_i(t=_i(i=_i(o=_i(a="[".concat(this.name,"] websocket close ")).call(a,this.websocket&&this.websocket.url,", code: ")).call(o,e.code,", reason: ")).call(i,e.reason,", current mode: ")).call(t,this.reconnectMode)),this.reconnectCount<this.retryConfig.maxRetryCount){if("connected"===this.state&&(this.reconnectReason=e.reason,this.state="reconnecting"),t=Ut(this,ih.WILL_RECONNECT,this.reconnectMode)||this.reconnectMode,t=await this.reconnectWithAction(t),"closed"===this.state)return void Tl.debug("[".concat(this.connectionID,"] ws is closed, no need to reconnect"));if(!t)return r(new Rl(Yu.WS_DISCONNECT,"websocket reconnect failed: ".concat(e.code))),void this.close(!0);n()}else r(new Rl(Yu.WS_DISCONNECT,"websocket close: ".concat(e.code))),this.close()},this.websocket.onmessage=e=>{this.emit(ih.ON_MESSAGE,e)}}))}async reconnectWithAction(e,t){var n,r;if(!t&&this.reconnectCount>=this.retryConfig.maxRetryCount||!this.urls||"closed"===this.state)return!1;if(this.onlineReconnectListener||Sd.networkState!==Ih.OFFLINE||(this.onlineReconnectListener=Sd.onlineWaiter&&Sd.onlineWaiter.then((()=>{this.onlineReconnectListener=void 0}))),t=function(e,t){return Math.min(t.maxRetryTimeout,t.timeout*Math.pow(t.timeoutFactor,e))}(this.reconnectCount,this.retryConfig),Tl.debug(_i(n=_i(r="[".concat(this.name,"] wait ")).call(r,t,"ms to reconnect websocket, mode: ")).call(n,e)),await wc.race([xt(t),this.onlineReconnectListener||new wc((()=>{}))]),"closed"===this.state)return!1;this.reconnectCount+=1;try{if("retry"===e)await this.createWebSocketConnection(this.urls[this.currentURLIndex]);else if("tryNext"===e){var i,o;if(this.currentURLIndex+=1,this.currentURLIndex>=this.urls.length)return await this.reconnectWithAction("recover");Tl.debug(_i(i=_i(o="[".concat(this.name,"] websocket url length: ")).call(o,this.urls.length," current index: ")).call(i,this.currentURLIndex)),await this.createWebSocketConnection(this.urls[this.currentURLIndex])}else"recover"===e&&(Tl.debug("[".concat(this.name,"] request new urls")),this.urls=await Mt(this,ih.REQUEST_NEW_URLS),this.currentURLIndex=0,await this.createWebSocketConnection(this.urls[this.currentURLIndex]));return!0}catch(t){return Tl.error("[".concat(this.name,"] reconnect failed"),t.toString()),await this.reconnectWithAction(e)}}}class Zf{constructor(e){this.input=[],this.size=e}add(e){var t;this.input.push(e),this.input.length>this.size&&Nc(t=this.input).call(t,0,1)}mean(){var e;return 0===this.input.length?0:Qa(e=this.input).call(e,((e,t)=>e+t))/this.input.length}}class $f extends wd{constructor(e){super(),this._connectionState=Hl.CLOSED,this.openConnectionTime=tl(),this.lastMsgTime=tl(),this.uploadCache=[],this.rttRolling=new Zf(5),this.pingpongTimeoutCount=0,this.onWebsocketMessage=e=>{if(e.data instanceof ArrayBuffer)this.emit(Wl.ON_BINARY_DATA,e.data);else if(e=JSON.parse(e.data),this.lastMsgTime=tl(),Object.prototype.hasOwnProperty.call(e,"_id")){let t="res-@".concat(e._id);this.emit(t,e._result,e._message)}else if(Object.prototype.hasOwnProperty.call(e,"_type")&&(this.emit(e._type,e._message),e._type===Jl.ON_NOTIFICATION&&this.handleNotification(e._message),e._type===Jl.ON_USER_BANNED))switch(e._message.error_code){case 14:this.close("UID_BANNED");break;case 15:this.close("IP_BANNED");break;case 16:this.close("CHANNEL_BANNED")}},this.clientId=e.clientId,this.spec=e,this.websocket=new Xf("gateway-".concat(this.clientId),this.spec.retryConfig,!0),this.handleWebsocketEvents(),window.addEventListener("offline",(()=>{this.connectionState===Hl.CONNECTED&&this.reconnect("retry",Kl.OFFLINE)}))}get connectionState(){return this._connectionState}set connectionState(e){e!==this._connectionState&&(this._connectionState=e,e===Hl.CONNECTED?this.emit(Wl.WS_CONNECTED):e===Hl.RECONNECTING?this.emit(Wl.WS_RECONNECTING,this._websocketReconnectReason):e===Hl.CLOSED&&this.emit(Wl.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket?this.websocket.url:null}get rtt(){return this.rttRolling.mean()}async request(e,t,n,r){var i,o,a,s,c;let u=Lt(6,"");var l={_id:u,_type:e,_message:t};let h=this.websocket.connectionID;var d=()=>new wc(((e,t)=>{if(this.connectionState===Hl.CONNECTED)return e();const n=()=>{this.off(Wl.WS_CLOSED,r),e()},r=()=>{this.off(Wl.WS_CONNECTED,n),t(new Rl(Yu.WS_ABORT))};this.once(Wl.WS_CONNECTED,n),this.once(Wl.WS_CLOSED,r)}));if(this.connectionState!==Hl.CONNECTING&&this.connectionState!==Hl.RECONNECTING||e===zl.JOIN||e===zl.REJOIN||await d(),this.websocket.sendMessage(l,!0),!r){l=new wc(((n,r)=>{let i=!1;const o=(r,o)=>{i=!0,n({isSuccess:"success"===r,message:o||{}}),this.off(Wl.WS_CLOSED,a),this.off(Wl.WS_RECONNECTING,a),this.emit(Wl.REQUEST_SUCCESS,e,t)};this.once("res-@".concat(u),o);const a=()=>{r(new Rl(Yu.WS_ABORT,"type: ".concat(e))),this.off(Wl.WS_CLOSED,a),this.off(Wl.WS_RECONNECTING,a),this.off("res-@".concat(u),o)};this.once(Wl.WS_CLOSED,a),this.once(Wl.WS_RECONNECTING,a),xt(Mu.SIGNAL_REQUEST_TIMEOUT).then((()=>{this.websocket.connectionID!==h||i||(Tl.warning("ws request timeout, type: ".concat(e)),this.emit(Wl.REQUEST_TIMEOUT,e,t))}))})),r=null;try{r=await l}catch(r){if(this.connectionState===Hl.CLOSED||e===zl.LEAVE)throw new Rl(Yu.WS_ABORT);return!this.spec.forceWaitGatewayResponse||n?r.throw():e===zl.JOIN||e===zl.REJOIN?null:(await d(),await this.request(e,t))}return r.isSuccess?r.message:(d=zt(n=Number(r.message.error_code||r.message.code)),l=new Rl(Yu.UNEXPECTED_RESPONSE,_i(i="".concat(d.desc,": ")).call(i,r.message.error_str),{code:n,data:r.message}),"success"===d.action?r.message:(Tl.warning(_i(o=_i(a=_i(s=_i(c="[".concat(this.websocket.connectionID,"] unexpected response from type ")).call(c,e,", error_code: ")).call(s,n,", message: ")).call(a,d.desc,", action: ")).call(o,d.action)),"failed"===d.action?l.throw():"quit"===d.action?(this.initError=l,this.close(),l.throw()):(n===ql.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=r.message.option,Tl.warning("[".concat(this.clientId,"] detect multi ip, recover")),this.reconnect("recover",Kl.MULTI_IP)):this.reconnect(d.action,Kl.SERVER_ERROR),e===zl.JOIN||e===zl.REJOIN?null:await this.request(e,t))))}}waitMessage(e,t){return new wc((n=>{let r=i=>{t&&!t(i)||(this.off(e,r),n(i))};this.on(e,r)}))}upload(e,t){e={_type:e,_message:t};try{this.websocket.sendMessage(e)}catch(r){var n;t=Mu.MAX_UPLOAD_CACHE||50,this.uploadCache.push(e),this.uploadCache.length>t&&Nc(n=this.uploadCache).call(n,0,1),0<this.uploadCache.length&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval((()=>{var e;if(this.connectionState===Hl.CONNECTED){var t=Nc(e=this.uploadCache).call(e,0,1)[0];0===this.uploadCache.length&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(t._type,t._message)}}),Mu.UPLOAD_CACHE_INTERVAL||2e3))}}send(e,t){this.websocket.sendMessage({_type:e,_message:t})}init(e){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,new wc(((t,n)=>{this.once(Wl.WS_CONNECTED,(()=>t(this.joinResponse))),this.once(Wl.WS_CLOSED,(()=>n(this.initError||new Rl(Yu.WS_ABORT)))),this.connectionState=Hl.CONNECTING,this.websocket.init(e).catch(n),this.wsInflateDataTimer&&window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=window.setInterval((()=>{this.handleWsInflateData()}),2e4)}))}close(e){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.wsInflateDataTimer&&(this.handleWsInflateData(),window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=void 0),this.joinResponse=this.reconnectToken=void 0,this._disconnectedReason=e||"LEAVE",this.connectionState=Hl.CLOSED,this.websocket.close()}async join(){var e;if(!this.joinResponse){var t=Ft(this,Wl.REQUEST_JOIN_INFO);if(!(t=await this.request(zl.JOIN,t)))return this.emit(Wl.REPORT_JOIN_GATEWAY,Yu.TIMEOUT,this.url||""),!1;this.joinResponse=t,this.reconnectToken=this.joinResponse.rejoin_token}return this.connectionState=Hl.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(Zc(e=this.handlePingPong).call(e,this),3e3),!0}async rejoin(){var e,t;if(!this.reconnectToken)throw new Rl(Yu.UNEXPECTED_ERROR,"can not rejoin, no rejoin token");var n=Ft(this,Wl.REQUEST_REJOIN_INFO);return n.token=this.reconnectToken,!!(n=await this.request(zl.REJOIN,n))&&(this.connectionState=Hl.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(Zc(e=this.handlePingPong).call(e,this),3e3),n.peers&&Oa(t=n.peers).call(t,(e=>{this.emit(Jl.ON_USER_ONLINE,{uid:e.uid}),e.audio_mute?this.emit(Jl.MUTE_AUDIO,{uid:e.uid}):this.emit(Jl.UNMUTE_AUDIO,{uid:e.uid}),e.video_mute?this.emit(Jl.MUTE_VIDEO,{uid:e.uid}):this.emit(Jl.UNMUTE_VIDEO,{uid:e.uid}),e.audio_enable_local?this.emit(Jl.ENABLE_LOCAL_AUDIO,{uid:e.uid}):this.emit(Jl.DISABLE_LOCAL_AUDIO,{uid:e.uid}),e.video_enable_local?this.emit(Jl.ENABLE_LOCAL_VIDEO,{uid:e.uid}):this.emit(Jl.DISABLE_LOCAL_VIDEO,{uid:e.uid}),e.audio||e.video||this.emit(Jl.ON_REMOVE_STREAM,{uid:e.uid,uint_id:e.uint_id}),e.audio&&this.emit(Jl.ON_ADD_AUDIO_STREAM,{uid:e.uid,uint_id:e.uint_id,audio:!0}),e.video&&this.emit(Jl.ON_ADD_VIDEO_STREAM,{uid:e.uid,uint_id:e.uint_id,video:!0})})),!0)}reconnect(e,t){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(e,t)}handleNotification(e){if(Tl.debug("[".concat(this.clientId,"] receive notification: "),e),"success"!==(e=zt(e.code)).action){if("failed"!==e.action)return"quit"===e.action?("ERR_REPEAT_JOIN_CHANNEL"===e.desc&&this.close("UID_BANNED"),void this.close()):void this.reconnect(e.action,Kl.SERVER_ERROR);Tl.error("[".concat(this.clientId,"] ignore error: "),e.desc)}}handlePingPong(){if(this.websocket&&"connected"===this.websocket.state){0<this.pingpongTimeoutCount&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;var e=Mu.PING_PONG_TIME_OUT,t=tl();this.pingpongTimeoutCount>=e&&(Tl.warning("PINGPONG Timeout. Last Socket Message: ".concat(t-this.lastMsgTime,"ms")),t-this.lastMsgTime>Mu.WEBSOCKET_TIMEOUT_MIN)?this.reconnect("retry",Kl.TIMEOUT):this.request(zl.PING,void 0,!0).then((()=>{this.pingpongTimeoutCount=0;let e=tl()-t;this.rttRolling.add(e),Mu.REPORT_STATS&&this.send(zl.PING_BACK,{pingpongElapse:e})})).catch((e=>{}))}}handleWsInflateData(){let{wsInflateLength:e,wsDeflateLength:t}=this.websocket.getWsInflateData();0!==e&&0!==t&&this.upload(Yl.WS_INFLATE_DATA_LENGTH,{ws_deflate_length:t,ws_inflate_length:e})}handleWebsocketEvents(){this.websocket.on(ih.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(ih.CLOSED,(()=>{this.connectionState=Hl.CLOSED})),this.websocket.on(ih.FAILED,(()=>{this._disconnectedReason="NETWORK_ERROR",this.connectionState=Hl.CLOSED})),this.websocket.on(ih.RECONNECTING,(e=>{this._websocketReconnectReason=e,this.joinResponse=void 0,this.connectionState===Hl.CONNECTED?this.connectionState=Hl.RECONNECTING:this.connectionState=Hl.CONNECTING})),this.websocket.on(ih.WILL_RECONNECT,((e,t)=>{if(Ft(this,Wl.IS_P2P_DISCONNECTED)&&"retry"===e)return this.reconnectToken=void 0,this.emit(Wl.NEED_RENEW_SESSION),this.emit(Wl.DISCONNECT_P2P),t("tryNext");"retry"!==e&&(this.reconnectToken=void 0,this.emit(Wl.NEED_RENEW_SESSION),this.emit(Wl.DISCONNECT_P2P)),t(e)})),this.websocket.on(ih.CONNECTED,(()=>{this.openConnectionTime=tl(),this.reconnectToken?this.rejoin().catch((e=>{var t;Tl.warning(_i(t="[".concat(this.clientId,"] rejoin failed ")).call(t,e)),this.reconnect("tryNext",Kl.SERVER_ERROR)})):this.join().catch((e=>{if(this.emit(Wl.REPORT_JOIN_GATEWAY,e.message||e.code,this.url||""),e instanceof Rl&&e.code===Yu.UNEXPECTED_RESPONSE&&e.data.code===ql.ERR_NO_AUTHORIZED)return Tl.warning("[".concat(this.clientId,"] reconnect no authorized, recover")),void this.reconnect("recover",Kl.SERVER_ERROR);Tl.error("[".concat(this.clientId,"] join gateway request failed"),e.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",Kl.SERVER_ERROR):(this.initError=e,this.close())}))})),this.websocket.on(ih.REQUEST_NEW_URLS,((e,t)=>{Mt(this,Wl.REQUEST_RECOVER,this.multiIpOption).then(e).catch(t)}))}}let ep=new pa;class tp extends wd{constructor(e){super(),this.inChannelInfo={joinAt:null,duration:0},this._state="DISCONNECTED",this.needToSendUnpubUnsub=new pa,this.hasChangeBGPAddress=this.isSignalRecover=!1,this.joinGatewayStartTime=0,this._signalTimeout=!1,this.clientId=e.clientId,this.spec=e,this.signal=new $f(Xt({},e,{retryConfig:e.websocketRetryConfig})),this._statsCollector=e.statsCollector,this.role=e.role||"audience",this._clientRoleOptions=e.clientRoleOptions,this.handleSignalEvents()}get state(){return this._state}set state(e){if(e!==this._state){var t=this._state;this._state=e,"DISCONNECTED"===e&&this._disconnectedReason?this.emit(gh.CONNECTION_STATE_CHANGE,e,t,this._disconnectedReason):this.emit(gh.CONNECTION_STATE_CHANGE,e,t)}}async join(e,t){var n,r;"disabled"!==e.cloudProxyServer&&(this.hasChangeBGPAddress=!0);let i=tl();var o=ep.get(e.cname);if(o||(o=new pa,ep.set(e.cname,o)),o.has(e.uid))throw o=new Rl(Yu.UID_CONFLICT),Rd.joinGateway(e.sid,{lts:i,succ:!1,ec:o.message,addr:null,uid:e.uid,cid:e.cid}),o;o.set(e.uid,!0),this.joinInfo=e,this.key=t,t=e.proxyServer?Sc(n=e.gatewayAddrs).call(n,(t=>{var n,r;return t=t.split(":"),_i(n=_i(r="wss://".concat(e.proxyServer,"/ws/?h=")).call(r,t[0],"&p=")).call(n,t[1])})):Sc(r=e.gatewayAddrs).call(r,(e=>"wss://".concat(e))),n=0,this.joinGatewayStartTime=i;try{n=(await this.signal.init(t)).uid}catch(t){throw Tl.error("[".concat(this.clientId,"] User join failed"),t.toString()),Rd.joinGateway(e.sid,{lts:i,succ:!1,ec:t.message,addr:this.signal.url,uid:e.uid,cid:e.cid}),o.delete(e.uid),this.signal.close(),t}return this.state="CONNECTED",this.inChannelInfo.joinAt=tl(),Tl.debug("[".concat(this.clientId,"] Connected to gateway server")),this.trafficStatsInterval=window.setInterval((()=>{this.updateTrafficStats().catch((e=>{Tl.warning("[".concat(this.clientId,"] get traffic stats error"),e.toString())}))}),3e3),this.networkQualityInterval=window.setInterval((()=>{navigator&&void 0!==navigator.onLine&&!navigator.onLine?this.emit(gh.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6}):this._signalTimeout?this.emit(gh.NETWORK_QUALITY,{downlinkNetworkQuality:5,uplinkNetworkQuality:5}):"CONNECTED"===this.state&&this._statsCollector.trafficStats?this.emit(gh.NETWORK_QUALITY,{uplinkNetworkQuality:Ct(this._statsCollector.trafficStats.B_unq),downlinkNetworkQuality:Ct(this._statsCollector.trafficStats.B_dnq)}):this.emit(gh.NETWORK_QUALITY,{uplinkNetworkQuality:0,downlinkNetworkQuality:0})}),2e3),n}async leave(e=!1){if("DISCONNECTED"!==this.state){this.state="DISCONNECTING";try{if(!e&&this.signal.connectionState===Hl.CONNECTED){var t=this.signal.request(zl.LEAVE,void 0,!0);await wc.race([t,Dt(3e3)])}}catch(e){Tl.warning("[".concat(this.clientId,"] leave request failed, ignore"),e)}this.signal.close(),this.reset(),this.state="DISCONNECTED"}}async publish(e,t){if(!this.joinInfo)throw new Rl(Yu.UNEXPECTED_ERROR,"publish no joinInfo");let n=e.getUserId(),r=e.videoTrack?function(e){var t;if(!(e=e._encoderConfig))return{};const n={resolution:e.width&&e.height?_i(t="".concat(wt(e.width),"x")).call(t,wt(e.height)):void 0,maxVideoBW:e.bitrateMax,minVideoBW:e.bitrateMin};return"number"==typeof e.frameRate?(n.maxFrameRate=e.frameRate,n.minFrameRate=e.frameRate):e.frameRate&&(n.maxFrameRate=e.frameRate.max||e.frameRate.ideal||e.frameRate.exact||e.frameRate.min,n.minFrameRate=e.frameRate.min||e.frameRate.ideal||e.frameRate.exact||e.frameRate.max),n}(e.videoTrack):{};if(e.on(Xl.NEED_ANSWER,((i,o,a)=>{var s;let c={state:"offer",stream_type:t,p2p_id:e.pc.ID,sdp:Fr(i),audio:!!e.audioTrack,video:!!e.videoTrack,screen:e.videoTrack&&-1!==Mc(s=e.videoTrack._hints).call(s,vh.SCREEN_TRACK),attributes:r,dtx:e.audioTrack instanceof nf&&e.audioTrack._config.DTX,hq:!1,lq:!1,stereo:!1,speech:!1,mode:this.spec.mode,codec:this.spec.codec,extend:Mu.PUB_EXTEND};e.audioTrack&&e.audioTrack instanceof of&&(e.audioTrack&&(s={stream_id:this.joinInfo&&(this.joinInfo.stringUid||this.joinInfo.uid),action:""},e.audioTrack.isActive?s.action="unmute_local_audio":s.action="mute_local_audio",this.sendControl(s)),e.videoTrack&&(s={stream_id:this.joinInfo&&(this.joinInfo.stringUid||this.joinInfo.uid),action:""},e.videoTrack.muted?s.action="mute_local_video":s.action="unmute_local_video",this.sendControl(s))),this.signal.request(zl.PUBLISH,c,!0).then((e=>{n&&this.needToSendUnpubUnsub.set(n,!0),o(JSON.parse(e.sdp))})).catch((t=>{if(i.retry&&t.data&&t.data.code===ql.ERR_PUBLISH_REQUEST_INVALID)return Tl.warning("[".concat(this.clientId,"] receiver publish error code, retry"),t.toString()),Mt(e,Xl.NEED_UNPUB).then((()=>{i.retry=!1,Mt(e,Xl.NEED_ANSWER,i).then(o).catch(a)}));t.code!==Yu.WS_ABORT&&a(t)}))})),e.on(Xl.NEED_RENEGOTIATE,((n,r,i)=>{this.signal.request(zl.PUBLISH,{state:"negotiation",stream_type:t,p2p_id:e.pc.ID,sdp:n},!0).then((e=>{r(JSON.parse(e.sdp))})).catch((e=>{e.code!==Yu.WS_ABORT&&i(e)}))})),e.on(Xl.NEED_UNPUB,(r=>n&&!this.needToSendUnpubUnsub.has(n)?r(!1):"RECONNECTING"===this.state?r(!0):void this.signal.request(zl.UNPUBLISH,{stream_id:e.getUserId(),stream_type:t},!0).then((()=>r(!1))).catch((e=>{Tl.warning("unpublish warning: ",e),r(!0)})))),e.on(Xl.NEED_UPLOAD,((e,n)=>{this.signal.upload(e,{stream_type:t,stats:n})})),e.on(Xl.NEED_SIGNAL_RTT,(e=>{e(this.signal.rtt)})),e.on(Xl.NEED_CONTROL,((e,t,n)=>{if("video"===e.type&&e.muted)e="mute_local_video";else if("video"!==e.type||e.muted)if("audio"===e.type&&e.muted)e="mute_local_audio";else{if("audio"!==e.type||e.muted)return;e="unmute_local_audio"}else e="unmute_local_video";this.sendControl({stream_id:this.joinInfo&&(this.joinInfo.stringUid||this.joinInfo.uid),action:e}).then(t).catch(n)})),"RECONNECTING"!==this.state){if("CONNECTED"!==this.state)return new Rl(Yu.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state)).throw();await e.startP2PConnection()}else e.readyToReconnectPC()}async subscribe(e){if(!this.joinInfo)throw new Rl(Yu.UNEXPECTED_ERROR,"subscribe no joinInfo");let t=e.getUserId();if(e.on(Xl.NEED_ANSWER,((n,r,i)=>{var o=e.subscribeOptions;o={stream_id:e.getUserId(),audio:!!o.audio,video:!!o.video,mode:this.spec.mode,codec:this.spec.codec,p2p_id:e.pc.ID,sdp:Fr(n),tcc:!!Mu.SUBSCRIBE_TCC,extend:Mu.SUB_EXTEND},this.signal.request(zl.SUBSCRIBE,o,!0).then((e=>{this.needToSendUnpubUnsub.set(t,!0),r(JSON.parse(e.sdp))})).catch((t=>{if(n.retry&&t.data&&t.data.code===ql.ERR_SUBSCRIBE_REQUEST_INVALID)return Tl.warning("[".concat(this.clientId,"] receiver subscribe error code, retry"),t.toString()),Mt(e,Xl.NEED_UNSUB).then((()=>{n.retry=!1,Mt(e,Xl.NEED_ANSWER,n).then(r).catch(i)}));t.code!==Yu.WS_ABORT&&i(t)}))})),e.on(Xl.NEED_UNSUB,(n=>this.needToSendUnpubUnsub.has(t)?"RECONNECTING"===this.state?n(!0):void this.signal.request(zl.UNSUBSCRIBE,{stream_id:e.getUserId()},!0).then((()=>n(!1))).catch((e=>{Tl.warning("unsubscribe warning",e),n(!0)})):n(!1))),e.on(Xl.NEED_UPLOAD,((t,n)=>{this.signal.upload(t,{stream_id:e.getUserId(),stats:n})})),e.on(Xl.NEED_SIGNAL_RTT,(e=>{e(this.signal.rtt)})),"RECONNECTING"!==this.state){if("CONNECTED"!==this.state)return new Rl(Yu.INVALID_OPERATION,"can not subscribe when connection state is ".concat(this.state)).throw();await e.startP2PConnection()}else e.readyToReconnectPC()}async subscribeChange(e,t){var n,r;if(!this.joinInfo)throw new Rl(Yu.UNEXPECTED_ERROR,"subscribe no joinInfo");if(await e.setSubscribeOptions(t),"RECONNECTING"!==this.state){if("CONNECTED"!==this.state)return new Rl(Yu.INVALID_OPERATION,"can not subscribe change when connection state is ".concat(this.state)).throw();Tl.debug(_i(n=_i(r="[".concat(this.clientId,"] send subscribe change, audio: ")).call(r,t.audio,", video: ")).call(n,t.video)),await this.signal.request(zl.SUBSCRIBE_CHANGE,{stream_id:e.getUserId(),audio:!!t.audio,video:!!t.video},!0)}}async sendControl(e){this.signal.request(zl.CONTROL,e,!0,!0)}async unsubscribe(e){await e.closeP2PConnection()}getGatewayInfo(){return this.signal.request(zl.GATEWAY_INFO)}renewToken(e){return this.signal.request(zl.RENEW_TOKEN,{token:e})}async setClientRole(e,t){t&&(this._clientRoleOptions=La({},t)),"CONNECTED"===this.state?(await this.signal.request(zl.SET_CLIENT_ROLE,{role:e,level:"audience"===e?this._clientRoleOptions&&this._clientRoleOptions.level?this._clientRoleOptions.level:2:0}),this.role=e):this.role=e}async setRemoteVideoStreamType(e,t){await this.signal.request(zl.SWITCH_VIDEO_STREAM,{stream_id:e,stream_type:t})}async setStreamFallbackOption(e,t){await this.signal.request(zl.SET_FALLBACK_OPTION,{stream_id:e,fallback_type:t})}async pickSVCLayer(e,t){await this.signal.request(zl.PICK_SVC_LAYER,{stream_id:e,spatial_layer:t.spatialLayer,temporal_layer:t.temporalLayer})}getInChannelInfo(){return this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=tl()-this.inChannelInfo.joinAt),Xt({},this.inChannelInfo)}async getGatewayVersion(){return(await this.signal.request(zl.GATEWAY_INFO)).version}reset(){if(this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=tl()-this.inChannelInfo.joinAt,this.inChannelInfo.joinAt=null),this.trafficStatsInterval&&(window.clearInterval(this.trafficStatsInterval),this.trafficStatsInterval=void 0),this.joinInfo){let e=ep.get(this.joinInfo.cname);e&&e.delete(this.joinInfo.uid)}this.needToSendUnpubUnsub=new pa,this.key=this.joinInfo=void 0,this.networkQualityInterval&&(window.clearInterval(this.networkQualityInterval),this.networkQualityInterval=void 0)}updateTurnConfigFromSignal(){if(this.joinInfo){var e=(e=(("disabled"===this.joinInfo.cloudProxyServer?this.signal.url:this.joinInfo.gatewayAddrs[this.signal.currentURLIndex])||"").match(/(wss:\/\/)?([^:]+):(\d+)/))?{username:xu.username,password:xu.password,turnServerURL:e[2],tcpport:Xa(e[3])+30,udpport:Xa(e[3])+30,forceturn:!1}:null;this.joinInfo.turnServer.serversFromGateway=[],e&&"off"!==this.joinInfo.turnServer.mode&&"disabled"===this.joinInfo.cloudProxyServer&&this.joinInfo.turnServer.serversFromGateway.push(Xt({},xu,{turnServerURL:e.turnServerURL,tcpport:e.tcpport,udpport:e.udpport,username:this.joinInfo.uid.toString(),password:this.joinInfo.token}))}}async updateTrafficStats(){var e;if("CONNECTED"===this.state){var t=await this.signal.request(zl.TRAFFIC_STATS,void 0,!0);t.timestamp=tl(),Oa(e=t.peer_delay).call(e,(e=>{var t;let n=this._statsCollector.trafficStats&&Wc(t=this._statsCollector.trafficStats.peer_delay).call(t,(t=>t.peer_uid===e.peer_uid));n&&n.B_st!==e.B_st&&qt((()=>{this.emit(gh.STREAM_TYPE_CHANGE,e.peer_uid,e.B_st)}))})),this._statsCollector.updateTrafficStats(t)}}getJoinMessage(){if(!this.joinInfo||!this.key)throw new Rl(Yu.UNEXPECTED_ERROR,"can not generate join message, no join info");let e=La({},this.joinInfo.apResponse);var t=Mu.REPORT_APP_SCENARIO;if("string"!=typeof t)try{t=Fr(t)}catch(e){t=void 0}return t&&128<t.length&&(t=void 0),t={session_id:this.joinInfo.sid,app_id:this.joinInfo.appId,channel_key:this.key,channel_name:this.joinInfo.cname,sdk_version:ku,browser:navigator.userAgent,process_id:Mu.PROCESS_ID,mode:this.spec.mode,codec:this.spec.codec,role:this.role,has_changed_gateway:this.hasChangeBGPAddress,ap_response:e,extend:Mu.JOIN_EXTEND,details:{6:this.joinInfo.stringUid,cservice_map:"proxy3"===this.joinInfo.cloudProxyServer?"1":void 0},features:{rejoin:!0},optionalInfo:this.joinInfo.optionalInfo,appScenario:t},this.joinInfo.stringUid&&(t.string_uid=this.joinInfo.stringUid),this.joinInfo.aesmode&&this.joinInfo.aespassword&&(t.aes_mode=this.joinInfo.aesmode,Mu.ENCRYPT_AES?(t.aes_secret=this.joinInfo.aespassword,t.aes_encrypt=!0):t.aes_secret=this.joinInfo.aespassword,this.joinInfo.aessalt&&(t.aes_salt=this.joinInfo.aessalt)),e.addresses[this.signal.websocket.currentURLIndex]&&(t.ap_response.ticket=e.addresses[this.signal.websocket.currentURLIndex].ticket,delete e.addresses),t}getRejoinMessage(){if(!this.joinInfo)throw new Rl(Yu.UNEXPECTED_ERROR,"can not generate rejoin message, no join info");return{session_id:this.joinInfo.sid,channel_name:this.joinInfo.cname,cid:this.joinInfo.cid,uid:this.joinInfo.uid,vid:Number(this.joinInfo.vid)}}handleSignalEvents(){this.signal.on(Wl.WS_RECONNECTING,(e=>{this.joinInfo&&Rd.WebSocketQuit(this.joinInfo.sid,{lts:tl(),succ:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:e||Kl.NETWORK_ERROR}),this.joinInfo&&(this.state="RECONNECTING",Rd.sessionInit(this.joinInfo.sid,{lts:(new Date).getTime(),extend:this.isSignalRecover?{recover:!0}:{rejoin:!0},cname:this.joinInfo.cname,appid:this.joinInfo.appId,mode:this.spec.mode}),this.isSignalRecover=!1,this.joinGatewayStartTime=tl())})),this.signal.on(Wl.WS_CLOSED,(e=>{let t;switch(e){case"LEAVE":t=Kl.LEAVE;break;case"UID_BANNED":case"IP_BANNED":case"CHANNEL_BANNED":case"SERVER_ERROR":t=Kl.SERVER_ERROR;break;default:t=Kl.NETWORK_ERROR}Tl.debug("[signal] websocket closed, reason: ".concat(t||"undefined -> "+Kl.NETWORK_ERROR)),this.joinInfo&&Rd.WebSocketQuit(this.joinInfo.sid,{lts:tl(),succ:"LEAVE"===e?1:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:t}),this.reset(),this._disconnectedReason=e,this.state="DISCONNECTED"})),this.signal.on(Wl.WS_CONNECTED,(()=>{var e,t,n;if(this.updateTurnConfigFromSignal(),this.state="CONNECTED",this.joinInfo&&("audience"===this.role&&this._clientRoleOptions&&this._clientRoleOptions.level&&(Tl.debug(_i(e=_i(t=_i(n="[".concat(this.clientId,"] patch to send set client role, role: ")).call(n,this.role,", mode: ")).call(t,this.spec.mode,", level: ")).call(e,this._clientRoleOptions&&this._clientRoleOptions.level)),this.setClientRole(this.role,this._clientRoleOptions)),Rd.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!0,ec:null,vid:this.joinInfo.vid,addr:this.signal.url,uid:this.joinInfo.uid,cid:this.joinInfo.cid}),this.joinInfo.useLocalAccessPoint)){var r;if(!(e=this.signal.url&&this.signal.url.match(/wss:\/\/([^:]+):(\d+)/)))return void Tl.error(_i(r="[".concat(this.clientId,"] set local access point after joined failed: ")).call(r,e));pe("EVENT_REPORT_DOMAIN",e[1]),pe("EVENT_REPORT_BACKUP_DOMAIN",e[1]),pe("LOG_UPLOAD_SERVER","".concat(e[1],":6444"))}})),this.signal.on(Jl.ON_UPLINK_STATS,(e=>{this._statsCollector.updateUplinkStats(e)})),this.signal.on(Wl.REQUEST_RECOVER,((e,t,n)=>{if(!this.joinInfo)return n(new Rl(Yu.UNEXPECTED_ERROR,"gateway: can not recover, no join info"));e&&(this.joinInfo.multiIP=e,this.hasChangeBGPAddress=!0),this.isSignalRecover=!0,Mt(this,gh.REQUEST_NEW_GATEWAY_LIST).then(t).catch(n)})),this.signal.on(Wl.REQUEST_JOIN_INFO,(e=>{e(this.getJoinMessage())})),this.signal.on(Wl.REQUEST_REJOIN_INFO,(e=>{e(this.getRejoinMessage())})),this.signal.on(Wl.REPORT_JOIN_GATEWAY,((e,t)=>{this.joinInfo&&Rd.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!1,ec:e,addr:t,uid:this.joinInfo.uid,cid:this.joinInfo.cid})})),this.signal.on(Wl.IS_P2P_DISCONNECTED,(e=>{e(Ft(this,gh.IS_P2P_DISCONNECTED))})),this.signal.on(Wl.DISCONNECT_P2P,(()=>{this.needToSendUnpubUnsub=new pa,this.emit(gh.DISCONNECT_P2P)})),this.signal.on(Wl.NEED_RENEW_SESSION,(()=>{this.emit(gh.NEED_RENEW_SESSION)})),this.signal.on(Wl.REQUEST_SUCCESS,(()=>{this._signalTimeout=!1})),this.signal.on(Wl.REQUEST_TIMEOUT,(()=>{this._signalTimeout=!0}))}}var np=oi("iterator"),rp=!Wn((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach((function(e,r){t.delete("b"),n+=r+e})),!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[np]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://").host||"#%D0%B1"!==new URL("http://a#").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host})),ip=/[^\0-\u007E]/,op=/[.\u3002\uFF0E\uFF61]/g,ap=Math.floor,sp=String.fromCharCode,cp=function(e){return e+22+75*(26>e)},up=function(e){for(var t,n=[],r=[],i=0,o=e.length;i<o;){var a=e.charCodeAt(i++);if(55296<=a&&56319>=a&&i<o){var s=e.charCodeAt(i++);56320==(64512&s)?r.push(((1023&a)<<10)+(1023&s)+65536):(r.push(a),i--)}else r.push(a)}i=(e=r).length,o=128;var c=0,u=72;for(r=0;r<e.length;r++)128>(t=e[r])&&n.push(sp(t));for((s=a=n.length)&&n.push("-");s<i;){var l=2147483647;for(r=0;r<e.length;r++)(t=e[r])>=o&&t<l&&(l=t);var h=s+1;if(l-o>ap((2147483647-c)/h))throw RangeError("Overflow: input needs wider integers to process");for(c+=(l-o)*h,o=l,r=0;r<e.length;r++){if((t=e[r])<o&&2147483647<++c)throw RangeError("Overflow: input needs wider integers to process");if(t==o){var d=c;for(l=36;;l+=36){var f=l<=u?1:l>=u+26?26:l-u;if(d<f)break;d-=f;var p=36-f;n.push(sp(cp(f+d%p))),d=ap(d/p)}for(n.push(sp(cp(d))),u=h,l=0,c=s==a?ap(c/700):c>>1,c+=ap(c/u);455<c;l+=36)c=ap(c/35);u=ap(l+36*c/(c+38)),c=0,++s}}++c,++o}return n.join("")},lp=function(e){var t=Pi(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return wr(t.call(e))},hp=Nr("fetch"),dp=Nr("Headers"),fp=oi("iterator"),pp=fo.set,gp=fo.getterFor("URLSearchParams"),Ap=fo.getterFor("URLSearchParamsIterator"),vp=/\+/g,mp=Array(4),yp=function(e){return mp[e-1]||(mp[e-1]=RegExp("((?:%[\\da-f]{2}){"+e+"})","gi"))},bp=function(e){try{return decodeURIComponent(e)}catch(t){return e}},_p=function(e){e=e.replace(vp," ");var t=4;try{return decodeURIComponent(e)}catch(n){for(;t;)e=e.replace(yp(t--),bp);return e}},Ep=/[!'()~]|%20/g,wp={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},Ip=function(e){return wp[e]},Cp=function(e,t){if(t){var n,r;t=t.split("&");for(var i=0;i<t.length;)(n=t[i++]).length&&(r=n.split("="),e.push({key:_p(r.shift()),value:_p(r.join("="))}))}},Sp=function(e){this.entries.length=0,Cp(this.entries,e)},Tp=function(e,t){if(e<t)throw TypeError("Not enough arguments")},Rp=Ho((function(e,t){pp(this,{type:"URLSearchParamsIterator",iterator:lp(gp(e).entries),kind:t})}),"Iterator",(function(){var e=Ap(this),t=e.kind,n=(e=e.iterator.next()).value;return e.done||(e.value="keys"===t?n.key:"values"===t?n.value:[n.key,n.value]),e})),kp=function(){var e,t,n,r,i;ji(this,kp,"URLSearchParams");var o=0<arguments.length?arguments[0]:void 0,a=[];if(pp(this,{type:"URLSearchParams",entries:a,updateURL:function(){},updateSearchParams:Sp}),void 0!==o)if(or(o))if("function"==typeof(e=Pi(o)))for(t=(e=e.call(o)).next;!(o=t.call(e)).done;){if((o=(r=(n=lp(wr(o.value))).next).call(n)).done||(i=r.call(n)).done||!r.call(n).done)throw TypeError("Expected sequence with length 2");a.push({key:o.value+"",value:i.value+""})}else for(t in o)cr(o,t)&&a.push({key:t,value:o[t]+""});else Cp(a,"string"==typeof o?"?"===o.charAt(0)?o.slice(1):o:o+"")},Op=kp.prototype;Mo(Op,{append:function(e,t){Tp(arguments.length,2);var n=gp(this);n.entries.push({key:e+"",value:t+""}),n.updateURL()},delete:function(e){Tp(arguments.length,1);for(var t=gp(this),n=t.entries,r=e+"",i=0;i<n.length;)n[i].key===r?n.splice(i,1):i++;t.updateURL()},get:function(e){Tp(arguments.length,1);for(var t=gp(this).entries,n=e+"",r=0;r<t.length;r++)if(t[r].key===n)return t[r].value;return null},getAll:function(e){Tp(arguments.length,1);for(var t=gp(this).entries,n=e+"",r=[],i=0;i<t.length;i++)t[i].key===n&&r.push(t[i].value);return r},has:function(e){Tp(arguments.length,1);for(var t=gp(this).entries,n=e+"",r=0;r<t.length;)if(t[r++].key===n)return!0;return!1},set:function(e,t){Tp(arguments.length,1);for(var n,r=gp(this),i=r.entries,o=!1,a=e+"",s=t+"",c=0;c<i.length;c++)(n=i[c]).key===a&&(o?i.splice(c--,1):(o=!0,n.value=s));o||i.push({key:a,value:s}),r.updateURL()},sort:function(){var e,t,n=gp(this),r=n.entries,i=r.slice();for(t=r.length=0;t<i.length;t++){var o=i[t];for(e=0;e<t;e++)if(r[e].key>o.key){r.splice(e,0,o);break}e===t&&r.push(o)}n.updateURL()},forEach:function(e){for(var t,n=gp(this).entries,r=Er(e,1<arguments.length?arguments[1]:void 0,3),i=0;i<n.length;)r((t=n[i++]).value,t.key,this)},keys:function(){return new Rp(this,"keys")},values:function(){return new Rp(this,"values")},entries:function(){return new Rp(this,"entries")}},{enumerable:!0}),Bo(Op,fp,Op.entries),Bo(Op,"toString",(function(){for(var e,t=gp(this).entries,n=[],r=0;r<t.length;)e=t[r++],n.push(encodeURIComponent(e.key).replace(Ep,Ip)+"="+encodeURIComponent(e.value).replace(Ep,Ip));return n.join("&")}),{enumerable:!0}),Gi(kp,"URLSearchParams"),kr({global:!0,forced:!rp},{URLSearchParams:kp}),rp||"function"!=typeof hp||"function"!=typeof dp||kr({global:!0,enumerable:!0,forced:!0},{fetch:function(e){var t,n,r,i=[e];return 1<arguments.length&&(or(t=arguments[1])&&(n=t.body,"URLSearchParams"===Di(n)&&((r=t.headers?new dp(t.headers):new dp).has("content-type")||r.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),t=xo(t,{body:Zn(0,String(n)),headers:Zn(0,r)}))),i.push(t)),hp.apply(this,i)}});var Np=Hn.URL,xp=kp,Dp=fo.set,Lp=fo.getterFor("URL"),Pp=Math.floor,Bp=Math.pow,Mp=/[A-Za-z]/,jp=/[\d+\-.A-Za-z]/,Up=/\d/,Fp=/^(0x|0X)/,Qp=/^[0-7]+$/,Gp=/^\d+$/,qp=/^[\dA-Fa-f]+$/,Vp=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,Kp=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,Hp=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,Wp=/[\u0009\u000A\u000D]/g,zp=function(e,t){var n,r;if("["==t.charAt(0)){if("]"!=t.charAt(t.length-1)||!(n=Jp(t.slice(1,-1))))return"Invalid host"}else if(ig(e)){var i=[],o=t.toLowerCase().replace(op,".").split(".");for(r=0;r<o.length;r++){var a=o[r];i.push(ip.test(a)?"xn--"+up(a):a)}if(t=i.join("."),Vp.test(t)||null===(n=Yp(t)))return"Invalid host"}else{if(Kp.test(t))return"Invalid host";for(n="",t=bd(t),r=0;r<t.length;r++)n+=ng(t[r],Zp)}e.host=n},Yp=function(e){var t,n,r,i,o=e.split(".");if(o.length&&""==o[o.length-1]&&o.pop(),4<(t=o.length))return e;var a=[];for(n=0;n<t;n++){if(""==(r=o[n]))return e;if(i=10,1<r.length&&"0"==r.charAt(0)&&(i=Fp.test(r)?16:8,r=r.slice(8==i?1:2)),""===r)r=0;else{if(!(10==i?Gp:8==i?Qp:qp).test(r))return e;r=parseInt(r,i)}a.push(r)}for(n=0;n<t;n++)if(r=a[n],n==t-1){if(r>=Bp(256,5-t))return null}else if(255<r)return null;for(e=a.pop(),n=0;n<a.length;n++)e+=a[n]*Bp(256,3-n);return e},Jp=function(e){var t,n,r,i=[0,0,0,0,0,0,0,0],o=0,a=null,s=0,c=function(){return e.charAt(s)};if(":"==c()){if(":"!=e.charAt(1))return;s+=2,a=++o}for(;c();){if(8==o)return;if(":"!=c()){for(t=n=0;4>n&&qp.test(c());)t=16*t+parseInt(c(),16),s++,n++;if("."==c()){if(0==n||(s-=n,6<o))return;for(t=0;c();){if(n=null,0<t){if(!("."==c()&&4>t))return;s++}if(!Up.test(c()))return;for(;Up.test(c());){if(r=parseInt(c(),10),null===n)n=r;else{if(0==n)return;n=10*n+r}if(255<n)return;s++}i[o]=256*i[o]+n,2!=++t&&4!=t||o++}if(4!=t)return;break}if(":"==c()){if(s++,!c())return}else if(c())return;i[o++]=t}else{if(null!==a)return;s++,a=++o}}if(null!==a)for(c=o-a,o=7;0!=o&&0<c;)t=i[o],i[o--]=i[a+c-1],i[a+--c]=t;else if(8!=o)return;return i},Xp=function(e){var t,n;if("number"==typeof e){var r=[];for(t=0;4>t;t++)r.unshift(e%256),e=Pp(e/256);return r.join(".")}if("object"==typeof e){r="",t=null;for(var i=1,o=null,a=0,s=0;8>s;s++)0!==e[s]?(a>i&&(t=o,i=a),o=null,a=0):(null===o&&(o=s),++a);for(a>i&&(t=o),i=t,t=0;8>t;t++)n&&0===e[t]||(n&&(n=!1),i===t?(r+=t?":":"::",n=!0):(r+=e[t].toString(16),7>t&&(r+=":")));return"["+r+"]"}return e},Zp={},$p=Da({},Zp,{" ":1,'"':1,"<":1,">":1,"`":1}),eg=Da({},$p,{"#":1,"?":1,"{":1,"}":1}),tg=Da({},eg,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),ng=function(e,t){var n=ia(e,0);return 32<n&&127>n&&!cr(t,e)?e:encodeURIComponent(e)},rg={ftp:21,file:null,http:80,https:443,ws:80,wss:443},ig=function(e){return cr(rg,e.scheme)},og=function(e){return!e.host||e.cannotBeABaseURL||"file"==e.scheme},ag=function(e,t){var n;return 2==e.length&&Mp.test(e.charAt(0))&&(":"==(n=e.charAt(1))||!t&&"|"==n)},sg=function(e){var t;return 1<e.length&&ag(e.slice(0,2))&&(2==e.length||"/"===(t=e.charAt(2))||"\\"===t||"?"===t||"#"===t)},cg=function(e){var t=e.path,n=t.length;!n||"file"==e.scheme&&1==n&&ag(t[0],!0)||t.pop()},ug={},lg={},hg={},dg={},fg={},pg={},gg={},Ag={},vg={},mg={},yg={},bg={},_g={},Eg={},wg={},Ig={},Cg={},Sg={},Tg={},Rg={},kg={},Og=function(e,t,n,r){var i,o,a=n||ug,s=0,c="",u=!1,l=!1,h=!1;for(n||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace(Hp,"")),t=t.replace(Wp,""),t=bd(t);s<=t.length;){switch(i=t[s],a){case ug:if(!i||!Mp.test(i)){if(n)return"Invalid scheme";a=hg;continue}c+=i.toLowerCase(),a=lg;break;case lg:if(i&&(jp.test(i)||"+"==i||"-"==i||"."==i))c+=i.toLowerCase();else{if(":"!=i){if(n)return"Invalid scheme";c="",a=hg,s=0;continue}if(n&&(ig(e)!=cr(rg,c)||"file"==c&&(""!=e.username||""!=e.password||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=c,n)return void(ig(e)&&rg[e.scheme]==e.port&&(e.port=null));c="","file"==e.scheme?a=Eg:ig(e)&&r&&r.scheme==e.scheme?a=dg:ig(e)?a=Ag:"/"==t[s+1]?(a=fg,s++):(e.cannotBeABaseURL=!0,e.path.push(""),a=Tg)}break;case hg:if(!r||r.cannotBeABaseURL&&"#"!=i)return"Invalid scheme";if(r.cannotBeABaseURL&&"#"==i){e.scheme=r.scheme,e.path=r.path.slice(),e.query=r.query,e.fragment="",e.cannotBeABaseURL=!0,a=kg;break}a="file"==r.scheme?Eg:pg;continue;case dg:if("/"!=i||"/"!=t[s+1]){a=pg;continue}a=vg,s++;break;case fg:if("/"==i){a=mg;break}a=Sg;continue;case pg:if(e.scheme=r.scheme,null==i)e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.query=r.query;else if("/"==i||"\\"==i&&ig(e))a=gg;else if("?"==i)e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.query="",a=Rg;else{if("#"!=i){e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.path.pop(),a=Sg;continue}e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.query=r.query,e.fragment="",a=kg}break;case gg:if(!ig(e)||"/"!=i&&"\\"!=i){if("/"!=i){e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,a=Sg;continue}a=mg}else a=vg;break;case Ag:if(a=vg,"/"!=i||"/"!=c.charAt(s+1))continue;s++;break;case vg:if("/"!=i&&"\\"!=i){a=mg;continue}break;case mg:if("@"==i){for(u&&(c="%40"+c),u=!0,c=bd(c),i=0;i<c.length;i++){var d=c[i];":"!=d||h?(d=ng(d,tg),h?e.password+=d:e.username+=d):h=!0}c=""}else if(null==i||"/"==i||"?"==i||"#"==i||"\\"==i&&ig(e)){if(u&&""==c)return"Invalid authority";s-=bd(c).length+1,c="",a=yg}else c+=i;break;case yg:case bg:if(n&&"file"==e.scheme){a=Ig;continue}if(":"!=i||l){if(null==i||"/"==i||"?"==i||"#"==i||"\\"==i&&ig(e)){if(ig(e)&&""==c)return"Invalid host";if(n&&""==c&&(""!=e.username||""!=e.password||null!==e.port))return;if(a=zp(e,c))return a;if(c="",a=Cg,n)return;continue}"["==i?l=!0:"]"==i&&(l=!1),c+=i}else{if(""==c)return"Invalid host";if(a=zp(e,c))return a;if(c="",a=_g,n==bg)return}break;case _g:if(!Up.test(i)){if(null==i||"/"==i||"?"==i||"#"==i||"\\"==i&&ig(e)||n){if(""!=c){if(65535<(a=parseInt(c,10)))return"Invalid port";e.port=ig(e)&&a===rg[e.scheme]?null:a,c=""}if(n)return;a=Cg;continue}return"Invalid port"}c+=i;break;case Eg:if(e.scheme="file","/"==i||"\\"==i)a=wg;else{if(!r||"file"!=r.scheme){a=Sg;continue}if(null==i)e.host=r.host,e.path=r.path.slice(),e.query=r.query;else if("?"==i)e.host=r.host,e.path=r.path.slice(),e.query="",a=Rg;else{if("#"!=i){sg(t.slice(s).join(""))||(e.host=r.host,e.path=r.path.slice(),cg(e)),a=Sg;continue}e.host=r.host,e.path=r.path.slice(),e.query=r.query,e.fragment="",a=kg}}break;case wg:if("/"==i||"\\"==i){a=Ig;break}r&&"file"==r.scheme&&!sg(t.slice(s).join(""))&&(ag(r.path[0],!0)?e.path.push(r.path[0]):e.host=r.host),a=Sg;continue;case Ig:if(null==i||"/"==i||"\\"==i||"?"==i||"#"==i){if(!n&&ag(c))a=Sg;else{if(""==c){if(e.host="",n)return}else{if(a=zp(e,c))return a;if("localhost"==e.host&&(e.host=""),n)return;c=""}a=Cg}continue}c+=i;break;case Cg:if(ig(e)){if(a=Sg,"/"!=i&&"\\"!=i)continue}else if(n||"?"!=i)if(n||"#"!=i){if(null!=i&&(a=Sg,"/"!=i))continue}else e.fragment="",a=kg;else e.query="",a=Rg;break;case Sg:if(null==i||"/"==i||"\\"==i&&ig(e)||!n&&("?"==i||"#"==i)){if(".."===(o=(o=c).toLowerCase())||"%2e."===o||".%2e"===o||"%2e%2e"===o?(cg(e),"/"==i||"\\"==i&&ig(e)||e.path.push("")):"."===c||"%2e"===c.toLowerCase()?"/"==i||"\\"==i&&ig(e)||e.path.push(""):("file"==e.scheme&&!e.path.length&&ag(c)&&(e.host&&(e.host=""),c=c.charAt(0)+":"),e.path.push(c)),c="","file"==e.scheme&&(null==i||"?"==i||"#"==i))for(;1<e.path.length&&""===e.path[0];)e.path.shift();"?"==i?(e.query="",a=Rg):"#"==i&&(e.fragment="",a=kg)}else c+=ng(i,eg);break;case Tg:"?"==i?(e.query="",a=Rg):"#"==i?(e.fragment="",a=kg):null!=i&&(e.path[0]+=ng(i,Zp));break;case Rg:n||"#"!=i?null!=i&&("'"==i&&ig(e)?e.query+="%27":e.query+="#"==i?"%23":ng(i,Zp)):(e.fragment="",a=kg);break;case kg:null!=i&&(e.fragment+=ng(i,$p))}s++}},Ng=function(e){var t=ji(this,Ng,"URL"),n=1<arguments.length?arguments[1]:void 0,r=String(e),i=Dp(t,{type:"URL"});if(void 0!==n)if(n instanceof Ng)var o=Lp(n);else if(n=Og(o={},String(n)))throw TypeError(n);if(n=Og(i,r,null,o))throw TypeError(n);var a=i.searchParams=new xp;(o=gp(a)).updateSearchParams(i.query),o.updateURL=function(){i.query=String(a)||null},zn||(t.href=Dg.call(t),t.origin=Lg.call(t),t.protocol=Pg.call(t),t.username=Bg.call(t),t.password=Mg.call(t),t.host=jg.call(t),t.hostname=Ug.call(t),t.port=Fg.call(t),t.pathname=Qg.call(t),t.search=Gg.call(t),t.searchParams=qg.call(t),t.hash=Vg.call(t))},xg=Ng.prototype,Dg=function(){var e=Lp(this),t=e.scheme,n=e.username,r=e.password,i=e.host,o=e.port,a=e.path,s=e.query,c=e.fragment,u=t+":";return null!==i?(u+="//",(""!=e.username||""!=e.password)&&(u+=n+(r?":"+r:"")+"@"),u+=Xp(i),null!==o&&(u+=":"+o)):"file"==t&&(u+="//"),u+=e.cannotBeABaseURL?a[0]:a.length?"/"+a.join("/"):"",null!==s&&(u+="?"+s),null!==c&&(u+="#"+c),u},Lg=function(){var e=Lp(this),t=e.scheme,n=e.port;if("blob"==t)try{return new URL(t.path[0]).origin}catch(e){return"null"}return"file"!=t&&ig(e)?t+"://"+Xp(e.host)+(null!==n?":"+n:""):"null"},Pg=function(){return Lp(this).scheme+":"},Bg=function(){return Lp(this).username},Mg=function(){return Lp(this).password},jg=function(){var e=Lp(this),t=e.host;return e=e.port,null===t?"":null===e?Xp(t):Xp(t)+":"+e},Ug=function(){var e=Lp(this).host;return null===e?"":Xp(e)},Fg=function(){var e=Lp(this).port;return null===e?"":String(e)},Qg=function(){var e=Lp(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?"/"+t.join("/"):""},Gg=function(){var e=Lp(this).query;return e?"?"+e:""},qg=function(){return Lp(this).searchParams},Vg=function(){var e=Lp(this).fragment;return e?"#"+e:""},Kg=function(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}};if(zn&&To(xg,{href:Kg(Dg,(function(e){var t=Lp(this);if(e=Og(t,String(e)))throw TypeError(e);gp(t.searchParams).updateSearchParams(t.query)})),origin:Kg(Lg),protocol:Kg(Pg,(function(e){var t=Lp(this);Og(t,String(e)+":",ug)})),username:Kg(Bg,(function(e){var t=Lp(this);if(e=bd(String(e)),!og(t)){t.username="";for(var n=0;n<e.length;n++)t.username+=ng(e[n],tg)}})),password:Kg(Mg,(function(e){var t=Lp(this);if(e=bd(String(e)),!og(t)){t.password="";for(var n=0;n<e.length;n++)t.password+=ng(e[n],tg)}})),host:Kg(jg,(function(e){var t=Lp(this);t.cannotBeABaseURL||Og(t,String(e),yg)})),hostname:Kg(Ug,(function(e){var t=Lp(this);t.cannotBeABaseURL||Og(t,String(e),bg)})),port:Kg(Fg,(function(e){var t=Lp(this);og(t)||(""==(e=String(e))?t.port=null:Og(t,e,_g))})),pathname:Kg(Qg,(function(e){var t=Lp(this);t.cannotBeABaseURL||(t.path=[],Og(t,e+"",Cg))})),search:Kg(Gg,(function(e){var t=Lp(this);""==(e=String(e))?t.query=null:("?"==e.charAt(0)&&(e=e.slice(1)),t.query="",Og(t,e,Rg)),gp(t.searchParams).updateSearchParams(t.query)})),searchParams:Kg(qg),hash:Kg(Vg,(function(e){var t=Lp(this);""!=(e=String(e))?("#"==e.charAt(0)&&(e=e.slice(1)),t.fragment="",Og(t,e,kg)):t.fragment=null}))}),Bo(xg,"toJSON",(function(){return Dg.call(this)}),{enumerable:!0}),Bo(xg,"toString",(function(){return Dg.call(this)}),{enumerable:!0}),Np){var Hg=Np.createObjectURL,Wg=Np.revokeObjectURL;Hg&&Bo(Ng,"createObjectURL",(function(e){return Hg.apply(Np,arguments)})),Wg&&Bo(Ng,"revokeObjectURL",(function(e){return Wg.apply(Np,arguments)}))}Gi(Ng,"URL"),kr({global:!0,forced:!rp,sham:!zn},{URL:Ng});var zg=br.URL;!function(){function e(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}function t(e,t){if(t)e:{var n=p;e=e.split(".");for(var r=0;r<e.length-1;r++){var i=e[r];if(!(i in n))break e;n=n[i]}(t=t(r=n[e=e[e.length-1]]))!=r&&null!=t&&f(n,e,{configurable:!0,writable:!0,value:t})}}function n(e){return(e={next:e})[Symbol.iterator]=function(){return this},e}function r(t){var n="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return n?n.call(t):{next:e(t)}}function i(){this.m=!1,this.j=null,this.v=void 0,this.h=1,this.u=this.C=0,this.l=null}function o(e){if(e.m)throw new TypeError("Generator is already running");e.m=!0}function a(e,t){return e.h=3,{value:t}}function s(e){this.g=new i,this.G=e}function c(e,t,n,r){try{var i=t.call(e.g.j,n);if(!(i instanceof Object))throw new TypeError("Iterator result "+i+" is not an object");if(!i.done)return e.g.m=!1,i;var o=i.value}catch(t){return e.g.j=null,e.g.s(t),u(e)}return e.g.j=null,r.call(e.g,o),u(e)}function u(e){for(;e.g.h;)try{var t=e.G(e.g);if(t)return e.g.m=!1,{value:t.value,done:!1}}catch(t){e.g.v=void 0,e.g.s(t)}if(e.g.m=!1,e.g.l){if(t=e.g.l,e.g.l=null,t.F)throw t.D;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function l(e){this.next=function(t){return e.o(t)},this.throw=function(t){return e.s(t)},this.return=function(t){return function(e,t){o(e.g);var n=e.g.j;return n?c(e,"return"in n?n.return:function(e){return{value:e,done:!0}},t,e.g.return):(e.g.return(t),u(e))}(e,t)},this[Symbol.iterator]=function(){return this}}function h(e,t){return t=new l(new s(t)),v&&e.prototype&&v(t,e.prototype),t}var d,f="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e},p=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Vn&&Vn];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);if(t("Symbol",(function(e){function t(e,t){this.A=e,f(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;t.prototype.toString=function(){return this.A};var n="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",r=0;return function e(i){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new t(n+(i||"")+"_"+r++,i)}})),t("Symbol.iterator",(function(t){if(t)return t;t=Symbol("Symbol.iterator");for(var r="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),i=0;i<r.length;i++){var o=p[r[i]];"function"==typeof o&&"function"!=typeof o.prototype[t]&&f(o.prototype,t,{configurable:!0,writable:!0,value:function(){return n(e(this))}})}return t})),"function"==typeof Object.setPrototypeOf)var g=Object.setPrototypeOf;else{e:{var A={};try{A.__proto__={a:!0},g=A.a;break e}catch(e){}g=!1}g=g?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var v=g;if(i.prototype.o=function(e){this.v=e},i.prototype.s=function(e){this.l={D:e,F:!0},this.h=this.C||this.u},i.prototype.return=function(e){this.l={return:e},this.h=this.u},s.prototype.o=function(e){return o(this.g),this.g.j?c(this,this.g.j.next,e,this.g.o):(this.g.o(e),u(this))},s.prototype.s=function(e){return o(this.g),this.g.j?c(this,this.g.j.throw,e,this.g.o):(this.g.s(e),u(this))},t("Array.prototype.entries",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(e,t){return[e,t]}))}})),"undefined"!=typeof Blob&&("undefined"==typeof FormData||!FormData.prototype.keys)){var m=function(e,t){for(var n=0;n<e.length;n++)t(e[n])},y=function(e){return e.replace(/\r?\n|\r/g,"\r\n")},b=function(e,t,n){return t instanceof Blob?(n=void 0!==n?String(n+""):"string"==typeof t.name?t.name:"blob",t.name===n&&"[object Blob]"!==Object.prototype.toString.call(t)||(t=new File([t],n)),[String(e),t]):[String(e),String(t)]},_=function(e,t){if(e.length<t)throw new TypeError(t+" argument required, but only "+e.length+" present.")},E=(g="object"==typeof globalThis?globalThis:"object"==typeof window?window:"object"==typeof self?self:this).FormData,w=g.XMLHttpRequest&&g.XMLHttpRequest.prototype.send,I=g.Request&&g.fetch,C=g.navigator&&g.navigator.sendBeacon;A=g.Element&&g.Element.prototype;var S=g.Symbol&&Symbol.toStringTag;S&&(Blob.prototype[S]||(Blob.prototype[S]="Blob"),"File"in g&&!File.prototype[S]&&(File.prototype[S]="File"));try{new File([],"")}catch(e){g.File=function(e,t,n){return e=new Blob(e,n||{}),Object.defineProperties(e,{name:{value:t},lastModified:{value:+(n&&void 0!==n.lastModified?new Date(n.lastModified):new Date)},toString:{value:function(){return"[object File]"}}}),S&&Object.defineProperty(e,S,{value:"File"}),e}}var T=function(e){return e.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22")},R=function(e){this.i=[];var t=this;e&&m(e.elements,(function(e){if(e.name&&!e.disabled&&"submit"!==e.type&&"button"!==e.type&&!e.matches("form fieldset[disabled] *"))if("file"===e.type){var n=e.files&&e.files.length?e.files:[new File([],"",{type:"application/octet-stream"})];m(n,(function(n){t.append(e.name,n)}))}else"select-multiple"===e.type||"select-one"===e.type?m(e.options,(function(n){!n.disabled&&n.selected&&t.append(e.name,n.value)})):"checkbox"===e.type||"radio"===e.type?e.checked&&t.append(e.name,e.value):(n="textarea"===e.type?y(e.value):e.value,t.append(e.name,n))}))};if((d=R.prototype).append=function(e,t,n){_(arguments,2),this.i.push(b(e,t,n))},d.delete=function(e){_(arguments,1);var t=[];e=String(e),m(this.i,(function(n){n[0]!==e&&t.push(n)})),this.i=t},d.entries=function e(){var t,n=this;return h(e,(function(e){if(1==e.h&&(t=0),3!=e.h)return t<n.i.length?e=a(e,n.i[t]):(e.h=0,e=void 0),e;t++,e.h=2}))},d.forEach=function(e,t){_(arguments,1);for(var n=r(this),i=n.next();!i.done;i=n.next()){var o=r(i.value);i=o.next().value,o=o.next().value,e.call(t,o,i,this)}},d.get=function(e){_(arguments,1);var t=this.i;e=String(e);for(var n=0;n<t.length;n++)if(t[n][0]===e)return t[n][1];return null},d.getAll=function(e){_(arguments,1);var t=[];return e=String(e),m(this.i,(function(n){n[0]===e&&t.push(n[1])})),t},d.has=function(e){_(arguments,1),e=String(e);for(var t=0;t<this.i.length;t++)if(this.i[t][0]===e)return!0;return!1},d.keys=function e(){var t,n,i,o=this;return h(e,(function(e){if(1==e.h&&(t=r(o),n=t.next()),3!=e.h)return n.done?void(e.h=0):(i=n.value,a(e,r(i).next().value));n=t.next(),e.h=2}))},d.set=function(e,t,n){_(arguments,2),e=String(e);var r=[],i=b(e,t,n),o=!0;m(this.i,(function(t){t[0]===e?o&&(o=!r.push(i)):r.push(t)})),o&&r.push(i),this.i=r},d.values=function e(){var t,n,i,o,s=this;return h(e,(function(e){if(1==e.h&&(t=r(s),n=t.next()),3!=e.h)return n.done?void(e.h=0):(i=n.value,(o=r(i)).next(),a(e,o.next().value));n=t.next(),e.h=2}))},R.prototype._asNative=function(){for(var e=new E,t=r(this),n=t.next();!n.done;n=t.next()){var i=r(n.value);n=i.next().value,i=i.next().value,e.append(n,i)}return e},R.prototype._blob=function(){var e="----formdata-polyfill-"+Math.random(),t=[],n="--"+e+'\r\nContent-Disposition: form-data; name="';return this.forEach((function(e,r){return"string"==typeof e?t.push(n+T(y(r))+'"\r\n\r\n'+y(e)+"\r\n"):t.push(n+T(y(r))+'"; filename="'+T(e.name)+'"\r\nContent-Type: '+(e.type||"application/octet-stream")+"\r\n\r\n",e,"\r\n")})),t.push("--"+e+"--"),new Blob(t,{type:"multipart/form-data; boundary="+e})},R.prototype[Symbol.iterator]=function(){return this.entries()},R.prototype.toString=function(){return"[object FormData]"},A&&!A.matches&&(A.matches=A.matchesSelector||A.mozMatchesSelector||A.msMatchesSelector||A.oMatchesSelector||A.webkitMatchesSelector||function(e){for(var t=(e=(this.document||this.ownerDocument).querySelectorAll(e)).length;0<=--t&&e.item(t)!==this;);return-1<t}),S&&(R.prototype[S]="FormData"),w){var k=g.XMLHttpRequest.prototype.setRequestHeader;g.XMLHttpRequest.prototype.setRequestHeader=function(e,t){k.call(this,e,t),"content-type"===e.toLowerCase()&&(this.B=!0)},g.XMLHttpRequest.prototype.send=function(e){e instanceof R?(e=e._blob(),this.B||this.setRequestHeader("Content-Type",e.type),w.call(this,e)):w.call(this,e)}}I&&(g.fetch=function(e,t){return t&&t.body&&t.body instanceof R&&(t.body=t.body._blob()),I.call(this,e,t)}),C&&(g.navigator.sendBeacon=function(e,t){return t instanceof R&&(t=t._asNative()),C.call(this,e,t)}),g.FormData=R}}();let Yg=1,Jg=1,Xg=(e,t,n,r,i)=>{var o,a,s;const c=[];if(Oa(o=e.response_body).call(o,(o=>{var a=o.buffer.code;0!==a&&(a=Wt(a),o={error:new Rl(Yu.CAN_NOT_GET_GATEWAY_SERVER,a.desc,{retry:a.retry,csIp:e.detail[502]}),flag:o.buffer.flag},c.push(o),4096===o.flag?Rd.joinChooseServer(n.sid,{lts:r,succ:!1,csAddr:t,opid:e.opid,serverList:null,ec:o.error.message,csIp:o.error.data&&o.error.data.csIp,unilbsServerIds:i.toString()}):1048576!==o.flag&&4194304!==o.flag||Rd.joinWebProxyAP(n.sid,{lts:r,sucess:0,apServerAddr:t,turnServerAddrList:null,errorCode:o.error.code,eventType:n.cloudProxyServer,unilbsServerIds:i.toString()}))})),c.length)throw Tl.warning(_i(a=_i(s="[".concat(n.clientId,"] multi unilbs ")).call(s,t," failed, ")).call(a,Sc(c).call(c,(e=>{var t,n;return _i(t=_i(n="flag: ".concat(e.flag,", message: ")).call(n,e.error.message,", retry: ")).call(t,e.error.data.retry)})).join(" | "))),new Rl(Yu.CAN_NOT_GET_GATEWAY_SERVER,Sc(c).call(c,(e=>{var t;return _i(t="flag: ".concat(e.flag,", message: ")).call(t,e.error.message)})).join(" | "),{retry:!!Wc(c).call(c,(e=>e.error.data.retry)),csIp:e.detail[502]})},Zg=e=>{if(e.addresses&&0===e.addresses.length&&0===e.code)throw new Rl(Yu.CAN_NOT_GET_GATEWAY_SERVER,"void gateway address",{retry:!0,csIp:e.detail&&e.detail[502]});if(Mu.GATEWAY_ADDRESS&&0<Mu.GATEWAY_ADDRESS.length){var t;Tl.debug("assign gateway address to",Mu.GATEWAY_ADDRESS);const n=Sc(t=Mu.GATEWAY_ADDRESS).call(t,(t=>({ip:t.ip,port:t.port,ticket:e.addresses[0]&&e.addresses[0].ticket})));e.addresses=n}},$g=(e,t,n)=>{var r;const i=Math.floor(1e12*Math.random());return t={appid:e.appId,client_ts:tl(),opid:i,sid:e.sid,request_bodies:[{uri:22,buffer:{cname:e.cname,detail:{6:e.stringUid,11:t},key:e.token,service_ids:n,uid:e.uid||0}}]},Oa(r=t.request_bodies).call(r,(t=>{e.multiIP&&e.multiIP.gateway_ip&&(t.buffer.detail[5]=Fr({vocs_ip:[e.multiIP.uni_lbs_ip],vos_ip:[e.multiIP.gateway_ip]}))})),(r=new FormData).append("request",Fr(t)),[r,i]},eA=()=>{const e=Mu.AREAS;return 0===e.length&&e.push("GLOBAL"),Qa(e).call(e,((e,t,n)=>{var r,i,o,a,s,c;return(t="OVERSEA"===t?_i(r=_i(i=_i(o=_i(a=_i(s="".concat(_h.ASIA,",")).call(s,_h.EUROPE,",")).call(a,_h.AFRICA,",")).call(o,_h.NORTH_AMERICA,",")).call(i,_h.SOUTH_AMERICA,",")).call(r,_h.OCEANIA):_h[t])?0===n?t:_i(c="".concat(e,",")).call(c,t):e}),"")};var tA={ASIA:["CHINA","JAPAN","INDIA"],EUROPE:[],NORTH_AMERICA:[],SOUTH_AMERICA:[],OCEANIA:[],AFRICA:[]};let nA=Ba(tA),rA="CHINA NORTH_AMERICA EUROPE ASIA JAPAN INDIA OCEANIA SOUTH_AMERICA AFRICA".split(" "),iA=function(e,t){var n,r=[];if(ru(e).call(e,"GLOBAL")){r=["GLOBAL","OVERSEA"];const i=Ba(Eh);if("GLOBAL"===t)throw new Rl(Yu.INVALID_PARAMS,"GLOBAL is an invalid excludedArea value");if("CHINA"===t)r=["OVERSEA"];else if(n=t,ru(nA).call(nA,n)){e=tA[t]||[];const n=[...r,t,...e];r=os(i).call(i,(e=>!ru(n).call(n,e)))}else if(function(e){let t=!1;return Oa(nA).call(nA,(n=>{var r;ru(r=tA[n]).call(r,e)&&(t=!0)})),t}(t)){e=function(e){let t;return Oa(nA).call(nA,(n=>{var r;ru(r=tA[n]).call(r,e)&&(t=n)})),t}(t);const n=[...r,e,t];r=os(i).call(i,(e=>!ru(n).call(n,e)))}else r=e;r=function(e){const t=[];return Oa(rA).call(rA,(n=>{ru(e).call(e,n)&&t.push(n)})),_i(t).call(t,os(e).call(e,(e=>!ru(rA).call(rA,e))))}(r)}else r=e;return r};class oA extends wd{constructor(){super(),this.retryConfig={timeout:3e3,timeoutFactor:1.5,maxRetryCount:1,maxRetryTimeout:1e4},this.mutex=new Nd("config-distribute")}startGetConfigDistribute(e,t){this.joinInfo=e,this.cancelToken=t,this.interval&&this.stopGetConfigDistribute(),this.updateConfigDistribute(),this.interval=window.setInterval((()=>{this.updateConfigDistribute()}),Mu.CONFIG_DISTRIBUTE_INTERVAL)}stopGetConfigDistribute(){this.interval&&clearInterval(this.interval),this.cancelToken=this.joinInfo=this.interval=void 0}async awaitConfigDistributeComplete(){this.mutex.isLocked&&(await this.mutex.lock())()}async updateConfigDistribute(){if(!this.joinInfo||!this.cancelToken||!this.retryConfig)return void Tl.debug("[config-distribute] get config distribute interrupted have no joininfo");let e,t=await this.mutex.lock();try{e=await sn(this.joinInfo,this.cancelToken,this.retryConfig),Tl.debug("[config-distribute] get config distribute",Fr(e)),e.limit_bitrate&&this.handleBitrateLimit(e.limit_bitrate),this.configs=e}catch(e){let t=new Rl(Yu.NETWORK_RESPONSE_ERROR,e);Tl.warning("[config-distribute] ".concat(t.toString()))}finally{t()}}getBitrateLimit(){return this.configs?this.configs.limit_bitrate:void 0}handleBitrateLimit(e){e&&e.uplink&&e.id&&void 0!==e.uplink.max_bitrate&&void 0!==e.uplink.min_bitrate&&(this.configs&&this.configs.limit_bitrate?this.configs&&this.configs.limit_bitrate&&this.configs.limit_bitrate.id!==e.id&&this.emit(wh.UPDATE_BITRATE_LIMIT,e):this.emit(wh.UPDATE_BITRATE_LIMIT,e))}getLowStreamConfigDistribute(){return this.configs&&this.configs.limit_bitrate&&function(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)Oa(n=ln(Object(r),!0)).call(n,(function(t){gd(e,t,r[t])}));else if(xh)Rh(e,xh(r));else{var i;Oa(i=ln(Object(r))).call(i,(function(t){qa(e,t,ns(r,t))}))}}return e}({},this.configs.limit_bitrate.low_stream_uplink)}}var aA,sA=function(){function e(e){this.input=[],this.size=e}return e.prototype.add=function(e){this.input.push(e),this.input.length>this.size&&this.input.splice(0,1)},e.prototype.diffMean=function(){return 0===this.input.length?0:(this.input[this.input.length-1]-this.input[0])/this.input.length},e}(),cA=function(e,t){return(cA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},uA=function(){return(uA=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},lA={timestamp:0,bitrate:{actualEncoded:0,transmit:0},sendPacketLossRate:0,recvPacketLossRate:0,videoRecv:[],videoSend:[],audioRecv:[],audioSend:[]},hA={firsCount:0,nacksCount:0,plisCount:0,framesDecodeCount:0,framesDecodeInterval:0,framesDecodeFreezeTime:0,decodeFrameRate:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0},dA={firsCount:0,nacksCount:0,plisCount:0,frameCount:0,bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0},fA={bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0},pA={jitterBufferMs:0,jitterMs:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0,receivedFrames:0,droppedFrames:0},gA=function(){function e(e,t){var n=this;this.videoIsReady=!1,this.stats=hn(lA),this.isFirstAudioDecoded=this.isFirstAudioReceived=this.isFirstVideoDecoded=this.isFirstVideoReceived=!1,this.lossRateWindowStats=[],this.pc=e,this.options=t,this.intervalTimer=window.setInterval((function(){return pn(n,void 0,void 0,(function(){return gn(this,(function(e){return this.updateStats(),[2]}))}))}),this.options.updateInterval)}return e.prototype.getStats=function(){return this.stats},e.prototype.setVideoIsReady=function(e){this.videoIsReady=e},e.prototype.setIsFirstAudioDecoded=function(e){this.isFirstAudioDecoded=e},e.prototype.destroy=function(){window.clearInterval(this.intervalTimer),this.pc=void 0},e.prototype.calcLossRate=function(e){var t=this;this.lossRateWindowStats.push(e),this.lossRateWindowStats.length>this.options.lossRateInterval&&this.lossRateWindowStats.splice(0,1);for(var n=this.lossRateWindowStats.length,r=0,i=0,o=0,a=0,s=function(s){e[s].forEach((function(e,c){if(t.lossRateWindowStats[n-1][s][c]&&t.lossRateWindowStats[0][s][c]){var u=t.lossRateWindowStats[n-1][s][c].packets-t.lossRateWindowStats[0][s][c].packets;c=t.lossRateWindowStats[n-1][s][c].packetsLost-t.lossRateWindowStats[0][s][c].packetsLost,"videoSend"===s||"audioSend"===s?(r+=u,o+=c):(i+=u,a+=c),Number.isNaN(u)||Number.isNaN(u)?e.packetLostRate=0:e.packetLostRate=0>=u||0>=c?0:c/(u+c)}}))},c=0,u=["videoSend","audioSend","videoRecv","audioRecv"];c<u.length;c++)s(u[c]);e.sendPacketLossRate=0>=r||0>=o?0:o/(r+o),e.recvPacketLossRate=0>=i||0>=a?0:a/(i+a)},e}(),AA=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._stats=lA,t.lastDecodeVideoReceiverStats=new Map,t}return fn(t,e),t.prototype.updateStats=function(){return pn(this,void 0,void 0,(function(){var e,t,n,r;return gn(this,(function(i){switch(i.label){case 0:return[4,this._getStats()];case 1:return e=i.sent(),t=this.statsResponsesToObjects(e),this._stats=hn(lA),n=t.filter((function(e){return"ssrc"===e.type})),this.processSSRCStats(n),(r=t.find((function(e){return"VideoBwe"===e.type})))&&this.processBandwidthStats(r),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats,[2]}}))}))},t.prototype.processBandwidthStats=function(e){this._stats.bitrate={actualEncoded:Number(e.googActualEncBitrate),targetEncoded:Number(e.googTargetEncBitrate),retransmit:Number(e.googRetransmitBitrate),transmit:Number(e.googTransmitBitrate)},this._stats.sendBandwidth=Number(e.googAvailableSendBandwidth)},t.prototype.processSSRCStats=function(e){var t=this;e.forEach((function(e){var n=e.id.includes("send");switch(e.mediaType+"_"+(n?"send":"recv")){case"video_send":(n=hn(dA)).codec=e.googCodecName,n.adaptionChangeReason="none",e.googCpuLimitedResolution&&(n.adaptionChangeReason="cpu"),e.googBandwidthLimitedResolution&&(n.adaptionChangeReason="bandwidth"),n.avgEncodeMs=Number(e.googAvgEncodeMs),n.inputFrame={width:Number(e.googFrameWidthInput)||Number(e.googFrameWidthSent),height:Number(e.googFrameHeightInput)||Number(e.googFrameHeightSent),frameRate:Number(e.googFrameRateInput)},n.sentFrame={width:Number(e.googFrameWidthSent),height:Number(e.googFrameHeightSent),frameRate:Number(e.googFrameRateInput)},n.firsCount=Number(e.googFirReceived),n.nacksCount=Number(e.googNacksReceived),n.plisCount=Number(e.googPlisReceived),n.frameCount=Number(e.framesEncoded),n.bytes=Number(e.bytesSent),n.packets=Number(e.packetsSent),n.packetsLost=Number(e.packetsLost),n.ssrc=Number(e.ssrc),n.rttMs=Number(e.googRtt||0),t._stats.videoSend.push(n),t._stats.rtt=n.rttMs;break;case"video_recv":n=hn(hA);var r=t.lastDecodeVideoReceiverStats.get(Number(e.ssrc));if(n.codec=e.googCodecName,n.targetDelayMs=Number(e.googTargetDelayMs),n.renderDelayMs=Number(e.googRenderDelayMs),n.currentDelayMs=Number(e.googCurrentDelayMs),n.minPlayoutDelayMs=Number(e.googMinPlayoutDelayMs),n.decodeMs=Number(e.googDecodeMs),n.maxDecodeMs=Number(e.googMaxDecodeMs),n.receivedFrame={width:Number(e.googFrameWidthReceived),height:Number(e.googFrameHeightReceived),frameRate:Number(e.googFrameRateReceived)},n.decodedFrame={width:Number(e.googFrameWidthReceived),height:Number(e.googFrameHeightReceived),frameRate:Number(e.googFrameRateDecoded)},n.outputFrame={width:Number(e.googFrameWidthReceived),height:Number(e.googFrameHeightReceived),frameRate:Number(e.googFrameRateOutput)},n.jitterBufferMs=Number(e.googJitterBufferMs),n.firsCount=Number(e.googFirsSent),n.nacksCount=Number(e.googNacksSent),n.plisCount=Number(e.googPlisSent),n.framesDecodeCount=Number(e.framesDecoded),n.bytes=Number(e.bytesReceived),n.packets=Number(e.packetsReceived),n.packetsLost=Number(e.packetsLost),n.ssrc=Number(e.ssrc),0<n.packets&&!t.isFirstVideoReceived&&(t.onFirstVideoReceived&&t.onFirstVideoReceived(),t.isFirstVideoReceived=!0),0<n.framesDecodeCount&&!t.isFirstVideoDecoded&&(t.onFirstVideoDecoded&&t.onFirstVideoDecoded(n.decodedFrame.width,n.decodedFrame.height),t.isFirstVideoDecoded=!0),r){e=r.stats;var i=Date.now()-r.lts;n.framesDecodeFreezeTime=e.framesDecodeFreezeTime,n.framesDecodeInterval=e.framesDecodeInterval,n.framesDecodeCount>e.framesDecodeCount&&t.isFirstVideoDecoded?(r.lts=Date.now(),n.framesDecodeInterval=i,n.framesDecodeInterval>=t.options.freezeRateLimit&&(t.videoIsReady?n.framesDecodeFreezeTime+=n.framesDecodeInterval:t.setVideoIsReady(!0))):n.framesDecodeCount<r.stats.framesDecodeCount&&(n.framesDecodeInterval=0)}t.lastDecodeVideoReceiverStats.set(n.ssrc,{stats:uA({},n),lts:Date.now()}),t._stats.videoRecv.push(n);break;case"audio_recv":(n=hn(pA)).codec=e.googCodecName,n.outputLevel=Math.abs(Number(e.audioOutputLevel))/32767,n.decodingCNG=Number(e.googDecodingCNG),n.decodingCTN=Number(e.googDecodingCTN),n.decodingCTSG=Number(e.googDecodingCTSG),n.decodingNormal=Number(e.googDecodingNormal),n.decodingPLC=Number(e.googDecodingPLC),n.decodingPLCCNG=Number(e.googDecodingPLCCNG),n.expandRate=Number(e.googExpandRate),n.accelerateRate=Number(e.googAccelerateRate),n.preemptiveExpandRate=Number(e.googPreemptiveExpandRate),n.secondaryDecodedRate=Number(e.googSecondaryDecodedRate),n.speechExpandRate=Number(e.googSpeechExpandRate),n.preferredJitterBufferMs=Number(e.googPreferredJitterBufferMs),n.jitterBufferMs=Number(e.googJitterBufferMs),n.jitterMs=Number(e.googJitterReceived),n.bytes=Number(e.bytesReceived),n.packets=Number(e.packetsReceived),n.packetsLost=Number(e.packetsLost),n.ssrc=Number(e.ssrc),n.receivedFrames=Number(e.googDecodingCTN)||Number(e.packetsReceived),n.droppedFrames=Number(e.googDecodingPLC)+Number(e.googDecodingPLCCNG)||Number(e.packetsLost),0<n.receivedFrames&&!t.isFirstAudioReceived&&(t.onFirstAudioReceived&&t.onFirstAudioReceived(),t.isFirstAudioReceived=!0),0<n.decodingNormal&&!t.isFirstAudioDecoded&&(t.onFirstAudioDecoded&&t.onFirstAudioDecoded(),t.isFirstAudioDecoded=!0),t._stats.audioRecv.push(n);break;case"audio_send":(n=hn(fA)).codec=e.googCodecName,n.inputLevel=Math.abs(Number(e.audioInputLevel))/32767,n.aecReturnLoss=Number(e.googEchoCancellationReturnLoss||0),n.aecReturnLossEnhancement=Number(e.googEchoCancellationReturnLossEnhancement||0),n.residualEchoLikelihood=Number(e.googResidualEchoLikelihood||0),n.residualEchoLikelihoodRecentMax=Number(e.googResidualEchoLikelihoodRecentMax||0),n.bytes=Number(e.bytesSent),n.packets=Number(e.packetsSent),n.packetsLost=Number(e.packetsLost),n.ssrc=Number(e.ssrc),n.rttMs=Number(e.googRtt||0),t._stats.rtt=n.rttMs,t._stats.audioSend.push(n)}}))},t.prototype._getStats=function(){var e=this;return new Promise((function(t,n){e.pc.getStats(t,n)}))},t.prototype.statsResponsesToObjects=function(e){var t=[];return e.result().forEach((function(e){var n={id:e.id,timestamp:e.timestamp.valueOf().toString(),type:e.type};e.names().forEach((function(t){n[t]=e.stat(t)})),t.push(n)})),t},t}(gA);!function(e){e.CERTIFICATE="certificate",e.CODEC="codec",e.CANDIDATE_PAIR="candidate-pair",e.LOCAL_CANDIDATE="local-candidate",e.REMOTE_CANDIDATE="remote-candidate",e.INBOUND="inbound-rtp",e.TRACK="track",e.OUTBOUND="outbound-rtp",e.PC="peer-connection",e.REMOTE_INBOUND="remote-inbound-rtp",e.REMOTE_OUTBOUND="remote-outbound-rtp",e.TRANSPORT="transport",e.CSRC="csrc",e.DATA_CHANNEL="data-channel",e.STREAM="stream",e.SENDER="sender",e.RECEIVER="receiver"}(aA||(aA={}));var vA=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._stats=lA,t.lastDecodeVideoReceiverStats=new Map,t.lastVideoFramesRecv=new Map,t.lastVideoFramesSent=new Map,t.lastVideoFramesDecode=new Map,t.lastVideoJBDelay=new Map,t.lastAudioJBDelay=new Map,t.mediaBytesSent=new Map,t.mediaBytesRetransmit=new Map,t.mediaBytesTargetEncode=new Map,t.lastEncoderMs=new Map,t}return fn(t,e),t.prototype.updateStats=function(){return pn(this,void 0,void 0,(function(){var e,t=this;return gn(this,(function(n){switch(n.label){case 0:return e=this,[4,this.pc.getStats()];case 1:return e.report=n.sent(),this._stats=hn(lA),this.report.forEach((function(e){switch(e.type){case aA.OUTBOUND:"audio"===e.mediaType?t.processAudioOutboundStats(e):"video"===e.mediaType&&t.processVideoOutboundStats(e);break;case aA.INBOUND:"audio"===e.mediaType?t.processAudioInboundStats(e):"video"===e.mediaType&&t.processVideoInboundStats(e);break;case aA.TRANSPORT:(e=t.report.get(e.selectedCandidatePairId))&&t.processCandidatePairStats(e);break;case aA.CANDIDATE_PAIR:e.selected&&t.processCandidatePairStats(e)}})),this.updateSendBitrate(),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats,[2]}}))}))},t.prototype.processCandidatePairStats=function(e){this._stats.sendBandwidth=e.availableOutgoingBitrate||0,e.currentRoundTripTime&&(this._stats.rtt=1e3*e.currentRoundTripTime),this._stats.videoSend.forEach((function(t){!t.rttMs&&e.currentRoundTripTime&&(t.rttMs=1e3*e.currentRoundTripTime)})),this._stats.audioSend.forEach((function(t){!t.rttMs&&e.currentRoundTripTime&&(t.rttMs=1e3*e.currentRoundTripTime)}))},t.prototype.processAudioInboundStats=function(e){var t=this._stats.audioRecv.find((function(t){return t.ssrc===e.ssrc}));t||(t=hn(pA),this._stats.audioRecv.push(t)),t.ssrc=e.ssrc,t.packets=e.packetsReceived,t.packetsLost=e.packetsLost,t.bytes=e.bytesReceived,t.jitterMs=1e3*e.jitter,e.trackId&&this.processAudioTrackReceiverStats(e.trackId,t),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),t.receivedFrames||(t.receivedFrames=e.packetsReceived),t.droppedFrames||(t.droppedFrames=e.packetsLost),0<t.receivedFrames&&!this.isFirstAudioReceived&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(),this.isFirstAudioReceived=!0),t.outputLevel&&0<t.outputLevel&&!this.isFirstAudioDecoded&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(),this.isFirstAudioDecoded=!0)},t.prototype.processVideoInboundStats=function(e){var t=this._stats.videoRecv.find((function(t){return t.ssrc===e.ssrc}));t||(t=hn(hA),this._stats.videoRecv.push(t)),t.ssrc=e.ssrc,t.packets=e.packetsReceived,t.packetsLost=e.packetsLost,t.bytes=e.bytesReceived,t.firsCount=e.firCount,t.nacksCount=e.nackCount,t.plisCount=e.pliCount,t.framesDecodeCount=e.framesDecoded;var n=this.lastDecodeVideoReceiverStats.get(t.ssrc),r=this.lastVideoFramesDecode.get(t.ssrc),i=Date.now();if(0<t.framesDecodeCount&&!this.isFirstVideoDecoded){var o=t.decodedFrame?t.decodedFrame.width:0,a=t.decodedFrame?t.decodedFrame.height:0;this.onFirstVideoDecoded&&this.onFirstVideoDecoded(o,a),this.isFirstVideoDecoded=!0}n&&(o=n.stats,a=i-n.lts,t.framesDecodeFreezeTime=o.framesDecodeFreezeTime,t.framesDecodeInterval=o.framesDecodeInterval,t.framesDecodeCount>o.framesDecodeCount&&this.isFirstVideoDecoded?(n.lts=Date.now(),t.framesDecodeInterval=a,t.framesDecodeInterval>=this.options.freezeRateLimit&&(this.videoIsReady?t.framesDecodeFreezeTime+=t.framesDecodeInterval:this.setVideoIsReady(!0))):t.framesDecodeCount<o.framesDecodeCount&&(t.framesDecodeInterval=0)),r&&800<=i-r.lts?(t.decodeFrameRate=Math.round((t.framesDecodeCount-r.count)/((i-r.lts)/1e3)),this.lastVideoFramesDecode.set(t.ssrc,{count:t.framesDecodeCount,lts:i,rate:t.decodeFrameRate})):r?t.decodeFrameRate=r.rate:this.lastVideoFramesDecode.set(t.ssrc,{count:t.framesDecodeCount,lts:i,rate:0}),e.totalDecodeTime&&(t.decodeMs=1e3*e.totalDecodeTime),e.trackId&&this.processVideoTrackReceiverStats(e.trackId,t),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),e.framerateMean&&(t.framesRateFirefox=e.framerateMean),0<t.packets&&!this.isFirstVideoReceived&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(),this.isFirstVideoReceived=!0),this.lastDecodeVideoReceiverStats.set(t.ssrc,{stats:uA({},t),lts:n?n.lts:Date.now()})},t.prototype.processVideoOutboundStats=function(e){var t=this._stats.videoSend.find((function(t){return t.ssrc===e.ssrc}));t||(t=hn(dA),this._stats.videoSend.push(t));var n,r=this.mediaBytesSent.get(e.ssrc);r?r.add(e.bytesSent):((n=new sA(10)).add(e.bytesSent),this.mediaBytesSent.set(e.ssrc,n)),void 0!==e.retransmittedBytesSent&&((r=this.mediaBytesRetransmit.get(e.ssrc))?r.add(e.retransmittedBytesSent):((n=new sA(10)).add(e.retransmittedBytesSent),this.mediaBytesRetransmit.set(e.ssrc,n))),e.totalEncodedBytesTarget&&((r=this.mediaBytesTargetEncode.get(e.ssrc))?r.add(e.totalEncodedBytesTarget):((n=new sA(10)).add(e.totalEncodedBytesTarget),this.mediaBytesTargetEncode.set(e.ssrc,n))),t.ssrc=e.ssrc,t.bytes=e.bytesSent,t.packets=e.packetsSent,t.firsCount=e.firCount,t.nacksCount=e.nackCount,t.plisCount=e.pliCount,t.frameCount=e.framesEncoded,t.adaptionChangeReason=e.qualityLimitationReason,e.totalEncodeTime&&e.framesEncoded&&(r=this.lastEncoderMs.get(e.ssrc),t.avgEncodeMs=!r||r.lastFrameCount>e.framesEncoded?1e3*e.totalEncodeTime/e.framesEncoded:1e3*(e.totalEncodeTime-r.lastEncoderTime)/(e.framesEncoded-r.lastFrameCount),this.lastEncoderMs.set(e.ssrc,{lastFrameCount:e.framesEncoded,lastEncoderTime:e.totalEncodeTime,lts:Date.now()})),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),e.mediaSourceId&&this.processVideoMediaSource(e.mediaSourceId,t),e.trackId&&this.processVideoTrackSenderStats(e.trackId,t),e.remoteId?this.processRemoteInboundStats(e.remoteId,t):(r=this.findRemoteStatsId(e.ssrc,aA.REMOTE_INBOUND))&&this.processRemoteInboundStats(r,t)},t.prototype.processAudioOutboundStats=function(e){var t=this._stats.audioSend.find((function(t){return t.ssrc===e.ssrc}));if(t||(t=hn(fA),this._stats.audioSend.push(t)),t.ssrc=e.ssrc,t.packets=e.packetsSent,t.bytes=e.bytesSent,e.mediaSourceId&&this.processAudioMediaSource(e.mediaSourceId,t),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),e.trackId&&this.processAudioTrackSenderStats(e.trackId,t),e.remoteId)this.processRemoteInboundStats(e.remoteId,t);else{var n=this.findRemoteStatsId(e.ssrc,aA.REMOTE_INBOUND);n&&this.processRemoteInboundStats(n,t)}},t.prototype.findRemoteStatsId=function(e,t){var n=Array.from(this.report.values()).find((function(n){return n.type===t&&n.ssrc===e}));return n?n.id:null},t.prototype.processVideoMediaSource=function(e,t){(e=this.report.get(e))&&e.width&&e.height&&e.framesPerSecond&&(t.inputFrame={width:e.width,height:e.height,frameRate:e.framesPerSecond})},t.prototype.processAudioMediaSource=function(e,t){(e=this.report.get(e))&&(t.inputLevel=e.audioLevel)},t.prototype.processVideoTrackSenderStats=function(e,t){if(e=this.report.get(e)){var n=0,r=Date.now(),i=this.lastVideoFramesSent.get(t.ssrc);i&&800<=r-i.lts?(n=Math.round((e.framesSent-i.count)/((r-i.lts)/1e3)),this.lastVideoFramesSent.set(t.ssrc,{count:e.framesSent,lts:r,rate:n})):i?n=i.rate:this.lastVideoFramesSent.set(t.ssrc,{count:e.framesSent,lts:r,rate:0}),t.sentFrame={width:e.frameWidth,height:e.frameHeight,frameRate:n}}},t.prototype.processVideoTrackReceiverStats=function(e,t){if(e=this.report.get(e)){var n=this.lastVideoFramesRecv.get(t.ssrc),r=Date.now();t.framesReceivedCount=e.framesReceived;var i=0;n&&800<=r-n.lts?(i=Math.round((e.framesReceived-n.count)/((r-n.lts)/1e3)),this.lastVideoFramesRecv.set(t.ssrc,{count:e.framesReceived,lts:r,rate:i})):n?i=n.rate:this.lastVideoFramesRecv.set(t.ssrc,{count:e.framesReceived,lts:r,rate:0}),t.receivedFrame={width:e.frameWidth||0,height:e.frameHeight||0,frameRate:i||0},t.decodedFrame={width:e.frameWidth||0,height:e.frameHeight||0,frameRate:t.decodeFrameRate||0},t.outputFrame={width:e.frameWidth||0,height:e.frameHeight||0,frameRate:t.decodeFrameRate||0},e.jitterBufferDelay&&e.jitterBufferEmittedCount&&(n=this.lastVideoJBDelay.get(t.ssrc),this.lastVideoJBDelay.set(t.ssrc,{jitterBufferDelay:e.jitterBufferDelay,jitterBufferEmittedCount:e.jitterBufferEmittedCount}),n||(n={jitterBufferDelay:0,jitterBufferEmittedCount:0}),e=1e3*(e.jitterBufferDelay-n.jitterBufferDelay)/(e.jitterBufferEmittedCount-n.jitterBufferEmittedCount),t.jitterBufferMs=e,t.currentDelayMs=Math.round(e))}},t.prototype.processAudioTrackSenderStats=function(e,t){(e=this.report.get(e))&&(t.aecReturnLoss=e.echoReturnLoss||0,t.aecReturnLossEnhancement=e.echoReturnLossEnhancement||0)},t.prototype.processAudioTrackReceiverStats=function(e,t){if(e=this.report.get(e)){if(e.removedSamplesForAcceleration&&e.totalSamplesReceived&&(t.accelerateRate=e.removedSamplesForAcceleration/e.totalSamplesReceived),e.jitterBufferDelay&&e.jitterBufferEmittedCount){var n=this.lastAudioJBDelay.get(t.ssrc);this.lastAudioJBDelay.set(t.ssrc,{jitterBufferDelay:e.jitterBufferDelay,jitterBufferEmittedCount:e.jitterBufferEmittedCount}),n||(n={jitterBufferDelay:0,jitterBufferEmittedCount:0}),t.jitterBufferMs=Math.round(1e3*(e.jitterBufferDelay-n.jitterBufferDelay)/(e.jitterBufferEmittedCount-n.jitterBufferEmittedCount))}t.outputLevel=e.audioLevel,n=1920,e.totalSamplesDuration&&e.totalSamplesReceived&&(n=e.totalSamplesReceived/e.totalSamplesDuration/50,t.receivedFrames=Math.round(e.totalSamplesReceived/n)),e.concealedSamples&&(t.droppedFrames=Math.round(e.concealedSamples/n))}},t.prototype.processRemoteInboundStats=function(e,t){(e=this.report.get(e))&&(t.packetsLost=e.packetsLost,e.roundTripTime&&(t.rttMs=1e3*e.roundTripTime))},t.prototype.getCodecFromCodecStats=function(e){return(e=this.report.get(e))&&(e=e.mimeType.match(/\/(.*)$/))&&e[1]?e[1]:""},t.prototype.updateSendBitrate=function(){var e=0,t=null,n=null;this.mediaBytesSent.forEach((function(t){e+=t.diffMean()})),this.mediaBytesRetransmit.forEach((function(e){t=null===t?e.diffMean():t+e.diffMean()})),this.mediaBytesTargetEncode.forEach((function(e){n=null===n?e.diffMean():n+e.diffMean()})),this._stats.bitrate={actualEncoded:8*(null!==t?e-t:e)/(this.options.updateInterval/1e3),transmit:8*e/(this.options.updateInterval/1e3)},null!==t&&(this._stats.bitrate.retransmit=8*t/(this.options.updateInterval/1e3)),null!==n&&(this._stats.bitrate.targetEncoded=8*n/(this.options.updateInterval/1e3))},t}(gA),mA=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return fn(t,e),t.prototype.updateStats=function(){return Promise.resolve()},t}(gA);class yA{constructor(e){this.localCandidateCount=0,this.allCandidateReceived=!1,this.videoTrack=this.audioTrack=null,this.mediaStream=new MediaStream,this.ID=EA,EA+=1,this.spec=e,this.createPeerConnection(),e=this.pc;var t=void 0,n=void 0,r=ne()?1200:void 0;void 0===t&&(t=250),void 0===n&&(n=8),void 0===r&&(r=500);var i,o=(i=navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]./i))&&i[0]?Number(i[0].split("/")[1]):null;this.statsFilter=o?76>o?new AA(e,{updateInterval:t,lossRateInterval:n,freezeRateLimit:r}):new vA(e,{updateInterval:t,lossRateInterval:n,freezeRateLimit:r}):window.RTCStatsReport&&e.getStats()instanceof Promise?new vA(e,{updateInterval:t,lossRateInterval:n,freezeRateLimit:r}):new mA(e,{updateInterval:t,lossRateInterval:n,freezeRateLimit:r})}get _statsFilter(){return this.statsFilter}getStats(){return this.statsFilter.getStats()}async createOfferSDP(){try{let e=await this.pc.createOffer(this.offerOptions);if(!e.sdp)throw Error("offer sdp is empty");return e.sdp}catch(e){throw Tl.error("create offer error:",e.toString()),new Rl(Yu.CREATE_OFFER_FAILED,e.toString())}}async setOfferSDP(e){try{await this.pc.setLocalDescription({type:"offer",sdp:e})}catch(e){throw Tl.error("set local offer error",e.toString()),new Rl(Yu.CREATE_OFFER_FAILED,e.toString())}}async setAnswerSDP(e){try{await this.pc.setRemoteDescription({type:"answer",sdp:e})}catch(e){if("InvalidStateError"!==e.name||"stable"!==this.pc.signalingState)throw Tl.error("set remote answer error",e.toString()),new Rl(Yu.SET_ANSWER_FAILED,e.toString());Tl.debug("[pc-".concat(this.ID,"] ignore invalidstate error"))}}close(){this.onConnectionStateChange=this.onICEConnectionStateChange=void 0;try{this.pc.oniceconnectionstatechange=null,this.pc.onconnectionstatechange=null,this.pc.onsignalingstatechange=null,this.pc.onicecandidateerror=null,this.pc.onicecandidate=null,this.pc.close(),this.pc=null,this.videoTransceiver=this.audioTransceiver=void 0}catch(e){}this.statsFilter.destroy()}createPeerConnection(){let e={iceServers:[]},t=e=>{const t=[];return Oa(e).call(e,(e=>{var n,r,i,o;e.security?e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:_i(n="turns:".concat((o=e.turnServerURL,o.match(/^[\.:\d]+$/)?"".concat(o.replace(/[^\d]/g,"-"),".edge.agora.io"):(Tl.info("Cannot recognized as IP address ".concat(o,". Used As Host instead")),o)),":")).call(n,e.tcpport,"?transport=tcp")}):(e.udpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:_i(r="turn:".concat(e.turnServerURL,":")).call(r,e.udpport,"?transport=udp")}),e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:_i(i="turn:".concat(e.turnServerURL,":")).call(i,e.tcpport,"?transport=tcp")}))})),t};var n,r;this.spec.iceServers?e.iceServers=this.spec.iceServers:this.spec.turnServer&&"off"!==this.spec.turnServer.mode&&(Qe(this.spec.turnServer.servers)?e.iceServers=this.spec.turnServer.servers:(e.iceServers&&e.iceServers.push(...t(this.spec.turnServer.servers)),e.iceServers&&this.spec.turnServer.serversFromGateway&&e.iceServers.push(...t(this.spec.turnServer.serversFromGateway)),Oa(n=_i(r=this.spec.turnServer.servers).call(r,this.spec.turnServer.serversFromGateway||[])).call(n,(t=>{t.forceturn&&(e.iceTransportPolicy="relay")})))),Mu.CHROME_FORCE_PLAN_B&&ue()&&(e.sdpSemantics="plan-b",Th.supportUnifiedPlan=!1),this.pc=new RTCPeerConnection(e,{optional:[{googDscp:!0}]}),this.pc.oniceconnectionstatechange=()=>{this.onICEConnectionStateChange&&this.onICEConnectionStateChange(this.pc.iceConnectionState)},this.pc.onconnectionstatechange=()=>{this.onConnectionStateChange&&this.onConnectionStateChange(this.pc.connectionState)},this.pc.onsignalingstatechange=()=>{this.pc&&"closed"===this.pc.connectionState&&this.onConnectionStateChange&&this.onConnectionStateChange(this.pc.connectionState)},this.pc.onicecandidate=e=>{if(!e.candidate)return this.pc.onicecandidate=null,this.allCandidateReceived=!0,void Tl.debug("[pc-".concat(this.ID,"] local candidate count"),this.localCandidateCount);this.localCandidateCount+=1},el((()=>{this.allCandidateReceived||(this.allCandidateReceived=!0,Tl.debug("[pc-".concat(this.ID,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))}),Mu.CANDIDATE_TIMEOUT)}}class bA extends yA{constructor(e){super(e)}async setOfferSDP(e){let t=Mu.CUSTOM_PUB_OFFER_MODIFIER;return t&&(e=t(e)),await super.setOfferSDP(e)}async setAnswerSDP(e){let t=Mu.CUSTOM_PUB_ANSWER_MODIFIER;return t&&(e=t(e)),await super.setAnswerSDP(e)}getAnswerSDP(){return this.pc.remoteDescription}getOfferSDP(){return this.pc.localDescription}async addStream(e){e=e.getTracks();for(let t of e)await this.addTrack(t)}async replaceTrack(e){if(!Th.supportReplaceTrack){var t="audio"===e.kind?this.audioTrack:this.videoTrack;if(!t)throw new Rl(Yu.UNEXPECTED_ERROR,"can not find replaced track");return await this.removeTrack(t),await this.addTrack(e),!0}let n=this.getSender(e.kind),r=Wc(t=this.mediaStream.getTracks()).call(t,(t=>t.kind===e.kind));r&&this.mediaStream.removeTrack(r),this.mediaStream.addTrack(e);try{await n.replaceTrack(e),"audio"===e.kind?this.audioTrack=e:this.videoTrack=e}catch(e){throw new Rl(Yu.SENDER_REPLACE_FAILED,e.toString())}return!1}async removeTrack(e){let t=this.getSender(e.kind);this.mediaStream.removeTrack(e);try{let e=J();"Safari"===e.name&&"11"===e.version&&await t.replaceTrack(null),this.pc.removeTrack(t)}catch(e){Tl.warning("[pc-".concat(this.ID,"] remove track error, ignore"),e)}"audio"===e.kind?(this.audioTrack=null,this.audioSender=void 0,this.audioTransceiver&&(this.audioTransceiver.direction="inactive"),this.audioTransceiver=void 0):(this.videoTrack=null,this.videoSender=void 0,this.videoTransceiver&&(this.videoTransceiver.direction="inactive"),this.videoTransceiver=void 0)}onOfferSettled({videoActive:e,audioActive:t}){if(ne())Tl.debug("firefox do not set sender parameter");else{if(this.audioSender){let e={networkQuality:void 0,active:!0};Mu.DSCP_TYPE&&(e.networkQuality=Mu.DSCP_TYPE),this.audioTrack&&(e.active=!!t),this.setAudioRtpEncodingParameters(e).catch((e=>{Tl.debug("set audio sender`s network priority failed")}))}this.videoSender&&(t={networkQuality:void 0,active:!0},Mu.DSCP_TYPE&&(t.networkQuality=Mu.DSCP_TYPE),this.videoTrack&&(t.active=!!e),this.setVideoRtpEncodingParameters(t).catch((e=>{Tl.debug("set video sender`s network priority failed")})))}}async addTrack(e){let t,n,r=Th;if("audio"===e.kind&&this.audioTrack||"video"===e.kind&&this.videoTrack)throw new Rl(Yu.UNEXPECTED_ERROR,"Can't add multiple stream");this.mediaStream.addTrack(e),r.supportUnifiedPlan?(t=await async function(e,t,n){var r;let i=Wc(r=e.getTransceivers()).call(r,(e=>"inactive"===e.direction&&e.receiver.track.kind===t.kind));return i?(i.direction="sendrecv",await i.sender.replaceTrack(t),i):e.addTransceiver(t,{direction:"sendrecv",streams:[n]})}(this.pc,e,this.mediaStream),n=t.sender):n=this.pc.addTrack(e,this.mediaStream),"audio"===e.kind?(this.audioTrack=e,this.audioSender=n,this.audioTransceiver=t):(this.videoTrack=e,this.videoSender=n,this.videoTransceiver=t)}async setRtpSenderParameters(e,t){if(e=this.videoSender||(this.videoTransceiver?this.videoTransceiver.sender:void 0)){var n=e.getParameters();n.degradationPreference=t;try{await e.setParameters(n)}catch(e){Tl.debug("[".concat(this.ID,"] ignore RtpSender.setParameters"),e.toString())}}}async setVideoRtpEncodingParameters(e){let t=this.videoSender||(this.videoTransceiver?this.videoTransceiver.sender:void 0);if(!t)throw new Rl(Yu.LOW_STREAM_ENCODING_ERROR,"Low stream has no video sender.");let n=t.getParameters();if(!n.encodings||!n.encodings[0])throw new Rl(Yu.LOW_STREAM_ENCODING_ERROR,"Low stream RtpEncodingParameters is empty.");e.scaleResolutionDownBy&&(n.encodings[0].scaleResolutionDownBy=e.scaleResolutionDownBy),e.maxBitrate&&(n.encodings[0].maxBitrate=e.maxBitrate),e.maxFramerate&&(n.encodings[0].maxFramerate=e.maxFramerate),void 0!==e.active&&(Tl.debug("set video sender encoding active:",e.active),n.encodings[0].active=e.active);let r=["very-low","low","medium","high"];return e.networkPriority&&ru(r).call(r,e.networkPriority)&&(Tl.debug("set video sender network quality:",e.networkPriority),n.encodings[0].networkPriority=e.networkPriority),await t.setParameters(n),t.getParameters()}async setAudioRtpEncodingParameters(e){let t=this.audioSender||(this.audioTransceiver?this.audioTransceiver.sender:void 0);if(!t)throw new Rl(Yu.SET_ENCODING_PARAMETER_ERROR,"pc has no audio sender.");let n=t.getParameters();if(!n.encodings||!n.encodings[0])throw new Rl(Yu.SET_ENCODING_PARAMETER_ERROR,"pc RtpEncodingParameters is empty.");void 0!==e.active&&(Tl.debug("set audio sender encoding active:",e.active),n.encodings[0].active=e.active);let r=["very-low","low","medium","high"];return e.networkPriority&&ru(r).call(r,e.networkPriority)&&(Tl.debug("set audio sender network quality:",e.networkPriority),n.encodings[0].networkPriority=e.networkPriority),await t.setParameters(n),t.getParameters()}getSender(e){var t,n,r=null;if(!(r=Th.supportUnifiedPlan?(r=Wc(t=this.pc.getTransceivers()).call(t,(t=>t.sender.track&&t.sender.track.kind===e)))?r.sender:null:Wc(n=this.pc.getSenders()).call(n,(t=>t.track&&t.track.kind===e))||null))throw new Rl(Yu.SENDER_NOT_FOUND);return r}close(){this.videoSender=this.audioSender=void 0,super.close()}}class _A extends yA{constructor(e){super(e),this.statsFilter.onFirstAudioDecoded=()=>this.onFirstAudioDecoded&&this.onFirstAudioDecoded(),this.statsFilter.onFirstVideoDecoded=(e,t)=>this.onFirstVideoDecoded&&this.onFirstVideoDecoded(e,t),this.statsFilter.onFirstAudioReceived=()=>this.onFirstAudioReceived&&this.onFirstAudioReceived(),this.statsFilter.onFirstVideoReceived=()=>this.onFirstVideoReceived&&this.onFirstVideoReceived(),Th.supportUnifiedPlan?(this.audioTransceiver=this.pc.addTransceiver("audio",{direction:"recvonly"}),this.videoTransceiver=this.pc.addTransceiver("video",{direction:"recvonly"})):this.offerOptions={offerToReceiveAudio:!0,offerToReceiveVideo:!0},this.pc.ontrack=e=>{"audio"===e.track.kind?this.audioTrack=e.track:this.videoTrack=e.track,this.onTrack&&this.onTrack(e.track,e.streams[0])}}async setOfferSDP(e){let t=Mu.CUSTOM_SUB_OFFER_MODIFIER;return t&&(e=t(e)),await super.setOfferSDP(e)}async setAnswerSDP(e){let t=Mu.CUSTOM_SUB_ANSWER_MODIFIER;return t&&(e=t(e)),await super.setAnswerSDP(e)}}let EA=1,wA=1;class IA extends wd{constructor(e,t){super(),this.startTime=tl(),this.createTime=tl(),this.readyToReconnect=!1,this._connectionState="disconnected",this.currentReconnectCount=0,this.ID=wA,wA+=1,this.joinInfo=e,this._userId=t,this.createPC()}get connectionState(){return this._connectionState}set connectionState(e){e!==this._connectionState&&(this.emit(Xl.CONNECTION_STATE_CHANGE,e,this._connectionState),this._connectionState=e)}get connectionId(){var e,t;return _i(e=_i(t="".concat(this.joinInfo.clientId,"-")).call(t,this.type?this.type:"sub(".concat(this._userId,")"),"-")).call(e,this.ID)}getUserId(){return this._userId}startUploadStats(){this.statsUploadInterval=window.setInterval((()=>{let e=this.pc.getStats();this.uploadStats(e,this.lastUploadPCStats),this.lastUploadPCStats=e}),3e3),this.statsUploadSlowInterval=window.setInterval((()=>{let e=this.pc.getStats();this.uploadSlowStats(e)}),6e4),this.relatedStatsUploadInterval=window.setInterval((()=>{let e=this.pc.getStats();this.uploadRelatedStats(e,this.lastRelatedPcStats),this.lastRelatedPcStats=e}),1e3)}stopUploadStats(){this.statsUploadInterval&&window.clearInterval(this.statsUploadInterval),this.relatedStatsUploadInterval&&window.clearInterval(this.relatedStatsUploadInterval),this.relatedStatsUploadInterval=this.statsUploadInterval=void 0}createWaitConnectionConnectedPromise(){return new wc(((e,t)=>{"disconnected"===this.connectionState?t():"connected"===this.connectionState?e():this.once(Xl.CONNECTION_STATE_CHANGE,(n=>{"connected"===n?e():t()}))}))}async reconnectPC(e){if(this.readyToReconnect=!1,e&&this.onPCDisconnected(e),1/0<this.currentReconnectCount)throw Tl.debug("[".concat(this.connectionId,"] cannot reconnect pc")),e||new Rl(Yu.UNEXPECTED_ERROR);if(this.stopUploadStats(),Tl.debug("[".concat(this.connectionId,"] start reconnect pc")),this.connectionState="connecting",this.currentReconnectCount+=1,await this.closePC())return Tl.debug("[".concat(this.connectionId,"] abort reconnect pc, wait ws")),void this.readyToReconnectPC();this.createPC(),await this.startP2PConnection(),this.currentReconnectCount=0}readyToReconnectPC(){this.stopUploadStats(),this.readyToReconnect=!0,this.pc.onICEConnectionStateChange=void 0,this.connectionState="connecting"}updateICEPromise(){this.removeAllListeners(Xl.GATEWAY_P2P_LOST),this.icePromise=new wc(((e,t)=>{let n=!0;this.pc.onICEConnectionStateChange=r=>{var i,o;Tl.info(_i(i=_i(o="[".concat(this.connectionId,"] ice-state: ")).call(o,this.type," p2p ")).call(i,r)),"connected"===r&&e(),"failed"!==r&&"closed"!==r||(n&&this.emit(Xl.P2P_LOST),n=!1,this.reconnectPC(new Rl(Yu.ICE_FAILED)).catch((e=>{t(e)})))},this.pc.onConnectionStateChange=e=>{var r,i;Tl.info(_i(r=_i(i="[".concat(this.connectionId,"] connection-state: ")).call(i,this.type," p2p ")).call(r,e)),"failed"!==e&&"closed"!==e||(n&&this.emit(Xl.P2P_LOST),n=!1,this.reconnectPC(new Rl(Yu.PC_CLOSED)).catch((e=>{t(e)})))},this.removeAllListeners(Xl.GATEWAY_P2P_LOST),this.once(Xl.GATEWAY_P2P_LOST,(e=>{var r;if(this.pc.ID.toString()===e.toString()){if(Tl.info(_i(r="[".concat(this.connectionId,"] ")).call(r,this.type," p2p gateway lost")),n&&this.emit(Xl.P2P_LOST),n=!1,this.pc.allCandidateReceived&&0===this.pc.localCandidateCount)return this.disconnectedReason=new Rl(Yu.NO_ICE_CANDIDATE,"can not get candidate in this pc"),void this.closeP2PConnection(!0);this.reconnectPC(new Rl(Yu.GATEWAY_P2P_LOST)).catch((e=>{t(e)}))}}))}))}}class CA{constructor(e){this.freezeTimeCounterList=[],this.lastTimeUpdatedTime=this.playbackTime=this.freezeTime=this.timeUpdatedCount=0,this._videoElementStatus=Ol.NONE,this.isGettingVideoDimensions=!1,this.handleVideoEvents=e=>{switch(e.type){case"play":case"playing":this.startGetVideoDimensions(),this.videoElementStatus=Ol.PLAYING;break;case"loadeddata":this.onFirstVideoFrameDecoded&&this.onFirstVideoFrameDecoded();break;case"canplay":this.videoElementStatus=Ol.CANPLAY;break;case"stalled":this.videoElementStatus=Ol.STALLED;break;case"suspend":this.videoElementStatus=Ol.SUSPEND;break;case"pause":this.videoElementStatus=Ol.PAUSED,!re()&&!se()&&this.videoElement&&this.videoTrack&&"live"===this.videoTrack.readyState&&(Tl.debug("[track-".concat(this.trackId,"] video element paused, auto resume")),this.videoElement.play());break;case"waiting":this.videoElementStatus=Ol.WAITING;break;case"abort":this.videoElementStatus=Ol.ABORT;break;case"ended":this.videoElementStatus=Ol.ENDED;break;case"emptied":this.videoElementStatus=Ol.EMPTIED;break;case"timeupdate":{if(e=tl(),this.timeUpdatedCount+=1,10>this.timeUpdatedCount)return void(this.lastTimeUpdatedTime=e);let t=e-this.lastTimeUpdatedTime;for(this.lastTimeUpdatedTime=e,500<t&&(this.freezeTime+=t),this.playbackTime+=t;6e3<=this.playbackTime;)this.playbackTime-=6e3,this.freezeTimeCounterList.push(Math.min(6e3,this.freezeTime)),this.freezeTime=Math.max(0,this.freezeTime-6e3)}}},this.startGetVideoDimensions=()=>{let e=()=>{if(this.isGettingVideoDimensions=!0,this.videoElement&&4<this.videoElement.videoWidth*this.videoElement.videoHeight)return Tl.debug("[".concat(this.trackId,"] current video dimensions:"),this.videoElement.videoWidth,this.videoElement.videoHeight),void(this.isGettingVideoDimensions=!1);el(e,500)};!this.isGettingVideoDimensions&&e()},this.autoResumeAfterInterruption=()=>{this.videoElement&&this.videoTrack&&"live"===this.videoTrack.readyState&&"running"===Bd.curState&&(oe()?(Tl.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.0")),this.videoElement.pause(),this.videoElement.play()):ae()?(Tl.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.1")),this.videoElement.load(),this.videoElement.play()):(Tl.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 14")),this.videoElement.play()))},this.autoResumeAfterInterruptionOnIOS15=()=>{this.videoElement&&this.videoTrack&&"live"===this.videoTrack.readyState&&(oe()?(Tl.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.0")),this.videoElement.pause(),this.videoElement.play()):ae()&&(Tl.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.1")),this.videoElement.load(),this.videoElement.play()))},this.slot=e.element,this.trackId=e.trackId,this.updateConfig(e),Bd.on(Dd.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),Bd.on(Dd.IOS_15_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15)}get videoElementStatus(){return this._videoElementStatus}set videoElementStatus(e){var t,n;e!==this._videoElementStatus&&(Tl.debug(_i(t=_i(n="[".concat(this.trackId,"] video-element-status change ")).call(n,this._videoElementStatus," => ")).call(t,e)),this._videoElementStatus=e)}updateConfig(e){this.config=e,this.trackId=e.trackId,(e=e.element)!==this.slot&&(this.destroy(),this.slot=e),this.createElements()}updateVideoTrack(e){this.videoTrack!==e&&(this.videoTrack=e,this.createElements())}play(){if(this.videoElement){let e=this.videoElement.play();e&&e.catch&&e.catch((e=>{"NotAllowedError"===e.name?(Tl.warning("detected video element autoplay failed",e),this.handleAutoPlayFailed()):Tl.warning("[".concat(this.trackId,"] play warning: "),e)}));let t=J();("Safari"===t.name&&15===Number(t.version)||ie())&&e&&e.finally&&e.finally((()=>{this.config.mirror&&this.videoElement&&(this.videoElement.style.transform="rotateY(180deg)")}))}}getCurrentFrame(){if(!this.videoElement)return new ImageData(2,2);let e=document.createElement("canvas");e.width=this.videoElement.videoWidth,e.height=this.videoElement.videoHeight;var t=e.getContext("2d");return t?(t.drawImage(this.videoElement,0,0,e.width,e.height),t=t.getImageData(0,0,e.width,e.height),e.remove(),t):(Tl.error("create canvas context failed!"),new ImageData(2,2))}destroy(){if(Bd.off(Dd.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),Bd.off(Dd.IOS_15_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15),this.videoElement&&(this.videoElement.srcObject=null,this.videoElement.remove(),this.videoElement=void 0),this.container){try{this.container.remove(),this.slot.removeChild(this.container)}catch(e){}this.container=void 0}this.freezeTimeCounterList=[]}createElements(){this.container||(this.container=document.createElement("div")),this.container.id="agora-video-player-".concat(this.trackId),this.container.style.width="100%",this.container.style.height="100%",this.container.style.position="relative",this.container.style.overflow="hidden",this.videoTrack?(this.container.style.backgroundColor="black",this.createVideoElement(),this.container.appendChild(this.videoElement)):this.removeVideoElement(),this.slot.appendChild(this.container)}createVideoElement(){this.videoElement||(this.videoElementStatus=Ol.INIT,this.videoElement=document.createElement("video"),this.videoElement.onerror=()=>this.videoElementStatus=Ol.ERROR,this.container&&this.container.appendChild(this.videoElement),Oa(SA).call(SA,(e=>{this.videoElement&&this.videoElement.addEventListener(e,this.handleVideoEvents)})),this.videoElementCheckInterval=window.setInterval((()=>{!document.getElementById("video_".concat(this.trackId))&&this.videoElement&&(this.videoElementStatus=Ol.DESTROYED)}),1e3)),this.videoElement.id="video_".concat(this.trackId),this.videoElement.className="agora_video_player",this.videoElement.style.width="100%",this.videoElement.style.height="100%",this.videoElement.style.position="absolute",this.videoElement.controls=!1,this.videoElement.setAttribute("playsinline",""),this.videoElement.style.left="0",this.videoElement.style.top="0";var e=J();"Safari"===e.name&&15===Number(e.version)||ie()||!this.config.mirror||(this.videoElement.style.transform="rotateY(180deg)"),this.config.fit?this.videoElement.style.objectFit=this.config.fit:this.videoElement.style.objectFit="cover",this.videoElement.setAttribute("muted",""),this.videoElement.muted=!0,this.videoElement.srcObject&&this.videoElement.srcObject instanceof MediaStream?this.videoElement.srcObject.getVideoTracks()[0]!==this.videoTrack&&(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,ne()&&this.videoElement.load()):(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,ne()&&this.videoElement.load()),void 0!==(e=this.videoElement.play())&&e.catch((e=>{Tl.debug("[".concat(this.trackId,"] playback interrupted"),e.toString())}))}removeVideoElement(){if(this.videoElement){Oa(SA).call(SA,(e=>{this.videoElement&&this.videoElement.removeEventListener(e,this.handleVideoEvents)})),this.videoElementCheckInterval&&(window.clearInterval(this.videoElementCheckInterval),this.videoElementCheckInterval=void 0);try{this.container&&this.container.removeChild(this.videoElement)}catch(e){}this.videoElement=void 0,this.videoElementStatus=Ol.NONE}}handleAutoPlayFailed(){if(this.videoElement){let e=t=>{t.preventDefault(),this.videoElement&&(this.videoElement.play().then((()=>{var e;Tl.debug(_i(e="[".concat(this.trackId,"] Video element for trackId:")).call(e,this.trackId," autoplay resumed."))})).catch((e=>{Tl.error(e)})),document.body.removeEventListener("touchstart",e,!0),document.body.removeEventListener("mousedown",e,!0))};document.body.addEventListener("touchstart",e,!0),document.body.addEventListener("mousedown",e,!0),ft()}}}let SA="play playing loadeddata canplay pause stalled suspend waiting abort emptied ended timeupdate".split(" ");var TA;!document.documentMode&&window.StyleMedia&&(HTMLCanvasElement.prototype.getContext=(TA=HTMLCanvasElement.prototype.getContext,function(){let e=arguments;return"webgl"===e[0]&&(e=qc([]).call(arguments),e[0]="experimental-webgl"),TA.apply(null,e)}));let RA=[31,222,239,159,192,236,164,81,54,227,176,149,2,247,75,141,183,54,213,216,158,92,111,49,228,111,150,6,135,79,35,212,4,155,200,168,37,107,243,110,144,179,51,81,55,78,223,242,191,211,74,119,203,151,142,62,31,41,132,22,35,155,87,123,119,117,216,57,201,53,228,67,201,40,106,24,80,176,187,253,60,63,136,100,20,12,177,99,64,38,101,143,111,176,251,211,145,136,34,23,79,136,202,95,105,199,125,67,180,44,210,179,228,4,85,160,188,64,26,46,6,61,201,103,248,18,97,254,140,36,115,106,48,124,102,216,155,120,36,227,165,217,7,227,191,128,212,157,80,37,117,175,24,214,47,221,183,211,51,174,251,223,159,167,152,53,36,107,199,223,91,62,46,194,11,80,121,188,219,2,99,99,232,229,173,234,21,30,236,177,243,142,97,48,108,56,62,172,56,216,3,42,79,138,23,88,182,39,5,118,68,135,178,56,9,94,189,44,104,9,238,231,174,122,85,247,231,86,74,8,189,147,218,180,58,76,227,17,46,90,194,100,51,178,72,163,151,243,166,130,85,1,223,130,152,242,85,255,28,173,97,252,119,215,177,119,86,104,136,82,40,72,53,11,18,26,240,188,76,110,39,31,189],kA=[11,196,242,139,198,252,188,5,59,170,161,152,17,229,24,141,133,54,214,206,133,26,66,126,255,11,245,10,146,92,52,134,108,152,221,191,124,116,248,106,130,251,59,105,43,91,135,199,181,223,10,51,134,194,240,46,9,3,141,22,35,146,76,23,109,117,208,41,201,45,218,76,203,105,51,58,97,154,145,236,49,18,183,127,27,12,210,122,73,42,37,143,36,207,251,211,145,191,56,10,88,222,181,125,22,238,123,71,177,107,218,254,173,28,34,253,249,67,83,97,73,111,219,43,181,82,38,230,136,109,22,67];class OA{constructor(e,t){this.gl=e,this.kernel=t||kA,e=this.gl,t=mn(this.kernel),t=vn(e,[mn(RA),t]);var n=e.getAttribLocation(t,"a_position"),r=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,r),e.bufferData(e.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),e.STATIC_DRAW),e.enableVertexAttribArray(n),e.vertexAttribPointer(n,2,e.FLOAT,!1,0,0),n=e.getAttribLocation(t,"a_texCoord"),r=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,r),e.bufferData(e.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),e.STATIC_DRAW),e.enableVertexAttribArray(n),e.vertexAttribPointer(n,2,e.FLOAT,!1,0,0),this.program=e=t}setUniforms(){let e=this.gl.getUniformLocation(this.program,"u_flipY");this.gl.uniform1f(e,1)}}class NA extends OA{constructor(e,t,n,r){super(e,t),this.denoiseLevel=5,this.xOffset=1/n,this.yOffset=1/r}setUniforms(){let e=this.gl.getUniformLocation(this.program,"u_flipY"),t=this.gl.getUniformLocation(this.program,"u_singleStepOffset"),n=this.gl.getUniformLocation(this.program,"u_denoiseLevel");this.gl.uniform2f(t,this.xOffset,this.yOffset),this.gl.uniform1f(n,this.denoiseLevel),this.gl.uniform1f(e,1)}setParameters(e){void 0!==e.denoiseLevel&&(this.denoiseLevel=e.denoiseLevel)}setSize(e,t){this.xOffset=1/e,this.yOffset=1/t}}let xA=[11,196,242,139,198,252,188,5,59,170,161,152,17,229,24,141,133,54,214,206,133,26,66,126,255,11,245,10,146,92,52,134,108,155,210,164,99,114,228,96,130,251,59,105,43,91,135,199,181,223,10,51,133,194,247,34,31,39,142,28,2,130,18,109,84,124,223,62,140,52,128,47,208,47,115,39,4,200,220,171,53,36,150,101,10,75,247,121,74,36,35,143,108,176,235,211,135,164,36,11,88,160,148,35,6,221,41,32,166,109,205,171,228,4,26,169,244,82,119,102,86,61,201,103,248,18,97,242,182,34,121,70,28,71,126,197,223,126,14,244,149,192,12,176,187,149,212,156,22,44,36,133,10,216,63,198,213,154,116,230,253,154,154,249,215,55,60,34,196,229,76,50,44,135,22,77,113,247,142,94,60,23,172,145,175,218,81,86,162,239,180,205,63,118,3,110,123,224,127,158,124,15,127,157,27,66,176,33,24,51,53,194,178,56,6,74,191,111,51,78,174,157,229,17,22,178,231,92,25,23,191,157,137,188,54,64,176,13,22,81,207,45,108,203,83,186,130,237,186,153,110,8,196,168,152,161,28,238,46,184,36,185,20,203,183,98,95,41,149,93,105,37,116,91,68,105,164,217,30,42,60,53,173,213,177,216,195,53,204,173,128,243,42,122,205,65,97,129,194,68,218,91,141,11,224,124,132,138,119,36,220,161,39,214,146,183,193,225,23,177,201,243,128,160,33,75,86,126,139,254,232,14,13,85,2,112,17,150,36,180,86,226,225,126,197,17,228,225,142,245,37,170,39,96,187,190,2,35,85,237,11,189,1,79,237,2,1,114,246,109,190,66,54,153,43,218,204,70,6,204,162,247,18,130,123,30,60,165,130,142,210,133,91,127,117,71,38,145,172,7,5,16,220,222,111,98,141,239,208,125,26,238,28,0,216,89,13,7,119,134,194,75,41,67,174,1,217,80,101,40,26,59,28,59,46,108,138,38,157,167,28,234,73,177,42,42,102,108,26,181,27,178,42,43,52,28,110,117,198,173,176,178,101,225,150,36,139,108,105,10,237,222,3,143,126,18,144,115,74,56,114,134,231,159,212,62,126,80,173,216,167,4,81,18,52,17,144,218,32,139,207,104,128,229,99,84,120,31,87,227,154,91,196,63,123,111,125,36,52,57,168,113,150,189,204,24,104,196,237,86,163,68,197,202,170,212,191,81,193,111,255,162,181,202,156,146,196,96,16,118,117,55,71,156,31,163,242,204,239,11,150,27,126,115,154,107,247,134,158,125,255,146,35,183,209,36,116,87,215,172,5,251,133,114,254,141,195,6,145,4,111,182,167,74,154,152,68,18,146,88,106,200,154,15,176,94,86,66,178,101,219,35,188,129,66,28,41,110,174,53,88,174,64,191,206,127,48,126,214,216,93,119,2,166,99,181,222,29,218,28,195,219,125,44,50,16,99,174,225,51,133,120,184,159,168,75,242,162,124,255,81,25,153,109,69,220,176,4,237,196,233,19,8,240,160,39,122,81,29,188,144,249,170,174,137,30,10,93,133,151,199,248,175,38,41,144,229,245,149,25,240,138,179,114,182,84,50,103,95,31,199,31,87,208,203,199,135,49,211,43,52,36,74,59,37,22,136,171,244,126,18,251,39,159,241,66,206,127,149,159,182,143,232,199,136,46,150,32,51,221,74,22,102,93,22,44,132,140,199,43,69,249,77,75,140,70,4,252,98,235,77,190,125,18,56,21,10,244,42,2,246,62,127,241,123,137,22,247,219,177,160,84,18,10,84,97,251,127,102,16,209,181,100,94,56,238,209,207,76,189,95,15,165,139,143,189,96,225,55,112,178,27,218,198,223,251,52,123,94,130,220,142,216,116,237,18,254,49,59,128,41,29,15,179,164,85,76,167,166,151,39,221,2,190,68,167,26,177,114,141,4,67,25,69,182,38,166,160,27,151,148,108,48,227,60,112,48,22,159,76,127,251,63,254,177,113,217,197,95,179,109,128,138,99,27,249,10,174,155,129,80,39,165,252,85,60,131,183,98,107,68,207,19,233,231,55,225,126,77,49,53,145,203,113,29,208,64,237,182,229,165,7,11,169,106,253,116,141,200,62,16,38,121,55,148,91,83,160,140,126,121,12,79,189,72,172,31,243,240,209,229,32,220,91,229,81,94,247,121,153,151,232,182,171,198,50,31,152,245,172,151,130,55,62,125,38,155,229,78,207,148,201,2,78,63,119,107,168,78,139,141,163,177,191,239,141,39,182,174,40,76,226,62,125,209,6,6,34,37,147,85,204,103,51,191,36,248,17,175,20,1,53,16,35,143,237,177,125,86,29,219,235,20,121,205,59,5,250,107,109,32,224,30,152,143,113,151,95,85,19,254,164,135,124,68,136,199,29,31,244,91,10,84,127,101,210,70,226,195,140,70,166,54,217,165,84,42,165,175,100,234,124,121,105,53,101,118,174,101,220,147,68,161,37,0,182,220,142,221,155,230,115,164,10,214,208,120,91,152,66,27,81,184,48,84,70,7,128,153,217,218,249,226,70,130,200,156,61,227,21,164,137,193,221,119,10,134,204,23,20,17,90,94,105,204,39,99,1,64,153,45,213,19,247,97,194,49,35,125,255,195,139,63,209,175,208,147,189,244,204,24,211,99,142,18,92,130,254,182,231,235,93,10,127,175,87,35,62,110,137,184,39,114,200,150,11,190,40,162,168,223,203,110,242,192,234,26,11,54,155,38,48,79,109,101,119,165,187,223,5,20,168,171,241,20,243,108,199,3,155,69,244,149,0,187,110,12,233,42,151,189,139,133,104,3,30,16,200,69,4,123,103,144,12,106,182,1,127,91,125,158,12,144,238,232,209,101,159,56,163,240,179,50,169,120,219,176,87,77,45,247,153,190,82,132,50,137,209,97,19,35,247,161,62,77,16,71,152,72,61,50,99,157,154,56,58,175,27,73,121,229,195,228,132,69,233,169,100,21,123,17,3,164,6,146,106,196,29,3,250,217,164,23,171,203,14,242,239,249,169,116,138,209,98,113,181,122,35,162,216,46,230,4,155,142,118,216,232,229,28,12,158,153,126,149,171,172,231,99,211,57,114,136,183,114,74,35,233,115,127,253,157,38,49,136,141,25,161,255,232,110,101,208,166,186,226,12,185,19,155,53,93,155,39,161,7,124,213,52,223,125,211,242,253,22,13,131,115,167,198,188,90,209,63,224,92,112,118,220,165,31,164,43,58,197,77,17,247,77,164,74,77,218,18,187,41,76,189,127,98,18,226,231,71,115,236,68,183,111,50,168,88,247,9,123,65,180,88,74,44,101,101,173,11];class DA extends NA{constructor(e,t,n){super(e,xA,t,n)}}let LA=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,165,108,122,254,125,130,229,55,109,113,11,210,238,163,213,86,116,156,248,215,63,20,48,173,31,55,133,18,105,32,16,204,35,128,38,212,87,200,97,114,40,12,210,193,171,59,33,158,108,14,75,228,74,65,32,57,192,112,156,234,250,140,189,40,20,6,230,135,52,17,200,123,68,183,44,215,187,234,2,13,169,234,94,115,60,6,107,224,118,254,88,2,235,134,36,120,5,85,94,126,222,223,101,105,227,147,199,64,185,246,143,183,210,30,37,127,226,79,156,118,147,208,131,51,248,232,217,206,181,218,58,61,112,244,227,68,45,41,206,69,12,45,163,205,75,6,23,167,145,250,237,92,84,164,240,253,216,54,85,7,108,62,255,42,217,3,27,0,196,94,28,241,120,80,92,89,135,228,125,2,3,242,39,116,64,248,216,177,122,66,178,180,9,7,33,186,208,213,188,59,78,243,95,123,28,142,45,99,130,7,167,194,156,238,199,10,71,141,251,221,158,16,255,38,181,36,184,20,136,240,55,27,51,191,82,105,55,97,78,74,121,191,161,91,126,105,103,174,139,223,145,150,120,156,240,252,182,105,104,205,65,97,129,194,68,218,91,141,11,224,124,132,138,119,36,201,211,39,203,146,225,246,252,21,161,250,188,137,190,42,4,90,126,211,171,240,113,67,28,92,57,77,200,125,224,19,178,142,112,202,5,233,229,128,235,105,239,102,52,179,224,87,45,68,211,10,187,9,38,190,86,25,43,175,56,231,11,108,220,36,129,131,19,93,163,239,169,118,205,50,77,121,139,139,141,197,170,20,44,39,19,97,205,228,8,106,67,210,135,111,127,141,185,175,123,26,226,42,29,217,16,99,9,46,157,232,22,3,105,174,73,144,23,110,55,84,46,4,116,39,113,205,58,158,242,7,208,75,162,55,115,35,52,124,235,114,178,55,43,98,17,100,33,134,237,190,230,60,184,192,104,146,52,58,79,174,180,81,155,114,0,153,113,90,51,86,150,254,136,205,104,39,11,190,187,233,80,81,81,56,18,222,148,116,155,156,33,132,226,127,84,34,83,28,249,153,18,197,10,116,102,125,45,47,36,235,46,212,166,209,3,125,132,237,124,163,68,197,202,232,152,234,75,235,103,248,160,241,213,151,144,130,37,23,51,48,55,12,227,31,163,242,251,245,22,129,77,20,35,150,20,181,203,138,69,233,215,109,178,209,52,85,96,221,179,56,249,138,111,250,141,134,95,152,92,109,183,174,104,151,156,31,66,211,10,57,141,167,18,177,27,126,74,252,29,143,121,173,203,8,27,44,123,148,57,88,163,68,228,158,62,98,121,192,228,94,92,72,241,33,230,173,0,197,1,194,144,111,91,60,0,106,181,203,51,133,120,250,158,184,93,216,184,126,253,21,22,155,99,80,205,227,69,231,141,165,71,70,252,223,105,51,93,22,165,135,233,177,164,139,53,5,85,151,134,214,165,249,100,24,186,207,245,149,68,218,204,252,32,190,90,48,76,57,31,201,15,52,130,135,152,206,63,198,100,126,36,2,104,116,0,160,163,186,2,91,165,57,149,163,12,239,121,152,209,224,136,248,135,136,46,150,32,51,154,6,105,0,71,30,44,175,147,139,34,91,184,78,31,145,18,3,250,122,166,47,252,109,19,40,10,123,163,99,76,133,119,37,180,38,207,79,171,185,188];class PA extends NA{constructor(e,t,n){super(e,LA,t,n)}}let BA=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,160,96,121,255,120,207,227,114,120,38,72,149,145,165,227,75,122,158,250,232,46,34,52,135,9,30,144,17,110,126,110,130,71,156,46,210,67,202,51,119,97,3,211,214,227,45,109,151,97,21,10,229,53,80,26,51,202,119,128,230,197,140,135,40,14,88,128,202,95,21,208,96,83,185,98,216,242,224,15,25,224,233,86,96,46,80,120,220,48,187,86,30,240,140,46,95,81,48,90,117,140,177,51,107,235,158,137,5,241,191,154,149,219,30,126,85,175,10,216,63,139,216,151,122,251,224,202,220,227,221,53,122,34,213,224,94,45,14,200,68,31,61,175,208,17,120,82,244,138,208,165,21,19,236,232,180,217,50,74,70,126,114,227,62,192,124,9,85,148,33,77,255,117,75,102,87,151,255,87,74,74,181,111,108,9,249,220,174,59,80,254,168,29,30,94,171,133,133,195,105,64,254,68,65,18,158,54,73,203,65,175,151,170,236,138,17,119,128,237,214,189,28,250,38,149,97,242,81,212,254,57,18,120,155,64,96,108,75,78,74,121,191,243,30,42,60,103,165,196,160,195,216,99,182,173,214,182,105,53,231,3,45,212,144,101,217,65,141,44,230,125,151,154,123,57,134,223,98,133,156,238,137,181,80,175,230,167,131,180,13,69,77,44,156,165,252,14,27,85,71,1,82,196,64,243,26,167,146,98,201,6,195,247,200,224,44,177,104,109,187,231,83,118,28,159,92,179,28,14,162,81,84,21,168,34,156,21,127,215,88,218,208,11,92,161,239,239,82,221,59,86,83,201,199,216,151,139,23,54,39,52,103,204,247,24,102,94,157,138,42,49,131,183,208,50,95,236,54,6,211,26,68,72,56,212,134,24,91,114,132,1,217,80,38,47,29,47,0,107,102,99,129,33,140,243,74,251,89,247,103,12,114,58,113,240,72,188,39,48,72,89,45,102,206,245,247,231,56,167,129,122,222,47,40,78,227,159,64,206,34,127,203,127,87,40,108,152,238,147,231,46,104,89,182,180,232,86,89,91,57,10,222,202,59,199,135,60,199,189,40,84,125,28,84,162,210,91,143,34,106,117,118,3,125,126,237,60,131,173,153,69,49,212,204,117,163,31,239,202,232,152,234,3,162,32,176,184,184,196,154,131,144,115,6,53,122,55,69,166,19,230,183,175,244,1,156,11,37,121,134,121,152,142,158,125,229,150,44,183,216,109,7,65,222,169,56,222,140,110,233,157,138,66,208,6,111,166,188,76,208,222,4,104,211,10,57,141,243,65,228,86,85,88,169,91,237,56,249,133,77,21,32,37,230,55,0,184,110,228,158,62,98,45,147,177,19,119,89,164,103,132,239,84,139,68,204,157,49,41,50,89,113,159,203,51,133,120,184,210,237,15,249,187,100,253,50,16,154,112,64,193,254,10,235,200,253,84,31,169,171,39,122,70,46,186,139,212,162,173,158,41,23,86,148,172,196,237,242,58,102,180,150,238,191,25,240,204,252,125,148,29,124,51,95,10,196,55,49,159,138,144,255,126,205,43,49,42,17,59,60,77,139,177,239,64,36,224,98,205,234,70,199,103,139,218,206,207,178,217,255,32,134,59,25,221,74,22,102,82,19,20,170,142,134,42,106,249,64,80,222,28,21,169,50,235,4,237,56,81,87,76,32,251,42,6,173,105,54,191,8,136,5,245,206,239,176,9,116,24];class MA extends NA{constructor(e,t,n){super(e,BA,t,n)}}let jA=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,190,100,112,230,97,199,225,96,74,99,94,248,222,162,213,95,122,158,212,233,42,22,37,217,115,36,152,30,123,116,104,212,109,129,41,220,77,213,97,124,45,4,219,197,171,40,18,149,104,20,4,248,102,64,9,50,217,124,131,180,188,159,170,63,1,84,130,150,117,14,212,118,67,165,97,207,242,251,15,30,187,188,77,79,122,67,101,252,109,244,82,37,191,227,35,114,87,57,71,99,218,155,54,101,239,138,197,13,226,228,176,157,158,87,98,55,251,79,150,64,138,200,135,40,132,135,207,146,252,222,57,58,111,151,225,78,59,36,210,70,29,121,160,210,31,109,67,167,194,177,236,91,108,164,229,130,211,59,66,93,18,107,226,54,210,51,8,77,217,19,73,187,33,30,59,9,135,162,49,5,11,225,111,119,11,247,218,129,115,83,205,170,21,4,69,210,133,134,245,109,15,177,9,81,81,203,105,42,158,12,255,151,165,230,205,5,92,196,251,211,187,27,214,43,186,91,233,85,192,229,15,71,38,220,20,38,101,44,78,7,60,251,186,75,103,108,53,166,220,186,208,194,120,207,230,159,248,22,32,142,124,96,157,222,60,191,65,145,6,239,125,151,147,50,58,130,207,110,131,223,231,137,238,28,182,216,167,198,191,37,67,76,1,144,232,218,79,72,28,65,101,43,216,64,253,16,173,179,123,140,27,233,245,199,230,36,181,102,114,247,162,18,34,20,212,25,171,24,28,143,80,94,40,167,34,209,61,117,130,1,198,196,7,21,252,180,255,92,128,119,9,48,156,138,136,151,143,23,44,52,3,40,197,228,31,123,67,163,140,32,54,204,187,149,80,19,255,82,120,195,12,110,65,56,212,143,22,78,44,234,72,140,29,118,103,18,36,7,122,50,37,139,47,142,243,25,208,88,237,126,50,103,127,19,183,29,169,29,1,55,23,100,32,129,239,243,160,61,178,197,117,199,45,57,26,165,135,92,218,59,0,197,54,13,96,40,141,212,221,131,103,46,22,228,191,167,73,20,86,62,11,147,217,116,205,203,110,134,249,51,6,123,23,86,231,157,8,144,83,126,115,118,35,96,36,229,36,220,228,143,71,45,223,129,48,236,5,145,202,188,208,184,70,241,104,255,188,181,146,210,206,144,53,77,101,120,38,8,245,80,230,165,160,183,83,202,79,127,57,214,126,242,150,208,40,239,148,35,163,201,97,74,70,214,181,63,240,147,33,253,149,140,77,197,82,126,189,231,7,196,212,80,14,151,24,57,144,243,81,234,66,24,19,236,2,137,121,246,129,65,7,99,110,174,54,74,182,81,234,142,37,72,110,220,255,64,119,10,188,111,191,228,1,205,9,204,143,56,62,125,84,106,225,131,97,192,43,240,157,161,75,168,247,44,175,65,81,192,48,21,157,167,80,191,130,161,75,85,186,174,42,117,1,68,252,204,138,254,203,152,21,13,64,144,195,207,238,229,54,103,247,159,245,211,85,191,141,168,32,234,85,46,118,12,5,199,4,19,217,203,202,156,33,143,114,116,60,66,40,58,77,208,237,171,26,72,175,114,205,248,87,137,62,210,143,151,197,167,210,241,122,150,104,122,154,2,70,102,83,19,36,141,136,199,42,79,229,71,86,194,109,31,236,80,166,17,230,109,1,40,28,46,224,56,20,230,47,100,254,116,208,76,169,157,241,175,3,70,85,31,38,245,58,33,80,145,237,8,22,71,224,158,156,31,249,81,87,247,230,199,237,96,167,123,63,243,79,156,206,203,160,54,124,68,253,215,132,235,57,185,92,238,55,59,210,104,71,26,183,180,71,12,255,224,192,65,154,72,244,8,164,10,248,46,207,30,92,1,80,244,31,189,138,88,216,218,63,100,227,116,57,119,94,135,5,126,255,32,191,163,61,209,194,88,248,112,139,173,43,69,134,3,160,151,137,25,98,239,166,19,123,208,180,31,120,30,191,75,183,179,126,180,125,92,107,105,206,138,28,67,139,3,188,230,184,255,121,13,181,45,160,114,202,194,123,87,55,124,97,164,82,95,232,216,117,62,5,90,176,82,167,52,160,153,174,168,105,146,91,248,81,79,249,97,138,133,170,245,229,132,61,5,149,224,246,194,213,61,12,109,44,136,235,95,219,133,220,27,93,36,93,124,180,81,141,152,220,170,163,229,197,124,171,232,48,70,251,106,119,150,20,16,49,119,247,42,132,36,76,254,124,177,66,175,9,1,39,92,127,195,171,198,34,2,64,144,179,72,40,151,110,89,229,42,125,33,238,16,220,228,51,203,8,1,68,145,253,133,118,93,163,129,22,13,248,65,12,4,63,101,210,70,170,138,203,14,246,54,194,195,27,107,241,175,35,171,49,52,106,121,45,36,152,85,215,132,78,167,34,18,167,245,152,133,134,170,120,182,10,146,191,37,2,205,47,125,20,203,44,88,81,32,150,223,220,218,238,254,30,212,167,221,115,156,82,226,137,220,221,97,3,139,202,33,9,27,26,126,40,215,25,126,9,82,208,49,217,14,161,81,196,61,60,87,254,213,194,81,216,161,151,209,166,222,230,24,128,117,140,92,4,203,254,170,253,249,88,90,112,226,18,44,122,39,158,158,56,69,204,159,5,179,51,197,233,139,216,102,226,206,248,15,78,112,214,126,67,28,40,38,98,190,178,206,67,94,245,254,160,101,176,32,157,26,132,83,252,228,87,242,32,127,160,112,210,224,133,149,115,41,30,16,200,69,89,81,77,144,12,106,182,73,54,28,53,195,28,216,179,179,136,35,141,102,234,177,240,34,186,106,145,245,3,84,48,251,157,245,11,217,111,227,138,42,67,114,211,177,37,103,16,71,152,72,117,123,36,213,202,56,124,227,84,8,45,229,149,165,214,69,244,169,55,68,62,94,104,228,74,205,123,222,17,7,172,158,227,74,206,149,67,175,171,251,185,121,151,223,63,35,229,32,49,190,209,120,137,69,213,214,19,150,187,177,28,12,158,153,126,149,171,167,234,120,129,109,32,157,180,75,66,56,233,115,127,230,157,32,34,143,156,31,230,168,174,125,118,195,249,243,165,81,246,10,144,15,103,139,55,173,7,59,136,69,172,54,132,165,140,78,77,230,33,169,129,188,71,209,109,161,8,57,57,199,143,31,164,43,58,130,1,110,145,31,229,13,46,149,94,244,106,76,238,105,107,1,183,177,10,61,225,94,185,116,58,183,95,225,22,119,19,248,28,13,123,125,108,158,64,184,77,245,153,162,217,227,208,41,185,211,235,41,153,181,54,166,165,11,154,55,21,184,209,192,249,44,164,160,29,229,159,82,156,198,241,183,114,83,137,186,151,148,31,21,197,216,145,32,13,50,22,241,137,39,71,28,142,160,215,107,221,45,202,104,227,110,186,12,150,145,240,51,49,44,196,115,224,238,149,189,134,99,67,241,62,157,240,114,247,195,26,200,141,97,147,249,23,150,174,10,13,219,81,73,58,242,96,250,243,15,49,218,58,230,104,252,175,150,123,86,185,84,90,198,6,36,0,99,72,28,166,238,115,231,171,249,179,71,174,68,156,227,17,198,79,73,142,99,144,20,80,62,80,191,142,46,71,9,243,6,8,214,116,72,190,106,161,19,185,100,9,187,64,94,86,203,174,156,245,222,95,54,30,148,19,11,50,112,96,61,237,159,173,7,154,127,175,79,48,97,89,78,126,66,171,204,158,195,27,226,205,222,157,89,251,90,125,37,212,27,97,3,141,247,175,50,121,7,187,68,196,181,202,167,189,57,84,81,222,23,27,84,130,176,98,66,240,207,18,23,28,163,163,194,45,37,129,202,170,97,189,0,81,238,0,39,199,163,35,211,206,247,65,29,116,242,67,102,235,13,136,232,230,114,146,187,7,254,142,26,121,16,237,5,160,201,114,94,178,199,95,212,241,45,112,180,188,72,86,114,189,155,149,149,163,210,112,101,12,69,225,75,202,223,28,242,90,215,156,169,224,245,135,128,92,148,217,131,208,255,25,135,117,136,5,104,185,249,161,228,214,16,105,204,9,182,135,153,220,101,244,160,207,58,182,118,185,240,57,245,123,13,112,182,106,229,220,90,29,86,215,96,147,232,2,55,131,225,137,68,245,89,141,252,97,3,129,155,216,223,98,116,45,78,85,141,161,74,215,7,150,171,225,59,78,221,152,236,14,117,100,208,158,86,13,185,124,87,157,111,40,187,182,124,173,71,173,23,199,52,155,190,134,11,23,64,25,215,39,115,231,173,77,72,114,54,252,116,178,59,221,106,241,119,254,30,226,241,204,233,113,197,96,146,0,41,67,3,231,126,12,218,202,22,171,114,249,176,134,160,19,216,31,229,118,226,62,242,126,126,42,127,130,68,218,218,81,202,106,217,191,25,177,82,97,81,36,232,137,58,90,216,190,117,235,20,194,144,76,178,27,213,13,208,18,29,118,126,49,98,203,179,128,237,100,32,242,189,212,6,210,210,188,161,205,13,124,119,13,215,112,41,183,176,215,168,210,182,111,1,115,2,239,141,8,177,124,112,48,197,2,239,11,99,4,36,77,69,47,244,19,153,61,19,2,96,176,7,112,122,131,169,25,189,116,171,49,12,121,162,79,154,74,251,50,233,182,63,180,224,118,49,253,21,20,16,31,144,184,93,174,231,244,183,13,49,225,189,211,73,185,49,110,142,25,226,45,176,233,204,74,33,16,205,88,131,92,157,170,175,68,170,61,53,116,165,16,27,182,160,181,87,241,15,151,85,107,76,167,129,25,172,127,184,138,153,222,228,125,64,44,45,32,12,227,148,106,152,83,240,166,54,235,32,190,12,242,164,123,189,53,194,141,104,43,202,110,4,168,119,245,232,179,178,198,1,224,87,86,160,31,19,140,233,102,191,204,4,98,138,163,191,106,24,213,47,208,82,137,132,131,16,253,84,25,144,90,159,148,16,196,84,166,61,160,101,229,227,93,118,59,87,66,16,128,59,96,131,250,20,184,150,205,91,227,201,62,35,79,180,172,173,85,197,106,153,238,229,60,204,65,193,230,94,101,177,134,6,165,53,171,142,208,155,2,11,4,202,127,54,17,142,117,227,121,128,204,192,147,147,92,189,5,224,148,72,18,83,101,126,124,228,153,242,123,229,247,92,221,6,73,227,250,87,167,194,129,187,73,38,185,109,217,240,193,88,50,178,180,151,54,197,187,137,190,166,233,1,103,204,88,31,127,185,29,65,1,29,254,223,14,83,167,215,114,248,30,173,89,173,187,69,5,105,117,15,106,94,173,63,227,25,230,190,136,168,177,175,107,91,126,254,34,188,25,118,48,12,226,130,153,162,57,47,181,212,79,160,97,64,157,246,90,53,43,149,76,102,15,195,107,58,242,84,172,29,81,198,113,81,251,138,182,154,111,30,171,129,56,17,45,214,153,112,117,203,174,40,38,234,236,32,4,112,225,26,187,195,246,252,9,218,69,160,223,178,54,148,81,8,134,151,75,248,63,224,240,48,75,250,221,85,46,100,50,3,70,64,102,111,160,155,233,59,147,184,57,61,6,126,79,176,16,185,94,166,33,135,78,42,75,140,208,140,44,153,187,64,103,119,160,236,16,239,74,218,219,212,207,110,53,30,76,248,40,111,98,44,20,113,204,233,109,135,96,107,39,163,203,125,45,157,152,71,239,175,174,159,147,80,111,93,38,253,228,154,225,181,101,12,241,127,65,49,189,5,85,151,237,213,143,14,104,138,54,52,27,4,132,67,35,156,86,157,73,16,229,222,245,110,79,165,179,56,179,53,218,229,100,58,87,149,48,231,64,63,115,67,3,172,6,186,115,154,60,53,214,152,149,89,234,37,143,82,255,64,28,183,93,112,39,70,185,57,0,199,9,61,175,219,41,76,37,176,82,125,65,53,160,214,105,62,153,244,222,96,205,6,178,85,41,240,113,0,96,149,38,3,195,18,152,41,246,3,103,29,110,134,30,101,75,46,103,199,184,20,230,8,55,120,4,229,168,35,43,7,28,161,143,87,27,87,79,255,186,44,195,158,155,181,119,81,172,217,107,95,98,55,243,186,66,105,48,224,123,232,84,156,20,10,156,208,204,52,34,228,136,97,242,200,246,211,67,202,40,241,91,92,253,9,54,72,131,221,106,178,32,44,182,4,225,193,37,20,249,249,231,10,206,18,71,254,221,187,172,88,204,6,127,138,102,7,208,75,147,219,199,177,79,36,170,101,207,177,109,95,143,217,41,199,80,183,201,2,254,12,55,23,198,14,255,69,245,138,155,129,227,167,168,130,156,135,14,96,93,48,99,143,107,126,92,117,143,112,108,193,228,84,13,41,186,27,172,92,201,149,116,19,112,197,116,209,128,102,1,55,152,177,28,37,34,50,83,41,199,74,178,59,111,67,118,35,252,36,33,87,28,170,17,215,47,90,154,124,137,15,14,211,59,75,59,30,77,0,49,37,225,191,87,101,127,214,227,160,99,174,234,82,148,235,16,241,219,147,170,127,221,250,116,39,218,156,72,227,172,55,0,79,188,76,51,222,232,24,36,62,94,154,3,61,230,146,114,253,0,128,58,253,90,72,211,242,38,39,133,153,161,119,105,195,152,225,208,105,140,80,217,186,196,157,21,116,230,116,139,25,159,143,118,128,77,201,238,247,228,15,168,4,133,148,21,148,12,44,241,7,115,17,129,176,202,46,130,122,129,235,141,223,85,21,199,65,181,169,52,174,161,153,62,25,164,115,213,89,138,199,103,79,200,165,135,249,244,27,209,178,240,129,211,61,9,111,157,147,119,36,119,255,110,130,84,49,210,225,247,100,26,121,127,163,160,26,79,99,24,77,65,32,178,109,36,27,253,173,110,183,11,14,211,57,130,254,124,104,165,219,31,70,97,14,194,39,61,26,141,125,228,126,194,184,101,160,204,106,128,144,106,103,171,18,246,129,220,85,172,151,123,5,73,155,192,175,91,157,239,61,237,116,170,65,233,56,19,49,114,168,190,3,214,53,250,90,213,244,88,101,30,229,248,124,15,71,141,27,172,235,21,129,211,72,61,172,112,170,128,135,96,196,221,255,27,176,105,188,183,121,33,37,149,53,131,226,233,29,167,234,218,109,53,185,152,36,248,53,61,235,78,21,201,214,210,163,12,251,187,45,188,137,126,127,237,92,234,91,240,225,38,194,57,213,251,237,171,30,99,52,14,49,84,101,252,237,7,166,122,114,32,107,32,207,239,136,168,178,12,11,241,233,230,146,132,18,83,233,41,172,17,6,161,42,113,87,40,255,185,1,146,128,5,240,126,131,71,42,54,124,205,2,122,71,30,222,229,40,134,142,102,97,239,151,177,1,230,231,49,123,219,28,129,91,152,112,13,154,81,197,226,255,112,158,178,177,55,181,108,138,185,245,29,186,21,73,188,209,154,200,89,116,235,198,144,36,87,248,22,7,200,122,7,148,44,42,87,140,238,204,95,231,252,0,136,0,22,39,70,123,125,165,113,227,172,146,163,128,158,36,52,91,19,36,245,27,150,138,141,11,67,239,224,65,24,116,101,7,39,46,142,172,164,243,148,0,33,226,59,47,203,137,156,241,66,250,157,30,204,101,143,134,98,238,155,226,25,184,136,219,89,100,193,11,143,71,139,243,230,151,0,249,1,78,26,32,93,104,157,67,97,164,248,86,124,146,93,74,222,228,167,55,53,100,135,216,109,13,64,37,106,177,200,200,182,92,251,69,31,243,89,80,198,14,132,203,72,103,28,104,217,24,97,223,113,11,29,178,191,210,46,162,255,68,99,8,237,213,162,152,193,183,121,203,19,108,182,29,86,26,192,103,220,103,205,154,179,197,9,22,73,127,175,146,38,119,210,0,24,180,21,245,215,204,91,186,119,138,183,239,15,155,231,248,133,39,24,101,144,236,10,230,54,174,227,73,21,110,10,160,241,232,131,14,212,127,232,59,122,65,146,54,163,9,189,190,121,88,170,62,194,14,204,152,245,38,131,37,91,81,72,114,29,115,239,182,56,44,156,159,177,180,82,160,93,97,86,183,236,50,95,85,39,71,181,225,152,143,63,123,117,34,44,109,160,166,229,240,91,138,102,54,180,173,44,50,80,42,124,7,50,124,211,239,21,94,197,185,239,213,107,142,64,95,124,125,17,180,97,189,101,52,48,19,112,12,70,9,212,177,54,118,66,84,147,236,248,26,124,95,103,135,254,124,49,112,186,99,120,90,8,194,191,88,57,242,65,61,10,104,246,197,252,19,159,58,194,75,173,242,103,8,115,84,69,238,149,26,15,159,182,141,132,119,70,29,53,20,143,46,163,204,6,236,59,45,185,172,89,119,83,38,144,36,222,96,151,26,99,195,163,170,133,92,159,214,53,150,116,90,176,69,145,130,15,172,140,217,215,101,163,115,161,65,101,8,7,183,113,213,134,58,175,130,251,143,173,248,168,135,60,159,30,194,68,208,119,120,2,40,178,227,247,161,77,47,136,46,244,163,72,65,158,25,225,195,61,132,182,204,177,186,200,81,2,65,105,212,72,94,203,232,217,182,123,251,228,160,1,161,204,123,20,37,1,77,208,179,45,149,181,122,102,190,123,213,164,231,41,216,130,234,248,208,251,252,220,84,209,67,47,61,220,5,142,162,26,236,121,142,248,132,255,65,122,203,196,102,191,187,2,195,127,255,193,92,49,91,186,154,39,156,29,211,172,49,104,245,114,153,223,211,199,249,35,130,160,128,0,152,176,183,20,236,113,193,108,26,255,11,237,102,133,245,94,115,114,10,89,229,214,221,99,149,30,99,37,246,10,26,26,39,92,123,170,73,211,127,227,54,30,86,133,159,112,225,91,148,100,174,149,75,143,14,140,20,44,64,212,5,243,8,116,63,30,97,42,123,20,73,212,85,207,83,122,27,251,233,84,10,17,236,232,83,200,127,119,143,163,204,220,167,59,231,20,106,186,222,191,8,40,234,21,25,180,13,116,250,152,224,174,75,3,205,38,173,215,236,151,185,121,254,244,154,239,17,53,106,164,61,49,116,216,118,94,150,35,181,26,238,66,49,211,221,132,146,166,115,39,136,36,205,230,179,31,197,51,148,165,109,38,70,37,148,52,44,209,250,98,58,246,225,103,198,101,26,25,196,207,8,166,21,88,252,175,253,10,88,107,157,19,225,61,12,246,221,37,239,186,167,137,142,135,222,128,174,62,95,216,38,141,157,45,232,97,217,173,203,234,116,129,69,206,189,94,221,12,54,139,186,247,184,16,200,121,244,104,8,7,35,111,47,188,10,140,92,73,143,206,203,72,122,184,20,102,197,130,64,150,63,96,239,8,132,111,217,84,91,198,32,43,100,138,241,15,160,42,190,253,193,184,164,124,29,210,96,67,224,221,182,29,218,129,149,29,128,174,98,88,88,125,56,40,255,120,5,0,87,174,42,150,90,112,201,183,169,19,57,195,191,12,58,244,235,132,25,145,72,146,214,8,125,100,135,12,5,102,97,248,174,24,159,90,33,43,187,6,61,212,241,225,190,219,252,197,123,129,164,108,123,55,230,4,153,166,105,234,15,85,216,23,56,32,3,41,110,68,146,172,133,202,98,41,7,47,152,35,255,168,106,241,226,222,77,244,52,185,65,252,227,32,66,38,11,172,60,28,28,103,84,1,1,205,182,190,28,189,102,253,43,1,191,148,116,10,227,18,81,93,80,239,157,232,215,180,163,165,161,109,177,71,150,244,144,208,160,110,22,174,60,206,43,103,121,55,103,114,115,173,238,13,10,227,251,41,176,216,158,229,216,55,234,128,128,20,167,106,181,86,163,130,215,110,149,191,10,227,215,8,214,154,178,181,15,19,0,247,250,97,74,43,157,55,94,174,41,41,9,199,97,20,91,32,18,10,43,98,240,247,203,20,250,117,160,44,229,202,187,64,54,124,15,184,169,129,27,160,240,26,61,255,60,166,60,144,209,84,55,187,186,168,13,124,125,29,17,100,249,227,62,205,78,179,163,168,139,168,21,38,83,239,151,74,43,66,2,92,72,71,94,216,134,238,20,45,158,213,164,73,57,80,47,198,184,130,223,227,71,132,133,235,177,85,174,142,124,172,200,54,229,40,126,60,76,92,216,153,56,241,174,66,141,90,226,3,30,68,234,71,187,163,112,146,255,22,143,170,204,3,127,179,81,139,160,37,77,246,128,220,196,158,153,73,177,65,199,119,29,197,144,130,248,206,155,253,108,213,124,7,223,221,162,146,134,242,65,99,162,107,120,247,214,207,96,150,169,131,208,218,221,28,24,112,208,23,1,130,142,232,56,104,45,33,158,95,255,123,31,74,76,120,178,155,213,6,195,164,8,8,69,241,197,127,83,169,21,167,19,94,143,252,33,159,248,241,170,153,147,1,149,199,201,131,170,79,236,212,209,143,107,98,24,123,56,33,193,85,247,64,225,135,210,78,145,57,16,145,71,170,20,133,87,235,4,166,239,100,82,235,81,50,223,9,193,52,49,86,129,190,196,82,165,107,63,115,161,98,33,20,193,29,42,151,205,252,124,72,245,48,181,67,7,13,21,127,59,226,188,144,129,112,244,192,121,213,80,42,196,1,13,107,108,78,0,40,121,225,148,237,234,209,216,238,9,147,226,254,96,89,212,72,193,106,75,135,74,227,67,255,92,191,81,188,124,226,149,152,142,15,159,195,238,114,55,255,166,157,230,59,148,170,166,151,65,213,104,253,253,112,150,82,147,137,27,214,100,247,65,81,92,47,86,217,7,45,120,81,130,31,236,243,76,78,3,45,105,172,220,71,48,220,94,196,249,163,193,133,50,236,205,20,55,2,63,14,127,69,113,212,204,12,58,79,89,86,29,61,199,201,64,149,6,144,182,150,129,31,18,167,120,248,82,107,25,143,128,27,161,28,25,153,183,217,238,78,186,106,92,27,202,219,165,96,0,216,234,169,73,101,39,182,113,217,240,170,116,172,221,250,233,48,49,242,83,227,92,181,184,72,230,180,21,15,108,135,25,38,153,25,124,227,26,149,73,236,39,211,244,149,58,183,132,26,223,219,174,144,117,233,219,165,205,157,159,222,184,52,47,241,201,123,65,24,44,55,215,177,168,250,179,115,190,227,123,158,163,179,224,69,196,66,207,254,243,101,221,193,140,250,4,28,222,52,96,138,160,33,218,64,118,214,234,201,152,148,91,178,111,107,144,142,6,182,102,72,188,34,213,181,26,223,58,255,103,81,17,47,169,11,245,224,123,148,215,237,186,107,75,152,90,202,166,22,149,197,5,246,238,78,76,229,106,199,94,127,195,0,45,82,6,159,103,96,138,231,71,46,107,59,216,39,43,12,221,27,214,56,155,145,66,187,169,250,235,78,211,179,239,183,198,163,93,5,196,24,174,143,225,106,139,89,98,13,127,207,184,194,30,1,165,198,169,8,197,118,86,163,221,138,23,209,61,116,79,99,233,43,130,60,244,85,229,243,172,123,148,200,120,192,127,211,52,11,159,41,95,212,230,188,169,156,137,29,212,12,148,168,148,133,243,44,241,139,127,24,246,220,227,125,209,97,60,52,162,192,146,49,161,92,138,112,189,128,59,126,125,46,207,60,79,231,174,152,209,68,223,205,2,38,14,91,116,159,255,28,27,178,248,164,104,158,79,69,214,234,157,12,75,163,83,253,245,202,61,213,176,6,197,230,29,208,166,253,194,254,235,29,141,241,70,249,15,62,0,148,163,135,52,122,40,96,87,31,179,152,51,216,133,184,122,198,203,60,115,218,191,193,16,178,25,148,252,112,104,103,252,36,92,221,28,179,43,199,198,151,128,100,252,217,161,249,34,201,172,118,52,180,252,104,7,223,44,116,102,212,21,40,224,184,55,163,210,21,207,161,239,51,54,155,41,133,18,67,48,3,165,130,251,4,79,214,57,72,130,157,212,144],UA=[0,1,3,4,6,7,9,10,12,13,15,16,18,19,21,22,24,26,29,31,34,36,39,41,44,46,49,51,54,56,59,61,64,65,66,67,68,69,70,72,73,74,75,76,77,79,80,81,82,83,84,85,87,88,89,90,91,92,94,95,96,97,98,99,101,102,103,104,105,106,107,109,110,111,112,113,114,116,117,118,119,120,121,123,124,125,126,127,128,129,131,132,133,134,135,136,138,139,140,141,142,143,145,146,147,148,149,150,151,153,154,155,156,157,158,160,161,162,163,164,165,166,168,169,170,171,172,173,175,176,177,178,179,180,182,183,184,185,186,187,188,190,191,192,193,194,195,197,198,199,200,201,202,204,205,206,207,208,209,210,212,213,214,215,216,217,219,220,221,222,223,224,226,226,226,227,227,227,228,228,228,229,229,229,230,230,231,231,231,232,232,232,233,233,233,234,234,235,235,235,236,236,236,237,237,237,238,238,239,239,239,240,240,240,241,241,241,242,242,243,243,243,244,244,244,245,245,245,246,246,246,247,247,247,248,248,248,249,249,249,250,250,250,251,251,251,252,252,252,253,253,253,254,254,254,255],FA=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,32,33,35,36,37,39,40,42,43,44,46,47,49,50,51,53,54,56,57,58,59,61,62,63,64,66,67,68,69,71,72,73,74,76,77,78,79,81,82,83,84,86,87,88,90,91,92,93,95,96,97,98,100,101,102,103,105,106,107,108,110,111,112,113,115,116,117,118,120,121,122,124,125,126,127,129,130,131,132,134,135,136,137,139,140,141,142,144,145,146,147,149,150,151,152,154,155,156,158,159,160,161,163,164,165,166,168,169,170,171,173,174,175,176,178,179,180,181,183,184,185,186,188,189,190,192,193,194,195,197,198,199,200,202,203,204,205,207,208,209,210,212,213,214,215,217,218,219,220,222,223,224,226,226,226,227,227,228,228,229,229,230,230,231,231,232,232,233,233,234,234,234,235,235,236,236,237,237,238,238,239,239,240,240,241,241,242,242,243,243,243,244,244,244,245,245,245,246,246,246,247,247,247,248,248,248,249,249,249,250,250,250,251,251,251,252,252,252,253,253,253,254,254,254,255],QA=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,35,36,37,38,39,40,41,43,44,45,46,47,48,50,51,52,53,54,55,56,58,59,60,61,62,63,65,66,67,68,69,70,72,73,74,76,77,78,80,81,83,84,85,87,88,89,91,92,94,95,96,98,99,100,102,103,105,106,107,109,110,111,113,114,116,117,118,120,121,122,124,125,127,128,129,131,132,133,135,136,138,139,140,142,143,144,146,147,149,150,151,153,154,155,157,158,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,192,193,193,194,195,195,196,197,197,198,199,199,200,201,201,202,203,203,204,205,205,206,207,207,208,209,209,210,211,211,212,213,213,214,215,215,216,217,217,218,219,219,220,221,221,222,223,223,224,225,225,226,227,227,228,229,229,230,231,231,232,233,233,234,235,235,236,237,237,238,239,239,240,241,241,242,243,243,244,245,245,246,247,247,248,249,249,250,251,251,252,253,253,254,255];class GA extends NA{constructor(e,t,n,r){super(e,jA,n,r),this.lightLevel=.1,this.rednessLevel=.5,this.mskin_he_max=175/180*3.141593,this.mskin_he_min=115/180*3.141593,this.mskin_hc_max=173/180*3.141593,this.mskin_hc_min=116/180*3.141593,this.mskin_hc_axis=2.04203545,this.mfacts_rotate_ge=this.mfacts_rotate_le=this.mfacts_rotate_c=0,this.tab_addr=null,this.lutTextures=[],this.inputTexture=t,this.init()}setUniforms(){var e=this.gl.getUniformLocation(this.program,"u_flipY"),t=this.gl.getUniformLocation(this.program,"u_denoiseLevel");this.gl.uniform1f(t,this.denoiseLevel),this.gl.uniform1f(e,1),e=this.gl.getUniformLocation(this.program,"light"),this.gl.uniform1f(e,this.lightLevel),e=this.gl.getUniformLocation(this.program,"redness"),this.gl.uniform1f(e,this.rednessLevel),e=this.gl.getUniformLocation(this.program,"skin_he_max"),t=this.gl.getUniformLocation(this.program,"skin_he_min");var n=this.gl.getUniformLocation(this.program,"skin_hc_max"),r=this.gl.getUniformLocation(this.program,"skin_hc_min");let i=this.gl.getUniformLocation(this.program,"skin_hc_axis"),o=this.gl.getUniformLocation(this.program,"facts_rotate_c"),a=this.gl.getUniformLocation(this.program,"facts_rotate_le"),s=this.gl.getUniformLocation(this.program,"facts_rotate_ge");for(this.gl.uniform1f(e,this.mskin_he_max),this.gl.uniform1f(t,this.mskin_he_min),this.gl.uniform1f(n,this.mskin_hc_max),this.gl.uniform1f(r,this.mskin_hc_min),this.gl.uniform1f(i,this.mskin_hc_axis),this.gl.uniform1f(o,this.mfacts_rotate_c),this.gl.uniform1f(a,this.mfacts_rotate_le),this.gl.uniform1f(s,this.mfacts_rotate_ge),e=this.gl.getUniformLocation(this.program,"u_originImage"),this.gl.activeTexture(this.gl.TEXTURE2),this.gl.bindTexture(this.gl.TEXTURE_2D,this.inputTexture),this.gl.uniform1i(e,2),e=["lighten_lut"],t=[this.gl.TEXTURE3],n=0;n<e.length;n++)r=this.gl.getUniformLocation(this.program,e[n]),this.gl.activeTexture(t[n]),this.gl.bindTexture(this.gl.TEXTURE_2D,this.lutTextures[n]),this.gl.uniform1i(r,n+3)}setParameters(e){void 0!==e.denoiseLevel&&(this.denoiseLevel=e.denoiseLevel),void 0!==e.lightLevel&&(this.lightLevel=e.lightLevel),void 0!==e.rednessLevel&&(this.rednessLevel=e.rednessLevel,this.updateRedness(this.rednessLevel)),e.lighteningContrastLevel&&this.updateLut(e.lighteningContrastLevel)}init(){this.tab_addr=new Uint8Array(FA);let e=[this.tab_addr],t=[256],n=[1];for(let r=0;r<e.length;r++){let i=this.gl.createTexture();if(!i)throw new Rl(Yu.WEBGL_INTERNAL_ERROR,"create lut texture failed");this.gl.bindTexture(this.gl.TEXTURE_2D,i),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.LUMINANCE,t[r],n[r],0,this.gl.LUMINANCE,this.gl.UNSIGNED_BYTE,e[r]),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.lutTextures.push(i)}}updateRedness(e){var t=e;1<e&&(e=1),0>e&&(e=0),1<t&&(t=1),0>t&&(t=0),this.mfacts_rotate_c=.8*e,.8>t&&(t=0),this.mskin_he_max=175/180*3.141593,this.mskin_hc_max=173/180*3.141593,this.mskin_he_min=(115-4*t)/180*3.141593,this.mskin_hc_min=(116-4*t)/180*3.141593,this.mskin_hc_axis=(117-4*t)/180*3.141593,this.mskin_hc_axis<this.mskin_hc_min&&(this.mskin_hc_axis=this.mskin_hc_min),1.5707965>this.mskin_hc_min&&(this.mskin_hc_min=1.5707965),1.5707965>this.mskin_hc_axis&&(this.mskin_hc_axis=1.5707965),1.5707965>this.mskin_he_min&&(this.mskin_he_min=1.5707965),3.141593<this.mskin_hc_max&&(this.mskin_hc_max=3.141593),3.141593<this.mskin_hc_axis&&(this.mskin_hc_axis=3.141593),3.141593<this.mskin_he_max&&(this.mskin_he_max=3.141593),e=this.mskin_he_max-this.mskin_hc_max,t=this.mskin_hc_max-this.mskin_hc_axis,this.mfacts_rotate_ge=.01<e?this.mfacts_rotate_c*t/e:this.mfacts_rotate_c,e=this.mskin_hc_min-this.mskin_he_min,t=this.mskin_hc_axis-this.mskin_hc_min,this.mfacts_rotate_le=.01<e?this.mfacts_rotate_c*t/e:this.mfacts_rotate_c}updateLut(e){var t=null;if(0===e&&(t=FA),1===e&&(t=QA),2===e&&(t=UA),!t)throw new Rl(Yu.WEBGL_INTERNAL_ERROR,"invalid ylut_table value:"+e);this.tab_addr=new Uint8Array(t),e=[this.tab_addr],t=[256];let n=[1];for(let r=0;r<e.length;r++)this.gl.bindTexture(this.gl.TEXTURE_2D,this.lutTextures[r]),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.LUMINANCE,t[r],n[r],0,this.gl.LUMINANCE,this.gl.UNSIGNED_BYTE,e[r])}}class qA{constructor(){this.canvas=this.gl=null,this.programs=[],this.inputTexture=this.commonProgram=null,this.outputTextures=[],this.fbos=[],this.originalFrameHeight=this.originalFrameWidth=0,this.enableBeauty=!1,this.denoiseLevel=5,this.lightLevel=.35,this.rednessLevel=.5,this.lighteningContrastLevel=1}setEnableBeauty(e){this.enableBeauty=!!e}init(e,t,n){if(!Th.supportWebGL)throw new Rl(Yu.NOT_SUPPORTED,"your browser is not support webGL");if(this.gl=n.getContext("webgl"),!this.gl)throw new Rl(Yu.WEBGL_INTERNAL_ERROR,"can not get webgl context");if(this.initGL(e,t),!this.inputTexture)throw new Rl(Yu.WEBGL_INTERNAL_ERROR,"can not find input texture");this.canvas=n,this.programs.push(new OA(this.gl)),this.programs.push(new DA(this.gl,e,t)),this.programs.push(new PA(this.gl,e,t)),this.programs.push(new MA(this.gl,e,t)),this.programs.push(new GA(this.gl,this.inputTexture,e,t)),this.commonProgram=this.programs[0].program,this.setDenoiseLevel(this.denoiseLevel),this.setLightLevel(this.lightLevel),this.setRednessLevel(this.rednessLevel),this.setContrastLevel(this.lighteningContrastLevel)}render(e){if(this.gl&&this.commonProgram&&this.canvas){var t=0;if(this.originalFrameHeight===e.videoWidth&&this.originalFrameWidth===e.videoHeight)t=2;else if(this.originalFrameHeight!==e.videoHeight||this.originalFrameWidth!==e.videoWidth){var n,r,i;if(Tl.debug(_i(n=_i(r=_i(i="beauty effect: resolution changed ".concat(this.originalFrameWidth,"x")).call(i,this.originalFrameHeight," -> ")).call(r,e.videoWidth,"x")).call(n,e.videoHeight)),0===e.videoHeight||0===e.videoWidth)return void Tl.debug("beauty effect: skip 0 resolution frame");this.canvas.width=e.videoWidth,this.canvas.height=e.videoHeight,e.setAttribute("width",e.videoWidth.toString()),e.setAttribute("height",e.videoHeight.toString()),this.release(),this.init(e.videoWidth,e.videoHeight,this.canvas)}for(this.gl.viewport(0,0,e.videoWidth,e.videoHeight),this.gl.bindTexture(this.gl.TEXTURE_2D,this.inputTexture),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,e),e=this.enableBeauty?this.programs.length-1:0,n=0;n<=e;n++)r=this.programs[n].program,this.gl.useProgram(r),r=this.gl.getUniformLocation(r,"u_image"),this.programs[n].setUniforms(),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.fbos[t+n%2]),this.gl.clearColor(0,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.drawArrays(this.gl.TRIANGLES,0,6),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,this.outputTextures[t+n%2]),this.gl.uniform1i(r,0);this.gl.useProgram(this.commonProgram),t=this.gl.getUniformLocation(this.commonProgram,"u_flipY"),this.gl.uniform1f(t,-1),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this.gl.clearColor(0,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.drawArrays(this.gl.TRIANGLES,0,6)}else Tl.warning("video effect manager is not init!")}setDenoiseLevel(e){var t;Oa(t=this.programs).call(t,(t=>{t instanceof NA&&t.setParameters({denoiseLevel:e})})),this.denoiseLevel=e}setLightLevel(e){var t;Oa(t=this.programs).call(t,(t=>{t instanceof NA&&t.setParameters({lightLevel:e})})),this.lightLevel=e}setRednessLevel(e){var t;Oa(t=this.programs).call(t,(t=>{t instanceof NA&&t.setParameters({rednessLevel:e})})),this.rednessLevel=e}setContrastLevel(e){var t;Oa(t=this.programs).call(t,(t=>{t instanceof NA&&t.setParameters({lighteningContrastLevel:e})})),this.lighteningContrastLevel=e}setSize(e,t){var n;Oa(n=this.programs).call(n,(n=>{n instanceof NA&&n.setSize(e,t)}))}release(){this.inputTexture=this.commonProgram=this.gl=null,this.programs=[],this.outputTextures=[],this.fbos=[]}initGL(e,t){if(!this.gl)throw new Rl(Yu.WEBGL_INTERNAL_ERROR,"can not find webgl context");this.inputTexture=this.gl.createTexture(),this.gl.bindTexture(this.gl.TEXTURE_2D,this.inputTexture),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR);for(let n=0;4>n;n++){let r=this.gl.createTexture();if(!r)throw new Rl(Yu.WEBGL_INTERNAL_ERROR,"create texture failed");this.gl.bindTexture(this.gl.TEXTURE_2D,r),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),2>n?this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,e,t,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,null):this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,t,e,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,null);let i=this.gl.createFramebuffer();if(!i)throw new Rl(Yu.WEBGL_INTERNAL_ERROR,"create frame buffer failed");this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,i),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,r,0),this.outputTextures.push(r),this.fbos.push(i)}this.gl.viewport(0,0,e,t),this.originalFrameWidth=e,this.originalFrameHeight=t}}class VA{constructor(){this.recordedFrameCount=this.targetFrameRate=0,this.recordingTime=2}async startRecordBeautyEffectOutput(e,t=4){if(this.recordID)throw new Rl(Yu.UNEXPECTED_ERROR,"another beauty effect recording is in progress");let n=Lt(6,"");return this.recordID=n,this.targetFrameRate=e,this.recordedFrameCount=0,this.recordingTime=t,await xt(1e3*this.recordingTime),this.recordID!==n?(this.recordID=void 0,!0):(this.recordID=void 0,this.recordedFrameCount<this.targetFrameRate*this.recordingTime/2?(Tl.warning("detect beauty effect overload, current framerate",this.recordedFrameCount/2),!1):(Tl.debug("beauty effect current framerate",this.recordedFrameCount/2),!0))}stopRecordBeautyEffectOutput(){this.recordedFrameCount=this.targetFrameRate=0,this.recordID=void 0}addFrame(){this.recordID&&(this.recordedFrameCount+=1)}}class KA extends class{get output(){return this._output}async setInput(e){if(e!==this.input){if(e.kind!==this.kind)throw new Rl(Yu.UNEXPECTED_ERROR);this.input&&this.removeInput(),this.input=e,await this._setInput(e)}}removeInput(){this.input=void 0,this._removeInput()}async updateOutput(e){this.output!==e&&(this._output=e,this.onOutputChange&&await this.onOutputChange())}replaceOriginMediaStream(e,t){var n,r;let i=Wc(n=e.getTracks()).call(n,(e=>e.kind===this.kind));i&&e.removeTrack(i),t=Wc(r=t.getTracks()).call(r,(e=>e.kind===this.kind)),void 0===this.output&&t&&e.addTrack(t),this.output&&(Tl.debug("replace ".concat(this.output.kind," track to origin media stream")),e.addTrack(this.output))}}{constructor(){super(),this.kind="video",this.fps=15,this.overloadDetector=new VA,this.enabled=!1,this.stopChromeBackgroundLoop=null,this.lastRenderTime=0,this.fps=30,this.manager=new qA}async setBeautyEffectOptions(e,t){void 0!==t.smoothnessLevel&&De(t.smoothnessLevel,"options.smoothnessLevel",0,1,!1),void 0!==t.lighteningLevel&&De(t.lighteningLevel,"options.lighteningLevel",0,1,!1),void 0!==t.rednessLevel&&De(t.rednessLevel,"options.rednessLevel",0,1,!1),void 0!==t.lighteningContrastLevel&&xe(t.lighteningContrastLevel,"options.lighteningContrastLevel",[0,1,2]),void 0!==t.smoothnessLevel&&this.manager.setDenoiseLevel(Math.max(.1,10*t.smoothnessLevel)),void 0!==t.lighteningLevel&&this.manager.setLightLevel(Math.max(.1,t.lighteningLevel/2)),void 0!==t.rednessLevel&&this.manager.setRednessLevel(Math.max(.01,t.rednessLevel)),void 0!==t.lighteningContrastLevel&&this.manager.setContrastLevel(t.lighteningContrastLevel),this.enabled!==e&&(this.manager.setEnableBeauty(e),this.enabled=e,e?this.input&&await this.startEffect():await this.stopEffect())}destroy(){this.onOutputChange=void 0,this.stopEffect(),this.enabled=!1}async startEffect(){let e=J();if(!this.input)return void Tl.warning("video track is null, fail to start video effect!");if(this.input&&this.output&&this.input!==this.output)return void Tl.warning("video effect is already enabled");let t=await this.renderWithWebGL();await this.updateOutput(t),Tl.info("start video effect, output:",this.output),this.overloadDetector.startRecordBeautyEffectOutput(this.fps).then((e=>{e||this.onOverload&&this.onOverload()}));let n=()=>{this.enabled&&requestAnimationFrame(n);const e=tl(),t=1e3/this.fps,r=this.lastRenderTime?e-this.lastRenderTime:t;r<t||(this.lastRenderTime=e-(r-t),this.video&&this.video.paused&&this.video.play(),this.enabled&&this.video&&(this.manager.render(this.video),this.output&&this.output.requestFrame&&this.output.requestFrame(),this.overloadDetector.addFrame()))};requestAnimationFrame(n),e.name===Au.CHROME&&document.addEventListener("visibilitychange",(()=>{document.hidden?this.stopChromeBackgroundLoop=it((()=>{this.enabled&&this.video&&this.manager.render(this.video),this.output&&this.output.requestFrame&&this.output.requestFrame(),this.overloadDetector.addFrame()}),this.fps):this.stopChromeBackgroundLoop&&(this.stopChromeBackgroundLoop(),this.stopChromeBackgroundLoop=null)}),!1)}async stopEffect(){Tl.info("stop video effect"),this.overloadDetector.stopRecordBeautyEffectOutput(),this.manager.release(),this.canvas&&this.canvas.remove(),this.video&&this.video.remove(),this.video=this.canvas=void 0,await this.updateOutput(this.input)}async _setInput(e){this.enabled&&!this.video&&await this.startEffect()}_removeInput(){this.stopEffect()}async renderWithWebGL(){var e;if(!this.input)throw new Rl(Yu.BEAUTY_PROCESSOR_INTERNAL_ERROR,"can not renderWithWebGL, no input");this.canvas&&(this.canvas.remove(),this.canvas=void 0),this.video&&(this.video.remove(),this.video=void 0),this.canvas=document.createElement("canvas"),this.video=document.createElement("video"),this.video.setAttribute("autoplay",""),this.video.setAttribute("muted",""),this.video.muted=!0,this.video.setAttribute("playsinline",""),this.video.setAttribute("style","display:none"),this.video.srcObject=new MediaStream([this.input]);var t=new wc((e=>{const t=()=>{this.video&&this.video.removeEventListener("playing",t),e(void 0)};this.video&&this.video.addEventListener("playing",t)}));this.video.play(),await t;let n=(t=this.input.getSettings()).width||this.video.videoWidth,r=t.height||this.video.videoHeight;if(t.frameRate&&this.fps!==t.frameRate&&(this.fps=t.frameRate,Tl.debug("beauty video processor: set fps to",this.fps)),Tl.debug(_i(e="beauty video processor: width ".concat(n," height ")).call(e,r)),!n||!r)throw new Rl(Yu.BEAUTY_PROCESSOR_INTERNAL_ERROR,"can not get track resolution");return this.canvas.width=n,this.canvas.height=r,this.video.setAttribute("width",n.toString()),this.video.setAttribute("height",r.toString()),this.manager.init(n,r,this.canvas),this.canvas.captureStream(Th.supportRequestFrame?0:this.fps).getVideoTracks()[0]}}var HA=function(e,t,n,r){var i,o=arguments.length,a=3>o?t:null===r?r=ns(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;0<=s;s--)(i=e[s])&&(a=(3>o?i(a):3<o?i(t,n,a):i(t,n))||a);return 3<o&&a&&qa(t,n,a),a},WA=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};class zA extends xd{constructor(e,t,n,r,i){super(e,i),this.trackMediaType="video",this._scalabiltyMode={numSpatialLayers:1,numTemporalLayers:1},this._enabled=!0,this.updateMediaStreamTrackResolution(),this._encoderConfig=t,this._scalabiltyMode=n,this._optimizationMode=r}get isPlaying(){return!(!this._player||this._player.videoElementStatus!==Ol.PLAYING)}play(e,t={}){let n=Rd.reportApiInvoke(null,{tag:Bl.TRACER,name:Pl.LOCAL_VIDEO_TRACK_PLAY,options:[this.getTrackId(),"string"==typeof e?e:"HTMLElement",t]});if(!(e instanceof HTMLElement)){let t=document.getElementById(e.toString());var r;t?e=t:(Tl.warning(_i(r="[".concat(this.getTrackId(),'] can not find "#')).call(r,e,'" element, use document.body')),e=document.body)}Tl.debug("[".concat(this.getTrackId(),"] start video playback"),Fr(t)),e=En({},this._getDefaultPlayerConfig(),{},t,{trackId:this.getTrackId(),element:e}),this._player?this._player.updateConfig(e):(this._player=new CA(e),this._player.updateVideoTrack(this._mediaStreamTrack)),this._player.play(),n.onSuccess()}stop(){let e=Rd.reportApiInvoke(null,{tag:Bl.TRACER,name:Pl.LOCAL_VIDEO_TRACK_STOP,options:[this.getTrackId()]});if(!this._player)return e.onSuccess();this._player.destroy(),this._player=void 0,Tl.debug("[".concat(this.getTrackId(),"] stop video playback")),e.onSuccess()}async setEnabled(e,t){if(!t){if(e===this._enabled)return;this.stateCheck("enabled",e)}Tl.info("[".concat(this.getTrackId(),"] start setEnabled"),e);let n=await this._enabledMutex.lock();if(!e){this._originMediaStreamTrack.enabled=!1;try{await jt(this,Ah.NEED_REMOVE_TRACK,this)}catch(e){throw Tl.error("[".concat(this.getTrackId(),"] setEnabled to false error"),e.toString()),n(),e}return t||(this._enabled=!1),Tl.info("[".concat(this.getTrackId(),"] setEnabled to false success")),n()}this._originMediaStreamTrack.enabled=!0;try{await jt(this,Ah.NEED_ADD_TRACK,this)}catch(e){throw Tl.error("[".concat(this.getTrackId(),"] setEnabled to true error"),e.toString()),n(),e}Tl.info("[".concat(this.getTrackId(),"] setEnabled to true success")),t||(this._enabled=!0),n()}async setMuted(e){var t;if(e!==this._muted){if(this.stateCheck("muted",e),this._muted=e,J().name===Au.FIREFOX)return Tl.debug("[".concat(this.getTrackId(),"] firefox set mute fallback to set enabled")),void await this.setEnabled(!e,!0);this._mediaStreamTrack.enabled=!e,Tl.debug(_i(t="[".concat(this.getTrackId(),"] start set muted: ")).call(t,e)),await jt(this,Ah.SET_VIDEO_TRACK_MUTED,{track:this,muted:e})}}getStats(){return Vt((()=>{Tl.warning("[deprecated] LocalVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalVideoStats instead")}),"localVideoTrackGetStatsWarning"),Ut(this,Ah.GET_STATS)||En({},eh)}async setBeautyEffect(e,t={}){let n=Rd.reportApiInvoke(null,{tag:Bl.TRACER,name:Pl.LOCAL_VIDEO_TRACK_BEAUTY,options:[this.getTrackId(),e,t]});if(e||this._videoBeautyProcessor){if(J().os===gu.IOS||J().os===gu.ANDROID)throw e=new Rl(Yu.INVALID_OPERATION,"can not enable beauty effect on mobile device"),n.onError(e),e;if(!this._enabled&&e)throw e=new Rl(Yu.TRACK_IS_DISABLED,"can not enable beauty effect when track is disabled"),n.onError(e),e;Tl.info("[".concat(this.getTrackId(),"] start setBeautyEffect"),e,Fr(t));try{this._videoBeautyProcessor?await this._videoBeautyProcessor.setBeautyEffectOptions(e,t):(this._videoBeautyProcessor=new KA,this._videoBeautyProcessor.onOverload=()=>{qt((()=>this.emit(mh.BEAUTY_EFFECT_OVERLOAD)))},await this._videoBeautyProcessor.setBeautyEffectOptions(e,t),await this._registerTrackProcessor(this._videoBeautyProcessor))}catch(e){throw Tl.error("[".concat(this.getTrackId(),"] setBeautyEffect error"),e.toString()),n.onError(e),e}Tl.info("[".concat(this.getTrackId(),"] setBeautyEffect success")),n.onSuccess()}}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}clone(e,t,n,r){let i=this._mediaStreamTrack.clone();return new zA(i,e,t,n,r)}async setBitrateLimit(e){var t;if(Tl.debug(_i(t="[".concat(this.getTrackId(),"] set bitrate limit, ")).call(t,Fr(e))),e){this._forceBitrateLimit=e,this._encoderConfig&&(this._encoderConfig.bitrateMax?this._encoderConfig.bitrateMax=this._encoderConfig.bitrateMax<e.max_bitrate?this._encoderConfig.bitrateMax:e.max_bitrate:this._encoderConfig.bitrateMax=e.max_bitrate,this._encoderConfig.bitrateMin,this._encoderConfig.bitrateMin=e.min_bitrate);try{await jt(this,Ah.NEED_RESET_REMOTE_SDP)}catch(e){return e.throw()}}}async setOptimizationMode(e){var t;if("motion"===e||"detail"===e||"balanced"===e){try{this._optimizationMode=e,await jt(this,Ah.SET_OPTIMIZATION_MODE,e)}catch(e){throw Tl.error("[".concat(this.getTrackId(),"] set optimization mode failed"),e.toString()),e}Tl.info(_i(t="[".concat(this.getTrackId(),"] set optimization mode success (")).call(t,e,")"))}else Tl.error(Yu.INVALID_PARAMS,"optimization mode must be motion, detail or balanced")}setScalabiltyMode(e){var t;if(1===e.numSpatialLayers&&1!==e.numTemporalLayers)return Tl.error(Yu.INVALID_PARAMS,"scalability mode currently not supported, no SVC."),void(this._scalabiltyMode={numSpatialLayers:1,numTemporalLayers:1});this._scalabiltyMode=e,Tl.info(_i(t="[".concat(this.getTrackId(),"] set scalability mode success (")).call(t,e,")"))}updateMediaStreamTrackResolution(){Pt(this._originMediaStreamTrack).then((([e,t])=>{this._videoHeight=t,this._videoWidth=e})).catch(lf)}_updatePlayerSource(){this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}_getDefaultPlayerConfig(){return{fit:"contain"}}async renewMediaStreamTrack(){}}HA([pt(),WA("design:type",Function),WA("design:paramtypes",[Object,Object]),WA("design:returntype",void 0)],zA.prototype,"play",null),HA([pt(),WA("design:type",Function),WA("design:paramtypes",[Boolean,Boolean]),WA("design:returntype",wc)],zA.prototype,"setEnabled",null),HA([pt(),et({report:Rd}),WA("design:type",Function),WA("design:paramtypes",[Boolean]),WA("design:returntype",wc)],zA.prototype,"setMuted",null),HA([pt(),WA("design:type",Function),WA("design:paramtypes",[]),WA("design:returntype",Object)],zA.prototype,"getStats",null),HA([pt(),WA("design:type",Function),WA("design:paramtypes",[Boolean,Object]),WA("design:returntype",wc)],zA.prototype,"setBeautyEffect",null),HA([pt(),WA("design:type",Function),WA("design:paramtypes",[]),WA("design:returntype",ImageData)],zA.prototype,"getCurrentFrameData",null),HA([pt(),WA("design:type",Function),WA("design:paramtypes",[Object]),WA("design:returntype",wc)],zA.prototype,"setBitrateLimit",null),HA([pt(),WA("design:type",Function),WA("design:paramtypes",[String]),WA("design:returntype",wc)],zA.prototype,"setOptimizationMode",null),HA([pt(),WA("design:type",Function),WA("design:paramtypes",[Object]),WA("design:returntype",void 0)],zA.prototype,"setScalabiltyMode",null),HA([pt(),WA("design:type",Function),WA("design:paramtypes",[]),WA("design:returntype",void 0)],zA.prototype,"updateMediaStreamTrackResolution",null);class YA extends zA{constructor(e,t,n,r,i,o){super(e,t.encoderConfig?le(t.encoderConfig):{},r,i,o),this._enabled=!0,this._deviceName="default",this.tryResumeVideoForIOS15WeChat=async()=>{ie()&&J().name===Au.WECHAT&&this._enabled&&!this._isClosed&&(Tl.debug("[".concat(this.getTrackId(),"] try capture camera media device for interrupted iOS 15 device on WeChat.")),await this.setEnabled(!1),await this.setEnabled(!0))},this._config=t,this._constraints=n,this._deviceName=e.label,this._config.encoderConfig&&(this._encoderConfig=le(this._config.encoderConfig)),Bd.on(Dd.IOS_15_INTERRUPTION_END,this.tryResumeVideoForIOS15WeChat),Bd.on(Dd.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15WeChat)}async setDevice(e){var t;let n=Rd.reportApiInvoke(null,{tag:Bl.TRACER,name:Pl.CAM_VIDEO_TRACK_SET_DEVICE,options:[this.getTrackId(),e]});if(Tl.info(_i(t="[".concat(this.getTrackId(),"] set device to ")).call(t,e)),this._enabled)try{let n=await Vd.getDeviceById(e);(t={}).video=En({},this._constraints),t.video.deviceId={exact:e},t.video.facingMode=void 0,this._originMediaStreamTrack.stop();let r=null;try{r=await ut(t,this.getTrackId())}catch(e){throw Tl.error("[".concat(this.getTrackId(),"] setDevice failed"),e.toString()),r=await ut({video:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(r.getVideoTracks()[0],!1),e}await this._updateOriginMediaStreamTrack(r.getVideoTracks()[0],!1),this.updateMediaStreamTrackResolution(),this._deviceName=n.label,this._config.cameraId=e,this._constraints.deviceId={exact:e}}catch(e){throw n.onError(e),Tl.error("[".concat(this.getTrackId(),"] setDevice error"),e.toString()),e}else try{this._deviceName=(await Vd.getDeviceById(e)).label,this._config.cameraId=e,this._constraints.deviceId={exact:e}}catch(e){throw n.onError(e),Tl.error("[".concat(this.getTrackId(),"] setDevice error"),e.toString()),e}Tl.info("[".concat(this.getTrackId(),"] setDevice success")),n.onSuccess()}async setEnabled(e,t){if(!t){if(e===this._enabled)return;this.stateCheck("enabled",e)}Tl.info("[".concat(this.getTrackId(),"] start setEnabled"),e);let n=await this._enabledMutex.lock();if(!e){this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop(),t||(this._enabled=!1);try{await jt(this,Ah.NEED_REMOVE_TRACK,this)}catch(e){throw Tl.error("[".concat(this.getTrackId(),"] setEnabled to false error"),e.toString()),n(),e}return Tl.info("[".concat(this.getTrackId(),"] setEnabled to false success")),n()}e=En({},this._constraints);let r=Vd.searchDeviceIdByName(this._deviceName);r&&!e.deviceId&&(e.deviceId={exact:r});try{let e=await ut({video:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(e.getVideoTracks()[0],!1),await jt(this,Ah.NEED_ADD_TRACK,this)}catch(e){throw Tl.error("[".concat(this.getTrackId(),"] setEnabled true error"),e.toString()),n(),e}this.updateMediaStreamTrackResolution(),Tl.info("[".concat(this.getTrackId(),"] setEnabled to true success")),t||(this._enabled=!0),n()}async setEncoderConfiguration(e,t){if(t=Rd.reportApiInvoke(null,{tag:Bl.TRACER,name:Pl.CAM_VIDEO_TRACK_SET_ENCODER_CONFIG,options:[this.getTrackId(),e]}),!this._enabled)throw e=new Rl(Yu.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled"),t.onError(e),e;e=le(e),this._forceBitrateLimit&&(e.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:e.bitrateMax,e.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:e.bitrateMin);let n=(r=this._config,JSON.parse(Fr(r)));var r;n.encoderConfig=e,r=yn(n),(te()||re()||se())&&(r.deviceId=void 0),Tl.debug("[".concat(this.getTrackId(),"] setEncoderConfiguration applyConstraints"),Fr(e),Fr(r));try{await this._originMediaStreamTrack.applyConstraints(r),this.updateMediaStreamTrackResolution()}catch(n){throw e=new Rl(Yu.UNEXPECTED_ERROR,n.toString()),Tl.error("[".concat(this.getTrackId(),"] applyConstraints error"),e.toString()),t.onError(e),e}this._config=n,this._constraints=r,this._encoderConfig=e;try{await jt(this,Ah.NEED_RENEGOTIATE)}catch(e){return t.onError(e),e.throw()}t.onSuccess()}_getDefaultPlayerConfig(){return{mirror:!0,fit:"cover"}}onTrackEnded(){if((re()||se())&&this._enabled&&!this._isClosed&&Bd.duringInterruption){let e=async()=>{Bd.off(Dd.IOS_INTERRUPTION_END,e),this._enabled&&!this._isClosed&&(Tl.debug("[".concat(this.getTrackId(),"] try capture camera media device for interrupted iOS device.")),await this.setEnabled(!1),await this.setEnabled(!0))};Bd.on(Dd.IOS_INTERRUPTION_END,e)}else Tl.debug("[".concat(this.getTrackId(),"] track ended")),this.emit(mh.TRACK_ENDED)}async renewMediaStreamTrack(){var e=En({},this._constraints);let t=Vd.searchDeviceIdByName(this._deviceName);t&&!e.deviceId&&(e.deviceId={exact:t}),e=await ut({video:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(e.getVideoTracks()[0],!0),this.updateMediaStreamTrackResolution()}close(){super.close(),Bd.off(Dd.IOS_15_INTERRUPTION_END,this.tryResumeVideoForIOS15WeChat),Bd.off(Dd.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15WeChat)}}HA([pt(),WA("design:type",Function),WA("design:paramtypes",[String]),WA("design:returntype",wc)],YA.prototype,"setDevice",null),HA([pt(),WA("design:type",Function),WA("design:paramtypes",[Boolean,Boolean]),WA("design:returntype",wc)],YA.prototype,"setEnabled",null),HA([pt(),WA("design:type",Function),WA("design:paramtypes",[Object,Boolean]),WA("design:returntype",wc)],YA.prototype,"setEncoderConfiguration",null);var JA=!0;"findIndex"in[]&&Array(1).findIndex((function(){JA=!1})),kr({target:"Array",proto:!0,forced:JA},{findIndex:function(e){return Xi(this,e,1<arguments.length?arguments[1]:void 0)}});var XA=mi("Array").findIndex,ZA=Array.prototype,$A=function(e){var t=e.findIndex;return e===ZA||e instanceof Array&&t===ZA.findIndex?XA:t};let ev=(e,t)=>{let n=null;if("h264"===t?n=e.match(/a=rtpmap:(\d+) H264.*\r\n/)||e.match(/a=rtpmap:(\d+) H264.*\n/):"vp8"===t?n=e.match(/a=rtpmap:(\d+) VP8.*\r\n/)||e.match(/a=rtpmap:(\d+) VP8.*\n/):"vp9"===t?n=e.match(/a=rtpmap:(\d+) VP9.*\r\n/)||e.match(/a=rtpmap:(\d+) VP9.*\n/):"av1"===t&&(n=e.match(/a=rtpmap:(\d+) AV1.*\r\n/)||e.match(/a=rtpmap:(\d+) AV1.*\n/)),n&&n[1])return n[1]};class tv extends IA{constructor(e,t,n,r){super(t,t.stringUid||t.uid),this.suspendTracks=[],this.type="pub",this._waitingSuccessResponse=this.detecting=!1,this.handleMuteVideoTrack=({muted:e},t,n)=>{this.setVideoTrackMuteState(e).then(t).catch(n)},this.handleMuteAudioTrack=({track:e,muted:t},n,r)=>{this.setAudioTrackMuteState(t,e).then(n).catch(r)},this.renegotiateWithGateway=async()=>(Tl.debug("[pc-".concat(this.pc.ID,"] renegotiate start")),new wc((async(e,t)=>{this.connectionState="connecting";let n=r=>{"connected"===r&&(this.off(Xl.CONNECTION_STATE_CHANGE,n),e()),"disconnected"===r&&(this.off(Xl.CONNECTION_STATE_CHANGE,n),t(new Rl(Yu.OPERATION_ABORTED,"renegotiate abort")))};this.on(Xl.CONNECTION_STATE_CHANGE,n),ne()&&Mu.SIMULCAST&&this.videoTrack&&this.videoTrack._scalabiltyMode&&await this.addSimulcast4Firefox(this.videoTrack._scalabiltyMode);var r=await this.pc.createOfferSDP();this.audioTrack&&this.audioTrack._encoderConfig&&(r=In(r,this.audioTrack._encoderConfig)),this.videoTrack&&this.videoTrack._scalabiltyMode&&("vp9"!==this.codec&&"vp8"!==this.codec?(this.videoTrack._scalabiltyMode.numSpatialLayers=1,this.videoTrack._scalabiltyMode.numTemporalLayers=1):(1<this.videoTrack._scalabiltyMode.numSpatialLayers||1<this.videoTrack._scalabiltyMode.numTemporalLayers)&&(r=Sn(r,this.codec,this.videoTrack._scalabiltyMode)),Tl.debug("renegoation spatial layers: ",this.videoTrack._scalabiltyMode.numSpatialLayers)),await this.pc.setOfferSDP(r),this.audioTrack instanceof of&&this.pc.onOfferSettled({videoActive:this.videoTrack&&!this.videoTrack.muted,audioActive:this.audioTrack&&this.audioTrack.isActive});let i=await Mt(this,Xl.NEED_RENEGOTIATE,r);this.videoTrack&&!ne()&&Mu.SIMULCAST&&this.videoTrack._scalabiltyMode&&this.setSimulcastVideoRtpEncodingParameters(this.videoTrack._scalabiltyMode),r=function(e,t){var n,r,i;const o=Zc(n=RegExp.prototype.test).call(n,/^([a-z])=(.*)/);e=os(r=e.split(/(\r\n|\r|\n)/)).call(r,o),t=os(i=t.split(/(\r\n|\r|\n)/)).call(i,o);let a=null;const s=new pa;return Oa(e).call(e,(e=>{const t=e.match(/m=(audio|video)/);t&&t[1]?a=t[1]:a&&(e=e.match(/=(sendrecv|recvonly|sendonly|inactive)/))&&e[1]&&s.set(a,e[1])})),a=null,Sc(t).call(t,(e=>{var t=e.match(/m=(audio|video)/);if(t&&t[1])return a=t[1],e;if(!a)return e;if((t=e.match(/=(sendrecv|recvonly|sendonly|inactive)/))&&t[1]){const n=s.get(a);if(n&&n!==t[1])return e.replace(t[1],n)}return e})).join("\r\n")+"\r\n"}(r,this.updateAnswerSDP(i.sdp)),await this.pc.setAnswerSDP(r),Tl.debug("[pc-".concat(this.pc.ID,"] renegotiate success")),this.connectionState="connected"}))),this.handleStreamRenegotiate=(e,t)=>{"connected"===this.connectionState?this.renegotiateWithGateway().then(e).catch(t):e()},this.handleReplaceTrack=(e,t,n)=>{if(this.audioTrack instanceof of&&"audio"===e.kind)return t();this.pc.replaceTrack(e).then((e=>e?this.renegotiateWithGateway():wc.resolve())).then(t).catch(n)},this.handleCloseAudioTrack=e=>{},this.handleCloseVideoTrack=()=>{this.lowStreamConnection&&this.lowStreamConnection.videoTrack&&this.lowStreamConnection.videoTrack.close()},this.handleGetSessionID=e=>{e(this.joinInfo.sid)},this.handleGetLocalVideoStats=e=>{e(this.statsCollector.getLocalVideoTrackStats(this.connectionId))},this.handleGetLocalAudioStats=e=>{e(this.statsCollector.getLocalAudioTrackStats(this.connectionId))},this.handleSetOptimizationMode=(e,t,n)=>{this.videoTrack&&this.setRtpSenderParametersByTrackConfig(this.videoTrack).then(t).catch(n)},this.isLowStreamConnection=!!r,this.codec=n,this.statsCollector=e,this.statsCollector.addLocalConnection(this)}getAllTracks(){let e=[];return this.videoTrack&&e.push(this.videoTrack),this.audioTrack&&this.audioTrack instanceof of?e=_i(e).call(e,this.audioTrack.trackList):this.audioTrack&&e.push(this.audioTrack),e.push(...this.suspendTracks),e}async addTracks(e){let t=Th;if("connecting"===this.connectionState)try{return await this.createWaitConnectionConnectedPromise(),await this.addTracks(e)}catch(e){throw new Rl(Yu.OPERATION_ABORTED,"publish abort")}var n=!1;let r=this.getAllTracks();e=Gt(e=os(e).call(e,(e=>-1===Mc(r).call(r,e))));for(let r=0;r<e.length;r+=1){var i=e[r];if(!(i instanceof xd))return new Rl(Yu.INVALID_LOCAL_TRACK).throw();if(i instanceof zA&&this.disabledVideoTrack){if(this.disabledVideoTrack!==i)return new Rl(Yu.EXIST_DISABLED_VIDEO_TRACK).throw();this.disabledVideoTrack=void 0}if(i instanceof zA&&this.videoTrack)return new Rl(Yu.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS).throw();if(i instanceof tf){if(this.audioTrack&&this.audioTrack._bypassWebAudio)throw Tl.error("One of the audio track was created with config bypassWebAudio set to true, there is no way to publish multiple audio tracks."),new Rl(Yu.CAN_NOT_PUBLISH_MULTIPLE_AUDIO_TRACKS);if(this.audioTrack instanceof of)0===this.audioTrack.trackList.length&&await this.pc.setAudioRtpEncodingParameters({active:!0}),this.audioTrack.addAudioTrack(i);else if(t.webAudioMediaStreamDest)if(i._bypassWebAudio){if(this.audioTrack)throw Tl.error("Can not publish another audio track with bypassWebAudio set to true."),new Rl(Yu.CAN_NOT_PUBLISH_MULTIPLE_AUDIO_TRACKS);Tl.debug("[".concat(this.connectionId,"] audio track doesn't not pass through WebAudio, use original audio track to publish")),n=await this.addTrackWithPC(i)}else n=new of,i.muted?this.suspendTracks.push(i):n.addAudioTrack(i),n=await this.addTrackWithPC(n);else Tl.debug("[".concat(this.connectionId,"] your browser does not support mixing track, use original audio track to publish")),n=await this.addTrackWithPC(i)}else i instanceof zA&&this.isLowStreamConnection?(n=On({},{width:160,height:120,framerate:15,bitrate:50},{},this.lowStreamParameter),t.supportDualStreamEncoding?(Tl.debug("[".concat(this.connectionId,"] creating low stream using rtp encoding.")),this.lowStreamEncoding=St(n,i),i=i.clone({bitrateMax:n.bitrate,bitrateMin:n.bitrate})):(Tl.debug("[".concat(this.connectionId,"] creating low stream using canvas.")),i=Rn(i,n),i=new zA(i,{bitrateMax:n.bitrate,bitrateMin:n.bitrate})),i._hints.push(vh.LOW_STREAM),n=await this.addTrackWithPC(i),this.bindTrackEvents(i)):(this.detecting=!0,el((()=>{this.detecting=!1}),8e3),n=await this.addTrackWithPC(i))}await this.updateControlMessage(),n&&await this.renegotiateWithGateway(),Oa(e).call(e,(e=>this.bindTrackEvents(e)))}async removeTracks(e,t){let n=this.getAllTracks();e=Gt(e=os(e).call(e,(e=>-1!==Mc(n).call(n,e)||e===this.disabledVideoTrack)));let r=[];for(let n=0;n<e.length;n+=1){let i=e[n];if(this.unbindTrackEvents(i),this.audioTrack instanceof of&&i instanceof tf)this.audioTrack.removeAudioTrack(i),Qt(this.suspendTracks,i),0===this.audioTrack.trackList.length&&(r.push(this.audioTrack),this.audioTrack=void 0);else if(i instanceof tf)r.push(i),this.audioTrack=void 0;else if(i instanceof zA){if(t){if(this.disabledVideoTrack===i)return void(this.disabledVideoTrack=void 0)}else this.disabledVideoTrack=this.videoTrack;r.push(i),this.isLowStreamConnection&&i.close(),this.videoTrack=void 0}}if(this.videoTrack||this.audioTrack){if(0!==r.length){if("connecting"===this.connectionState)try{await this.createWaitConnectionConnectedPromise()}catch(e){return}for(let t of r){var i;Tl.debug(_i(i="[".concat(this.connectionId,"] remove ")).call(i,t.trackMediaType," from pc")),await this.pc.removeTrack(t._mediaStreamTrack),"Safari"===(e=J()).name&&"11"===e.version&&await t.renewMediaStreamTrack()}await this.renegotiateWithGateway()}}else await this.closeP2PConnection()}async updateControlMessage(){this.audioTrack instanceof of&&"connected"===this.connectionState&&(this.audioTrack&&await Mt(this,Xl.NEED_CONTROL,{type:"audio",muted:!this.audioTrack.isActive}),this.videoTrack&&await Mt(this,Xl.NEED_CONTROL,{type:"video",muted:this.videoTrack.muted}))}async setSimulcastVideoRtpEncodingParameters(e){let t=this.pc.getSender("video");if(!t)throw new Rl(Yu.LOW_STREAM_ENCODING_ERROR,"Low stream has no video sender.");let n=t.getParameters();if(!n.encodings||!n.encodings[0])throw new Rl(Yu.LOW_STREAM_ENCODING_ERROR,"Low stream RtpEncodingParameters is empty.");this.videoTrack&&this.videoTrack._encoderConfig&&this.videoTrack._encoderConfig.bitrateMax&&200<this.videoTrack._encoderConfig.bitrateMax&&1<e.numSpatialLayers&&(n.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:1e3*(this.videoTrack._encoderConfig.bitrateMax-50)},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:5e4,scaleResolutionDownBy:4}]),await t.setParameters(n)}startP2PConnection(){return new wc((async(e,t)=>{if(!this.audioTrack&&!this.videoTrack)return t(new Rl(Yu.UNEXPECTED_ERROR,"no track to publish"));let n=r=>{if("connected"===r&&(this.off(Xl.CONNECTION_STATE_CHANGE,n),e()),"disconnected"===r){if(this.off(Xl.CONNECTION_STATE_CHANGE,n),this.disconnectedReason)return t(this.disconnectedReason);t(new Rl(Yu.OPERATION_ABORTED,"publish abort"))}};this.on(Xl.CONNECTION_STATE_CHANGE,n),this.disconnectedReason=void 0,this.connectionState="connecting",this._waitingSuccessResponse=!0,this.startTime=tl();try{var r;!this.pc.audioTrack&&this.audioTrack&&await this.pc.addTrack(this.audioTrack._mediaStreamTrack),!this.pc.videoTrack&&this.videoTrack&&await this.pc.addTrack(this.videoTrack._mediaStreamTrack),ne()&&Mu.SIMULCAST&&this.videoTrack&&this.videoTrack._scalabiltyMode&&await this.addSimulcast4Firefox(this.videoTrack._scalabiltyMode);let e=await this.pc.createOfferSDP();Mu.REMOVE_NEW_CODECS&&(e="vp9"===this.codec?Tn(e,["av1"]):"av1"===this.codec?Tn(e,["vp9"]):Tn(e,["vp9","av1"]));let t=wn(e);this.videoTrack&&!ru(r=t.video).call(r,this.codec.toUpperCase())&&Tl.warning("current codec is not supported, support list: ".concat(t.video.join(","))),this.audioTrack&&this.audioTrack._encoderConfig&&(e=In(e,this.audioTrack._encoderConfig)),this.videoTrack&&!ne()&&this.videoTrack._scalabiltyMode&&("vp9"!==this.codec&&"vp8"!==this.codec?(this.videoTrack._scalabiltyMode.numSpatialLayers=1,this.videoTrack._scalabiltyMode.numTemporalLayers=1):(1<this.videoTrack._scalabiltyMode.numSpatialLayers||1<this.videoTrack._scalabiltyMode.numTemporalLayers)&&(e=Sn(e,this.codec,this.videoTrack._scalabiltyMode)),Tl.debug("spatial layers: ",this.videoTrack._scalabiltyMode.numSpatialLayers)),await this.pc.setOfferSDP(e),this.audioTrack instanceof of&&this.pc.onOfferSettled({videoActive:this.videoTrack&&!this.videoTrack.muted,audioActive:this.audioTrack&&this.audioTrack.isActive}),this.videoTrack&&this.setRtpSenderParametersByTrackConfig(this.videoTrack),Tl.debug("[".concat(this.connectionId,"] create and set offer success")),r={messageType:"OFFER",sdp:e,offererSessionId:104,retry:!0},Th.supportDualStreamEncoding&&this.isLowStreamConnection&&this.lowStreamEncoding&&this.videoTrack&&await this.setLowStreamEncoding(this.lowStreamEncoding,this.videoTrack),this.videoTrack&&!ne()&&Mu.SIMULCAST&&this.videoTrack._scalabiltyMode&&this.setSimulcastVideoRtpEncodingParameters(this.videoTrack._scalabiltyMode);let n=await Mt(this,Xl.NEED_ANSWER,r),i=this.updateAnswerSDP(n.sdp);await this.pc.setAnswerSDP(i),Tl.debug("[".concat(this.connectionId,"] set answer success")),await this.icePromise,this.connectionState="connected",this.startUploadStats()}catch(e){this.off(Xl.CONNECTION_STATE_CHANGE,n),this.connectionState="disconnected",this.reportPublishEvent(!1,e.code),Tl.error("[".concat(this.connectionId,"] connection error"),e.toString()),t(e)}}))}reportPublishEvent(e,t,n){var r;this._waitingSuccessResponse=!1,Rd.publish(this.joinInfo.sid,{lts:this.startTime,succ:e,ec:t,audioName:this.audioTrack&&(this.audioTrack instanceof of?this.audioTrack.getSubTrackLabels().join(","):this.audioTrack.getTrackLabel()),videoName:this.videoTrack&&this.videoTrack.getTrackLabel(),screenshare:!(!this.videoTrack||-1===Mc(r=this.videoTrack._hints).call(r,vh.SCREEN_TRACK)),audio:!!this.audioTrack,video:!!this.videoTrack,p2pid:this.pc.ID,publishRequestid:this.ID,extend:n})}async closeP2PConnection(e){let t=this.getAllTracks();var n;Oa(t).call(t,(e=>{this.unbindTrackEvents(e)})),this.isLowStreamConnection&&this.videoTrack&&this.videoTrack.close(),this.videoTrack=void 0,this.audioTrack instanceof of&&(Oa(n=this.audioTrack.trackList).call(n,(e=>{this.audioTrack.removeAudioTrack(e)})),this.audioTrack.close()),this.audioTrack=void 0,this.stopUploadStats(),this.statsCollector.removeConnection(this.connectionId),await this.closePC(e),this.connectionState="disconnected",this.removeAllListeners()}getNetworkQuality(){var e,t=this.pc.getStats();if(!t.videoSend[0]&&!t.audioSend[0])return 1;var n=Ut(this,Xl.NEED_SIGNAL_RTT),r=t.videoSend[0]?t.videoSend[0].rttMs:void 0;let i=t.audioSend[0]?t.audioSend[0].rttMs:void 0;return r=r&&i?(r+i)/2:r||i,n=.17>(n=70*t.sendPacketLossRate/50+.3*((r&&n?(r+n)/2:r||n)||0)/1500)?1:.36>n?2:.59>n?3:.1>n?4:5,this.videoTrack&&this.videoTrack._encoderConfig&&-1===Mc(e=this.videoTrack._hints).call(e,vh.SCREEN_TRACK)&&(e=this.videoTrack._encoderConfig.bitrateMax,t=t.bitrate.actualEncoded,e&&t)?ju[.15>(t=(1e3*e-t)/(1e3*e))?0:.3>t?1:.45>t?2:.6>t?3:4][n]:n}handleUpdateBitrateLimit(e){this.videoTrack&&this.videoTrack.setBitrateLimit(e)}async setAudioTrackMuteState(e,t){if(!(this.audioTrack instanceof of))return void Tl.debug("[".concat(this.connectionId,"] set audio mute in unsupported environment"));let n=this.audioTrack;try{var r;e?(n.removeAudioTrack(t),0===n.trackList.length&&(Tl.debug(_i(r="[".concat(this.connectionId,"] set audio encoding active, id: ")).call(r,t.getTrackId(),", state: ",!1)),await this.pc.setAudioRtpEncodingParameters({active:!1})),this.suspendTracks.push(t)):(await this.pc.setAudioRtpEncodingParameters({active:!0}),n.addAudioTrack(t),Qt(this.suspendTracks,t))}catch(e){var i;Tl.warning(_i(i="[".concat(this.connectionId,"] set audio muted error ")).call(i,e,", fallback to set enabled"))}await Mt(this,Xl.NEED_CONTROL,{type:"audio",muted:!(!this.audioTrack||this.audioTrack.isActive)})}async setVideoTrackMuteState(e){let t=!e,n=!1;if(J().name===Au.FIREFOX)n=!0;else try{var r,i;Tl.debug(_i(r=_i(i="[".concat(this.connectionId,"] set video encoding active, id: ")).call(i,this.videoTrack&&this.videoTrack.getTrackId(),", state: ")).call(r,t)),await this.pc.setVideoRtpEncodingParameters({active:t})}catch(e){var o;Tl.warning(_i(o="[".concat(this.connectionId,"] set video encoding active error ")).call(o,e,", fallback to set enabled")),n=!0}var a,s;n&&this.videoTrack&&(Tl.debug(_i(a=_i(s="[".concat(this.connectionId,"] set video encoding active fallback to enabled on firefox, type: ")).call(s,this.videoTrack&&this.videoTrack.getTrackId(),", state: ")).call(a,t)),this.videoTrack.getMediaStreamTrack().enabled=t),this.lowStreamConnection&&this.lowStreamConnection.setVideoTrackMuteState(e),!this.isLowStreamConnection&&await Mt(this,Xl.NEED_CONTROL,{type:"video",muted:e})}uploadStats(e,t){let n=this.audioTrack?function(e,t){const n=e.audioSend[0];return n?((e={id:Lt(10,""),timestamp:new Date(e.timestamp).toISOString(),mediaType:"audio",type:"ssrc",ssrc:n.ssrc.toString()}).A_astd=t._originMediaStreamTrack.enabled&&t._mediaStreamTrack.enabled?"0":"1",n.inputLevel?e.A_ail=Math.round(100*n.inputLevel).toString():e.A_ail=Math.round(100*t._source.getAccurateVolumeLevel()).toString(),e.A_apil=Math.round(100*t._source.getAccurateVolumeLevel()).toString(),e):null}(e,this.audioTrack):void 0,r=this.videoTrack?function(e,t){const n=e.videoSend[0];if(!n)return null;switch((e={id:Lt(10,""),timestamp:new Date(e.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:n.ssrc.toString()}).A_vstd=t._originMediaStreamTrack&&!t._originMediaStreamTrack.enabled||!t._mediaStreamTrack.enabled?"1":"0",n.sentFrame&&(e.A_fhs=n.sentFrame.height.toString(),e.A_frs=n.sentFrame.frameRate.toString(),e.A_fws=n.sentFrame.width.toString()),n.adaptionChangeReason){case"none":e.A_ac="0";break;case"cpu":e.A_ac="1";break;case"bandwidth":e.A_ac="2";break;case"other":e.A_ac="3"}return e.A_nr=n.nacksCount.toString(),n.avgEncodeMs&&(e.A_aem=n.avgEncodeMs.toFixed(0).toString()),e}(e,this.videoTrack):void 0,i=It(e,t),o=function(e){const t={id:"bweforvideo",timestamp:new Date(e.timestamp).toISOString(),type:"VideoBwe"};return e.bitrate.retransmit&&(t.A_rb=e.bitrate.retransmit.toString()),e.bitrate.targetEncoded&&(t.A_teb=e.bitrate.targetEncoded.toString()),t.A_aeb=e.bitrate.actualEncoded.toString(),t.A_tb=e.bitrate.transmit.toString(),void 0!==e.sendBandwidth&&(t.A_asb=e.sendBandwidth.toString()),t}(e);n&&qt((()=>this.emit(Xl.NEED_UPLOAD,Yl.PUBLISH_STATS,n))),r&&qt((()=>this.emit(Xl.NEED_UPLOAD,Yl.PUBLISH_STATS,On({},r,{},i)))),o&&qt((()=>this.emit(Xl.NEED_UPLOAD,Yl.PUBLISH_STATS,o)))}uploadSlowStats(e){let t=It(e);t&&qt((()=>this.emit(Xl.NEED_UPLOAD,Yl.PUBLISH_STATS,t)))}uploadRelatedStats(e){let t=function(e){return(e=e.videoSend[0])?{mediaType:"video",isVideoMute:!1,frameRateInput:e.inputFrame&&e.inputFrame.frameRate.toString(),frameRateSent:e.sentFrame&&e.sentFrame.frameRate.toString(),googRtt:e.rttMs.toString()}:null}(e);t&&(t.isVideoMute=!(!this.videoTrack||!this.videoTrack.muted),qt((()=>{this.emit(Xl.NEED_UPLOAD,Yl.PUBLISH_RELATED_STATS,t)})))}async addSimulcast4Firefox(e){if(ne()&&this.videoTrack&&this.videoTrack._encoderConfig&&this.videoTrack._encoderConfig.bitrateMax&&200<this.videoTrack._encoderConfig.bitrateMax&&1<e.numSpatialLayers&&"vp8"===this.codec&&(e=this.pc.getSender("video"))){let t=e.getParameters();Tl.debug("getParameters : ",t),t||Tl.error("[".concat(this.connectionId,"] get sender parameter error.")),t.encodings=[{rid:"m",active:!0,maxBitrate:5e4,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:1e3*(this.videoTrack._encoderConfig.bitrateMax-50)}],await e.setParameters(t),Tl.debug("setParameters : ",t)}}bindTrackEvents(e){var t;e.addListener(Ah.NEED_RESET_REMOTE_SDP,Zc(t=this.handleResetRemoteSdp).call(t,this)),this.isLowStreamConnection||(e instanceof tf?(e.addListener(Ah.GET_STATS,this.handleGetLocalAudioStats),e.addListener(Ah.NEED_CLOSE,this.handleCloseAudioTrack),e.addListener(Ah.SET_AUDIO_TRACK_MUTED,this.handleMuteAudioTrack)):e instanceof zA&&(e.addListener(Ah.GET_STATS,this.handleGetLocalVideoStats),e.addListener(Ah.NEED_CLOSE,this.handleCloseVideoTrack),e.addListener(Ah.SET_OPTIMIZATION_MODE,this.handleSetOptimizationMode),e.addListener(Ah.SET_VIDEO_TRACK_MUTED,this.handleMuteVideoTrack)),e.addListener(Ah.NEED_RENEGOTIATE,this.handleStreamRenegotiate),e.addListener(Ah.NEED_REPLACE_TRACK,this.handleReplaceTrack),e.addListener(Ah.NEED_SESSION_ID,this.handleGetSessionID))}unbindTrackEvents(e){this.isLowStreamConnection||(e instanceof tf?(e.off(Ah.GET_STATS,this.handleGetLocalAudioStats),e.off(Ah.NEED_CLOSE,this.handleCloseAudioTrack),e.off(Ah.SET_AUDIO_TRACK_MUTED,this.handleMuteAudioTrack)):e instanceof zA&&(e.off(Ah.GET_STATS,this.handleGetLocalVideoStats),e.off(Ah.NEED_CLOSE,this.handleCloseVideoTrack),e.off(Ah.SET_OPTIMIZATION_MODE,this.handleSetOptimizationMode),e.off(Ah.SET_VIDEO_TRACK_MUTED,this.handleMuteVideoTrack)),e.off(Ah.NEED_RENEGOTIATE,this.handleStreamRenegotiate),e.off(Ah.NEED_REPLACE_TRACK,this.handleReplaceTrack),e.off(Ah.NEED_SESSION_ID,this.handleGetSessionID))}async addTrackWithPC(e){if("connecting"===this.connectionState)return new Rl(Yu.INVALID_OPERATION,"last publish operation has not finished").throw();let t=this.videoTrack,n=!1;return this.audioTrack&&e instanceof of?(this.audioTrack=e,Tl.debug("[".concat(this.connectionId,"] replace pc audio track")),n=await this.pc.replaceTrack(e._mediaStreamTrack)):this.videoTrack&&e instanceof zA?(this.videoTrack=e,Tl.debug("[".concat(this.connectionId,"] replace pc video track")),n=await this.pc.replaceTrack(e._mediaStreamTrack)):e instanceof tf?(this.audioTrack=e,Tl.debug("[".concat(this.connectionId,"] add audio track to pc")),await this.pc.addTrack(e._mediaStreamTrack),n=!0):e instanceof zA&&(this.videoTrack=e,Tl.debug("[".concat(this.connectionId,"] add video track to pc")),await this.pc.addTrack(e._mediaStreamTrack),n=!0),"connected"===this.connectionState&&this.videoTrack!==t&&this.videoTrack&&await this.setRtpSenderParametersByTrackConfig(this.videoTrack),"disconnected"!==this.connectionState&&n}handleResetRemoteSdp(){return new wc(((e,t)=>{var n;Tl.info("[pc-".concat(this.pc.ID,"] start reset remote sdp"));let r=this.pc.getOfferSDP();var i=this.pc.getAnswerSDP();if(!i||!r)return e();let o;i=i.sdp,this.videoTrack&&this.videoTrack._encoderConfig&&-1===Mc(n=this.videoTrack._hints).call(n,vh.SCREEN_TRACK)&&(o=function(e,t){var n,r;let i=t.bitrateMin;t=t.bitrateMax;let o=Zc(n=RegExp.prototype.test).call(n,/^([a-z])=(.*)/);if(e=os(r=e.split(/(\r\n|\r|\n)/)).call(r,o),t){let n="AS";var a;J().name===Au.FIREFOX&&(t=1e3*(t>>>0),n="TIAS"),r=$A(e).call(e,(e=>ru(e).call(e,n))),0<r&&(e[r]=_i(a="b=".concat(n,":")).call(a,t))}return i&&0<(a=$A(e).call(e,(e=>ru(e).call(e,"x-google-min-bitrate"))))&&(e[a]=e[a].replace(/x-google-min-bitrate=(.*)/,"x-google-min-bitrate=".concat(i))),e.join("\r\n")+"\r\n"}(i,this.videoTrack._encoderConfig)),i!==o?this.pc.setOfferSDP(r.sdp).then((()=>{if(o)return this.pc.setAnswerSDP(o)})).then(e).catch((e=>{var n;Tl.error(_i(n="[pc-".concat(this.pc.ID,"] reset remote sdp error, ")).call(n,e)),t(e)})):Tl.debug("[pc-".concat(this.pc.ID,"] remote sdp have no not changed"))}))}async setRtpSenderParametersByTrackConfig(e){if(!Th.supportSetRtpSenderParameters)return void Tl.debug("[".concat(this.connectionId,"] do not support set pc rtp sender, skip"));let t={},n="balanced";"motion"===e._optimizationMode?n="maintain-framerate":"detail"===e._optimizationMode&&(n="maintain-resolution"),Tl.debug("[".concat(this.connectionId,"] set pc rtp sender"),t,n),await this.pc.setRtpSenderParameters(t,n)}updateAnswerSDP(e){var t,n;return e=e.replace(/a=x-google-flag:conference\r\n/g,""),this.videoTrack&&Mc(t=this.videoTrack._hints).call(t,vh.SCREEN_TRACK),this.videoTrack&&this.videoTrack._encoderConfig&&-1===Mc(n=this.videoTrack._hints).call(n,vh.SCREEN_TRACK)&&(e=function(e,t,n){let r=Th;var i=n.bitrateMin;n=n.bitrateMax;let o=e.match(/m=video.*\r\n/)||e.match(/m=video.*\n/);if(o&&0<o.length&&r.supportMinBitrate&&i&&(t=ev(e,t)))if(Mu.SIMULCAST){var a,s;i=n?.7*n:300,e=e.replace(o[0],_i(a=_i(s="".concat(o[0],"a=fmtp:")).call(s,t," x-google-start-bitrate=")).call(a,i,"\r\n"))}else{var c,u;e=e.replace(o[0],_i(c=_i(u="".concat(o[0],"a=fmtp:")).call(u,t," x-google-min-bitrate=")).call(c,i,"\r\n"))}var l,h;return o&&0<o.length&&n&&(a="AS",J().name===Au.FIREFOX&&(n=1e3*(n>>>0),a="TIAS"),e=e.replace(o[0],_i(l=_i(h="".concat(o[0],"b=")).call(h,a,":")).call(l,n,"\r\n"))),e}(e,this.codec,this.videoTrack._encoderConfig)),this.audioTrack&&this.audioTrack._encoderConfig&&(e=In(e,this.audioTrack._encoderConfig)),function(e){let t=J();return t.name!==Au.SAFARI&&t.os!==gu.IOS?e:e.replace(/a=.*video-orientation\r\n/g,"")}(e)}createPC(){this.pc=new bA({turnServer:this.joinInfo.turnServer}),this.updateICEPromise()}async closePC(e){return this.pc.onICEConnectionStateChange=void 0,this.pc.close(),!e&&await Mt(this,Xl.NEED_UNPUB)}onPCDisconnected(e){this.reportPublishEvent(!1,e.code)}async setLowStreamEncoding(e,t){try{let n=await this.pc.setVideoRtpEncodingParameters(e),r=t.getMediaStreamTrack();if(e.scaleResolutionDownBy&&n.encodings[0].scaleResolutionDownBy!==e.scaleResolutionDownBy){let n=t._videoHeight||r.getSettings().height,i=t._videoWidth||r.getSettings().width;n&&i&&await r.applyConstraints({height:n/e.scaleResolutionDownBy,width:i/e.scaleResolutionDownBy})}e.maxFramerate&&n.encodings[0].maxFramerate!==e.maxFramerate&&await r.applyConstraints({frameRate:e.maxFramerate})}catch(e){if(e instanceof Rl)throw e;throw new Rl(Yu.LOW_STREAM_ENCODING_ERROR,e.message)}}}class nv extends kd{constructor(e,t,n,r){var i,o;super(e,_i(i=_i(o="track-".concat(e.kind,"-")).call(o,t,"-")).call(i,r)),this._isDestroyed=!1,this._userId=t,this._uintId=n}getUserId(){return this._userId}_updateOriginMediaStreamTrack(e){this._mediaStreamTrack=this._originMediaStreamTrack=e,this._updatePlayerSource()}_destroy(){this._isDestroyed=!0,Tl.info("[".concat(this.getTrackId(),"] is destroyed")),this.stop(),super.close()}}class rv extends nv{constructor(e,t,n,r){super(e,t,n,r),this.trackMediaType="video",this.updateMediaStreamTrackResolution()}get isPlaying(){return!(!this._player||this._player.videoElementStatus!==Ol.PLAYING)}getStats(){return Vt((()=>{Tl.warning("[deprecated] RemoteVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteVideoStats instead")}),"remoteVideoTrackGetStatsWarning"),Ut(this,Ah.GET_STATS)||xn({},rh)}play(e,t={}){let n=Rd.reportApiInvoke(null,{tag:Bl.TRACER,name:Pl.REMOTE_VIDEO_TRACK_PLAY,options:[this.getTrackId(),"string"==typeof e?e:"HTMLElement",t]});if("string"==typeof e){let t=document.getElementById(e);var r;t?e=t:(Tl.warning(_i(r="[".concat(this.getTrackId(),'] can not find "#')).call(r,e,'" element, use document.body')),e=document.body)}Tl.debug("[".concat(this.getTrackId(),"] start video playback"),Fr(t)),e=xn({fit:"cover"},t,{trackId:this.getTrackId(),element:e}),this._player?this._player.updateConfig(e):(this._player=new CA(e),this._player.updateVideoTrack(this._mediaStreamTrack),this._player.onFirstVideoFrameDecoded=()=>{this.emit(yh.FIRST_FRAME_DECODED)}),this._player.play(),n.onSuccess()}stop(){let e=Rd.reportApiInvoke(null,{tag:Bl.TRACER,name:Pl.REMOTE_VIDEO_TRACK_STOP,options:[this.getTrackId()]});if(!this._player)return e.onSuccess();this._player.destroy(),this._player=void 0,Tl.debug("[".concat(this.getTrackId(),"] stop video playback")),e.onSuccess()}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}updateMediaStreamTrackResolution(){Pt(this._originMediaStreamTrack).then((([e,t])=>{this._videoHeight=t,this._videoWidth=e})).catch(lf)}_updatePlayerSource(){Tl.debug("[".concat(this.getTrackId(),"] update player source track")),this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}}class iv extends nv{constructor(e,t,n,r){super(e,t,n,r),this.trackMediaType="audio",this._useAudioElement=!0,this._volume=100,this._source=new Ud(e,!0),this._source.once(Zl.RECEIVE_TRACK_BUFFER,(()=>{this.emit(yh.FIRST_FRAME_DECODED)}))}get isPlaying(){return this._useAudioElement?Zd.isPlaying(this.getTrackId()):this._source.isPlayed}setAudioFrameCallback(e,t=4096){if(!e)return this._source.removeAllListeners(Zl.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(t),this._source.removeAllListeners(Zl.ON_AUDIO_BUFFER),this._source.on(Zl.ON_AUDIO_BUFFER,(t=>e(t)))}setVolume(e){let t=Rd.reportApiInvoke(null,{tag:Bl.TRACER,name:Pl.REMOTE_AUDIO_SET_VOLUME,options:[this.getTrackId(),e]},300);this._volume=e,this._useAudioElement?Zd.setVolume(this.getTrackId(),e):this._source.setVolume(e/100),t.onSuccess()}async setPlaybackDevice(e){let t=Rd.reportApiInvoke(null,{tag:Bl.TRACER,name:Pl.REMOTE_AUDIO_SET_OUTPUT_DEVICE,options:[this.getTrackId(),e]});if(!this._useAudioElement)throw new Rl(Yu.NOT_SUPPORTED,"your browser does not support setting the audio output device");try{await Zd.setSinkID(this.getTrackId(),e)}catch(e){throw t.onError(e),e}t.onSuccess()}getVolumeLevel(){return this._source.getAccurateVolumeLevel()}getStats(){return Vt((()=>{Tl.warning("[deprecated] RemoteAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteAudioStats instead")}),"remoteAudioTrackGetStatsWarning"),Ut(this,Ah.GET_STATS)||xn({},th)}play(){let e=Rd.reportApiInvoke(null,{tag:Bl.TRACER,name:Pl.REMOTE_AUDIO_TRACK_PLAY,options:[this.getTrackId()]});Tl.debug("[".concat(this.getTrackId(),"] start audio playback")),this._useAudioElement?(Tl.debug("[".concat(this.getTrackId(),"] use audio element to play")),Zd.play(this._mediaStreamTrack,this.getTrackId(),this._volume)):this._source.play(),e.onSuccess()}stop(){let e=Rd.reportApiInvoke(null,{tag:Bl.TRACER,name:Pl.REMOTE_AUDIO_TRACK_STOP,options:[this.getTrackId()]});Tl.debug("[".concat(this.getTrackId(),"] stop audio playback")),this._useAudioElement?Zd.stop(this.getTrackId()):this._source.stop(),e.onSuccess()}_destroy(){super._destroy(),this._source.destroy()}_isFreeze(){return this._source.isFreeze}_updatePlayerSource(){Tl.debug("[".concat(this.getTrackId(),"] update player source track")),this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&Zd.updateTrack(this.getTrackId(),this._mediaStreamTrack)}}class ov extends IA{constructor(e,t,n,r){super(n,e.uid),this.type="sub",this.unusedTracks=[],this.onTrack=e=>{var t,n,r,i;if("audio"===e.kind&&!this.subscribeOptions.audio||"video"===e.kind&&!this.subscribeOptions.video)return this.unusedTracks.push(e),void Tl.debug(_i(n="[".concat(this.connectionId,"] unused ontrack event, kind: ")).call(n,e.kind));Tl.debug(_i(t="[".concat(this.connectionId,"] emit pc ontrack after subscribe ")).call(t,e.kind),e),(t="audio"===e.kind?this.user._audioTrack:this.user._videoTrack)?t._updateOriginMediaStreamTrack(e):"audio"===e.kind?(this.pc._statsFilter.setIsFirstAudioDecoded(!1),this.user._audioTrack=new iv(e,this.getUserId(),this.user._uintid,this.joinInfo.clientId),Tl.info(_i(r="[".concat(this.connectionId,"] create remote audio track: ")).call(r,this.user._audioTrack.getTrackId())),this.bindTrackEvents(this.user._audioTrack)):(this.user._videoTrack=new rv(e,this.getUserId(),this.user._uintid,this.joinInfo.clientId),Tl.info(_i(i="[".concat(this.connectionId,"] create remote video track: ")).call(i,this.user._videoTrack.getTrackId())),this.bindTrackEvents(this.user._videoTrack))},this.handleGetRemoteAudioStats=e=>{e(this.statsCollector.getRemoteAudioTrackStats(this.connectionId))},this.handleGetRemoteVideoStats=e=>{e(this.statsCollector.getRemoteVideoTrackStats(this.connectionId))},this.handleGetSessionID=e=>{e(this.joinInfo.sid)},this.user=e,this.statsCollector=t,this.statsCollector.addRemoteConnection(this),this.subscribeOptions=r}async startP2PConnection(){return new wc((async(e,t)=>{let n=r=>{if("connected"===r&&(Rd.subscribe(this.joinInfo.sid,{lts:this.startTime,succ:!0,video:this.subscribeOptions.video,audio:this.subscribeOptions.audio,peerid:this.user.uid,ec:null,subscribeRequestid:this.ID,p2pid:this.pc.ID}),this.off(Xl.CONNECTION_STATE_CHANGE,n),e()),"disconnected"===r){if(this.off(Xl.CONNECTION_STATE_CHANGE,n),this.disconnectedReason)return t(this.disconnectedReason);t(new Rl(Yu.OPERATION_ABORTED,"subscribe abort"))}};if(this.on(Xl.CONNECTION_STATE_CHANGE,n),this.disconnectedReason=void 0,this.connectionState="connecting",this.startTime=tl(),!this.subscribeOptions)return void t(new Rl(Yu.UNEXPECTED_ERROR,"no subscribe options"));let r=new MediaStream,i=new wc((e=>{this.pc.onTrack=(t,n)=>{var i,o;if("audio"===t.kind&&!this.subscribeOptions.audio||"video"===t.kind&&!this.subscribeOptions.video)return this.unusedTracks.push(t),void Tl.debug(_i(o="[".concat(this.connectionId,"] unused ontrack event ")).call(o,t.kind));r.addTrack(t),o={audio:0<r.getAudioTracks().length,video:0<r.getVideoTracks().length},Tl.debug(_i(i="[".concat(this.connectionId,"] subscribe ontrack: ")).call(i,t.kind),n,t);e:{var a,s;for(t=this.subscribeOptions,n=zu(a=Ba(o)).call(a),a=zu(s=Ba(t)).call(s),s=0;s<n.length;s+=1){if(n[s]!==a[s]){o=!1;break e}if(o[n[s]]!==t[n[s]]){o=!1;break e}}o=!0}o&&(this.pc.onTrack=this.onTrack,Tl.debug("[".concat(this.connectionId,"] get all subscribed tracks")),e(r))}}));try{let e=function(e){return J().name!==Au.FIREFOX?e:e.replace("/recvonly http://www.webrtc.org/experiments/rtp-hdrext/playout-delay"," http://www.webrtc.org/experiments/rtp-hdrext/playout-delay")}(Cn(await this.pc.createOfferSDP()));await this.pc.setOfferSDP(e),Tl.debug("[".concat(this.connectionId,"] create and set offer success"));let t=await Mt(this,Xl.NEED_ANSWER,{messageType:"OFFER",sdp:e,offererSessionId:104,retry:!0});await this.pc.setAnswerSDP(Cn(t.sdp)),Tl.debug("[".concat(this.connectionId,"] set answer success"));let n=await wc.all([i,this.icePromise]),r=n[0].getAudioTracks()[0],s=n[0].getVideoTracks()[0];var o,a;r&&(this.user._audioTrack?this.user._audioTrack._updateOriginMediaStreamTrack(r):(this.user._audioTrack=new iv(r,this.getUserId(),this.user._uintid,this.joinInfo.clientId),Tl.info(_i(o="[".concat(this.connectionId,"] create remote audio track: ")).call(o,this.user._audioTrack.getTrackId())),this.bindTrackEvents(this.user._audioTrack))),s&&(this.user._videoTrack?this.user._videoTrack._updateOriginMediaStreamTrack(s):(this.user._videoTrack=new rv(s,this.getUserId(),this.user._uintid,this.joinInfo.clientId),Tl.info(_i(a="[".concat(this.connectionId,"] create remote video track: ")).call(a,this.user._videoTrack.getTrackId())),this.bindTrackEvents(this.user._videoTrack))),this.connectionState="connected",this.startUploadStats()}catch(e){this.off(Xl.CONNECTION_STATE_CHANGE,n),this.connectionState="disconnected",Rd.subscribe(this.joinInfo.sid,{lts:this.startTime,succ:!1,video:this.subscribeOptions.video,audio:this.subscribeOptions.audio,peerid:this.user.uid,ec:e.code,subscribeRequestid:this.ID,p2pid:this.pc.ID}),t(e)}}))}async closeP2PConnection(e){"disconnected"!==this.connectionState&&(this.stopUploadStats(),this.statsCollector.removeConnection(this.connectionId),this.connectionState="disconnected",await this.setSubscribeOptions({audio:!1,video:!1}),await this.closePC(e),this.removeAllListeners())}getNetworkQuality(){var e=this.pc.getStats();if(!e.audioRecv[0]&&!e.videoRecv[0])return 1;var t=Ut(this,Xl.NEED_SIGNAL_RTT),n=e.rtt;t=(n&&t?(n+t)/2:n||t)||0,n=e.audioRecv[0]?e.audioRecv[0].jitterMs:void 0;let r=70*(e=e.recvPacketLossRate)/50+.3*t/1500;return n&&(r=60*e/50+.2*t/1500+.2*n/400),.1>r?1:.17>r?2:.36>r?3:.59>r?4:5}uploadStats(e){let t=this.user.audioTrack?function(e,t){const n=e.audioRecv[0];return n?((e={id:Lt(10,""),timestamp:new Date(e.timestamp).toISOString(),mediaType:"audio",type:"ssrc",ssrc:n.ssrc.toString()}).bytesReceived=n.bytes.toString(),e.packetsLost=n.packetsLost.toString(),e.packetsReceived=n.packets.toString(),n.outputLevel?e.A_aol=Math.round(100*n.outputLevel).toString():e.A_aol=Math.round(100*t._source.getAccurateVolumeLevel()).toString(),e.A_apol=Math.round(100*t._source.getAccurateVolumeLevel()).toString(),t&&(e.A_artd=t._originMediaStreamTrack.enabled&&t._mediaStreamTrack.enabled?"0":"1"),e.A_jr=n.jitterMs.toString(),e.A_jbm=Math.floor(n.jitterBufferMs).toString(),e.A_cdm=Math.floor(n.jitterBufferMs).toString(),e):null}(e,this.user.audioTrack):void 0,n=this.user.videoTrack?function(e,t){const n=e.videoRecv[0];return n?((e={id:Lt(10,""),timestamp:new Date(e.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:n.ssrc.toString()}).bytesReceived=n.bytes.toString(),e.packetsLost=n.packetsLost.toString(),e.packetsReceived=n.packets.toString(),n.framesRateFirefox&&(e.A_frr=n.framesRateFirefox.toString()),n.receivedFrame&&(e.A_frr=n.receivedFrame.frameRate.toString()),e.A_frd=n.decodeFrameRate.toString(),n.outputFrame&&(e.A_fro=n.outputFrame.frameRate.toString()),void 0!==n.jitterBufferMs&&(e.A_jbm=Math.floor(n.jitterBufferMs).toString()),void 0!==n.currentDelayMs&&(e.A_cdm=Math.floor(n.currentDelayMs).toString()),e.A_fs=n.firsCount.toString(),e.A_ns=n.nacksCount.toString(),e.A_ps=n.plisCount.toString(),t&&(e.A_vrtd=t._originMediaStreamTrack.enabled&&t._mediaStreamTrack.enabled?"0":"1"),t._player&&0<t._player.freezeTimeCounterList.length&&(e.A_vrft=Nc(r=t._player.freezeTimeCounterList).call(r,0,1)[0].toString()),e):null;var r}(e,this.user.videoTrack):void 0;t&&qt((()=>this.emit(Xl.NEED_UPLOAD,Yl.SUBSCRIBE_STATS,t))),n&&qt((()=>this.emit(Xl.NEED_UPLOAD,Yl.SUBSCRIBE_STATS,n)))}uploadSlowStats(e){}uploadRelatedStats(e,t){let n=!0===this.pc._statsFilter.videoIsReady,r=function(e,t,n){return(e=e.audioRecv[0])?(n=cf.isRemoteAudioFreeze(n),{mediaType:"audio",isAudioMute:!1,peerId:t,googJitterReceived:e.jitterMs.toString(),isFreeze:n,bytesReceived:e.bytes.toString(),packetsReceived:e.packets.toString(),packetsLost:e.packetsLost.toString(),frameReceived:e.receivedFrames.toString(),frameDropped:e.droppedFrames.toString()}):null}(e,this.getUserId(),this.user.audioTrack),i=function(e,t,n,r,i){return(t=t.videoRecv[0])?(e=cf.isRemoteVideoFreeze(i,t,r?r.videoRecv[0]:void 0)&&e,n={mediaType:"video",isVideoMute:!1,peerId:n,frameRateReceived:t.receivedFrame&&t.receivedFrame.frameRate.toString(),frameRateDecoded:t.decodedFrame&&t.decodedFrame.frameRate.toString(),isFreeze:e,bytesReceived:t.bytes.toString(),packetsReceived:t.packets.toString(),packetsLost:t.packetsLost.toString()},t.framesRateFirefox&&(n.frameRateDecoded=t.framesRateFirefox.toString(),n.frameRateReceived=t.framesRateFirefox.toString()),n):null}(n,e,this.getUserId(),t,this.user.videoTrack);r&&qt((()=>{this.emit(Xl.NEED_UPLOAD,Yl.SUBSCRIBE_RELATED_STATS,r)})),i&&qt((()=>{this.emit(Xl.NEED_UPLOAD,Yl.SUBSCRIBE_RELATED_STATS,i)}))}emitOnTrackFromUnusedTracks(){if(this.subscribeOptions){var e,t=this.subscribeOptions.video;if(this.subscribeOptions.audio){var n;let e=Wc(n=this.unusedTracks).call(n,(e=>"audio"===e.kind&&"live"===e.readyState));Qt(this.unusedTracks,e),e&&this.onTrack(e)}t&&(t=Wc(e=this.unusedTracks).call(e,(e=>"video"===e.kind&&"live"===e.readyState)),Qt(this.unusedTracks,t),t&&this.onTrack(t))}}async setSubscribeOptions(e){var t,n,r,i;if(e.audio!==this.subscribeOptions.audio||e.video!==this.subscribeOptions.video){if("connecting"===this.connectionState)try{await this.createWaitConnectionConnectedPromise()}catch(e){throw new Rl(Yu.OPERATION_ABORTED,"can not update subscribe options, operation abort")}e.audio===this.subscribeOptions.audio&&e.video===this.subscribeOptions.video||(Tl.debug(_i(t=_i(n=_i(r=_i(i="[".concat(this.connectionId,"] update subscribe options [a: ")).call(i,this.subscribeOptions.audio,", v: ")).call(r,this.subscribeOptions.video,"] -> [a: ")).call(n,e.audio,", v: ")).call(t,e.video,"]")),this.subscribeOptions=e,!e.audio&&this.user._audioTrack&&(this.unusedTracks.push(this.user._audioTrack._originMediaStreamTrack),this.user._audioTrack._destroy(),this.unbindTrackEvents(this.user._audioTrack),this.user._audioTrack=void 0),!e.video&&this.user._videoTrack&&(this.unusedTracks.push(this.user._videoTrack._originMediaStreamTrack),this.user._videoTrack._destroy(),this.unbindTrackEvents(this.user._videoTrack),this.user._videoTrack=void 0),this.emitOnTrackFromUnusedTracks())}}createPC(){this.pc=new _A({turnServer:this.joinInfo.turnServer}),this.pc.onFirstAudioDecoded=()=>{this.user.audioTrack&&this.user.audioTrack.emit(yh.FIRST_FRAME_DECODED),Rd.firstRemoteFrame(this.joinInfo.sid,xl.FIRST_AUDIO_DECODE,Dl.FIRST_AUDIO_DECODE,{peer:this.user._uintid,subscribeElapse:tl()-this.startTime,subscribeRequestid:this.ID,p2pid:this.pc.ID})},this.pc.onFirstAudioReceived=()=>{Rd.firstRemoteFrame(this.joinInfo.sid,xl.FIRST_AUDIO_RECEIVED,Dl.FIRST_AUDIO_RECEIVED,{peer:this.user._uintid,subscribeElapse:tl()-this.startTime,subscribeRequestid:this.ID,p2pid:this.pc.ID})},this.pc.onFirstVideoDecoded=(e,t)=>{Rd.firstRemoteFrame(this.joinInfo.sid,xl.FIRST_VIDEO_DECODE,Dl.FIRST_VIDEO_DECODE,{peer:this.user._uintid,videowidth:e,videoheight:t,subscribeElapse:tl()-this.startTime,subscribeRequestid:this.ID,p2pid:this.pc.ID})},this.pc.onFirstVideoReceived=()=>{Rd.firstRemoteFrame(this.joinInfo.sid,xl.FIRST_VIDEO_RECEIVED,Dl.FIRST_VIDEO_RECEIVED,{peer:this.user._uintid,subscribeElapse:tl()-this.startTime,subscribeRequestid:this.ID,p2pid:this.pc.ID})},this.updateICEPromise()}async closePC(e){return this.pc.audioTrack&&this.pc.audioTrack.stop(),this.pc.videoTrack&&this.pc.videoTrack.stop(),this.pc.onTrack=void 0,this.pc.onICEConnectionStateChange=void 0,this.pc.close(),!e&&await Mt(this,Xl.NEED_UNSUB)}onPCDisconnected(e){Rd.subscribe(this.joinInfo.sid,{lts:this.startTime,succ:!1,video:this.subscribeOptions.video,audio:this.subscribeOptions.audio,peerid:this.user.uid,ec:e.code,subscribeRequestid:this.ID,p2pid:this.pc.ID})}bindTrackEvents(e){e instanceof iv?e.addListener(Ah.GET_STATS,this.handleGetRemoteAudioStats):e instanceof rv&&e.addListener(Ah.GET_STATS,this.handleGetRemoteVideoStats)}unbindTrackEvents(e){e instanceof iv?e.off(Ah.GET_STATS,this.handleGetRemoteAudioStats):e instanceof rv&&e.off(Ah.GET_STATS,this.handleGetRemoteVideoStats)}}class av extends wd{constructor(e,t,n,r){super(),this.reconnectMode="retry",this.commandReqId=this.reqId=0,this.handleWebSocketOpen=()=>{this.reconnectMode="retry",this.startPingPong()},this.handleWebSocketMessage=e=>{var t;e.data&&((e=JSON.parse(e.data)).requestId?this.emit(_i(t="@".concat(e.requestId,"-")).call(t,e.sid),e):this.serviceMode===oh.INJECT?this.emit(lh.INJECT_STREAM_STATUS,e):(Rd.workerEvent(this.spec.sid,{actionType:"status",serverCode:e.code,workerType:this.serviceMode===oh.TRANSCODE?1:2}),this.emit(lh.PUBLISH_STREAM_STATUS,e)))},this.spec=t,this.token=e,this.serviceMode=r,this.websocket=new Xf("live-streaming",n),this.websocket.on(ih.CONNECTED,this.handleWebSocketOpen),this.websocket.on(ih.ON_MESSAGE,this.handleWebSocketMessage),this.websocket.on(ih.REQUEST_NEW_URLS,((e,t)=>{Mt(this,lh.REQUEST_NEW_ADDRESS).then(e).catch(t)})),this.websocket.on(ih.RECONNECTING,(()=>{this.websocket.reconnectMode=this.reconnectMode}))}init(e){return this.websocket.init(e)}async request(e,t,n,r){this.reqId+=1,"request"===e&&(this.commandReqId+=1);let i=this.commandReqId,o=this.reqId;if(!o||!this.websocket)throw new Rl(Yu.UNEXPECTED_ERROR);var a=Ln({command:e,sdkVersion:"4.7.3"===ku?"0.0.1":ku,seq:o,requestId:o,allocate:n,cname:this.spec.cname,appId:this.spec.appId,sid:this.spec.sid,uid:this.spec.uid.toString(),ts:Math.floor(tl()/1e3)},t);if("closed"===this.websocket.state)throw new Rl(Yu.WS_DISCONNECT);let s=()=>new wc(((e,t)=>{this.websocket.once(ih.CLOSED,(()=>t(new Rl(Yu.WS_ABORT)))),this.websocket.once(ih.CONNECTED,e)}));"connected"!==this.websocket.state&&await s(),a.clientRequest&&(a.clientRequest.workerToken=this.token);let c=new wc(((e,t)=>{var n;const r=()=>{t(new Rl(Yu.WS_ABORT))};this.websocket.once(ih.RECONNECTING,r),this.websocket.once(ih.CLOSED,r),this.once(_i(n="@".concat(o,"-")).call(n,this.spec.sid),(t=>{e(t)}))}));r&&Rd.workerEvent(this.spec.sid,Ln({},r,{requestId:i,actionType:"request",payload:Fr(t.clientRequest),serverCode:0,code:0}));let u=tl();this.websocket.sendMessage(a),a=null;try{a=await c}catch(r){if("closed"===this.websocket.state)throw r;return await s(),await this.request(e,t,n)}return r&&Rd.workerEvent(this.spec.sid,Ln({},r,{requestId:i,actionType:"response",payload:Fr(a.serverResponse),serverCode:a.code,success:200===a.code,responseTime:tl()-u})),200!==a.code&&this.handleResponseError(a),a}tryNextAddress(){this.reconnectMode="tryNext",this.websocket.reconnect("tryNext")}close(){let e="4.7.3"===ku?"0.0.1":ku;this.reqId+=1,"connected"===this.websocket.state?(this.websocket.sendMessage({command:"request",appId:this.spec.appId,cname:this.spec.cname,uid:this.spec.uid.toString(),sdkVersion:e,sid:this.spec.sid,seq:this.reqId,ts:Math.floor(tl()/1e3),requestId:this.reqId,clientRequest:{command:"DestroyWorker"}}),this.websocket.close(!1,!0)):this.websocket.close(!1),this.pingpongTimer&&(window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0)}handleResponseError(e){switch(e.code){case dh.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM:return void Tl.warning("live stream response already exists stream");case dh.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR:case dh.LIVE_STREAM_RESPONSE_BAD_STREAM:case dh.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR:return new Rl(Yu.LIVE_STREAMING_INVALID_ARGUMENT,"",{code:e.code}).throw();case dh.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST:if("UnpublishStream"===e.serverResponse.command||"UninjectStream"===e.serverResponse.command)break;throw new Rl(Yu.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case dh.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED:return new Rl(Yu.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED,"",{code:e.code}).throw();case dh.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:var t=new Rl(Yu.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE);return this.emit(lh.WARNING,t,e.serverResponse.url);case dh.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN:return t=new Rl(Yu.LIVE_STREAMING_WARN_FREQUENT_REQUEST),this.emit(lh.WARNING,t,e.serverResponse.url);case dh.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH:throw new Rl(Yu.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case dh.LIVE_STREAM_RESPONSE_NOT_SUPPORTED:return new Rl(Yu.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED,"",{code:e.code}).throw();case dh.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM:return t=new Rl(Yu.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT),this.emit(lh.WARNING,t,e.serverResponse.url);case dh.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR:return new Rl(Yu.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:e.code}).throw();case dh.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT:throw new Rl(Yu.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream resource limit",{retry:!0,changeAddress:!0});case dh.LIVE_STREAM_RESPONSE_WORKER_LOST:case dh.LIVE_STREAM_RESPONSE_WORKER_QUIT:if("UnpublishStream"===e.serverResponse.command||"UninjectStream"===e.serverResponse.command)break;throw new Rl(Yu.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case dh.ERROR_FAIL_SEND_MESSAGE:if("UnpublishStream"===e.serverResponse.command||"UninjectStream"===e.serverResponse.command)break;if("UpdateTranscoding"===e.serverResponse.command||"ControlStream"===e.serverResponse.command)return new Rl(Yu.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{code:e.code}).throw();throw new Rl(Yu.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case dh.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case dh.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case dh.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case dh.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:return new Rl(Yu.LIVE_STREAMING_CDN_ERROR,"",{code:e.code}).throw()}}startPingPong(){this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval((()=>{"connected"===this.websocket.state&&this.request("ping",{}).catch(lf)}),6e3)}}class sv extends wd{constructor(e,t=Td,n=Td){super(),this.retryTimeout=1e4,this.streamingTasks=new pa,this.isStartingStreamingTask=!1,this.taskMutex=new Nd("live-streaming"),this.cancelToken=wl.CancelToken.source(),this.injectConfig=Bn({},uh),this.injectLoopTimes=0,this.lastTaskId=1,this.statusError=new pa,this.spec=e,this.httpRetryConfig=n,this.wsRetryConfig=t}async setTranscodingConfig(e){var t;let n=Bn({},ch,{},e);var r,i,o,a;if(66!==n.videoCodecProfile&&77!==n.videoCodecProfile&&100!==n.videoCodecProfile&&(Tl.debug(_i(r="[".concat(this.spec.clientId,"] set transcoding config, fix video codec profile: ")).call(r,n.videoCodecProfile," -> 100")),n.videoCodecProfile=100),n.transcodingUsers||(n.transcodingUsers=n.userConfigs),n.transcodingUsers&&(n.transcodingUsers=Sc(i=n.transcodingUsers).call(i,(e=>Bn({},ah,{},e,{zOrder:e.zOrder?e.zOrder+1:1})))),function(e){var t,n;null==e.width||De(e.width,"config.width",0,1e4),null==e.height||De(e.height,"config.height",0,1e4),null==e.videoBitrate||De(e.videoBitrate,"config.videoBitrate",1,1e6),null==e.videoFrameRate||De(e.videoFrameRate,"config.videoFrameRate"),null==e.lowLatency||Ne(e.lowLatency,"config.lowLatency"),null==e.audioSampleRate||xe(e.audioSampleRate,"config.audioSampleRate",[32e3,44100,48e3]),null==e.audioBitrate||De(e.audioBitrate,"config.audioBitrate",1,128),null==e.audioChannels||xe(e.audioChannels,"config.audioChannels",[1,2,3,4,5]),null==e.videoGop||De(e.videoGop,"config.videoGop"),null==e.videoCodecProfile||xe(e.videoCodecProfile,"config.videoCodecProfile",[66,77,100]),null==e.userCount||De(e.userCount,"config.userCount",0,17),null==e.backgroundColor||De(e.backgroundColor,"config.backgroundColor",0,16777215),null==e.userConfigExtraInfo||Le(e.userConfigExtraInfo,"config.userConfigExtraInfo",0,4096,!1),e.transcodingUsers&&null!=e.transcodingUsers&&(Pe(e.transcodingUsers,"config.transcodingUsers"),Oa(t=e.transcodingUsers).call(t,((e,t)=>{Me(e.uid),null==e.x||De(e.x,"transcodingUser[".concat(t,"].x"),0,1e4),null==e.y||De(e.y,"transcodingUser[".concat(t,"].y"),0,1e4),null==e.width||De(e.width,"transcodingUser[".concat(t,"].width"),0,1e4),null==e.height||De(e.height,"transcodingUser[".concat(t,"].height"),0,1e4),null==e.zOrder||De(e.zOrder-1,"transcodingUser[".concat(t,"].zOrder"),0,100),null==e.alpha||De(e.alpha,"transcodingUser[".concat(t,"].alpha"),0,1,!1)}))),null==e.watermark||Ve(e.watermark,"watermark"),null==e.backgroundImage||Ve(e.backgroundImage,"backgroundImage"),e.images&&null!=e.images&&(Pe(e.images,"config.images"),Oa(n=e.images).call(n,((e,t)=>{Ve(e,"images[".concat(t,"]"))})))}(n),e=[],n.images&&e.push(...Sc(o=n.images).call(o,(e=>Bn({},sh,{},e,{zOrder:255})))),n.backgroundImage&&(e.push(Bn({},sh,{},n.backgroundImage,{zOrder:0})),delete n.backgroundImage),n.watermark&&(e.push(Bn({},sh,{},n.watermark,{zOrder:255})),delete n.watermark),n.images=e,n.transcodingUsers&&(n.userConfigs=Sc(a=n.transcodingUsers).call(a,(e=>Bn({},e))),n.userCount=n.transcodingUsers.length,delete n.transcodingUsers),o=Sc(t=n.userConfigs||[]).call(t,(e=>"number"==typeof e.uid?wc.resolve(e.uid):on(e.uid,this.spec,this.cancelToken.token,this.httpRetryConfig))),t=await wc.all(o),Oa(t).call(t,((e,t)=>{n.userConfigs&&n.userConfigs[t]&&(n.userConfigs[t].uid=e)})),this.transcodingConfig=n,this.connection)try{var s,c,u;let e=await this.connection.request("request",{clientRequest:{command:"UpdateTranscoding",transcodingConfig:this.transcodingConfig}},!1,{command:"UpdateTranscoding",workerType:1,requestByUser:!0,tid:Sc(s=Ed(yd(c=this.streamingTasks).call(c))).call(s,(e=>e.taskId)).join("#")});Tl.debug(_i(u="[".concat(this.spec.clientId,"] update live transcoding config success, code: ")).call(u,e.code,", config:"),Fr(this.transcodingConfig))}catch(e){var l;if(!e.data||!e.data.retry)throw e;e.data.changeAddress&&this.connection.tryNextAddress(),Oa(l=this.streamingTasks).call(l,(t=>{Tl.warning("[".concat(this.spec.clientId,"] live streaming receive error"),e.toString(),"try to republish",t.url),this.startLiveStreamingTask(t.url,t.mode,e).then((()=>{var e;Tl.debug(_i(e="[".concat(this.spec.clientId,"] live streaming republish ")).call(e,t.url," success"))})).catch((e=>{Tl.error("[".concat(this.spec.clientId,"] live streaming republish failed"),t.url,e.toString()),this.onLiveStreamError&&this.onLiveStreamError(t.url,e)}))}))}}setInjectStreamConfig(e,t){this.injectConfig=La({},this.injectConfig,e),this.injectLoopTimes=t}async startLiveStreamingTask(e,t,n){var r,i,o,a;if(Wc(r=Ed(yd(i=this.streamingTasks).call(i))).call(r,(e=>e.mode===oh.INJECT))&&t===oh.INJECT)return new Rl(Yu.LIVE_STREAMING_TASK_CONFLICT,"inject stream over limit").throw();if(!this.transcodingConfig&&t===oh.TRANSCODE)throw new Rl(Yu.INVALID_OPERATION,"[LiveStreaming] no transcoding config found, can not start transcoding streaming task");if(r={command:"PublishStream",ts:tl(),url:e,uid:this.spec.uid.toString(),autoDestroyTime:100,acceptImageTimeout:!0},Tl.debug(_i(o=_i(a="[".concat(this.spec.clientId,"] start live streaming ")).call(a,e,", mode: ")).call(o,t)),o=await this.taskMutex.lock(),this.connection||!n){if(this.streamingTasks.get(e)&&!n)return o(),new Rl(Yu.LIVE_STREAMING_TASK_CONFLICT).throw();try{this.connection||(this.connection=await this.connect(t))}catch(e){throw o(),e}switch(t){case oh.TRANSCODE:r.transcodingConfig=Bn({},this.transcodingConfig);break;case oh.INJECT:r={cname:this.spec.cname,command:"InjectStream",sid:this.spec.sid,transcodingConfig:this.injectConfig,ts:tl(),url:e,loopTimes:this.injectLoopTimes}}this.uapResponse&&this.uapResponse.vid&&(r.vid=this.uapResponse.vid),this.isStartingStreamingTask=!0,a=this.lastTaskId++;try{var s;let i=new wc(((t,r)=>{xt(this.retryTimeout).then((()=>{if(n)return r(n);const t=this.statusError.get(e);return t?(this.statusError.delete(e),r(t)):void 0}))})),c=await wc.race([this.connection.request("request",{clientRequest:r},!0,{url:e,command:"PublishStream",workerType:t===oh.TRANSCODE?1:2,requestByUser:!n,tid:a.toString()}),i]);this.isStartingStreamingTask=!1,Tl.debug(_i(s="[".concat(this.spec.clientId,"] live streaming started, code: ")).call(s,c.code)),this.streamingTasks.set(e,{clientRequest:r,mode:t,url:e,taskId:a}),o()}catch(r){if(o(),this.isStartingStreamingTask=!1,!r.data||!r.data.retry||n)throw r;return r.data.changeAddress?(this.connection.tryNextAddress(),await this.startLiveStreamingTask(e,t,r)):await this.startLiveStreamingTask(e,t,r)}}else o()}stopLiveStreamingTask(e){return new wc(((t,n)=>{let r=this.streamingTasks.get(e);if(!r||!this.connection)return new Rl(Yu.UNEXPECTED_ERROR,"can not find streaming task to stop").throw();let i=r.mode;r.abortTask=()=>{Tl.debug("[".concat(this.spec.clientId,"] stop live streaming success(worker exception)")),this.streamingTasks.delete(e),t()},this.connection.request("request",{clientRequest:{command:i===oh.INJECT?"UninjectStream":"UnpublishStream",url:r.url}},!1,{url:e,command:"UnPublishStream",workerType:i===oh.TRANSCODE?1:2,requestByUser:!0,tid:(this.lastTaskId++).toString()}).then((n=>{var r;Tl.debug(_i(r="[".concat(this.spec.clientId,"] stop live streaming success, code: ")).call(r,n.code)),this.streamingTasks.delete(e),0===this.streamingTasks.size&&i!==oh.INJECT&&(this.connection&&this.connection.close(),this.connection=void 0),t(),i===oh.INJECT&&this.onInjectStatusChange&&this.onInjectStatusChange(5,this.spec.uid,e)})).catch(n)}))}async controlInjectStream(e,t,n,r){let i=this.streamingTasks.get(e);if(!i||!this.connection||i.mode!==oh.INJECT)throw new Rl(Yu.INVALID_OPERATION,"can not find inject stream task to control");return(await this.connection.request("request",{clientRequest:{command:"ControlStream",url:e,control:t,audioVolume:n,position:r}})).serverResponse}resetAllTask(){var e;let t=Ed(yd(e=this.streamingTasks).call(e));this.terminate();for(let e of t)this.startLiveStreamingTask(e.url,e.mode).catch((t=>{this.onLiveStreamError&&this.onLiveStreamError(e.url,t)}))}terminate(){this.cancelToken&&this.cancelToken.cancel(),this.streamingTasks=new pa,this.isStartingStreamingTask=!1,this.statusError=new pa,this.cancelToken=wl.CancelToken.source(),this.uapResponse=void 0,this.connection&&this.connection.close(),this.connection=void 0}async connect(e){if(this.connection)throw new Rl(Yu.UNEXPECTED_ERROR,"live streaming connection has already connected");let t=await Mt(this,hh.REQUEST_WORKER_MANAGER_LIST,e);return this.uapResponse=t,this.connection=new av(t.workerToken,this.spec,this.wsRetryConfig,e),this.connection.on(lh.WARNING,((e,t)=>this.onLiveStreamWarning&&this.onLiveStreamWarning(t,e))),this.connection.on(lh.PUBLISH_STREAM_STATUS,(e=>this.handlePublishStreamServer(e))),this.connection.on(lh.INJECT_STREAM_STATUS,(e=>this.handleInjectStreamServerStatus(e))),this.connection.on(lh.REQUEST_NEW_ADDRESS,((t,n)=>{if(!this.connection)return n(new Rl(Yu.UNEXPECTED_ERROR,"can not get new live streaming address list"));Mt(this,hh.REQUEST_WORKER_MANAGER_LIST,e).then((e=>{this.uapResponse=e,t(e.addressList)})).catch(n)})),await this.connection.init(t.addressList),this.connection}handlePublishStreamServer(e){var t=e.serverStatus&&e.serverStatus.url||"empty_url";let n=this.streamingTasks.get(t),r=e.reason;switch(e.code){case dh.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case dh.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case dh.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case dh.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:if(e=new Rl(Yu.LIVE_STREAMING_CDN_ERROR,"",{code:e.code}),n)return Tl.error(e.toString()),this.onLiveStreamError&&this.onLiveStreamError(t,e);if(!this.isStartingStreamingTask)break;this.statusError.set(t,e);case dh.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:return e=new Rl(Yu.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE,r),this.onLiveStreamWarning&&this.onLiveStreamWarning(t,e);case dh.LIVE_STREAM_RESPONSE_WORKER_LOST:case dh.LIVE_STREAM_RESPONSE_WORKER_QUIT:var i;if(this.connection){this.connection.tryNextAddress(),t=Ed(yd(i=this.streamingTasks).call(i));for(let n of t)n.abortTask?n.abortTask():(Tl.warning("[".concat(this.spec.clientId,"] publish stream status code"),e.code,"try to republish",n.url),this.startLiveStreamingTask(n.url,n.mode,new Rl(Yu.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:e.code})).then((()=>{Tl.debug("[".concat(this.spec.clientId,"] republish live stream success"),n.url)})).catch((e=>{Tl.error(e.toString()),this.onLiveStreamError&&this.onLiveStreamError(n.url,e)})))}}}handleInjectStreamServerStatus(e){let t=Number(e.uid),n=e.serverStatus&&e.serverStatus.url;switch(e.code){case 200:return void(this.onInjectStatusChange&&this.onInjectStatusChange(0,t,n));case 451:return this.onInjectStatusChange&&this.onInjectStatusChange(1,t,n),void this.streamingTasks.delete(n);case 453:return this.onInjectStatusChange&&this.onInjectStatusChange(2,t,n),void this.streamingTasks.delete(n);case 470:return this.onInjectStatusChange&&this.onInjectStatusChange(10,t,n),void this.streamingTasks.delete(n);case 499:return this.onInjectStatusChange&&this.onInjectStatusChange(3,t,n),void this.streamingTasks.delete(n);default:return void Tl.debug("inject stream server status",e)}}hasUrl(e){return this.streamingTasks.has(e)}}class cv{constructor(){this.destChannelMediaInfos=new pa}setSrcChannelInfo(e){Ke(e),this.srcChannelMediaInfo=e}addDestChannelInfo(e){Ke(e),this.destChannelMediaInfos.set(e.channelName,e)}removeDestChannelInfo(e){Be(e),this.destChannelMediaInfos.delete(e)}getSrcChannelMediaInfo(){return this.srcChannelMediaInfo}getDestChannelMediaInfo(){return this.destChannelMediaInfos}}class uv extends wd{constructor(e,t,n){super(),this.requestId=1,this.onOpen=()=>{this.emit("open"),this.startHeartBeatCheck()},this.onClose=e=>{this.emit("close"),this.dispose()},this.onMessage=e=>{if(!(e=JSON.parse(e.data))||"serverResponse"!==e.command||!e.requestId)return e&&"serverStatus"===e.command&&e.serverStatus&&e.serverStatus.command?(this.emit("status",e.serverStatus),void this.emit(e.serverStatus.command,e.serverStatus)):void 0;this.emit("req_".concat(e.requestId),e)},this.joinInfo=e,this.clientId=t,this.ws=new Xf("cross-channel-".concat(this.clientId),n),this.ws.on(ih.RECONNECTING,(()=>{this.ws.reconnectMode="retry",this.emit("reconnecting")})),this.ws.on(ih.CONNECTED,this.onOpen),this.ws.on(ih.ON_MESSAGE,this.onMessage),this.ws.on(ih.CLOSED,this.onClose)}isConnect(){return"connected"===this.ws.state}sendMessage(e){let t=this.requestId++;return e.requestId=t,e.seq=t,this.ws.sendMessage(e),t}waitStatus(e){return new wc(((t,n)=>{let r=window.setTimeout((()=>{n(new Rl(Yu.TIMEOUT,"wait status timeout, status: ".concat(e)))}),5e3);this.once(e,(i=>{window.clearTimeout(r),i.state&&0!==i.state?n(new Rl(Yu.CROSS_CHANNEL_WAIT_STATUS_ERROR,"wait status error, status: ".concat(e))):t(void 0)})),this.once("dispose",(()=>{window.clearTimeout(r),n(new Rl(Yu.WS_ABORT))}))}))}async request(e){if("closed"===this.ws.state)throw new Rl(Yu.WS_DISCONNECT);let t=()=>new wc(((e,t)=>{this.ws.once(ih.CLOSED,(()=>t(new Rl(Yu.WS_ABORT)))),this.ws.once(ih.CONNECTED,e)}));"connected"!==this.ws.state&&await t();let n=this.sendMessage(e);if(e=await new wc(((e,t)=>{const r=()=>{t(new Rl(Yu.WS_ABORT))};this.ws.once(ih.RECONNECTING,r),this.ws.once(ih.CLOSED,r),this.once("req_".concat(n),e),xt(3e3).then((()=>{this.removeAllListeners("req_".concat(n)),this.ws.off(ih.RECONNECTING,r),this.ws.off(ih.CLOSED,r),t(new Rl(Yu.TIMEOUT,"cross channel ws request timeout"))}))})),!e||200!==e.code)throw new Rl(Yu.CROSS_CHANNEL_SERVER_ERROR_RESPONSE,"response: ".concat(Fr(e)));return e}async connect(e){this.ws.removeAllListeners(ih.REQUEST_NEW_URLS),this.ws.on(ih.REQUEST_NEW_URLS,(t=>{t(e)})),await this.ws.init(e)}dispose(){this.clearHeartBeatCheck(),this.emit("dispose"),this.removeAllListeners(),this.ws.close()}sendPing(e){let t=this.requestId++;return e.requestId=t,this.ws.sendMessage(e),t}startHeartBeatCheck(){this.heartBeatTimer=window.setInterval((()=>{this.sendPing({command:"ping",appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sid:this.joinInfo.sid,ts:+new Date,requestId:0})}),3e3)}clearHeartBeatCheck(){window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=void 0}}class lv extends wd{constructor(e,t,n,r){super(),this.cancelToken=wl.CancelToken.source(),this.requestId=0,this._state="RELAY_STATE_IDLE",this.errorCode="RELAY_OK",this.onStatus=e=>{var t;Tl.debug(_i(t="[".concat(this.clientId,"] ChannelMediaStatus: ")).call(t,Fr(e))),e&&e.command&&("onAudioPacketReceived"===e.command&&this.emit("event","PACKET_RECEIVED_AUDIO_FROM_SRC"),"onVideoPacketReceived"===e.command&&this.emit("event","PACKET_RECEIVED_VIDEO_FROM_SRC"),"onSrcTokenPrivilegeDidExpire"===e.command&&(this.errorCode="SRC_TOKEN_EXPIRED",this.state="RELAY_STATE_FAILURE"),"onDestTokenPrivilegeDidExpire"===e.command&&(this.errorCode="DEST_TOKEN_EXPIRED",this.state="RELAY_STATE_FAILURE"))},this.onReconnect=async()=>{Tl.debug("[".concat(this.clientId,"] ChannelMediaSocket disconnect, reconnecting")),this.emit("event","NETWORK_DISCONNECTED"),this.state="RELAY_STATE_IDLE",this.prevChannelMediaConfig&&this.sendStartRelayMessage(this.prevChannelMediaConfig).catch((e=>{"RELAY_STATE_IDLE"!==this.state&&(Tl.error("auto restart channel media relay failed",e.toString()),this.errorCode="SERVER_CONNECTION_LOST",this.state="RELAY_STATE_FAILURE")}))},this.joinInfo=e,this.clientId=t,this.signal=new uv(this.joinInfo,this.clientId,n),this.httpRetryConfig=r}set state(e){e!==this._state&&("RELAY_STATE_FAILURE"!==e&&(this.errorCode="RELAY_OK"),this.emit("state",e,this.errorCode),this._state=e)}get state(){return this._state}async startChannelMediaRelay(e){if("RELAY_STATE_IDLE"!==this.state)throw new Rl(Yu.INVALID_OPERATION);this.state="RELAY_STATE_CONNECTING",await this.connect(),Tl.debug("[".concat(this.clientId,"] startChannelMediaRelay: connect success"));try{await this.sendStartRelayMessage(e)}catch(e){if(e.data&&e.data.serverResponse&&"SetSourceChannel"===e.data.serverResponse.command)throw new Rl(Yu.CROSS_CHANNEL_FAILED_JOIN_SRC);if(e.data&&e.data.serverResponse&&"SetDestChannelStatus"===e.serverResponse.command)throw new Rl(Yu.CROSS_CHANNEL_FAILED_JOIN_DEST);if(e.data&&e.data.serverResponse&&"StartPacketTransfer"===e.serverResponse.command)throw new Rl(Yu.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST);throw e}this.prevChannelMediaConfig=e}async updateChannelMediaRelay(e){if("RELAY_STATE_RUNNING"!==this.state)throw new Rl(Yu.INVALID_OPERATION);await this.sendUpdateMessage(e),this.prevChannelMediaConfig=e}async stopChannelMediaRelay(){await this.sendStopRelayMessage(),Tl.debug("[".concat(this.clientId,"] stopChannelMediaRelay: send stop message success")),this.state="RELAY_STATE_IDLE",this.dispose()}dispose(){Tl.debug("[".concat(this.clientId,"] disposeChannelMediaRelay")),this.cancelToken.cancel(),this.cancelToken=wl.CancelToken.source(),this.state="RELAY_STATE_IDLE",this.emit("dispose"),this.signal.dispose(),this.prevChannelMediaConfig=void 0}async connect(){let e=await un(this.joinInfo,this.cancelToken.token,this.httpRetryConfig);this.workerToken=e.workerToken,await this.signal.connect(e.addressList),this.emit("event","NETWORK_CONNECTED"),this.signal.on("status",this.onStatus),this.signal.on("reconnecting",this.onReconnect)}async sendStartRelayMessage(e){var t=this.genMessage(ph.StopPacketTransfer);await this.signal.request(t),await this.signal.waitStatus("Normal Quit"),Tl.debug("[".concat(this.clientId,"] startChannelMediaRelay: StopPacketTransfer success")),t=this.genMessage(ph.SetSdkProfile,e),await this.signal.request(t),Tl.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSdkProfile success")),t=this.genMessage(ph.SetSourceChannel,e),await this.signal.request(t),await this.signal.waitStatus("SetSourceChannelStatus"),this.emit("event","PACKET_JOINED_SRC_CHANNEL"),Tl.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSourceChannel success")),t=this.genMessage(ph.SetSourceUserId,e),await this.signal.request(t),Tl.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSourceUserId success")),t=this.genMessage(ph.SetDestChannel,e),await this.signal.request(t),await this.signal.waitStatus("SetDestChannelStatus"),this.emit("event","PACKET_JOINED_DEST_CHANNEL"),Tl.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetDestChannel success")),e=this.genMessage(ph.StartPacketTransfer,e),await this.signal.request(e),this.emit("event","PACKET_SENT_TO_DEST_CHANNEL"),this.state="RELAY_STATE_RUNNING",Tl.debug("[".concat(this.clientId,"] startChannelMediaRelay: StartPacketTransfer success"))}async sendUpdateMessage(e){e=this.genMessage(ph.UpdateDestChannel,e),await this.signal.request(e),this.emit("event","PACKET_UPDATE_DEST_CHANNEL"),Tl.debug("[".concat(this.clientId,"] sendUpdateMessage: UpdateDestChannel success"))}async sendStopRelayMessage(){let e=this.genMessage(ph.StopPacketTransfer);await this.signal.request(e),Tl.debug("[".concat(this.clientId,"] sendStopRelayMessage: StopPacketTransfer success"))}genMessage(e,t){let n=[],r=[],i=[];this.requestId+=1;let o={appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sdkVersion:ku,sid:this.joinInfo.sid,ts:tl(),requestId:this.requestId,seq:this.requestId,allocate:!0,clientRequest:{}};"4.7.3"===o.sdkVersion&&(o.sdkVersion="0.0.1");let a=null,s=null;switch(e){case ph.SetSdkProfile:return o.clientRequest={command:"SetSdkProfile",type:"multi_channel"},o;case ph.SetSourceChannel:if(s=t&&t.getSrcChannelMediaInfo(),!s)throw new Rl(Yu.UNEXPECTED_ERROR,"can not find source config");return o.clientRequest={command:"SetSourceChannel",uid:"0",channelName:s.channelName,token:s.token||this.joinInfo.appId},o;case ph.SetSourceUserId:if(s=t&&t.getSrcChannelMediaInfo(),!s)throw new Rl(Yu.UNEXPECTED_ERROR,"can not find source config");return o.clientRequest={command:"SetSourceUserId",uid:s.uid+""},o;case ph.SetDestChannel:if(a=t&&t.getDestChannelMediaInfo(),!a)throw new Rl(Yu.UNEXPECTED_ERROR,"can not find dest config");return Oa(a).call(a,(e=>{n.push(e.channelName),r.push(e.uid+""),i.push(e.token||this.joinInfo.appId)})),o.clientRequest={command:"SetDestChannel",channelName:n,uid:r,token:i},o;case ph.StartPacketTransfer:return o.clientRequest={command:"StartPacketTransfer"},o;case ph.Reconnect:return o.clientRequest={command:"Reconnect"},o;case ph.StopPacketTransfer:return o.clientRequest={command:"StopPacketTransfer"},o;case ph.UpdateDestChannel:if(a=t&&t.getDestChannelMediaInfo(),!a)throw new Rl(Yu.UNEXPECTED_ERROR,"can not find dest config");return Oa(a).call(a,(e=>{n.push(e.channelName),r.push(e.uid+""),i.push(e.token||this.joinInfo.appId)})),o.clientRequest={command:"UpdateDestChannel",channelName:n,uid:r,token:i},o}return o}}class hv{constructor(e,t){this._trust_stream_added_state_=this._trust_video_mute_state_=this._trust_audio_mute_state_=this._trust_video_enabled_state_=this._trust_audio_enabled_state_=this._trust_in_room_=!0,this._video_muted_=this._audio_muted_=!1,this._video_enabled_=this._audio_enabled_=!0,this._video_added_=this._audio_added_=!1,this.uid=e,this._uintid=t}get hasVideo(){return this._video_enabled_&&!this._video_muted_&&this._video_added_}get hasAudio(){return this._audio_enabled_&&!this._audio_muted_&&this._audio_added_}get audioTrack(){if(this.hasAudio)return this._audioTrack}get videoTrack(){if(this.hasVideo)return this._videoTrack}}let dv,fv=async e=>{var t,n=Kt("MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDCMnXAHkKIGAM+x4N22gCI+Wyu\nSTM9ztkT3uYslTT2PuKmZfPzhH6kVdO7PTjGCOZnAsyb3oTtWat0KcxQ4jxvqQV+\nHvYl3iI1Yd4vl2c3qRMJPLtRDfNxa2Mcxgq7e9aEUibzdd0st+OJAy3tOj/Y0aVy\nxQiYDz3vqa6bP29adwIDAQAB");return n=await window.crypto.subtle.importKey("spki",n,{name:"RSA-OAEP",hash:"SHA-256"},!0,["encrypt"]),t=e,e=(new TextEncoder).encode(t),t=await window.crypto.subtle.encrypt({name:"RSA-OAEP"},n,e),Ht(new Uint8Array(t))};class pv{constructor(e,t){var n;this.name=e,this.time=performance.now(),this.sequence=Mc(n=Sh[t]).call(n,e)}setElapse(e){this.elapse=e}}let gv=new pa;class Av{constructor(e,t){this.records=[],this._id=e,this._group=t,this._localTimeStamp=tl(),this._performanceTimeStamp=performance.now()}checkPoint(e){var t;let n=new pv(e,this._group);-1===n.sequence&&Tl.warning("[".concat(this._id,"] check point record failed, cannot get the sequence")),this.records.push(n),(e=Wc(t=this.records).call(t,(e=>e.sequence===n.sequence-1)))&&n.setElapse(n.time-e.time)}getRecord(e){var t;return Wc(t=this.records).call(t,(t=>t&&t.name===e))}resetRecords(){this.records.length=0}}var vv=function(e,t,n,r){var i,o=arguments.length,a=3>o?t:null===r?r=ns(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;0<=s;s--)(i=e[s])&&(a=(3>o?i(a):3<o?i(t,n,a):i(t,n))||a);return 3<o&&a&&qa(t,n,a),a},mv=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};class yv extends wd{constructor(e){var t,n,r,i;let o;if(super(),this._users=[],this._sessionId=null,this._bindEnabledTracks=[],this._leaveMutex=new Nd("client-leave"),this._publishMutex=new Nd("client-publish"),this._subscribeMutex=new pa,this._remoteStream=new pa,this._encryptionMode="none",this._encryptionSecret=null,this._encryptionSalt=null,this._turnServer={servers:[],mode:"auto"},this._cloudProxyServerMode="disabled",this._isDualStreamEnabled=!1,this._streamFallbackTypeCacheMap=new pa,this._remoteStreamTypeCacheMap=new pa,this._axiosCancelSource=wl.CancelToken.source(),this._networkQualitySensitivity="normal",this._useLocalAccessPoint=!1,this._handleLocalTrackEnable=(e,t,n)=>{this.publish(e,!1).then(t).catch(n)},this._handleLocalTrackDisable=(e,t,n)=>{this.unpublish(e,!1).then(t).catch(n)},this._handleUserOnline=e=>{var t;this.isStringUID&&"string"!=typeof e.uid&&Tl.error("[".concat(this._clientId,"] StringUID is Mixed with UintUID"));let n=Wc(t=this._users).call(t,(t=>t.uid===e.uid));n?n._trust_in_room_=!0:(t=new hv(e.uid,e.uint_id||e.uid),this._users.push(t),Tl.debug("[".concat(this._clientId,"] user online"),e.uid),this.emit(Vl.USER_JOINED,t))},this._handleUserOffline=e=>{var t;let n=Wc(t=this._users).call(t,(t=>t.uid===e.uid));n&&(this._handleRemoveStream(e),Qt(this._users,n),this._remoteStreamTypeCacheMap.delete(n.uid),this._streamFallbackTypeCacheMap.delete(n.uid),Tl.debug("[".concat(this._clientId,"] user offline"),e.uid,"reason:",e.reason),this.emit(Vl.USER_LEAVED,n,e.reason))},this._handleAddAudioOrVideoStream=(e,t,n)=>{var r,i,o;let a=Wc(r=this._users).call(r,(e=>e.uid===t));var s,c;a?(Tl.debug(_i(i=_i(o="[".concat(this._clientId,"] stream added with uid ")).call(o,t,", type ")).call(i,e)),r="audio"===e?a.hasAudio:a.hasVideo,a._uintid||(a._uintid=n||t),a._trust_stream_added_state_=!0,"audio"===e?a._audio_added_=!0:a._video_added_=!0,("audio"===e?a.hasAudio:a.hasVideo)&&!r&&(Tl.info(_i(s=_i(c="[".concat(this._clientId,"] remote user ")).call(c,a.uid," published ")).call(s,e)),this.emit(Vl.USER_PUBLISHED,a,e)),"video"===e?Rd.onGatewayStream(this._sessionId,xl.ON_ADD_VIDEO_STREAM,Dl.ON_ADD_VIDEO_STREAM,{peer:n||t}):Rd.onGatewayStream(this._sessionId,xl.ON_ADD_AUDIO_STREAM,Dl.ON_ADD_AUDIO_STREAM,{peer:n||t}),(e=this._remoteStream.get(t))&&e.readyToReconnect&&"connecting"===e.connectionState&&e.reconnectPC().catch((e=>{Tl.error("[".concat(this._clientId,"] resubscribe error"),e.toString())}))):Tl.error("[".concat(this._clientId,"] can not find target user!(on_add_stream)"))},this._handleRemoveStream=e=>{var t,n;let r=Wc(t=this._users).call(t,(t=>t.uid===e.uid));r?(Tl.debug(_i(n="[".concat(this._clientId,"] stream removed with uid ")).call(n,e.uid)),t=()=>{},r.hasAudio&&r.hasVideo?t=()=>{var e,t;Tl.info(_i(e="[".concat(this._clientId,"] remote user ")).call(e,r.uid," unpublished audio track")),this.emit(Vl.USER_UNPUBLISHED,r,"audio"),Tl.info(_i(t="[".concat(this._clientId,"] remote user ")).call(t,r.uid," unpublished video track")),this.emit(Vl.USER_UNPUBLISHED,r,"video")}:r.hasVideo?t=()=>{var e;Tl.info(_i(e="[".concat(this._clientId,"] remote user ")).call(e,r.uid," unpublished video track")),this.emit(Vl.USER_UNPUBLISHED,r,"video")}:r.hasAudio&&(t=()=>{var e;Tl.info(_i(e="[".concat(this._clientId,"] remote user ")).call(e,r.uid," unpublished audio track")),this.emit(Vl.USER_UNPUBLISHED,r,"audio")}),r._trust_stream_added_state_=!0,r._audio_added_=!1,r._video_added_=!1,(n=this._remoteStream.get(r.uid))&&(n.closeP2PConnection(),this._remoteStream.delete(r.uid)),Rd.onGatewayStream(this._sessionId,xl.ON_REMOVE_STREAM,Dl.ON_REMOVE_STREAM,{peer:e.uint_id||e.uid}),t()):Tl.warning("[".concat(this._clientId,"] can not find target user!(on_remove_stream)"))},this._handleSetStreamLocalEnable=(e,t,n)=>{var r,i,o,a,s,c;let u=Wc(r=this._users).call(r,(e=>e.uid===t));if(u){if(Tl.debug(_i(i=_i(o=_i(a="[".concat(this._clientId,"] local ")).call(a,e," ")).call(o,n?"enabled":"disabled"," with uid ")).call(i,t)),r="audio"===e?u.hasAudio:u.hasVideo,"audio"===e){u._trust_audio_enabled_state_=!0;var l,h,d=u._audio_enabled_;if(u._audio_enabled_=n,u._audio_enabled_===d)return;n=u._audio_enabled_?"enable-local-audio":"disable-local-audio",Tl.debug(_i(l=_i(h="[".concat(this._clientId,"] user-info-updated, uid: ")).call(h,t,", msg: ")).call(l,n)),this.emit(Vl.USER_INFO_UPDATED,t,n)}else{if(u._trust_video_enabled_state_=!0,l=u._video_enabled_,u._video_enabled_=n,u._video_enabled_===l)return;var f;n=u._video_enabled_?"enable-local-video":"disable-local-video",Tl.debug(_i(d=_i(f="[".concat(this._clientId,"] user-info-update, uid: ")).call(f,t,", msg: ")).call(d,n)),this.emit(Vl.USER_INFO_UPDATED,t,n)}if(r!==(n="audio"===e?u.hasAudio:u.hasVideo)){var p,g;if(!r&&n)return Tl.info(_i(p=_i(g="[".concat(this._clientId,"] remote user ")).call(g,t," published ")).call(p,e)),void this.emit(Vl.USER_PUBLISHED,u,e);(p=this._remoteStream.get(t))&&((g=Un({},p.subscribeOptions)).audio=!!u.hasAudio&&g.audio,g.video=!!u.hasVideo&&g.video,g.audio||g.video?p.setSubscribeOptions(g):(p.closeP2PConnection().catch((e=>{Tl.warning("close sub pc error",e)})),this._remoteStream.delete(u.uid))),Tl.info(_i(s=_i(c="[".concat(this._clientId,"] remote user ")).call(c,u.uid," unpublished ")).call(s,e)),this.emit(Vl.USER_UNPUBLISHED,u,e)}}else Tl.error("[".concat(this._clientId,"] can not find target user!(disable_local)"))},this._handleMuteStream=(e,t,n)=>{var r,i,o;Tl.debug("[".concat(this._clientId,"] receive mute message"),e,t,n);let a=Wc(r=this._users).call(r,(t=>t.uid===e));var s;if(a){if(r="audio"===t?a.hasAudio:a.hasVideo,"audio"===t){a._trust_audio_mute_state_=!0;var c,u,l=a._audio_muted_;if(a._audio_muted_=n,a._audio_muted_===l)return;n=a._audio_muted_?"mute-audio":"unmute-audio",Tl.debug(_i(c=_i(u="[".concat(this._clientId,"] user-info-update, uid: ")).call(u,e,", msg: ")).call(c,n)),this.emit(Vl.USER_INFO_UPDATED,e,n)}else{if(a._trust_video_mute_state_=!0,c=a._video_muted_,a._video_muted_=n,a._video_muted_===c)return;var h;n=a._video_muted_?"mute-video":"unmute-video",Tl.debug(_i(l=_i(h="[".concat(this._clientId,"] user-info-update, uid: ")).call(h,e,", msg: ")).call(l,n)),this.emit(Vl.USER_INFO_UPDATED,e,n)}if(r!==(n="audio"===t?a.hasAudio:a.hasVideo)){var d,f;if(!r&&n)return Tl.info(_i(d=_i(f="[".concat(this._clientId,"] remote user ")).call(f,e," published ")).call(d,t)),void this.emit(Vl.USER_PUBLISHED,a,t);(d=this._remoteStream.get(e))&&((f=Un({},d.subscribeOptions)).audio=!!a.hasAudio&&f.audio,f.video=!!a.hasVideo&&f.video,"video"===t&&d.pc._statsFilter.setVideoIsReady(!1),f.audio||f.video?d.setSubscribeOptions(f):(d.closeP2PConnection().catch((e=>{Tl.warning("close sub pc error",e)})),this._remoteStream.delete(a.uid))),Tl.info(_i(i=_i(o="[".concat(this._clientId,"] remote user ")).call(o,e," unpublished ")).call(i,t)),this.emit(Vl.USER_UNPUBLISHED,a,t)}}else Tl.warning(_i(s="[".concat(this._clientId,"] can not find remote user, ignore mute event, uid: ")).call(s,e))},this._handleP2PLost=e=>{Tl.debug("[".concat(this._clientId,"] receive p2p lost"),e);let t=null;if(this._highStream&&this._highStream.pc.ID===e.p2pid)t=this._highStream;else if(this._lowStream&&this._lowStream.pc.ID===e.p2pid)t=this._lowStream;else{var n;Oa(n=this._remoteStream).call(n,(n=>{n.pc.ID===e.p2pid&&(t=n)}))}t?t.emit(Xl.GATEWAY_P2P_LOST,e.p2pid):Tl.warning("P2PLost stream not found",e)},this._handleTokenWillExpire=()=>{Tl.debug("[".concat(this._clientId,"] received message onTokenPrivilegeWillExpire")),this.emit(Vl.ON_TOKEN_PRIVILEGE_WILL_EXPIRE)},this._handleBeforeUnload=e=>{void 0!==e.returnValue&&""!==e.returnValue||(this.leave(),Tl.info("[".concat(this._clientId,"] auto leave onbeforeunload")))},this._handleUpdateNetworkQuality=()=>{var e;if("normal"!==this._networkQualitySensitivity){if(navigator&&void 0!==navigator.onLine&&!navigator.onLine)return void this.emit(Vl.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6});var t={downlinkNetworkQuality:0,uplinkNetworkQuality:0};this._highStream&&!this._highStream.detecting&&(t.uplinkNetworkQuality=this._highStream.getNetworkQuality());var n=0;Oa(e=this._remoteStream).call(e,(e=>n+=e.getNetworkQuality())),0<this._remoteStream.size&&(t.downlinkNetworkQuality=Math.round(n/this._remoteStream.size)),this.emit(Vl.NETWORK_QUALITY,t)}},this._codec=e.codec,this._mode=e.mode,e.proxyServer&&(this._proxyServer=e.proxyServer,Rd.setProxyServer(this._proxyServer),Tl.setProxyServer(this._proxyServer)),e.turnServer&&(this._turnServer=Un({},this._turnServer,{mode:"manual"},e.turnServer)),this._clientId=Lt(5,"client-"),Tl.info(_i(t=_i(n=_i(r=_i(i="[".concat(this._clientId,"] Initializing AgoraRTC client v")).call(i,ku," build: ")).call(r,"v4.7.3-0-g0eb931c7(11/16/2021, 7:57:58 PM)",", mode: ")).call(n,this._mode,", codec: ")).call(t,this._codec)),this._performanceRecorder=function(e,t){return t=new Av(e,t),gv.set(e,t),t}(this._clientId,"join"),e.clientRoleOptions)try{qe(e.clientRoleOptions),o=La({},e.clientRoleOptions)}catch(e){var a;Tl.warning(_i(a="[".concat(this._clientId,"] ")).call(a,e.toString()))}this._statsCollector=new cf(this._clientId),this._statsCollector.onStatsException=(e,t,n)=>{var r,i,o;Tl.debug(_i(r=_i(i=_i(o="[".concat(this._clientId,"] receive exception msg, code: ")).call(o,e,", msg: ")).call(i,t,", uid: ")).call(r,n)),this.emit(Vl.EXCEPTION,{code:e,msg:t,uid:n})},this._statsCollector.onUploadPublishDuration=(e,t,n,r)=>{var i;let o=Wc(i=this._users).call(i,(t=>t.uid===e));o&&Rd.peerPublishStatus(this._sessionId,{subscribeElapse:r,audioPublishDuration:t,videoPublishDuration:n,peer:o._uintid})},this._gateway=new tp({clientId:this._clientId,mode:this._mode,codec:this._codec,websocketRetryConfig:e.websocketRetryConfig||Td,httpRetryConfig:e.httpRetryConfig||Td,forceWaitGatewayResponse:void 0===e.forceWaitGatewayResponse||e.forceWaitGatewayResponse,statsCollector:this._statsCollector,role:e.role,clientRoleOptions:o}),this._config=e,this._configDistribute=new oA,this._handleGatewayEvents()}get connectionState(){return this._gateway.state}get remoteUsers(){return this._users}get localTracks(){return this._highStream?this._highStream.getAllTracks():[]}get uid(){return this._uid}get channelName(){return this._channelName}get isStringUID(){return!!this._joinInfo&&!!this._joinInfo.stringUid}async join(e,t,n,r,i){var o;this._performanceRecorder.checkPoint("startJoin");var a="HTTPS"===(dv||dv||(dv=(window.location.protocol.split(":")[0]||"").toUpperCase(),dv));let s=void 0!==window.isSecureContext?window.isSecureContext:"Browser Not Support",c=()=>{Tl.warning("The website must be running in a secure context (About secure context: https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts ), otherwise the media collection will be restricted by the browser")};void 0!==window.isSecureContext?window.isSecureContext||c():a||c(),a=Rd.reportApiInvoke(this._sessionId,{name:Pl.JOIN,options:[e,t,n,r],states:{isHttps:a,isSecureContext:s},tag:Bl.TRACER});try{if(!n&&null!==n)throw new Rl(Yu.INVALID_PARAMS,"Invalid token: ".concat(n,". If you don not use token, set it to null"));n&&Le(n,"token",1,2047),Le(e,"appid",1,2047),Be(t),r&&Me(r),i&&Le(i,"optionalInfo",1,2047)}catch(e){throw a.onError(e),e}if(Tl.info(_i(o="[".concat(this._clientId,"] start join channel ")).call(o,t)),this._leaveMutex.isLocked&&(Tl.debug("[".concat(this._clientId,"] join: waiting leave operation")),(await this._leaveMutex.lock())(),Tl.debug("[".concat(this._clientId,"] join: continue"))),"DISCONNECTED"!==this.connectionState)throw e=new Rl(Yu.INVALID_OPERATION,"[".concat(this._clientId,"] Client already in connecting/connected state")),a.onError(e),e;this._sessionId||(this._sessionId=Lt(32,"").toUpperCase()),this._gateway.state="CONNECTING",i={clientId:this._clientId,appId:e,sid:this._sessionId,cname:t,uid:"string"!=typeof r?r:null,turnServer:this._turnServer,proxyServer:this._proxyServer,token:n||e,cloudProxyServer:this._cloudProxyServerMode,optionalInfo:i,useLocalAccessPoint:this._useLocalAccessPoint},"string"==typeof r&&(i.stringUid=r,this._uintUid?(i.uid=this._uintUid,this._uintUid=void 0):i.uid=0),"none"!==this._encryptionMode&&this._encryptionSecret&&(i.aesmode=this._encryptionMode,i.aespassword=await fv(this._encryptionSecret),this._encryptionSalt&&(i.aessalt=this._encryptionSalt)),this._startSession(this._sessionId,{channel:t,appId:e}),el((()=>{"CONNECTING"===this.connectionState&&Rd.joinChannelTimeout(this._sessionId,5)}),5e3);try{var u;let r;if("443only"===i.cloudProxyServer)i.proxyServer=Mu.PROXY_SERVER_TYPE2;else if("proxy3"===i.cloudProxyServer||"proxy4"===i.cloudProxyServer||"proxy5"===i.cloudProxyServer){let e=Mu.PROXY_SERVER_TYPE3;Ju(e)?i.proxyServer=e[0]:i.proxyServer=e}if(Rd.setProxyServer(i.proxyServer),Tl.setProxyServer(i.proxyServer),this._performanceRecorder.checkPoint("startRequestAp"),i.stringUid&&!i.uid&&"normal"===i.cloudProxyServer){var l;await rn(i,this._axiosCancelSource.token,this._config.httpRetryConfig||Td,!1);let e=await on(i.stringUid,i,this._axiosCancelSource.token,this._config.httpRetryConfig||Td);Tl.debug(_i(l="getUserAccount Success ".concat(i.stringUid," => ")).call(l,e)),i.uid=e,r=await nn(i,this._axiosCancelSource.token,this._config.httpRetryConfig||Td)}else{if(i.stringUid&&!i.uid){var h;let e=await on(i.stringUid,i,this._axiosCancelSource.token,this._config.httpRetryConfig||Td);Tl.debug(_i(h="getUserAccount Success ".concat(i.stringUid," => ")).call(h,e)),i.uid=e}r=await rn(i,this._axiosCancelSource.token,this._config.httpRetryConfig||Td,!0)}this._performanceRecorder.checkPoint("startJoinGateway"),this._configDistribute.startGetConfigDistribute(i,this._axiosCancelSource.token),this._configDistribute.on(wh.UPDATE_BITRATE_LIMIT,(e=>{this._highStream&&this._highStream.handleUpdateBitrateLimit(e.uplink),e.low_stream_uplink&&this._lowStream&&this._lowStream.handleUpdateBitrateLimit({max_bitrate:e.low_stream_uplink.bitrate,min_bitrate:e.low_stream_uplink.bitrate||0})})),this._key=n||e,this._joinInfo=Un({},i,{cid:r.gatewayInfo.cid,uid:i.uid?i.uid:r.gatewayInfo.uid,vid:r.gatewayInfo.vid,apResponse:r.gatewayInfo.res,uni_lbs_ip:r.gatewayInfo.uni_lbs_ip,gatewayAddrs:r.gatewayInfo.gatewayAddrs});let o=await this._gateway.join(this._joinInfo,this._key);return a.onSuccess(o),this._appId=e,this._channelName=i.cname,this._uid=o,this._networkQualityInterval&&window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=window.setInterval(this._handleUpdateNetworkQuality,2e3),window.addEventListener("beforeunload",this._handleBeforeUnload),Tl.info(_i(u="[".concat(this._clientId,"] Joining channel success: ")).call(u,t)),el((()=>{Tl.startUpload()}),5e3),this._performanceRecorder.checkPoint("finishJoin"),d=this,ru(Uu).call(Uu,d)||Uu.push(d),o}catch(t){throw e=Ju(t)?t[0]:t,Tl.error("[".concat(this._clientId,"] Joining channel failed, rollback"),e),e.code!==Yu.OPERATION_ABORTED&&(this._gateway.state="DISCONNECTED",this._reset()),a.onError(e),e}var d}async leave(){let e=Rd.reportApiInvoke(this._sessionId,{name:Pl.LEAVE,options:[],tag:Bl.TRACER});Tl.info("[".concat(this._clientId,"] Leaving channel")),window.removeEventListener("beforeunload",this._handleBeforeUnload),this._reset();var t=Mc(Uu).call(Uu,this);if(-1!==t&&Nc(Uu).call(Uu,t,1),t=await this._leaveMutex.lock(),"DISCONNECTED"===this.connectionState)return Tl.info("[".concat(this._clientId,"] Leaving channel repeated, success")),t(),e.onSuccess();await this._gateway.leave("CONNECTED"!==this.connectionState),Tl.info("[".concat(this._clientId,"] Leaving channel success")),t(),e.onSuccess()}async publish(e,t=!0){var n,r;Ju(e)||(e=[e]);let i=Rd.reportApiInvoke(this._sessionId,{name:Pl.PUBLISH,options:Sc(e).call(e,(e=>e?Object(e).toString():"null")),tag:Bl.TRACER});if(0===e.length)return e=new Rl(Yu.INVALID_PARAMS,"track list is empty"),i.onError(e),e.throw();if("audience"===this._gateway.role)return e=new Rl(Yu.INVALID_OPERATION,"audience can not publish stream"),i.onError(e),e.throw();for(let n of e){if(!(n instanceof xd))return e=new Rl(Yu.INVALID_PARAMS,"pamameter is not local track"),i.onError(e),e.throw();if(!n._enabled&&t)return e=new Rl(Yu.TRACK_IS_DISABLED,"can not publish a disabled track: ".concat(n.getTrackId())),i.onError(e),e.throw()}if(Tl.info(_i(n="[".concat(this._clientId,"] Publishing tracks, id ")).call(n,Sc(e).call(e,(e=>"".concat(e.getTrackId()," "))))),await this._configDistribute.awaitConfigDistributeComplete(),t&&Oa(e).call(e,(e=>{var t;let n=this._configDistribute.getBitrateLimit();var r;e instanceof zA&&n&&e.setBitrateLimit(n.uplink),-1===Mc(t=this._bindEnabledTracks).call(t,e)&&(e.addListener(Ah.NEED_ADD_TRACK,this._handleLocalTrackEnable),e.addListener(Ah.NEED_REMOVE_TRACK,this._handleLocalTrackDisable),this._bindEnabledTracks.push(e),ne()&&e.muted&&Tl.debug(_i(r="[".concat(this._clientId,"] on firefox publish a muted track ")).call(r,e.getTrackId(),", skip the pub operation and wait unmute")))})),ne()&&0===(e=os(e).call(e,(e=>!e.muted))).length)i.onSuccess(Sc(e).call(e,(e=>e.trackMediaType+":"+e.getTrackLabel())).toString());else{n=await this._publishMutex.lock();try{let t=await this._publishHighStream(e),r=(t.audioTrack,t.videoTrack);this._isDualStreamEnabled&&r&&!this._lowStream&&await this._publishLowStream(r),n(),i.onSuccess(Sc(e).call(e,(e=>e.trackMediaType+":"+e.getTrackLabel())).toString())}catch(r){throw n(),t&&Oa(e).call(e,(e=>{var t,n;let r=Mc(t=this._bindEnabledTracks).call(t,e);-1!==r&&(e.off(Ah.NEED_ADD_TRACK,this._handleLocalTrackEnable),e.off(Ah.NEED_REMOVE_TRACK,this._handleLocalTrackDisable),Nc(n=this._bindEnabledTracks).call(n,r,1))})),i.onError(r),Tl.error("[".concat(this._clientId,"] publish error"),r.toString()),r}Tl.info(_i(r="[".concat(this._clientId,"] Publish success, id ")).call(r,Sc(e).call(e,(e=>"".concat(e.getTrackId()," ")))))}}async unpublish(e,t=!0){var n;let r,i,o,a=await this._publishMutex.lock();try{var s,c;if(!this._highStream||(r=this._highStream.getAllTracks(),e?Ju(e)||(e=[e]):e=this._highStream.getAllTracks(),i=function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n+=1){let r=e[n];if(os(e).call(e,(e=>e===r)).length!==os(t).call(t,(e=>e===r)).length)return!1}return!0}(r,e),o=Rd.reportApiInvoke(this._sessionId,{name:Pl.UNPUBLISH,options:Sc(e).call(e,(e=>e.getTrackId())),tag:Bl.TRACER}),Tl.info(_i(s=_i(c="[".concat(this._clientId,"] Unpublish tracks, tracks ")).call(c,Sc(e).call(e,(e=>"".concat(e.getTrackId()," "))),", isClosePC: ")).call(s,i)),!this._highStream))return Tl.warning("[".concat(this._clientId,"] Could not find tracks to unpublish")),void(a&&a())}catch(e){throw a&&a(),e}try{this._lowStream&&0<os(e).call(e,(e=>"video"===e.trackMediaType)).length&&(await this._lowStream.closeP2PConnection(),this._lowStream=void 0),i?await this._highStream.closeP2PConnection():await this._highStream.removeTracks(e,t),a&&a()}catch(e){if(e.code!==Yu.OPERATION_ABORTED)throw o.onError(e),Tl.error("[".concat(this._clientId,"] unpublish error"),e.toString()),a&&a(),e;Tl.debug("[".concat(this._clientId,"] ignore unpub operation abort")),a&&a()}this._highStream&&"disconnected"===this._highStream.connectionState&&(this._highStream=void 0,this._lowStream=void 0),t&&Oa(e).call(e,(e=>{var t,n;let r=Mc(t=this._bindEnabledTracks).call(t,e);-1!==r&&(e.off(Ah.NEED_ADD_TRACK,this._handleLocalTrackEnable),e.off(Ah.NEED_REMOVE_TRACK,this._handleLocalTrackDisable),Nc(n=this._bindEnabledTracks).call(n,r,1))})),Tl.info(_i(n="[".concat(this._clientId,"] Unpublish success,tracks ")).call(n,Sc(e).call(e,(e=>"".concat(e.getTrackId()))))),o.onSuccess()}async subscribe(e,t){var n,r,i,o;xe(t,"mediaType",["audio","video"]);let a=Rd.reportApiInvoke(this._sessionId,{name:Pl.SUBSCRIBE,options:[e.uid,t],tag:Bl.TRACER});if(!this._joinInfo)throw t=new Rl(Yu.INVALID_OPERATION,"Can't subscribe stream, not joined"),a.onError(t),t;if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw t=new Rl(Yu.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state")),a.onError(t),t;var s,c;if(!Wc(n=this._users).call(n,(t=>t===e)))throw t=new Rl(Yu.INVALID_REMOTE_USER,"user is not in the channel"),Tl.error(_i(s="[".concat(this._clientId,"] can not subscribe ")).call(s,e.uid,", this user is not in the channel")),a.onError(t),t;if(!e.hasAudio&&!e.hasVideo)throw t=new Rl(Yu.INVALID_REMOTE_USER,"user is not published"),Tl.error(_i(c="[".concat(this._clientId,"] can not subscribe ")).call(c,e.uid,", user is not published")),a.onError(t),t;if(s={audio:"audio"===t,video:"video"===t},!e.hasAudio&&s.audio||!e.hasVideo&&s.video){var u,l,h=new Rl(Yu.REMOTE_USER_IS_NOT_PUBLISHED);throw Tl.error(_i(u=_i(l="[".concat(this._clientId,"] can not subscribe ")).call(l,e.uid," with mediaType ")).call(u,t,", remote track is not published")),a.onError(h),h}(u=this._subscribeMutex.get(e.uid))||(u=new Nd("sub-".concat(e.uid)),this._subscribeMutex.set(e.uid,u)),Tl.info(_i(r=_i(i="[".concat(this._clientId,"] subscribe user ")).call(i,e.uid,", mediaType: ")).call(r,t)),r=await u.lock(),i=this._remoteStream.get(e.uid);try{if(i)s.audio=s.audio||i.subscribeOptions.audio,s.video=s.video||i.subscribeOptions.video,await this._gateway.subscribeChange(i,s);else{i=new ov(e,this._statsCollector,this._joinInfo,s),this._remoteStream.set(e.uid,i);try{await this._gateway.subscribe(i)}catch(t){throw this._remoteStream.delete(e.uid),t}i.on(Xl.CONNECTION_STATE_CHANGE,((t,n)=>{"connecting"===t?this.emit(Vl.MEDIA_RECONNECT_START,e.uid):"connected"===t&&this.emit(Vl.MEDIA_RECONNECT_END,e.uid)}))}r()}catch(t){var d;throw a.onError(t),r(),Tl.error(_i(d="[".concat(this._clientId,"] subscribe user ")).call(d,e.uid," error"),t),t}return Tl.info(_i(h=_i(o="[".concat(this._clientId,"] subscribe success user ")).call(o,e.uid,", mediaType: ")).call(h,t)),this._defaultStreamFallbackType&&this.setStreamFallbackOption(e.uid,this._defaultStreamFallbackType).catch((e=>{Tl.warning("[".concat(this._clientId,"] auto set fallback failed"),e)})),(t="audio"===t?e.audioTrack:e.videoTrack)?(a.onSuccess(t.getTrackId()),t):(t=new Rl(Yu.UNEXPECTED_ERROR,"can not find remote track in user object"),a.onError(t),t.throw())}async unsubscribe(e,t){var n,r,i,o,a;t&&xe(t,"mediaType",["audio","video"]);let s=Rd.reportApiInvoke(this._sessionId,{name:Pl.UNSUBSCRIBE,options:[e.uid,t],tag:Bl.TRACER});var c,u;if(!Wc(n=this._users).call(n,(t=>t===e)))throw t=new Rl(Yu.INVALID_REMOTE_USER,"user is not in the channel"),Tl.error(_i(c="[".concat(this._clientId,"] can not subscribe ")).call(c,e.uid,", user is not in the channel")),s.onError(t),t;if(Tl.info(_i(r=_i(i="[".concat(this._clientId,"] unsubscribe uid: ")).call(i,e.uid,", mediaType: ")).call(r,t)),(c=this._subscribeMutex.get(e.uid))||(c=new Nd("sub-".concat(e.uid)),this._subscribeMutex.set(e.uid,c)),c=await c.lock(),!(n=this._remoteStream.get(e.uid)))return Tl.warning(_i(u="[".concat(this._clientId,"]: you have not subscribe the remote user ")).call(u,e.uid)),s.onSuccess(),void c();u=Un({},n.subscribeOptions),"audio"===t?u.audio=!1:"video"===t?(u.video=!1,n.pc._statsFilter.setVideoIsReady(!1)):(u.audio=!1,u.video=!1);try{u.audio||u.video?await this._gateway.subscribeChange(n,u):(await n.closeP2PConnection(),this._remoteStream.delete(e.uid)),c()}catch(t){var l;if(t.code!==Yu.OPERATION_ABORTED)throw s.onError(t),c(),Tl.error(_i(l="[".concat(this._clientId,"] unsubscribe user ")).call(l,e.uid," error"),t.toString()),t;c(),Tl.debug("[".concat(this._clientId,"] ignore unsub operation abort"))}Tl.info(_i(o=_i(a="[".concat(this._clientId,"] unsubscribe success uid: ")).call(a,e.uid,", mediaType: ")).call(o,t)),s.onSuccess()}setLowStreamParameter(e){if(!e)throw new Rl(Yu.INVALID_PARAMS);null==e.width||De(e.width,"streamParameter.width"),null==e.height||De(e.height,"streamParameter.height"),null==e.framerate||De(e.framerate,"streamParameter.framerate"),null==e.bitrate||De(e.bitrate,"streamParameter.bitrate");let t=Rd.reportApiInvoke(this._sessionId,{name:Pl.SET_LOW_STREAM_PARAMETER,options:[e],tag:Bl.TRACER});(!e.width&&e.height||e.width&&!e.height)&&Tl.warning("[".concat(this._clientId,"] The width and height parameters take effect only when both are set")),Tl.info("[".concat(this._clientId,"] set low stream parameter to"),Fr(e));let n=this._configDistribute.getLowStreamConfigDistribute();n&&n.bitrate&&e.bitrate&&n.bitrate<e.bitrate&&(e.bitrate=n.bitrate),this._lowStreamParameter=e,t.onSuccess()}async enableDualStream(){let e=Rd.reportApiInvoke(this._sessionId,{name:Pl.ENABLE_DUAL_STREAM,options:[],tag:Bl.TRACER});if(!Th.supportDualStream){Rd.streamSwitch(this._sessionId,{lts:tl(),isdual:!0,succ:!1});var t=new Rl(Yu.NOT_SUPPORTED,"Your browser is not support dual stream");throw e.onError(t),t}if(this._isDualStreamEnabled)throw t=new Rl(Yu.INVALID_OPERATION,"Dual stream is already enabled"),e.onError(t),t;if(this._highStream&&"connected"===this._highStream.connectionState&&this._highStream.videoTrack)try{await this._publishLowStream(this._highStream.videoTrack)}catch(t){throw Rd.streamSwitch(this._sessionId,{lts:tl(),isdual:!0,succ:!1}),e.onError(t),t}this._isDualStreamEnabled=!0,Rd.streamSwitch(this._sessionId,{lts:tl(),isdual:!0,succ:!0}),Tl.info("[".concat(this._clientId,"] enable dual stream")),e.onSuccess()}async disableDualStream(){let e=Rd.reportApiInvoke(this._sessionId,{name:Pl.DISABLE_DUAL_STREAM,options:[],tag:Bl.TRACER});if(this._lowStream)try{await this._lowStream.closeP2PConnection()}catch(t){throw Rd.streamSwitch(this._sessionId,{lts:tl(),isdual:!1,succ:!1}),e.onError(t),t}this._lowStream=void 0,this._isDualStreamEnabled=!1,this._highStream&&(this._highStream.lowStreamConnection=void 0),Rd.streamSwitch(this._sessionId,{lts:tl(),isdual:!1,succ:!0}),Tl.info("[".concat(this._clientId,"] disable dual stream")),e.onSuccess()}async setClientRole(e,t){xe(e,"role",["audience","host"]),t&&qe(t);let n=Rd.reportApiInvoke(this._sessionId,{name:Pl.SET_CLIENT_ROLE,options:[e,t],tag:Bl.TRACER});if("rtc"===this._mode)return Tl.warning("[".concat(this._clientId,"]rtc mode can not use setClientRole")),e=new Rl(Yu.INVALID_OPERATION,"rtc mode can not use setClientRole"),n.onError(e),e.throw();if(t&&t.level&&"host"===e)return e=new Rl(Yu.INVALID_OPERATION,"host mode can not set audience latency level"),n.onError(e),e.throw();try{var r,i;if("audience"===e&&this._highStream){let e=new Rl(Yu.INVALID_OPERATION,"can not set client role to audience when publishing stream");return n.onError(e),e.throw()}await this._gateway.setClientRole(e,t),Tl.info(_i(r=_i(i="[".concat(this._clientId,"] set client role to ")).call(i,e,", level: ")).call(r,t&&t.level)),n.onSuccess()}catch(e){throw n.onError(e),e}}setProxyServer(e){if(Le(e,"proxyServer"),"DISCONNECTED"!==this.connectionState)throw new Rl(Yu.INVALID_OPERATION,"Set proxy server before join channel");if("disabled"!==this._cloudProxyServerMode||this._useLocalAccessPoint)throw new Rl(Yu.INVALID_OPERATION,"You have already set the proxy");this._proxyServer=e,Rd.setProxyServer(this._proxyServer),Tl.setProxyServer(this._proxyServer)}setTurnServer(e){if(Ju(e)||(e=[e]),"DISCONNECTED"!==this.connectionState)throw new Rl(Yu.INVALID_OPERATION,"Set turn server before join channel");if("disabled"!==this._cloudProxyServerMode||this._useLocalAccessPoint)throw new Rl(Yu.INVALID_OPERATION,"You have already set the proxy");var t;if(Qe(e))return this._turnServer={servers:e,mode:"original-manual"},void Tl.info(_i(t="[".concat(this._clientId,"] Set original turnserver success: ")).call(t,Sc(e).call(e,(e=>e.urls)).join(","),"."));Oa(e).call(e,(e=>Ge(e))),this._turnServer={servers:e,mode:"manual"},Tl.info("[".concat(this._clientId,"] Set turnserver success."))}startProxyServer(e){let t=Rd.reportApiInvoke(this._sessionId,{name:Pl.START_PROXY_SERVER,options:[],tag:Bl.TRACER});if("DISCONNECTED"!==this.connectionState)throw e=new Rl(Yu.INVALID_OPERATION,"Start proxy server before join channel"),t.onError(e),e;if(this._proxyServer||"manual"===this._turnServer.mode||this._useLocalAccessPoint)throw e=new Rl(Yu.INVALID_OPERATION,"You have already set the proxy"),t.onError(e),e;let n=[1,2,3,4,5];switch(void 0===e&&(e=1),e){case 1:this._cloudProxyServerMode="normal";break;case 2:this._cloudProxyServerMode="443only";break;case 3:this._cloudProxyServerMode="proxy3";break;case 4:this._cloudProxyServerMode="proxy4";break;case 5:this._cloudProxyServerMode="proxy5";break;default:throw e=new Rl(Yu.INVALID_PARAMS,"proxy server mode must be ".concat(n.join("|"))),t.onError(e),e}Tl.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode),t.onSuccess()}stopProxyServer(){let e=Rd.reportApiInvoke(this._sessionId,{name:Pl.STOP_PROXY_SERVER,options:[],tag:Bl.TRACER});if("DISCONNECTED"!==this.connectionState)throw new Rl(Yu.INVALID_OPERATION,"Stop proxy server after leave channel");Rd.setProxyServer(),Tl.setProxyServer(),this._cloudProxyServerMode="disabled",Tl.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode),this._proxyServer=void 0,this._turnServer={mode:"auto",servers:[]},e.onSuccess()}setLocalAccessPoints(e,t){if(Pe(e,"serverList"),Le(t,"domain"),this._proxyServer||"disabled"!==this._cloudProxyServerMode)throw new Rl(Yu.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");let n=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;e=Sc(e).call(e,(e=>{var r;return n.test(e)?_i(r="".concat(e.replace(/\./g,"-"),".")).call(r,t):e})),this._useLocalAccessPoint=!0,pe("WEBCS_DOMAIN",e),pe("WEBCS_DOMAIN_BACKUP_LIST",e),pe("GATEWAY_DOMAINS",[t]),pe("EVENT_REPORT_DOMAIN",e[0]),pe("EVENT_REPORT_BACKUP_DOMAIN",e[1]||e[0]),pe("LOG_UPLOAD_SERVER","".concat(e[0],":6444")),Tl.info("set local access point success")}async setRemoteVideoStreamType(e,t){var n,r;xe(t,"streamType",[0,1]);let i=Rd.reportApiInvoke(this._sessionId,{name:Pl.SET_REMOTE_VIDEO_STREAM_TYPE,options:[e,t],tag:Bl.TRACER});try{await this._gateway.setRemoteVideoStreamType(e,t),el((()=>{var t;let n=Wc(t=this._users).call(t,(t=>t.uid===e));n&&n.videoTrack&&n.videoTrack.updateMediaStreamTrackResolution()}),2e3)}catch(e){throw i.onError(e),Tl.error("[".concat(this._clientId,"] set remote video stream type error"),e.toString()),e}Tl.info(_i(n=_i(r="[".concat(this._clientId,"] set remote ")).call(r,e," video stream type to ")).call(n,t)),this._remoteStreamTypeCacheMap.set(e,t),i.onSuccess()}async setStreamFallbackOption(e,t){var n,r;xe(t,"fallbackType",[0,1,2]);let i=Rd.reportApiInvoke(this._sessionId,{name:Pl.SET_STREAM_FALLBACK_OPTION,options:["too long to show",t],tag:Bl.TRACER});try{await this._gateway.setStreamFallbackOption(e,t)}catch(e){throw i.onError(e),Tl.error("[".concat(this._clientId,"] set stream fallback option"),e.toString()),e}Tl.info(_i(n=_i(r="[".concat(this._clientId,"] set remote ")).call(r,e," stream fallback type to ")).call(n,t)),this._streamFallbackTypeCacheMap.set(e,t),i.onSuccess()}setEncryptionConfig(e,t,n){xe(e,"encryptionMode","aes-128-xts aes-256-xts aes-128-ecb sm4-128-ecb aes-128-gcm aes-256-gcm aes-128-gcm2 aes-256-gcm2 none".split(" ")),Le(t,"secret");let r=["aes-128-gcm2","aes-256-gcm2"];if(ru(r).call(r,e)){if(!(n&&n instanceof Uint8Array&&32===n.length))throw new Rl(Yu.INVALID_PARAMS,"salt must be an Uint8Array and exactly equal to 32 bytes")}else if(n)throw new Rl(Yu.INVALID_PARAMS,"current encrypt mode does not need salt");/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*,.<>?/:;'"|{}\[\]])(?=.{8,})/.test(t)||Tl.warning("The secret is not strong:\n      The secret must contain at least 1 lowercase alphabetical character,\n      The secret must contain at least 1 uppercase alphabetical character,\n      The secret must contain at least 1 numeric character,\n      The secret must contain at least one special character,\n      The secret must be eight characters or longer.\n      "),this._encryptionMode=e,this._encryptionSecret=t,n&&(this._encryptionSalt=Ht(n))}async renewToken(e){Le(e,"token",1,2047);let t=Rd.reportApiInvoke(this._sessionId,{name:Pl.RENEW_TOKEN,options:[e],tag:Bl.TRACER});if(!this._key)return e=new Rl(Yu.INVALID_OPERATION,"renewToken should not be called before user join"),t.onError(e),e.throw();this._key=e;try{await this._gateway.renewToken(e)}catch(e){throw t.onError(e),Tl.error("[".concat(this._clientId,"] renewToken failed"),e.toString()),e}Tl.debug("[".concat(this._clientId,"] renewToken success")),t.onSuccess()}enableAudioVolumeIndicator(){let e=Rd.reportApiInvoke(this._sessionId,{name:Pl.ENABLE_AUDIO_VOLUME_INDICATOR,options:[],tag:Bl.TRACER});if(this._audioVolumeIndicationInterval)return Tl.warning("you have already enabled audio volume indicator!"),e.onSuccess();this._audioVolumeIndicationInterval=window.setInterval((()=>{var e,t,n;let r=zu(e=Sc(t=Ed(yd(n=this._remoteStream).call(n))).call(t,(e=>({level:e.user.audioTrack?100*e.user.audioTrack._source.getAccurateVolumeLevel():0,uid:e.getUserId()})))).call(e,((e,t)=>e.level-t.level));this._highStream&&this._highStream.audioTrack&&(r.push({level:100*this._highStream.audioTrack._source.getAccurateVolumeLevel(),uid:this._highStream._userId}),r=zu(r).call(r,((e,t)=>e.level-t.level))),this.emit(Vl.VOLUME_INDICATOR,r)}),Mu.AUDIO_VOLUME_INDICATION_INTERVAL||2e3),e.onSuccess()}getRTCStats(){let e=this._statsCollector.getRTCStats(),t=this._gateway.getInChannelInfo();return e.Duration=Math.round(t.duration/1e3),e}startLiveStreaming(e,t){let n=Rd.reportApiInvoke(this._sessionId,{name:Pl.START_LIVE_STREAMING,options:[e,t],tag:Bl.TRACER});if(!t){if("h264"!==this._codec)return e=new Rl(Yu.LIVE_STREAMING_INVALID_RAW_STREAM,"raw streaming is only support h264"),n.onError(e),wc.reject(e);if(!this._highStream)return e=new Rl(Yu.LIVE_STREAMING_INVALID_RAW_STREAM,"can not find stream to raw streaming"),n.onError(e),wc.reject(e)}return this._liveRawStreamingClient&&this._liveRawStreamingClient.hasUrl(e)||this._liveTranscodeStreamingClient&&this._liveTranscodeStreamingClient.hasUrl(e)?(e=new Rl(Yu.LIVE_STREAMING_TASK_CONFLICT),n.onError(e),wc.reject(e)):(t=t?oh.TRANSCODE:oh.RAW,this._createLiveStreamingClient(t).startLiveStreamingTask(e,t).then((()=>n.onSuccess())).catch((e=>{throw n.onError(e),e})))}setLiveTranscoding(e){let t=Rd.reportApiInvoke(this._sessionId,{name:Pl.SET_LIVE_TRANSCODING,options:[e],tag:Bl.TRACER});return this._createLiveStreamingClient(oh.TRANSCODE).setTranscodingConfig(e).then((()=>t.onSuccess())).catch((e=>{throw t.onError(e),e}))}stopLiveStreaming(e){var t;let n=Rd.reportApiInvoke(this._sessionId,{name:Pl.STOP_LIVE_STREAMING,options:[e],tag:Bl.TRACER}),r=os(t=[this._liveRawStreamingClient,this._liveTranscodeStreamingClient]).call(t,(t=>t&&t.hasUrl(e)));return r.length?wc.all(Sc(r).call(r,(t=>t&&t.stopLiveStreamingTask(e)))).then((()=>n.onSuccess())).catch((e=>{throw n.onError(e),e})):(t=new Rl(Yu.INVALID_PARAMS,"can not find live streaming url to stop"),n.onError(t),wc.reject(t))}async addInjectStreamUrl(e,t){let n=Rd.reportApiInvoke(this._sessionId,{name:Pl.ADD_INJECT_STREAM_URL,options:[e,t],tag:Bl.TRACER});try{if(!this._joinInfo)throw new Rl(Yu.INVALID_OPERATION,"can not addInjectStreamUrl, no joininfo");let n=this._createLiveStreamingClient(oh.INJECT);n.setInjectStreamConfig(t,0),await n.startLiveStreamingTask(e,oh.INJECT)}catch(e){throw n.onError(e),e}n.onSuccess()}async removeInjectStreamUrl(){let e=Rd.reportApiInvoke(this._sessionId,{name:Pl.REMOVE_INJECT_STREAM_URL,options:[],tag:Bl.TRACER});try{var t,n;let e=this._createLiveStreamingClient(oh.INJECT),r=Wc(t=Ed(yd(n=e.streamingTasks).call(n))).call(t,(e=>e.mode===oh.INJECT));if(!this._joinInfo||!r)throw new Rl(Yu.INVALID_OPERATION,"can remove addInjectStreamUrl, no joininfo or inject task");await e.stopLiveStreamingTask(r.url)}catch(t){throw e.onError(t),t}e.onSuccess()}async startChannelMediaRelay(e){let t=Rd.reportApiInvoke(this._sessionId,{name:Pl.START_CHANNEL_MEDIA_RELAY,options:[e],tag:Bl.TRACER});try{Mn(e),await this._createChannelMediaRelayClient().startChannelMediaRelay(e)}catch(e){return t.onError(e),e.throw()}t.onSuccess()}async updateChannelMediaRelay(e){let t=Rd.reportApiInvoke(this._sessionId,{name:Pl.UPDATE_CHANNEL_MEDIA_RELAY,options:[e],tag:Bl.TRACER});try{Mn(e),await this._createChannelMediaRelayClient().updateChannelMediaRelay(e)}catch(e){return t.onError(e),e.throw()}t.onSuccess()}async stopChannelMediaRelay(){let e=Rd.reportApiInvoke(this._sessionId,{name:Pl.STOP_CHANNEL_MEDIA_RELAY,options:[],tag:Bl.TRACER});try{await this._createChannelMediaRelayClient().stopChannelMediaRelay()}catch(t){return e.onError(t),t.throw()}e.onSuccess()}sendStreamMessage(e,t=!0){if(!this._joinInfo)throw new Rl(Yu.INVALID_OPERATION,"can not send data stream, not joined");if("string"==typeof e&&(e=(new TextEncoder).encode(e)),1024<new Blob([e]).size)throw new Rl(Yu.INVALID_PARAMS,"stream message out of range.");return this._gateway.signal.request(zl.DATA_STREAM,{payload:Ht(e)},!t)}sendMetadata(e){if(!this._joinInfo)throw new Rl(Yu.INVALID_OPERATION,"can not send metadata, not joined");if(1024<new Blob([e]).size)throw new Rl(Yu.METADATA_OUT_OF_RANGE);return this._gateway.signal.request(zl.SEND_METADATA,{session_id:this._joinInfo.sid,metadata:Ht(e)})}async sendCustomReportMessage(e){Ju(e)||(e=[e]),Oa(e).call(e,Ue);let t=Rd.reportApiInvoke(this._sessionId,{name:Pl.SEND_CUSTOM_REPORT_MESSAGE,options:[Fr(e)],tag:Bl.TRACER});if(!this._joinInfo)return e=new Rl(Yu.INVALID_OPERATION,"can not send custom report, not joined"),t.onError(e),e.throw();await Rd.sendCustomReportMessage(this._joinInfo.sid,e),t.onSuccess()}getLocalAudioStats(){if(!this._highStream)return $l;let e=this._statsCollector.getLocalAudioTrackStats(this._highStream.connectionId);return te()&&this._highStream&&this._highStream.audioTrack&&(this._highStream.audioTrack instanceof of?!this._highStream.audioTrack.isActive:!this._highStream.audioTrack.enabled)&&(e.sendVolumeLevel=0),e}getRemoteAudioStats(){var e;let t={};return Oa(e=this._remoteStream).call(e,((e,n)=>{t[n]=this._statsCollector.getRemoteAudioTrackStats(e.connectionId)})),t}getLocalVideoStats(){return this._highStream?this._statsCollector.getLocalVideoTrackStats(this._highStream.connectionId):eh}getRemoteVideoStats(){var e;let t={};return Oa(e=this._remoteStream).call(e,((e,n)=>{t[n]=this._statsCollector.getRemoteVideoTrackStats(e.connectionId)})),t}getRemoteNetworkQuality(){var e;let t={};return Oa(e=this._remoteStream).call(e,((e,n)=>{t[n]=this._statsCollector.getRemoteNetworkQualityStats(e.connectionId)})),t}async pickSVCLayer(e,t){xe(t.spatialLayer,"spatialLayer",[0,1,2,3]),xe(t.temporalLayer,"temporalLayer",[0,1,2,3]);try{await this._gateway.pickSVCLayer(e,t)}catch(e){throw Tl.error("[".concat(this._clientId,"] pick SVC layer failed"),e.toString()),e}}_reset(){var e,t,n;Tl.debug("[".concat(this._clientId,"] reset client")),this._axiosCancelSource.cancel(),this._axiosCancelSource=wl.CancelToken.source(),this._streamFallbackTypeCacheMap=new pa,this._remoteStreamTypeCacheMap=new pa,this._configDistribute.stopGetConfigDistribute(),this._defaultStreamFallbackType=this._proxyServer=this._joinInfo=void 0,this._sessionId=null,this._statsCollector.reset(),this._channelName=this._uid=this._appId=this._key=void 0,this._encryptionMode="none",this._encryptionSalt=this._encryptionSecret=null,Oa(e=this._users).call(e,(e=>{e.audioTrack&&(e.audioTrack.stop(),e.audioTrack._isDestroyed=!0),e.videoTrack&&(e.videoTrack.stop(),e.videoTrack._isDestroyed=!0)})),this._users=[],this._audioVolumeIndicationInterval&&(window.clearInterval(this._audioVolumeIndicationInterval),this._audioVolumeIndicationInterval=void 0),this._highStream&&(this._highStream.closeP2PConnection(!0),this._highStream=void 0),Oa(t=this._bindEnabledTracks).call(t,(e=>{e.off(Ah.NEED_ADD_TRACK,this._handleLocalTrackEnable),e.off(Ah.NEED_REMOVE_TRACK,this._handleLocalTrackDisable)})),this._bindEnabledTracks=[],this._lowStream&&(this._lowStream.closeP2PConnection(!0),this._lowStream=void 0),Oa(n=this._remoteStream).call(n,(e=>{e.closeP2PConnection(!0)})),this._remoteStream=new pa,this._publishMutex=new Nd("client-publish"),this._subscribeMutex=new pa,this._networkQualityInterval&&(window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=void 0),this._injectStreamingClient&&(this._injectStreamingClient.terminate(),this._injectStreamingClient.removeAllListeners(),this._injectStreamingClient=void 0),this._liveRawStreamingClient&&(this._liveRawStreamingClient.terminate(),this._liveRawStreamingClient.removeAllListeners(),this._liveRawStreamingClient=void 0),this._liveTranscodeStreamingClient&&(this._liveTranscodeStreamingClient.terminate(),this._liveTranscodeStreamingClient.removeAllListeners(),this._liveTranscodeStreamingClient=void 0),this._channelMediaRelayClient&&(this._channelMediaRelayClient.dispose(),this._channelMediaRelayClient=void 0)}_startSession(e,t){var n,r,i;let o=e||Lt(32,"").toUpperCase();e?Tl.debug(_i(n="[".concat(this._clientId,"] new Session ")).call(n,o)):Tl.debug(_i(r=_i(i="[".concat(this._clientId,"] renewSession ")).call(i,this._sessionId," => ")).call(r,o)),this._sessionId=o,t?Rd.sessionInit(this._sessionId,{lts:(new Date).getTime(),cname:t.channel,appid:t.appId,mode:this._mode}):this._joinInfo?Rd.sessionInit(this._sessionId,{lts:(new Date).getTime(),cname:this._joinInfo.cname,appid:this._joinInfo.appId,mode:this._mode}):this._gateway.joinInfo&&Rd.sessionInit(this._sessionId,{lts:(new Date).getTime(),cname:this._gateway.joinInfo.cname,appid:this._gateway.joinInfo.appId,mode:this._mode}),this._joinInfo&&(this._joinInfo.sid=o),this._gateway.joinInfo&&(this._gateway.joinInfo.sid=o)}async _publishHighStream(e){if(!this._joinInfo)throw new Rl(Yu.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new Rl(Yu.INVALID_OPERATION,"can not publish stream in ".concat(this.connectionState," state"));if("auto"===this._turnServer.mode&&Mu.FORCE_TURN&&!Mu.TURN_ENABLE_TCP&&!Mu.TURN_ENABLE_UDP)throw new Rl(Yu.UNEXPECTED_ERROR,"force TURN With No TURN Configuration");if(Tl.debug("[".concat(this._clientId,"] publish high stream")),this._highStream)return await this._highStream.addTracks(e),this._highStream;this._highStream=new tv(this._statsCollector,this._joinInfo,this._codec),this._highStream.on(Xl.P2P_LOST,(()=>{this._highStream&&this.emit(Vl.P2P_LOST,this._highStream.getUserId())})),await this._highStream.addTracks(e);try{await this._gateway.publish(this._highStream,"high")}catch(e){throw this._highStream=void 0,e}return this._highStream.on(Xl.CONNECTION_STATE_CHANGE,((e,t)=>{this._highStream&&("connected"===e?this.emit(Vl.MEDIA_RECONNECT_END,this._highStream.getUserId()):"connecting"===e&&this.emit(Vl.MEDIA_RECONNECT_START,this._highStream.getUserId()))})),this._highStream}async _publishLowStream(e){if(!this._joinInfo)throw new Rl(Yu.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new Rl(Yu.INVALID_OPERATION,"can not publish stream in ".concat(this.connectionState," state"));if(!this._highStream||"connected"!==this._highStream.connectionState)throw new Rl(Yu.UNEXPECTED_ERROR,"Could not find high stream");if(this._lowStream)return new Rl(Yu.UNEXPECTED_ERROR,"[".concat(this._clientId,"] Can't publish low stream when stream already publish")).throw();Tl.debug("[".concat(this._clientId,"] publish low stream")),this._lowStream=new tv(this._statsCollector,this._joinInfo,this._codec,!0);let t=this._configDistribute.getLowStreamConfigDistribute();t&&t.bitrate&&(this._lowStreamParameter||(this._lowStreamParameter={width:160,height:120,framerate:15,bitrate:50}),this._lowStreamParameter&&this._lowStreamParameter.bitrate&&t.bitrate<this._lowStreamParameter.bitrate&&(this._lowStreamParameter.bitrate=t.bitrate)),this._lowStream.lowStreamParameter=this._lowStreamParameter,await this._lowStream.addTracks([e]);try{await this._gateway.publish(this._lowStream,"low")}catch(e){throw this._lowStream=void 0,e}this._highStream.lowStreamConnection=this._lowStream}_createLiveStreamingClient(e){if(!this._joinInfo||!this._appId)return new Rl(Yu.INVALID_OPERATION,"can not create live streaming client, please join channel first").throw();let t=()=>new sv(this._joinInfo,this._config.websocketRetryConfig||Td,this._config.httpRetryConfig||Td),n=e=>{e.onLiveStreamError=(e,t)=>{Rd.reportApiInvoke(this._sessionId,{name:Pl.ON_LIVE_STREAM_ERROR,options:[e,t],tag:Bl.TRACER}).onSuccess(),this.emit(Vl.LIVE_STREAMING_ERROR,e,t)},e.onLiveStreamWarning=(e,t)=>{Rd.reportApiInvoke(this._sessionId,{name:Pl.ON_LIVE_STREAM_WARNING,options:[e,t],tag:Bl.TRACER}).onSuccess(),this.emit(Vl.LIVE_STREAMING_WARNING,e,t)},e.on(hh.REQUEST_WORKER_MANAGER_LIST,((e,t,n)=>{if(!this._joinInfo)return n(new Rl(Yu.INVALID_OPERATION,"can not find join info to get worker manager"));cn(e,this._joinInfo,this._axiosCancelSource.token,Td).then(t).catch(n)}))};switch(e){case oh.RAW:return this._liveRawStreamingClient||(this._liveRawStreamingClient=t(),n(this._liveRawStreamingClient)),this._liveRawStreamingClient;case oh.TRANSCODE:return this._liveTranscodeStreamingClient||(this._liveTranscodeStreamingClient=t(),n(this._liveTranscodeStreamingClient)),this._liveTranscodeStreamingClient;case oh.INJECT:return this._injectStreamingClient||(this._injectStreamingClient=t(),this._injectStreamingClient.on(hh.REQUEST_WORKER_MANAGER_LIST,((e,t,n)=>{if(!this._joinInfo)return n(new Rl(Yu.INVALID_OPERATION,"can not find join info to get worker manager"));cn(e,this._joinInfo,this._axiosCancelSource.token,Td).then(t).catch(n)})),this._injectStreamingClient.onInjectStatusChange=(e,t,n)=>{this.emit(Vl.INJECT_STREAM_STATUS,e,t,n)}),this._injectStreamingClient}}_createChannelMediaRelayClient(){return this._joinInfo?(this._channelMediaRelayClient||(this._channelMediaRelayClient=new lv(this._joinInfo,this._clientId,this._config.websocketRetryConfig||Td,this._config.httpRetryConfig||Td),this._channelMediaRelayClient.on("state",(e=>{"RELAY_STATE_FAILURE"===e&&this._channelMediaRelayClient&&this._channelMediaRelayClient.dispose(),this.emit(Vl.CHANNEL_MEDIA_RELAY_STATE,e)})),this._channelMediaRelayClient.on("event",(e=>{this.emit(Vl.CHANNEL_MEDIA_RELAY_EVENT,e)}))),this._channelMediaRelayClient):new Rl(Yu.INVALID_OPERATION,"can not create channel media relay client, please join channel first").throw()}_handleGatewayEvents(){this._gateway.on(gh.DISCONNECT_P2P,(()=>{var e;Tl.debug("[".concat(this._clientId,"] start full reconnect")),this._highStream&&"disconnected"!==this._highStream.connectionState&&(Tl.debug("[".concat(this._clientId,"] ready to reconnect high stream")),this._highStream.readyToReconnectPC()),this._lowStream&&"disconnected"!==this._lowStream.connectionState&&(Tl.debug("[".concat(this._clientId,"] ready to reconnect low stream")),this._lowStream.readyToReconnectPC()),Oa(e=this._remoteStream).call(e,((e,t)=>{var n;Tl.debug(_i(n="[".concat(this._clientId,"] ready to reconnect remote stream ")).call(n,t)),e.readyToReconnectPC()}))})),this._gateway.on(gh.CONNECTION_STATE_CHANGE,((e,t,n)=>{var r,i;let o=()=>{this.emit(Vl.CONNECTION_STATE_CHANGE,e,t,n)};if(Tl.info(_i(r=_i(i="[".concat(this._clientId,"] connection state change: ")).call(i,t," -> ")).call(r,e)),"DISCONNECTED"===e)return this._reset(),void o();var a,s;if("RECONNECTING"===e)this._highStream&&"connecting"===this._highStream.connectionState&&(Tl.debug("[".concat(this._clientId,"] ready to reconnect high stream")),this._highStream.readyToReconnectPC()),this._lowStream&&"connecting"===this._lowStream.connectionState&&(Tl.debug("[".concat(this._clientId,"] ready to reconnect low stream")),this._lowStream.readyToReconnectPC()),Oa(a=this._remoteStream).call(a,((e,t)=>{var n;"connecting"===e.connectionState&&(Tl.debug(_i(n="[".concat(this._clientId,"] ready to reconnect remote stream ")).call(n,t)),e.readyToReconnectPC())})),Oa(s=this._users).call(s,(e=>{e._trust_in_room_=!1,e._trust_audio_enabled_state_=!1,e._trust_video_enabled_state_=!1,e._trust_audio_mute_state_=!1,e._trust_video_mute_state_=!1,e._trust_stream_added_state_=!1})),this._userOfflineTimeout&&window.clearTimeout(this._userOfflineTimeout),this._streamRemovedTimeout&&window.clearTimeout(this._streamRemovedTimeout),this._streamRemovedTimeout=this._userOfflineTimeout=void 0;else if("CONNECTED"===e){var c,u;Oa(c=this._streamFallbackTypeCacheMap).call(c,((e,t)=>{this._gateway.setStreamFallbackOption(t,e).catch((e=>Tl.warning("[".concat(this._clientId,"] auto set stream fallback option failed"),e)))})),Oa(u=this._remoteStreamTypeCacheMap).call(u,((e,t)=>{this._gateway.setRemoteVideoStreamType(t,e).catch((e=>Tl.warning("[".concat(this._clientId,"] auto set remote stream type failed"),e)))})),this._highStream&&"connecting"===this._highStream.connectionState?this._highStream.reconnectPC().then((()=>{this._lowStream&&"connecting"===this._lowStream.connectionState&&this._lowStream.reconnectPC().catch((e=>{Tl.error("[".concat(this._clientId,"] republish low stream error"),e.toString()),this.emit(Vl.ERROR,{reason:e})}))})).catch((e=>{Tl.error("[".concat(this._clientId,"] republish high stream error"),e.toString()),this.emit(Vl.ERROR,{reason:e})})):this._lowStream&&"connecting"===this._lowStream.connectionState&&this._lowStream.reconnectPC().catch((e=>{Tl.error("[".concat(this._clientId,"] republish low stream error"),e.toString()),this.emit(Vl.ERROR,{reason:e})})),this._userOfflineTimeout=window.setTimeout((()=>{var e;if("CONNECTED"===this.connectionState){this._userOfflineTimeout=void 0;var t=os(e=this._users).call(e,(e=>!e._trust_in_room_));Oa(t).call(t,(e=>{var t;Tl.debug(_i(t="[".concat(this._clientId,"] user offline timeout, emit user offline ")).call(t,e.uid)),this._handleUserOffline({uid:e.uid})}))}}),3e3),this._streamRemovedTimeout=window.setTimeout((()=>{var e;"CONNECTED"===this.connectionState&&(this._streamRemovedTimeout=void 0,Oa(e=this._users).call(e,(e=>{var t,n,r,i,o;e._trust_audio_mute_state_||(Tl.debug(_i(t="[".concat(this._clientId,"] auto dispatch audio unmute event ")).call(t,e.uid)),this._handleMuteStream(e.uid,"audio",!1)),e._trust_video_mute_state_||(Tl.debug(_i(n="[".concat(this._clientId,"] auto dispatch video unmute event ")).call(n,e.uid)),this._handleMuteStream(e.uid,"video",!1)),e._trust_audio_enabled_state_||(Tl.debug(_i(r="[".concat(this._clientId,"] auto dispatch enable local audio ")).call(r,e.uid)),this._handleSetStreamLocalEnable("audio",e.uid,!0)),!e._trust_video_enabled_state_&&e._video_enabled_&&(Tl.debug(_i(i="[".concat(this._clientId,"] auto dispatch enable local video ")).call(i,e.uid)),this._handleSetStreamLocalEnable("video",e.uid,!0)),e._trust_stream_added_state_||(Tl.debug(_i(o="[".concat(this._clientId,"] auto dispatch stream remove ")).call(o,e.uid)),this._handleRemoveStream({uid:e.uid,uint_id:e._uintid}))})))}),1e3)}o()})),this._gateway.on(gh.REQUEST_NEW_GATEWAY_LIST,((e,t)=>{if(!this._joinInfo)return t(new Rl(Yu.UNEXPECTED_ERROR,"can not recover, no join info"));nn(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||Td).then((t=>{var n;this._joinInfo&&(this._joinInfo.apResponse=t.gatewayInfo.res),e(Sc(n=t.gatewayInfo.gatewayAddrs).call(n,(e=>{var t,n;return this._joinInfo&&this._joinInfo.proxyServer?(e=e.split(":"),_i(t=_i(n="wss://".concat(this._joinInfo.proxyServer,"/ws/?h=")).call(n,e[0],"&p=")).call(t,e[1])):"wss://".concat(e)})))})).catch(t)})),this._gateway.on(gh.NETWORK_QUALITY,(e=>{"normal"===this._networkQualitySensitivity&&this.emit(Vl.NETWORK_QUALITY,e)})),this._gateway.on(gh.STREAM_TYPE_CHANGE,((e,t)=>{this.emit(Vl.STREAM_TYPE_CHANGED,e,t),Rd.reportApiInvoke(this._sessionId,{name:Pl.STREAM_TYPE_CHANGE,options:[e,t],tag:Bl.TRACER}).onSuccess(Fr({uid:e,streamType:t}))})),this._gateway.on(gh.IS_P2P_DISCONNECTED,(e=>{var t,n,r;let i=[];return this._highStream&&i.push(this._highStream),Oa(t=this._remoteStream).call(t,(e=>i.push(e))),0===i.length||0===os(i).call(i,(e=>"connected"===e.connectionState)).length?e(!0):(Tl.debug(_i(n="[".concat(this._clientId,"] ")).call(n,Sc(r=os(i).call(i,(e=>"connected"===e.connectionState))).call(r,(e=>e.connectionId))," is connected")),void e(!1))})),this._gateway.on(gh.NEED_RENEW_SESSION,(()=>{this._startSession()})),this._gateway.signal.on(Jl.ON_USER_ONLINE,this._handleUserOnline),this._gateway.signal.on(Jl.ON_USER_OFFLINE,this._handleUserOffline),this._gateway.signal.on(Jl.ON_ADD_AUDIO_STREAM,(e=>this._handleAddAudioOrVideoStream("audio",e.uid,e.uint_id))),this._gateway.signal.on(Jl.ON_ADD_VIDEO_STREAM,(e=>this._handleAddAudioOrVideoStream("video",e.uid,e.uint_id))),this._gateway.signal.on(Jl.ON_REMOVE_STREAM,this._handleRemoveStream),this._gateway.signal.on(Jl.ON_P2P_LOST,this._handleP2PLost),this._gateway.signal.on(Jl.MUTE_AUDIO,(e=>this._handleMuteStream(e.uid,"audio",!0))),this._gateway.signal.on(Jl.UNMUTE_AUDIO,(e=>this._handleMuteStream(e.uid,"audio",!1))),this._gateway.signal.on(Jl.MUTE_VIDEO,(e=>this._handleMuteStream(e.uid,"video",!0))),this._gateway.signal.on(Jl.UNMUTE_VIDEO,(e=>this._handleMuteStream(e.uid,"video",!1))),this._gateway.signal.on(Jl.RECEIVE_METADATA,(e=>{let t=Kt(e.metadata);this.emit(Vl.RECEIVE_METADATA,e.uid,t)})),this._gateway.signal.on(Jl.ON_DATA_STREAM,(e=>{e.seq&&delete e.seq,e.payload=Kt(e.payload),this.emit(Vl.STREAM_MESSAGE,e.uid,e.payload),this.onStreamMessage&&this.onStreamMessage(e)})),this._gateway.signal.on(Jl.ON_CRYPT_ERROR,(()=>{Vt((()=>{Tl.warning("[".concat(this._clientId,"] on crypt error")),this.emit(Vl.CRYPT_ERROR)}),this._sessionId)})),this._gateway.signal.on(Jl.ON_TOKEN_PRIVILEGE_WILL_EXPIRE,this._handleTokenWillExpire),this._gateway.signal.on(Jl.ON_TOKEN_PRIVILEGE_DID_EXPIRE,(()=>{Tl.warning("[".concat(this._clientId,"] received message onTokenPrivilegeDidExpire, please get new token and join again")),this._reset(),this._gateway.leave(!0),this.emit(Vl.ON_TOKEN_PRIVILEGE_DID_EXPIRE)})),this._gateway.signal.on(Jl.ON_STREAM_FALLBACK_UPDATE,(e=>{var t,n;Tl.debug(_i(t=_i(n="[".concat(this._clientId,"] stream fallback peerId: ")).call(n,e.stream_id,", attr: ")).call(t,e.stream_type)),this.emit(Vl.STREAM_FALLBACK,e.stream_id,1===e.stream_type?"fallback":"recover")})),this._gateway.signal.on(Jl.ON_PUBLISH_STREAM,(e=>{var t;this.uid===this._uid&&(this._highStream&&this._highStream._waitingSuccessResponse&&"connected"===this._highStream.connectionState?(this._highStream.reportPublishEvent(!0,null,Fr({proxy:e.proxy})),Tl.info(_i(t="[".concat(this._clientId,"] on publish stream, ")).call(t,Fr(e))),void 0!==e.proxy&&this.emit(Vl.IS_USING_CLOUD_PROXY,!!e.proxy)):this._lowStream?this._lowStream.reportPublishEvent(!0,null,Fr({proxy:e.proxy})):Tl.warning("get on_publish_stream message but cannot handle"))})),this._gateway.signal.on(Jl.ENABLE_LOCAL_VIDEO,(e=>{this._handleSetStreamLocalEnable("video",e.uid,!0)})),this._gateway.signal.on(Jl.DISABLE_LOCAL_VIDEO,(e=>{this._handleSetStreamLocalEnable("video",e.uid,!1)})),this._gateway.signal.on(Wl.REQUEST_TIMEOUT,((e,t)=>{if(this._joinInfo)switch(e){case zl.PUBLISH:var n;if(!t)break;if(!(e="high"===t.stream_type?this._highStream:this._lowStream))break;"offer"===t.state&&Rd.publish(this._joinInfo.sid,{lts:e.startTime,succ:!1,ec:Yu.TIMEOUT,audio:t.audio,video:t.video,p2pid:t.p2p_id,publishRequestid:e.ID,screenshare:!(!e.videoTrack||-1===Mc(n=e.videoTrack._hints).call(n,vh.SCREEN_TRACK)),audioName:e.audioTrack&&(e.audioTrack instanceof of?e.audioTrack.getSubTrackLabels().join(","):e.audioTrack.getTrackLabel()),videoName:e.videoTrack&&e.videoTrack.getTrackLabel()});break;case zl.SUBSCRIBE:(n=this._remoteStream.get(t.stream_id))&&t&&Rd.subscribe(this._joinInfo.sid,{lts:n.startTime,succ:!1,ec:Yu.TIMEOUT,audio:!!t.audio,video:!!t.video,peerid:t.stream_id,subscribeRequestid:n.ID,p2pid:n.pc.ID})}}))}}vv([$e({report:Rd}),mv("design:type",Function),mv("design:paramtypes",[String]),mv("design:returntype",void 0)],yv.prototype,"setProxyServer",null),vv([$e(),mv("design:type",Function),mv("design:paramtypes",[Object]),mv("design:returntype",void 0)],yv.prototype,"setTurnServer",null),vv([$e({report:Rd}),mv("design:type",Function),mv("design:paramtypes",[Array,String]),mv("design:returntype",void 0)],yv.prototype,"setLocalAccessPoints",null),vv([$e({report:Rd}),mv("design:type",Function),mv("design:paramtypes",[String,String,Uint8Array]),mv("design:returntype",void 0)],yv.prototype,"setEncryptionConfig",null),vv([et({report:Rd}),mv("design:type",Function),mv("design:paramtypes",[Object,Object]),mv("design:returntype",wc)],yv.prototype,"pickSVCLayer",null);class bv extends jd{constructor(e,t={}){super(),this.currentLoopCount=this.pausePlayTime=this.startPlayOffset=this.startPlayTime=0,this._currentState="stopped",this.audioBuffer=e,this.options=t,this.startPlayOffset=this.options.startPlayTime||0}set currentState(e){e!==this._currentState&&(this._currentState=e,this.emit(Zl.AUDIO_SOURCE_STATE_CHANGE,this._currentState))}get currentState(){return this._currentState}createWebAudioDiagram(){return this.context.createGain()}get duration(){return this.audioBuffer.duration}get currentTime(){return"stopped"===this.currentState?0:"paused"===this.currentState?this.pausePlayTime:(this.context.currentTime-this.startPlayTime+this.startPlayOffset)%this.audioBuffer.duration}updateOptions(e){"stopped"===this.currentState?(this.options=e,this.startPlayOffset=this.options.startPlayTime||0):Tl.warning("can not set audio source options")}startProcessAudioBuffer(){this.sourceNode&&this.stopProcessAudioBuffer(),this.sourceNode=this.createSourceNode(),this.startSourceNode(),this.currentState="playing"}pauseProcessAudioBuffer(){this.sourceNode&&"playing"===this.currentState&&(this.pausePlayTime=this.currentTime,this.sourceNode.onended=null,this.sourceNode.stop(),this.sourceNode.buffer=null,this.sourceNode=this.createSourceNode(),this.currentState="paused")}seekAudioBuffer(e){this.sourceNode&&(this.sourceNode.onended=null,"playing"===this.currentState&&this.sourceNode.stop(),this.sourceNode=this.createSourceNode(),"playing"===this.currentState?(this.startPlayOffset=e,this.startSourceNode()):"paused"===this.currentState&&(this.pausePlayTime=e))}resumeProcessAudioBuffer(){"paused"===this.currentState&&this.sourceNode&&(this.startPlayOffset=this.pausePlayTime,this.pausePlayTime=0,this.startSourceNode(),this.currentState="playing")}stopProcessAudioBuffer(){if(this.sourceNode){this.sourceNode.onended=null;try{this.sourceNode.stop()}catch(e){}this.reset()}}startSourceNode(){var e;this.sourceNode&&this.sourceNode.buffer&&(this.sourceNode.start(0,this.startPlayOffset),this.startPlayTime=this.context.currentTime,this.sourceNode.onended=Zc(e=this.handleSourceNodeEnded).call(e,this))}createSourceNode(){let e=this.context.createBufferSource();return e.buffer=this.audioBuffer,e.loop=!!this.options.loop,e.connect(this.outputNode),e}handleSourceNodeEnded(){if(this.currentLoopCount+=1,this.options.cycle&&this.options.cycle>this.currentLoopCount)return this.startPlayOffset=0,this.sourceNode=void 0,void this.startProcessAudioBuffer();this.reset()}reset(){this.startPlayOffset=this.options.startPlayTime||0,this.currentState="stopped",this.sourceNode&&(this.sourceNode.disconnect(),this.sourceNode=void 0),this.currentLoopCount=0}}let _v=new pa;var Ev=br.setInterval;let wv=J().name;class Iv{constructor(e,t){this.id=0,Iv.count+=1,this.id=Iv.count,this.element=e,this.context=t}initPeers(){this.peerPair=[new RTCPeerConnection,new RTCPeerConnection],this.peerPair[1].ontrack=e=>{let t=document.createElement("audio");t.srcObject=new MediaStream([e.track]),t.play(),this.audioPlayerElement=t}}async switchSdp(){if(this.peerPair){var e=async(e,t)=>(t="offer"===t?await e.createOffer():await e.createAnswer(),await e.setLocalDescription(t),"complete"===e.iceGatheringState?e.localDescription:new wc((t=>{e.onicegatheringstatechange=()=>{"complete"===e.iceGatheringState&&t(e.localDescription)}}))),t=async(e,t)=>await e.setRemoteDescription(t);try{let n=await e(this.peerPair[0],"offer");await t(this.peerPair[1],n);let r=await e(this.peerPair[1],"answer");await t(this.peerPair[0],r)}catch(e){throw new Rl(Yu.LOCAL_AEC_ERROR,e.toString()).print()}}}async getTracksFromMediaElement(e){if(this.audioTrack)return this.audioTrack;let t;try{e instanceof HTMLVideoElement&&(e.captureStream?e.captureStream():e.mozCaptureStream()),t=this.context.createMediaStreamDestination(),this.context.createMediaElementSource(e).connect(t)}catch(e){throw new Rl(Yu.LOCAL_AEC_ERROR,e.toString()).print()}if(!t)throw new Rl(Yu.LOCAL_AEC_ERROR,"no dest node when local aec").print();return e=t.stream.getAudioTracks()[0],this.audioTrack=e,e}getElement(){return this.element}async startEchoCancellation(){this.context.resume(),this.peerPair&&this.close(),this.initPeers();let e=await this.getTracksFromMediaElement(this.element);this.peerPair&&this.peerPair[0].addTrack(e),await this.switchSdp()}close(){var e;Tl.debug("close echo cancellation unit, id is",this.id),this.audioPlayerElement&&this.audioPlayerElement.pause(),this.peerPair&&Oa(e=this.peerPair).call(e,(e=>{e.close()})),this.audioPlayerElement=this.peerPair=void 0}}Iv.count=0;var Cv=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let Sv=window.AudioContext||window.webkitAudioContext;class Tv{constructor(){this.units=[]}processExternalMediaAEC(e){var t;if(!this._doesEnvironmentNeedAEC())return Tl.debug("the system does not need to process local aec"),-1;this.context||(this.context=new Sv);let n=Wc(t=this.units).call(t,(t=>t&&t.getElement()===e));return n||(n=new Iv(e,this.context),this.units.push(n)),n.startEchoCancellation(),Tl.debug("start processing local audio echo cancellation, id is",n.id),n.id}_doesEnvironmentNeedAEC(){return J().name!==Au.SAFARI}}!function(e,t,n,r){var i,o=arguments.length,a=3>o?t:null===r?r=ns(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;0<=s;s--)(i=e[s])&&(a=(3>o?i(a):3<o?i(t,n,a):i(t,n))||a);3<o&&a&&qa(t,n,a)}([$e({report:Rd}),Cv("design:type",Function),Cv("design:paramtypes",[HTMLAudioElement]),Cv("design:returntype",Number)],Tv.prototype,"processExternalMediaAEC",null);let Rv=new Tv;var kv,Ov,Nv,xv;pe("PROCESS_ID",_i(kv=_i(Ov=_i(Nv=_i(xv="process-".concat(Lt(8,""),"-")).call(xv,Lt(4,""),"-")).call(Nv,Lt(4,""),"-")).call(Ov,Lt(4,""),"-")).call(kv,Lt(12,""))),function(){let e=J();var t=!(!navigator.mediaDevices||!navigator.mediaDevices.getDisplayMedia);Th.getDisplayMedia=t,Th.getStreamFromExtension=e.name===Au.CHROME&&34<Number(e.version),Th.supportUnifiedPlan=function(){if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let e=new RTCPeerConnection,t=!1;try{e.addTransceiver("audio"),t=!0}catch(e){}return e.close(),t}(),Th.supportMinBitrate=e.name===Au.CHROME||e.name===Au.EDGE,Th.supportSetRtpSenderParameters=function(){let e=J();return!!(window.RTCRtpSender&&window.RTCRtpSender.prototype.setParameters&&window.RTCRtpSender.prototype.getParameters)&&(!!ue()||!(!te()&&!Z())||e.name===Au.FIREFOX&&64<=Number(e.version))}(),e.name===Au.SAFARI&&(14<=Number(e.version)?Th.supportDualStream=!0:Th.supportDualStream=!1),Th.webAudioMediaStreamDest=function(){let e=J();return!(e.name===Au.SAFARI&&12>Number(e.version))}(),Th.supportReplaceTrack=!!window.RTCRtpSender&&"function"==typeof RTCRtpSender.prototype.replaceTrack,Th.supportWebGL="undefined"!=typeof WebGLRenderingContext,Th.supportRequestFrame=!!window.CanvasCaptureMediaStreamTrack,ue()||(Th.webAudioWithAEC=!0),Th.supportShareAudio=function(){let e=J();return(e.os===gu.WIN_10||e.os===gu.WIN_81||e.os===gu.WIN_7||e.os===gu.LINUX||e.os===gu.MAC_OS)&&e.name===Au.CHROME&&74<=Number(e.version)}(),Th.supportDualStreamEncoding=function(){let e=J();return"Safari"===e.name&&14<=Number(e.version)}(),Tl.info("browser compatibility",Fr(Th),Fr(e))}();let Dv={__CLIENT_LIST__:Uu,__TRACK_LIST__:Fu,VERSION:ku,BUILD:"v4.7.3-0-g0eb931c7(11/16/2021, 7:57:58 PM)",setParameter:pe,getParameter:function(e){return Mu[e]},getSupportedCodec:async function(e){let t=null;return e?(t=new bA({}),t.addStream(e)):t=new _A({}),e=wn(await t.createOfferSDP()),t.close(),e},checkSystemRequirements:function(){const e=Rd.reportApiInvoke(null,{name:Pl.CHECK_SYSTEM_REQUIREMENTS,options:[],tag:Bl.TRACER});var t=!1;try{var n=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,r=window.WebSocket;t=!!(window.RTCPeerConnection&&n&&r)}catch(e){return Tl.error("check system requirement failed: ",e),!1}return n=!1,(r=J()).name===Au.CHROME&&58<=Number(r.version)&&("WebKit"!==Ru.engine.name||$())&&(n=!0),r.name===Au.FIREFOX&&56<=Number(r.version)&&(n=!0),r.name===Au.OPERA&&45<=Number(r.version)&&(n=!0),r.name===Au.SAFARI&&11<=Number(r.version)&&(n=!0),J().name!==Au.WECHAT&&J().name!==Au.QQ||(n=!0),Tl.debug("checkSystemRequirements, api:",t,"browser",n),t=t&&n,e.onSuccess(t),t},getDevices:function(e){return Vd.enumerateDevices(!0,!0,e)},getMicrophones:function(e){return Vd.getRecordingDevices(e)},getCameras:function(e){return Vd.getCamerasDevices(e)},getElectronScreenSources:st,getPlaybackDevices:function(e){return Vd.getSpeakers(e)},createClient:function(e={codec:"vp8",mode:"rtc"}){const t=Rd.reportApiInvoke(null,{name:Pl.CREATE_CLIENT,options:[e],tag:Bl.TRACER});try{xe(e.codec,"config.codec",["vp8","vp9","av1","h264"]),xe(e.mode,"config.mode",["rtc","live"]),void 0!==e.proxyServer&&Le(e.proxyServer,"config.proxyServer",1,1e4),void 0!==e.turnServer&&Ge(e.turnServer),void 0!==e.httpRetryConfig&&Fe(e.httpRetryConfig),void 0!==e.websocketRetryConfig&&Fe(e.websocketRetryConfig)}catch(e){throw t.onError(e),e}return t.onSuccess(),new yv(Un({forceWaitGatewayResponse:!0},e,{role:"rtc"===e.mode?"host":e.role}))},createCameraVideoTrack:async function(e={encoderConfig:"480p_1"}){const t=Rd.reportApiInvoke(null,{tag:Bl.TRACER,name:Pl.CREATE_CAM_VIDEO_TRACK,options:[Gn({},e)]}),n=yn(e);var r=Lt(8,"track-cam-");let i=null;Tl.info("start create camera video track with config",Fr(e),"trackId",r);try{i=(await ut({video:n},r)).getVideoTracks()[0]||null}catch(e){throw t.onError(e),e}return i?(e.optimizationMode&&qn(r,i,e,e.encoderConfig&&le(e.encoderConfig)),e=new YA(i,e,n,e.scalabiltyMode?de(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode,r),t.onSuccess(e.getTrackId()),Tl.info("create camera video success, trackId:",r),e):(r=new Rl(Yu.UNEXPECTED_ERROR,"can not find track in media stream"),t.onError(r),r.throw())},createCustomVideoTrack:function(e){const t=Rd.reportApiInvoke(null,{tag:Bl.TRACER,name:Pl.CREATE_CUSTOM_VIDEO_TRACK,options:[e]}),n=new zA(e.mediaStreamTrack,{bitrateMax:e.bitrateMax,bitrateMin:e.bitrateMin},e.scalabiltyMode?de(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode);return t.onSuccess(n.getTrackId()),Tl.info("create custom video track success with config",e,"trackId",n.getTrackId()),n},createScreenVideoTrack:async function(e={},t="disable"){const n=Rd.reportApiInvoke(null,{tag:Bl.TRACER,name:Pl.CREATE_SCREEN_VIDEO_TRACK,options:[Gn({},e),t]});e.encoderConfig?"string"==typeof e.encoderConfig||e.encoderConfig.width&&e.encoderConfig.height||(e.encoderConfig.width={max:1920},e.encoderConfig.height={max:1080}):e.encoderConfig="1080p_2";var r={};e.screenSourceType&&(r.mediaSource=e.screenSourceType),e.extensionId&&ee()&&(r.extensionId=e.extensionId),e.electronScreenSourceId&&(r.sourceId=e.electronScreenSourceId);var i=e.encoderConfig?he(e.encoderConfig):null;r.mandatory={chromeMediaSource:"desktop",maxWidth:i?i.width:void 0,maxHeight:i?i.height:void 0},i&&i.frameRate&&("number"==typeof i.frameRate?(r.mandatory.maxFrameRate=i.frameRate,r.mandatory.minFrameRate=i.frameRate):(r.mandatory.maxFrameRate=i.frameRate.max||i.frameRate.ideal||i.frameRate.exact||void 0,r.mandatory.minFrameRate=i.frameRate.min||i.frameRate.ideal||i.frameRate.exact||void 0),r.frameRate=i.frameRate),i&&i.width&&(r.width=i.width),i&&i.height&&(r.height=i.height),i=r;const o=Lt(8,"track-scr");let a=null;r=null;const s=Th;if(!s.supportShareAudio&&"enable"===t)return e=new Rl(Yu.NOT_SUPPORTED,"your browser or platform is not support share-screen with audio"),n.onError(e),e.throw();Tl.info("start create screen video track with config",e,"withAudio",t,"trackId",o);try{const e=await ut({screen:i,screenAudio:"auto"===t?s.supportShareAudio:"enable"===t},o);a=e.getVideoTracks()[0]||null,r=e.getAudioTracks()[0]||null}catch(e){throw n.onError(e),e}return a?r||"enable"!==t?(e.optimizationMode||(e.optimizationMode="detail"),e.optimizationMode&&(qn(o,a,e,e.encoderConfig&&he(e.encoderConfig)),e.encoderConfig&&"string"!=typeof e.encoderConfig&&(e.encoderConfig.bitrateMin=e.encoderConfig.bitrateMax)),(e=new zA(a,e.encoderConfig?he(e.encoderConfig):{},e.scalabiltyMode?de(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode,o))._hints.push(vh.SCREEN_TRACK),r?(t=new tf(r),n.onSuccess([e.getTrackId(),t.getTrackId()]),Tl.info("create screen video track success","video:",e.getTrackId(),"audio:",t.getTrackId()),[e,t]):(n.onSuccess(e.getTrackId()),Tl.info("create screen video track success","video:",e.getTrackId()),e)):(a&&a.stop(),e=new Rl(Yu.SHARE_AUDIO_NOT_ALLOWED),n.onError(e),e.throw()):(e=new Rl(Yu.UNEXPECTED_ERROR,"can not find track in media stream"),n.onError(e),e.throw())},createMicrophoneAndCameraTracks:async function(e={},t={encoderConfig:"480p_1"}){var n,r,i;const o=Rd.reportApiInvoke(null,{tag:Bl.TRACER,name:Pl.CREATE_MIC_AND_CAM_TRACKS,options:[e,t]}),a=yn(t),s=bn(e),c=Lt(8,"track-mic-"),u=Lt(8,"track-cam-");let l=null,h=null;Tl.info(_i(n=_i(r=_i(i="start create camera video track(".concat(u,") and microphone audio track(")).call(i,c,") with config, audio: ")).call(r,Fr(e),", video: ")).call(n,Fr(t)));try{var d;const e=await ut({audio:s,video:a},_i(d="".concat(c,"-")).call(d,u));l=e.getAudioTracks()[0],h=e.getVideoTracks()[0]}catch(e){throw o.onError(e),e}if(!l||!h){var f=new Rl(Yu.UNEXPECTED_ERROR,"can not find tracks in media stream");return o.onError(f),f.throw()}return t.optimizationMode&&qn(u,h,t,t.encoderConfig&&le(t.encoderConfig)),e=new nf(l,e,s,c),t=new YA(h,t,a,t.scalabiltyMode?de(t.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},t.optimizationMode,u),o.onSuccess([e.getTrackId(),t.getTrackId()]),Tl.info(_i(f="create camera video track(".concat(u,") and microphone audio track(")).call(f,c,") success")),[e,t]},createMicrophoneAudioTrack:async function(e={}){const t=Rd.reportApiInvoke(null,{tag:Bl.TRACER,name:Pl.CREATE_MIC_AUDIO_TRACK,options:[e]}),n=bn(e);var r=Lt(8,"track-mic-");let i=null;Tl.info("start create microphone audio track with config",Fr(e),"trackId",r);try{i=(await ut({audio:n},r)).getAudioTracks()[0]||null}catch(e){throw t.onError(e),e}return i?(e=new nf(i,e,n,r),t.onSuccess(e.getTrackId()),Tl.info("create microphone audio track success, trackId:",r),e):(r=new Rl(Yu.UNEXPECTED_ERROR,"can not find track in media stream"),t.onError(r),r.throw())},createCustomAudioTrack:function(e){const t=Rd.reportApiInvoke(null,{tag:Bl.TRACER,name:Pl.CREATE_CUSTOM_AUDIO_TRACK,options:[e]}),n=new tf(e.mediaStreamTrack,e.encoderConfig?fe(e.encoderConfig):{});return Tl.info("create custom audio track success with config",e,"trackId",n.getTrackId()),t.onSuccess(n.getTrackId()),n},createBufferSourceAudioTrack:async function(e){const t=Rd.reportApiInvoke(null,{tag:Bl.TRACER,name:Pl.CREATE_BUFFER_AUDIO_TRACK,options:[e]}),n=Lt(8,"track-buf-");Tl.info("start create buffer source audio track with config",Fr(e),"trackId",n);const r=e.source;if(!(e.source instanceof AudioBuffer))try{e.source=await Fn(e.source,e.cacheOnlineFile)}catch(e){return t.onError(e),e.throw()}const i=new bv(e.source);return e=new rf(r,i,e.encoderConfig?fe(e.encoderConfig):{},n),Tl.info("create buffer source audio track success, trackId:",n),t.onSuccess(e.getTrackId()),e},setLogLevel:function(e){Tl.setLogLevel(e)},enableLogUpload:function(){Tl.enableLogUpload()},disableLogUpload:function(){Tl.disableLogUpload()},createChannelMediaRelayConfiguration:function(){return new cv},checkAudioTrackIsActive:async function(e,t=5e3){const n=Rd.reportApiInvoke(null,{tag:Bl.TRACER,name:Pl.CHECK_AUDIO_TRACK_IS_ACTIVE,options:[t]});if(!(e instanceof tf||e instanceof iv)){var r=new Rl(Yu.INVALID_TRACK,"the parameter is not a audio track");return n.onError(r),r.throw()}t&&1e3>t&&(t=1e3);const i=e instanceof tf?e.getTrackLabel():"remote_track";let o=r=e.getVolumeLevel(),a=r;const s=tl();return new wc((r=>{const c=Ev((()=>{var u=e.getVolumeLevel();o=u>o?u:o,a=u<a?u:a,u=1e-4<o-a;var l,h=tl()-s;(u||h>t)&&(clearInterval(c),h={duration:h,deviceLabel:i,maxVolumeLevel:o,result:u},Tl.info(_i(l="[track-".concat(e.getTrackId(),"] check audio track active completed. ")).call(l,Fr(h))),n.onSuccess(h),r(u))}),200)}))},checkVideoTrackIsActive:async function(e,t=5e3){var n;const r=Rd.reportApiInvoke(null,{tag:Bl.TRACER,name:Pl.CHECK_VIDEO_TRACK_IS_ACTIVE,options:[t]});if(!(e instanceof zA||e instanceof rv))return e=new Rl(Yu.INVALID_TRACK,"the parameter is not a video track"),r.onError(e),e.throw();t&&1e3>t&&(t=1e3);var i=e instanceof zA?e.getTrackLabel():"remote_track",o=e.getMediaStreamTrack(!0);const a=document.createElement("video");a.style.width="1px",a.style.height="1px",a.setAttribute("muted",""),a.muted=!0,a.setAttribute("playsinline",""),a.controls=!1,(te()||Z())&&(a.style.opacity="0.01",a.style.position="fixed",a.style.left="0",a.style.top="0",document.body.appendChild(a)),a.srcObject=new MediaStream([o]),a.play();const s=document.createElement("canvas");s.width=160,s.height=120;let c=o=0;try{const e=tl();o=await function(e,t,n,r){let i,o=0,a=null;return new wc(((s,c)=>{el((()=>{i&&(i(),s(o))}),t),i=it((()=>{e:{o>r&&i&&(i(),s(o));var t=n.getContext("2d");if(t){t.drawImage(e,0,0,160,120),t=t.getImageData(0,0,n.width,n.height);var u=Math.floor(t.data.length/3);if(a)for(let e=0;e<u;e+=3)if(t.data[e]!==a[e]){o+=1,a=t.data;break e}a=t.data}else t=new Rl(Yu.UNEXPECTED_ERROR,"can not get canvas 2d context."),Tl.error(t.toString()),c(t)}}),30)}))}(a,t,s,4),c=tl()-e}catch(e){throw r.onError(e),e}return wv===Au.SAFARI&&(a.pause(),a.remove()),a.srcObject=null,i={duration:c,changedPicNum:o,deviceLabel:i,result:t=4<o},Tl.info(_i(n="[track-".concat(e.getTrackId(),"] check video track active completed. ")).call(n,Fr(i))),r.onSuccess(i),t},setArea:function(e){const t=Rd.reportApiInvoke(null,{name:Pl.SET_AREA,options:e,tag:Bl.TRACER});try{var n;let t=[];if("string"==typeof e&&(t=[e]),Ju(e)&&(Oa(e).call(e,(e=>{if(!ru(bh).call(bh,e))throw new Rl(Yu.INVALID_PARAMS,"invalid area code")})),t=e),"[object Object]"===Object.prototype.toString.call(e)){const{areaCode:n,excludedArea:r}=e;if(!n)throw new Rl(Yu.INVALID_PARAMS,"area code is needed");e=n,"string"==typeof n&&(e=[n]),t=r?iA(e,r):e}pe("AREAS",t);const r=(e=>{const t={CODE:"",WEBCS_DOMAIN:[],WEBCS_DOMAIN_BACKUP_LIST:[],PROXY_CS:[],CDS_AP:[],ACCOUNT_REGISTER:[],UAP_AP:[],EVENT_REPORT_DOMAIN:[],EVENT_REPORT_BACKUP_DOMAIN:[],LOG_UPLOAD_SERVER:[],PROXY_SERVER_TYPE3:[]};return Sc(e).call(e,(e=>{const n=Eh[e];(e=Ba(n))&&Sc(e).call(e,(e=>{var r;"CODE"!==e&&(t[e]=_i(r=t[e]).call(r,n[e]))}))})),t})(t);Sc(n=Ba(r)).call(n,(e=>{pe(e,"LOG_UPLOAD_SERVER"===e||"EVENT_REPORT_DOMAIN"===e||"EVENT_REPORT_BACKUP_DOMAIN"===e||"PROXY_SERVER_TYPE3"===e?r[e][0]:r[e])})),Tl.debug("set area success:",t.join(","))}catch(e){throw t.onError(e),e}t.onSuccess()},loadModule:async function(e,t){var n;if(Tl.debug(_i(n="loadModule: ".concat(e.name,", loadOption: ")).call(n,Fr(t))),!e.moduleInit)throw Tl.debug("Invalid Plugin"),new Rl(Yu.INVALID_PLUGIN,"invalid plugin");try{await e.moduleInit({logger:Tl,report:Rd},t)}catch(e){throw new Rl(Yu.UNEXPECTED_ERROR,"unexpected error in loadModule",e)}},processExternalMediaAEC:function(e){Rv.processExternalMediaAEC(e)}};return Vd.on(jl.CAMERA_DEVICE_CHANGED,(e=>{Tl.info("camera device changed",Fr(e)),Dv.onCameraChanged&&Dv.onCameraChanged(e)})),Vd.on(jl.RECORDING_DEVICE_CHANGED,(e=>{Tl.info("microphone device changed",Fr(e)),Dv.onMicrophoneChanged&&Dv.onMicrophoneChanged(e)})),Vd.on(jl.PLAYOUT_DEVICE_CHANGED,(e=>{Tl.debug("playout device changed",Fr(e)),Dv.onPlaybackDeviceChanged&&Dv.onPlaybackDeviceChanged(e)})),Zd.onAutoplayFailed=()=>{Tl.info("detect audio element autoplay failed"),Dv.onAudioAutoplayFailed&&Dv.onAudioAutoplayFailed()},Bd.on("autoplay-failed",(()=>{Tl.info("detect webaudio autoplay failed"),Dv.onAudioAutoplayFailed&&Dv.onAudioAutoplayFailed()})),Jd.on("autoplay-failed",(()=>{Tl.info("detect media autoplay failed, document: https://docs.agora.io/cn/Voice/autoplay_policy_web_ng?platform=Web"),Dv.onAutoplayFailed?Dv.onAutoplayFailed():Dv.onAudioAutoplayFailed?Tl.warning("AgoraRTC.onAudioAutoplayFailed has been deprecated in favor of AgoraRTC.onAutoplayFailed.\n\nPlease refer to the Agora document to migrate the newer API, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web ."):Tl.warning("We have detected a media autoplay failed event, and found out that you haven't implemented AgoraRTC.onAutoplayFailed callback yet.\n\nIt will cause audio/video element not playing automatically on some browsers without user interaction, possibly hurting user experiences.\n\nPlease refer to the Agora document to properly handle autoplay failed event, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web .")})),window&&(window.__ARTC__=Dv),Dv}()},3136:function(module,__unused_webpack_exports,__webpack_require__){"use strict";var t;module=__webpack_require__.nmd(module),t=function(){function ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ua(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function aa(e){return(aa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rl(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function K(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){function o(e){rl(s,r,i,o,a,"next",e)}function a(e){rl(s,r,i,o,a,"throw",e)}var s=e.apply(t,n);o(void 0)}))}}function X(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ha(e,t,n){return t&&sl(e.prototype,t),n&&sl(e,n),e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function la(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&df(e,t)}function wd(e){return(wd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function df(e,t){return(df=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function tl(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Rh(e,t,n){return(Rh=tl()?Reflect.construct:function(e,t,n){var r=[null];return r.push.apply(r,t),e=new(Function.bind.apply(e,r)),n&&df(e,n.prototype),e}).apply(null,arguments)}function ef(e){var t="function"==typeof Map?new Map:void 0;return(ef=function(e){function n(){return Rh(e,arguments,wd(this).constructor)}if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),df(n,e)})(e)}function ff(e,t){if(null==e)return{};if(null==e)var n={};else{n={};var r,i=Object.keys(e);for(r=0;r<i.length;r++){var o=i[r];0<=t.indexOf(o)||(n[o]=e[o])}}if(Object.getOwnPropertySymbols)for(r=Object.getOwnPropertySymbols(e),o=0;o<r.length;o++)i=r[o],0<=t.indexOf(i)||Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i]);return n}function n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ma(e){var t=tl();return function(){var r=wd(e);if(t){var i=wd(this).constructor;r=Reflect.construct(r,arguments,i)}else r=r.apply(this,arguments);return!r||"object"!=typeof r&&"function"!=typeof r?n(this):r}}function Sh(e,t,n){return(Sh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=wd(e)););if(e)return(t=Object.getOwnPropertyDescriptor(e,t)).get?t.get.call(n):t.value})(e,t,n||e)}function ra(e,t){var n=Array.isArray(e)?e:void 0;if(!n)if(null==(n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"])))n=void 0;else{var r,i=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){a=!0;var s=e}finally{try{o||null==n.return||n.return()}finally{if(a)throw s}}n=i}if(!(e=n||ul(e,t)))throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");return e}function I(e){var t=Array.isArray(e)?Th(e):void 0;if(t||(t="undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"]?Array.from(e):void 0),!(e=t||ul(e)))throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");return e}function ul(e,t){if(e){if("string"==typeof e)return Th(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Th(e,t)}}function Th(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function fa(e,t,n,r,i){var o={};return Object.keys(r).forEach((function(e){o[e]=r[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}function $a(e){var t={exports:{}};return e(t,t.exports),t.exports}function vl(e,t){var n,r=3>arguments.length?e:arguments[2];return va(e)===r?e[t]:(n=Fb.f(e,t))?Q(n,"value")?n.value:void 0===n.get?void 0:n.get.call(r):ha(n=Vb(e))?vl(n,t,r):void 0}function os(e){var t=e.charCodeAt(0)<<24,n=0|ps(~t),r=0,i=0|e.length,o="";if(5>n&&i>=n){for(t=t<<n>>>24+n,r=1;r<n;r=r+1|0)t=t<<6|63&e.charCodeAt(r);65535>=t?o+=xd(t):1114111>=t?o+=xd(55296+((t=t-65536|0)>>10)|0,56320+(1023&t)|0):r=0}for(;r<i;r=r+1|0)o+="";return o}function wl(){}function qs(e){var t=0|e.charCodeAt(0);if(55296<=t&&56319>=t){var n=0|e.charCodeAt(1);if(!(n==n&&56320<=n&&57343>=n))return xd(239,191,189);if(65535<(t=(t-55296<<10)+n-56320+65536|0))return xd(240|t>>>18,128|t>>>12&63,128|t>>>6&63,128|63&t)}return 127>=t?e:2047>=t?xd(192|t>>>6,128|63&t):xd(224|t>>>12,128|t>>>6&63,128|63&t)}function xl(){}function ea(){ea.init.call(this)}function ng(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+aa(e))}function yl(e,t,n,r){ng(n);var i=e._events;if(void 0===i)i=e._events=Object.create(null),e._eventsCount=0;else{void 0!==i.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),i=e._events);var o=i[t]}return void 0===o?(i[t]=n,++e._eventsCount):("function"==typeof o?o=i[t]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),0<(n=void 0===e._maxListeners?ea.defaultMaxListeners:e._maxListeners)&&o.length>n&&!o.warned&&(o.warned=!0,(n=Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",n.emitter=e,n.type=t,n.count=o.length,console&&console.warn&&console.warn(n))),e}function rs(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function zl(e,t,n){return e={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},(t=rs.bind(e)).listener=n,e.wrapFn=t}function Al(e,t,n){if(void 0===(e=e._events))return[];if(void 0===(t=e[t]))return[];if("function"==typeof t)return n?[t.listener||t]:[t];if(n)for(n=Array(t.length),e=0;e<n.length;++e)n[e]=t[e].listener||t[e];else n=Bl(t,t.length);return n}function Cl(e){var t=this._events;if(void 0!==t){if("function"==typeof(e=t[e]))return 1;if(void 0!==e)return e.length}return 0}function Bl(e,t){for(var n=Array(t),r=0;r<t;++r)n[r]=e[r];return n}function ss(e,t,n){"function"==typeof e.on&&Dl(e,"error",t,n)}function Dl(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+aa(e));e.addEventListener(t,(function i(o){r.once&&e.removeEventListener(t,i),n(o)}))}}function ts(e){return e?I(e):us((function(){return[]}),(function(e,t){return e.push(t),e}))}function El(e,t){var n,r,i,o;return x.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n=Fl(e)([Gl,Gl,function(e,t){return t}])[2],r=0;case 2:if(!(r<t.length)){a.next=17;break}if(i=t[r],!((o=n(Uh,i))instanceof og)){a.next=11;break}if((o=Vh(o.deref()))===Uh){a.next=10;break}return a.next=10,o;case 10:return a.abrupt("return");case 11:if(o===Uh){a.next=14;break}return a.next=14,o;case 14:r++,a.next=2;break;case 17:case"end":return a.stop()}}),vs)}function pg(e,t){return null!=t&&"function"==typeof t[Symbol.iterator]?El(pg(e),t):function(t){var n=t[2];return ws(t,(function(t,r){return n(t,e(r))}))}}function Ac(e){return Object.prototype.toString.call(e).slice(8,-1)}function yd(e){return"Object"===Ac(e)&&e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function Hl(e){var t;return(t="Boolean"===Ac(e)||"Null"===Ac(e)||"Undefined"===Ac(e))||(t="Number"===Ac(e)&&!isNaN(e)),t||"String"===Ac(e)||"Symbol"===Ac(e)}function zd(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function be(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ce(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function gf(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new qg;++t<n;)this.add(e[t])}function de(e){this.size=(this.__data__=new rg(e)).size}function ee(e,t,n,r,i,o){var a,s=1&t,c=2&t,u=4&t;if(n&&(a=i?n(e,r,i,o):n(e)),void 0!==a)return a;if(!lb(e))return e;if(r=Va(e)){if(a=xs(e),!s)return Wh(e,a)}else{var l=hf(e),h="[object Function]"==l||"[object GeneratorFunction]"==l;if(jf(e))return Il(e,s);if("[object Object]"==l||"[object Arguments]"==l||h&&!i){if(a=c||h?{}:Jl(e),!s)return c?ys(e,zs(a,e)):As(e,Bs(a,e))}else{if(!wa[l])return i?e:{};a=Cs(e,l,s)}}if(o||(o=new fe),i=o.get(e))return i;o.set(e,a),Ds(e)?e.forEach((function(r){a.add(ee(r,t,n,r,e,o))})):Es(e)&&e.forEach((function(r,i){a.set(i,ee(r,t,n,i,e,o))})),c=u?c?Kl:Xh:c?kf:Ad;var d=r?void 0:c(e);return Fs(d||e,(function(r,i){d&&(r=e[i=r]),Ll(a,i,ee(r,t,n,i,e,o))})),a}function Yh(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function n(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;return o.has(i)?o.get(i):(r=e.apply(this,r),n.cache=o.set(i,r)||o,r)};return n.cache=new(Yh.Cache||qg),n}function Ml(e){if("string"==typeof e)return e;if(Va(e))return ge(e,Ml)+"";if(he(e))return Nl?Nl.call(e):"";var t=e+"";return"0"==t&&1/e==-Gs?"-0":t}function Zh(e,t,n,r,i){var o=-1,a=e.length;for(n||(n=Hs),i||(i=[]);++o<a;){var s=e[o];0<t&&n(s)?1<t?Zh(s,t-1,n,r,i):$h(i,s):r||(i[i.length]=s)}return i}function ie(e,t,n,r,i){if(e===t)t=!0;else if(null==e||null==t||!gc(e)&&!gc(t))t=e!=e&&t!=t;else e:{var o=Va(e),a=Va(t),s=o?"[object Array]":hf(e),c=a?"[object Array]":hf(t),u="[object Object]"==(s="[object Arguments]"==s?"[object Object]":s);if(a="[object Object]"==(c="[object Arguments]"==c?"[object Object]":c),(c=s==c)&&jf(e)){if(!jf(t)){t=!1;break e}o=!0,u=!1}if(c&&!u)i||(i=new fe),t=o||ai(e)?Ol(e,t,n,r,ie,i):Is(e,t,s,n,r,ie,i);else{if(!(1&n)&&(o=u&&Pl.call(e,"__wrapped__"),s=a&&Pl.call(t,"__wrapped__"),o||s)){e=o?e.value():e,t=s?t.value():t,i||(i=new fe),t=ie(e,t,n,r,i);break e}if(c)t:if(i||(i=new fe),o=1&n,s=Xh(e),a=s.length,c=Xh(t).length,a==c||o){for(c=a;c--;){var l=s[c];if(!(o?l in t:Js.call(t,l))){t=!1;break t}}if(u=i.get(e),l=i.get(t),u&&l)t=u==t&&l==e;else{u=!0,i.set(e,t),i.set(t,e);for(var h=o;++c<a;){var d=e[l=s[c]],f=t[l];if(r)var p=o?r(f,d,l,t,e,i):r(d,f,l,e,t,i);if(void 0===p?d!==f&&!ie(d,f,n,r,i):!p){u=!1;break}h||(h="constructor"==l)}u&&!h&&(n=e.constructor)!=(r=t.constructor)&&"constructor"in e&&"constructor"in t&&!("function"==typeof n&&n instanceof n&&"function"==typeof r&&r instanceof r)&&(u=!1),i.delete(e),i.delete(t),t=u}}else t=!1;else t=!1}}return t}function xa(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function mb(e){return!0===(e&&e.__isLong__)}function Bd(e,t){var n;if(t){if((t=0<=(e>>>=0)&&256>e)&&(n=Ql[e]))return n;n=ya(e,0>(0|e)?-1:0,!0),t&&(Ql[e]=n)}else{if((t=-128<=(e|=0)&&128>e)&&(n=Rl[e]))return n;n=ya(e,0>e?-1:0,!1),t&&(Rl[e]=n)}return n}function Gb(e,t){if(isNaN(e))return t?Cd:Hb;if(t){if(0>e)return Cd;if(e>=Sl)return Tl}else{if(e<=-Ul)return nb;if(e+1>=Ul)return Vl}return 0>e?Gb(-e,t).neg():ya(e%je|0,e/je|0,t)}function ya(e,t,n){return new xa(e,t,n)}function bi(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return Hb;if("number"==typeof t?(n=t,t=!1):t=!!t,2>(n=n||10)||36<n)throw RangeError("radix");var r;if(0<(r=e.indexOf("-")))throw Error("interior hyphen");if(0===r)return bi(e.substring(1),t,n).neg();r=Gb(sg(n,8));for(var i=Hb,o=0;o<e.length;o+=8){var a=Math.min(8,e.length-o),s=parseInt(e.substring(o,o+a),n);8>a?(a=Gb(sg(n,a)),i=i.mul(a).add(Gb(s))):i=(i=i.mul(r)).add(Gb(s))}return i.unsigned=t,i}function Wb(e,t){return"number"==typeof e?Gb(e,t):"string"==typeof e?bi(e,t):ya(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}function O(e,t){function n(){this.constructor=e}ci(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function ke(e){return"function"==typeof e}function le(e){setTimeout((function(){throw e}),0)}function di(e){return null!==e&&"object"===aa(e)}function Wl(e){return e.reduce((function(e,t){return e.concat(t instanceof lf?t.errors:t)}),[])}function ei(e){for(;e;){var t=e.destination,n=e.isStopped;if(e.closed||n)return!1;e=t&&t instanceof ia?t:null}return!0}function Xc(e){return e}function fi(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Xl(e)}function Xl(e){return 0===e.length?Xc:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}function Yl(e){if(e||(e=Ib.Promise||Promise),!e)throw Error("no Promise impl found");return e}function Zl(){return function(e){return e.lift(new Ks(e))}}function mf(e){return e?Ls(e):vb}function Ls(e){return new W((function(t){return e.schedule((function(){return t.complete()}))}))}function Yc(e){return e&&"function"==typeof e.schedule}function gi(e,t){return new W((function(n){var r=new Na,i=0;return r.add(t.schedule((function(){i===e.length?n.complete():(n.next(e[i++]),n.closed||r.add(this.schedule()))}))),r}))}function nf(e,t){return t?gi(e,t):new W($l(e))}function fb(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Yc(t=e[e.length-1])?(e.pop(),gi(e,t)):nf(e)}function Y(e,t){return new W(t?function(n){return t.schedule(Ms,0,{error:e,subscriber:n})}:function(t){return t.error(e)})}function Ms(e){e.subscriber.error(e.error)}function Ns(e,t){return void 0===t&&(t=0),function(n){return n.lift(new Os(e,t))}}function am(e){return e in hi&&(delete hi[e],!0)}function hc(){}function ba(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new Ps(e,t))}}function bm(e,t,n){if(t){if(!Yc(t))return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return bm(e,n).apply(void 0,r).pipe(ba((function(e){return Jb(e)?t.apply(void 0,e):t(e)})))};n=t}return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i,o=this,a={context:o,subject:i,callbackFunc:e,scheduler:n};return new W((function(r){if(n)return n.schedule(Qs,0,{args:t,subscriber:r,params:a});if(!i){i=new of;try{e.apply(o,t.concat([function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];i.next(1>=e.length?e[0]:e),i.complete()}]))}catch(e){ei(i)?i.error(e):console.warn(e)}}return i.subscribe(r)}))}}function Qs(e){var t=this,n=e.args,r=e.subscriber,i=e.params;e=i.callbackFunc;var o=i.context,a=i.scheduler,s=i.subject;if(!s){s=i.subject=new of,i=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.add(a.schedule(Rs,0,{value:1>=e.length?e[0]:e,subject:s}))};try{e.apply(o,n.concat([i]))}catch(e){s.error(e)}}this.add(s.subscribe(r))}function Rs(e){var t=e.subject;t.next(e.value),t.complete()}function cm(e,t,n){if(t){if(!Yc(t))return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return cm(e,n).apply(void 0,r).pipe(ba((function(e){return Jb(e)?t.apply(void 0,e):t(e)})))};n=t}return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i={subject:void 0,args:t,callbackFunc:e,scheduler:n,context:this};return new W((function(r){var o=i.context,a=i.subject;if(n)return n.schedule(Ss,0,{params:i,subscriber:r,context:o});if(!a){a=i.subject=new of;try{e.apply(o,t.concat([function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];(t=e.shift())?a.error(t):(a.next(1>=e.length?e[0]:e),a.complete())}]))}catch(e){ei(a)?a.error(e):console.warn(e)}}return a.subscribe(r)}))}}function Ss(e){var t=this,n=e.params,r=e.subscriber;e=e.context;var i=n.callbackFunc,o=n.args,a=n.scheduler,s=n.subject;if(!s){s=n.subject=new of,n=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];(n=e.shift())?t.add(a.schedule(dm,0,{err:n,subject:s})):t.add(a.schedule(Ts,0,{value:1>=e.length?e[0]:e,subject:s}))};try{i.apply(e,o.concat([n]))}catch(e){this.add(a.schedule(dm,0,{err:e,subject:s}))}}this.add(s.subscribe(r))}function Ts(e){var t=e.subject;t.next(e.value),t.complete()}function dm(e){e.subject.error(e.err)}function em(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}function ii(e,t,n,r,i){if(void 0===i&&(i=new Us(e,n,r)),!i.closed)return t instanceof W?t.subscribe(i):pf(t)(i)}function Vs(e,t){return new W((function(n){var r=new Na;return r.add(t.schedule((function(){var i=e[me]();r.add(i.subscribe({next:function(e){r.add(t.schedule((function(){return n.next(e)})))},error:function(e){r.add(t.schedule((function(){return n.error(e)})))},complete:function(){r.add(t.schedule((function(){return n.complete()})))}}))}))),r}))}function Ws(e,t){return new W((function(n){var r=new Na;return r.add(t.schedule((function(){return e.then((function(e){r.add(t.schedule((function(){n.next(e),r.add(t.schedule((function(){return n.complete()})))})))}),(function(e){r.add(t.schedule((function(){return n.error(e)})))}))}))),r}))}function Xs(e,t){if(!e)throw Error("Iterable cannot be null");return new W((function(n){var r,i=new Na;return i.add((function(){r&&"function"==typeof r.return&&r.return()})),i.add(t.schedule((function(){r=e[Zc](),i.add(t.schedule((function(){if(!n.closed){try{var e=r.next(),t=e.value,i=e.done}catch(e){return void n.error(e)}i?n.complete():(n.next(t),this.schedule())}})))}))),i}))}function fm(e,t){if(null!=e){if(e&&"function"==typeof e[me])return Vs(e,t);if(em(e))return Ws(e,t);if(gm(e))return gi(e,t);if(e&&"function"==typeof e[Zc]||"string"==typeof e)return Xs(e,t)}throw new TypeError((null!==e&&aa(e)||e)+" is not observable")}function Kb(e,t){return t?fm(e,t):e instanceof W?e:new W(pf(e))}function ic(e,t){if(!t.closed){if(e instanceof W)return e.subscribe(t);try{var n=pf(e)(t)}catch(e){t.error(e)}return n}}function bb(e,t,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof t?function(r){return r.pipe(bb((function(n,r){return Kb(e(n,r)).pipe(ba((function(e,i){return t(n,e,r,i)})))}),n))}:("number"==typeof t&&(n=t),function(t){return t.lift(new Ys(e,n))})}function tg(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),bb(Xc,e)}function hm(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return tg(1)(fb.apply(void 0,e))}function $c(e){return new W((function(t){try{var n=e()}catch(e){return void t.error(e)}return(n?Kb(n):mf()).subscribe(t)}))}function im(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var n=e[0];if(Jb(n))return ug(n,null);if(di(n)&&Object.getPrototypeOf(n)===Object.prototype)return ug((e=Object.keys(n)).map((function(e){return n[e]})),e)}if("function"==typeof e[e.length-1]){var r=e.pop();return ug(e=1===e.length&&Jb(e[0])?e[0]:e,null).pipe(ba((function(e){return r.apply(void 0,e)})))}return ug(e,null)}function ug(e,t){return new W((function(n){var r=e.length;if(0===r)n.complete();else for(var i=Array(r),o=0,a=0,s=function(s){var c=Kb(e[s]),u=!1;n.add(c.subscribe({next:function(e){u||(u=!0,a++),i[s]=e},error:function(e){return n.error(e)},complete:function(){++o!==r&&u||(a===r&&n.next(t?t.reduce((function(e,t,n){return e[t]=i[n],e}),{}):i),n.complete())}}))},c=0;c<r;c++)s(c)}))}function gb(e,t,n,r){return ke(n)&&(r=n,n=void 0),r?gb(e,t,n).pipe(ba((function(e){return Jb(e)?r.apply(void 0,e):r(e)}))):new W((function(r){jm(e,t,(function(e){1<arguments.length?r.next(Array.prototype.slice.call(arguments)):r.next(e)}),r,n)}))}function jm(e,t,n,r,i){if(e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener){e.addEventListener(t,n,i);var o=function(){return e.removeEventListener(t,n,i)}}else if(e&&"function"==typeof e.on&&"function"==typeof e.off)e.on(t,n),o=function(){return e.off(t,n)};else if(e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener)e.addListener(t,n),o=function(){return e.removeListener(t,n)};else{if(!e||!e.length)throw new TypeError("Invalid event target");for(var a=0,s=e.length;a<s;a++)jm(e[a],t,n,r,i)}r.add(o)}function km(e,t,n){return n?km(e,t).pipe(ba((function(e){return Jb(e)?n.apply(void 0,e):n(e)}))):new W((function(n){var r=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.next(1===e.length?e[0]:e)};try{var i=e(r)}catch(e){return void n.error(e)}if(ke(t))return function(){return t(r,i)}}))}function Zs(e){var t=e.subscriber,n=e.condition;if(!t.closed){if(e.needIterate)try{e.state=e.iterate(e.state)}catch(e){return void t.error(e)}else e.needIterate=!0;if(n){var r=void 0;try{r=n(e.state)}catch(e){return void t.error(e)}if(!r)return void t.complete();if(t.closed)return}try{var i=e.resultSelector(e.state)}catch(e){return void t.error(e)}if(!t.closed&&(t.next(i),!t.closed))return this.schedule(e)}}function ji(e){return!Jb(e)&&0<=e-parseFloat(e)+1}function lm(e,t){return void 0===e&&(e=0),void 0===t&&(t=ad),(!ji(e)||0>e)&&(e=0),t&&"function"==typeof t.schedule||(t=ad),new W((function(n){return n.add(t.schedule($s,e,{subscriber:n,counter:0,period:e})),n}))}function $s(e){var t=e.subscriber,n=e.counter;e=e.period,t.next(n),this.schedule({subscriber:t,counter:n+1,period:e},e)}function Xb(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];t=Number.POSITIVE_INFINITY;var n=null,r=e[e.length-1];return Yc(r)?(n=e.pop(),1<e.length&&"number"==typeof e[e.length-1]&&(t=e.pop())):"number"==typeof r&&(t=e.pop()),null===n&&1===e.length&&e[0]instanceof W?e[0]:tg(t)(nf(e,n))}function ki(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length)return vb;var n=e[0],r=e.slice(1);return 1===e.length&&Jb(n)?ki.apply(void 0,n):new W((function(e){var t=function(){return e.add(ki.apply(void 0,r).subscribe(e))};return Kb(n).subscribe({next:function(t){e.next(t)},error:t,complete:t})}))}function at(e){var t=e.keys,n=e.index,r=e.subscriber,i=e.subscription;if(e=e.obj,!r.closed)if(n<t.length){var o=t[n];r.next([o,e[o]]),i.add(this.schedule({keys:t,index:n+1,subscriber:r,subscription:i,obj:e}))}else r.complete()}function bt(e,t){function n(){return!n.pred.apply(n.thisArg,arguments)}return n.pred=e,n.thisArg=t,n}function wb(e,t){return function(n){return n.lift(new ct(e,t))}}function Ca(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){if(!Jb(e[0]))return e[0];e=e[0]}return nf(e,void 0).lift(new dt)}function et(e){var t=e.start,n=e.index,r=e.subscriber;n>=e.count?r.complete():(r.next(t),r.closed||(e.index=n+1,e.start=t+1,this.schedule(e)))}function Bc(e,t,n){void 0===e&&(e=0);var r=-1;return ji(t)?r=1>Number(t)?1:Number(t):Yc(t)&&(n=t),Yc(n)||(n=ad),new W((function(t){var i=ji(e)?e:+e-n.now();return n.schedule(ft,i,{index:0,period:r,subscriber:t})}))}function ft(e){var t=e.index,n=e.period,r=e.subscriber;if(r.next(t),!r.closed){if(-1===n)return r.complete();e.index=t+1,this.schedule(e,n)}}function li(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"function"==typeof(t=e[e.length-1])&&e.pop(),nf(e,void 0).lift(new gt(t))}function Ga(e){return function(t){var n=new ht(e);return t=t.lift(n),n.caught=t}}function mi(e,t){return bb(e,t,1)}function mm(e){return void 0===e&&(e=null),function(t){return t.lift(new it(e))}}function bd(e,t){void 0===t&&(t=ad);var n=e instanceof Date&&!isNaN(+e)?+e-t.now():Math.abs(e);return function(e){return e.lift(new jt(n,t))}}function nm(e,t){return function(n){return n.lift(new kt(e,t))}}function Dd(e){return void 0===e&&(e=lt),function(t){return t.lift(new mt(e))}}function lt(){return new vg}function Oa(e){return function(t){return 0===e?mf():t.lift(new nt(e))}}function om(e,t){return t?function(n){return n.pipe(om((function(n,r){return Kb(e(n,r)).pipe(ba((function(e,i){return t(n,e,r,i)})))})))}:function(t){return t.lift(new ot(e))}}function wg(e){return function(t){return t.lift(new pt(e))}}function Z(e,t){var n=2<=arguments.length;return function(r){return r.pipe(e?wb((function(t,n){return e(t,n,r)})):Xc,Oa(1),n?mm(t):Dd((function(){return new vg})))}}function qt(){return function(e){return e.lift(new rt)}}function pm(e){return function(t){return 0===e?mf():t.lift(new st(e))}}function qf(e){return function(t){return t.lift(new tt(e))}}function xg(e,t){var n=!1;return 2<=arguments.length&&(n=!0),function(r){return r.lift(new ut(e,t,n))}}function qm(e,t){return 2<=arguments.length?function(n){return fi(xg(e,t),pm(1),mm(t))(n)}:function(t){return fi(xg((function(t,n,r){return e(t,n,r+1)})),pm(1))(t)}}function vt(e,t){return function(n){var r="function"==typeof e?e:function(){return e};if("function"==typeof t)return n.lift(new wt(r,t));var i=Object.create(n,xt);return i.source=n,i.subjectFactory=r,i}}function ne(e){return function(t){return t.lift(new yt(e,t))}}function zt(){return new Pa}function oe(){return function(e){return Zl()(vt(zt)(e))}}function rm(e,t,n){var r=e&&"object"===aa(e)?e:{bufferSize:e,windowTime:t,refCount:!1,scheduler:n};return function(e){return e.lift(At(r))}}function At(e){var t,n,r=e.bufferSize,i=void 0===r?Number.POSITIVE_INFINITY:r,o=void 0===(r=e.windowTime)?Number.POSITIVE_INFINITY:r,a=e.refCount,s=e.scheduler,c=0,u=!1,l=!1;return function(e){if(c++,!t||u){u=!1;var r=(t=new pe(i,o,s)).subscribe(this);n=e.subscribe({next:function(e){t.next(e)},error:function(e){u=!0,t.error(e)},complete:function(){l=!0,n=void 0,t.complete()}}),l&&(n=void 0)}else r=t.subscribe(this);this.add((function(){c--,r.unsubscribe(),r=void 0,n&&!l&&a&&0===c&&(n.unsubscribe(),t=n=void 0)}))}}function Cc(e,t){return"function"==typeof t?function(n){return n.pipe(Cc((function(n,r){return Kb(e(n,r)).pipe(ba((function(e,i){return t(n,e,r,i)})))})))}:function(t){return t.lift(new Bt(e))}}function ob(e){return function(t){return t.lift(new Ct(e))}}function Dt(e,t){return void 0===t&&(t=!1),function(n){return n.lift(new Et(e,t))}}function ca(e,t,n){return function(r){return r.lift(new Ft(e,t,n))}}function Gt(e,t,n){return void 0===t&&(t=ad),void 0===n&&(n=Ht),function(r){return r.lift(new It(e,t,n.leading,n.trailing))}}function Jt(e){e.subscriber.clearThrottle()}function Kt(e,t,n){return void 0===n&&(n=ad),function(r){var i=e instanceof Date&&!isNaN(+e),o=i?+e-n.now():Math.abs(e);return r.lift(new Lt(o,i,t,n))}}function hb(e,t){return void 0===t&&(t=ad),Kt(e,Y(new pb),t)}function Mt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){var n;return"function"==typeof e[e.length-1]&&(n=e.pop()),t.lift(new Nt(e,n))}}function sm(e,t,n,r,i){e!==t&&tm(t,(function(o,a){if(i||(i=new fe),lb(o)){o=i;var s=ni(e,a),c=ni(t,a),u=o.get(c);if(u)oi(e,a,u);else{var l=void 0===(u=r?r(s,c,a+"",e,t,o):void 0);if(l){var h=Va(c),d=!h&&jf(c),f=!h&&!d&&ai(c);u=c,h||d||f?Va(s)?u=s:gc(s)&&Ed(s)?u=Wh(s):d?(l=!1,u=Il(c,!0)):f?(l=!1,u=um(c,!0)):u=[]:vm(c)||rf(c)?(u=s,rf(s)?u=qe(s,kf(s)):lb(s)&&!pi(s)||(u=Jl(c))):l=!1}l&&(o.set(c,u),sm(u,c,n,r,o),o.delete(c)),oi(e,a,u)}}else void 0===(s=r?r(ni(e,a),o,a+"",e,t,i):void 0)&&(s=o),oi(e,a,s)}),kf)}function Ot(e){var t=1,n=qi;1==(1>=arguments.length?0:arguments.length-1)?"number"==typeof(1>=arguments.length?void 0:arguments[1])?t=1>=arguments.length?void 0:arguments[1]:n=1>=arguments.length?void 0:arguments[1]:2==(1>=arguments.length?0:arguments.length-1)&&(t=1>=arguments.length?void 0:arguments[1],n=2>=arguments.length?void 0:arguments[2]);var r=t||1;return function(t){return t.pipe(xg((function(t,i){var o=n.now(),a=o-e;if((t=t.filter((function(e){return e.until>a}))).length>=r){var s=t[t.length-1],c=t[0].until+e*Math.floor(t.length/r);t.push({delay:s.until<o?c-o:c-s.until,until:c,value:i})}else t.push({delay:0,until:o,value:i});return t}),[]),ba((function(e){return e[e.length-1]})),mi((function(e){var t=fb(e.value);return e.delay?t.pipe(bd(e.delay,n)):t})))}}function Pt(e,t){var n=(t=void 0===t?{protocols:wm,makeWebSocket:xm}:t).protocols,r=void 0===n?wm:n,i=void 0===(t=t.makeWebSocket)?xm:t;return new W((function(t){var n,o=new Pa,a=i(e,r),s=!1,c=!1,u=function(e){if(n)throw s=!0,e=Error("Web socket message factory function called more than once"),t.error(e),e;return n=e.subscribe((function(e){a.send(e)})),o};return a.onopen=function(){c?(s=!0,a.close()):t.next(u)},a.onmessage=function(e){o.next(e.data)},a.onerror=function(e){s=!0,t.error(Error(e.message))},a.onclose=function(e){s||(s=!0,c?(t.complete(),o.complete()):t.error(Error(1e3===e.code?"Normal closure":e.reason)))},function(){c=!0,n&&n.unsubscribe(),s||(s=!0,a.close())}}))}function yg(){this._listeners={}}function ym(e){return"undefined"!=typeof Float32Array?function(){function t(e,t,n){o[0]=e,t[n]=a[0],t[n+1]=a[1],t[n+2]=a[2],t[n+3]=a[3]}function n(e,t,n){o[0]=e,t[n]=a[3],t[n+1]=a[2],t[n+2]=a[1],t[n+3]=a[0]}function r(e,t){return a[0]=e[t],a[1]=e[t+1],a[2]=e[t+2],a[3]=e[t+3],o[0]}function i(e,t){return a[3]=e[t],a[2]=e[t+1],a[1]=e[t+2],a[0]=e[t+3],o[0]}var o=new Float32Array([-0]),a=new Uint8Array(o.buffer),s=128===a[3];e.writeFloatLE=s?t:n,e.writeFloatBE=s?n:t,e.readFloatLE=s?r:i,e.readFloatBE=s?i:r}():function(){function t(e,t,n,r){var i=0>t?1:0;if(i&&(t=-t),0===t)e(0<1/t?0:2147483648,n,r);else if(isNaN(t))e(2143289344,n,r);else if(34028234663852886e22<t)e((i<<31|2139095040)>>>0,n,r);else if(11754943508222875e-54>t)e((i<<31|Math.round(t/1401298464324817e-60))>>>0,n,r);else{var o=Math.floor(Math.log(t)/Math.LN2);e((i<<31|o+127<<23|8388607&Math.round(t*Math.pow(2,-o)*8388608))>>>0,n,r)}}function n(e,t,n){return n=e(t,n),e=2*(n>>31)+1,t=n>>>23&255,n&=8388607,255===t?n?NaN:1/0*e:0===t?1401298464324817e-60*e*n:e*Math.pow(2,t-150)*(n+8388608)}e.writeFloatLE=t.bind(null,zm),e.writeFloatBE=t.bind(null,Am),e.readFloatLE=n.bind(null,Bm),e.readFloatBE=n.bind(null,Cm)}(),"undefined"!=typeof Float64Array?function(){function t(e,t,n){o[0]=e,t[n]=a[0],t[n+1]=a[1],t[n+2]=a[2],t[n+3]=a[3],t[n+4]=a[4],t[n+5]=a[5],t[n+6]=a[6],t[n+7]=a[7]}function n(e,t,n){o[0]=e,t[n]=a[7],t[n+1]=a[6],t[n+2]=a[5],t[n+3]=a[4],t[n+4]=a[3],t[n+5]=a[2],t[n+6]=a[1],t[n+7]=a[0]}function r(e,t){return a[0]=e[t],a[1]=e[t+1],a[2]=e[t+2],a[3]=e[t+3],a[4]=e[t+4],a[5]=e[t+5],a[6]=e[t+6],a[7]=e[t+7],o[0]}function i(e,t){return a[7]=e[t],a[6]=e[t+1],a[5]=e[t+2],a[4]=e[t+3],a[3]=e[t+4],a[2]=e[t+5],a[1]=e[t+6],a[0]=e[t+7],o[0]}var o=new Float64Array([-0]),a=new Uint8Array(o.buffer),s=128===a[7];e.writeDoubleLE=s?t:n,e.writeDoubleBE=s?n:t,e.readDoubleLE=s?r:i,e.readDoubleBE=s?i:r}():function(){function t(e,t,n,r,i,o){var a=0>r?1:0;if(a&&(r=-r),0===r)e(0,i,o+t),e(0<1/r?0:2147483648,i,o+n);else if(isNaN(r))e(0,i,o+t),e(2146959360,i,o+n);else if(17976931348623157e292<r)e(0,i,o+t),e((a<<31|2146435072)>>>0,i,o+n);else if(22250738585072014e-324>r)e((r/=5e-324)>>>0,i,o+t),e((a<<31|r/4294967296)>>>0,i,o+n);else{var s=Math.floor(Math.log(r)/Math.LN2);1024===s&&(s=1023),e(4503599627370496*(r*=Math.pow(2,-s))>>>0,i,o+t),e((a<<31|s+1023<<20|1048576*r&1048575)>>>0,i,o+n)}}function n(e,t,n,r,i){return t=e(r,i+t),r=e(r,i+n),e=2*(r>>31)+1,t=4294967296*(1048575&r)+t,2047==(n=r>>>20&2047)?t?NaN:1/0*e:0===n?5e-324*e*t:e*Math.pow(2,n-1075)*(t+4503599627370496)}e.writeDoubleLE=t.bind(null,zm,0,4),e.writeDoubleBE=t.bind(null,Am,4,0),e.readDoubleLE=n.bind(null,Bm,0,4),e.readDoubleBE=n.bind(null,Cm,4,0)}(),e}function zm(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}function Am(e,t,n){t[n]=e>>>24,t[n+1]=e>>>16&255,t[n+2]=e>>>8&255,t[n+3]=255&e}function Bm(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function Cm(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}function Wa(e,t){this.lo=e>>>0,this.hi=t>>>0}function sf(e,t,n){this.fn=e,this.len=t,this.next=void 0,this.val=n}function ri(){}function Qt(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function ja(){this.len=0,this.tail=this.head=new sf(ri,0,0),this.states=null}function si(e,t,n){t[n]=255&e}function ti(e,t){this.len=e,this.next=void 0,this.val=t}function ui(e,t,n){for(;e.hi;)t[n++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;127<e.lo;)t[n++]=127&e.lo|128,e.lo>>>=7;t[n++]=e.lo}function vi(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}function jc(){wi.call(this)}function Rt(e,t,n){40>e.length?V.utf8.write(e,t,n):t.utf8Write?t.utf8Write(e,n):t.write(e,n)}function Yb(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function Ka(e){this.buf=e,this.pos=0,this.len=e.length}function xi(){var e=new Dm(0,0),t=0;if(!(4<this.len-this.pos)){for(;3>t;++t){if(this.pos>=this.len)throw Yb(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,128>this.buf[this.pos++])return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;4>t;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,128>this.buf[this.pos++])return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,128>this.buf[this.pos++])return e;if(t=0,4<this.len-this.pos){for(;5>t;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,128>this.buf[this.pos++])return e}else for(;5>t;++t){if(this.pos>=this.len)throw Yb(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,128>this.buf[this.pos++])return e}throw Error("invalid varint encoding")}function zg(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function Em(){if(this.pos+8>this.len)throw Yb(this,8);return new Dm(zg(this.buf,this.pos+=4),zg(this.buf,this.pos+=4))}function Fd(e){yi.call(this,e)}function tf(e,t,n){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");V.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=!!t,this.responseDelimited=!!n}function za(e){return"string"==typeof e&&/^[\s\w!#$%&()+,.:;<=>?@[\]^{|}~-]{1,64}$/.test(e)&&"null"!==e}function Fm(e){try{var t=e.split(".").map((function(e){return Number(e)}))}catch(e){return!1}if(4!==t.length||0===t[0])return!1;for(e=0;e<t.length;e++){var n=t[e];if(!Number.isInteger(n)||0>n||255<n)return!1}return!0}function Gm(e,t){if(!Array.isArray(t)||0===t.length||32<t.length||t.some((function(e){return 0===e.length||32<e.length})))throw new L("arguments is not valid",Ja);if(!za(e))throw new L("ID is invalid",Ja)}function uf(e){var t=e.attributes,n=e.attrSizeMap,r=e.maxAttrsCount,i=e.maxAttrValueSize;if(e=e.maxTotalSize,!yd(t))throw new L("attributes must be an object",Ja);if(Object.keys(t).length>r)throw new ib("Exceed the limit of ".concat(r," attributes"),re);if(0===Object.keys(t).length)throw new L("The attributes is an empty object",Ja);var o=0,a=0;for(t=Object.entries(t);a<t.length;a++){var s=ra(t[a],2),c=s[1];s=new Blob([s[0]]).size;var u=new Blob([c]).size;if(0===s||32<s)throw new L("Invalid attribute key",Ja);if(u>i)throw new ib("Invalid attribute value, over the limit of ".concat(i," bytes"),re);if("string"!=typeof c||0===c.length)throw new L("Invalid attribute value",Ja);o+=s,o+=u}if(o>e)throw new ib("The attributes size overflow",re);if(void 0!==n){if(Object.keys(n).length>r)throw new ib("Exceed the limit of ".concat(r," attributes"),re);for(o=r=0,n=Object.entries(n);o<n.length;o++){if(a=(t=ra(n[o],2))[1],0===(t=new Blob([t[0]]).size))throw new L("Invalid attribute key",Ja);if(a>i)throw new ib("Invalid attribute value, over the limit of ".concat(i," bytes"),re);r+=t,r+=a}if(r>e)throw new ib("The attributes size overflow",re)}}function Ag(e,t){return Math.floor(Math.random()*(Math.floor(t)-Math.ceil(e)+1))+e}function Bg(){var e=Ag(0,4294967295),t=Ag(1,4294967295);return new U(e,t,!0)}function Xa(e){return e.toString().padEnd(32,"0")}function Hm(e,t){return new TypeError("Unexpected ".concat(e,": ").concat(t))}function Im(e,t){return e=e.split(".").map((function(e){return Number(e)})),t=t.split(".").map((function(e){return Number(e)})),Math.sqrt(1e3*Math.pow(e[0]-t[0],2)+100*Math.pow(e[1]-t[1],2)+10*Math.pow(e[2]-t[2],2)+1*Math.pow(e[3]-t[3],2))}function Jm(e){return e.lessThanOrEqual(Number.MAX_SAFE_INTEGER)?e.toNumber():e.toString()}function zi(e,t){t="".concat(e).concat(t||"");var n=Km.get(t)||1;return Km.set(t,n+1),"".concat(e).concat(n)}function Lm(e,t){var n="number"==typeof t?t:void 0!==t&&"string"!=typeof t?t.code:void 0;return t="number"!=typeof t&&"string"!=typeof t&&void 0!==t&&void 0!==t.serverCode?t.serverCode:void 0,n="".concat(void 0!==n?" Error Code ".concat(n):"").concat(void 0!==t?", server Code ".concat(t):""),e="string"==typeof e&&e?Cg(e):Array.isArray(e)&&"string"==typeof e[0]&&e[0]?Cg(Mm.apply(void 0,[e[0]].concat(I(e.slice(1))))):"","".concat(""===n?"":"".concat(n," - ")).concat(e)}function Nm(e){return Ai.apply(this,arguments)}function Ai(){return(Ai=K(x.mark((function e(t){return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){setTimeout((function(){e()}),t)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Om(e){return e instanceof Blob||"[object Blob]"===Object.prototype.toString.call(e)}function Dg(e){var t=255&e,n=e>>8&255,r=e>>16&255;return"".concat(e>>24&255,".").concat(r,".").concat(n,".").concat(t)}function se(e,t,n){return Bi.apply(this,arguments)}function Bi(){return(Bi=K(x.mark((function e(t,n,r){var i,o,a,s,c,u,l,h,d,f,p,g,A,v,m,y,b,_,E,w,I,C,S,T,R,k;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.body,o=n.headers,a=void 0===o?{}:o,s=n.timeout,c=void 0===s?1e4:s,u=n.signal,l=n.withCredentials,h=void 0!==l&&l,d=(r||{}).useBinaryResponse,f=void 0!==d&&d,(p=new XMLHttpRequest).open("POST",t,!0),p.responseType=f?"arraybuffer":"text",p.withCredentials=h,p.timeout=c,g=i instanceof FormData,A=i instanceof Uint8Array,!(1<(v=Object.keys(a).filter((function(e){return"content-type"===e.toLowerCase()}))).length)){e.next=14;break}throw new RangeError("multiple content-type");case 14:0===v.length&&(A?a["Content-Type"]="application/octet-stream":g||(a["Content-Type"]="application/json"));case 15:if("setRequestHeader"in p){e.next=46;break}return p.abort(),e.next=19,fetch(t,{body:g||A?i:JSON.stringify(i),cache:"no-cache",credentials:h?"include":"same-origin",headers:a,method:"POST",mode:"cors",referrer:"no-referrer",signal:u});case 19:if(m=e.sent,!(200<=(y=m.status)&&300>y||304===y)){e.next=31;break}if(!f){e.next=27;break}return e.next=25,m.arrayBuffer();case 25:return b=e.sent,e.abrupt("return",{status:y,responseData:b});case 27:return e.next=29,m.text();case 29:return _=e.sent,e.abrupt("return",{status:y,responseText:_});case 31:return E=new da(["Post XHR failure, status %d",y]),e.prev=32,e.next=35,m.text();case 35:throw w=e.sent,E.statusCode=y,E.message=w||"Request failed, status ".concat(y),E;case 41:throw e.prev=41,e.t0=e.catch(32),E.statusCode=y,E.message="Request failed, status ".concat(y),E;case 46:if(0!==Object.keys(a).length)for(I=0,C=Object.entries(a);I<C.length;I++)S=ra(C[I],2),T=S[0],R=S[1],p.setRequestHeader(T,R);return void 0!==u&&(k=function e(){p.abort(),u.removeEventListener("abort",e)},u.addEventListener("abort",k)),g||A?p.send(i):p.send(JSON.stringify(i)),e.abrupt("return",new Promise((function(e,t){p.onload=function(){var n=p.status;if(200<=n&&300>n||304===n)e(f?{status:n,responseData:p.response}:{status:n,responseText:p.responseText});else{var r=new da(["Post XHR failure, status %d",n]);r.statusCode=n,r.message=p.response||"Request failed, status ".concat(p.status),t(r)}},p.ontimeout=function(e){t(new cb(["XHR request timed out after %d ms",c],{originalError:e}))},p.onerror=function(){var e=new da(["Post XHR failure, status %d",p.status]);e.statusCode=p.status,e.message=p.response||"Request failed, status ".concat(p.status),t(e)},p.onabort=function(){try{t(new DOMException("The request aborted.","AbortError"))}catch(n){var e=Error("The request aborted.");e.name="AbortError",t(e)}}})));case 50:case"end":return e.stop()}}),e,null,[[32,41]])})))).apply(this,arguments)}function Qm(e){return Gi.apply(this,arguments)}function Gi(){return(Gi=K(x.mark((function e(t){var n;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new Image).src=t,e.abrupt("return",new Promise((function(e,t){n.onload=function(){e({width:n.width,height:n.height})},n.onerror=t})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vt(e,t){return Hi.apply(this,arguments)}function Hi(){return(Hi=K(x.mark((function e(t,n){var r,i,o,a,s,c,u,l,h,d;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.thumbnailHeight,i=void 0===r?0:r,o=t.thumbnailWidth,a=void 0===o?0:o,s=t.width,c=void 0===s?0:s,u=t.height,l=void 0===u?0:u,h=t.thumbnail,d=[],"number"==typeof i&&"number"==typeof a&&"number"==typeof c&&"number"==typeof l){e.next=5;break}throw new L("Invalid message params",wf);case 5:return 0>=c&&0>=l&&d.push(Qm(Rm(n)).then((function(e){c=e.width,l=e.height}))),0>=a&&0>=i&&void 0!==h&&d.push(Ii(h).then(function(){var e=K(x.mark((function e(t){var n;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qm(Rm(t));case 2:n=e.sent,a=n.width,i=n.height;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),e.next=9,Promise.all(d).catch((function(){}));case 9:return e.abrupt("return",{width:c,height:l,thumbnailWidth:a,thumbnailHeight:i});case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Sm(e,t){if(!yd(e))throw new L("message object is not a plain object",t);if(void 0===e.messageType)if(e.rawMessage instanceof Uint8Array){if(e.messageType="RAW",void 0!==e.text)throw new L("Raw messages cannot have text property. Use description instead",t)}else{if("string"!=typeof e.text)throw new L("messageType is undefined",t);if(e.messageType="TEXT",void 0!==e.rawMessage)throw new L("Text messages cannot have rawMessage property",t)}}function Fg(e){return Ji.apply(this,arguments)}function Ji(){return(Ji=K(x.mark((function e(t){var n,r,i,o,a,s,c,u,l,h,d,f,p,g,A,v,m,y,b,_,E;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.message,r=t.peerId,i=t.toPeer,o=t.session,a=t.errorCodes,s=t.diff,c=t.logger,u=t.options,void 0!==o){e.next=3;break}throw new M("The client is not logged in. Cannot do the operation",a.NOT_LOGGED_IN);case 3:if(l=!1,"TEXT"!==n.messageType||!n.text.startsWith("AgoraRTMLegacyEndcallCompatibleMessagePrefix")||!i){e.next=11;break}if(h=n.text.split("_"),d=ra(h,3),f=d[0],p=d[1],void 0!==d[2]&&za(p)&&"AgoraRTMLegacyEndcallCompatibleMessagePrefix"===f){e.next=10;break}throw new L("Message is not valid",ue);case 10:l=!0;case 11:if(g=Date.now(),A=o.messageSentTimes.length-1,!((v=o.messageSentTimes[A])&&v+3e3<g)){e.next=18;break}o.messageSentTimes=[g],e.next=29;break;case 18:m=A;case 19:if(!(0<=m)){e.next=28;break}if(!(o.messageSentTimes[m]+3e3<g)){e.next=23;break}return o.messageSentTimes=o.messageSentTimes.slice(m+1,A+1),e.abrupt("break",28);case 23:if(!(180<=A-m+1)){e.next=25;break}throw new ib("Message sent failed, exceeded the 180 message in 3 seconds",a.TOO_OFTEN);case 25:m--,e.next=19;break;case 28:o.messageSentTimes.push(g);case 29:e.t0=n.messageType,e.next="TEXT"===e.t0?32:"RAW"===e.t0?37:"FILE"===e.t0||"IMAGE"===e.t0?39:40;break;case 32:if(!l){e.next=36;break}return y=n.text.split("_"),b=ra(y,3),_=b[1],E=b[2],c.info("[rtm-API] EndCall message send api is called"),e.abrupt("return",o.sendInvitationMessage({peerId:r,type:"CallCancel",extra:E,channelId:_,callId:"0"}));case 36:return e.abrupt("return",o.sendTextMessage(n.text,r,i,u,1e4-s));case 37:return void 0===n.description&&(n.description=""),e.abrupt("return",o.sendRawMessage(n.rawMessage,n.description,r,i,u,1e4-s));case 39:return e.abrupt("return",o.sendMediaMessage(n.messageType,n,r,i,u,1e4-s));case 40:throw new L("Invalid message type",ue);case 41:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wt(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n=e.replace(/(https?:\/\/)?(www.)?/i,"");return t||(n=n.split(".").slice(e.length-2).join(".")),-1!==n.indexOf("/")?n.split("/")[0]:n}function oa(e){if("string"!=typeof e)return"[Sensitive Info]";var t=Math.floor(.7*e.length),n=e.length;return Tm(e,t,n,"*".repeat(n-t))}function Um(e,t,n){function r(i){if(void 0===e)return e;if(Hl(i))return i;if(Array.isArray(i))return i.map(r);var o={},a=0;for(i=Gg(i);a<i.length;a++){var s=ra(i[a],2),c=s[0];if("string"==typeof(s=s[1])&&n.includes(c)){o[c]="string"==typeof s?oa(s):"[Sensitive Info]";break}t.includes(c)?o[c]="[Hidden Info]":o[c]=null==s?s:n.includes(c)?"[Sensitive Info]":r(s)}return o}return Array.isArray(e)?e.map(r):r(e)}function Vm(e){return Object.getOwnPropertyNames(e).forEach((function(t){"object"==aa(t=e[t])&&null!==t&&Vm(t)})),Object.freeze(e)}function pa(e){return new TextDecoder("utf-8").decode(e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength))}function Hg(e){return(new TextEncoder).encode(e).length}function Wm(){for(var e=0,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];for(t=0;t<n.length;t++)e+=n[t].length;for(e=new Uint8Array(e),r=t=0;r<n.length;r++){var i=n[r];e.set(i,t),t+=i.length}return e}function ve(e,t,n){var r=e.match(/([^?#]+)(\?[^#]*)?(#.*)?/);if(e=null==r?void 0:r[1],r=null==r?void 0:r[2]){var i;for(r=r.substr(1).split("&"),i=0;i<r.length;i++)if(r[i].split("=")[0]==t){r[i]=t+"="+encodeURIComponent(n);break}return i==r.length&&r.push(t+"="+encodeURIComponent(n)),e+"?"+r.join("&")}return e+"?"+t+"="+encodeURIComponent(n)}function Ii(e){return new Promise((function(t,n){var r=new FileReader;r.onloadend=function(){var e=r.result||new ArrayBuffer(0);t(e)},r.onerror=n,r.readAsArrayBuffer(e)}))}function Xt(e,t){e=e=[e],"string"==typeof(t=t||{})&&(t={type:t});try{var n=new Blob(e,t)}catch(i){if("TypeError"!==i.name)throw i;n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder);for(var r=0;r<e.length;r+=1)n.append(e[r]);n=n.getBlob(t.type)}return n}function Tm(e,t,n,r){return"string"!=typeof e?"[Sensitive Info]":e.substring(0,t)+r+e.substring(n)}function Xm(e){var t=[];return function e(n){if(null===n||"object"!==aa(n))return n;if(-1!==t.indexOf(n))return"[Circular]";if(t.push(n),"function"==typeof n.toJSON)try{var r=e(n.toJSON());return t.pop(),r}catch(e){return"[Throws: "+(e?e.message:"?")+"]"}return Array.isArray(n)?(r=n.map(e),t.pop(),r):(r=Object.keys(n).reduce((function(t,r){e:{if(Yt.call(n,r))try{var i=n[r];break e}catch(e){i="[Throws: "+(e?e.message:"?")+"]";break e}i=n[r]}return t[r]=e(i),t}),{}),t.pop(),r)}(e)}function Zt(e){if(!(100<(e=String(e)).length)&&(e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e))){var t=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*t;case"weeks":case"week":case"w":return 6048e5*t;case"days":case"day":case"d":return 864e5*t;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*t;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*t;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t}}}function Ig(e,t,n,r){return Math.round(e/n)+" "+r+(t>=1.5*n?"s":"")}function La(e,t,n){void 0===n&&(n=Object.getOwnPropertyDescriptor(e,t));var r=n.value;return n.value=function(){for(var e=this,n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];this.invokeTracker.apply(this,["%s: ".concat(0<i.length?"%s with args: ".concat(i.map((function(){return"%o"}))):"%s"),this.name,t].concat(I(i.map(we))));try{var a=r.apply(this,i)}catch(e){throw this.logError.apply(this,["".concat(void 0!==e.code?"Error Code ".concat(e.code,": "):"","%s failed").concat(0<i.length?" with args: ".concat(i.map((function(){return"%o"}))):""),t].concat(I(i.map(we)))),e.originalError&&this.logError(e.originalError),this.errorTracker(e),e}var s=Date.now();return K(x.mark((function n(){var r,o;return x.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,a;case 3:r=n.sent,n.next=12;break;case 6:return n.prev=6,n.t0=n.catch(0),e.logError.apply(e,["".concat(void 0!==n.t0.code?"Error Code ".concat(n.t0.code,": "):"","%s failed").concat(0<i.length?" with args: ".concat(i.map((function(){return"%o"}))):""),t].concat(I(i.map(we)))),n.t0.originalError&&e.logError(n.t0.originalError),e.errorTracker(n.t0),n.abrupt("return");case 12:r!==a?void 0===r?e.resultTracker("%s promise resolves after %dms",t,Date.now()-s):e.resultTracker("%s promise resolves after %dms, result is %o",t,Date.now()-s,we(r)):"Object"!==Ac(r)||yd(r)?e.resultTracker("%s result is %o",t,we(r)):e.resultTracker("%s result is %s",t,r.name||(null===(o=r.constructor)||void 0===o?void 0:o.name));case 13:case"end":return n.stop()}}),n,null,[[0,6]])})))(),a},n}function Nb(e,t,n){void 0===n&&(n=Object.getOwnPropertyDescriptor(e,t));var r=n.value;return n.value=function(){for(var e=this,n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];this.invokeTracker.apply(this,["%s: ".concat(0<i.length?"%s with args: ".concat(i.map((function(){return"%o"}))):"%s"),this.name,t].concat(i));try{var a=r.apply(this,i)}catch(e){throw this.logError.apply(this,["".concat(void 0!==e.code?"Error Code ".concat(e.code,": "):"","%s failed").concat(0<i.length?" with args: ".concat(i.map((function(){return"%o"}))):""),t].concat(i)),e.originalError&&this.logError(e.originalError),this.errorTracker(e),e}var s=Date.now();return K(x.mark((function n(){var r,o;return x.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,a;case 3:r=n.sent,n.next=12;break;case 6:return n.prev=6,n.t0=n.catch(0),e.logError.apply(e,["".concat(void 0!==n.t0.code?"Error Code ".concat(n.t0.code,": "):"","%s failed").concat(0<i.length?" with args: ".concat(i.map((function(){return"%o"}))):""),t].concat(i)),n.t0.originalError&&e.logError(n.t0.originalError),e.errorTracker(n.t0),n.abrupt("return");case 12:r!==a?void 0===r?e.resultTracker("%s promise resolves after %dms",t,Date.now()-s):e.resultTracker("%s promise resolves after %dms, result is %o",t,Date.now()-s,r):"Object"!==Ac(r)||yd(r)?e.resultTracker("%s result is %o",t,r):e.resultTracker("%s result is %s",t,r.name||(null===(o=r.constructor)||void 0===o?void 0:o.name));case 13:case"end":return n.stop()}}),n,null,[[0,6]])})))(),a},n}function $t(e,t){var n="".concat(e,"Uri");if("number"!=typeof(n=Ki[n])||0===n)throw new TypeError("Got Unknown URI Name");return t=new(e=Ym[e])(t),t=e.encode(t).finish(),new au({uri:n,data:t})}function Zm(e,t){return"".concat(e.split(".").join("-"),".edge.").concat(t?"sd-rtn.com":"agora.io")}function bu(e){var t=e.areas,n=e.excludedArea;if(1===t.length&&t[0]===C.GLOBAL&&n===C.CHINA)return xe([C.OVERSEA]);if(t.includes(C.GLOBAL)){if(e=xf(Jg).filter((function(e){return e!==C.GLOBAL&&e!==C.OVERSEA})),n in yf){t=yf[n];var r=[].concat(I(null!=t?t:[]),[n]);return xe(e.filter((function(e){return!r.includes(e)})))}if($m(n)){var i=cu(n);return xe(e.filter((function(e){return e!==n&&e!==i})))}}if($m(n)||n in yf)return xe(t);throw new L("Invalid excludedArea area config")}function db(e,t,n,r){return Li.apply(this,arguments)}function Li(){return(Li=K(x.mark((function e(t,n,r,i){var o,a;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:return o=du[t].encode(n).finish(),a=function(){var e=K(x.mark((function e(n){var r,i,s=arguments;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(2<(r=1<s.length&&void 0!==s[1]?s[1]:0))){e.next=3;break}return e.abrupt("return");case 3:return i=ve(i="https://".concat(n,":6443/events/proto-raw"),"sentTs",Math.ceil(Date.now()/1e3).toString()),i=ve(i,"id",eu[t].toString()),e.next=8,se(i,{body:o,timeout:2e4,headers:{"Content-Type":"application/octet-stream"}}).catch((function(e){return a(n,r+1)}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.prev=4,e.next=7,a(r||"webcollector-rtm.agora.io");case 7:e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(4),e.next=13,a(i||"rtm.statscollector.sd-rtn.com");case 13:case"end":return e.stop()}}),e,null,[[4,9]])})))).apply(this,arguments)}function eb(e){return void 0===e?U.fromNumber(0):U.fromNumber(Date.now()-e)}function fu(e){return btoa(String.fromCharCode.apply({},e.replace(/\r|\n/g,"").replace(/([\dA-Fa-f]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ").map((function(e){return parseInt(e,16)})))).replace(/={1,2}$/,"")}function Kg(e,t){return U.fromValue(e).eq(t)}function Lg(e,t){var n=void 0===t?e.val:t,r=e.isBoolean;t=e.isNumber;var i=e.oneof,o=e.len;if(2!==[r,t,i].filter((function(e){return!e})).length)throw new TypeError("invalid field type");if(void 0!==n&&(e=!1,void 0!==i&&(i=Mi(i),gu(i,Kg).length===i.length&&void 0!==hu(i,(function(e){return Kg(n,e)}))&&(e=!0)),r=void 0!==r&&(0===n||1===n)&&1===o,t=void 0!==t&&n.toString(2).length<=o,!(e||r||t)))throw Error("invalid field value")}function an(e){return function(){var t=e();if(!t)throw new M("Client is not logged in. Cannot do the operation");return t}}var Ya="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==__webpack_require__.g?__webpack_require__.g:"undefined"!=typeof self?self:{},Mg=function(e){return e&&e.Math==Math&&e},E=Mg("object"==typeof globalThis&&globalThis)||Mg("object"==typeof window&&window)||Mg("object"==typeof self&&self)||Mg("object"==typeof Ya&&Ya)||function(){return this}()||Function("return this")(),R=function(e){try{return!!e()}catch(e){return!0}},ka=!R((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),bn={}.propertyIsEnumerable,cn=Object.getOwnPropertyDescriptor,zf=cn&&!bn.call({1:2},1)?function(e){return!!(e=cn(this,e))&&e.enumerable}:bn,cd=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},iu={}.toString,Zb=function(e){return iu.call(e).slice(8,-1)},ju="".split,Af=R((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==Zb(e)?ju.call(e,""):Object(e)}:Object,jb=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e},qb=function(e){return Af(jb(e))},ha=function(e){return"object"==typeof e?null!==e:"function"==typeof e},lc=function(e,t){if(!ha(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!ha(r=n.call(e))||"function"==typeof(n=e.valueOf)&&!ha(r=n.call(e))||!t&&"function"==typeof(n=e.toString)&&!ha(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")},Qa=function(e){return Object(jb(e))},ku={}.hasOwnProperty,Q=function(e,t){return ku.call(Qa(e),t)},ye=E.document,Ng=ha(ye)&&ha(ye.createElement),dn=!ka&&!R((function(){return 7!=Object.defineProperty(Ng?ye.createElement("div"):{},"a",{get:function(){return 7}}).a})),en=Object.getOwnPropertyDescriptor,Fb={f:ka?en:function(e,t){if(e=qb(e),t=lc(t,!0),dn)try{return en(e,t)}catch(e){}if(Q(e,t))return cd(!zf.call(e,t),e[t])}},va=function(e){if(!ha(e))throw TypeError(String(e)+" is not an object");return e},fn=Object.defineProperty,Ra={f:ka?fn:function(e,t,n){if(va(e),t=lc(t,!0),va(n),dn)try{return fn(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},Ma=ka?function(e,t,n){return Ra.f(e,t,cd(1,n))}:function(e,t,n){return e[t]=n,e},Ni=function(e,t){try{Ma(E,e,t)}catch(n){E[e]=t}return t},dd=E["__core-js_shared__"]||Ni("__core-js_shared__",{}),lu=Function.toString;"function"!=typeof dd.inspectSource&&(dd.inspectSource=function(e){return lu.call(e)});var Oi=dd.inspectSource,gn=E.WeakMap,mu="function"==typeof gn&&/native code/.test(Oi(gn)),ed=$a((function(e){(e.exports=function(e,t){return dd[e]||(dd[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.12.1",mode:"global",copyright:" 2021 Denis Pushkarev (zloirock.ru)"})})),nu=0,ou=Math.random(),ze=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++nu+ou).toString(36)},hn=ed("keys"),Og=function(e){return hn[e]||(hn[e]=ze(e))},Ae={},pu=E.WeakMap;if(mu||dd.state)var Gd=dd.state||(dd.state=new pu),qu=Gd.get,jn=Gd.has,ru=Gd.set,Pi=function(e,t){if(jn.call(Gd,e))throw new TypeError("Object already initialized");return t.facade=e,ru.call(Gd,e,t),t},Pg=function(e){return qu.call(Gd,e)||{}},Qi=function(e){return jn.call(Gd,e)};else{var Be=Og("state");Ae[Be]=!0,Pi=function(e,t){if(Q(e,Be))throw new TypeError("Object already initialized");return t.facade=e,Ma(e,Be,t),t},Pg=function(e){return Q(e,Be)?e[Be]:{}},Qi=function(e){return Q(e,Be)}}var Za={set:Pi,get:Pg,has:Qi,enforce:function(e){return Qi(e)?Pg(e):Pi(e,{})},getterFor:function(e){return function(t){var n;if(!ha(t)||(n=Pg(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}},Ta=$a((function(e){var t=Za.get,n=Za.enforce,r=String(String).split("String");(e.exports=function(e,t,i,o){var a=!!o&&!!o.unsafe,s=!!o&&!!o.enumerable;if(o=!!o&&!!o.noTargetGet,"function"==typeof i){"string"!=typeof t||Q(i,"name")||Ma(i,"name",t);var c=n(i);c.source||(c.source=r.join("string"==typeof t?t:""))}e===E?s?e[t]=i:Ni(t,i):(a?!o&&e[t]&&(s=!0):delete e[t],s?e[t]=i:Ma(e,t,i))})(Function.prototype,"toString",(function(){return"function"==typeof this&&t(this).source||Oi(this)}))})),kn=function(e){return"function"==typeof e?e:void 0},mc=function(e,t){return 2>arguments.length?kn(E[e])||kn(E[e]):E[e]&&E[e][t]||E[e]&&E[e][t]},su=Math.ceil,tu=Math.floor,$b=function(e){return isNaN(e=+e)?0:(0<e?tu:su)(e)},uu=Math.min,ta=function(e){return 0<e?uu($b(e),9007199254740991):0},vu=Math.max,wu=Math.min,xb=function(e,t){return 0>(e=$b(e))?vu(e+t,0):wu(e,t)},ln=function(e){return function(t,n,r){t=qb(t);var i=ta(t.length);if(r=xb(r,i),e&&n!=n){for(;i>r;)if((n=t[r++])!=n)return!0}else for(;i>r;r++)if((e||r in t)&&t[r]===n)return e||r||0;return!e&&-1}},mn=ln(!0),Ri=ln(!1),nn=function(e,t){e=qb(e);var n,r=0,i=[];for(n in e)!Q(Ae,n)&&Q(e,n)&&i.push(n);for(;t.length>r;)Q(e,n=t[r++])&&(~Ri(i,n)||i.push(n));return i},Qg="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),xu=Qg.concat("length","prototype"),Hd={f:Object.getOwnPropertyNames||function(e){return nn(e,xu)}},Bf={f:Object.getOwnPropertySymbols},on=mc("Reflect","ownKeys")||function(e){var t=Hd.f(va(e)),n=Bf.f;return n?t.concat(n(e)):t},pn=function(e,t){for(var n=on(t),r=Ra.f,i=Fb.f,o=0;o<n.length;o++){var a=n[o];Q(e,a)||r(e,a,i(t,a))}},yu=/#|\.prototype\./,nc=function(e,t){return(e=zu[Au(e)])==Bu||e!=Cu&&("function"==typeof t?R(t):!!t)},Au=nc.normalize=function(e){return String(e).replace(yu,".").toLowerCase()},zu=nc.data={},Cu=nc.NATIVE="N",Bu=nc.POLYFILL="P",Du=Fb.f,P=function(e,t){var n,r,i,o=e.target,a=e.global,s=e.stat;if(r=a?E:s?E[o]||Ni(o,{}):(E[o]||{}).prototype)for(i in t){var c=t[i],u=e.noTargetGet?(n=Du(r,i))&&n.value:r[i];if(!(n=nc(a?i:o+(s?".":"#")+i,e.forced))&&void 0!==u){if(typeof c==typeof u)continue;pn(c,u)}(e.sham||u&&u.sham)&&Ma(c,"sham",!0);try{Ta(r,i,c,e)}catch(e){}}},yb=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e},Id=function(e,t,n){if(yb(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}},fd=Array.isArray||function(e){return"Array"==Zb(e)},Ce=mc("navigator","userAgent")||"",qn=E.process,rn=qn&&qn.versions,sn=rn&&rn.v8;if(sn)var gd=sn.split("."),Si=4>gd[0]?1:gd[0]+gd[1];else Ce&&(gd=Ce.match(/Edge\/(\d+)/),(!gd||74<=gd[1])&&(gd=Ce.match(/Chrome\/(\d+)/))&&(Si=gd[1]));var hd=Si&&+Si,oc=!!Object.getOwnPropertySymbols&&!R((function(){return!String(Symbol())||!Symbol.sham&&hd&&41>hd})),tn=oc&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Cf=ed("wks"),Df=E.Symbol,Eu=tn?Df:Df&&Df.withoutSetter||ze,qa=function(e){return Q(Cf,e)&&(oc||"string"==typeof Cf[e])||(oc&&Q(Df,e)?Cf[e]=Df[e]:Cf[e]=Eu("Symbol."+e)),Cf[e]},Fu=qa("species"),Rg=function(e,t){if(fd(e)){var n=e.constructor;"function"!=typeof n||n!==Array&&!fd(n.prototype)?ha(n)&&null===(n=n[Fu])&&(n=void 0):n=void 0}return new(void 0===n?Array:n)(0===t?0:t)},un=[].push,id=function(e){var t=1==e,n=2==e,r=3==e,i=4==e,o=6==e,a=7==e,s=5==e||o;return function(c,u,l,h){var d=Qa(c),f=Af(d);u=Id(u,l,3),l=ta(f.length);var p,g=0;for(h=h||Rg,c=t?h(c,l):n||a?h(c,0):void 0;l>g;g++)if((s||g in f)&&(p=u(h=f[g],g,d),e))if(t)c[g]=p;else if(p)switch(e){case 3:return!0;case 5:return h;case 6:return g;case 2:un.call(c,h)}else switch(e){case 4:return!1;case 7:un.call(c,h)}return o?-1:r||i?i:c}},Jd=id(0),vn=id(1),wn=id(2),Gu=id(3),Hu=id(4),xn=id(5),yn=id(6);id(7);var Iu=qa("species"),Ef=function(e){return 51<=hd||!R((function(){var t=[];return(t.constructor={})[Iu]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},Ju=Ef("filter");P({target:"Array",proto:!0,forced:!Ju},{filter:function(e){return wn(this,e,1<arguments.length?arguments[1]:void 0)}});var Dc=Object.keys||function(e){return nn(e,Qg)},Ku=R((function(){Dc(1)}));P({target:"Object",stat:!0,forced:Ku},{keys:function(e){return Dc(Qa(e))}});var De=function(e,t){var n=[][e];return!!n&&R((function(){n.call(null,t||function(){throw 1},1)}))},Lu=[].join,Mu=Af!=Object,Nu=De("join",",");P({target:"Array",proto:!0,forced:Mu||!Nu},{join:function(e){return Lu.call(qb(this),void 0===e?",":e)}});var Ou=Ef("map");P({target:"Array",proto:!0,forced:!Ou},{map:function(e){return vn(this,e,1<arguments.length?arguments[1]:void 0)}});var Ti=function(e){var t=e.return;if(void 0!==t)return va(t.call(e)).value},Ee={},Pu=qa("iterator"),Qu=Array.prototype,Ui=function(e){return void 0!==e&&(Ee.Array===e||Qu[Pu]===e)},Fe=function(e,t,n){(t=lc(t))in e?Ra.f(e,t,cd(0,n)):e[t]=n},Ru=qa("toStringTag"),zn={};zn[Ru]="z";var Vi="[object z]"===String(zn),Su=qa("toStringTag"),Tu="Arguments"==Zb(function(){return arguments}()),Ff=Vi?Zb:function(e){var t;if(void 0===e)var n="Undefined";else{if(null===e)var r="Null";else{e:{var i=e=Object(e);try{r=i[Su];break e}catch(e){}r=void 0}r="string"==typeof(n=r)?n:Tu?Zb(e):"Object"==(t=Zb(e))&&"function"==typeof e.callee?"Arguments":t}n=r}return n},Uu=qa("iterator"),Wi=function(e){if(null!=e)return e[Uu]||e["@@iterator"]||Ee[Ff(e)]},An=qa("iterator"),Bn=!1;try{var Vu=0,Cn={next:function(){return{done:!!Vu++}},return:function(){Bn=!0}};Cn[An]=function(){return this},Array.from(Cn,(function(){throw 2}))}catch(c){}var Sg=function(e,t){if(!t&&!Bn)return!1;var n=!1;try{(t={})[An]=function(){return{next:function(){return{done:n=!0}}}},e(t)}catch(e){}return n},Wu=!Sg((function(e){Array.from(e)}));P({target:"Array",stat:!0,forced:Wu},{from:function(e){var t,n=Qa(e),r="function"==typeof this?this:Array,i=arguments.length,o=1<i?arguments[1]:void 0,a=void 0!==o,s=Wi(n),c=0;if(a&&(o=Id(o,2<i?arguments[2]:void 0,2)),null==s||r==Array&&Ui(s)){var u=ta(n.length);for(r=new r(u);u>c;c++)s=a?o(n[c],c):n[c],Fe(r,c,s)}else for(i=(n=s.call(n)).next,r=new r;!(t=i.call(n)).done;c++){if(a){s=n;var l=o;t=[t.value,c];try{u=l(va(t)[0],t[1])}catch(e){throw Ti(s),e}}else u=t.value;Fe(r,c,s=u)}return r.length=c,r}});var Dn=function(e){return function(t,n){t=String(jb(t)),n=$b(n);var r,i=t.length;if(0>n||n>=i)return e?"":void 0;var o=t.charCodeAt(n);return 55296>o||56319<o||n+1===i||56320>(r=t.charCodeAt(n+1))||57343<r?e?t.charAt(n):o:e?t.slice(n,n+2):r-56320+(o-55296<<10)+65536}};Dn(!1);var En=Dn(!0),Fn=!R((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),Gn=Og("IE_PROTO"),Xu=Object.prototype,Vb=Fn?Object.getPrototypeOf:function(e){return e=Qa(e),Q(e,Gn)?e[Gn]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?Xu:null},Xi=qa("iterator"),Hn=!1,Yu=function(){return this},Kd;if([].keys){var In=[].keys();if("next"in In){var Jn=Vb(Vb(In));Jn!==Object.prototype&&(Kd=Jn)}else Hn=!0}(null==Kd||R((function(){var e={};return Kd[Xi].call(e)!==e})))&&(Kd={}),Q(Kd,Xi)||Ma(Kd,Xi,Yu);var Tg=Kd,Ug=Hn,Zu=ka?Object.defineProperties:function(e,t){va(e);for(var n,r=Dc(t),i=r.length,o=0;i>o;)Ra.f(e,n=r[o++],t[n]);return e},Yi=mc("document","documentElement"),Kn=Og("IE_PROTO"),Zi=function(){},$i,Vg=function(){try{$i=document.domain&&new ActiveXObject("htmlfile")}catch(e){}if($i){var e=$i;e.write("<script><\/script>"),e.close(),e=e.parentWindow.Object}else(e=Ng?ye.createElement("iframe"):{}).style.display="none",Yi.appendChild(e),e.src="javascript:",(e=e.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),e=e.F;for(Vg=e,e=Qg.length;e--;)delete Vg.prototype[Qg[e]];return Vg()};Ae[Kn]=!0;var ac=Object.create||function(e,t){if(null!==e){Zi.prototype=va(e);var n=new Zi;Zi.prototype=null,n[Kn]=e}else n=Vg();return void 0===t?n:Zu(n,t)},$u=Ra.f,Ln=qa("toStringTag"),Ec=function(e,t,n){e&&!Q(e=n?e:e.prototype,Ln)&&$u(e,Ln,{configurable:!0,value:t})},av=function(){return this},bv=function(e,t,n){return t+=" Iterator",e.prototype=ac(Tg,{next:cd(1,n)}),Ec(e,t,!1),Ee[t]=av,e},Ua=Object.setPrototypeOf||("__proto__"in{}?function(){var e=!1,t={};try{var n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set;n.call(t,[]),e=t instanceof Array}catch(e){}return function(t,r){if(va(t),!ha(r)&&null!==r)throw TypeError("Can't set "+String(r)+" as a prototype");return e?n.call(t,r):t.__proto__=r,t}}():void 0),Gf=qa("iterator"),cv=function(){return this},aj=function(e,t,n,r,i,o,a){bv(n,t,r),r=function(e){if(e===i&&d)return d;if(!Ug&&e in l)return l[e];switch(e){case"keys":case"values":case"entries":return function(){return new n(this,e)}}return function(){return new n(this)}};var s,c=t+" Iterator",u=!1,l=e.prototype,h=l[Gf]||l["@@iterator"]||i&&l[i],d=!Ug&&h||r(i),f="Array"==t&&l.entries||h;if(f&&(e=Vb(f.call(new e)),Tg!==Object.prototype&&e.next&&(Vb(e)!==Tg&&(Ua?Ua(e,Tg):"function"!=typeof e[Gf]&&Ma(e,Gf,cv)),Ec(e,c,!0))),"values"==i&&h&&"values"!==h.name&&(u=!0,d=function(){return h.call(this)}),l[Gf]!==d&&Ma(l,Gf,d),Ee[t]=d,i){var p={values:r("values"),keys:o?d:r("keys"),entries:r("entries")};if(a)for(s in p)!Ug&&!u&&s in l||Ta(l,s,p[s]);else P({target:t,proto:!0,forced:Ug||u},p)}return p},dv=Za.set,ev=Za.getterFor("String Iterator");aj(String,"String",(function(e){dv(this,{type:"String Iterator",string:String(e),index:0})}),(function(){var e=ev(this),t=e.string,n=e.index;return n>=t.length?{value:void 0,done:!0}:(t=En(t,n),e.index+=t.length,{value:t,done:!1})}));var bj=qa("unscopables"),cj=Array.prototype;null==cj[bj]&&Ra.f(cj,bj,{configurable:!0,value:ac(null)});var Ld=function(e){cj[bj][e]=!0},Mn=!0;"find"in[]&&Array(1).find((function(){Mn=!1})),P({target:"Array",proto:!0,forced:Mn},{find:function(e){return xn(this,e,1<arguments.length?arguments[1]:void 0)}}),Ld("find");var Nn=function(e){var t=String(jb(this)),n="";if(0>(e=$b(e))||1/0==e)throw RangeError("Wrong number of repetitions");for(;0<e;(e>>>=1)&&(t+=t))1&e&&(n+=t);return n};P({target:"String",proto:!0},{repeat:Nn}),P({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991}),P({target:"Number",stat:!0},{isNaN:function(e){return e!=e}}),E.Number.isNaN;var Fc=E.Promise,Hf=function(e,t,n){for(var r in t)Ta(e,r,t[r],n);return e},On=qa("species"),If=function(e){e=mc(e);var t=Ra.f;ka&&e&&!e[On]&&t(e,On,{configurable:!0,get:function(){return this}})},Gc=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e},Jf=function(e,t){this.stopped=e,this.result=t},Wg=function(e,t,n){var r,i=!(!n||!n.AS_ENTRIES),o=!(!n||!n.IS_ITERATOR),a=!(!n||!n.INTERRUPTED),s=Id(t,n&&n.that,1+i+a),c=function(e){return u&&Ti(u),new Jf(!0,e)};if(t=function(e){return i?(va(e),a?s(e[0],e[1],c):s(e[0],e[1])):a?s(e,c):s(e)},o)var u=e;else{if("function"!=typeof(o=Wi(e)))throw TypeError("Target is not iterable");if(Ui(o)){for(o=0,n=ta(e.length);n>o;o++)if((r=t(e[o]))&&r instanceof Jf)return r;return new Jf(!1)}u=o.call(e)}for(e=u.next;!(o=e.call(u)).done;){try{r=t(o.value)}catch(e){throw Ti(u),e}if("object"==typeof r&&r&&r instanceof Jf)return r}return new Jf(!1)},fv=qa("species"),jd=function(e,t){var n;return void 0===(e=va(e).constructor)||null==(n=va(e)[fv])?t:yb(n)},Pn=/(?:iphone|ipod|ipad).*applewebkit/i.test(Ce),Hc="process"==Zb(E.process),Xg=E.location,dj=E.setImmediate,Qn=E.clearImmediate,gv=E.process,Rn=E.MessageChannel,ej=E.Dispatch,fj=0,Kf={},gj=function(e){if(Kf.hasOwnProperty(e)){var t=Kf[e];delete Kf[e],t()}},hj=function(e){return function(){gj(e)}},Sn=function(e){gj(e.data)},Tn=function(e){E.postMessage(e+"",Xg.protocol+"//"+Xg.host)};if(!dj||!Qn)if(dj=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return Kf[++fj]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},Lf(fj),fj},Qn=function(e){delete Kf[e]},Hc)var Lf=function(e){gv.nextTick(hj(e))};else if(ej&&ej.now)Lf=function(e){ej.now(hj(e))};else if(Rn&&!Pn){var Un=new Rn,Vn=Un.port2;Un.port1.onmessage=Sn,Lf=Id(Vn.postMessage,Vn,1)}else E.addEventListener&&"function"==typeof postMessage&&!E.importScripts&&Xg&&"file:"!==Xg.protocol&&!R(Tn)?(Lf=Tn,E.addEventListener("message",Sn,!1)):Lf="onreadystatechange"in(Ng?ye.createElement("script"):{})?function(e){Yi.appendChild(Ng?ye.createElement("script"):{}).onreadystatechange=function(){Yi.removeChild(this),gj(e)}}:function(e){setTimeout(hj(e),0)};var ij=dj,hv=/web0s(?!.*chrome)/i.test(Ce),iv=Fb.f,Wn=E.MutationObserver||E.WebKitMutationObserver,Xn=E.document,Yn=E.process,Yg=E.Promise,Zn=iv(E,"queueMicrotask"),$n=Zn&&Zn.value,Md,Mf;if(!$n){var $g=function(){var e;for(Hc&&(e=Yn.domain)&&e.exit();Md;){var t=Md.fn;Md=Md.next;try{t()}catch(e){throw Md?Zg():Mf=void 0,e}}Mf=void 0,e&&e.enter()};if(Pn||Hc||hv||!Wn||!Xn)if(Yg&&Yg.resolve){var jj=Yg.resolve(void 0);jj.constructor=Yg;var jv=jj.then,Zg=function(){jv.call(jj,$g)}}else Zg=Hc?function(){Yn.nextTick($g)}:function(){ij.call(E,$g)};else{var ao=!0,bo=Xn.createTextNode("");new Wn($g).observe(bo,{characterData:!0}),Zg=function(){bo.data=ao=!ao}}}var co=$n||function(e){e={fn:e,next:void 0},Mf&&(Mf.next=e),Md||(Md=e,Zg()),Mf=e},kv=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=yb(t),this.reject=yb(n)},kj={f:function(e){return new kv(e)}},lj=function(e,t){return va(e),ha(t)&&t.constructor===e?t:((0,(e=kj.f(e)).resolve)(t),e.promise)},lv=function(e,t){var n=E.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))},mj=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},mv="object"==typeof window,nv=qa("species"),eo=Za.get,ov=Za.set,pv=Za.getterFor("Promise"),Nd=Fc&&Fc.prototype,zb=Fc,ah=Nd,fo=E.TypeError,nj=E.document,oj=E.process,Ge=kj.f,qv=Ge,rv=!!(nj&&nj.createEvent&&E.dispatchEvent),go="function"==typeof PromiseRejectionEvent,ho=!1,Nf=nc("Promise",(function(){var e=Oi(zb)!==String(zb);if(!e&&66===hd)return!0;if(51<=hd&&/native code/.test(zb))return!1;var t=new zb((function(e){e(1)})),n=function(e){e((function(){}),(function(){}))};return(t.constructor={})[nv]=n,!(ho=t.then((function(){}))instanceof n)||!e&&mv&&!go})),sv=Nf||!Sg((function(e){zb.all(e).catch((function(){}))})),io=function(e){var t;return!(!ha(e)||"function"!=typeof(t=e.then))&&t},pj=function(e,t){if(!e.notified){e.notified=!0;var n=e.reactions;co((function(){for(var r=e.value,i=1==e.state,o=0;n.length>o;){var a,s=n[o++],c=i?s.ok:s.fail,u=s.resolve,l=s.reject,h=s.domain;try{if(c){if(i||(2===e.rejection&&tv(e),e.rejection=1),!0===c)var d=r;else if(h&&h.enter(),d=c(r),h){h.exit();var f=!0}d===s.promise?l(fo("Promise-chain cycle")):(a=io(d))?a.call(d,u,l):u(d)}else l(r)}catch(e){h&&!f&&h.exit(),l(e)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&uv(e)}))}},jo=function(e,t,n){var r;if(rv){var i=nj.createEvent("Event");i.promise=t,i.reason=n,i.initEvent(e,!1,!0),E.dispatchEvent(i)}else i={promise:t,reason:n};!go&&(r=E["on"+e])?r(i):"unhandledrejection"===e&&lv("Unhandled promise rejection",n)},uv=function(e){ij.call(E,(function(){var t=e.facade,n=e.value;if(1!==e.rejection&&!e.parent){var r=mj((function(){Hc?oj.emit("unhandledRejection",n,t):jo("unhandledrejection",t,n)}));if(e.rejection=Hc||1!==e.rejection&&!e.parent?2:1,r.error)throw r.value}}))},tv=function(e){ij.call(E,(function(){var t=e.facade;Hc?oj.emit("rejectionHandled",t):jo("rejectionhandled",t,e.value)}))},He=function(e,t,n){return function(r){e(t,r,n)}},Ie=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,pj(e,!0))},qj=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw fo("Promise can't be resolved itself");var r=io(t);r?co((function(){var n={done:!1};try{r.call(t,He(qj,n,e),He(Ie,n,e))}catch(t){Ie(n,t,e)}})):(e.value=t,e.state=1,pj(e,!1))}catch(t){Ie({done:!1},t,e)}}};if(Nf){zb=function(e){Gc(this,zb,"Promise"),yb(e),rj.call(this);var t=eo(this);try{e(He(qj,t),He(Ie,t))}catch(e){Ie(t,e)}},ah=zb.prototype;var rj=function(e){ov(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})};rj.prototype=Hf(ah,{then:function(e,t){var n=pv(this),r=Ge(jd(this,zb));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=Hc?oj.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&pj(n,!1),r.promise},catch:function(e){return this.then(void 0,e)}});var vv=function(){var e=new rj,t=eo(e);this.promise=e,this.resolve=He(qj,t),this.reject=He(Ie,t)};if(kj.f=Ge=function(e){return e===zb||e===wv?new vv(e):qv(e)},"function"==typeof Fc&&Nd!==Object.prototype){var xv=Nd.then;ho||(Ta(Nd,"then",(function(e,t){var n=this;return new zb((function(e,t){xv.call(n,e,t)})).then(e,t)}),{unsafe:!0}),Ta(Nd,"catch",ah.catch,{unsafe:!0}));try{delete Nd.constructor}catch(c){}Ua&&Ua(Nd,ah)}}P({global:!0,wrap:!0,forced:Nf},{Promise:zb}),Ec(zb,"Promise",!1),If("Promise");var wv=mc("Promise");P({target:"Promise",stat:!0,forced:Nf},{reject:function(e){var t=Ge(this);return t.reject.call(void 0,e),t.promise}}),P({target:"Promise",stat:!0,forced:Nf},{resolve:function(e){return lj(this,e)}}),P({target:"Promise",stat:!0,forced:sv},{all:function(e){var t=this,n=Ge(t),r=n.resolve,i=n.reject,o=mj((function(){var n=yb(t.resolve),o=[],a=0,s=1;Wg(e,(function(e){var c=a++,u=!1;o.push(void 0),s++,n.call(t,e).then((function(e){u||(u=!0,o[c]=e,--s||r(o))}),i)})),--s||r(o)}));return o.error&&i(o.value),n.promise},race:function(e){var t=this,n=Ge(t),r=n.reject,i=mj((function(){var i=yb(t.resolve);Wg(e,(function(e){i.call(t,e).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}});var yv=Vi?{}.toString:function(){return"[object "+Ff(this)+"]"};Vi||Ta(Object.prototype,"toString",yv,{unsafe:!0});var ko=[].indexOf,lo=!!ko&&0>1/[1].indexOf(1,-0),zv=De("indexOf");P({target:"Array",proto:!0,forced:lo||!zv},{indexOf:function(e){return lo?ko.apply(this,arguments)||0:Ri(this,e,1<arguments.length?arguments[1]:void 0)}});var sj=function(){var e=va(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t},pc=R((function(){var e=RegExp("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),Av=R((function(){var e=RegExp("^r","gy");return e.lastIndex=2,null!=e.exec("str")})),bh=RegExp.prototype.exec,Bv=ed("native-string-replace",String.prototype.replace),mo=bh,tj=(c=/a/,a=/b*/g,bh.call(c,"a"),bh.call(a,"a"),0!==c.lastIndex||0!==a.lastIndex),no=pc||Av,uj=void 0!==/()??/.exec("")[1],c,a;(tj||uj||no)&&(mo=function(e){var t,n=no&&this.sticky,r=sj.call(this),i=this.source,o=0,a=e;if(n){-1===(r=r.replace("y","")).indexOf("g")&&(r+="g"),a=String(e).slice(this.lastIndex),0<this.lastIndex&&(!this.multiline||this.multiline&&"\n"!==e[this.lastIndex-1])&&(i="(?: "+i+")",a=" "+a,o++);var s=new RegExp("^(?:"+i+")",r)}if(uj&&(s=new RegExp("^"+i+"$(?!\\s)",r)),tj)var c=this.lastIndex;var u=bh.call(n?s:this,a);return n?u?(u.input=u.input.slice(o),u[0]=u[0].slice(o),u.index=this.lastIndex,this.lastIndex+=u[0].length):this.lastIndex=0:tj&&u&&(this.lastIndex=this.global?u.index+u[0].length:c),uj&&u&&1<u.length&&Bv.call(u[0],s,(function(){for(t=1;t<arguments.length-2;t++)void 0===arguments[t]&&(u[t]=void 0)})),u});var Of=mo;P({target:"RegExp",proto:!0,forced:/./.exec!==Of},{exec:Of});var Cv=qa("species"),vj=RegExp.prototype,Dv=!R((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),oo="$0"==="a".replace(/./,"$0"),po=qa("replace"),qo=!!/./[po]&&""===/./[po]("a","$0"),Ev=!R((function(){var e=/(?:)/,t=e.exec;return e.exec=function(){return t.apply(this,arguments)},2!==(e="ab".split(e)).length||"a"!==e[0]||"b"!==e[1]})),ch=function(e,t,n,r){var i=qa(e),o=!R((function(){var t={};return t[i]=function(){return 7},7!=""[e](t)})),a=o&&!R((function(){var t=!1,n=/a/;return"split"===e&&((n={constructor:{}}).constructor[Cv]=function(){return n},n.flags="",n[i]=/./[i]),n.exec=function(){return t=!0,null},n[i](""),!t}));if(!o||!a||"replace"===e&&(!Dv||!oo||qo)||"split"===e&&!Ev){var s=/./[i],c=(n=n(i,""[e],(function(e,t,n,r,i){var a=t.exec;return a===Of||a===vj.exec?o&&!i?{done:!0,value:s.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),{REPLACE_KEEPS_$0:oo,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:qo}))[1];Ta(String.prototype,e,n[0]),Ta(vj,i,2==t?function(e,t){return c.call(e,this,t)}:function(e){return c.call(e,this)})}r&&Ma(vj[i],"sham",!0)},wj=function(e,t,n){return t+(n?En(e,t).length:1)},Fv=Math.floor,Gv="".replace,Hv=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,Iv=/\$([$&'`]|\d{1,2})/g,Jv=function(e,t,n,r,i,o){var a=n+e.length,s=r.length,c=Iv;return void 0!==i&&(i=Qa(i),c=Hv),Gv.call(o,c,(function(o,c){switch(c.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(a);case"<":o=i[c.slice(1,-1)];break;default:var u=+c;if(0===u)return o;if(u>s)return 0===(u=Fv(u/10))?o:u<=s?void 0===r[u-1]?c.charAt(1):r[u-1]+c.charAt(1):o;o=r[u-1]}return void 0===o?"":o}))},Je=function(e,t){var n=e.exec;if("function"==typeof n){if("object"!=typeof(e=n.call(e,t)))throw TypeError("RegExp exec method returned something other than an Object or null");return e}if("RegExp"!==Zb(e))throw TypeError("RegExp#exec called on incompatible receiver");return Of.call(e,t)},Kv=Math.max,Lv=Math.min,Mv=function(e){return void 0===e?e:String(e)};ch("replace",2,(function(e,t,n,r){var i=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,o=r.REPLACE_KEEPS_$0,a=i?"$":"$0";return[function(n,r){var i=jb(this),o=null==n?void 0:n[e];return void 0!==o?o.call(n,i,r):t.call(String(i),n,r)},function(e,r){if(!i&&o||"string"==typeof r&&-1===r.indexOf(a)){var s=n(t,e,this,r);if(s.done)return s.value}var c=va(e);e=String(this),(s="function"==typeof r)||(r=String(r));var u=c.global;if(u){var l=c.unicode;c.lastIndex=0}for(var h=[];;){var d=Je(c,e);if(null===d)break;if(h.push(d),!u)break;""===String(d[0])&&(c.lastIndex=wj(e,ta(c.lastIndex),l))}for(l="",u=c=0;u<h.length;u++){d=h[u];for(var f=String(d[0]),p=Kv(Lv($b(d.index),e.length),0),g=[],A=1;A<d.length;A++)g.push(Mv(d[A]));d=d.groups,s?(g=[f].concat(g,p,e),void 0!==d&&g.push(d),d=String(r.apply(void 0,g))):d=Jv(f,e,p,g,d,r),p>=c&&(l+=e.slice(c,p)+d,c=p+f.length)}return l+e.slice(c)}]}));var Nv=Ef("slice"),Ov=qa("species"),Pv=[].slice,Qv=Math.max;P({target:"Array",proto:!0,forced:!Nv},{slice:function(e,t){var n=qb(this),r=ta(n.length);if(e=xb(e,r),t=xb(void 0===t?r:t,r),fd(n)){var i=n.constructor;if("function"!=typeof i||i!==Array&&!fd(i.prototype)?ha(i)&&null===(i=i[Ov])&&(i=void 0):i=void 0,i===Array||void 0===i)return Pv.call(n,e,t)}for(i=new(void 0===i?Array:i)(Qv(t-e,0)),r=0;e<t;e++,r++)e in n&&Fe(i,r,n[e]);return i.length=r,i}});var ro="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,Rv=Ra.f,dh=E.Int8Array,xj=dh&&dh.prototype,so=E.Uint8ClampedArray,to=so&&so.prototype,qc=dh&&Vb(dh),bc=xj&&Vb(xj),uo=Object.prototype,vo=uo.isPrototypeOf,wo=qa("toStringTag"),yj=ze("TYPED_ARRAY_TAG"),Ic=ro&&!!Ua&&"Opera"!==Ff(E.opera),xo=!1,Ab,rc={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},Sv={BigInt64Array:8,BigUint64Array:8},eh=function(e){return!!ha(e)&&(e=Ff(e),Q(rc,e)||Q(Sv,e))};for(Ab in rc)E[Ab]||(Ic=!1);if((!Ic||"function"!=typeof qc||qc===Function.prototype)&&(qc=function(){throw TypeError("Incorrect invocation")},Ic))for(Ab in rc)E[Ab]&&Ua(E[Ab],qc);if((!Ic||!bc||bc===uo)&&(bc=qc.prototype,Ic))for(Ab in rc)E[Ab]&&Ua(E[Ab].prototype,bc);if(Ic&&Vb(to)!==bc&&Ua(to,bc),ka&&!Q(bc,wo))for(Ab in xo=!0,Rv(bc,wo,{get:function(){return ha(this)?this[yj]:void 0}}),rc)E[Ab]&&Ma(E[Ab],yj,Ab);var Pf=Ic,yo=xo&&yj,Da=function(e){if(eh(e))return e;throw TypeError("Target is not a typed array")},Ke=function(e){if(Ua){if(vo.call(qc,e))return e}else for(var t in rc)if(Q(rc,Ab)){var n=E[t];if(n&&(e===n||vo.call(n,e)))return e}throw TypeError("Target is not a typed array constructor")},Aa=function(e,t,n){if(ka){if(n)for(var r in rc){var i=E[r];if(i&&Q(i.prototype,e))try{delete i.prototype[e]}catch(e){}}bc[e]&&!n||Ta(bc,e,n?t:Ic&&xj[e]||t)}},zo=function(e,t,n){var r,i;if(ka){if(Ua){if(n)for(r in rc)if((i=E[r])&&Q(i,e))try{delete i[e]}catch(e){}if(qc[e]&&!n)return;try{return Ta(qc,e,n?t:Ic&&qc[e]||t)}catch(e){}}for(r in rc)!(i=E[r])||i[e]&&!n||Ta(i,e,t)}},Ao=qc,Qf=bc,Tv=E.ArrayBuffer,Od=E.Int8Array,zj=!Pf||!R((function(){Od(1)}))||!R((function(){new Od(-1)}))||!Sg((function(e){new Od,new Od(null),new Od(1.5),new Od(e)}),!0)||R((function(){return 1!==new Od(new Tv(2),1,void 0).length})),Le=function(e){if(void 0===e)return 0;e=$b(e);var t=ta(e);if(e!==t)throw RangeError("Wrong length or index");return t},Uv=Math.abs,Jc=Math.pow,Vv=Math.floor,Wv=Math.log,Xv=Math.LN2,Aj=function(e){var t=Qa(this),n=ta(t.length),r=arguments.length,i=xb(1<r?arguments[1]:void 0,n);for(n=void 0===(r=2<r?arguments[2]:void 0)?n:xb(r,n);n>i;)t[i++]=e;return t},Yv=Hd.f,Zv=Ra.f,Me=Za.get,Bo=Za.set,cc=E.ArrayBuffer,Bb=cc,dc=E.DataView,fh=dc&&dc.prototype,Co=Object.prototype,gh=E.RangeError,Do=function(e,t,n){var r,i=Array(n),o=(1<<(n=8*n-t-1))-1,a=o>>1,s=23===t?Jc(2,-24)-Jc(2,-77):0,c=0>e||0===e&&0>1/e?1:0,u=0;if((e=Uv(e))!=e||1/0===e){e=e!=e?1:0;var l=o}else l=Vv(Wv(e)/Xv),1>e*(r=Jc(2,-l))&&(l--,r*=2),2<=(e=1<=l+a?e+s/r:e+s*Jc(2,1-a))*r&&(l++,r/=2),l+a>=o?(e=0,l=o):1<=l+a?(e=(e*r-1)*Jc(2,t),l+=a):(e=e*Jc(2,a-1)*Jc(2,t),l=0);for(;8<=t;i[u++]=255&e,e/=256,t-=8);for(l=l<<t|e,n+=t;0<n;i[u++]=255&l,l/=256,n-=8);return i[--u]|=128*c,i},Eo=function(e,t){var n=e.length,r=8*n-t-1,i=(1<<r)-1,o=i>>1;r-=7,--n;var a=e[n--],s=127&a;for(a>>=7;0<r;s=256*s+e[n],n--,r-=8);var c=s&(1<<-r)-1;for(s>>=-r,r+=t;0<r;c=256*c+e[n],n--,r-=8);if(0===s)s=1-o;else{if(s===i)return c?NaN:a?-1/0:1/0;c+=Jc(2,t),s-=o}return(a?-1:1)*c*Jc(2,s-t)},Fo=function(e){return[255&e]},Go=function(e){return[255&e,e>>8&255]},Ho=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},Io=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},$v=function(e){return Do(e,23,4)},aw=function(e){return Do(e,52,8)},hh=function(e,t){Zv(e.prototype,t,{get:function(){return Me(this)[t]}})},kd=function(e,t,n,r){n=Le(n);var i=Me(e);if(n+t>i.byteLength)throw gh("Wrong index");return e=Me(i.buffer).bytes,n+=i.byteOffset,t=e.slice(n,n+t),r?t:t.reverse()},ld=function(e,t,n,r,i,o){n=Le(n);var a=Me(e);if(n+t>a.byteLength)throw gh("Wrong index");for(e=Me(a.buffer).bytes,n+=a.byteOffset,r=r(+i),i=0;i<t;i++)e[n+i]=r[o?i:t-i-1]};if(ro){if(!R((function(){cc(1)}))||!R((function(){new cc(-1)}))||R((function(){return new cc,new cc(1.5),new cc(NaN),"ArrayBuffer"!=cc.name}))){Bb=function(e){return Gc(this,Bb),new cc(Le(e))};for(var bw=Bb.prototype=cc.prototype,Jo=Yv(cc),Ko=0,Bj;Jo.length>Ko;)(Bj=Jo[Ko++])in Bb||Ma(Bb,Bj,cc[Bj]);bw.constructor=Bb}Ua&&Vb(fh)!==Co&&Ua(fh,Co);var ih=new dc(new Bb(2)),Lo=fh.setInt8;ih.setInt8(0,2147483648),ih.setInt8(1,2147483649),!ih.getInt8(0)&&ih.getInt8(1)||Hf(fh,{setInt8:function(e,t){Lo.call(this,e,t<<24>>24)},setUint8:function(e,t){Lo.call(this,e,t<<24>>24)}},{unsafe:!0})}else Bb=function(e){Gc(this,Bb,"ArrayBuffer"),e=Le(e),Bo(this,{bytes:Aj.call(Array(e),0),byteLength:e}),ka||(this.byteLength=e)},dc=function(e,t,n){Gc(this,dc,"DataView"),Gc(e,Bb,"DataView");var r=Me(e).byteLength;if(0>(t=$b(t))||t>r)throw gh("Wrong offset");if(t+(n=void 0===n?r-t:ta(n))>r)throw gh("Wrong length");Bo(this,{buffer:e,byteLength:n,byteOffset:t}),ka||(this.buffer=e,this.byteLength=n,this.byteOffset=t)},ka&&(hh(Bb,"byteLength"),hh(dc,"buffer"),hh(dc,"byteLength"),hh(dc,"byteOffset")),Hf(dc.prototype,{getInt8:function(e){return kd(this,1,e)[0]<<24>>24},getUint8:function(e){return kd(this,1,e)[0]},getInt16:function(e){var t=kd(this,2,e,1<arguments.length?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=kd(this,2,e,1<arguments.length?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return Io(kd(this,4,e,1<arguments.length?arguments[1]:void 0))},getUint32:function(e){return Io(kd(this,4,e,1<arguments.length?arguments[1]:void 0))>>>0},getFloat32:function(e){return Eo(kd(this,4,e,1<arguments.length?arguments[1]:void 0),23)},getFloat64:function(e){return Eo(kd(this,8,e,1<arguments.length?arguments[1]:void 0),52)},setInt8:function(e,t){ld(this,1,e,Fo,t)},setUint8:function(e,t){ld(this,1,e,Fo,t)},setInt16:function(e,t){ld(this,2,e,Go,t,2<arguments.length?arguments[2]:void 0)},setUint16:function(e,t){ld(this,2,e,Go,t,2<arguments.length?arguments[2]:void 0)},setInt32:function(e,t){ld(this,4,e,Ho,t,2<arguments.length?arguments[2]:void 0)},setUint32:function(e,t){ld(this,4,e,Ho,t,2<arguments.length?arguments[2]:void 0)},setFloat32:function(e,t){ld(this,4,e,$v,t,2<arguments.length?arguments[2]:void 0)},setFloat64:function(e,t){ld(this,8,e,aw,t,2<arguments.length?arguments[2]:void 0)}});Ec(Bb,"ArrayBuffer"),Ec(dc,"DataView");var Rf={ArrayBuffer:Bb,DataView:dc},jh=function(e,t){if(0>(e=$b(e)))throw RangeError("The argument can't be less than 0");if(e%t)throw RangeError("Wrong offset");return e},Cj=function(e){var t=Qa(e),n=arguments.length,r=1<n?arguments[1]:void 0,i=void 0!==r,o=Wi(t);if(null!=o&&!Ui(o)){var a=o.call(t),s=a.next;for(t=[];!(o=s.call(a)).done;)t.push(o.value)}for(i&&2<n&&(r=Id(r,arguments[2],2)),o=ta(t.length),a=new(Ke(this))(o),n=0;o>n;n++)a[n]=i?r(t[n],n):t[n];return a},kh=function(e,t,n){var r,i;return Ua&&"function"==typeof(r=t.constructor)&&r!==n&&ha(i=r.prototype)&&i!==n.prototype&&Ua(e,i),e},Sf=$a((function(e){var t=Hd.f,n=Za.get,r=Za.set,i=Ra.f,o=Fb.f,a=Math.round,s=E.RangeError,c=Rf.ArrayBuffer,u=Rf.DataView,l=function(e,t){var n=0,r=t.length;for(e=new(Ke(e))(r);r>n;)e[n]=t[n++];return e},h=function(e,t){i(e,t,{get:function(){return n(this)[t]}})},d=function(e){var t;return e instanceof c||"ArrayBuffer"==(t=Ff(e))||"SharedArrayBuffer"==t},f=function(e,t){return eh(e)&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},p=function(e,t){return f(e,t=lc(t,!0))?cd(2,e[t]):o(e,t)},g=function(e,t,n){return!(f(e,t=lc(t,!0))&&ha(n)&&Q(n,"value"))||Q(n,"get")||Q(n,"set")||n.configurable||Q(n,"writable")&&!n.writable||Q(n,"enumerable")&&!n.enumerable?i(e,t,n):(e[t]=n.value,e)};ka?(Pf||(Fb.f=p,Ra.f=g,h(Qf,"buffer"),h(Qf,"byteOffset"),h(Qf,"byteLength"),h(Qf,"length")),P({target:"Object",stat:!0,forced:!Pf},{getOwnPropertyDescriptor:p,defineProperty:g}),e.exports=function(e,o,h){var f=e.match(/\d+$/)[0]/8,p=e+(h?"Clamped":"")+"Array",g="get"+e,A="set"+e,v=E[p],m=v;e=m&&m.prototype;var y={},b=function(e,t){i(e,t,{get:function(){var e=n(this);return e.view[g](t*f+e.byteOffset,!0)},set:function(e){var r=n(this);h&&(e=0>(e=a(e))?0:255<e?255:255&e),r.view[A](t*f+r.byteOffset,e,!0)},enumerable:!0})};Pf?zj&&(m=o((function(e,t,n,r){return Gc(e,m,p),kh(ha(t)?d(t)?void 0!==r?new v(t,jh(n,f),r):void 0!==n?new v(t,jh(n,f)):new v(t):eh(t)?l(m,t):Cj.call(m,t):new v(Le(t)),e,m)})),Ua&&Ua(m,Ao),Jd(t(v),(function(e){e in m||Ma(m,e,v[e])})),m.prototype=e):(m=o((function(e,t,n,i){Gc(e,m,p);var o=0,a=0;if(ha(t)){if(!d(t))return eh(t)?l(m,t):Cj.call(m,t);var h=t;if(a=jh(n,f),t=t.byteLength,void 0===i){if(t%f)throw s("Wrong length");if(0>(i=t-a))throw s("Wrong length")}else if((i=ta(i)*f)+a>t)throw s("Wrong length");t=i/f}else t=Le(t),h=new c(i=t*f);for(r(e,{buffer:h,byteOffset:a,byteLength:i,length:t,view:new u(h)});o<t;)b(e,o++)})),Ua&&Ua(m,Ao),e=m.prototype=ac(Qf)),e.constructor!==m&&Ma(e,"constructor",m),yo&&Ma(e,yo,p),y[p]=m,P({global:!0,forced:m!=v,sham:!Pf},y),"BYTES_PER_ELEMENT"in m||Ma(m,"BYTES_PER_ELEMENT",f),"BYTES_PER_ELEMENT"in e||Ma(e,"BYTES_PER_ELEMENT",f),If(p)}):e.exports=function(){}}));Sf("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}}));var cw=Math.min,dw=[].copyWithin||function(e,t){var n=Qa(this),r=ta(n.length),i=xb(e,r),o=xb(t,r),a=2<arguments.length?arguments[2]:void 0;for(r=cw((void 0===a?r:xb(a,r))-o,r-i),a=1,o<i&&i<o+r&&(a=-1,o+=r-1,i+=r-1);0<r--;)o in n?n[i]=n[o]:delete n[i],i+=a,o+=a;return n};Aa("copyWithin",(function(e,t){return dw.call(Da(this),e,t,2<arguments.length?arguments[2]:void 0)})),Aa("every",(function(e){return Hu(Da(this),e,1<arguments.length?arguments[1]:void 0)})),Aa("fill",(function(e){return Aj.apply(Da(this),arguments)})),Aa("filter",(function(e){var t=wn(Da(this),e,1<arguments.length?arguments[1]:void 0),n=jd(this,this.constructor),r=0,i=t.length;for(n=new(Ke(n))(i);i>r;)n[r]=t[r++];return n})),Aa("find",(function(e){return xn(Da(this),e,1<arguments.length?arguments[1]:void 0)})),Aa("findIndex",(function(e){return yn(Da(this),e,1<arguments.length?arguments[1]:void 0)})),Aa("forEach",(function(e){Jd(Da(this),e,1<arguments.length?arguments[1]:void 0)})),Aa("includes",(function(e){return mn(Da(this),e,1<arguments.length?arguments[1]:void 0)})),Aa("indexOf",(function(e){return Ri(Da(this),e,1<arguments.length?arguments[1]:void 0)}));var ew=Za.set,fw=Za.getterFor("Array Iterator"),md=aj(Array,"Array",(function(e,t){ew(this,{type:"Array Iterator",target:qb(e),index:0,kind:t})}),(function(){var e=fw(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values");Ee.Arguments=Ee.Array,Ld("keys"),Ld("values"),Ld("entries");var Mo=qa("iterator"),No=E.Uint8Array,gw=md.values,hw=md.keys,iw=md.entries,Dj=No&&No.prototype[Mo],Oo=!!Dj&&("values"==Dj.name||null==Dj.name),Po=function(){return gw.call(Da(this))};Aa("entries",(function(){return iw.call(Da(this))})),Aa("keys",(function(){return hw.call(Da(this))})),Aa("values",Po,!Oo),Aa(Mo,Po,!Oo);var jw=[].join;Aa("join",(function(e){return jw.apply(Da(this),arguments)}));var kw=Math.min,Ej=[].lastIndexOf,Qo=!!Ej&&0>1/[1].lastIndexOf(1,-0),lw=De("lastIndexOf"),mw=Qo||!lw?function(e){if(Qo)return Ej.apply(this,arguments)||0;var t=qb(this),n=ta(t.length),r=n-1;for(1<arguments.length&&(r=kw(r,$b(arguments[1]))),0>r&&(r=n+r);0<=r;r--)if(r in t&&t[r]===e)return r||0;return-1}:Ej;Aa("lastIndexOf",(function(e){return mw.apply(Da(this),arguments)})),Aa("map",(function(e){return vn(Da(this),e,1<arguments.length?arguments[1]:void 0,(function(e,t){return new(Ke(jd(e,e.constructor)))(t)}))}));var Ro=function(e){return function(t,n,r,i){yb(n),t=Qa(t);var o=Af(t),a=ta(t.length),s=e?a-1:0,c=e?-1:1;if(2>r)for(;;){if(s in o){i=o[s],s+=c;break}if(s+=c,e?0>s:a<=s)throw TypeError("Reduce of empty array with no initial value")}for(;e?0<=s:a>s;s+=c)s in o&&(i=n(i,o[s],s,t));return i}},So=Ro(!1),nw=Ro(!0);Aa("reduce",(function(e){return So(Da(this),e,arguments.length,1<arguments.length?arguments[1]:void 0)})),Aa("reduceRight",(function(e){return nw(Da(this),e,arguments.length,1<arguments.length?arguments[1]:void 0)}));var ow=Math.floor;Aa("reverse",(function(){for(var e,t=Da(this).length,n=ow(t/2),r=0;r<n;)e=this[r],this[r++]=this[--t],this[t]=e;return this}));var pw=R((function(){new Int8Array(1).set({})}));Aa("set",(function(e){Da(this);var t=jh(1<arguments.length?arguments[1]:void 0,1),n=this.length,r=Qa(e),i=ta(r.length),o=0;if(i+t>n)throw RangeError("Wrong length");for(;o<i;)this[t+o]=r[o++]}),pw);var qw=[].slice,rw=R((function(){new Int8Array(1).slice()}));Aa("slice",(function(e,t){e=qw.call(Da(this),e,t);var n=jd(this,this.constructor);t=0;var r=e.length;for(n=new(Ke(n))(r);r>t;)n[t]=e[t++];return n}),rw),Aa("some",(function(e){return Gu(Da(this),e,1<arguments.length?arguments[1]:void 0)}));var sw=[].sort;Aa("sort",(function(e){return sw.call(Da(this),e)})),Aa("subarray",(function(e,t){var n=Da(this),r=n.length;return e=xb(e,r),new(jd(n,n.constructor))(n.buffer,n.byteOffset+e*n.BYTES_PER_ELEMENT,ta((void 0===t?r:xb(t,r))-e))}));var lh=E.Int8Array,To=[].toLocaleString,tw=[].slice,uw=!!lh&&R((function(){To.call(new lh(1))})),vw=R((function(){return[1,2].toLocaleString()!=new lh([1,2]).toLocaleString()}))||!R((function(){lh.prototype.toLocaleString.call([1,2])}));Aa("toLocaleString",(function(){return To.apply(uw?tw.call(Da(this)):Da(this),arguments)}),vw);var Uo=E.Uint8Array,ww=Uo&&Uo.prototype||{},mh=[].toString,xw=[].join;R((function(){mh.call({})}))&&(mh=function(){return xw.call(this)}),Aa("toString",mh,ww.toString!=mh);var Fj=Rf.ArrayBuffer,Vo=Rf.DataView,Wo=Fj.prototype.slice,yw=R((function(){return!new Fj(2).slice(1,void 0).byteLength}));P({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:yw},{slice:function(e,t){if(void 0!==Wo&&void 0===t)return Wo.call(va(this),e);var n=va(this).byteLength;e=xb(e,n),t=xb(void 0===t?n:t,n),n=new(jd(this,Fj))(ta(t-e));for(var r=new Vo(this),i=new Vo(n),o=0;e<t;)i.setUint8(o++,r.getUint8(e++));return n}});var Xo=Rf.ArrayBuffer;P({global:!0,forced:E.ArrayBuffer!==Xo},{ArrayBuffer:Xo}),If("ArrayBuffer");var zw=Ra.f,Gj=Function.prototype,Aw=Gj.toString,Bw=/^\s*function ([^ (]*)/;!ka||"name"in Gj||zw(Gj,"name",{configurable:!0,get:function(){try{return Aw.call(this).match(Bw)[1]}catch(e){return""}}});var Yo=RegExp.prototype,Zo=Yo.toString,Cw=R((function(){return"/a/b"!=Zo.call({source:"a",flags:"b"})})),Dw="toString"!=Zo.name;(Cw||Dw)&&Ta(RegExp.prototype,"toString",(function(){var e=va(this),t=String(e.source),n=e.flags;return"/"+t+"/"+String(void 0===n&&e instanceof RegExp&&!("flags"in Yo)?sj.call(e):n)}),{unsafe:!0});var Ew=Ef("splice"),Fw=Math.max,Gw=Math.min;P({target:"Array",proto:!0,forced:!Ew},{splice:function(e,t){var n,r,i=Qa(this),o=ta(i.length),a=xb(e,o),s=arguments.length;if(0===s?s=n=0:1===s?(s=0,n=o-a):(s-=2,n=Gw(Fw($b(t),0),o-a)),9007199254740991<o+s-n)throw TypeError("Maximum allowed length exceeded");var c=Rg(i,n);for(r=0;r<n;r++){var u=a+r;u in i&&Fe(c,r,i[u])}if(c.length=n,s<n){for(r=a;r<o-n;r++){var l=r+s;(u=r+n)in i?i[l]=i[u]:delete i[l]}for(r=o;r>o-n+s;r--)delete i[r-1]}else if(s>n)for(r=o-n;r>a;r--)l=r+s-1,(u=r+n-1)in i?i[l]=i[u]:delete i[l];for(r=0;r<s;r++)i[r+a]=arguments[r+2];return i.length=o-n+s,c}});var Hj={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Ij=qa("iterator"),$o=qa("toStringTag"),Jj=md.values,nh;for(nh in Hj){var ap=E[nh],Kc=ap&&ap.prototype;if(Kc){if(Kc[Ij]!==Jj)try{Ma(Kc,Ij,Jj)}catch(c){Kc[Ij]=Jj}if(Kc[$o]||Ma(Kc,$o,nh),Hj[nh])for(var Ne in md)if(Kc[Ne]!==md[Ne])try{Ma(Kc,Ne,md[Ne])}catch(c){Kc[Ne]=md[Ne]}}}var bp=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t};ch("search",1,(function(e,t,n){return[function(t){var n=jb(this),r=null==t?void 0:t[e];return void 0!==r?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r=n(t,e,this);if(r.done)return r.value;e=va(e);var i=String(this);return r=e.lastIndex,bp(r,0)||(e.lastIndex=0),i=Je(e,i),bp(e.lastIndex,r)||(e.lastIndex=r),null===i?-1:i.index}]})),$a((function(e){!function(t,n){e.exports?e.exports=n(t):n(t)}("undefined"!=typeof self?self:Ya,(function(e){function t(e){return btoa(e).replace(/=+$/,"").replace(/\+/g,"-").replace(/\//g,"_")}function n(e){return e=(e+="===").slice(0,-e.length%4),atob(e.replace(/-/g,"+").replace(/_/g,"/"))}function r(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}function i(e){return e instanceof ArrayBuffer&&(e=new Uint8Array(e)),String.fromCharCode.apply(String,e)}function o(e){var t={name:(e.name||e||"").toUpperCase().replace("V","v")};switch(t.name){case"SHA-1":case"SHA-256":case"SHA-384":case"SHA-512":break;case"AES-CBC":case"AES-GCM":case"AES-KW":e.length&&(t.length=e.length);break;case"HMAC":e.hash&&(t.hash=o(e.hash)),e.length&&(t.length=e.length);break;case"RSAES-PKCS1-v1_5":e.publicExponent&&(t.publicExponent=new Uint8Array(e.publicExponent)),e.modulusLength&&(t.modulusLength=e.modulusLength);break;case"RSASSA-PKCS1-v1_5":case"RSA-OAEP":e.hash&&(t.hash=o(e.hash)),e.publicExponent&&(t.publicExponent=new Uint8Array(e.publicExponent)),e.modulusLength&&(t.modulusLength=e.modulusLength);break;default:throw new SyntaxError("Bad algorithm name")}return t}function a(e){return{HMAC:{"SHA-1":"HS1","SHA-256":"HS256","SHA-384":"HS384","SHA-512":"HS512"},"RSASSA-PKCS1-v1_5":{"SHA-1":"RS1","SHA-256":"RS256","SHA-384":"RS384","SHA-512":"RS512"},"RSAES-PKCS1-v1_5":{"":"RSA1_5"},"RSA-OAEP":{"SHA-1":"RSA-OAEP","SHA-256":"RSA-OAEP-256"},"AES-KW":{128:"A128KW",192:"A192KW",256:"A256KW"},"AES-GCM":{128:"A128GCM",192:"A192GCM",256:"A256GCM"},"AES-CBC":{128:"A128CBC",192:"A192CBC",256:"A256CBC"}}[e.name][(e.hash||{}).name||e.length||""]}function s(e){(e instanceof ArrayBuffer||e instanceof Uint8Array)&&(e=JSON.parse(decodeURIComponent(escape(i(e)))));var t={kty:e.kty,alg:e.alg,ext:e.ext||e.extractable};switch(t.kty){case"oct":t.k=e.k;case"RSA":"n e d p q dp dq qi oth".split(" ").forEach((function(n){n in e&&(t[n]=e[n])}));break;default:throw new TypeError("Unsupported key type")}return t}function c(e){return e=s(e),b&&(e.extractable=e.ext,delete e.ext),r(unescape(encodeURIComponent(JSON.stringify(e)))).buffer}function u(e){var n=l(e),r=!1;if("1.2.840.113549.1.1.1"!==(2<n.length&&(r=!0,n.shift()),e={ext:!0},n[0][0]))throw new TypeError("Unsupported key type");var o="n e d p q dp dq qi".split(" ");for(n=l(n[1]),r&&n.shift(),r=0;r<n.length;r++)n[r][0]||(n[r]=n[r].subarray(1)),e[o[r]]=t(i(n[r]));return e.kty="RSA",e}function l(e,t){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),t||(t={pos:0,end:e.length}),2>t.end-t.pos||t.end>e.length)throw new RangeError("Malformed DER");var n=e[t.pos++],r=e[t.pos++];if(128<=r){if(r&=127,t.end-t.pos<r)throw new RangeError("Malformed DER");for(var o=0;r--;)o<<=8,o|=e[t.pos++];r=o}if(t.end-t.pos<r)throw new RangeError("Malformed DER");switch(n){case 2:n=e.subarray(t.pos,t.pos+=r);break;case 3:if(e[t.pos++])throw Error("Unsupported bit string");r--;case 4:n=new Uint8Array(e.subarray(t.pos,t.pos+=r)).buffer;break;case 5:n=null;break;case 6:if(!((e=btoa(i(e.subarray(t.pos,t.pos+=r))))in E))throw Error("Unsupported OBJECT ID "+e);n=E[e];break;case 48:for(n=[],r=t.pos+r;t.pos<r;)n.push(l(e,t));break;default:throw Error("Unsupported DER tag 0x"+n.toString(16))}return n}function h(e,t){t||(t=[]);var n=t.length+2;if(t.push(0,0),e instanceof Uint8Array)for(var i=2,o=e.length,a=0;a<o;a++)t.push(e[a]);else if(e instanceof ArrayBuffer)for(i=4,o=e.byteLength,e=new Uint8Array(e),a=0;a<o;a++)t.push(e[a]);else if(null===e)i=5,o=0;else if("string"==typeof e&&e in w)for(i=6,o=(e=r(atob(w[e]))).length,a=0;a<o;a++)t.push(e[a]);else if(e instanceof Array){for(a=0;a<e.length;a++)h(e[a],t);i=48,o=t.length-n}else{if(!("object"===aa(e)&&3===e.tag&&e.value instanceof ArrayBuffer))throw Error("Unsupported DER value "+e);for(i=3,o=(e=new Uint8Array(e.value)).byteLength,t.push(0),a=0;a<o;a++)t.push(e[a]);o++}if(128<=o){for(a=o,o=4,t.splice(n,0,a>>24&255,a>>16&255,a>>8&255,255&a);1<o&&!(a>>24);)a<<=8,o--;4>o&&t.splice(n,4-o),o|=128}return t.splice(n-2,2,i,o),t}function d(e,t,n,r){Object.defineProperties(this,{_key:{value:e},type:{value:e.type,enumerable:!0},extractable:{value:void 0===n?e.extractable:n,enumerable:!0},algorithm:{value:void 0===t?e.algorithm:t,enumerable:!0},usages:{value:void 0===r?e.usages:r,enumerable:!0}})}function f(e){return"verify"===e||"encrypt"===e||"wrapKey"===e}function p(e){return"sign"===e||"decrypt"===e||"unwrapKey"===e}if("function"!=typeof Promise)throw"Promise support required";var g=e.crypto||e.msCrypto;if(g){var A=g.subtle||g.webkitSubtle;if(A){var v=e.Crypto||g.constructor||Object,m=e.SubtleCrypto||A.constructor||Object;e.CryptoKey||e.Key;var y=-1<e.navigator.userAgent.indexOf("Edge/"),b=!!e.msCrypto&&!y,_=!g.subtle&&!!g.webkitSubtle;if(b||_){var E={KoZIhvcNAQEB:"1.2.840.113549.1.1.1"},w={"1.2.840.113549.1.1.1":"KoZIhvcNAQEB"};if(["generateKey","importKey","unwrapKey"].forEach((function(e){var t=A[e];A[e]=function(i,l,h){var v=[].slice.call(arguments);switch(e){case"generateKey":var m=o(i),y=l,E=h;break;case"importKey":m=o(h),y=v[3],E=v[4],"jwk"===i&&((l=s(l)).alg||(l.alg=a(m)),l.key_ops||(l.key_ops="oct"!==l.kty?"d"in l?E.filter(p):E.filter(f):E.slice()),v[1]=c(l));break;case"unwrapKey":m=v[4],y=v[5],E=v[6],v[2]=h._key}if("generateKey"===e&&"HMAC"===m.name&&m.hash)return m.length=m.length||{"SHA-1":512,"SHA-256":512,"SHA-384":1024,"SHA-512":1024}[m.hash.name],A.importKey("raw",g.getRandomValues(new Uint8Array(m.length+7>>3)),m,y,E);if(_&&"generateKey"===e&&"RSASSA-PKCS1-v1_5"===m.name&&(!m.modulusLength||2048<=m.modulusLength))return(i=o(i)).name="RSAES-PKCS1-v1_5",delete i.hash,A.generateKey(i,!0,["encrypt","decrypt"]).then((function(e){return Promise.all([A.exportKey("jwk",e.publicKey),A.exportKey("jwk",e.privateKey)])})).then((function(e){return e[0].alg=e[1].alg=a(m),e[0].key_ops=E.filter(f),e[1].key_ops=E.filter(p),Promise.all([A.importKey("jwk",e[0],m,!0,e[0].key_ops),A.importKey("jwk",e[1],m,y,e[1].key_ops)])})).then((function(e){return{publicKey:e[0],privateKey:e[1]}}));if((_||b&&"SHA-1"===(m.hash||{}).name)&&"importKey"===e&&"jwk"===i&&"HMAC"===m.name&&"oct"===l.kty)return A.importKey("raw",r(n(l.k)),h,v[3],v[4]);if(_&&"importKey"===e&&("spki"===i||"pkcs8"===i))return A.importKey("jwk",u(l),h,v[3],v[4]);if(b&&"unwrapKey"===e)return A.decrypt(v[3],h,l).then((function(e){return A.importKey(i,e,v[4],v[5],v[6])}));try{var w=t.apply(A,v)}catch(e){return Promise.reject(e)}return b&&(w=new Promise((function(e,t){w.onabort=w.onerror=function(e){t(e)},w.oncomplete=function(t){e(t.target.result)}}))),w=w.then((function(e){return"HMAC"!==m.name||m.length||(m.length=8*e.algorithm.length),0==m.name.search("RSA")&&(m.modulusLength||(m.modulusLength=(e.publicKey||e).algorithm.modulusLength),m.publicExponent||(m.publicExponent=(e.publicKey||e).algorithm.publicExponent)),e.publicKey&&e.privateKey?{publicKey:new d(e.publicKey,m,y,E.filter(f)),privateKey:new d(e.privateKey,m,y,E.filter(p))}:new d(e,m,y,E)}))}})),["exportKey","wrapKey"].forEach((function(e){var o=A[e];A[e]=function(c,u,l){var d=[].slice.call(arguments);switch(e){case"exportKey":d[1]=u._key;break;case"wrapKey":d[1]=u._key,d[2]=l._key}if((_||b&&"SHA-1"===(u.algorithm.hash||{}).name)&&"exportKey"===e&&"jwk"===c&&"HMAC"===u.algorithm.name&&(d[0]="raw"),!_||"exportKey"!==e||"spki"!==c&&"pkcs8"!==c||(d[0]="jwk"),b&&"wrapKey"===e)return A.exportKey(c,u).then((function(e){return"jwk"===c&&(e=r(unescape(encodeURIComponent(JSON.stringify(s(e)))))),A.encrypt(d[3],l,e)}));try{var g=o.apply(A,d)}catch(e){return Promise.reject(e)}return b&&(g=new Promise((function(e,t){g.onabort=g.onerror=function(e){t(e)},g.oncomplete=function(t){e(t.target.result)}}))),"exportKey"===e&&"jwk"===c&&(g=g.then((function(e){return(_||b&&"SHA-1"===(u.algorithm.hash||{}).name)&&"HMAC"===u.algorithm.name?{kty:"oct",alg:a(u.algorithm),key_ops:u.usages.slice(),ext:!0,k:t(i(e))}:((e=s(e)).alg||(e.alg=a(u.algorithm)),e.key_ops||(e.key_ops="public"===u.type?u.usages.filter(f):"private"===u.type?u.usages.filter(p):u.usages.slice()),e)}))),!_||"exportKey"!==e||"spki"!==c&&"pkcs8"!==c||(g=g.then((function(e){var t=[["",null]],i=!1;if("RSA"!==(e=s(e)).kty)throw new TypeError("Unsupported key type");for(var o="n e d p q dp dq qi".split(" "),a=[],c=0;c<o.length&&o[c]in e;c++){var u=a[c]=r(n(e[o[c]]));128&u[0]&&(a[c]=new Uint8Array(u.length+1),a[c].set(u,1))}return 2<a.length&&(i=!0,a.unshift(new Uint8Array([0]))),t[0][0]="1.2.840.113549.1.1.1",t.push(new Uint8Array(h(a)).buffer),i?t.unshift(new Uint8Array([0])):t[1]={tag:3,value:t[1]},new Uint8Array(h(t)).buffer}))),g}})),["encrypt","decrypt","sign","verify"].forEach((function(e){var t=A[e];A[e]=function(n,r,i,a){if(b&&(!i.byteLength||a&&!a.byteLength))throw Error("Empty input is not allowed");var s=[].slice.call(arguments),c=o(n);if(!b||"sign"!==e&&"verify"!==e||"RSASSA-PKCS1-v1_5"!==n&&"HMAC"!==n||(s[0]={name:n}),b&&r.algorithm.hash&&(s[0].hash=s[0].hash||r.algorithm.hash),b&&"decrypt"===e&&"AES-GCM"===c.name){var u=n.tagLength>>3;s[2]=(i.buffer||i).slice(0,i.byteLength-u),n.tag=(i.buffer||i).slice(i.byteLength-u)}b&&"AES-GCM"===c.name&&void 0===s[0].tagLength&&(s[0].tagLength=128),s[1]=r._key;try{var l=t.apply(A,s)}catch(e){return Promise.reject(e)}return b&&(l=new Promise((function(t,n){l.onabort=l.onerror=function(e){n(e)},l.oncomplete=function(n){if(n=n.target.result,"encrypt"===e&&n instanceof AesGcmEncryptResult){var r=n.ciphertext,i=n.tag;(n=new Uint8Array(r.byteLength+i.byteLength)).set(new Uint8Array(r),0),n.set(new Uint8Array(i),r.byteLength),n=n.buffer}t(n)}}))),l}})),b){var I=A.digest;A.digest=function(e,t){if(!t.byteLength)throw Error("Empty input is not allowed");try{var n=I.call(A,e,t)}catch(e){return Promise.reject(e)}return n=new Promise((function(e,t){n.onabort=n.onerror=function(e){t(e)},n.oncomplete=function(t){e(t.target.result)}}))},e.crypto=Object.create(g,{getRandomValues:{value:function(e){return g.getRandomValues(e)}},subtle:{value:A}}),e.CryptoKey=d}_&&(g.subtle=A,e.Crypto=v,e.SubtleCrypto=m,e.CryptoKey=d)}}}}))}));var Hw=qa("match"),Kj=function(e){var t;return ha(e)&&(void 0!==(t=e[Hw])?!!t:"RegExp"==Zb(e))},Iw=[].push,Jw=Math.min;ch("split",2,(function(e,t,n){var r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||1<".".split(/()()/).length||"".split(/.?/).length?function(e,n){var r=String(jb(this));if(0==(n=void 0===n?4294967295:n>>>0))return[];if(void 0===e)return[r];if(!Kj(e))return t.call(r,e,n);var i,o,a,s=[],c=0;for(e=new RegExp(e.source,(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":"")+"g");(i=Of.call(e,r))&&!((o=e.lastIndex)>c&&(s.push(r.slice(c,i.index)),1<i.length&&i.index<r.length&&Iw.apply(s,i.slice(1)),a=i[0].length,c=o,s.length>=n));)e.lastIndex===i.index&&e.lastIndex++;return c===r.length?(a||!e.test(""))&&s.push(""):s.push(r.slice(c)),s.length>n?s.slice(0,n):s}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t;return[function(t,n){var i=jb(this),o=null==t?void 0:t[e];return void 0!==o?o.call(t,i,n):r.call(String(i),t,n)},function(e,i){var o=n(r,e,this,i,r!==t);if(o.done)return o.value;var a=va(e);e=String(this);var s=jd(a,RegExp);if(o=a.unicode,a=new s(pc?"^(?:"+a.source+")":a,(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(pc?"g":"y")),0==(i=void 0===i?4294967295:i>>>0))return[];if(0===e.length)return null===Je(a,e)?[e]:[];var c=0,u=0;for(s=[];u<e.length;){a.lastIndex=pc?0:u;var l,h=Je(a,pc?e.slice(u):e);if(null===h||(l=Jw(ta(a.lastIndex+(pc?u:0)),e.length))===c)u=wj(e,u,o);else{if(s.push(e.slice(c,u)),s.length===i)return s;for(c=1;c<=h.length-1;c++)if(s.push(h[c]),s.length===i)return s;u=c=l}}return s.push(e.slice(c)),s}]}),pc),function(e){e.console||(e.console={}),e=e.console;for(var t,n=function(){},r=["memory"],i="assert clear count debug dir dirxml error exception group groupCollapsed groupEnd info log markTimeline profile profiles profileEnd show table time timeEnd timeline timelineEnd timeStamp trace warn".split(" ");t=r.pop();)e[t]||(e[t]={});for(;t=i.pop();)e[t]||(e[t]=n)}("undefined"==typeof window?Ya:window),P({target:"Object",stat:!0},{setPrototypeOf:Ua});var Kw=R((function(){Vb(1)}));P({target:"Object",stat:!0,forced:Kw,sham:!Fn},{getPrototypeOf:function(e){return Vb(Qa(e))}});var cp=[].slice,Lj={},Lw=Function.bind||function(e){var t=yb(this),n=cp.call(arguments,1),r=function(){var i=n.concat(cp.call(arguments));if(this instanceof r){var o=i.length;if(!(o in Lj)){for(var a=[],s=0;s<o;s++)a[s]="a["+s+"]";Lj[o]=Function("C,a","return new C("+a.join(",")+")")}i=Lj[o](t,i)}else i=t.apply(e,i);return i};return ha(t.prototype)&&(r.prototype=t.prototype),r},Mj=mc("Reflect","construct"),dp=R((function(){function e(){}return!(Mj((function(){}),[],e)instanceof e)})),ep=!R((function(){Mj((function(){}))})),fp=dp||ep;P({target:"Reflect",stat:!0,forced:fp,sham:fp},{construct:function(e,t){yb(e),va(t);var n=3>arguments.length?e:yb(arguments[2]);if(ep&&!dp)return Mj(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}return(n=[null]).push.apply(n,t),new(Lw.apply(e,n))}n=n.prototype,n=ac(ha(n)?n:Object.prototype);var r=Function.apply.call(e,n,t);return ha(r)?r:n}}),P({target:"Reflect",stat:!0},{get:vl});var gp=Fb.f,Mw=R((function(){gp(1)}));P({target:"Object",stat:!0,forced:!ka||Mw,sham:!ka},{getOwnPropertyDescriptor:function(e,t){return gp(qb(e),t)}});var hp=Hd.f,Nw={}.toString,ip="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Nj=function(e){if(ip&&"[object Window]"==Nw.call(e))try{var t=hp(e)}catch(e){t=ip.slice()}else t=hp(qb(e));return t},jp={f:qa},Ow=Ra.f,oh=function(e){var t=E.Symbol||(E.Symbol={});Q(t,e)||Ow(t,e,{value:jp.f(e)})},rb=Og("hidden"),kp=qa("toPrimitive"),Pw=Za.set,lp=Za.getterFor("Symbol"),Ob=Object.prototype,sb=E.Symbol,Tf=mc("JSON","stringify"),mp=Fb.f,nd=Ra.f,np=Nj,Qw=zf,Lc=ed("symbols"),Uf=ed("op-symbols"),Oj=ed("string-to-symbol-registry"),Pj=ed("symbol-to-string-registry"),Rw=ed("wks"),Qj=E.QObject,Rj=!Qj||!Qj.prototype||!Qj.prototype.findChild,Sj=ka&&R((function(){return 7!=ac(nd({},"a",{get:function(){return nd(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=mp(Ob,t);r&&delete Ob[t],nd(e,t,n),r&&e!==Ob&&nd(Ob,t,r)}:nd,Tj=function(e,t){var n=Lc[e]=ac(sb.prototype);return Pw(n,{type:"Symbol",tag:e,description:t}),ka||(n.description=t),n},Uj=tn?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof sb},ph=function(e,t,n){return e===Ob&&ph(Uf,t,n),va(e),t=lc(t,!0),va(n),Q(Lc,t)?(n.enumerable?(Q(e,rb)&&e[rb][t]&&(e[rb][t]=!1),n=ac(n,{enumerable:cd(0,!1)})):(Q(e,rb)||nd(e,rb,cd(1,{})),e[rb][t]=!0),Sj(e,t,n)):nd(e,t,n)},op=function(e,t){va(e);var n=qb(t);return t=Dc(n).concat(Vj(n)),Jd(t,(function(t){ka&&!Wj.call(n,t)||ph(e,t,n[t])})),e},Wj=function(e){e=lc(e,!0);var t=Qw.call(this,e);return!(this===Ob&&Q(Lc,e)&&!Q(Uf,e))&&(!(t||!Q(this,e)||!Q(Lc,e)||Q(this,rb)&&this[rb][e])||t)},pp=function(e,t){if(e=qb(e),t=lc(t,!0),e!==Ob||!Q(Lc,t)||Q(Uf,t)){var n=mp(e,t);return!n||!Q(Lc,t)||Q(e,rb)&&e[rb][t]||(n.enumerable=!0),n}},qp=function(e){e=np(qb(e));var t=[];return Jd(e,(function(e){Q(Lc,e)||Q(Ae,e)||t.push(e)})),t},Vj=function(e){var t=e===Ob;e=np(t?Uf:qb(e));var n=[];return Jd(e,(function(e){!Q(Lc,e)||t&&!Q(Ob,e)||n.push(Lc[e])})),n};if(oc||(sb=function(){if(this instanceof sb)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=ze(e),n=function(e){this===Ob&&n.call(Uf,e),Q(this,rb)&&Q(this[rb],t)&&(this[rb][t]=!1),Sj(this,t,cd(1,e))};return ka&&Rj&&Sj(Ob,t,{configurable:!0,set:n}),Tj(t,e)},Ta(sb.prototype,"toString",(function(){return lp(this).tag})),Ta(sb,"withoutSetter",(function(e){return Tj(ze(e),e)})),zf=Wj,Ra.f=ph,Fb.f=pp,Hd.f=Nj=qp,Bf.f=Vj,jp.f=function(e){return Tj(qa(e),e)},ka&&(nd(sb.prototype,"description",{configurable:!0,get:function(){return lp(this).description}}),Ta(Ob,"propertyIsEnumerable",Wj,{unsafe:!0}))),P({global:!0,wrap:!0,forced:!oc,sham:!oc},{Symbol:sb}),Jd(Dc(Rw),(function(e){oh(e)})),P({target:"Symbol",stat:!0,forced:!oc},{for:function(e){if(e=String(e),Q(Oj,e))return Oj[e];var t=sb(e);return Oj[e]=t,Pj[t]=e,t},keyFor:function(e){if(!Uj(e))throw TypeError(e+" is not a symbol");if(Q(Pj,e))return Pj[e]},useSetter:function(){Rj=!0},useSimple:function(){Rj=!1}}),P({target:"Object",stat:!0,forced:!oc,sham:!ka},{create:function(e,t){return void 0===t?ac(e):op(ac(e),t)},defineProperty:ph,defineProperties:op,getOwnPropertyDescriptor:pp}),P({target:"Object",stat:!0,forced:!oc},{getOwnPropertyNames:qp,getOwnPropertySymbols:Vj}),P({target:"Object",stat:!0,forced:R((function(){Bf.f(1)}))},{getOwnPropertySymbols:function(e){return Bf.f(Qa(e))}}),Tf){var Sw=!oc||R((function(){var e=sb();return"[null]"!=Tf([e])||"{}"!=Tf({a:e})||"{}"!=Tf(Object(e))}));P({target:"JSON",stat:!0,forced:Sw},{stringify:function(e,t,n){for(var r,i=[e],o=1;arguments.length>o;)i.push(arguments[o++]);if(r=t,(ha(t)||void 0!==e)&&!Uj(e))return fd(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!Uj(t))return t}),i[1]=t,Tf.apply(null,i)}})}sb.prototype[kp]||Ma(sb.prototype,kp,sb.prototype.valueOf),Ec(sb,"Symbol"),Ae[rb]=!0;var Tw=Ra.f,Mc=E.Symbol;if(ka&&"function"==typeof Mc&&(!("description"in Mc.prototype)||void 0!==Mc().description)){var rp={},Vf=function(){var e=1>arguments.length||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof Vf?new Mc(e):void 0===e?Mc():Mc(e);return""===e&&(rp[t]=!0),t};pn(Vf,Mc);var Xj=Vf.prototype=Mc.prototype;Xj.constructor=Vf;var Uw=Xj.toString,Vw="Symbol(test)"==String(Mc("test")),Ww=/^Symbol\((.*)\)[^)]+$/;Tw(Xj,"description",{configurable:!0,get:function(){var e=ha(this)?this.valueOf():this,t=Uw.call(e);return Q(rp,e)?"":""===(e=Vw?t.slice(7,-1):t.replace(Ww,"$1"))?void 0:e}}),P({global:!0,forced:!0},{Symbol:Vf})}oh("toStringTag"),Ec(Math,"Math",!0),Ec(E.JSON,"JSON",!0),function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=i(e)););if(e)return(t=Object.getOwnPropertyDescriptor(e,t)).get?t.get.call(n):t.value})(e,t,n||e)}var c=function(){function t(){e(this,t),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return n(t,[{key:"addEventListener",value:function(e,t,n){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push({callback:t,options:n})}},{key:"removeEventListener",value:function(e,t){if(e in this.listeners)for(var n=0,r=(e=this.listeners[e]).length;n<r;n++)if(e[n].callback===t){e.splice(n,1);break}}},{key:"dispatchEvent",value:function(e){if(e.type in this.listeners){for(var t=this.listeners[e.type].slice(),n=0,r=t.length;n<r;n++){var i=t[n];try{i.callback.call(this,e)}catch(e){Promise.resolve().then((function(){throw e}))}i.options&&i.options.once&&this.removeEventListener(e.type,i.callback)}return!e.defaultPrevented}}}]),t}(),u=function(t){function o(){e(this,o);var t=u.call(this);return t.listeners||c.call(a(t)),Object.defineProperty(a(t),"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(a(t),"onabort",{value:null,writable:!0,configurable:!0}),t}r(o,t);var u=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n=i(e);if(t){var r=i(this).constructor;n=Reflect.construct(n,arguments,r)}else n=n.apply(this,arguments);return!n||"object"!==aa(n)&&"function"!=typeof n?a(this):n}}(o);return n(o,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(e){"abort"===e.type&&(this.aborted=!0,"function"==typeof this.onabort&&this.onabort.call(this,e)),s(i(o.prototype),"dispatchEvent",this).call(this,e)}}]),o}(c),l=function(){function t(){e(this,t),Object.defineProperty(this,"signal",{value:new u,writable:!0,configurable:!0})}return n(t,[{key:"abort",value:function(){try{var e=new Event("abort")}catch(t){"undefined"!=typeof document?document.createEvent?(e=document.createEvent("Event")).initEvent("abort",!1,!1):(e=document.createEventObject()).type="abort":e={type:"abort",bubbles:!1,cancelable:!1}}this.signal.dispatchEvent(e)}},{key:"toString",value:function(){return"[object AbortController]"}}]),t}();"undefined"!=typeof Symbol&&Symbol.toStringTag&&(l.prototype[Symbol.toStringTag]="AbortController",u.prototype[Symbol.toStringTag]="AbortSignal"),function(e){if(e.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL){console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill");var t=!0}else t="function"==typeof e.Request&&!e.Request.prototype.hasOwnProperty("signal")||!e.AbortController;t&&(e.AbortController=l,e.AbortSignal=u)}("undefined"!=typeof self?self:Ya)}();var Xw=Math.floor,Yw=Math.log,Zw=Math.LOG2E;P({target:"Math",stat:!0},{clz32:function(e){return(e>>>=0)?31-Xw(Yw(e+.5)*Zw):32}});var $w=Math.log,ax=Math.LN2,ps=Math.clz32||function(e){return 31-$w(e>>>0)/ax|0},xd=String.fromCharCode,sp={}.toString,Yj=window.Uint8Array,Zj=Yj||Array,bx=sp.call((window.ArrayBuffer||Zj).prototype),ak;wl.prototype.decode=function(e){if(e=e&&e.buffer||e,sp.call(e)!==bx)throw Error("Failed to execute 'decode' on 'TextDecoder': The provided value is not of type '(ArrayBuffer or ArrayBufferView)'");for(var t="",n=0,r=0|(e=Yj?new Zj(e):e).length;n<r;n=n+32768|0)t+=xd.apply(0,e[Yj?"slice":"subarray"](n,n+32768|0));return t.replace(/[\xc0-\xff][\x80-\xbf]*/g,os)},window.TextDecoder||(window.TextDecoder=wl),xl.prototype.encode=function(e){for(var t=0|(e=void 0===e?"":(""+e).replace(/[\x80-\uD7ff\uDC00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]?/g,qs)).length,n=new Zj(t),r=0;r<t;r=r+1|0)n[r]=e.charCodeAt(r);return n},window.TextEncoder||(window.TextEncoder=xl),function(e){var t,n,r,i,o,a,s,c,u,l,h;!function(e){e.LOGIN="LOGIN",e.LOGIN_SUCCESS="LOGIN_SUCCESS",e.LOGIN_FAILURE="LOGIN_FAILURE",e.LOGIN_TIMEOUT="LOGIN_TIMEOUT",e.INTERRUPTED="INTERRUPTED",e.LOGOUT="LOGOUT",e.BANNED_BY_SERVER="BANNED_BY_SERVER",e.REMOTE_LOGIN="REMOTE_LOGIN"}(t||(t={})),e.ConnectionChangeReason=t,function(e){e.DISCONNECTED="DISCONNECTED",e.CONNECTING="CONNECTING",e.CONNECTED="CONNECTED",e.RECONNECTING="RECONNECTING",e.ABORTED="ABORTED"}(n||(n={})),e.ConnectionState=n,function(e){e.IDLE="IDLE",e.SENT_TO_REMOTE="SENT_TO_REMOTE",e.RECEIVED_BY_REMOTE="RECEIVED_BY_REMOTE",e.ACCEPTED_BY_REMOTE="ACCEPTED_BY_REMOTE",e.REFUSED_BY_REMOTE="REFUSED_BY_REMOTE",e.CANCELED="CANCELED",e.FAILURE="FAILURE"}(r||(r={})),e.LocalInvitationState=r,function(e){e.INVITATION_RECEIVED="INVITATION_RECEIVED",e.ACCEPT_SENT_TO_LOCAL="ACCEPT_SENT_TO_LOCAL",e.REFUSED="REFUSED",e.ACCEPTED="ACCEPTED",e.CANCELED="CANCELED",e.FAILURE="FAILURE"}(i||(i={})),e.RemoteInvitationState=i,function(e){e.UNKNOWN="UNKNOWN",e.PEER_NO_RESPONSE="PEER_NO_RESPONSE",e.INVITATION_EXPIRE="INVITATION_EXPIRE",e.PEER_OFFLINE="PEER_OFFLINE",e.NOT_LOGGEDIN="NOT_LOGGEDIN"}(o||(o={})),e.LocalInvitationFailureReason=o,function(e){e.UNKNOWN="UNKNOWN",e.PEER_OFFLINE="PEER_OFFLINE",e.ACCEPT_FAILURE="ACCEPT_FAILURE",e.INVITATION_EXPIRE="INVITATION_EXPIRE"}(a||(a={})),e.RemoteInvitationFailureReason=a,function(e){e.ONLINE="ONLINE",e.UNREACHABLE="UNREACHABLE",e.OFFLINE="OFFLINE"}(s||(s={})),e.PeerOnlineState=s,(c||(c={})).ONLINE_STATUS="ONLINE_STATUS",e.PeerSubscriptionOption=c,function(e){e.TEXT="TEXT",e.RAW="RAW",e.IMAGE="IMAGE",e.FILE="FILE"}(u||(u={})),e.MessageType=u,function(e){e.CN="CN",e.NA="NA",e.EU="EU",e.AS="AS",e.JP="JP",e.IN="IN",e.GLOB="GLOB",e.OC="OC",e.SA="SA",e.AF="AF",e.OVS="OVS"}(l||(l={})),e.LegacyAreaCode=l,function(e){e.GLOBAL="GLOBAL",e.INDIA="INDIA",e.JAPAN="JAPAN",e.ASIA="ASIA",e.EUROPE="EUROPE",e.CHINA="CHINA",e.NORTH_AMERICA="NORTH_AMERICA"}(h||(h={})),e.AreaCode=h}(ak||(ak={}));var S=ak;P({target:"Array",proto:!0},{includes:function(e){return mn(this,e,1<arguments.length?arguments[1]:void 0)}}),Ld("includes");var bk=function(e){if(Kj(e))throw TypeError("The method doesn't accept regular expressions");return e},cx=qa("match"),ck=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[cx]=!1,"/./"[e](t)}catch(e){}}return!1};P({target:"String",proto:!0,forced:!ck("includes")},{includes:function(e){return!!~String(jb(this)).indexOf(bk(e),1<arguments.length?arguments[1]:void 0)}});var od={RECONNECTING_AP_INTERVAL:2e3,RECONNECTING_AP_NUM:2,DISABLE_MESSAGE_COMPRESSION:!1,LOG_UPLOAD_INTERVAL:3e3,LOG_HANDLER:void 0};oh("iterator"),oh("asyncIterator");var dk=De("forEach")?[].forEach:function(e){return Jd(this,e,1<arguments.length?arguments[1]:void 0)},tp;for(tp in Hj){var up=E[tp],qh=up&&up.prototype;if(qh&&qh.forEach!==dk)try{Ma(qh,"forEach",dk)}catch(c){qh.forEach=dk}}var dx=[].reverse,vp=[1,2];P({target:"Array",proto:!0,forced:String(vp)===String(vp.reverse())},{reverse:function(){return fd(this)&&(this.length=this.length),dx.call(this)}});var x=$a((function(e){e=function(e){function t(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}function n(e,t,n,o){return t=Object.create((t&&t.prototype instanceof i?t:i).prototype),o=new d(o||[]),t._invoke=function(e,t,n){var i=E;return function(o,a){if(i===I)throw Error("Generator is already running");if(i===C){if("throw"===o)throw a;return p()}for(n.method=o,n.arg=a;;){if((o=n.delegate)&&(o=u(o,n))){if(o===S)continue;return o}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===E)throw i=C,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);if(i=I,"normal"===(o=r(e,t,n)).type){if(i=n.done?C:w,o.arg===S)continue;return{value:o.arg,done:n.done}}"throw"===o.type&&(i=C,n.method="throw",n.arg=o.arg)}}}(e,n,o),t}function r(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function i(){}function o(){}function a(){}function s(e){["next","throw","return"].forEach((function(n){t(e,n,(function(e){return this._invoke(n,e)}))}))}function c(e,t){function n(i,o,a,s){if("throw"!==(i=r(e[i],e,o)).type){var c=i.arg;return(i=c.value)&&"object"===aa(i)&&v.call(i,"__await")?t.resolve(i.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(i).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(i.arg)}var i;this._invoke=function(e,r){function o(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(o,o):o()}}function u(e,t){var n=e.iterator[t.method];if(n===g){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=g,u(e,t),"throw"===t.method))return S;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return S}return"throw"===(n=r(n,e.iterator,t.arg)).type?(t.method="throw",t.arg=n.arg,t.delegate=null,S):(n=n.arg)?n.done?(t[e.resultName]=n.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=g),t.delegate=null,S):n:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,S)}function l(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function h(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function d(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(l,this),this.reset(!0)}function f(e){if(e){var t=e[y];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1;return(t=function t(){for(;++n<e.length;)if(v.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=g,t.done=!0,t}).next=t}}return{next:p}}function p(){return{value:g,done:!0}}var g,A=Object.prototype,v=A.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},y=m.iterator||"@@iterator",b=m.asyncIterator||"@@asyncIterator",_=m.toStringTag||"@@toStringTag";try{t({},"")}catch(e){t=function(e,t,n){return e[t]=n}}e.wrap=n;var E="suspendedStart",w="suspendedYield",I="executing",C="completed",S={};(m={})[y]=function(){return this};var T=Object.getPrototypeOf;(T=T&&T(T(f([]))))&&T!==A&&v.call(T,y)&&(m=T);var R=a.prototype=i.prototype=Object.create(m);return o.prototype=R.constructor=a,a.constructor=o,o.displayName=t(a,_,"GeneratorFunction"),e.isGeneratorFunction=function(e){return!!(e="function"==typeof e&&e.constructor)&&(e===o||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,a):(e.__proto__=a,t(e,_,"GeneratorFunction")),e.prototype=Object.create(R),e},e.awrap=function(e){return{__await:e}},s(c.prototype),c.prototype[b]=function(){return this},e.AsyncIterator=c,e.async=function(t,r,i,o,a){void 0===a&&(a=Promise);var s=new c(n(t,r,i,o),a);return e.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},s(R),t(R,_,"Generator"),R[y]=function(){return this},R.toString=function(){return"[object Generator]"},e.keys=function(e){var t,n=[];for(t in e)n.push(t);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=f,d.prototype={constructor:d,reset:function(e){if(this.next=this.prev=0,this.sent=this._sent=g,this.done=!1,this.delegate=null,this.method="next",this.arg=g,this.tryEntries.forEach(h),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=g)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,r){return o.type="throw",o.arg=e,n.next=t,r&&(n.method="next",n.arg=g),!!r}if(this.done)throw e;for(var n=this,r=this.tryEntries.length-1;0<=r;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),s=v.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&v.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}return i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null),(n=i?i.completion:{}).type=e,n.arg=t,i?(this.method="next",this.next=i.finallyLoc,S):this.complete(n)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),S},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),h(n),S}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.tryLoc===e){if("throw"===(e=n.completion).type){var r=e.arg;h(n)}return r}}throw Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:f(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=g),S}},e}(e.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}})),wp=!R((function(){return Object.isExtensible(Object.preventExtensions({}))})),ek=$a((function(e){var t=Ra.f,n=ze("meta"),r=0,i=Object.isExtensible||function(){return!0},o=function(e){t(e,n,{value:{objectID:"O"+ ++r,weakData:{}}})},a=e.exports={REQUIRED:!1,fastKey:function(e,t){if(!ha(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!Q(e,n)){if(!i(e))return"F";if(!t)return"E";o(e)}return e[n].objectID},getWeakData:function(e,t){if(!Q(e,n)){if(!i(e))return!0;if(!t)return!1;o(e)}return e[n].weakData},onFreeze:function(e){return wp&&a.REQUIRED&&i(e)&&!Q(e,n)&&o(e),e}};Ae[n]=!0})),xp=function(e,t,n){var r=-1!==e.indexOf("Map"),i=-1!==e.indexOf("Weak"),o=r?"set":"add",a=E[e],s=a&&a.prototype,c=a,u={},l=function(e){var t=s[e];Ta(s,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(i&&!ha(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return i&&!ha(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(i&&!ha(e))&&t.call(this,0===e?0:e)}:function(e,n){return t.call(this,0===e?0:e,n),this})};if(nc(e,"function"!=typeof a||!(i||s.forEach&&!R((function(){(new a).entries().next()})))))c=n.getConstructor(t,e,r,o),ek.REQUIRED=!0;else if(nc(e,!0)){var h=new c,d=h[o](i?{}:-0,1)!=h,f=R((function(){h.has(1)})),p=Sg((function(e){new a(e)})),g=!i&&R((function(){for(var e=new a,t=5;t--;)e[o](t,t);return!e.has(-0)}));p||((c=t((function(t,n){return Gc(t,c,e),t=kh(new a,t,c),null!=n&&Wg(n,t[o],{that:t,AS_ENTRIES:r}),t}))).prototype=s,s.constructor=c),(f||g)&&(l("delete"),l("has"),r&&l("get")),(g||d)&&l(o),i&&s.clear&&delete s.clear}return u[e]=c,P({global:!0,forced:c!=a},u),Ec(c,e),i||n.setStrong(c,e,r),c},ex=Ra.f,yp=ek.fastKey,zp=Za.set,fk=Za.getterFor,Ap={getConstructor:function(e,t,n,r){var i=e((function(e,o){Gc(e,i,t),zp(e,{type:t,index:ac(null),first:void 0,last:void 0,size:0}),ka||(e.size=0),null!=o&&Wg(o,e[r],{that:e,AS_ENTRIES:n})})),o=fk(t),a=function(e,t,n){var r,i=o(e),a=s(e,t);return a?a.value=n:(i.last=a={index:r=yp(t,!0),key:t,value:n,previous:t=i.last,next:void 0,removed:!1},i.first||(i.first=a),t&&(t.next=a),ka?i.size++:e.size++,"F"!==r&&(i.index[r]=a)),e},s=function(e,t){e=o(e);var n=yp(t);if("F"!==n)return e.index[n];for(e=e.first;e;e=e.next)if(e.key==t)return e};return Hf(i.prototype,{clear:function(){for(var e=o(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,ka?e.size=0:this.size=0},delete:function(e){var t=o(this);if(e=s(this,e)){var n=e.next,r=e.previous;delete t.index[e.index],e.removed=!0,r&&(r.next=n),n&&(n.previous=r),t.first==e&&(t.first=n),t.last==e&&(t.last=r),ka?t.size--:this.size--}return!!e},forEach:function(e){for(var t,n=o(this),r=Id(e,1<arguments.length?arguments[1]:void 0,3);t=t?t.next:n.first;)for(r(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!s(this,e)}}),Hf(i.prototype,n?{get:function(e){return(e=s(this,e))&&e.value},set:function(e,t){return a(this,0===e?0:e,t)}}:{add:function(e){return a(this,e=0===e?0:e,e)}}),ka&&ex(i.prototype,"size",{get:function(){return o(this).size}}),i},setStrong:function(e,t,n){var r=t+" Iterator",i=fk(t),o=fk(r);aj(e,t,(function(e,t){zp(this,{type:r,target:e,state:i(e),kind:t,last:void 0})}),(function(){for(var e=o(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),If(t)}};xp("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),Ap);var fx=/^[\t\n\x0B\f\r \u00a0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff][\t\n\x0B\f\r \u00a0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff]*/,gx=/[\t\n\x0B\f\r \u00a0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff][\t\n\x0B\f\r \u00a0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff]*$/,gk=function(e){return function(t){return t=String(jb(t)),1&e&&(t=t.replace(fx,"")),2&e&&(t=t.replace(gx,"")),t}};gk(1),gk(2);var hk=gk(3),rh=E.parseInt,hx=/^[+-]?0[Xx]/,Bp=8!==rh("\t\n\v\f\r \u2028\u2029\ufeff08")||22!==rh("\t\n\v\f\r \u2028\u2029\ufeff0x16")?function(e,t){return e=hk(String(e)),rh(e,t>>>0||(hx.test(e)?16:10))}:rh;P({global:!0,forced:parseInt!=Bp},{parseInt:Bp});var ix=Hd.f,jx=Fb.f,kx=Ra.f,pd=E.Number,sh=pd.prototype,lx="Number"==Zb(ac(sh)),Cp=function(e){var t,n=lc(e,!1);if("string"==typeof n&&2<n.length)if(43===(e=(n=hk(n)).charCodeAt(0))||45===e){if(88===(e=n.charCodeAt(2))||120===e)return NaN}else if(48===e){switch(n.charCodeAt(1)){case 66:case 98:e=2;var r=49;break;case 79:case 111:e=8,r=55;break;default:return+n}var i=(n=n.slice(2)).length;for(t=0;t<i;t++){var o=n.charCodeAt(t);if(48>o||o>r)return NaN}return parseInt(n,e)}return+n};if(nc("Number",!pd(" 0o1")||!pd("0b1")||pd("+0x1"))){for(var Pd=function(e){var t=1>arguments.length?0:e,n=this;return n instanceof Pd&&(lx?R((function(){sh.valueOf.call(n)})):"Number"!=Zb(n))?kh(new pd(Cp(t)),n,Pd):Cp(t)},Dp=ka?ix(pd):"MAX_VALUE MIN_VALUE NaN NEGATIVE_INFINITY POSITIVE_INFINITY EPSILON isFinite isInteger isNaN isSafeInteger MAX_SAFE_INTEGER MIN_SAFE_INTEGER parseFloat parseInt isInteger fromString range".split(" "),ik=0,th;Dp.length>ik;ik++)Q(pd,th=Dp[ik])&&!Q(Pd,th)&&kx(Pd,th,jx(pd,th));Pd.prototype=sh,sh.constructor=Pd,Ta(E,"Number",Pd)}var Ep=qa("isConcatSpreadable"),mx=51<=hd||!R((function(){var e=[];return e[Ep]=!1,e.concat()[0]!==e})),nx=Ef("concat");P({target:"Array",proto:!0,forced:!mx||!nx},{concat:function(e){var t,n=Qa(this),r=Rg(n,0),i=0,o=-1;for(t=arguments.length;o<t;o++){var a=-1===o?n:arguments[o],s=a;if(ha(s)){var c=s[Ep];s=void 0!==c?!!c:fd(s)}else s=!1;if(s){if(9007199254740991<i+(c=ta(a.length)))throw TypeError("Maximum allowed index exceeded");for(s=0;s<c;s++,i++)s in a&&Fe(r,i,a[s])}else{if(9007199254740991<=i)throw TypeError("Maximum allowed index exceeded");Fe(r,i++,a)}}return r.length=i,r}});var jk=mc("Reflect","apply"),ox=Function.apply,px=!R((function(){jk((function(){}))}));P({target:"Reflect",stat:!0,forced:px},{apply:function(e,t,n){return yb(e),va(n),jk?jk(e,t,n):ox.call(e,t,n)}}),P({target:"Reflect",stat:!0},{ownKeys:on});var qx=Nj,rx=R((function(){return!Object.getOwnPropertyNames(1)}));P({target:"Object",stat:!0,forced:rx},{getOwnPropertyNames:qx});var Oe="object"===("undefined"==typeof Reflect?"undefined":aa(Reflect))?Reflect:null,Fp=Oe&&"function"==typeof Oe.apply?Oe.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)},sx=Oe&&"function"==typeof Oe.ownKeys?Oe.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)},Gp=Number.isNaN||function(e){return e!=e};ea.EventEmitter=ea,ea.prototype._events=void 0,ea.prototype._eventsCount=0,ea.prototype._maxListeners=void 0;var Hp=10;Object.defineProperty(ea,"defaultMaxListeners",{enumerable:!0,get:function(){return Hp},set:function(e){if("number"!=typeof e||0>e||Gp(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");Hp=e}}),ea.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},ea.prototype.setMaxListeners=function(e){if("number"!=typeof e||0>e||Gp(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},ea.prototype.getMaxListeners=function(){return void 0===this._maxListeners?ea.defaultMaxListeners:this._maxListeners},ea.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);n="error"===e;var r=this._events;if(void 0!==r)n=n&&void 0===r.error;else if(!n)return!1;if(n){var i;if(0<t.length&&(i=t[0]),i instanceof Error)throw i;throw(t=Error("Unhandled error."+(i?" ("+i.message+")":""))).context=i,t}if(void 0===(n=r[e]))return!1;if("function"==typeof n)Fp(n,this,t);else for(r=Bl(n,i=n.length),n=0;n<i;++n)Fp(r[n],this,t);return!0},ea.prototype.addListener=function(e,t){return yl(this,e,t,!1)},ea.prototype.on=ea.prototype.addListener,ea.prototype.prependListener=function(e,t){return yl(this,e,t,!0)},ea.prototype.once=function(e,t){return ng(t),this.on(e,zl(this,e,t)),this},ea.prototype.prependOnceListener=function(e,t){return ng(t),this.prependListener(e,zl(this,e,t)),this},ea.prototype.removeListener=function(e,t){var n;ng(t);var r=this._events;if(void 0===r)return this;var i=r[e];if(void 0===i)return this;if(i===t||i.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,i.listener||t));else if("function"!=typeof i){var o=-1;for(n=i.length-1;0<=n;n--)if(i[n]===t||i[n].listener===t){var a=i[n].listener;o=n;break}if(0>o)return this;if(0===o)i.shift();else{for(;o+1<i.length;o++)i[o]=i[o+1];i.pop()}1===i.length&&(r[e]=i[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},ea.prototype.off=ea.prototype.removeListener,ea.prototype.removeAllListeners=function(e){var t=this._events;if(void 0===t)return this;if(void 0===t.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==t[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete t[e]),this;if(0===arguments.length){var n=Object.keys(t);for(t=0;t<n.length;++t){var r=n[t];"removeListener"!==r&&this.removeAllListeners(r)}return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(n=t[e]))this.removeListener(e,n);else if(void 0!==n)for(t=n.length-1;0<=t;t--)this.removeListener(e,n[t]);return this},ea.prototype.listeners=function(e){return Al(this,e,!0)},ea.prototype.rawListeners=function(e){return Al(this,e,!1)},ea.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):Cl.call(e,t)},ea.prototype.listenerCount=Cl,ea.prototype.eventNames=function(){return 0<this._eventsCount?sx(this._events):[]},ea.once=function(e,t){return new Promise((function(n,r){function i(n){e.removeListener(t,o),r(n)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}Dl(e,t,o,{once:!0}),"error"!==t&&ss(e,i,{once:!0})}))};var Pe=Object.assign,Ip=Object.defineProperty,Jp=!Pe||R((function(){if(ka&&1!==Pe({b:1},Pe(Ip({},"a",{enumerable:!0,get:function(){Ip(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol();return e[n]=7,"abcdefghijklmnopqrst".split("").forEach((function(e){t[e]=e})),7!=Pe({},e)[n]||"abcdefghijklmnopqrst"!=Dc(Pe({},t)).join("")}))?function(e,t){for(var n=Qa(e),r=arguments.length,i=1,o=Bf.f,a=zf;r>i;)for(var s,c=Af(arguments[i++]),u=o?Dc(c).concat(o(c)):Dc(c),l=u.length,h=0;l>h;)s=u[h++],(!ka||a.call(c,s))&&(n[s]=c[s]);return n}:Pe;P({target:"Object",stat:!0,forced:Object.assign!==Jp},{assign:Jp}),xp("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),Ap);var tx=Math.log,ux=Math.LN2;P({target:"Math",stat:!0},{log2:function(e){return tx(e)/ux}});var vx=Ra.f,wx=Hd.f,xx=Za.enforce,yx=qa("match"),sc=E.RegExp,kk=sc.prototype,Wf=/a/g,lk=/a/g,mk=new sc(Wf)!==Wf;if(ka&&nc("RegExp",!mk||pc||R((function(){return lk[yx]=!1,sc(Wf)!=Wf||sc(lk)==lk||"/a/i"!=sc(Wf,"i")})))){for(var Nc=function(e,t){var n,r=this instanceof Nc,i=Kj(e),o=void 0===t;return!r&&i&&e.constructor===Nc&&o||(mk?i&&!o&&(e=e.source):e instanceof Nc&&(o&&(t=sj.call(e)),e=e.source),pc&&(n=!!t&&-1<t.indexOf("y"))&&(t=t.replace(/y/g,"")),e=kh(mk?new sc(e,t):sc(e,t),r?this:kk,Nc),pc&&n&&(xx(e).sticky=!0)),e},zx=function(e){e in Nc||vx(Nc,e,{configurable:!0,get:function(){return sc[e]},set:function(t){sc[e]=t}})},Kp=wx(sc),Lp=0;Kp.length>Lp;)zx(Kp[Lp++]);kk.constructor=Nc,Nc.prototype=kk,Ta(E,"RegExp",Nc)}If("RegExp"),Sf("Float32",(function(e){return function(t,n,r){return e(this,t,n,r)}})),Sf("Float64",(function(e){return function(t,n,r){return e(this,t,n,r)}})),Sf("Uint32",(function(e){return function(t,n,r){return e(this,t,n,r)}})),Sf("Uint16",(function(e){return function(t,n,r){return e(this,t,n,r)}}));var nk=function(e,t){return e===t?0:null==e?null==t?0:-1:null==t?null==e?0:1:"function"==typeof e.compare?e.compare(t):"function"==typeof t.compare?-t.compare(e):e<t?-1:e>t?1:0},ok=[],Mp=ok.sort,Ax=R((function(){ok.sort(void 0)})),Bx=R((function(){ok.sort(null)})),Cx=De("sort");P({target:"Array",proto:!0,forced:Ax||!Bx||!Cx},{sort:function(e){return void 0===e?Mp.call(Qa(this)):Mp.call(Qa(this),yb(e))}});var Np=Object.getPrototypeOf({}),Xf=function(e,t){var n;return e===t||(null==e?e==t:"function"===aa(e.equiv)?e.equiv(t):null==t?e==t:"function"===aa(t.equiv)?t.equiv(e):"string"!==aa(e)&&"string"!==aa(t)&&(null!=(n=Object.getPrototypeOf(e))&&n!==Np||null!=(n=Object.getPrototypeOf(t))&&n!==Np?"function"!==aa(e)&&void 0!==e.length&&"function"!==aa(t)&&void 0!==t.length?Ex(e,t):e instanceof Set&&t instanceof Set?Fx(e,t):e instanceof Map&&t instanceof Map?Gx(e,t):e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():e instanceof RegExp&&t instanceof RegExp?e.toString()===t.toString():e!=e&&t!=t:Dx(e,t)))},Ex=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Xf,r=e.length;if(r===t.length)for(;0<=--r&&n(e[r],t[r]););return 0>r},Fx=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Xf;return e.size===t.size&&n(I(e.keys()).sort(),I(t.keys()).sort())},Gx=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Xf;return e.size===t.size&&n(I(e).sort(),I(t).sort())},Dx=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Xf;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var r in e)if(!t.hasOwnProperty(r)||!n(e[r],t[r]))return!1;return!0},Op=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(e){return void 0!==e?": "+e:""};return function(n){function r(n){return X(this,r),i.call(this,e(n)+t(n))}la(r,n);var i=ma(r);return r}(ef(Error))},Hx=Op((function(){return"illegal argument(s)"})),uh=function(e){throw new Hx(e)},pk=Op((function(){return"index out of bounds"})),Pp=1/4294967295,Ix=function(){function e(){X(this,e)}return Ha(e,[{key:"float",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;return this.int()*Pp*e}},{key:"norm",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;return 2*(this.int()*Pp-.5)*e}},{key:"minmax",value:function(e,t){return this.float()*(t-e)+e}}]),e}(),qk=Math.random,Jx=new(function(e){function t(){return X(this,t),n.apply(this,arguments)}la(t,e);var n=ma(t);return Ha(t,[{key:"int",value:function(){return 4294967296*qk()>>>0}},{key:"float",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;return qk()*e}},{key:"norm",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;return 2*(qk()-.5)*e}}]),t}(Ix)),Uh=Symbol(),Gl=function(){},Kx=ek.onFreeze,rk=Object.freeze,Lx=R((function(){rk(1)}));P({target:"Object",stat:!0,forced:Lx,sham:!wp},{freeze:function(e){return rk&&ha(e)?rk(Kx(e)):e}});var Mx=De("reduce"),Nx=!Hc&&79<hd&&83>hd;P({target:"Array",proto:!0,forced:!Mx||Nx},{reduce:function(e){return So(this,e,arguments.length,1<arguments.length?arguments[1]:void 0)}});var Fl=function(e){return null!=e&&"function"==typeof e.xform?e.xform():e},og=function(){function e(t){X(this,e),this.value=t}return Ha(e,[{key:"deref",value:function(){return this.value}}]),e}(),Vh=function(e){return e instanceof og?e.deref():e},us=function(e,t){return[e,function(e){return e},t]},Ox=x.mark((function(e,t){var n,r,i,o,a,s;return x.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:n=Fl(e)(ts()),r=n[1],i=n[2],o=0;case 4:if(!(o<t.length)){c.next=15;break}if(a=t[o],!((s=i([],a))instanceof og)){c.next=10;break}return c.delegateYield(Vh(r(s.deref())),"t0",9);case 9:return c.abrupt("return");case 10:if(!s.length){c.next=12;break}return c.delegateYield(s,"t1",12);case 12:o++,c.next=4;break;case 15:return c.delegateYield(Vh(r([])),"t2",16);case 16:case"end":return c.stop()}}),Ox)})),vs=x.mark(El),ws=function(e,t){return[e[0],e[1],t]},Qp=!0;"findIndex"in[]&&Array(1).findIndex((function(){Qp=!1})),P({target:"Array",proto:!0,forced:Qp},{findIndex:function(e){return yn(this,e,1<arguments.length?arguments[1]:void 0)}}),Ld("findIndex"),P({target:"Array",proto:!0},{fill:Aj}),Ld("fill");var Px=function(){function e(t){X(this,e),this._length=0,t&&this.into(t)}return Ha(e,[{key:"length",get:function(){return this._length}},{key:"copy",value:function(){return new e(this)}},{key:"empty",value:function(){return new e}},{key:"clear",value:function(){this.release()}},{key:"release",value:function(){for(var e,t=this.head;t;)e=t.next,delete t.value,delete t.prev,delete t.next,t=e;return delete this.head,delete this.tail,this._length=0,!0}},{key:"compare",value:function(e){var t=this._length;if(t<e._length)return-1;if(t>e._length)return 1;if(0===t)return 0;t=this.head,e=e.head;for(var n=0;t&&0==n;)n=nk(t.value,e.value),t=t.next,e=e.next;return n}},{key:"equiv",value:function(t){if(!(t instanceof e||null!=t&&"function"!=typeof t&&void 0!==t.length)||this._length!==t.length)return!1;if(!this._length||this===t)return!0;for(var n=this.head,r=0;r<t.length;r++){if(!Xf(n.value,t[r]))return!1;n=n.next}return!0}},{key:Symbol.iterator,value:x.mark((function e(){var t;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.head;case 1:if(!t){e.next=7;break}return e.next=4,t.value;case 4:t=t.next,e.next=1;break;case 7:case"end":return e.stop()}}),e,this)}))},{key:"seq",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.length;if(!(e>=t||0>e)){e=this.nthCell(e);var n=this.nthCell(t-1);return t=function e(t){return{first:function(){return t.value},next:function(){return t!==n&&t.next?e(t.next):void 0}}},e?t(e):void 0}}},{key:"cycle",value:x.mark((function e(){return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this,"t0",2);case 2:e.next=0;break;case 4:case"end":return e.stop()}}),e,this)}))},{key:"$reduce",value:function(e,t){for(var n=this.head;n&&!(t instanceof og);)t=e(t,n.value),n=n.next;return t}},{key:"drop",value:function(){var e=this.head;if(e)return(this.head=e.next)?delete this.head.prev:delete this.tail,this._length--,e.value}},{key:"cons",value:function(e){return e={value:e,next:this.head},this.head?this.head.prev=e:this.tail=e,this.head=e,this._length++,this}},{key:"insertBefore",value:function(e,t){return e||uh("cell is undefined"),t={value:t,next:e,prev:e.prev},e.prev?e.prev.next=t:this.head=t,e.prev=t,this._length++,this}},{key:"insertAfter",value:function(e,t){return e||uh("cell is undefined"),t={value:t,next:e.next,prev:e},e.next?e.next.prev=t:this.tail=t,e.next=t,this._length++,this}},{key:"insertBeforeNth",value:function(e,t){if(0>e&&(e+=this._length),0>=e)return this.cons(t);if(0>e||e>=this._length)throw new pk(e);return this.insertBefore(this.nthCellUnsafe(e),t)}},{key:"insertAfterNth",value:function(e,t){if(0>e&&(e+=this._length),e>=this._length-1)return this.push(t);if(0>e||e>=this._length)throw new pk(e);return this.insertAfter(this.nthCellUnsafe(e),t)}},{key:"insertSorted",value:function(e,t){t=t||nk;for(var n=this.head;n;){if(0>=t(e,n.value))return this.insertBefore(n,e);n=n.next}return this.push(e)}},{key:"find",value:function(e){for(var t=this.head;t;){if(t.value===e)return t;t=t.next}}},{key:"findWith",value:function(e){for(var t=this.head;t;){if(e(t.value))return t;t=t.next}}},{key:"concat",value:function(){for(var e=this.copy(),t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];for(t=0;t<n.length;t++)e.into(n[t]);return e}},{key:"into",value:function(e){for(var t=0;t<e.length;t++)this.push(e[t])}},{key:"slice",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.length;t=0>t?t+this._length:t,n=0>n?n+this._length:n,(0>t||0>n)&&uh("invalid indices: ${from} / ${to}");for(var r=new e,i=this.nthCell(t);i&&++t<=n;)r.push(i.value),i=i.next;return r}},{key:"splice",value:function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length?arguments[2]:void 0;if("number"==typeof t){if(0>t&&(t+=this._length),0>t||t>=this._length)throw new pk(t);var i=this.nthCellUnsafe(t)}else i=t;var o=new e;if(0<n)for(;i&&0<n--;)this.remove(i),o.push(i.value),i=i.next;else i&&(i=i.next);if(r)if(i)for(n=0;n<r.length;n++)this.insertBefore(i,r[n]);else for(i=0;i<r.length;i++)this.push(r[i]);return o}},{key:"remove",value:function(e){return e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev,this._length--,this}},{key:"swap",value:function(e,t){if(e!==t){var n=e.value;e.value=t.value,t.value=n}return this}},{key:"push",value:function(e){return this.tail?(e={value:e,prev:this.tail},this.tail=this.tail.next=e,this._length++,this):this.cons(e)}},{key:"pop",value:function(){var e=this.tail;if(e)return(this.tail=e.prev)?delete this.tail.next:delete this.head,this._length--,e.value}},{key:"first",value:function(){return this.head&&this.head.value}},{key:"peek",value:function(){return this.tail&&this.tail.value}},{key:"setHead",value:function(e){return this.head?(this.head.value=e,this):this.cons(e)}},{key:"setTail",value:function(e){return this.tail?(this.tail.value=e,this):this.push(e)}},{key:"setNth",value:function(e,t){var n=this.nthCell(e);return!n&&uh("index out of bounds: ".concat(e)),n.value=t,this}},{key:"nth",value:function(e,t){return(e=this.nthCell(e))?e.value:t}},{key:"nthCell",value:function(e){if(0>e&&(e+=this._length),!(0>e||e>=this._length))return this.nthCellUnsafe(e)}},{key:"rotateLeft",value:function(){switch(this._length){case 0:case 1:return this;case 2:return this.swap(this.head,this.tail);default:return this.push(this.drop())}}},{key:"rotateRight",value:function(){switch(this._length){case 0:case 1:return this;case 2:return this.swap(this.head,this.tail);default:var e=this.peek();return this.pop(),this.cons(e)}}},{key:"map",value:function(t){for(var n=new e,r=this.head;r;)n.push(t(r.value)),r=r.next;return n}},{key:"filter",value:function(t){for(var n=new e,r=this.head;r;)t(r.value)&&n.push(r.value),r=r.next;return n}},{key:"reduce",value:function(e,t){for(var n=this.head;n;)t=e(t,n.value),n=n.next;return t}},{key:"shuffle",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Jx;if(2>this._length)return this;for(e=null!=e?e:Math.ceil(1.5*Math.log2(this._length));0<e;e--)for(var n=this.head;n;){var r=n.next;.5>t.float()?this.asHead(n):this.asTail(n),n=r}return this}},{key:"sort",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:nk;if(!this._length)return this;for(var t=1;;){var n=this.head;this.tail=this.head=void 0;for(var r=0;n;){r++;for(var i=n,o=0,a=0;a<t&&(o++,i=i.next);a++);for(a=t;0<o||0<a&&i;){if(0===o){var s=i;i=i.next,a--}else i&&0!==a?0>=e(n.value,i.value)?(s=n,n=n.next,o--):(s=i,i=i.next,a--):(s=n,n=n.next,o--);this.tail?this.tail.next=s:this.head=s,s.prev=this.tail,this.tail=s}n=i}if(this.tail.next=void 0,1>=r)return this;t*=2}}},{key:"reverse",value:function(){for(var e=this.head,t=this.tail,n=(this._length>>>1)+(1&this._length);e&&t&&0<n;){var r=e.value;e.value=t.value,t.value=r,e=e.next,t=t.prev,n--}return this}},{key:"asHead",value:function(e){return e===this.head||(this.remove(e),this.head.prev=e,e.next=this.head,e.prev=void 0,this.head=e,this._length++),this}},{key:"asTail",value:function(e){return e===this.tail||(this.remove(e),this.tail.next=e,e.prev=this.tail,e.next=void 0,this.tail=e,this._length++),this}},{key:"toString",value:function(){for(var e=[],t=this.head;t;)e.push(String(t.value)),t=t.next;return e.join(", ")}},{key:"toJSON",value:function(){return I(this)}},{key:"nthCellUnsafe",value:function(e){if(e<=this._length>>1)var t=this.head,n="next";else t=this.tail,n="prev",e=this._length-e-1;for(;0<e--&&t;)t=t[n];return t}}]),e}(),tc=function(){function e(t,n){X(this,e),n=Object.assign({maxlen:1/0,maxsize:1/0,map:function(){return new Map},ksize:function(){return 0},vsize:function(){return 0}},n),this.map=n.map(),this.items=new Px,this._size=0,this.opts=n,t&&this.into(t)}return Ha(e,[{key:"length",get:function(){return this.items.length}},{key:"size",get:function(){return this._size}},{key:Symbol.iterator,value:function(){return this.entries()}},{key:"entries",value:function(){return pg((function(e){return[e.k,e]}),this.items)}},{key:"keys",value:function(){return pg((function(e){return e.k}),this.items)}},{key:"values",value:function(){return pg((function(e){return e.v}),this.items)}},{key:"copy",value:function(){var e=this.empty();e.items=this.items.copy();for(var t=e.items.head;t;)e.map.set(t.value.k,t),t=t.next;return e}},{key:"empty",value:function(){return new e(null,this.opts)}},{key:"release",value:function(){this._size=0,this.map.clear();var e=this.opts.release;if(e){for(var t;t=this.items.drop();)e(t.k,t.v);return!0}return this.items.release()}},{key:"has",value:function(e){return this.map.has(e)}},{key:"get",value:function(e,t){return(e=this.map.get(e))?this.resetEntry(e):t}},{key:"set",value:function(e,t){var n=this.opts.ksize(e)+this.opts.vsize(t),r=this.map.get(e);return this._size+=Math.max(0,n-(r?r.value.s:0)),this.ensureSize()&&this.doSetEntry(r,e,t,n),t}},{key:"into",value:function(e){for(var t=0;t<e.length;t++){var n=e[t];this.set(n[0],n[1])}return this}},{key:"getSet",value:function(e,t){var n=this,r=this.map.get(e);return r?Promise.resolve(this.resetEntry(r)):t().then((function(t){return n.set(e,t)}))}},{key:"delete",value:function(e){return!!(e=this.map.get(e))&&(this.removeEntry(e),!0)}},{key:"resetEntry",value:function(e){return this.items.asTail(e),e.value.v}},{key:"ensureSize",value:function(){for(var e=this.opts.release,t=this.opts.maxsize,n=this.opts.maxlen;this._size>t||this.length>=n;){var r=this.items.drop();if(!r)return!1;this.map.delete(r.k),e&&e(r.k,r.v),this._size-=r.s}return!0}},{key:"removeEntry",value:function(e){var t=e.value;this.map.delete(t.k),this.items.remove(e),this.opts.release&&this.opts.release(t.k,t.v),this._size-=t.s}},{key:"doSetEntry",value:function(e,t,n,r){e?(e.value.v=n,e.value.s=r,this.items.asTail(e)):(this.items.push({k:t,v:n,s:r}),this.map.set(t,this.items.tail))}}]),e}(),Qx=function(e){function t(e,r){return X(this,t),r=Object.assign({ttl:36e5},r),n.call(this,e,r)}la(t,e);var n=ma(t);return Ha(t,[{key:"empty",value:function(){return new t(null,this.opts)}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"get",value:function(e,t){if(e=this.map.get(e)){if(e.value.t>=Date.now())return this.resetEntry(e);this.removeEntry(e)}return t}},{key:"set",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.opts.ttl,r=this.opts.ksize(e)+this.opts.vsize(t),i=this.map.get(e);return this._size+=Math.max(0,r-(i?i.value.s:0)),this.ensureSize()&&(n=Date.now()+n,i?(i.value.v=t,i.value.s=r,i.value.t=n,this.items.asTail(i)):(this.items.push({k:e,v:t,s:r,t:n}),this.map.set(e,this.items.tail))),t}},{key:"getSet",value:function(e,t){var n=this,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.opts.ttl,i=this.get(e);return i?Promise.resolve(i):t().then((function(t){return n.set(e,t,r)}))}},{key:"prune",value:function(){for(var e=Date.now(),t=this.items.head;t;)t.value.t<e&&this.removeEntry(t),t=t.next}},{key:"ensureSize",value:function(){for(var e=this.opts.maxsize,n=this.opts.maxlen,r=Date.now(),i=this.items.head;i&&(this._size>e||this.length>=n);)i.value.t<r&&this.removeEntry(i),i=i.next;return Sh(wd(t.prototype),"ensureSize",this).call(this)}}]),t}(tc),Rp="object"==aa(Ya)&&Ya&&Ya.Object===Object&&Ya,Rx="object"==("undefined"==typeof self?"undefined":aa(self))&&self&&self.Object===Object&&self,Cb=Rp||Rx||Function("return this")(),Pb=Cb.Symbol,Sp=Object.prototype,Sx=Sp.hasOwnProperty,Tx=Sp.toString,Yf=Pb?Pb.toStringTag:void 0,Ux=Object.prototype.toString,Tp=Pb?Pb.toStringTag:void 0,Qd=function(e){if(null==e)e=void 0===e?"[object Undefined]":"[object Null]";else if(Tp&&Tp in Object(e)){var t=Sx.call(e,Yf),n=e[Yf];try{e[Yf]=void 0;var r=!0}catch(e){}var i=Tx.call(e);r&&(t?e[Yf]=n:delete e[Yf]),e=i}else e=Ux.call(e);return e},lb=function(e){var t=aa(e);return null!=e&&("object"==t||"function"==t)},pi=function(e){return!!lb(e)&&("[object Function]"==(e=Qd(e))||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e)},sk=Cb["__core-js_shared__"],Up=(e=/[^.]+$/.exec(sk&&sk.keys&&sk.keys.IE_PROTO||""),e?"Symbol(src)_1."+e:""),Vx=Function.prototype.toString,Rd=function(e){if(null!=e){try{return Vx.call(e)}catch(e){}return e+""}return""},Wx=/^\[object .+?Constructor\]$/,Xx=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Sd=function(e,t){return e=null==e?void 0:e[t],!lb(e)||Up&&Up in e||!(pi(e)?Xx:Wx).test(Rd(e))?void 0:e},Zf=Sd(Object,"create"),Yx=Object.prototype.hasOwnProperty,Zx=Object.prototype.hasOwnProperty,e;zd.prototype.clear=function(){this.__data__=Zf?Zf(null):{},this.size=0},zd.prototype.delete=function(e){return e=this.has(e)&&delete this.__data__[e],this.size-=e?1:0,e},zd.prototype.get=function(e){var t=this.__data__;return Zf?"__lodash_hash_undefined__"===(e=t[e])?void 0:e:Yx.call(t,e)?t[e]:void 0},zd.prototype.has=function(e){var t=this.__data__;return Zf?void 0!==t[e]:Zx.call(t,e)},zd.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Zf&&void 0===t?"__lodash_hash_undefined__":t,this};var $f=function(e,t){return e===t||e!=e&&t!=t},vh=function(e,t){for(var n=e.length;n--;)if($f(e[n][0],t))return n;return-1},$x=Array.prototype.splice;be.prototype.clear=function(){this.__data__=[],this.size=0},be.prototype.delete=function(e){var t=this.__data__;return!(0>(e=vh(t,e))||(e==t.length-1?t.pop():$x.call(t,e,1),--this.size,0))},be.prototype.get=function(e){var t=this.__data__;return 0>(e=vh(t,e))?void 0:t[e][1]},be.prototype.has=function(e){return-1<vh(this.__data__,e)},be.prototype.set=function(e,t){var n=this.__data__,r=vh(n,e);return 0>r?(++this.size,n.push([e,t])):n[r][1]=t,this};var rg=be,ag=Sd(Cb,"Map"),wh=function(e,t){e=e.__data__;var n=aa(t);return("string"==n||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==t:null===t)?e["string"==typeof t?"string":"hash"]:e.map};ce.prototype.clear=function(){this.size=0,this.__data__={hash:new zd,map:new(ag||rg),string:new zd}},ce.prototype.delete=function(e){return e=wh(this,e).delete(e),this.size-=e?1:0,e},ce.prototype.get=function(e){return wh(this,e).get(e)},ce.prototype.has=function(e){return wh(this,e).has(e)},ce.prototype.set=function(e,t){var n=wh(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};var qg=ce;gf.prototype.add=gf.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},gf.prototype.has=function(e){return this.__data__.has(e)};var Vp=function(e,t,n,r){var i=e.length;for(n+=r?1:-1;r?n--:++n<i;)if(t(e[n],n,e))return n;return-1},ay=function(e){return e!=e},by=function(e,t){var n;if(n=!(null==e||!e.length)){if(t==t)e:{n=-1;for(var r=e.length;++n<r;)if(e[n]===t){e=n;break e}e=-1}else e=Vp(e,ay,0);n=-1<e}return n},cy=function(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1},dy=function(e,t){return e.has(t)},Qe=Sd(Cb,"Set"),ey=function(){},tk=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n},fy=1/0,gy=Qe&&1/tk(new Qe([,-0]))[1]==fy?function(e){return new Qe(e)}:ey,uk=function(e,t,n){var r=-1,i=by,o=e.length,a=!0,s=[],c=s;if(n)a=!1,i=cy;else if(200<=o){if(i=t?null:gy(e))return tk(i);a=!1,i=dy,c=new gf}else c=t?[]:s;e:for(;++r<o;){var u=e[r],l=t?t(u):u;if(u=n||0!==u?u:0,a&&l==l){for(var h=c.length;h--;)if(c[h]===l)continue e;t&&c.push(l),s.push(u)}else i(c,l,n)||(c!==s&&c.push(l),s.push(u))}return s},Wp=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},ge=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i};de.prototype.clear=function(){this.__data__=new rg,this.size=0},de.prototype.delete=function(e){var t=this.__data__;return e=t.delete(e),this.size=t.size,e},de.prototype.get=function(e){return this.__data__.get(e)},de.prototype.has=function(e){return this.__data__.has(e)},de.prototype.set=function(e,t){var n=this.__data__;if(n instanceof rg){var r=n.__data__;if(!ag||199>r.length)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new qg(r)}return n.set(e,t),this.size=n.size,this};var fe=de,Fs=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e},xh=function(){try{var e=Sd(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),bg=function(e,t,n){"__proto__"==t&&xh?xh(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},hy=Object.prototype.hasOwnProperty,Ll=function(e,t,n){var r=e[t];hy.call(e,t)&&$f(r,n)&&(void 0!==n||t in e)||bg(e,t,n)},qe=function(e,t,n,r){var i=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var s=t[o],c=r?r(n[s],e[s],s,n,e):void 0;void 0===c&&(c=e[s]),i?bg(n,s,c):Ll(n,s,c)}return n},gc=function(e){return null!=e&&"object"==aa(e)},Xp=function(e){return gc(e)&&"[object Arguments]"==Qd(e)},Yp=Object.prototype,iy=Yp.hasOwnProperty,jy=Yp.propertyIsEnumerable,rf=Xp(function(){return arguments}())?Xp:function(e){return gc(e)&&iy.call(e,"callee")&&!jy.call(e,"callee")},Va=Array.isArray,ky=function(){return!1},jf=$a((function(e,t){var n=(t=t&&!t.nodeType&&t)&&e&&!e.nodeType&&e;t=n&&n.exports===t?Cb.Buffer:void 0,e.exports=(t?t.isBuffer:void 0)||ky})),ly=/^(?:0|[1-9]\d*)$/,vk=function(e,t){var n=aa(e);return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&ly.test(e))&&-1<e&&0==e%1&&e<t},wk=function(e){return"number"==typeof e&&-1<e&&0==e%1&&9007199254740991>=e},Ea={};Ea["[object Float32Array]"]=Ea["[object Float64Array]"]=Ea["[object Int8Array]"]=Ea["[object Int16Array]"]=Ea["[object Int32Array]"]=Ea["[object Uint8Array]"]=Ea["[object Uint8ClampedArray]"]=Ea["[object Uint16Array]"]=Ea["[object Uint32Array]"]=!0,Ea["[object Arguments]"]=Ea["[object Array]"]=Ea["[object ArrayBuffer]"]=Ea["[object Boolean]"]=Ea["[object DataView]"]=Ea["[object Date]"]=Ea["[object Error]"]=Ea["[object Function]"]=Ea["[object Map]"]=Ea["[object Number]"]=Ea["[object Object]"]=Ea["[object RegExp]"]=Ea["[object Set]"]=Ea["[object String]"]=Ea["[object WeakMap]"]=!1;var my=function(e){return gc(e)&&wk(e.length)&&!!Ea[Qd(e)]},yh=function(e){return function(t){return e(t)}},Re=$a((function(e,t){var n=t&&!t.nodeType&&t;n=(t=n&&e&&!e.nodeType&&e)&&t.exports===n&&Rp.process;e:{try{var r=t&&t.require&&t.require("util").types;if(r){var i=r;break e}i=n&&n.binding&&n.binding("util");break e}catch(e){}i=void 0}e.exports=i})),Zp=Re&&Re.isTypedArray,ai=Zp?yh(Zp):my,ny=Object.prototype.hasOwnProperty,$p=function(e,t){var n=Va(e),r=!n&&rf(e),i=!n&&!r&&jf(e),o=!n&&!r&&!i&&ai(e);if(n=n||r||i||o){r=e.length;for(var a=String,s=-1,c=Array(r);++s<r;)c[s]=a(s);r=c}else r=[];for(var u in a=r.length,e)!t&&!ny.call(e,u)||n&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||vk(u,a))||r.push(u);return r},oy=Object.prototype,xk=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||oy)},aq=function(e,t){return function(n){return e(t(n))}},py=aq(Object.keys,Object),qy=Object.prototype.hasOwnProperty,Ed=function(e){return null!=e&&wk(e.length)&&!pi(e)},Ad=function(e){if(Ed(e))e=$p(e);else if(xk(e)){var t,n=[];for(t in Object(e))qy.call(e,t)&&"constructor"!=t&&n.push(t);e=n}else e=py(e);return e},Bs=function(e,t){return e&&qe(t,Ad(t),e)},ry=Object.prototype.hasOwnProperty,kf=function(e){if(Ed(e))e=$p(e,!0);else if(lb(e)){var t=xk(e),n=[];for(r in e)("constructor"!=r||!t&&ry.call(e,r))&&n.push(r);e=n}else{var r=[];if(null!=e)for(t in Object(e))r.push(t);e=r}return e},zs=function(e,t){return e&&qe(t,kf(t),e)},Il=$a((function(e,t){var n=(t=t&&!t.nodeType&&t)&&e&&!e.nodeType&&e,r=(t=n&&n.exports===t?Cb.Buffer:void 0)?t.allocUnsafe:void 0;e.exports=function(e,t){return t?e.slice():(t=e.length,t=r?r(t):new e.constructor(t),e.copy(t),t)}})),Wh=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t},sy=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o},bq=function(){return[]},ty=Object.prototype.propertyIsEnumerable,cq=Object.getOwnPropertySymbols,yk=cq?function(e){return null==e?[]:(e=Object(e),sy(cq(e),(function(t){return ty.call(e,t)})))}:bq,As=function(e,t){return qe(e,yk(e),t)},$h=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e},zk=aq(Object.getPrototypeOf,Object),dq=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)$h(t,yk(e)),e=zk(e);return t}:bq,ys=function(e,t){return qe(e,dq(e),t)},eq=function(e,t,n){return t=t(e),Va(e)?t:$h(t,n(e))},Xh=function(e){return eq(e,Ad,yk)},Kl=function(e){return eq(e,kf,dq)},Ak=Sd(Cb,"DataView"),Bk=Sd(Cb,"Promise"),Ck=Sd(Cb,"WeakMap"),uy=Rd(Ak),vy=Rd(ag),wy=Rd(Bk),xy=Rd(Qe),yy=Rd(Ck),Td=Qd;(Ak&&"[object DataView]"!=Td(new Ak(new ArrayBuffer(1)))||ag&&"[object Map]"!=Td(new ag)||Bk&&"[object Promise]"!=Td(Bk.resolve())||Qe&&"[object Set]"!=Td(new Qe)||Ck&&"[object WeakMap]"!=Td(new Ck))&&(Td=function(e){var t=Qd(e);if(e=(e="[object Object]"==t?e.constructor:void 0)?Rd(e):"")switch(e){case uy:return"[object DataView]";case vy:return"[object Map]";case wy:return"[object Promise]";case xy:return"[object Set]";case yy:return"[object WeakMap]"}return t});var hf=Td,zy=Object.prototype.hasOwnProperty,xs=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&zy.call(e,"index")&&(n.index=e.index,n.input=e.input),n},zh=Cb.Uint8Array,Dk=function(e){var t=new e.constructor(e.byteLength);return new zh(t).set(new zh(e)),t},Ay=/\w*$/,fq=Pb?Pb.prototype:void 0,gq=fq?fq.valueOf:void 0,um=function(e,t){return t=t?Dk(e.buffer):e.buffer,new e.constructor(t,e.byteOffset,e.length)},Cs=function(e,t,n){var r=e.constructor;switch(t){case"[object ArrayBuffer]":return Dk(e);case"[object Boolean]":case"[object Date]":return new r(+e);case"[object DataView]":return t=n?Dk(e.buffer):e.buffer,new e.constructor(t,e.byteOffset,e.byteLength);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return um(e,n);case"[object Map]":case"[object Set]":return new r;case"[object Number]":case"[object String]":return new r(e);case"[object RegExp]":return(t=new e.constructor(e.source,Ay.exec(e))).lastIndex=e.lastIndex,t;case"[object Symbol]":return gq?Object(gq.call(e)):{}}},hq=Object.create,By=function(){function e(){}return function(t){return lb(t)?hq?hq(t):(e.prototype=t,t=new e,e.prototype=void 0,t):{}}}(),Jl=function(e){return"function"!=typeof e.constructor||xk(e)?{}:By(zk(e))},Cy=function(e){return gc(e)&&"[object Map]"==hf(e)},iq=Re&&Re.isMap,Es=iq?yh(iq):Cy,Dy=function(e){return gc(e)&&"[object Set]"==hf(e)},jq=Re&&Re.isSet,Ds=jq?yh(jq):Dy,wa={};wa["[object Arguments]"]=wa["[object Array]"]=wa["[object ArrayBuffer]"]=wa["[object DataView]"]=wa["[object Boolean]"]=wa["[object Date]"]=wa["[object Float32Array]"]=wa["[object Float64Array]"]=wa["[object Int8Array]"]=wa["[object Int16Array]"]=wa["[object Int32Array]"]=wa["[object Map]"]=wa["[object Number]"]=wa["[object Object]"]=wa["[object RegExp]"]=wa["[object Set]"]=wa["[object String]"]=wa["[object Symbol]"]=wa["[object Uint8Array]"]=wa["[object Uint8ClampedArray]"]=wa["[object Uint16Array]"]=wa["[object Uint32Array]"]=!0,wa["[object Error]"]=wa["[object Function]"]=wa["[object WeakMap]"]=!1;var he=function(e){return"symbol"==aa(e)||gc(e)&&"[object Symbol]"==Qd(e)},Ey=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Fy=/^\w*$/,Ek=function(e,t){if(Va(e))return!1;var n=aa(e);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!he(e))||Fy.test(e)||!Ey.test(e)||null!=t&&e in Object(t)};Yh.Cache=qg;var Gy=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Hy=/\\(\\)?/g,Iy=function(e){var t=(e=Yh(e,(function(e){return 500===t.size&&t.clear(),e}))).cache;return e}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Gy,(function(e,n,r,i){t.push(r?i.replace(Hy,"$1"):n||e)})),t})),Gs=1/0,kq=Pb?Pb.prototype:void 0,Nl=kq?kq.toString:void 0,Ah=function(e,t){return Va(e)?e:Ek(e,t)?[e]:Iy(null==e?"":Ml(e))},Jy=1/0,cg=function(e){if("string"==typeof e||he(e))return e;var t=e+"";return"0"==t&&1/e==-Jy?"-0":t},Bh=function(e,t){for(var n=0,r=(t=Ah(t,e)).length;null!=e&&n<r;)e=e[cg(t[n++])];return n&&n==r?e:void 0},Ky=function(e,t){if(!(2>(t=Ah(t,e)).length)){var n=t,r=0,i=-1,o=-1,a=n.length;for(0>r&&(r=-r>a?0:a+r),0>(i=i>a?a:i)&&(i+=a),a=r>i?0:i-r>>>0,r>>>=0,i=Array(a);++o<a;)i[o]=n[o+r];e=Bh(e,i)}return(n=null==e)||(n=null==t?0:t.length,n=delete e[cg(n?t[n-1]:void 0)]),n},lq=Function.prototype.toString,Ly=Object.prototype.hasOwnProperty,My=lq.call(Object),vm=function(e){return!(!gc(e)||"[object Object]"!=Qd(e))&&(null===(e=zk(e))||"function"==typeof(e=Ly.call(e,"constructor")&&e.constructor)&&e instanceof e&&lq.call(e)==My)},Ny=function(e){return vm(e)?void 0:e},mq=Pb?Pb.isConcatSpreadable:void 0,Hs=function(e){return Va(e)||rf(e)||!!(mq&&e&&e[mq])},Oy=function(e){return null!=e&&e.length?Zh(e,1):[]},Py=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},nq=Math.max,oq=function(e,t,n){return t=nq(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=nq(r.length-t,0),a=Array(o);++i<o;)a[i]=r[t+i];for(i=-1,o=Array(t+1);++i<t;)o[i]=r[i];return o[t]=n(a),Py(e,this,o)}},Qy=function(e){return function(){return e}},Ch=function(e){return e},Ry=Date.now,pq=function(e){var t=0,n=0;return function(){var r=Ry(),i=16-(r-n);if(n=r,0<i){if(800<=++t)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(xh?function(e,t){return xh(e,"toString",{configurable:!0,enumerable:!1,value:Qy(t),writable:!0})}:Ch),Fk=function(e){return pq(oq(e,void 0,Oy),e+"")}((function(e,t){var n={};if(null==e)return n;var r=!1;t=ge(t,(function(t){return t=Ah(t,e),r||(r=1<t.length),t})),qe(e,Kl(e),n),r&&(n=ee(n,7,Ny));for(var i=t.length;i--;)Ky(n,t[i]);return n})),Sy=function(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(r,a,n(a),e)}return r},tm=function(e,t,n){for(var r=-1,i=Object(e),o=(n=n(e)).length;o--;){var a=n[++r];if(!1===t(i[a],a,i))break}return e},qq=function(e,t){return e&&tm(e,t,Ad)},Gk=function(e,t){return function(t,n){if(null==t)return t;if(!Ed(t))return e(t,n);for(var r=t.length,i=-1,o=Object(t);++i<r&&!1!==n(o[i],i,o););return t}}(qq),Ty=function(e,t,n,r){return Gk(e,(function(e,i,o){t(r,e,n(e),o)})),r},rq=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1},Ol=function(e,t,n,r,i,o){var a=1&n,s=e.length,c=t.length;if(s!=c&&!(a&&c>s))return!1;c=o.get(e);var u=o.get(t);if(c&&u)return c==t&&u==e;c=-1,u=!0;var l=2&n?new gf:void 0;for(o.set(e,t),o.set(t,e);++c<s;){var h=e[c],d=t[c];if(r)var f=a?r(d,h,c,t,e,o):r(h,d,c,e,t,o);if(void 0!==f){if(f)continue;u=!1;break}if(l){if(!rq(t,(function(e,t){if(!l.has(t)&&(h===e||i(h,e,n,r,o)))return l.push(t)}))){u=!1;break}}else if(h!==d&&!i(h,d,n,r,o)){u=!1;break}}return o.delete(e),o.delete(t),u},Uy=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n},sq=Pb?Pb.prototype:void 0,Hk=sq?sq.valueOf:void 0,Is=function(e,t,n,r,i,o,a){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)break;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":if(e.byteLength!=t.byteLength||!o(new zh(e),new zh(t)))break;return!0;case"[object Boolean]":case"[object Date]":case"[object Number]":return $f(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=Uy;case"[object Set]":if(s||(s=tk),e.size!=t.size&&!(1&r))break;return(n=a.get(e))?n==t:(r|=2,a.set(e,t),t=Ol(s(e),s(t),r,i,o,a),a.delete(e),t);case"[object Symbol]":if(Hk)return Hk.call(e)==Hk.call(t)}return!1},Js=Object.prototype.hasOwnProperty,Pl=Object.prototype.hasOwnProperty,Vy=function(e,t,n,r){var i=n.length,o=i,a=!r;if(null==e)return!o;for(e=Object(e);i--;){var s=n[i];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<o;){var c=(s=n[i])[0],u=e[c],l=s[1];if(a&&s[2]){if(void 0===u&&!(c in e))return!1}else{if(s=new fe,r)var h=r(u,l,c,e,t,s);if(void 0===h?!ie(l,u,3,r,s):!h)return!1}}return!0},Wy=function(e){for(var t=Ad(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,i==i&&!lb(i)]}return t},tq=function(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in Object(n))}},Xy=function(e){var t=Wy(e);return 1==t.length&&t[0][2]?tq(t[0][0],t[0][1]):function(n){return n===e||Vy(n,e,t)}},Yy=function(e,t){return Ek(e)&&t==t&&!lb(t)?tq(cg(e),t):function(n){var r=null==n?void 0:Bh(n,e);if(void 0===(r=void 0===r?void 0:r)&&r===t){if(r=null!=n){for(var i=-1,o=(r=Ah(r=e,n)).length,a=!1;++i<o;){var s=cg(r[i]);if(!(a=null!=n&&null!=n&&s in Object(n)))break;n=n[s]}r=a||++i!=o?a:!!(o=null==n?0:n.length)&&wk(o)&&vk(s,o)&&(Va(n)||rf(n))}s=r}else s=ie(t,r,3);return s}},Zy=function(e){return function(t){return null==t?void 0:t[e]}},$y=function(e){return function(t){return Bh(t,e)}},Se=function(e){return"function"==typeof e?e:null==e?Ch:"object"==aa(e)?Va(e)?Yy(e[0],e[1]):Xy(e):Ek(e)?Zy(cg(e)):$y(e)},Ik=function(e,t){return function(t,n){return(Va(t)?Sy:Ty)(t,e,Se(n),{})}}((function(e,t,n){bg(e,n,t)})),uc=function(e,t){var n={};return t=Se(t),qq(e,(function(e,r,i){bg(n,r,t(e,r,i))})),n};P({target:"String",proto:!0,forced:R((function(){var e="".sub('"');return e!==e.toLowerCase()||3<e.split('"').length}))},{sub:function(){return"<sub>"+String(jb(this))+"</sub>"}});var U=xa,Qb=null;try{Qb=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(c){}xa.prototype.__isLong__,Object.defineProperty(xa.prototype,"__isLong__",{value:!0}),xa.isLong=mb;var Rl={},Ql={};xa.fromInt=Bd,xa.fromNumber=Gb,xa.fromBits=ya;var sg=Math.pow;xa.fromString=bi,xa.fromValue=Wb;var je=4294967296,Sl=je*je,Ul=Sl/2,uq=Bd(16777216),Hb=Bd(0);xa.ZERO=Hb;var Cd=Bd(0,!0);xa.UZERO=Cd;var Te=Bd(1);xa.ONE=Te;var vq=Bd(1,!0);xa.UONE=vq;var Jk=Bd(-1);xa.NEG_ONE=Jk;var Vl=ya(-1,2147483647,!1);xa.MAX_VALUE=Vl;var Tl=ya(-1,-1,!0);xa.MAX_UNSIGNED_VALUE=Tl;var nb=ya(0,-2147483648,!1);xa.MIN_VALUE=nb;var G=xa.prototype;G.toInt=function(){return this.unsigned?this.low>>>0:this.low},G.toNumber=function(){return this.unsigned?(this.high>>>0)*je+(this.low>>>0):this.high*je+(this.low>>>0)},G.toString=function(e){if(2>(e=e||10)||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(nb)){var t=Gb(e),n=this.div(t);return t=n.mul(t).sub(this),n.toString(e)+t.toInt().toString(e)}return"-"+this.neg().toString(e)}n=Gb(sg(e,6),this.unsigned),t=this;for(var r="";;){var i=t.div(n),o=(t.sub(i.mul(n)).toInt()>>>0).toString(e);if((t=i).isZero())return o+r;for(;6>o.length;)o="0"+o;r=""+o+r}},G.getHighBits=function(){return this.high},G.getHighBitsUnsigned=function(){return this.high>>>0},G.getLowBits=function(){return this.low},G.getLowBitsUnsigned=function(){return this.low>>>0},G.getNumBitsAbs=function(){if(this.isNegative())return this.eq(nb)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;0<t&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},G.isZero=function(){return 0===this.high&&0===this.low},G.eqz=G.isZero,G.isNegative=function(){return!this.unsigned&&0>this.high},G.isPositive=function(){return this.unsigned||0<=this.high},G.isOdd=function(){return 1==(1&this.low)},G.isEven=function(){return 0==(1&this.low)},G.equals=function(e){return mb(e)||(e=Wb(e)),(this.unsigned===e.unsigned||1!=this.high>>>31||1!=e.high>>>31)&&this.high===e.high&&this.low===e.low},G.eq=G.equals,G.notEquals=function(e){return!this.eq(e)},G.neq=G.notEquals,G.ne=G.notEquals,G.lessThan=function(e){return 0>this.comp(e)},G.lt=G.lessThan,G.lessThanOrEqual=function(e){return 0>=this.comp(e)},G.lte=G.lessThanOrEqual,G.le=G.lessThanOrEqual,G.greaterThan=function(e){return 0<this.comp(e)},G.gt=G.greaterThan,G.greaterThanOrEqual=function(e){return 0<=this.comp(e)},G.gte=G.greaterThanOrEqual,G.ge=G.greaterThanOrEqual,G.compare=function(e){if(mb(e)||(e=Wb(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},G.comp=G.compare,G.negate=function(){return!this.unsigned&&this.eq(nb)?nb:this.not().add(Te)},G.neg=G.negate,G.add=function(e){mb(e)||(e=Wb(e));var t=this.high>>>16,n=65535&this.high,r=this.low>>>16,i=e.high>>>16,o=65535&e.high,a=e.low>>>16;return r=(a=((e=(65535&this.low)+(65535&e.low))>>>16)+(r+a))>>>16,ya((65535&a)<<16|65535&e,(t=((r+=n+o)>>>16)+(t+i)&65535)<<16|65535&r,this.unsigned)},G.subtract=function(e){return mb(e)||(e=Wb(e)),this.add(e.neg())},G.sub=G.subtract,G.multiply=function(e){if(this.isZero())return Hb;if(mb(e)||(e=Wb(e)),Qb){var t=Qb.mul(this.low,this.high,e.low,e.high);return ya(t,Qb.get_high(),this.unsigned)}if(e.isZero())return Hb;if(this.eq(nb))return e.isOdd()?nb:Hb;if(e.eq(nb))return this.isOdd()?nb:Hb;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(uq)&&e.lt(uq))return Gb(this.toNumber()*e.toNumber(),this.unsigned);t=this.high>>>16;var n=65535&this.high,r=this.low>>>16,i=65535&this.low,o=e.high>>>16,a=65535&e.high,s=e.low>>>16,c=i*(e=65535&e.low),u=(c>>>16)+r*e,l=u>>>16;l+=(u=(65535&u)+i*s)>>>16;var h=(l+=n*e)>>>16;return ya((65535&u)<<16|65535&c,(h=(h+=(l=(65535&l)+r*s)>>>16)+((l=(65535&l)+i*a)>>>16)+(t*e+n*s+r*a+i*o)&65535)<<16|65535&l,this.unsigned)},G.mul=G.multiply,G.divide=function(e){if(mb(e)||(e=Wb(e)),e.isZero())throw Error("division by zero");if(Qb)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?ya(e=(this.unsigned?Qb.div_u:Qb.div_s)(this.low,this.high,e.low,e.high),Qb.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?Cd:Hb;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return Cd;if(e.gt(this.shru(1)))return vq;var t=Cd}else{if(this.eq(nb)){if(e.eq(Te)||e.eq(Jk))return nb;if(e.eq(nb))return Te;var n=this.shr(1).div(e).shl(1);if(n.eq(Hb))return e.isNegative()?Te:Jk;var r=this.sub(e.mul(n));return n.add(r.div(e))}if(e.eq(nb))return this.unsigned?Cd:Hb;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();t=Hb}for(r=this;r.gte(e);){n=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));var i=Math.ceil(Math.log(n)/Math.LN2);i=48>=i?1:sg(2,i-48);for(var o=Gb(n),a=o.mul(e);a.isNegative()||a.gt(r);)a=(o=Gb(n-=i,this.unsigned)).mul(e);o.isZero()&&(o=Te),t=t.add(o),r=r.sub(a)}return t},G.div=G.divide,G.modulo=function(e){return mb(e)||(e=Wb(e)),Qb?ya(e=(this.unsigned?Qb.rem_u:Qb.rem_s)(this.low,this.high,e.low,e.high),Qb.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},G.mod=G.modulo,G.rem=G.modulo,G.not=function(){return ya(~this.low,~this.high,this.unsigned)},G.and=function(e){return mb(e)||(e=Wb(e)),ya(this.low&e.low,this.high&e.high,this.unsigned)},G.or=function(e){return mb(e)||(e=Wb(e)),ya(this.low|e.low,this.high|e.high,this.unsigned)},G.xor=function(e){return mb(e)||(e=Wb(e)),ya(this.low^e.low,this.high^e.high,this.unsigned)},G.shiftLeft=function(e){return mb(e)&&(e=e.toInt()),0==(e&=63)?this:32>e?ya(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):ya(0,this.low<<e-32,this.unsigned)},G.shl=G.shiftLeft,G.shiftRight=function(e){return mb(e)&&(e=e.toInt()),0==(e&=63)?this:32>e?ya(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):ya(this.high>>e-32,0<=this.high?0:-1,this.unsigned)},G.shr=G.shiftRight,G.shiftRightUnsigned=function(e){if(mb(e)&&(e=e.toInt()),0==(e&=63))return this;var t=this.high;return 32>e?ya(this.low>>>e|t<<32-e,t>>>e,this.unsigned):ya(32===e?t:t>>>e-32,0,this.unsigned)},G.shru=G.shiftRightUnsigned,G.shr_u=G.shiftRightUnsigned,G.toSigned=function(){return this.unsigned?ya(this.low,this.high,!1):this},G.toUnsigned=function(){return this.unsigned?this:ya(this.low,this.high,!0)},G.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},G.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},G.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},xa.fromBytes=function(e,t,n){return n?xa.fromBytesLE(e,t):xa.fromBytesBE(e,t)},xa.fromBytesLE=function(e,t){return new xa(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},xa.fromBytesBE=function(e,t){return new xa(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)};var ci=function(e,t){return(ci=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},Kk=!1,Ib={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e?console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+Error().stack):Kk&&console.log("RxJS: Back to a better error behavior. Thank you. <3"),Kk=e},get useDeprecatedSynchronousErrorHandling(){return Kk}},Dh={closed:!0,next:function(e){},error:function(e){if(Ib.useDeprecatedSynchronousErrorHandling)throw e;le(e)},complete:function(){}},Jb=Array.isArray||function(e){return e&&"number"==typeof e.length},lf=function(){function e(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}(),Na=function(){function e(e){this.closed=!1,this._subscriptions=this._parentOrParents=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}return e.prototype.unsubscribe=function(){if(!this.closed){var t=this._parentOrParents,n=this._ctorUnsubscribe,r=this._unsubscribe,i=this._subscriptions;if(this.closed=!0,this._subscriptions=this._parentOrParents=null,t instanceof e)t.remove(this);else if(null!==t)for(var o=0;o<t.length;++o)t[o].remove(this);if(ke(r)){n&&(this._unsubscribe=void 0);try{r.call(this)}catch(e){var a=e instanceof lf?Wl(e.errors):[e]}}if(Jb(i))for(o=-1,t=i.length;++o<t;)if(di(n=i[o]))try{n.unsubscribe()}catch(e){a=a||[],e instanceof lf?a=a.concat(Wl(e.errors)):a.push(e)}if(a)throw new lf(a)}},e.prototype.add=function(t){var n=t;if(!t)return e.EMPTY;switch(aa(t)){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;n instanceof e||(t=n,(n=new e)._subscriptions=[t]);break;default:throw Error("unrecognized teardown "+t+" added to Subscription.")}if(null===(t=n._parentOrParents))n._parentOrParents=this;else if(t instanceof e){if(t===this)return n;n._parentOrParents=[t,this]}else{if(-1!==t.indexOf(this))return n;t.push(this)}return null===(t=this._subscriptions)?this._subscriptions=[n]:t.push(n),n},e.prototype.remove=function(e){var t=this._subscriptions;t&&-1!==(e=t.indexOf(e))&&t.splice(e,1)},e.EMPTY=function(e){return e.closed=!0,e}(new e),e}(),Eh="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),ia=function(e){function t(n,r,i){var o=e.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=Dh;break;case 1:if(!n){o.destination=Dh;break}if("object"===aa(n)){n instanceof t?(o.syncErrorThrowable=n.syncErrorThrowable,o.destination=n,n.add(o)):(o.syncErrorThrowable=!0,o.destination=new wq(o,n));break}default:o.syncErrorThrowable=!0,o.destination=new wq(o,n,r,i)}return o}return O(t,e),t.prototype[Eh]=function(){return this},t.create=function(e,n,r){return(e=new t(e,n,r)).syncErrorThrowable=!1,e},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.isStopped=this.closed=!1,this._parentOrParents=e,this},t}(Na),wq=function(e){function t(t,n,r,i){var o=e.call(this)||this;if(o._parentSubscriber=t,t=o,ke(n))var a=n;else n&&(a=n.next,r=n.error,i=n.complete,n!==Dh&&(ke((t=Object.create(n)).unsubscribe)&&o.add(t.unsubscribe.bind(t)),t.unsubscribe=o.unsubscribe.bind(o)));return o._context=t,o._next=a,o._error=r,o._complete=i,o}return O(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;Ib.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=Ib.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?this.__tryOrSetError(t,this._error,e):this.__tryOrUnsub(this._error,e),this.unsubscribe();else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):le(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;le(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};Ib.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,n):this.__tryOrUnsub(n)}this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),Ib.useDeprecatedSynchronousErrorHandling)throw e;le(e)}},t.prototype.__tryOrSetError=function(e,t,n){if(!Ib.useDeprecatedSynchronousErrorHandling)throw Error("bad call");try{t.call(this._context,n)}catch(t){return Ib.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0):le(t),!0}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._parentSubscriber=this._context=null,e.unsubscribe()},t}(ia),me="function"==typeof Symbol&&Symbol.observable||"@@observable",W=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r=this.operator;e:{if(e){if(e instanceof ia)break e;if(e[Eh]){e=e[Eh]();break e}}e=e||t||n?new ia(e,t,n):new ia(Dh)}if(r?e.add(r.call(e,this.source)):e.add(this.source||Ib.useDeprecatedSynchronousErrorHandling&&!e.syncErrorThrowable?this._subscribe(e):this._trySubscribe(e)),Ib.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable&&(e.syncErrorThrowable=!1,e.syncErrorThrown))throw e.syncErrorValue;return e},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){Ib.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),ei(e)?e.error(t):console.warn(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=Yl(t))((function(t,r){var i=n.subscribe((function(t){try{e(t)}catch(e){r(e),i&&i.unsubscribe()}}),r,t)}))},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[me]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:Xl(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=Yl(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}(),qd=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}(),xq=function(e){function t(t,n){var r=e.call(this)||this;return r.subject=t,r.subscriber=n,r.closed=!1,r}return O(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;this.subject=null,!t||0===t.length||e.isStopped||e.closed||-1!==(e=t.indexOf(this.subscriber))&&t.splice(e,1)}},t}(Na),yq=function(e){function t(t){var n=e.call(this,t)||this;return n.destination=t,n}return O(t,e),t}(ia),Pa=function(e){function t(){var t=e.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return O(t,e),t.prototype[Eh]=function(){return new yq(this)},t.prototype.lift=function(e){var t=new zq(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new qd;if(!this.isStopped){var t=this.observers,n=t.length;t=t.slice();for(var r=0;r<n;r++)t[r].next(e)}},t.prototype.error=function(e){if(this.closed)throw new qd;this.hasError=!0,this.thrownError=e,this.isStopped=!0;var t=this.observers,n=t.length;t=t.slice();for(var r=0;r<n;r++)t[r].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new qd;this.isStopped=!0;var e=this.observers,t=e.length;e=e.slice();for(var n=0;n<t;n++)e[n].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.closed=this.isStopped=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new qd;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new qd;return this.hasError?(e.error(this.thrownError),Na.EMPTY):this.isStopped?(e.complete(),Na.EMPTY):(this.observers.push(e),new xq(this,e))},t.prototype.asObservable=function(){var e=new W;return e.source=this,e},t.create=function(e,t){return new zq(e,t)},t}(W),zq=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return O(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):Na.EMPTY},t}(Pa),Ks=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,t){var n=this.connectable;return n._refCount++,e=new az(e,n),t=t.subscribe(e),e.closed||(e.connection=n.connect()),t},e}(),az=function(e){function t(t,n){return(t=e.call(this,t)||this).connectable=n,t}return O(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;0>=t?this.connection=null:(e._refCount=t-1,1<t?this.connection=null:(t=this.connection,e=e._connection,this.connection=null,!e||t&&e!==t||e.unsubscribe()))}else this.connection=null},t}(ia),Aq=function(e){function t(t,n){var r=e.call(this)||this;return r.source=t,r.subjectFactory=n,r._refCount=0,r._isComplete=!1,r}return O(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new Na).add(this.source.subscribe(new bz(this.getSubject(),this))),e.closed&&(this._connection=null,e=Na.EMPTY)),e},t.prototype.refCount=function(){return Zl()(this)},t}(W),xt=function(){var e=Aq.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:e._subscribe},_isComplete:{value:e._isComplete,writable:!0},getSubject:{value:e.getSubject},connect:{value:e.connect},refCount:{value:e.refCount}}}(),bz=function(e){function t(t,n){return(t=e.call(this,t)||this).connectable=n,t}return O(t,e),t.prototype._error=function(t){this._unsubscribe(),e.prototype._error.call(this,t)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}},t}(yq);!function(e){function t(t,n){return(t=e.call(this,t)||this).connectable=n,t}O(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;0>=t?this.connection=null:(e._refCount=t-1,1<t?this.connection=null:(t=this.connection,e=e._connection,this.connection=null,!e||t&&e!==t||e.unsubscribe()))}else this.connection=null}}(ia),function(e){function t(t,n,r,i,o){return(t=e.call(this,t)||this).keySelector=n,t.elementSelector=r,t.durationSelector=i,t.subjectSelector=o,t.groups=null,t.attemptedToUnsubscribe=!1,t.count=0,t}O(t,e),t.prototype._next=function(e){try{var t=this.keySelector(e)}catch(e){return void this.error(e)}this._group(e,t)},t.prototype._group=function(e,t){var n=this.groups;n||(n=this.groups=new Map);var r=n.get(t);if(this.elementSelector)try{var i=this.elementSelector(e)}catch(e){this.error(e)}else i=e;if(!r&&(r=this.subjectSelector?this.subjectSelector():new Pa,n.set(t,r),e=new Lk(t,r,this),this.destination.next(e),this.durationSelector)){e=void 0;try{e=this.durationSelector(new Lk(t,r))}catch(e){return void this.error(e)}this.add(e.subscribe(new cz(t,r,this)))}r.closed||r.next(i)},t.prototype._error=function(e){var t=this.groups;t&&(t.forEach((function(t,n){t.error(e)})),t.clear()),this.destination.error(e)},t.prototype._complete=function(){var e=this.groups;e&&(e.forEach((function(e,t){e.complete()})),e.clear()),this.destination.complete()},t.prototype.removeGroup=function(e){this.groups.delete(e)},t.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&e.prototype.unsubscribe.call(this))}}(ia);var cz=function(e){function t(t,n,r){var i=e.call(this,n)||this;return i.key=t,i.group=n,i.parent=r,i}return O(t,e),t.prototype._next=function(e){this.complete()},t.prototype._unsubscribe=function(){var e=this.parent,t=this.key;this.key=this.parent=null,e&&e.removeGroup(t)},t}(ia),Lk=function(e){function t(t,n,r){var i=e.call(this)||this;return i.key=t,i.groupSubject=n,i.refCountSubscription=r,i}return O(t,e),t.prototype._subscribe=function(e){var t=new Na,n=this.refCountSubscription,r=this.groupSubject;return n&&!n.closed&&t.add(new dz(n)),t.add(r.subscribe(e)),t},t}(W),dz=function(e){function t(t){var n=e.call(this)||this;return n.parent=t,t.count++,n}return O(t,e),t.prototype.unsubscribe=function(){var t=this.parent;t.closed||this.closed||(e.prototype.unsubscribe.call(this),--t.count,0===t.count&&t.attemptedToUnsubscribe&&t.unsubscribe())},t}(Na),ez=function(e){function t(t){var n=e.call(this)||this;return n._value=t,n}return O(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return n&&!n.closed&&t.next(this._value),n},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new qd;return this._value},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(Pa),dg=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.pending=!1,r}return O(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e,e=this.id;var n=this.scheduler;return null!=e&&(this.id=this.recycleAsyncId(n,e,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(n,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)},t.prototype.execute=function(e,t){return this.closed?Error("executing a cancelled action"):(this.pending=!1,(e=this._execute(e,t))?e:void(!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))))},t.prototype._execute=function(e,t){t=!1;var n=void 0;try{this.work(e)}catch(e){t=!0,n=!!e&&e||Error(e)}if(t)return this.unsubscribe(),n},t.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.state=this.work=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},t}(function(e){function t(t,n){return e.call(this)||this}return O(t,e),t.prototype.schedule=function(e,t){return this},t}(Na)),fz=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return O(t,e),t.prototype.schedule=function(t,n){return void 0===n&&(n=0),0<n?e.prototype.schedule.call(this,t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,n){return 0<n||this.closed?e.prototype.execute.call(this,t,n):this._execute(t,n)},t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&0<r||null===r&&0<this.delay?e.prototype.requestAsyncId.call(this,t,n,r):t.flush(this)},t}(dg),Mk=function(){function e(t,n){void 0===n&&(n=e.now),this.SchedulerAction=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(n,t)},e.now=function(){return Date.now()},e}(),eg=function(e){function t(n,r){void 0===r&&(r=Mk.now);var i=e.call(this,n,(function(){return t.delegate&&t.delegate!==i?t.delegate.now():r()}))||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return O(t,e),t.prototype.schedule=function(n,r,i){return void 0===r&&(r=0),t.delegate&&t.delegate!==this?t.delegate.schedule(n,r,i):e.prototype.schedule.call(this,n,r,i)},t.prototype.flush=function(e){var t=this.actions;if(this.active)t.push(e);else{var n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}(Mk),fg=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return O(t,e),t}(eg))(fz),vb=new W((function(e){return e.complete()})),$l=function(e){return function(t){for(var n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.complete()}},Nk;!function(e){e.NEXT="N",e.ERROR="E",e.COMPLETE="C"}(Nk||(Nk={}));var Ue=function(){function e(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}return e.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},e.prototype.do=function(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}},e.prototype.accept=function(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)},e.prototype.toObservable=function(){switch(this.kind){case"N":return fb(this.value);case"E":return Y(this.error);case"C":return mf()}throw Error("unexpected notification kind value")},e.createNext=function(t){return void 0!==t?new e("N",t):e.undefinedValueNotification},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e}(),Os=function(){function e(e,t){void 0===t&&(t=0),this.scheduler=e,this.delay=t}return e.prototype.call=function(e,t){return t.subscribe(new Bq(e,this.scheduler,this.delay))},e}(),Bq=function(e){function t(t,n,r){return void 0===r&&(r=0),(t=e.call(this,t)||this).scheduler=n,t.delay=r,t}return O(t,e),t.dispatch=function(e){e.notification.observe(e.destination),this.unsubscribe()},t.prototype.scheduleMessage=function(e){this.destination.add(this.scheduler.schedule(t.dispatch,this.delay,new gz(e,this.destination)))},t.prototype._next=function(e){this.scheduleMessage(Ue.createNext(e))},t.prototype._error=function(e){this.scheduleMessage(Ue.createError(e)),this.unsubscribe()},t.prototype._complete=function(){this.scheduleMessage(Ue.createComplete()),this.unsubscribe()},t}(ia),gz=function(e,t){this.notification=e,this.destination=t},pe=function(e){function t(t,n,r){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY);var i=e.call(this)||this;return i.scheduler=r,i._events=[],i._infiniteTimeWindow=!1,i._bufferSize=1>t?1:t,i._windowTime=1>n?1:n,n===Number.POSITIVE_INFINITY?(i._infiniteTimeWindow=!0,i.next=i.nextInfiniteTimeWindow):i.next=i.nextTimeWindow,i}return O(t,e),t.prototype.nextInfiniteTimeWindow=function(t){if(!this.isStopped){var n=this._events;n.push(t),n.length>this._bufferSize&&n.shift()}e.prototype.next.call(this,t)},t.prototype.nextTimeWindow=function(t){this.isStopped||(this._events.push(new hz(this._getNow(),t)),this._trimBufferThenGetEvents()),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){var t=this._infiniteTimeWindow,n=t?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;if(this.closed)throw new qd;if(this.isStopped||this.hasError)var o=Na.EMPTY;else this.observers.push(e),o=new xq(this,e);if(r&&e.add(e=new Bq(e,r)),t)for(t=0;t<i&&!e.closed;t++)e.next(n[t]);else for(t=0;t<i&&!e.closed;t++)e.next(n[t].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),o},t.prototype._getNow=function(){return(this.scheduler||fg).now()},t.prototype._trimBufferThenGetEvents=function(){for(var e=this._getNow(),t=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,o=0;o<i&&!(e-r[o].time<n);)o++;return i>t&&(o=Math.max(o,i-t)),0<o&&r.splice(0,o),r},t}(Pa),hz=function(e,t){this.time=e,this.value=t},of=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.value=null,t.hasNext=!1,t.hasCompleted=!1,t}return O(t,e),t.prototype._subscribe=function(t){return this.hasError?(t.error(this.thrownError),Na.EMPTY):this.hasCompleted&&this.hasNext?(t.next(this.value),t.complete(),Na.EMPTY):e.prototype._subscribe.call(this,t)},t.prototype.next=function(e){this.hasCompleted||(this.value=e,this.hasNext=!0)},t.prototype.error=function(t){this.hasCompleted||e.prototype.error.call(this,t)},t.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&e.prototype.next.call(this,this.value),e.prototype.complete.call(this)},t}(Pa),iz=1,jz=Promise.resolve(),hi={},Cq={setImmediate:function(e){var t=iz++;return hi[t]=!0,jz.then((function(){return am(t)&&e()})),t},clearImmediate:function(e){am(e)}},kz=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return O(t,e),t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&0<r?e.prototype.requestAsyncId.call(this,t,n,r):(t.actions.push(this),t.scheduled||(t.scheduled=Cq.setImmediate(t.flush.bind(t,null))))},t.prototype.recycleAsyncId=function(t,n,r){if(void 0===r&&(r=0),null!==r&&0<r||null===r&&0<this.delay)return e.prototype.recycleAsyncId.call(this,t,n,r);0===t.actions.length&&(Cq.clearImmediate(n),t.scheduled=void 0)},t}(dg),qi=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return O(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,n=this.actions,r=-1,i=n.length;e=e||n.shift();do{if(t=e.execute(e.state,e.delay))break}while(++r<i&&(e=n.shift()));if(this.active=!1,t){for(;++r<i&&(e=n.shift());)e.unsubscribe();throw t}},t}(eg))(kz),lz=qi,Ok=new eg(dg),ad=Ok,mz=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return O(t,e),t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&0<r?e.prototype.requestAsyncId.call(this,t,n,r):(t.actions.push(this),t.scheduled||(t.scheduled=requestAnimationFrame((function(){return t.flush(null)}))))},t.prototype.recycleAsyncId=function(t,n,r){if(void 0===r&&(r=0),null!==r&&0<r||null===r&&0<this.delay)return e.prototype.recycleAsyncId.call(this,t,n,r);0===t.actions.length&&(cancelAnimationFrame(n),t.scheduled=void 0)},t}(dg),Dq=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return O(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,n=this.actions,r=-1,i=n.length;e=e||n.shift();do{if(t=e.execute(e.state,e.delay))break}while(++r<i&&(e=n.shift()));if(this.active=!1,t){for(;++r<i&&(e=n.shift());)e.unsubscribe();throw t}},t}(eg))(mz),nz=function(e){function t(t,n){void 0===t&&(t=Eq),void 0===n&&(n=Number.POSITIVE_INFINITY);var r=e.call(this,t,(function(){return r.frame}))||this;return r.maxFrames=n,r.frame=0,r.index=-1,r}return O(t,e),t.prototype.flush=function(){for(var e,t,n=this.actions,r=this.maxFrames;(t=n[0])&&t.delay<=r&&(n.shift(),this.frame=t.delay,!(e=t.execute(t.state,t.delay))););if(e){for(;t=n.shift();)t.unsubscribe();throw e}},t.frameTimeFactor=10,t}(eg),Eq=function(e){function t(t,n,r){void 0===r&&(r=t.index+=1);var i=e.call(this,t,n)||this;return i.scheduler=t,i.work=n,i.index=r,i.active=!0,i.index=t.index=r,i}return O(t,e),t.prototype.schedule=function(n,r){if(void 0===r&&(r=0),!this.id)return e.prototype.schedule.call(this,n,r);this.active=!1;var i=new t(this.scheduler,this.work);return this.add(i),i.schedule(n,r)},t.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),this.delay=e.frame+r,(e=e.actions).push(this),e.sort(t.sortActions),!0},t.prototype.recycleAsyncId=function(e,t,n){},t.prototype._execute=function(t,n){if(!0===this.active)return e.prototype._execute.call(this,t,n)},t.sortActions=function(e,t){return e.delay===t.delay?e.index===t.index?0:e.index>t.index?1:-1:e.delay>t.delay?1:-1},t}(dg),Pk=function(){function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e}(),vg=function(){function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e}(),pb=function(){function e(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return e.prototype=Object.create(Error.prototype),e}(),Ps=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new oz(e,this.project,this.thisArg))},e}(),oz=function(e){function t(t,n,r){return(t=e.call(this,t)||this).project=n,t.count=0,t.thisArg=r||t,t}return O(t,e),t.prototype._next=function(e){try{var t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(ia),Qk=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return O(t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)},t.prototype.notifyError=function(e,t){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(ia),Us=function(e){function t(t,n,r){var i=e.call(this)||this;return i.parent=t,i.outerValue=n,i.outerIndex=r,i.index=0,i}return O(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(ia),pz=function(e){return function(t){return e.then((function(e){t.closed||(t.next(e),t.complete())}),(function(e){return t.error(e)})).then(null,le),t}},Zc="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",qz=function(e){return function(t){for(var n=e[Zc]();;){var r=void 0;try{r=n.next()}catch(e){return t.error(e),t}if(r.done){t.complete();break}if(t.next(r.value),t.closed)break}return"function"==typeof n.return&&t.add((function(){n.return&&n.return()})),t}},rz=function(e){return function(t){var n=e[me]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(t)}},gm=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e},pf=function(e){if(e&&"function"==typeof e[me])return rz(e);if(gm(e))return $l(e);if(em(e))return pz(e);if(e&&"function"==typeof e[Zc])return qz(e);throw e=di(e)?"an invalid object":"'"+e+"'",new TypeError("You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")},Fq={},tz=function(){function e(e){this.resultSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new sz(e,this.resultSelector))},e}(),sz=function(e){function t(t,n){return(t=e.call(this,t)||this).resultSelector=n,t.active=0,t.values=[],t.observables=[],t}return O(t,e),t.prototype._next=function(e){this.values.push(Fq),this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.toRespond=this.active=t;for(var n=0;n<t;n++)this.add(ii(this,e[n],void 0,n))}},t.prototype.notifyComplete=function(e){0==--this.active&&this.destination.complete()},t.prototype.notifyNext=function(e,t,n){var r=(e=this.values)[n];r=this.toRespond?r===Fq?--this.toRespond:this.toRespond:0,e[n]=t,0===r&&(this.resultSelector?this._tryResultSelector(e):this.destination.next(e.slice()))},t.prototype._tryResultSelector=function(e){try{var t=this.resultSelector.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(Qk),vc=function(e){function t(t){var n=e.call(this)||this;return n.parent=t,n}return O(t,e),t.prototype._next=function(e){this.parent.notifyNext(e)},t.prototype._error=function(e){this.parent.notifyError(e),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},t}(ia);!function(e){function t(t,n,r){var i=e.call(this)||this;return i.parent=t,i.outerValue=n,i.outerIndex=r,i}O(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this)},t.prototype._error=function(e){this.parent.notifyError(e),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()}}(ia);var wc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return O(t,e),t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(){this.destination.complete()},t}(ia);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}O(t,e),t.prototype.notifyNext=function(e,t,n,r){this.destination.next(t)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()}}(ia);var Ys=function(){function e(e,t){void 0===t&&(t=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=t}return e.prototype.call=function(e,t){return t.subscribe(new uz(e,this.project,this.concurrent))},e}(),uz=function(e){function t(t,n,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),(t=e.call(this,t)||this).project=n,t.concurrent=r,t.hasCompleted=!1,t.buffer=[],t.active=0,t.index=0,t}return O(t,e),t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var t=this.index++;try{var n=this.project(e,t)}catch(e){return void this.destination.error(e)}this.active++,this._innerSub(n)},t.prototype._innerSub=function(e){var t=new vc(this),n=this.destination;n.add(t),(e=ic(e,t))!==t&&n.add(e)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyComplete=function(){var e=this.buffer;this.active--,0<e.length?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(wc),Rk=E.parseFloat,Gq=-1/0!=1/Rk("\t\n\v\f\r \u2028\u2029\ufeff-0")?function(e){e=hk(String(e));var t=Rk(e);return 0===t&&"-"==e.charAt(0)?-0:t}:Rk;P({global:!0,forced:parseFloat!=Gq},{parseFloat:Gq});var Sk=new W(hc),ct=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new vz(e,this.predicate,this.thisArg))},e}(),vz=function(e){function t(t,n,r){return(t=e.call(this,t)||this).predicate=n,t.thisArg=r,t.count=0,t}return O(t,e),t.prototype._next=function(e){try{var t=this.predicate.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}t&&this.destination.next(e)},t}(ia),dt=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new wz(e))},e}(),wz=function(e){function t(t){return(t=e.call(this,t)||this).hasFirst=!1,t.observables=[],t.subscriptions=[],t}return O(t,e),t.prototype._next=function(e){this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{for(var n=0;n<t&&!this.hasFirst;n++){var r=ii(this,e[n],void 0,n);this.subscriptions&&this.subscriptions.push(r),this.add(r)}this.observables=null}},t.prototype.notifyNext=function(e,t,n){if(!this.hasFirst){for(this.hasFirst=!0,e=0;e<this.subscriptions.length;e++)if(e!==n){var r=this.subscriptions[e];r.unsubscribe(),this.remove(r)}this.subscriptions=null}this.destination.next(t)},t}(Qk),gt=function(){function e(e){this.resultSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new xz(e,this.resultSelector))},e}(),xz=function(e){function t(t,n,r){return(t=e.call(this,t)||this).resultSelector=n,t.iterators=[],t.active=0,t.resultSelector="function"==typeof n?n:void 0,t}return O(t,e),t.prototype._next=function(e){var t=this.iterators;Jb(e)?t.push(new yz(e)):"function"==typeof e[Zc]?t.push(new zz(e[Zc]())):t.push(new Az(this.destination,this,e))},t.prototype._complete=function(){var e=this.iterators,t=e.length;if(this.unsubscribe(),0===t)this.destination.complete();else{this.active=t;for(var n=0;n<t;n++){var r=e[n];r.stillUnsubscribed?this.destination.add(r.subscribe()):this.active--}}},t.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},t.prototype.checkIterators=function(){for(var e=this.iterators,t=e.length,n=this.destination,r=0;r<t;r++){var i=e[r];if("function"==typeof i.hasValue&&!i.hasValue())return}var o=!1,a=[];for(r=0;r<t;r++){var s=(i=e[r]).next();if(i.hasCompleted()&&(o=!0),s.done)return void n.complete();a.push(s.value)}this.resultSelector?this._tryresultSelector(a):n.next(a),o&&n.complete()},t.prototype._tryresultSelector=function(e){try{var t=this.resultSelector.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(ia),zz=function(){function e(e){this.iterator=e,this.nextResult=e.next()}return e.prototype.hasValue=function(){return!0},e.prototype.next=function(){var e=this.nextResult;return this.nextResult=this.iterator.next(),e},e.prototype.hasCompleted=function(){var e=this.nextResult;return!(!e||!e.done)},e}(),yz=function(){function e(e){this.array=e,this.length=this.index=0,this.length=e.length}return e.prototype[Zc]=function(){return this},e.prototype.next=function(e){e=this.index++;var t=this.array;return e<this.length?{value:t[e],done:!1}:{value:null,done:!0}},e.prototype.hasValue=function(){return this.array.length>this.index},e.prototype.hasCompleted=function(){return this.array.length===this.index},e}(),Az=function(e){function t(t,n,r){return(t=e.call(this,t)||this).parent=n,t.observable=r,t.stillUnsubscribed=!0,t.buffer=[],t.isComplete=!1,t}return O(t,e),t.prototype[Zc]=function(){return this},t.prototype.next=function(){var e=this.buffer;return 0===e.length&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}},t.prototype.hasValue=function(){return 0<this.buffer.length},t.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},t.prototype.notifyComplete=function(){0<this.buffer.length?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},t.prototype.notifyNext=function(e){this.buffer.push(e),this.parent.checkIterators()},t.prototype.subscribe=function(){return ic(this.observable,new vc(this))},t}(wc),Bz=Object.freeze({__proto__:null,Observable:W,ConnectableObservable:Aq,GroupedObservable:Lk,observable:me,Subject:Pa,BehaviorSubject:ez,ReplaySubject:pe,AsyncSubject:of,asap:lz,asapScheduler:qi,async:ad,asyncScheduler:Ok,queue:fg,queueScheduler:fg,animationFrame:Dq,animationFrameScheduler:Dq,VirtualTimeScheduler:nz,VirtualAction:Eq,Scheduler:Mk,Subscription:Na,Subscriber:ia,Notification:Ue,get NotificationKind(){return Nk},pipe:fi,noop:hc,identity:Xc,isObservable:function(e){return!!e&&(e instanceof W||"function"==typeof e.lift&&"function"==typeof e.subscribe)},ArgumentOutOfRangeError:Pk,EmptyError:vg,ObjectUnsubscribedError:qd,UnsubscriptionError:lf,TimeoutError:pb,bindCallback:bm,bindNodeCallback:cm,combineLatest:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=t=void 0;return Yc(e[e.length-1])&&(n=e.pop()),"function"==typeof e[e.length-1]&&(t=e.pop()),1===e.length&&Jb(e[0])&&(e=e[0]),nf(e,n).lift(new tz(t))},concat:hm,defer:$c,empty:mf,forkJoin:im,from:Kb,fromEvent:gb,fromEventPattern:km,generate:function(e,t,n,r,i){if(1==arguments.length){var o=e.initialState;t=e.condition,n=e.iterate;var a=e.resultSelector||Xc;i=e.scheduler}else void 0===r||Yc(r)?(o=e,a=Xc,i=r):(o=e,a=r);return new W((function(e){var r=o;if(i)return i.schedule(Zs,0,{subscriber:e,iterate:n,condition:t,resultSelector:a,state:r});for(;;){if(t){var s=void 0;try{s=t(r)}catch(t){e.error(t);break}if(!s){e.complete();break}}s=void 0;try{s=a(r)}catch(t){e.error(t);break}if(e.next(s),e.closed)break;try{r=n(r)}catch(t){e.error(t);break}}}))},iif:function(e,t,n){return void 0===t&&(t=vb),void 0===n&&(n=vb),$c((function(){return e()?t:n}))},interval:lm,merge:Xb,never:function(){return Sk},of:fb,onErrorResumeNext:ki,pairs:function(e,t){return new W(t?function(n){var r=Object.keys(e),i=new Na;return i.add(t.schedule(at,0,{keys:r,index:0,subscriber:n,subscription:i,obj:e})),i}:function(t){for(var n=Object.keys(e),r=0;r<n.length&&!t.closed;r++){var i=n[r];e.hasOwnProperty(i)&&t.next([i,e[i]])}t.complete()})},partition:function(e,t,n){return[wb(t,n)(new W(pf(e))),wb(bt(t,n))(new W(pf(e)))]},race:Ca,range:function(e,t,n){return void 0===e&&(e=0),new W((function(r){void 0===t&&(t=e,e=0);var i=0,o=e;if(n)return n.schedule(et,0,{index:i,count:t,start:e,subscriber:r});for(;;){if(i++>=t){r.complete();break}if(r.next(o++),r.closed)break}}))},throwError:Y,timer:Bc,using:function(e,t){return new W((function(n){try{var r=e()}catch(e){return void n.error(e)}try{var i=t(r)}catch(e){return void n.error(e)}var o=(i?Kb(i):vb).subscribe(n);return function(){o.unsubscribe(),r&&r.unsubscribe()}}))},zip:li,scheduled:fm,EMPTY:vb,NEVER:Sk,config:Ib}),ht=function(){function e(e){this.selector=e}return e.prototype.call=function(e,t){return t.subscribe(new Cz(e,this.selector,this.caught))},e}(),Cz=function(e){function t(t,n,r){return(t=e.call(this,t)||this).selector=n,t.caught=r,t}return O(t,e),t.prototype.error=function(t){if(!this.isStopped){var n=void 0;try{n=this.selector(t,this.caught)}catch(t){return void e.prototype.error.call(this,t)}this._unsubscribeAndRecycle(),t=new vc(this),this.add(t),(n=ic(n,t))!==t&&this.add(n)}},t}(wc),it=function(){function e(e){this.defaultValue=e}return e.prototype.call=function(e,t){return t.subscribe(new Dz(e,this.defaultValue))},e}(),Dz=function(e){function t(t,n){return(t=e.call(this,t)||this).defaultValue=n,t.isEmpty=!0,t}return O(t,e),t.prototype._next=function(e){this.isEmpty=!1,this.destination.next(e)},t.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},t}(ia),jt=function(){function e(e,t){this.delay=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new Ez(e,this.delay,this.scheduler))},e}(),Ez=function(e){function t(t,n,r){return(t=e.call(this,t)||this).delay=n,t.scheduler=r,t.queue=[],t.active=!1,t.errored=!1,t}return O(t,e),t.dispatch=function(e){for(var t=e.source,n=t.queue,r=e.scheduler,i=e.destination;0<n.length&&0>=n[0].time-r.now();)n.shift().notification.observe(i);0<n.length?(t=Math.max(0,n[0].time-r.now()),this.schedule(e,t)):(this.unsubscribe(),t.active=!1)},t.prototype._schedule=function(e){this.active=!0,this.destination.add(e.schedule(t.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))},t.prototype.scheduleNotification=function(e){if(!0!==this.errored){var t=this.scheduler;e=new Fz(t.now()+this.delay,e),this.queue.push(e),!1===this.active&&this._schedule(t)}},t.prototype._next=function(e){this.scheduleNotification(Ue.createNext(e))},t.prototype._error=function(e){this.errored=!0,this.queue=[],this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.scheduleNotification(Ue.createComplete()),this.unsubscribe()},t}(ia),Fz=function(e,t){this.time=e,this.notification=t},kt=function(){function e(e,t){this.keySelector=e,this.flushes=t}return e.prototype.call=function(e,t){return t.subscribe(new Gz(e,this.keySelector,this.flushes))},e}(),Gz=function(e){function t(t,n,r){return(t=e.call(this,t)||this).keySelector=n,t.values=new Set,r&&t.add(ic(r,new vc(t))),t}return O(t,e),t.prototype.notifyNext=function(){this.values.clear()},t.prototype.notifyError=function(e){this._error(e)},t.prototype._next=function(e){this.keySelector?this._useKeySelector(e):this._finalizeNext(e,e)},t.prototype._useKeySelector=function(e){var t=this.destination;try{var n=this.keySelector(e)}catch(e){return void t.error(e)}this._finalizeNext(n,e)},t.prototype._finalizeNext=function(e,t){var n=this.values;n.has(e)||(n.add(e),this.destination.next(t))},t}(wc),mt=function(){function e(e){this.errorFactory=e}return e.prototype.call=function(e,t){return t.subscribe(new Hz(e,this.errorFactory))},e}(),Hz=function(e){function t(t,n){return(t=e.call(this,t)||this).errorFactory=n,t.hasValue=!1,t}return O(t,e),t.prototype._next=function(e){this.hasValue=!0,this.destination.next(e)},t.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var e=void 0;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)},t}(ia),nt=function(){function e(e){if(this.total=e,0>this.total)throw new Pk}return e.prototype.call=function(e,t){return t.subscribe(new Iz(e,this.total))},e}(),Iz=function(e){function t(t,n){return(t=e.call(this,t)||this).total=n,t.count=0,t}return O(t,e),t.prototype._next=function(e){var t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))},t}(ia),ot=function(){function e(e){this.project=e}return e.prototype.call=function(e,t){return t.subscribe(new Jz(e,this.project))},e}(),Jz=function(e){function t(t,n){return(t=e.call(this,t)||this).project=n,t.hasSubscription=!1,t.hasCompleted=!1,t.index=0,t}return O(t,e),t.prototype._next=function(e){this.hasSubscription||this.tryNext(e)},t.prototype.tryNext=function(e){var t=this.index++;try{var n=this.project(e,t)}catch(e){return void this.destination.error(e)}this.hasSubscription=!0,this._innerSub(n)},t.prototype._innerSub=function(e){var t=new vc(this),n=this.destination;n.add(t),(e=ic(e,t))!==t&&n.add(e)},t.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},t}(wc),pt=function(){function e(e){this.callback=e}return e.prototype.call=function(e,t){return t.subscribe(new Kz(e,this.callback))},e}(),Kz=function(e){function t(t,n){return(t=e.call(this,t)||this).add(new Na(n)),t}return O(t,e),t}(ia),rt=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new Lz(e))},e}(),Lz=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return O(t,e),t.prototype._next=function(e){},t}(ia),st=function(){function e(e){if(this.total=e,0>this.total)throw new Pk}return e.prototype.call=function(e,t){return t.subscribe(new Mz(e,this.total))},e}(),Mz=function(e){function t(t,n){return(t=e.call(this,t)||this).total=n,t.ring=[],t.count=0,t}return O(t,e),t.prototype._next=function(e){var t=this.ring,n=this.total,r=this.count++;t.length<n?t.push(e):t[r%n]=e},t.prototype._complete=function(){var e=this.destination,t=this.count;if(0<t)for(var n=this.count>=this.total?this.total:this.count,r=this.ring,i=0;i<n;i++){var o=t++%n;e.next(r[o])}e.complete()},t}(ia),tt=function(){function e(e){this.value=e}return e.prototype.call=function(e,t){return t.subscribe(new Nz(e,this.value))},e}(),Nz=function(e){function t(t,n){return(t=e.call(this,t)||this).value=n,t}return O(t,e),t.prototype._next=function(e){this.destination.next(this.value)},t}(ia),ut=function(){function e(e,t,n){void 0===n&&(n=!1),this.accumulator=e,this.seed=t,this.hasSeed=n}return e.prototype.call=function(e,t){return t.subscribe(new Oz(e,this.accumulator,this.seed,this.hasSeed))},e}(),Oz=function(e){function t(t,n,r,i){return(t=e.call(this,t)||this).accumulator=n,t._seed=r,t.hasSeed=i,t.index=0,t}return O(t,e),Object.defineProperty(t.prototype,"seed",{get:function(){return this._seed},set:function(e){this.hasSeed=!0,this._seed=e},enumerable:!0,configurable:!0}),t.prototype._next=function(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)},t.prototype._tryNext=function(e){var t=this.index++;try{var n=this.accumulator(this.seed,e,t)}catch(e){this.destination.error(e)}this.seed=n,this.destination.next(n)},t}(ia),wt=function(){function e(e,t){this.subjectFactory=e,this.selector=t}return e.prototype.call=function(e,t){var n=this.selector,r=this.subjectFactory();return(e=n(r).subscribe(e)).add(t.subscribe(r)),e},e}(),yt=function(){function e(e,t){this.notifier=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new Pz(e,this.notifier,this.source))},e}(),Pz=function(e){function t(t,n,r){return(t=e.call(this,t)||this).notifier=n,t.source=r,t}return O(t,e),t.prototype.error=function(t){if(!this.isStopped){var n=this.errors,r=this.retries,i=this.retriesSubscription;if(r)this.retriesSubscription=this.errors=void 0;else{n=new Pa;try{r=(0,this.notifier)(n)}catch(t){return e.prototype.error.call(this,t)}i=ic(r,new vc(this))}this._unsubscribeAndRecycle(),this.errors=n,this.retries=r,this.retriesSubscription=i,n.next(t)}},t.prototype._unsubscribe=function(){var e=this.errors,t=this.retriesSubscription;e&&(e.unsubscribe(),this.errors=void 0),t&&(t.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},t.prototype.notifyNext=function(){var e=this._unsubscribe;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=e,this.source.subscribe(this)},t}(wc),Bt=function(){function e(e){this.project=e}return e.prototype.call=function(e,t){return t.subscribe(new Qz(e,this.project))},e}(),Qz=function(e){function t(t,n){return(t=e.call(this,t)||this).project=n,t.index=0,t}return O(t,e),t.prototype._next=function(e){var t=this.index++;try{var n=this.project(e,t)}catch(e){return void this.destination.error(e)}this._innerSub(n)},t.prototype._innerSub=function(e){var t=this.innerSubscription;t&&t.unsubscribe(),t=new vc(this);var n=this.destination;n.add(t),this.innerSubscription=ic(e,t),this.innerSubscription!==t&&n.add(this.innerSubscription)},t.prototype._complete=function(){var t=this.innerSubscription;t&&!t.closed||e.prototype._complete.call(this),this.unsubscribe()},t.prototype._unsubscribe=function(){this.innerSubscription=void 0},t.prototype.notifyComplete=function(){this.innerSubscription=void 0,this.isStopped&&e.prototype._complete.call(this)},t.prototype.notifyNext=function(e){this.destination.next(e)},t}(wc),Ct=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){e=new Rz(e);var n=ic(this.notifier,new vc(e));return n&&!e.seenValue?(e.add(n),t.subscribe(e)):e},e}(),Rz=function(e){function t(t){return(t=e.call(this,t)||this).seenValue=!1,t}return O(t,e),t.prototype.notifyNext=function(){this.seenValue=!0,this.complete()},t.prototype.notifyComplete=function(){},t}(wc),Et=function(){function e(e,t){this.predicate=e,this.inclusive=t}return e.prototype.call=function(e,t){return t.subscribe(new Sz(e,this.predicate,this.inclusive))},e}(),Sz=function(e){function t(t,n,r){return(t=e.call(this,t)||this).predicate=n,t.inclusive=r,t.index=0,t}return O(t,e),t.prototype._next=function(e){var t=this.destination;try{var n=this.predicate(e,this.index++)}catch(e){return void t.error(e)}this.nextOrComplete(e,n)},t.prototype.nextOrComplete=function(e,t){var n=this.destination;t?n.next(e):(this.inclusive&&n.next(e),n.complete())},t}(ia),Ft=function(){function e(e,t,n){this.nextOrObserver=e,this.error=t,this.complete=n}return e.prototype.call=function(e,t){return t.subscribe(new Tz(e,this.nextOrObserver,this.error,this.complete))},e}(),Tz=function(e){function t(t,n,r,i){return(t=e.call(this,t)||this)._tapNext=hc,t._tapError=hc,t._tapComplete=hc,t._tapError=r||hc,t._tapComplete=i||hc,ke(n)?(t._context=t,t._tapNext=n):n&&(t._context=n,t._tapNext=n.next||hc,t._tapError=n.error||hc,t._tapComplete=n.complete||hc),t}return O(t,e),t.prototype._next=function(e){try{this._tapNext.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.next(e)},t.prototype._error=function(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)},t.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()},t}(ia),Ht={leading:!0,trailing:!1};!function(e){function t(t,n,r,i){var o=e.call(this,t)||this;return o.destination=t,o.durationSelector=n,o._leading=r,o._trailing=i,o._hasValue=!1,o}O(t,e),t.prototype._next=function(e){this._hasValue=!0,this._sendValue=e,this._throttled||(this._leading?this.send():this.throttle(e))},t.prototype.send=function(){var e=this._sendValue;this._hasValue&&(this.destination.next(e),this.throttle(e)),this._hasValue=!1,this._sendValue=void 0},t.prototype.throttle=function(e){(e=this.tryDurationSelector(e))&&this.add(this._throttled=ic(e,new vc(this)))},t.prototype.tryDurationSelector=function(e){try{return this.durationSelector(e)}catch(e){return this.destination.error(e),null}},t.prototype.throttlingDone=function(){var e=this._throttled,t=this._trailing;e&&e.unsubscribe(),this._throttled=void 0,t&&this.send()},t.prototype.notifyNext=function(){this.throttlingDone()},t.prototype.notifyComplete=function(){this.throttlingDone()}}(wc);for(var It=function(){function e(e,t,n,r){this.duration=e,this.scheduler=t,this.leading=n,this.trailing=r}return e.prototype.call=function(e,t){return t.subscribe(new Uz(e,this.duration,this.scheduler,this.leading,this.trailing))},e}(),Uz=function(e){function t(t,n,r,i,o){return(t=e.call(this,t)||this).duration=n,t.scheduler=r,t.leading=i,t.trailing=o,t._hasTrailingValue=!1,t._trailingValue=null,t}return O(t,e),t.prototype._next=function(e){this.throttled?this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(Jt,this.duration,{subscriber:this})),this.leading?this.destination.next(e):this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0))},t.prototype._complete=function(){this._hasTrailingValue&&this.destination.next(this._trailingValue),this.destination.complete()},t.prototype.clearThrottle=function(){var e=this.throttled;e&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),e.unsubscribe(),this.remove(e),this.throttled=null)},t}(ia),Lt=function(){function e(e,t,n,r){this.waitFor=e,this.absoluteTimeout=t,this.withObservable=n,this.scheduler=r}return e.prototype.call=function(e,t){return t.subscribe(new Vz(e,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},e}(),Vz=function(e){function t(t,n,r,i,o){return(t=e.call(this,t)||this).absoluteTimeout=n,t.waitFor=r,t.withObservable=i,t.scheduler=o,t.scheduleTimeout(),t}return O(t,e),t.dispatchTimeout=function(e){var t=e.withObservable;e._unsubscribeAndRecycle(),e.add(ic(t,new vc(e)))},t.prototype.scheduleTimeout=function(){var e=this.action;e?this.action=e.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(t.dispatchTimeout,this.waitFor,this))},t.prototype._next=function(t){this.absoluteTimeout||this.scheduleTimeout(),e.prototype._next.call(this,t)},t.prototype._unsubscribe=function(){this.action=void 0,this.withObservable=this.scheduler=null},t}(wc),Nt=function(){function e(e,t){this.observables=e,this.project=t}return e.prototype.call=function(e,t){return t.subscribe(new Wz(e,this.observables,this.project))},e}(),Wz=function(e){function t(t,n,r){(t=e.call(this,t)||this).observables=n,t.project=r,t.toRespond=[],r=n.length,t.values=Array(r);for(var i=0;i<r;i++)t.toRespond.push(i);for(i=0;i<r;i++)t.add(ii(t,n[i],void 0,i));return t}return O(t,e),t.prototype.notifyNext=function(e,t,n){this.values[n]=t,0<(e=this.toRespond).length&&-1!==(n=e.indexOf(n))&&e.splice(n,1)},t.prototype.notifyComplete=function(){},t.prototype._next=function(e){0===this.toRespond.length&&(e=[e].concat(this.values),this.project?this._tryProject(e):this.destination.next(e))},t.prototype._tryProject=function(e){try{var t=this.project.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(Qk),Hq=$a((function(e){var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var n=new Uint8Array(16);e.exports=function(){return t(n),n}}else{var r=Array(16);e.exports=function(){for(var e,t=0;16>t;t++)0==(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}})),ab=[],Fh=0;256>Fh;++Fh)ab[Fh]=(Fh+256).toString(16).substr(1);var Iq=function(e,t){return t=t||0,[ab[e[t++]],ab[e[t++]],ab[e[t++]],ab[e[t++]],"-",ab[e[t++]],ab[e[t++]],"-",ab[e[t++]],ab[e[t++]],"-",ab[e[t++]],ab[e[t++]],"-",ab[e[t++]],ab[e[t++]],ab[e[t++]],ab[e[t++]],ab[e[t++]],ab[e[t++]]].join("")},Ud=function(e,t,n){if(n=t&&n||0,"string"==typeof e&&(t="binary"===e?Array(16):null,e=null),(e=(e=e||{}).random||(e.rng||Hq)())[6]=15&e[6]|64,e[8]=63&e[8]|128,t)for(var r=0;16>r;++r)t[n+r]=e[r];return t||Iq(e)},gg=Ud(),Tk=!1,Oc,rd,Uk,Vk,sd,Vd,ec,Ve,Rb,Wk,Pc,Wd,Qc,Rc,Sc,We,Tc,Uc;!function(e){e[e.ATTRIBUTE_OPERATION_ERR_FAILURE=2]="ATTRIBUTE_OPERATION_ERR_FAILURE",e[e.ATTRIBUTE_OPERATION_ERR_INVALID_ARGUMENT=3]="ATTRIBUTE_OPERATION_ERR_INVALID_ARGUMENT",e[e.ATTRIBUTE_OPERATION_ERR_SIZE_OVERFLOW=4]="ATTRIBUTE_OPERATION_ERR_SIZE_OVERFLOW",e[e.ATTRIBUTE_OPERATION_ERR_TOO_OFTEN=5]="ATTRIBUTE_OPERATION_ERR_TOO_OFTEN",e[e.ATTRIBUTE_OPERATION_ERR_USER_NOT_FOUND=6]="ATTRIBUTE_OPERATION_ERR_USER_NOT_FOUND",e[e.ATTRIBUTE_OPERATION_ERR_TIMEOUT=7]="ATTRIBUTE_OPERATION_ERR_TIMEOUT",e[e.ATTRIBUTE_OPERATION_ERR_USER_NOT_LOGGED_IN=102]="ATTRIBUTE_OPERATION_ERR_USER_NOT_LOGGED_IN"}(Oc||(Oc={})),function(e){e[e.CHANNEL_MESSAGE_ERR_FAILURE=1]="CHANNEL_MESSAGE_ERR_FAILURE",e[e.CHANNEL_MESSAGE_ERR_TIMEOUT=2]="CHANNEL_MESSAGE_ERR_TIMEOUT",e[e.CHANNEL_MESSAGE_ERR_TOO_OFTEN=3]="CHANNEL_MESSAGE_ERR_TOO_OFTEN",e[e.CHANNEL_MESSAGE_ERR_INVALID_MESSAGE=4]="CHANNEL_MESSAGE_ERR_INVALID_MESSAGE",e[e.CHANNEL_MESSAGE_ERR_NOT_IN_CHANNEL=5]="CHANNEL_MESSAGE_ERR_NOT_IN_CHANNEL",e[e.CHANNEL_MESSAGE_ERR_USER_NOT_LOGGED_IN=102]="CHANNEL_MESSAGE_ERR_USER_NOT_LOGGED_IN"}(rd||(rd={})),function(e){e[e.CREATE_CHANNEL_ERR_INVALID_ARGUMENT=1]="CREATE_CHANNEL_ERR_INVALID_ARGUMENT"}(Uk||(Uk={})),function(e){e[e.CREATE_INSTANCE_ERR_INVALID_ARGUMENT=1]="CREATE_INSTANCE_ERR_INVALID_ARGUMENT"}(Vk||(Vk={})),function(e){e[e.GET_MEMBERS_ERR_FAILURE=1]="GET_MEMBERS_ERR_FAILURE",e[e.GET_MEMBERS_ERR_REJECTED=2]="GET_MEMBERS_ERR_REJECTED",e[e.GET_MEMBERS_ERR_TIMEOUT=3]="GET_MEMBERS_ERR_TIMEOUT",e[e.GET_MEMBERS_ERR_TOO_OFTEN=4]="GET_MEMBERS_ERR_TOO_OFTEN",e[e.GET_MEMBERS_ERR_NOT_IN_CHANNEL=5]="GET_MEMBERS_ERR_NOT_IN_CHANNEL",e[e.GET_MEMBERS_ERR_USER_NOT_LOGGED_IN=102]="GET_MEMBERS_ERR_USER_NOT_LOGGED_IN"}(sd||(sd={})),function(e){e[e.INVITATION_API_CALL_ERR_INVALID_ARGUMENT=1]="INVITATION_API_CALL_ERR_INVALID_ARGUMENT",e[e.INVITATION_API_CALL_ERR_NOT_STARTED=2]="INVITATION_API_CALL_ERR_NOT_STARTED",e[e.INVITATION_API_CALL_ERR_ALREADY_END=3]="INVITATION_API_CALL_ERR_ALREADY_END",e[e.INVITATION_API_CALL_ERR_ALREADY_ACCEPT=4]="INVITATION_API_CALL_ERR_ALREADY_ACCEPT",e[e.INVITATION_API_CALL_ERR_ALREADY_SENT=5]="INVITATION_API_CALL_ERR_ALREADY_SENT"}(Vd||(Vd={})),function(e){e[e.JOIN_CHANNEL_ERR_FAILURE=1]="JOIN_CHANNEL_ERR_FAILURE",e[e.JOIN_CHANNEL_ERR_REJECTED=2]="JOIN_CHANNEL_ERR_REJECTED",e[e.JOIN_CHANNEL_ERR_INVALID_ARGUMENT=3]="JOIN_CHANNEL_ERR_INVALID_ARGUMENT",e[e.JOIN_CHANNEL_TIMEOUT=4]="JOIN_CHANNEL_TIMEOUT",e[e.JOIN_CHANNEL_ERR_EXCEED_LIMIT=5]="JOIN_CHANNEL_ERR_EXCEED_LIMIT",e[e.JOIN_CHANNEL_ERR_ALREADY_JOINED=6]="JOIN_CHANNEL_ERR_ALREADY_JOINED",e[e.JOIN_CHANNEL_ERR_TOO_OFTEN=7]="JOIN_CHANNEL_ERR_TOO_OFTEN",e[e.JOIN_CHANNEL_ERR_JOIN_SAME_CHANNEL_TOO_OFTEN=8]="JOIN_CHANNEL_ERR_JOIN_SAME_CHANNEL_TOO_OFTEN",e[e.JOIN_CHANNEL_ERR_USER_NOT_LOGGED_IN=102]="JOIN_CHANNEL_ERR_USER_NOT_LOGGED_IN",e[e.JOIN_CHANNEL_ERR_ABORTED_BY_LEAVE=201]="JOIN_CHANNEL_ERR_ABORTED_BY_LEAVE",e[e.JOIN_CHANNEL_ERR_ALREADY_JOINED_CHANNEL_OF_SAME_ID=202]="JOIN_CHANNEL_ERR_ALREADY_JOINED_CHANNEL_OF_SAME_ID"}(ec||(ec={})),function(e){e[e.LEAVE_CHANNEL_ERR_FAILURE=1]="LEAVE_CHANNEL_ERR_FAILURE",e[e.LEAVE_CHANNEL_ERR_REJECTED=2]="LEAVE_CHANNEL_ERR_REJECTED",e[e.LEAVE_CHANNEL_ERR_NOT_IN_CHANNEL=3]="LEAVE_CHANNEL_ERR_NOT_IN_CHANNEL",e[e.LEAVE_CHANNEL_ERR_USER_NOT_LOGGED_IN=102]="LEAVE_CHANNEL_ERR_USER_NOT_LOGGED_IN"}(Ve||(Ve={})),function(e){e[e.LOGIN_ERR_UNKNOWN=1]="LOGIN_ERR_UNKNOWN",e[e.LOGIN_ERR_REJECTED=2]="LOGIN_ERR_REJECTED",e[e.LOGIN_ERR_INVALID_ARGUMENT=3]="LOGIN_ERR_INVALID_ARGUMENT",e[e.LOGIN_ERR_INVALID_APP_ID=4]="LOGIN_ERR_INVALID_APP_ID",e[e.LOGIN_ERR_INVALID_TOKEN=5]="LOGIN_ERR_INVALID_TOKEN",e[e.LOGIN_ERR_TOKEN_EXPIRED=6]="LOGIN_ERR_TOKEN_EXPIRED",e[e.LOGIN_ERR_NOT_AUTHORIZED=7]="LOGIN_ERR_NOT_AUTHORIZED",e[e.LOGIN_ERR_ALREADY_LOGIN=8]="LOGIN_ERR_ALREADY_LOGIN",e[e.LOGIN_ERR_TIMEOUT=9]="LOGIN_ERR_TIMEOUT",e[e.LOGIN_ERR_TOO_OFTEN=10]="LOGIN_ERR_TOO_OFTEN",e[e.LOGIN_ERR_ABORTED_BY_LOGOUT=201]="LOGIN_ERR_ABORTED_BY_LOGOUT"}(Rb||(Rb={})),function(e){e[e.LOGOUT_ERR_USER_NOT_LOGGED_IN=102]="LOGOUT_ERR_USER_NOT_LOGGED_IN"}(Wk||(Wk={})),function(e){e[e.PEER_MESSAGE_ERR_FAILURE=1]="PEER_MESSAGE_ERR_FAILURE",e[e.PEER_MESSAGE_ERR_TIMEOUT=2]="PEER_MESSAGE_ERR_TIMEOUT",e[e.PEER_MESSAGE_ERR_TOO_OFTEN=5]="PEER_MESSAGE_ERR_TOO_OFTEN",e[e.PEER_MESSAGE_ERR_INVALID_USERID=6]="PEER_MESSAGE_ERR_INVALID_USERID",e[e.PEER_MESSAGE_ERR_INVALID_MESSAGE=7]="PEER_MESSAGE_ERR_INVALID_MESSAGE",e[e.PEER_MESSAGE_ERR_INCOMPATIBLE_MESSAGE=8]="PEER_MESSAGE_ERR_INCOMPATIBLE_MESSAGE",e[e.PEER_MESSAGE_ERR_USER_NOT_LOGGED_IN=102]="PEER_MESSAGE_ERR_USER_NOT_LOGGED_IN"}(Pc||(Pc={})),function(e){e[e.QUERY_PEERS_ONLINE_STATUS_ERR_INVALID_ARGUMENT=2]="QUERY_PEERS_ONLINE_STATUS_ERR_INVALID_ARGUMENT",e[e.QUERY_PEERS_ONLINE_STATUS_ERR_REJECTED=3]="QUERY_PEERS_ONLINE_STATUS_ERR_REJECTED",e[e.QUERY_PEERS_ONLINE_STATUS_ERR_TIMEOUT=4]="QUERY_PEERS_ONLINE_STATUS_ERR_TIMEOUT",e[e.QUERY_PEERS_ONLINE_STATUS_ERR_TOO_OFTEN=5]="QUERY_PEERS_ONLINE_STATUS_ERR_TOO_OFTEN",e[e.QUERY_PEERS_ONLINE_STATUS_ERR_USER_NOT_LOGGED_IN=102]="QUERY_PEERS_ONLINE_STATUS_ERR_USER_NOT_LOGGED_IN"}(Wd||(Wd={})),function(e){e[e.RENEW_TOKEN_ERR_FAILURE=1]="RENEW_TOKEN_ERR_FAILURE",e[e.RENEW_TOKEN_ERR_INVALID_ARGUMENT=2]="RENEW_TOKEN_ERR_INVALID_ARGUMENT",e[e.RENEW_TOKEN_ERR_REJECTED=3]="RENEW_TOKEN_ERR_REJECTED",e[e.RENEW_TOKEN_ERR_TOO_OFTEN=4]="RENEW_TOKEN_ERR_TOO_OFTEN",e[e.RENEW_TOKEN_ERR_TOKEN_EXPIRED=5]="RENEW_TOKEN_ERR_TOKEN_EXPIRED",e[e.RENEW_TOKEN_ERR_INVALID_TOKEN=6]="RENEW_TOKEN_ERR_INVALID_TOKEN",e[e.RENEW_TOKEN_ERR_USER_NOT_LOGGED_IN=102]="RENEW_TOKEN_ERR_USER_NOT_LOGGED_IN",e[e.RENEW_TOKEN_ERR_ABORTED_BY_LOGOUT=201]="RENEW_TOKEN_ERR_ABORTED_BY_LOGOUT"}(Qc||(Qc={})),function(e){e[e.GET_CHANNEL_MEMBER_COUNT_ERR_FAILURE=1]="GET_CHANNEL_MEMBER_COUNT_ERR_FAILURE",e[e.GET_CHANNEL_MEMBER_COUNT_ERR_INVALID_ARGUMENT=2]="GET_CHANNEL_MEMBER_COUNT_ERR_INVALID_ARGUMENT",e[e.GET_CHANNEL_MEMBER_COUNT_ERR_TOO_OFTEN=3]="GET_CHANNEL_MEMBER_COUNT_ERR_TOO_OFTEN",e[e.GET_CHANNEL_MEMBER_COUNT_ERR_TIMEOUT=4]="GET_CHANNEL_MEMBER_COUNT_ERR_TIMEOUT",e[e.GET_CHANNEL_MEMBER_COUNT_ERR_EXCEED_LIMIT=5]="GET_CHANNEL_MEMBER_COUNT_ERR_EXCEED_LIMIT",e[e.GET_CHANNEL_MEMBER_COUNT_ERR_NOT_INITIALIZED=101]="GET_CHANNEL_MEMBER_COUNT_ERR_NOT_INITIALIZED",e[e.GET_CHANNEL_MEMBER_COUNT_ERR_USER_NOT_LOGGED_IN=102]="GET_CHANNEL_MEMBER_COUNT_ERR_USER_NOT_LOGGED_IN"}(Rc||(Rc={})),function(e){e[e.PEER_SUBSCRIPTION_STATUS_ERR_FAILURE=1]="PEER_SUBSCRIPTION_STATUS_ERR_FAILURE",e[e.PEER_SUBSCRIPTION_STATUS_ERR_INVALID_ARGUMENT=2]="PEER_SUBSCRIPTION_STATUS_ERR_INVALID_ARGUMENT",e[e.PEER_SUBSCRIPTION_STATUS_ERR_REJECTED=3]="PEER_SUBSCRIPTION_STATUS_ERR_REJECTED",e[e.PEER_SUBSCRIPTION_STATUS_ERR_TIMEOUT=4]="PEER_SUBSCRIPTION_STATUS_ERR_TIMEOUT",e[e.PEER_SUBSCRIPTION_STATUS_ERR_TOO_OFTEN=5]="PEER_SUBSCRIPTION_STATUS_ERR_TOO_OFTEN",e[e.PEER_SUBSCRIPTION_STATUS_ERR_OVERFLOW=6]="PEER_SUBSCRIPTION_STATUS_ERR_OVERFLOW",e[e.PEER_SUBSCRIPTION_STATUS_ERR_USER_NOT_LOGGED_IN=102]="PEER_SUBSCRIPTION_STATUS_ERR_USER_NOT_LOGGED_IN"}(Sc||(Sc={})),function(e){e[e.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_FAILURE=1]="QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_FAILURE",e[e.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_TIMEOUT=2]="QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_TIMEOUT",e[e.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_TOO_OFTEN=3]="QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_TOO_OFTEN",e[e.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_USER_NOT_LOGGED_IN=102]="QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_USER_NOT_LOGGED_IN"}(We||(We={})),function(e){e[e.UPLOAD_MEDIA_ERR_FAILURE=1]="UPLOAD_MEDIA_ERR_FAILURE",e[e.UPLOAD_MEDIA_ERR_INVALID_ARGUMENT=2]="UPLOAD_MEDIA_ERR_INVALID_ARGUMENT",e[e.UPLOAD_MEDIA_ERR_TIMEOUT=3]="UPLOAD_MEDIA_ERR_TIMEOUT",e[e.UPLOAD_MEDIA_ERR_SIZE_OVERFLOW=4]="UPLOAD_MEDIA_ERR_SIZE_OVERFLOW",e[e.UPLOAD_MEDIA_ERR_CONCURRENCY_LIMIT_EXCEEDED=5]="UPLOAD_MEDIA_ERR_CONCURRENCY_LIMIT_EXCEEDED",e[e.UPLOAD_MEDIA_ERR_INTERRUPTED=6]="UPLOAD_MEDIA_ERR_INTERRUPTED",e[e.UPLOAD_MEDIA_ERR_NOT_LOGGED_IN=102]="UPLOAD_MEDIA_ERR_NOT_LOGGED_IN"}(Tc||(Tc={})),function(e){e[e.DOWNLOAD_MEDIA_ERR_FAILURE=1]="DOWNLOAD_MEDIA_ERR_FAILURE",e[e.DOWNLOAD_MEDIA_ERR_INVALID_ARGUMENT=2]="DOWNLOAD_MEDIA_ERR_INVALID_ARGUMENT",e[e.DOWNLOAD_MEDIA_ERR_TIMEOUT=3]="DOWNLOAD_MEDIA_ERR_TIMEOUT",e[e.DOWNLOAD_MEDIA_ERR_NOT_EXIST=4]="DOWNLOAD_MEDIA_ERR_NOT_EXIST",e[e.DOWNLOAD_MEDIA_ERR_CONCURRENCY_LIMIT_EXCEEDED=5]="DOWNLOAD_MEDIA_ERR_CONCURRENCY_LIMIT_EXCEEDED",e[e.DOWNLOAD_MEDIA_ERR_INTERRUPTED=6]="DOWNLOAD_MEDIA_ERR_INTERRUPTED",e[e.DOWNLOAD_MEDIA_ERR_NOT_LOGGED_IN=102]="DOWNLOAD_MEDIA_ERR_NOT_LOGGED_IN"}(Uc||(Uc={}));var Sb=Oc.ATTRIBUTE_OPERATION_ERR_FAILURE,Ja=Oc.ATTRIBUTE_OPERATION_ERR_INVALID_ARGUMENT,re=Oc.ATTRIBUTE_OPERATION_ERR_SIZE_OVERFLOW;Oc.ATTRIBUTE_OPERATION_ERR_TOO_OFTEN;var Jq=Oc.ATTRIBUTE_OPERATION_ERR_USER_NOT_FOUND,Tb=Oc.ATTRIBUTE_OPERATION_ERR_TIMEOUT,Ub=Oc.ATTRIBUTE_OPERATION_ERR_USER_NOT_LOGGED_IN,hg=rd.CHANNEL_MESSAGE_ERR_FAILURE,Xk=rd.CHANNEL_MESSAGE_ERR_TIMEOUT,Kq=rd.CHANNEL_MESSAGE_ERR_TOO_OFTEN,Gh=rd.CHANNEL_MESSAGE_ERR_INVALID_MESSAGE;rd.CHANNEL_MESSAGE_ERR_NOT_IN_CHANNEL;var ig=rd.CHANNEL_MESSAGE_ERR_USER_NOT_LOGGED_IN,Xz=Uk.CREATE_CHANNEL_ERR_INVALID_ARGUMENT,Lq=Vk.CREATE_INSTANCE_ERR_INVALID_ARGUMENT;Rc.GET_CHANNEL_MEMBER_COUNT_ERR_FAILURE;var Mq=Rc.GET_CHANNEL_MEMBER_COUNT_ERR_INVALID_ARGUMENT;Rc.GET_CHANNEL_MEMBER_COUNT_ERR_TOO_OFTEN;var Nq=Rc.GET_CHANNEL_MEMBER_COUNT_ERR_TIMEOUT,Yz=Rc.GET_CHANNEL_MEMBER_COUNT_ERR_EXCEED_LIMIT;Rc.GET_CHANNEL_MEMBER_COUNT_ERR_NOT_INITIALIZED;var Zz=Rc.GET_CHANNEL_MEMBER_COUNT_ERR_USER_NOT_LOGGED_IN,$z=sd.GET_MEMBERS_ERR_FAILURE,aA=sd.GET_MEMBERS_ERR_REJECTED;sd.GET_MEMBERS_ERR_TIMEOUT,sd.GET_MEMBERS_ERR_TOO_OFTEN;var bA=sd.GET_MEMBERS_ERR_NOT_IN_CHANNEL,cA=sd.GET_MEMBERS_ERR_USER_NOT_LOGGED_IN,xc=Vd.INVITATION_API_CALL_ERR_INVALID_ARGUMENT,dA=Vd.INVITATION_API_CALL_ERR_NOT_STARTED,Hh=Vd.INVITATION_API_CALL_ERR_ALREADY_END,Oq=Vd.INVITATION_API_CALL_ERR_ALREADY_ACCEPT,eA=Vd.INVITATION_API_CALL_ERR_ALREADY_SENT,Pq=ec.JOIN_CHANNEL_ERR_FAILURE;ec.JOIN_CHANNEL_ERR_REJECTED;var fA=ec.JOIN_CHANNEL_ERR_INVALID_ARGUMENT,Qq=ec.JOIN_CHANNEL_TIMEOUT,Rq=ec.JOIN_CHANNEL_ERR_EXCEED_LIMIT,Sq=ec.JOIN_CHANNEL_ERR_ALREADY_JOINED;ec.JOIN_CHANNEL_ERR_TOO_OFTEN;var Tq=ec.JOIN_CHANNEL_ERR_USER_NOT_LOGGED_IN,Uq=ec.JOIN_CHANNEL_ERR_ALREADY_JOINED_CHANNEL_OF_SAME_ID,Vq=Ve.LEAVE_CHANNEL_ERR_FAILURE,Wq=Ve.LEAVE_CHANNEL_ERR_REJECTED,gA=Ve.LEAVE_CHANNEL_ERR_NOT_IN_CHANNEL,hA=Ve.LEAVE_CHANNEL_ERR_USER_NOT_LOGGED_IN,Xq=Rb.LOGIN_ERR_UNKNOWN,jg=Rb.LOGIN_ERR_REJECTED,Ih=Rb.LOGIN_ERR_INVALID_ARGUMENT,Yq=Rb.LOGIN_ERR_INVALID_APP_ID,Zq=Rb.LOGIN_ERR_INVALID_TOKEN,Jh=Rb.LOGIN_ERR_TOKEN_EXPIRED;Rb.LOGIN_ERR_NOT_AUTHORIZED;var iA=Rb.LOGIN_ERR_ALREADY_LOGIN,jA=Rb.LOGIN_ERR_TIMEOUT,kA=Rb.LOGIN_ERR_TOO_OFTEN,$q=Wk.LOGOUT_ERR_USER_NOT_LOGGED_IN,ar=Pc.PEER_MESSAGE_ERR_FAILURE,Yk=Pc.PEER_MESSAGE_ERR_TIMEOUT,br=Pc.PEER_MESSAGE_ERR_TOO_OFTEN,Zk=Pc.PEER_MESSAGE_ERR_INVALID_USERID,ue=Pc.PEER_MESSAGE_ERR_INVALID_MESSAGE,$k=Pc.PEER_MESSAGE_ERR_USER_NOT_LOGGED_IN,lA=Pc.PEER_MESSAGE_ERR_INCOMPATIBLE_MESSAGE,cr=Wd.QUERY_PEERS_ONLINE_STATUS_ERR_INVALID_ARGUMENT;Wd.QUERY_PEERS_ONLINE_STATUS_ERR_REJECTED;var mA=Wd.QUERY_PEERS_ONLINE_STATUS_ERR_TIMEOUT;Wd.QUERY_PEERS_ONLINE_STATUS_ERR_TOO_OFTEN;var nA=Wd.QUERY_PEERS_ONLINE_STATUS_ERR_USER_NOT_LOGGED_IN,oA=Qc.RENEW_TOKEN_ERR_FAILURE,pA=Qc.RENEW_TOKEN_ERR_INVALID_ARGUMENT;Qc.RENEW_TOKEN_ERR_REJECTED,Qc.RENEW_TOKEN_ERR_TOO_OFTEN;var qA=Qc.RENEW_TOKEN_ERR_TOKEN_EXPIRED,rA=Qc.RENEW_TOKEN_ERR_INVALID_TOKEN,sA=Qc.RENEW_TOKEN_ERR_USER_NOT_LOGGED_IN,dr=Sc.PEER_SUBSCRIPTION_STATUS_ERR_FAILURE,kg=Sc.PEER_SUBSCRIPTION_STATUS_ERR_INVALID_ARGUMENT;Sc.PEER_SUBSCRIPTION_STATUS_ERR_REJECTED;var tA=Sc.PEER_SUBSCRIPTION_STATUS_ERR_TIMEOUT;Sc.PEER_SUBSCRIPTION_STATUS_ERR_TOO_OFTEN;var er=Sc.PEER_SUBSCRIPTION_STATUS_ERR_OVERFLOW,al=Sc.PEER_SUBSCRIPTION_STATUS_ERR_USER_NOT_LOGGED_IN;We.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_FAILURE,We.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_TIMEOUT,We.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_TOO_OFTEN,We.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_USER_NOT_LOGGED_IN;var lg=Tc.UPLOAD_MEDIA_ERR_FAILURE,wf=Tc.UPLOAD_MEDIA_ERR_INVALID_ARGUMENT,Kh=Tc.UPLOAD_MEDIA_ERR_TIMEOUT,uA=Tc.UPLOAD_MEDIA_ERR_SIZE_OVERFLOW,vA=Tc.UPLOAD_MEDIA_ERR_CONCURRENCY_LIMIT_EXCEEDED,fr=Tc.UPLOAD_MEDIA_ERR_INTERRUPTED,wA=Tc.UPLOAD_MEDIA_ERR_NOT_LOGGED_IN,mg=Uc.DOWNLOAD_MEDIA_ERR_FAILURE,bl=Uc.DOWNLOAD_MEDIA_ERR_INVALID_ARGUMENT,xA=Uc.DOWNLOAD_MEDIA_ERR_TIMEOUT,yA=Uc.DOWNLOAD_MEDIA_ERR_NOT_EXIST,zA=Uc.DOWNLOAD_MEDIA_ERR_CONCURRENCY_LIMIT_EXCEEDED,gr=Uc.DOWNLOAD_MEDIA_ERR_INTERRUPTED,AA=Uc.DOWNLOAD_MEDIA_ERR_NOT_LOGGED_IN,BA=function(e,t){var n;return Gk(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n},Lh=function(e,t,n){if(!lb(n))return!1;var r=aa(t);return!!("number"==r?Ed(n)&&vk(t,n.length):"string"==r&&t in n)&&$f(n[t],e)},cl=function(e,t,n){var r=Va(e)?rq:BA;return n&&Lh(e,t,n)&&(t=void 0),r(e,Se(t))},CA=function(e,t){var n=-1,r=Ed(e)?Array(e.length):[];return Gk(e,(function(e,i,o){r[++n]=t(e,i,o)})),r},DA=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e},EA=function(e,t,n){t=t.length?ge(t,(function(e){return Va(e)?function(t){return Bh(t,1===e.length?e[0]:e)}:e})):[Ch];var r=-1;return t=ge(t,yh(Se)),e=CA(e,(function(e,n,i){return{criteria:ge(t,(function(t){return t(e)})),index:++r,value:e}})),DA(e,(function(e,t){e:{for(var r=-1,i=e.criteria,o=t.criteria,a=i.length,s=n.length;++r<a;){t:{var c=i[r],u=o[r];if(c!==u){var l=void 0!==c,h=null===c,d=c==c,f=he(c),p=void 0!==u,g=null===u,A=u==u,v=he(u);if(!g&&!v&&!f&&c>u||f&&p&&A&&!g&&!v||h&&p&&A||!l&&A||!d){c=1;break t}if(!h&&!f&&!v&&c<u||v&&l&&d&&!h&&!f||g&&l&&d||!p&&d||!A){c=-1;break t}}c=0}if(c){e=r>=s?c:c*("desc"==n[r]?-1:1);break e}}e=e.index-t.index}return e}))},hr=function(e,t){return pq(oq(e,t,Ch),e+"")},ir=hr((function(e,t){if(null==e)return[];var n=t.length;return 1<n&&Lh(e,t[0],t[1])?t=[]:2<n&&Lh(t[0],t[1],t[2])&&(t=[t[0]]),EA(e,Zh(t,1),[])})),jr=function(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})})),t}(Bz),kr=$a((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=[],r=function(e,t){return new WebSocket(e,t)};t.normalClosureMessage="Normal closure",t.default=function(e,i){var o=(i=void 0===i?{protocols:n,makeWebSocket:r}:i).protocols,a=void 0===o?n:o,s=void 0===(i=i.makeWebSocket)?r:i;return new jr.Observable((function(n){var r,i=new jr.Subject,o=s(e,a),c=!1,u=!1,l=function(e){if(r)throw c=!0,e=Error("Web socket message factory function called more than once"),n.error(e),e;return r=e.subscribe((function(e){o.send(e)})),i};return o.onopen=function(){u?(c=!0,o.close()):n.next(l)},o.onmessage=function(e){i.next(e.data)},o.onerror=function(e){c=!0,n.error(Error(e.message))},o.onclose=function(e){c||(c=!0,u?(n.complete(),i.complete()):n.error(Error(1e3===e.code?t.normalClosureMessage:e.reason)))},function(){u=!0,r&&r.unsubscribe(),c||(c=!0,o.close())}}))}}));!function(e){e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")&&e.default}(kr);var oi=function(e,t,n){(void 0===n||$f(e[t],n))&&(void 0!==n||t in e)||bg(e,t,n)},ni=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]},FA=function(e){return hr((function(t,n){var r=-1,i=n.length,o=1<i?n[i-1]:void 0,a=2<i?n[2]:void 0;for(o=3<e.length&&"function"==typeof o?(i--,o):void 0,a&&Lh(n[0],n[1],a)&&(o=3>i?void 0:o,i=1),t=Object(t);++r<i;)(a=n[r])&&e(t,a,r,o);return t}))}((function(e,t,n,r){sm(e,t,n,r)})),GA=Math.floor,HA=Math.random,lr=function(e,t){return e+GA(HA()*(t-e+1))},mr=function(e){var t=e.length;return t?e[lr(0,t-1)]:void 0},IA=function(e,t){return ge(t,(function(t){return e[t]}))},Mi=function(e){return null==e?[]:IA(e,Ad(e))},JA=function(e){return mr(Mi(e))},KA=function(e){return(Va(e)?mr:JA)(e)},wm=[],xm=function(e,t){return new WebSocket(e,t)},LA=Math.floor;P({target:"Number",stat:!0},{isInteger:function(e){return!ha(e)&&isFinite(e)&&LA(e)===e}}),zo("from",Cj,zj);var MA=function(e,t){for(var n=Array(arguments.length-1),r=0,i=2,o=!0;i<arguments.length;)n[r++]=arguments[i++];return new Promise((function(i,a){n[r]=function(e){if(o)if(o=!1,e)a(e);else{for(var t=Array(arguments.length-1),n=0;n<t.length;)t[n++]=arguments[n];i.apply(null,t)}};try{e.apply(t||null,n)}catch(e){o&&(o=!1,a(e))}}))},NA=$a((function(e,t){t.length=function(e){var t=e.length;if(!t)return 0;for(var n=0;1<--t%4&&"="===e.charAt(t);)++n;return Math.ceil(3*e.length)/4-n};var n=Array(64),r=Array(123);for(e=0;64>e;)r[n[e]=26>e?e+65:52>e?e+71:62>e?e-4:e-59|43]=e++;t.encode=function(e,t,r){for(var i,o=null,a=[],s=0,c=0;t<r;){var u=e[t++];switch(c){case 0:a[s++]=n[u>>2],i=(3&u)<<4,c=1;break;case 1:a[s++]=n[i|u>>4],i=(15&u)<<2,c=2;break;case 2:a[s++]=n[i|u>>6],a[s++]=n[63&u],c=0}8191<s&&((o||(o=[])).push(String.fromCharCode.apply(String,a)),s=0)}return c&&(a[s++]=n[i],a[s++]=61,1===c&&(a[s++]=61)),o?(s&&o.push(String.fromCharCode.apply(String,a.slice(0,s))),o.join("")):String.fromCharCode.apply(String,a.slice(0,s))},t.decode=function(e,t,n){for(var i,o=n,a=0,s=0;s<e.length;){var c=e.charCodeAt(s++);if(61===c&&1<a)break;if(void 0===(c=r[c]))throw Error("invalid encoding");switch(a){case 0:i=c,a=1;break;case 1:t[n++]=i<<2|(48&c)>>4,i=c,a=2;break;case 2:t[n++]=(15&i)<<4|(60&c)>>2,i=c,a=3;break;case 3:t[n++]=(3&i)<<6|c,a=0}}if(1===a)throw Error("invalid encoding");return n-o},t.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}}));yg.prototype.on=function(e,t,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:n||this}),this},yg.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else{e=this._listeners[e];for(var n=0;n<e.length;)e[n].fn===t?e.splice(n,1):++n}return this},yg.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var n=[],r=1;r<arguments.length;)n.push(arguments[r++]);for(r=0;r<t.length;)t[r].fn.apply(t[r++].ctx,n)}return this};var OA=ym(ym),PA=function(c){try{var a=eval("quire".replace(/^/,"re"))(c);if(a&&(a.length||Object.keys(a).length))return a}catch(e){}return null},QA=$a((function(e,t){t.length=function(e){for(var t,n=0,r=0;r<e.length;++r)128>(t=e.charCodeAt(r))?n+=1:2048>t?n+=2:55296==(64512&t)&&56320==(64512&e.charCodeAt(r+1))?(++r,n+=4):n+=3;return n},t.read=function(e,t,n){if(1>n-t)return"";for(var r,i=null,o=[],a=0;t<n;)128>(r=e[t++])?o[a++]=r:191<r&&224>r?o[a++]=(31&r)<<6|63&e[t++]:239<r&&365>r?(r=((7&r)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,o[a++]=55296+(r>>10),o[a++]=56320+(1023&r)):o[a++]=(15&r)<<12|(63&e[t++])<<6|63&e[t++],8191<a&&((i||(i=[])).push(String.fromCharCode.apply(String,o)),a=0);return i?(a&&i.push(String.fromCharCode.apply(String,o.slice(0,a))),i.join("")):String.fromCharCode.apply(String,o.slice(0,a))},t.write=function(e,t,n){for(var r,i,o=n,a=0;a<e.length;++a)128>(r=e.charCodeAt(a))?t[n++]=r:(2048>r?t[n++]=r>>6|192:(55296==(64512&r)&&56320==(64512&(i=e.charCodeAt(a+1)))?(r=65536+((1023&r)<<10)+(1023&i),++a,t[n++]=r>>18|240,t[n++]=r>>12&63|128):t[n++]=r>>12|224,t[n++]=r>>6&63|128),t[n++]=63&r|128);return n-o}})),RA=function(e,t,n){var r=n||8192,i=r>>>1,o=null,a=r;return function(n){return 1>n||n>i?e(n):(a+n>r&&(o=e(r),a=0),n=t.call(o,a,a+=n),7&a&&(a=1+(7|a)),n)}},Xd=Wa.zero=new Wa(0,0);Xd.toNumber=function(){return 0},Xd.zzEncode=Xd.zzDecode=function(){return this},Xd.length=function(){return 1};var SA=Wa.zeroHash="\0\0\0\0\0\0\0\0";Wa.fromNumber=function(e){if(0===e)return Xd;var t=0>e;t&&(e=-e);var n=e>>>0;return e=(e-n)/4294967296>>>0,t&&(e=~e>>>0,n=~n>>>0,4294967295<++n&&(n=0,4294967295<++e&&(e=0))),new Wa(n,e)},Wa.from=function(e){if("number"==typeof e)return Wa.fromNumber(e);if(V.isString(e)){if(!V.Long)return Wa.fromNumber(parseInt(e,10));e=V.Long.fromString(e)}return e.low||e.high?new Wa(e.low>>>0,e.high>>>0):Xd},Wa.prototype.toNumber=function(e){if(!e&&this.hi>>>31){e=1+~this.lo>>>0;var t=~this.hi>>>0;return e||(t=t+1>>>0),-(e+4294967296*t)}return this.lo+4294967296*this.hi},Wa.prototype.toLong=function(e){return V.Long?new V.Long(0|this.lo,0|this.hi,!!e):{low:0|this.lo,high:0|this.hi,unsigned:!!e}};var td=String.prototype.charCodeAt;Wa.fromHash=function(e){return e===SA?Xd:new Wa((td.call(e,0)|td.call(e,1)<<8|td.call(e,2)<<16|td.call(e,3)<<24)>>>0,(td.call(e,4)|td.call(e,5)<<8|td.call(e,6)<<16|td.call(e,7)<<24)>>>0)},Wa.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},Wa.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},Wa.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},Wa.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===t?16384>e?128>e?1:2:2097152>e?3:4:16384>t?128>t?5:6:2097152>t?7:8:128>n?9:10};var V=$a((function(e,t){function n(e,t,n){for(var r=Object.keys(t),i=0;i<r.length;++i)void 0!==e[r[i]]&&n||(e[r[i]]=t[r[i]]);return e}function r(e){function t(e,r){if(!(this instanceof t))return new t(e,r);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:Error().stack||""}),r&&n(this,r)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}t.asPromise=MA,t.base64=NA,t.EventEmitter=yg,t.float=OA,t.inquire=PA,t.utf8=QA,t.pool=RA,t.LongBits=Wa,t.isNode=!!(void 0!==Ya&&Ya&&Ya.process&&Ya.process.versions&&Ya.process.versions.node),t.global=t.isNode&&Ya||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||Ya,t.emptyArray=Object.freeze?Object.freeze([]):[],t.emptyObject=Object.freeze?Object.freeze({}):{},t.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},t.isString=function(e){return"string"==typeof e||e instanceof String},t.isObject=function(e){return e&&"object"===aa(e)},t.isset=t.isSet=function(e,t){var n=e[t];return!(null==n||!e.hasOwnProperty(t))&&("object"!==aa(n)||0<(Array.isArray(n)?n.length:Object.keys(n).length))},t.Buffer=function(){try{var e=t.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),t._Buffer_from=null,t._Buffer_allocUnsafe=null,t.newBuffer=function(e){return"number"==typeof e?t.Buffer?t._Buffer_allocUnsafe(e):new t.Array(e):t.Buffer?t._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},t.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,t.Long=t.global.dcodeIO&&t.global.dcodeIO.Long||t.global.Long||t.inquire("long"),t.key2Re=/^true|false|0|1$/,t.key32Re=/^-?(?:0|[1-9][0-9]*)$/,t.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,t.longToHash=function(e){return e?t.LongBits.from(e).toHash():t.LongBits.zeroHash},t.longFromHash=function(e,n){return e=t.LongBits.fromHash(e),t.Long?t.Long.fromBits(e.lo,e.hi,n):e.toNumber(!!n)},t.merge=n,t.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},t.newError=r,t.ProtocolError=r("ProtocolError"),t.oneOfGetter=function(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=1;return function(){for(var e=Object.keys(this),n=e.length-1;-1<n;--n)if(1===t[e[n]]&&void 0!==this[e[n]]&&null!==this[e[n]])return e[n]}},t.oneOfSetter=function(e){return function(t){for(var n=0;n<e.length;++n)e[n]!==t&&delete this[e[n]]}},t.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},t._configure=function(){var e=t.Buffer;e?(t._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,n){return new e(t,n)},t._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):t._Buffer_from=t._Buffer_allocUnsafe=null}})),wi=ja,dl,Mh=V.LongBits,nr=V.base64,or=V.utf8,pr=function(){return V.Buffer?function(){return(ja.create=function(){return new dl})()}:function(){return new ja}};ja.create=pr(),ja.alloc=function(e){return new V.Array(e)},V.Array!==Array&&(ja.alloc=V.pool(ja.alloc,V.Array.prototype.subarray)),ja.prototype._push=function(e,t,n){return this.tail=this.tail.next=new sf(e,t,n),this.len+=t,this},ti.prototype=Object.create(sf.prototype),ti.prototype.fn=function(e,t,n){for(;127<e;)t[n++]=127&e|128,e>>>=7;t[n]=e},ja.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new ti(128>(e>>>=0)?1:16384>e?2:2097152>e?3:268435456>e?4:5,e)).len,this},ja.prototype.int32=function(e){return 0>e?this._push(ui,10,Mh.fromNumber(e)):this.uint32(e)},ja.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},ja.prototype.uint64=function(e){return e=Mh.from(e),this._push(ui,e.length(),e)},ja.prototype.int64=ja.prototype.uint64,ja.prototype.sint64=function(e){return e=Mh.from(e).zzEncode(),this._push(ui,e.length(),e)},ja.prototype.bool=function(e){return this._push(si,1,e?1:0)},ja.prototype.fixed32=function(e){return this._push(vi,4,e>>>0)},ja.prototype.sfixed32=ja.prototype.fixed32,ja.prototype.fixed64=function(e){return e=Mh.from(e),this._push(vi,4,e.lo)._push(vi,4,e.hi)},ja.prototype.sfixed64=ja.prototype.fixed64,ja.prototype.float=function(e){return this._push(V.float.writeFloatLE,4,e)},ja.prototype.double=function(e){return this._push(V.float.writeDoubleLE,8,e)};var TA=V.Array.prototype.set?function(e,t,n){t.set(e,n)}:function(e,t,n){for(var r=0;r<e.length;++r)t[n+r]=e[r]};ja.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(si,1,0);if(V.isString(e)){var n=ja.alloc(t=nr.length(e));nr.decode(e,n,0),e=n}return this.uint32(t)._push(TA,t,e)},ja.prototype.string=function(e){var t=or.length(e);return t?this.uint32(t)._push(or.write,t,e):this._push(si,1,0)},ja.prototype.fork=function(){return this.states=new Qt(this),this.head=this.tail=new sf(ri,0,0),this.len=0,this},ja.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new sf(ri,0,0),this.len=0),this},ja.prototype.ldelim=function(){var e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this},ja.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t},ja._configure=function(e){dl=e,ja.create=pr(),dl._configure()},(jc.prototype=Object.create(wi.prototype)).constructor=jc,jc._configure=function(){jc.alloc=V._Buffer_allocUnsafe,jc.writeBytesBuffer=V.Buffer&&V.Buffer.prototype instanceof Uint8Array&&"set"===V.Buffer.prototype.set.name?function(e,t,n){t.set(e,n)}:function(e,t,n){if(e.copy)e.copy(t,n,0,e.length);else for(var r=0;r<e.length;)t[n++]=e[r++]}},jc.prototype.bytes=function(e){V.isString(e)&&(e=V._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(jc.writeBytesBuffer,t,e),this},jc.prototype.string=function(e){var t=V.Buffer.byteLength(e);return this.uint32(t),t&&this._push(Rt,t,e),this},jc._configure();var yi=Ka,el,Dm=V.LongBits,UA=V.utf8,qr="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new Ka(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new Ka(e);throw Error("illegal buffer")},rr=function(){return V.Buffer?function(e){return(Ka.create=function(e){return V.Buffer.isBuffer(e)?new el(e):qr(e)})(e)}:qr};Ka.create=rr(),Ka.prototype._slice=V.Array.prototype.subarray||V.Array.prototype.slice,Ka.prototype.uint32=function(){var e=4294967295;return function(){if(e=(127&this.buf[this.pos])>>>0,128>this.buf[this.pos++])return e;if(e=(e|(127&this.buf[this.pos])<<7)>>>0,128>this.buf[this.pos++])return e;if(e=(e|(127&this.buf[this.pos])<<14)>>>0,128>this.buf[this.pos++])return e;if(e=(e|(127&this.buf[this.pos])<<21)>>>0,128>this.buf[this.pos++])return e;if(e=(e|(15&this.buf[this.pos])<<28)>>>0,128>this.buf[this.pos++])return e;if((this.pos+=5)>this.len)throw this.pos=this.len,Yb(this,10);return e}}(),Ka.prototype.int32=function(){return 0|this.uint32()},Ka.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},Ka.prototype.bool=function(){return 0!==this.uint32()},Ka.prototype.fixed32=function(){if(this.pos+4>this.len)throw Yb(this,4);return zg(this.buf,this.pos+=4)},Ka.prototype.sfixed32=function(){if(this.pos+4>this.len)throw Yb(this,4);return 0|zg(this.buf,this.pos+=4)},Ka.prototype.float=function(){if(this.pos+4>this.len)throw Yb(this,4);var e=V.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},Ka.prototype.double=function(){if(this.pos+8>this.len)throw Yb(this,4);var e=V.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},Ka.prototype.bytes=function(){var e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw Yb(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,n):t===n?new this.buf.constructor(0):this._slice.call(this.buf,t,n)},Ka.prototype.string=function(){var e=this.bytes();return UA.read(e,0,e.length)},Ka.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw Yb(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw Yb(this)}while(128&this.buf[this.pos++]);return this},Ka.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},Ka._configure=function(e){el=e,Ka.create=rr(),el._configure();var t=V.Long?"toLong":"toNumber";V.merge(Ka.prototype,{int64:function(){return xi.call(this)[t](!1)},uint64:function(){return xi.call(this)[t](!0)},sint64:function(){return xi.call(this).zzDecode()[t](!1)},fixed64:function(){return Em.call(this)[t](!0)},sfixed64:function(){return Em.call(this)[t](!1)}})},(Fd.prototype=Object.create(yi.prototype)).constructor=Fd,Fd._configure=function(){V.Buffer&&(Fd.prototype._slice=V.Buffer.prototype.slice)},Fd.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},Fd._configure(),(tf.prototype=Object.create(V.EventEmitter.prototype)).constructor=tf,tf.prototype.rpcCall=function e(t,n,r,i,o){if(!i)throw TypeError("request must be specified");var a=this;if(!o)return V.asPromise(e,a,t,n,r,i);if(a.rpcImpl)try{return a.rpcImpl(t,n[a.requestDelimited?"encodeDelimited":"encode"](i).finish(),(function(e,n){if(e)return a.emit("error",e,t),o(e);if(null!==n){if(!(n instanceof r))try{n=r[a.responseDelimited?"decodeDelimited":"decode"](n)}catch(e){return a.emit("error",e,t),o(e)}return a.emit("data",n,t),o(null,n)}a.end(!0)}))}catch(e){a.emit("error",e,t),setTimeout((function(){o(e)}),0)}else setTimeout((function(){o(Error("already ended"))}),0)},tf.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};var VA=$a((function(e,t){t.Service=tf})),WA={},fc=$a((function(e,t){function n(){r.util._configure(),r.Writer._configure(r.BufferWriter),r.Reader._configure(r.BufferReader)}var r=t;r.build="minimal",r.Writer=wi,r.BufferWriter=jc,r.Reader=yi,r.BufferReader=Fd,r.util=V,r.rpc=VA,r.roots=WA,r.configure=n,n()}));fc.util.Long=U,fc.configure();var u=fc.Reader,N=fc.Writer,q=fc.util,t=fc.roots.default||(fc.roots.default={}),XA=t.URI=function(){var e={},t=Object.create(e);return t[e[0]="Unknown"]=0,t[e[1]="PingUri"]=1,t[e[2]="PongUri"]=2,t[e[11]="UserJoinUri"]=11,t[e[12]="UserRespUri"]=12,t[e[21]="UserQuitUri"]=21,t[e[22]="UserDropUri"]=22,t[e[31]="GroupEnterUri"]=31,t[e[32]="GroupLeaveUri"]=32,t[e[33]="GroupReplyUri"]=33,t[e[36]="GroupEnterNoticeUri"]=36,t[e[37]="GroupLeaveNoticeUri"]=37,t[e[38]="GroupEventNoticeUri"]=38,t[e[39]="GroupCountNoticeUri"]=39,t[e[41]="UserStatusListUri"]=41,t[e[42]="UserStatusResultUri"]=42,t[e[51]="GroupStatusListUri"]=51,t[e[52]="GroupStatusResultUri"]=52,t[e[55]="GroupAllUsersListUri"]=55,t[e[56]="GroupAllUsersResultUri"]=56,t[e[100]="MessageUri"]=100,t[e[101]="AckUri"]=101,t[e[115]="FileUploadIndexGetUri"]=115,t[e[116]="FileUploadIndexRetUri"]=116,t[e[117]="FileUploadIndexSetUri"]=117,t[e[118]="FileUploadIndexFinUri"]=118,t[e[119]="FileUploadIndexErrUri"]=119,t[e[125]="FileDownloadIndexGetUri"]=125,t[e[126]="FileDownloadIndexRetUri"]=126,t[e[127]="FileDownloadIndexErrUri"]=127,t[e[201]="UserJoinNoticeUri"]=201,t[e[202]="UserQuitNoticeUri"]=202,t[e[203]="UserWaitNoticeUri"]=203,t[e[301]="UserAttributeGetUri"]=301,t[e[302]="UserAttributeRetUri"]=302,t[e[303]="UserAttributeSetUri"]=303,t[e[304]="UserAttributeModUri"]=304,t[e[305]="UserAttributeDelUri"]=305,t[e[307]="UserAttributeRspUri"]=307,t[e[308]="UserAttributeErrUri"]=308,t[e[311]="UserAttributeKeysGetUri"]=311,t[e[312]="UserAttributeKeysRetUri"]=312,t[e[351]="GroupAttributeGetUri"]=351,t[e[352]="GroupAttributeRetUri"]=352,t[e[353]="GroupAttributeSetUri"]=353,t[e[354]="GroupAttributeModUri"]=354,t[e[355]="GroupAttributeDelUri"]=355,t[e[356]="GroupAttributeAltUri"]=356,t[e[357]="GroupAttributeRspUri"]=357,t[e[358]="GroupAttributeErrUri"]=358,t[e[361]="GroupAttributeKeysGetUri"]=361,t[e[362]="GroupAttributeKeysRetUri"]=362,t[e[401]="SubscribeUserStatusUri"]=401,t[e[402]="UnsubscribeUserStatusUri"]=402,t[e[499]="SubscribeResponseUri"]=499,t}(),Nh=t.Wrapper=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.uri=0,e.prototype.data=q.newBuffer([]),e.encode=function(e,t){return t||(t=N.create()),null!=e.uri&&Object.hasOwnProperty.call(e,"uri")&&t.uint32(8).int32(e.uri),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&t.uint32(18).bytes(e.data),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.Wrapper;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.uri=e.int32();break;case 2:r.data=e.bytes();break;default:e.skipType(7&i)}}return r},e}(),YA=t.Ping=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.ms=q.Long?q.Long.fromBits(0,0,!0):0,e.encode=function(e,t){return t||(t=N.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.ms&&Object.hasOwnProperty.call(e,"ms")&&t.uint32(16).uint64(e.ms),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.Ping;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.ms=e.uint64();break;default:e.skipType(7&i)}}return r},e}(),ZA=t.Pong=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.ms=q.Long?q.Long.fromBits(0,0,!0):0,e.encode=function(e,t){return t||(t=N.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.ms&&Object.hasOwnProperty.call(e,"ms")&&t.uint32(16).uint64(e.ms),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.Pong;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.ms=e.uint64();break;default:e.skipType(7&i)}}return r},e}(),$A=t.UserJoin=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.opt=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.instance=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.account="",e.prototype.ticket="",e.encode=function(e,t){return t||(t=N.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.opt&&Object.hasOwnProperty.call(e,"opt")&&t.uint32(16).uint64(e.opt),null!=e.instance&&Object.hasOwnProperty.call(e,"instance")&&t.uint32(24).uint64(e.instance),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(34).string(e.account),null!=e.ticket&&Object.hasOwnProperty.call(e,"ticket")&&t.uint32(42).string(e.ticket),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserJoin;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.opt=e.uint64();break;case 3:r.instance=e.uint64();break;case 4:r.account=e.string();break;case 5:r.ticket=e.string();break;default:e.skipType(7&i)}}return r},e}(),aB=t.UserResp=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.account="",e.prototype.code=0,e.encode=function(e,t){return t||(t=N.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(18).string(e.account),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(24).uint32(e.code),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserResp;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.account=e.string();break;case 3:r.code=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),bB=t.UserQuit=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.encode=function(e,t){return t||(t=N.create()),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserQuit;e.pos<n;){var i=e.uint32();e.skipType(7&i)}return r},e}(),cB=t.UserDrop=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.code=0,e.encode=function(e,t){return t||(t=N.create()),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(8).uint32(e.code),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserDrop;e.pos<n;){var i=e.uint32();i>>>3==1?r.code=e.uint32():e.skipType(7&i)}return r},e}(),dB=t.GroupEnter=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.account="",e.encode=function(e,t){return t||(t=N.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(18).string(e.account),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupEnter;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.account=e.string();break;default:e.skipType(7&i)}}return r},e}(),eB=t.GroupLeave=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.account="",e.encode=function(e,t){return t||(t=N.create()),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(10).string(e.account),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupLeave;e.pos<n;){var i=e.uint32();i>>>3==1?r.account=e.string():e.skipType(7&i)}return r},e}(),fB=t.GroupReply=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.account="",e.prototype.code=0,e.encode=function(e,t){return t||(t=N.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(18).string(e.account),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(24).uint32(e.code),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupReply;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.account=e.string();break;case 3:r.code=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),sr=t.GroupLeaveNotice=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.user="",e.prototype.group="",e.prototype.instance=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.size=0,e.encode=function(e,t){return t||(t=N.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.user&&Object.hasOwnProperty.call(e,"user")&&t.uint32(18).string(e.user),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(26).string(e.group),null!=e.instance&&Object.hasOwnProperty.call(e,"instance")&&t.uint32(32).uint64(e.instance),null!=e.size&&Object.hasOwnProperty.call(e,"size")&&t.uint32(40).uint32(e.size),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupLeaveNotice;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.user=e.string();break;case 3:r.group=e.string();break;case 4:r.instance=e.uint64();break;case 5:r.size=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),tr=t.GroupEnterNotice=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.user="",e.prototype.group="",e.prototype.instance=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.size=0,e.encode=function(e,t){return t||(t=N.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.user&&Object.hasOwnProperty.call(e,"user")&&t.uint32(18).string(e.user),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(26).string(e.group),null!=e.instance&&Object.hasOwnProperty.call(e,"instance")&&t.uint32(32).uint64(e.instance),null!=e.size&&Object.hasOwnProperty.call(e,"size")&&t.uint32(40).uint32(e.size),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupEnterNotice;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.user=e.string();break;case 3:r.group=e.string();break;case 4:r.instance=e.uint64();break;case 5:r.size=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),ur=t.Message=function(){function e(e){if(this.MiscMap={},e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.instance=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.dialogue=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.sequence=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.options=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.src="",e.prototype.dst="",e.prototype.payload=q.newBuffer([]),e.prototype.MiscMap=q.emptyObject,e.prototype.ms=q.Long?q.Long.fromBits(0,0,!0):0,e.encode=function(e,t){if(t||(t=N.create()),null!=e.instance&&Object.hasOwnProperty.call(e,"instance")&&t.uint32(8).uint64(e.instance),null!=e.dialogue&&Object.hasOwnProperty.call(e,"dialogue")&&t.uint32(16).uint64(e.dialogue),null!=e.sequence&&Object.hasOwnProperty.call(e,"sequence")&&t.uint32(24).uint64(e.sequence),null!=e.options&&Object.hasOwnProperty.call(e,"options")&&t.uint32(32).uint64(e.options),null!=e.src&&Object.hasOwnProperty.call(e,"src")&&t.uint32(42).string(e.src),null!=e.dst&&Object.hasOwnProperty.call(e,"dst")&&t.uint32(50).string(e.dst),null!=e.payload&&Object.hasOwnProperty.call(e,"payload")&&t.uint32(58).bytes(e.payload),null!=e.MiscMap&&Object.hasOwnProperty.call(e,"MiscMap"))for(var n=Object.keys(e.MiscMap),r=0;r<n.length;++r)t.uint32(66).fork().uint32(10).string(n[r]).uint32(18).bytes(e.MiscMap[n[r]]).ldelim();return null!=e.ms&&Object.hasOwnProperty.call(e,"ms")&&t.uint32(72).uint64(e.ms),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r,i,o=new t.Message;e.pos<n;)switch(r=e.uint32(),r>>>3){case 1:o.instance=e.uint64();break;case 2:o.dialogue=e.uint64();break;case 3:o.sequence=e.uint64();break;case 4:o.options=e.uint64();break;case 5:o.src=e.string();break;case 6:o.dst=e.string();break;case 7:o.payload=e.bytes();break;case 8:o.MiscMap===q.emptyObject&&(o.MiscMap={});var a=e.uint32()+e.pos;for(r="",i=[];e.pos<a;){var s=e.uint32();switch(s>>>3){case 1:r=e.string();break;case 2:i=e.bytes();break;default:e.skipType(7&s)}}o.MiscMap[r]=i;break;case 9:o.ms=e.uint64();break;default:e.skipType(7&r)}return o},e}(),vr=t.Ack=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.instance=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.dialogue=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.sequence=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.code=0,e.encode=function(e,t){return t||(t=N.create()),null!=e.instance&&Object.hasOwnProperty.call(e,"instance")&&t.uint32(8).uint64(e.instance),null!=e.dialogue&&Object.hasOwnProperty.call(e,"dialogue")&&t.uint32(16).uint64(e.dialogue),null!=e.sequence&&Object.hasOwnProperty.call(e,"sequence")&&t.uint32(24).uint64(e.sequence),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(32).uint32(e.code),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.Ack;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.instance=e.uint64();break;case 2:r.dialogue=e.uint64();break;case 3:r.sequence=e.uint64();break;case 4:r.code=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),gB=t.FileUploadIndexGet=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.hash=q.newBuffer([]),e.prototype.size=0,e.encode=function(e,t){return t||(t=N.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.hash&&Object.hasOwnProperty.call(e,"hash")&&t.uint32(18).bytes(e.hash),null!=e.size&&Object.hasOwnProperty.call(e,"size")&&t.uint32(24).uint32(e.size),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.FileUploadIndexGet;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.hash=e.bytes();break;case 3:r.size=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),hB=t.FileUploadIndexRet=function(){function e(e){if(this.servers=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.unit=0,e.prototype.servers=q.emptyArray,e.encode=function(e,t){if(t||(t=N.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.unit&&Object.hasOwnProperty.call(e,"unit")&&t.uint32(16).uint32(e.unit),null!=e.servers&&e.servers.length){t.uint32(26).fork();for(var n=0;n<e.servers.length;++n)t.uint32(e.servers[n]);t.ldelim()}return t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.FileUploadIndexRet;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.unit=e.uint32();break;case 3:if(r.servers&&r.servers.length||(r.servers=[]),2==(7&i))for(i=e.uint32()+e.pos;e.pos<i;)r.servers.push(e.uint32());else r.servers.push(e.uint32());break;default:e.skipType(7&i)}}return r},e}(),iB=t.FileUploadIndexSet=function(){function e(e){if(this.servers=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.hash=q.newBuffer([]),e.prototype.unit=0,e.prototype.servers=q.emptyArray,e.encode=function(e,t){if(t||(t=N.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.hash&&Object.hasOwnProperty.call(e,"hash")&&t.uint32(18).bytes(e.hash),null!=e.unit&&Object.hasOwnProperty.call(e,"unit")&&t.uint32(24).uint32(e.unit),null!=e.servers&&e.servers.length){t.uint32(34).fork();for(var n=0;n<e.servers.length;++n)t.uint32(e.servers[n]);t.ldelim()}return t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.FileUploadIndexSet;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.hash=e.bytes();break;case 3:r.unit=e.uint32();break;case 4:if(r.servers&&r.servers.length||(r.servers=[]),2==(7&i))for(i=e.uint32()+e.pos;e.pos<i;)r.servers.push(e.uint32());else r.servers.push(e.uint32());break;default:e.skipType(7&i)}}return r},e}(),jB=t.FileUploadIndexFin=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.zone=0,e.prototype.unit=0,e.encode=function(e,t){return t||(t=N.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.zone&&Object.hasOwnProperty.call(e,"zone")&&t.uint32(16).uint32(e.zone),null!=e.unit&&Object.hasOwnProperty.call(e,"unit")&&t.uint32(24).uint32(e.unit),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.FileUploadIndexFin;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.zone=e.uint32();break;case 3:r.unit=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),kB=t.FileUploadIndexErr=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.code=0,e.encode=function(e,t){return t||(t=N.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(16).uint32(e.code),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.FileUploadIndexErr;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.code=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),lB=t.FileDownloadIndexGet=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.zone=0,e.prototype.hash=q.newBuffer([]),e.prototype.size=0,e.prototype.unit=0,e.encode=function(e,t){return t||(t=N.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.zone&&Object.hasOwnProperty.call(e,"zone")&&t.uint32(16).uint32(e.zone),null!=e.hash&&Object.hasOwnProperty.call(e,"hash")&&t.uint32(26).bytes(e.hash),null!=e.size&&Object.hasOwnProperty.call(e,"size")&&t.uint32(32).uint32(e.size),null!=e.unit&&Object.hasOwnProperty.call(e,"unit")&&t.uint32(40).uint32(e.unit),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.FileDownloadIndexGet;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.zone=e.uint32();break;case 3:r.hash=e.bytes();break;case 4:r.size=e.uint32();break;case 5:r.unit=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),mB=t.FileDownloadIndexRet=function(){function e(e){if(this.servers=[],this.backups=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.unit=0,e.prototype.zone=0,e.prototype.servers=q.emptyArray,e.prototype.backups=q.emptyArray,e.encode=function(e,t){if(t||(t=N.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.unit&&Object.hasOwnProperty.call(e,"unit")&&t.uint32(16).uint32(e.unit),null!=e.zone&&Object.hasOwnProperty.call(e,"zone")&&t.uint32(24).uint32(e.zone),null!=e.servers&&e.servers.length){t.uint32(34).fork();for(var n=0;n<e.servers.length;++n)t.uint32(e.servers[n]);t.ldelim()}if(null!=e.backups&&e.backups.length){for(t.uint32(42).fork(),n=0;n<e.backups.length;++n)t.uint32(e.backups[n]);t.ldelim()}return t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.FileDownloadIndexRet;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.unit=e.uint32();break;case 3:r.zone=e.uint32();break;case 4:if(r.servers&&r.servers.length||(r.servers=[]),2==(7&i))for(i=e.uint32()+e.pos;e.pos<i;)r.servers.push(e.uint32());else r.servers.push(e.uint32());break;case 5:if(r.backups&&r.backups.length||(r.backups=[]),2==(7&i))for(i=e.uint32()+e.pos;e.pos<i;)r.backups.push(e.uint32());else r.backups.push(e.uint32());break;default:e.skipType(7&i)}}return r},e}(),nB=t.FileDownloadIndexErr=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.code=0,e.encode=function(e,t){return t||(t=N.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(16).uint32(e.code),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.FileDownloadIndexErr;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.code=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),oB=t.GroupAllUsersList=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.group="",e.prototype.pageSize=0,e.prototype.pageNumber=0,e.encode=function(e,t){return t||(t=N.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(18).string(e.group),null!=e.pageSize&&Object.hasOwnProperty.call(e,"pageSize")&&t.uint32(24).uint32(e.pageSize),null!=e.pageNumber&&Object.hasOwnProperty.call(e,"pageNumber")&&t.uint32(32).uint32(e.pageNumber),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupAllUsersList;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.group=e.string();break;case 3:r.pageSize=e.uint32();break;case 4:r.pageNumber=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),pB=t.GroupAllUsersResult=function(){function e(e){if(this.memberInfos=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.group="",e.prototype.totalSize=0,e.prototype.pageSize=0,e.prototype.pageNumber=0,e.prototype.memberInfos=q.emptyArray,e.encode=function(e,n){if(n||(n=N.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&n.uint32(8).uint64(e.seq),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&n.uint32(18).string(e.group),null!=e.totalSize&&Object.hasOwnProperty.call(e,"totalSize")&&n.uint32(24).uint32(e.totalSize),null!=e.pageSize&&Object.hasOwnProperty.call(e,"pageSize")&&n.uint32(32).uint32(e.pageSize),null!=e.pageNumber&&Object.hasOwnProperty.call(e,"pageNumber")&&n.uint32(40).uint32(e.pageNumber),null!=e.memberInfos&&e.memberInfos.length)for(var r=0;r<e.memberInfos.length;++r)t.GroupAllUsersResult.MemberInfo.encode(e.memberInfos[r],n.uint32(50).fork()).ldelim();return n},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupAllUsersResult;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.group=e.string();break;case 3:r.totalSize=e.uint32();break;case 4:r.pageSize=e.uint32();break;case 5:r.pageNumber=e.uint32();break;case 6:r.memberInfos&&r.memberInfos.length||(r.memberInfos=[]),r.memberInfos.push(t.GroupAllUsersResult.MemberInfo.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return r},e.MemberInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.account="",e.prototype.ts=0,e.encode=function(e,t){return t||(t=N.create()),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(10).string(e.account),null!=e.ts&&Object.hasOwnProperty.call(e,"ts")&&t.uint32(16).uint32(e.ts),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupAllUsersResult.MemberInfo;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.account=e.string();break;case 2:r.ts=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),e}(),qB=t.UserStatusList=function(){function e(e){if(this.users=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.users=q.emptyArray,e.encode=function(e,t){if(t||(t=N.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.users&&e.users.length)for(var n=0;n<e.users.length;++n)t.uint32(18).string(e.users[n]);return t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserStatusList;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.users&&r.users.length||(r.users=[]),r.users.push(e.string());break;default:e.skipType(7&i)}}return r},e}(),rB=t.UserStatusResult=function(){function e(e){if(this.userInfos=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.userInfos=q.emptyArray,e.encode=function(e,n){if(n||(n=N.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&n.uint32(8).uint64(e.seq),null!=e.userInfos&&e.userInfos.length)for(var r=0;r<e.userInfos.length;++r)t.UserStatusResult.UserStatusInfo.encode(e.userInfos[r],n.uint32(18).fork()).ldelim();return n},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserStatusResult;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.userInfos&&r.userInfos.length||(r.userInfos=[]),r.userInfos.push(t.UserStatusResult.UserStatusInfo.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return r},e.UserStatusInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.account="",e.prototype.ts=0,e.encode=function(e,t){return t||(t=N.create()),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(10).string(e.account),null!=e.ts&&Object.hasOwnProperty.call(e,"ts")&&t.uint32(16).uint32(e.ts),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserStatusResult.UserStatusInfo;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.account=e.string();break;case 2:r.ts=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),e}(),sB=t.UserAttributeGet=function(){function e(e){if(this.attributes=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.account="",e.prototype.attributes=q.emptyArray,e.encode=function(e,t){if(t||(t=N.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(18).string(e.account),null!=e.attributes&&e.attributes.length)for(var n=0;n<e.attributes.length;++n)t.uint32(26).string(e.attributes[n]);return t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserAttributeGet;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.account=e.string();break;case 3:r.attributes&&r.attributes.length||(r.attributes=[]),r.attributes.push(e.string());break;default:e.skipType(7&i)}}return r},e}(),tB=t.UserAttributeRet=function(){function e(e){if(this.attributeInfos=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.attributeInfos=q.emptyArray,e.encode=function(e,n){if(n||(n=N.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&n.uint32(8).uint64(e.seq),null!=e.attributeInfos&&e.attributeInfos.length)for(var r=0;r<e.attributeInfos.length;++r)t.UserAttributeRet.AttributeInfo.encode(e.attributeInfos[r],n.uint32(18).fork()).ldelim();return n},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserAttributeRet;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.attributeInfos&&r.attributeInfos.length||(r.attributeInfos=[]),r.attributeInfos.push(t.UserAttributeRet.AttributeInfo.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return r},e.AttributeInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.key="",e.prototype.value="",e.encode=function(e,t){return t||(t=N.create()),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(18).string(e.value),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserAttributeRet.AttributeInfo;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.key=e.string();break;case 2:r.value=e.string();break;default:e.skipType(7&i)}}return r},e}(),e}(),uB=t.UserAttributeSet=function(){function e(e){if(this.attributeInfos=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.account="",e.prototype.attributeInfos=q.emptyArray,e.encode=function(e,n){if(n||(n=N.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&n.uint32(8).uint64(e.seq),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&n.uint32(18).string(e.account),null!=e.attributeInfos&&e.attributeInfos.length)for(var r=0;r<e.attributeInfos.length;++r)t.UserAttributeSet.AttributeInfo.encode(e.attributeInfos[r],n.uint32(26).fork()).ldelim();return n},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserAttributeSet;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.account=e.string();break;case 3:r.attributeInfos&&r.attributeInfos.length||(r.attributeInfos=[]),r.attributeInfos.push(t.UserAttributeSet.AttributeInfo.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return r},e.AttributeInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.key="",e.prototype.value="",e.encode=function(e,t){return t||(t=N.create()),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(18).string(e.value),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserAttributeSet.AttributeInfo;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.key=e.string();break;case 2:r.value=e.string();break;default:e.skipType(7&i)}}return r},e}(),e}(),vB=t.UserAttributeMod=function(){function e(e){if(this.attributeInfos=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.account="",e.prototype.attributeInfos=q.emptyArray,e.encode=function(e,n){if(n||(n=N.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&n.uint32(8).uint64(e.seq),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&n.uint32(18).string(e.account),null!=e.attributeInfos&&e.attributeInfos.length)for(var r=0;r<e.attributeInfos.length;++r)t.UserAttributeMod.AttributeInfo.encode(e.attributeInfos[r],n.uint32(26).fork()).ldelim();return n},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserAttributeMod;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.account=e.string();break;case 3:r.attributeInfos&&r.attributeInfos.length||(r.attributeInfos=[]),r.attributeInfos.push(t.UserAttributeMod.AttributeInfo.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return r},e.AttributeInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.key="",e.prototype.value="",e.encode=function(e,t){return t||(t=N.create()),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(18).string(e.value),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserAttributeMod.AttributeInfo;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.key=e.string();break;case 2:r.value=e.string();break;default:e.skipType(7&i)}}return r},e}(),e}(),wB=t.UserAttributeDel=function(){function e(e){if(this.attributes=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.account="",e.prototype.attributes=q.emptyArray,e.encode=function(e,t){if(t||(t=N.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(18).string(e.account),null!=e.attributes&&e.attributes.length)for(var n=0;n<e.attributes.length;++n)t.uint32(26).string(e.attributes[n]);return t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserAttributeDel;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.account=e.string();break;case 3:r.attributes&&r.attributes.length||(r.attributes=[]),r.attributes.push(e.string());break;default:e.skipType(7&i)}}return r},e}(),xB=t.UserAttributeErr=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.code=0,e.encode=function(e,t){return t||(t=N.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(16).uint32(e.code),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserAttributeErr;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.code=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),yB=t.UserAttributeKeysGet=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.account="",e.encode=function(e,t){return t||(t=N.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(18).string(e.account),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserAttributeKeysGet;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.account=e.string();break;default:e.skipType(7&i)}}return r},e}(),zB=t.UserAttributeKeysRet=function(){function e(e){if(this.keys=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.keys=q.emptyArray,e.encode=function(e,t){if(t||(t=N.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.keys&&e.keys.length)for(var n=0;n<e.keys.length;++n)t.uint32(18).string(e.keys[n]);return t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserAttributeKeysRet;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.keys&&r.keys.length||(r.keys=[]),r.keys.push(e.string());break;default:e.skipType(7&i)}}return r},e}(),AB=t.UserAttributeRsp=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.encode=function(e,t){return t||(t=N.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserAttributeRsp;e.pos<n;){var i=e.uint32();i>>>3==1?r.seq=e.uint64():e.skipType(7&i)}return r},e}(),BB=t.GroupStatusList=function(){function e(e){if(this.groups=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.groups=q.emptyArray,e.encode=function(e,t){if(t||(t=N.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.groups&&e.groups.length)for(var n=0;n<e.groups.length;++n)t.uint32(18).string(e.groups[n]);return t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupStatusList;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.groups&&r.groups.length||(r.groups=[]),r.groups.push(e.string());break;default:e.skipType(7&i)}}return r},e}(),CB=t.GroupStatusResult=function(){function e(e){if(this.groupInfos=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.groupInfos=q.emptyArray,e.encode=function(e,n){if(n||(n=N.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&n.uint32(8).uint64(e.seq),null!=e.groupInfos&&e.groupInfos.length)for(var r=0;r<e.groupInfos.length;++r)t.GroupStatusResult.GroupInfo.encode(e.groupInfos[r],n.uint32(18).fork()).ldelim();return n},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupStatusResult;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.groupInfos&&r.groupInfos.length||(r.groupInfos=[]),r.groupInfos.push(t.GroupStatusResult.GroupInfo.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return r},e.GroupInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.group="",e.prototype.memberCount=0,e.encode=function(e,t){return t||(t=N.create()),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(10).string(e.group),null!=e.memberCount&&Object.hasOwnProperty.call(e,"memberCount")&&t.uint32(16).uint32(e.memberCount),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupStatusResult.GroupInfo;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.group=e.string();break;case 2:r.memberCount=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),e}(),DB=t.GroupCountNotice=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.instance=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.group="",e.prototype.size=0,e.encode=function(e,t){return t||(t=N.create()),null!=e.instance&&Object.hasOwnProperty.call(e,"instance")&&t.uint32(8).uint64(e.instance),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(16).uint64(e.seq),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(26).string(e.group),null!=e.size&&Object.hasOwnProperty.call(e,"size")&&t.uint32(32).uint32(e.size),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupCountNotice;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.instance=e.uint64();break;case 2:r.seq=e.uint64();break;case 3:r.group=e.string();break;case 4:r.size=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),EB=t.GroupAttributeGet=function(){function e(e){if(this.attributes=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.group="",e.prototype.attributes=q.emptyArray,e.encode=function(e,t){if(t||(t=N.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(18).string(e.group),null!=e.attributes&&e.attributes.length)for(var n=0;n<e.attributes.length;++n)t.uint32(26).string(e.attributes[n]);return t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupAttributeGet;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.group=e.string();break;case 3:r.attributes&&r.attributes.length||(r.attributes=[]),r.attributes.push(e.string());break;default:e.skipType(7&i)}}return r},e}(),FB=t.GroupAttributeRet=function(){function e(e){if(this.attributeMaps=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.attributeMaps=q.emptyArray,e.encode=function(e,n){if(n||(n=N.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&n.uint32(8).uint64(e.seq),null!=e.attributeMaps&&e.attributeMaps.length)for(var r=0;r<e.attributeMaps.length;++r)t.GroupAttributeRet.AttributeMap.encode(e.attributeMaps[r],n.uint32(18).fork()).ldelim();return n},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupAttributeRet;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.attributeMaps&&r.attributeMaps.length||(r.attributeMaps=[]),r.attributeMaps.push(t.GroupAttributeRet.AttributeMap.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return r},e.AttributeMap=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.key="",e.prototype.value="",e.prototype.origin="",e.prototype.ms=q.Long?q.Long.fromBits(0,0,!0):0,e.encode=function(e,t){return t||(t=N.create()),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(18).string(e.value),null!=e.origin&&Object.hasOwnProperty.call(e,"origin")&&t.uint32(26).string(e.origin),null!=e.ms&&Object.hasOwnProperty.call(e,"ms")&&t.uint32(32).uint64(e.ms),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupAttributeRet.AttributeMap;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.key=e.string();break;case 2:r.value=e.string();break;case 3:r.origin=e.string();break;case 4:r.ms=e.uint64();break;default:e.skipType(7&i)}}return r},e}(),e}(),GB=t.GroupAttributeSet=function(){function e(e){if(this.attributeInfos=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.group="",e.prototype.broadcast=!1,e.prototype.attributeInfos=q.emptyArray,e.encode=function(e,n){if(n||(n=N.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&n.uint32(8).uint64(e.seq),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&n.uint32(18).string(e.group),null!=e.broadcast&&Object.hasOwnProperty.call(e,"broadcast")&&n.uint32(24).bool(e.broadcast),null!=e.attributeInfos&&e.attributeInfos.length)for(var r=0;r<e.attributeInfos.length;++r)t.GroupAttributeSet.AttributeInfo.encode(e.attributeInfos[r],n.uint32(34).fork()).ldelim();return n},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupAttributeSet;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.group=e.string();break;case 3:r.broadcast=e.bool();break;case 4:r.attributeInfos&&r.attributeInfos.length||(r.attributeInfos=[]),r.attributeInfos.push(t.GroupAttributeSet.AttributeInfo.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return r},e.AttributeInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.key="",e.prototype.value="",e.encode=function(e,t){return t||(t=N.create()),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(18).string(e.value),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupAttributeSet.AttributeInfo;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.key=e.string();break;case 2:r.value=e.string();break;default:e.skipType(7&i)}}return r},e}(),e}(),HB=t.GroupAttributeMod=function(){function e(e){if(this.attributeInfos=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.group="",e.prototype.broadcast=!1,e.prototype.attributeInfos=q.emptyArray,e.encode=function(e,n){if(n||(n=N.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&n.uint32(8).uint64(e.seq),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&n.uint32(18).string(e.group),null!=e.broadcast&&Object.hasOwnProperty.call(e,"broadcast")&&n.uint32(24).bool(e.broadcast),null!=e.attributeInfos&&e.attributeInfos.length)for(var r=0;r<e.attributeInfos.length;++r)t.GroupAttributeMod.AttributeInfo.encode(e.attributeInfos[r],n.uint32(34).fork()).ldelim();return n},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupAttributeMod;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.group=e.string();break;case 3:r.broadcast=e.bool();break;case 4:r.attributeInfos&&r.attributeInfos.length||(r.attributeInfos=[]),r.attributeInfos.push(t.GroupAttributeMod.AttributeInfo.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return r},e.AttributeInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.key="",e.prototype.value="",e.encode=function(e,t){return t||(t=N.create()),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(18).string(e.value),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupAttributeMod.AttributeInfo;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.key=e.string();break;case 2:r.value=e.string();break;default:e.skipType(7&i)}}return r},e}(),e}(),IB=t.GroupAttributeDel=function(){function e(e){if(this.attributes=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.group="",e.prototype.broadcast=!1,e.prototype.attributes=q.emptyArray,e.encode=function(e,t){if(t||(t=N.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(18).string(e.group),null!=e.broadcast&&Object.hasOwnProperty.call(e,"broadcast")&&t.uint32(24).bool(e.broadcast),null!=e.attributes&&e.attributes.length)for(var n=0;n<e.attributes.length;++n)t.uint32(34).string(e.attributes[n]);return t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupAttributeDel;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.group=e.string();break;case 3:r.broadcast=e.bool();break;case 4:r.attributes&&r.attributes.length||(r.attributes=[]),r.attributes.push(e.string());break;default:e.skipType(7&i)}}return r},e}(),JB=t.GroupAttributeAlt=function(){function e(e){if(this.attributeMaps=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.group="",e.prototype.instance=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.attributeMaps=q.emptyArray,e.encode=function(e,n){if(n||(n=N.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&n.uint32(8).uint64(e.seq),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&n.uint32(18).string(e.group),null!=e.instance&&Object.hasOwnProperty.call(e,"instance")&&n.uint32(24).uint64(e.instance),null!=e.attributeMaps&&e.attributeMaps.length)for(var r=0;r<e.attributeMaps.length;++r)t.GroupAttributeAlt.AttributeMap.encode(e.attributeMaps[r],n.uint32(34).fork()).ldelim();return n},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupAttributeAlt;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.group=e.string();break;case 3:r.instance=e.uint64();break;case 4:r.attributeMaps&&r.attributeMaps.length||(r.attributeMaps=[]),r.attributeMaps.push(t.GroupAttributeAlt.AttributeMap.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return r},e.AttributeMap=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.key="",e.prototype.value="",e.prototype.origin="",e.prototype.ms=q.Long?q.Long.fromBits(0,0,!0):0,e.encode=function(e,t){return t||(t=N.create()),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(18).string(e.value),null!=e.origin&&Object.hasOwnProperty.call(e,"origin")&&t.uint32(26).string(e.origin),null!=e.ms&&Object.hasOwnProperty.call(e,"ms")&&t.uint32(32).uint64(e.ms),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupAttributeAlt.AttributeMap;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.key=e.string();break;case 2:r.value=e.string();break;case 3:r.origin=e.string();break;case 4:r.ms=e.uint64();break;default:e.skipType(7&i)}}return r},e}(),e}(),KB=t.GroupAttributeRsp=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.encode=function(e,t){return t||(t=N.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupAttributeRsp;e.pos<n;){var i=e.uint32();i>>>3==1?r.seq=e.uint64():e.skipType(7&i)}return r},e}(),LB=t.GroupAttributeErr=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.code=0,e.encode=function(e,t){return t||(t=N.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(16).uint32(e.code),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupAttributeErr;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.code=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),MB=t.GroupAttributeKeysGet=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.group="",e.encode=function(e,t){return t||(t=N.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(18).string(e.group),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupAttributeKeysGet;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.group=e.string();break;default:e.skipType(7&i)}}return r},e}(),NB=t.GroupAttributeKeysRet=function(){function e(e){if(this.keys=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.keys=q.emptyArray,e.encode=function(e,t){if(t||(t=N.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.keys&&e.keys.length)for(var n=0;n<e.keys.length;++n)t.uint32(18).string(e.keys[n]);return t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupAttributeKeysRet;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.keys&&r.keys.length||(r.keys=[]),r.keys.push(e.string());break;default:e.skipType(7&i)}}return r},e}(),OB=t.SubscribeUserStatus=function(){function e(e){if(this.users=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.users=q.emptyArray,e.encode=function(e,t){if(t||(t=N.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.users&&e.users.length)for(var n=0;n<e.users.length;++n)t.uint32(18).string(e.users[n]);return t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.SubscribeUserStatus;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.users&&r.users.length||(r.users=[]),r.users.push(e.string());break;default:e.skipType(7&i)}}return r},e}(),PB=t.UnsubscribeUserStatus=function(){function e(e){if(this.users=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.users=q.emptyArray,e.encode=function(e,t){if(t||(t=N.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.users&&e.users.length)for(var n=0;n<e.users.length;++n)t.uint32(18).string(e.users[n]);return t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UnsubscribeUserStatus;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.users&&r.users.length||(r.users=[]),r.users.push(e.string());break;default:e.skipType(7&i)}}return r},e}(),QB=t.UserJoinNotice=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.instance=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.user="",e.encode=function(e,t){return t||(t=N.create()),null!=e.instance&&Object.hasOwnProperty.call(e,"instance")&&t.uint32(8).uint64(e.instance),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(16).uint64(e.seq),null!=e.user&&Object.hasOwnProperty.call(e,"user")&&t.uint32(26).string(e.user),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserJoinNotice;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.instance=e.uint64();break;case 2:r.seq=e.uint64();break;case 3:r.user=e.string();break;default:e.skipType(7&i)}}return r},e}(),RB=t.UserQuitNotice=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.instance=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.user="",e.encode=function(e,t){return t||(t=N.create()),null!=e.instance&&Object.hasOwnProperty.call(e,"instance")&&t.uint32(8).uint64(e.instance),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(16).uint64(e.seq),null!=e.user&&Object.hasOwnProperty.call(e,"user")&&t.uint32(26).string(e.user),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserQuitNotice;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.instance=e.uint64();break;case 2:r.seq=e.uint64();break;case 3:r.user=e.string();break;default:e.skipType(7&i)}}return r},e}(),SB=t.UserWaitNotice=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.instance=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.user="",e.encode=function(e,t){return t||(t=N.create()),null!=e.instance&&Object.hasOwnProperty.call(e,"instance")&&t.uint32(8).uint64(e.instance),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(16).uint64(e.seq),null!=e.user&&Object.hasOwnProperty.call(e,"user")&&t.uint32(26).string(e.user),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserWaitNotice;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.instance=e.uint64();break;case 2:r.seq=e.uint64();break;case 3:r.user=e.string();break;default:e.skipType(7&i)}}return r},e}(),TB=t.SubscribeResponse=function(){function e(e){if(this.errors=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.errors=q.emptyArray,e.encode=function(e,n){if(n||(n=N.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&n.uint32(8).uint64(e.seq),null!=e.errors&&e.errors.length)for(var r=0;r<e.errors.length;++r)t.SubscribeResponse.SubscribeErrorsType.encode(e.errors[r],n.uint32(18).fork()).ldelim();return n},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.SubscribeResponse;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.errors&&r.errors.length||(r.errors=[]),r.errors.push(t.SubscribeResponse.SubscribeErrorsType.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return r},e.SubscribeErrorsType=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.account="",e.prototype.code=0,e.encode=function(e,t){return t||(t=N.create()),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(10).string(e.account),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(16).uint32(e.code),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.SubscribeResponse.SubscribeErrorsType;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.account=e.string();break;case 2:r.code=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),e}(),UB=Object.freeze({__proto__:null,URI:XA,Wrapper:Nh,Ping:YA,Pong:ZA,UserJoin:$A,UserResp:aB,UserQuit:bB,UserDrop:cB,GroupEnter:dB,GroupLeave:eB,GroupReply:fB,GroupLeaveNotice:sr,GroupEnterNotice:tr,Message:ur,Ack:vr,FileUploadIndexGet:gB,FileUploadIndexRet:hB,FileUploadIndexSet:iB,FileUploadIndexFin:jB,FileUploadIndexErr:kB,FileDownloadIndexGet:lB,FileDownloadIndexRet:mB,FileDownloadIndexErr:nB,GroupAllUsersList:oB,GroupAllUsersResult:pB,UserStatusList:qB,UserStatusResult:rB,UserAttributeGet:sB,UserAttributeRet:tB,UserAttributeSet:uB,UserAttributeMod:vB,UserAttributeDel:wB,UserAttributeErr:xB,UserAttributeKeysGet:yB,UserAttributeKeysRet:zB,UserAttributeRsp:AB,GroupStatusList:BB,GroupStatusResult:CB,GroupCountNotice:DB,GroupAttributeGet:EB,GroupAttributeRet:FB,GroupAttributeSet:GB,GroupAttributeMod:HB,GroupAttributeDel:IB,GroupAttributeAlt:JB,GroupAttributeRsp:KB,GroupAttributeErr:LB,GroupAttributeKeysGet:MB,GroupAttributeKeysRet:NB,SubscribeUserStatus:OB,UnsubscribeUserStatus:PB,UserJoinNotice:QB,UserQuitNotice:RB,UserWaitNotice:SB,SubscribeResponse:TB,default:t}),VB=Math.ceil,wr=function(e){return function(t,n,r){var i=(t=String(jb(t))).length;return r=void 0===r?" ":String(r),(n=ta(n))<=i||""==r?t:(n-=i,(i=Nn.call(r,VB(n/r.length))).length>n&&(i=i.slice(0,n)),e?t+i:i+t)}},WB=wr(!1),XB=wr(!0),xr=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(Ce);P({target:"String",proto:!0,forced:xr},{padEnd:function(e){return XB(this,e,1<arguments.length?arguments[1]:void 0)}});var YB=zf,yr=function(e){return function(t){t=qb(t);for(var n,r=Dc(t),i=r.length,o=0,a=[];i>o;)n=r[o++],ka&&!YB.call(t,n)||a.push(e?[n,t[n]]:t[n]);return a}},ZB=yr(!0),$B=yr(!1);P({target:"Object",stat:!0},{entries:function(e){return ZB(e)}});var aC=Fb.f,zr="".endsWith,bC=Math.min,Ar=ck("endsWith"),cC=!Ar&&!!function(){var e=aC(String.prototype,"endsWith");return e&&!e.writable}();P({target:"String",proto:!0,forced:!cC&&!Ar},{endsWith:function(e){var t=String(jb(this));bk(e);var n=1<arguments.length?arguments[1]:void 0,r=ta(t.length);return n=void 0===n?r:bC(ta(n),r),r=String(e),zr?zr.call(t,r,n):t.slice(n-r.length,n)===r}}),ch("match",1,(function(e,t,n){return[function(t){var n=jb(this),r=null==t?void 0:t[e];return void 0!==r?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r=n(t,e,this);if(r.done)return r.value;if(e=va(e),r=String(this),!e.global)return Je(e,r);var i=e.unicode;e.lastIndex=0;for(var o,a=[],s=0;null!==(o=Je(e,r));)o=String(o[0]),a[s]=o,""===o&&(e.lastIndex=wj(r,ta(e.lastIndex),i)),s++;return 0===s?null:a}]}));var dC=Fb.f,Br="".startsWith,eC=Math.min,Cr=ck("startsWith"),fC=!Cr&&!!function(){var e=dC(String.prototype,"startsWith");return e&&!e.writable}();P({target:"String",proto:!0,forced:!fC&&!Cr},{startsWith:function(e){var t=String(jb(this));bk(e);var n=ta(eC(1<arguments.length?arguments[1]:void 0,t.length)),r=String(e);return Br?Br.call(t,r,n):t.slice(n,n+r.length)===r}});var Mm=function(e){var t=/(%?)(%([jds]))/g,n=Array.prototype.slice.call(arguments,1);return n.length&&(e=e.replace(t,(function(e,t,r,i){switch(r=n.shift(),i){case"s":r=""+r;break;case"d":r=Number(r);break;case"j":r=JSON.stringify(r)}return t?(n.unshift(r),e):r}))),n.length&&(e+=" "+n.join(" ")),""+e.replace(/%{2,2}/g,"%")},gC=/\s/,hC=function(e){for(var t=e.length;t--&&gC.test(e.charAt(t)););return t},iC=/^\s+/,Dr=NaN,jC=/^[-+]0x[0-9a-f]+$/i,kC=/^0b[01]+$/i,lC=/^0o[0-7]+$/i,mC=parseInt,fl=function(e){if("number"==typeof e)return e;if(he(e))return Dr;if(lb(e)&&(e="function"==typeof e.valueOf?e.valueOf():e,e=lb(e)?e+"":e),"string"!=typeof e)return 0===e?e:+e;e=e?e.slice(0,hC(e)+1).replace(iC,""):e;var t=kC.test(e);return t||lC.test(e)?mC(e.slice(2),t?2:8):jC.test(e)?Dr:+e},nC=Math.max,oC=Math.min,pC=function(e,t,n){function r(t){var n=c,r=u;return c=u=void 0,f=t,l=e.apply(r,n)}function i(e){var n=e-d;return e-=f,void 0===d||n>=t||0>n||g&&e>=v}function o(){var e=Cb.Date.now();if(i(e))return a(e);var n=setTimeout,r=e-f;e=t-(e-d),r=g?oC(e,v-r):e,h=n(o,r)}function a(e){return h=void 0,A&&c?r(e):(c=u=void 0,l)}function s(){var e=Cb.Date.now(),n=i(e);if(c=arguments,u=this,d=e,n){if(void 0===h)return f=e=d,h=setTimeout(o,t),p?r(e):l;if(g)return clearTimeout(h),h=setTimeout(o,t),r(d)}return void 0===h&&(h=setTimeout(o,t)),l}var c,u,l,h,d,f=0,p=!1,g=!1,A=!0;if("function"!=typeof e)throw new TypeError("Expected a function");if(t=fl(t)||0,lb(n)){p=!!n.leading;var v=(g="maxWait"in n)?nC(fl(n.maxWait)||0,t):v;A="trailing"in n?!!n.trailing:A}return s.cancel=function(){void 0!==h&&clearTimeout(h),f=0,c=d=u=h=void 0},s.flush=function(){return void 0===h?l:a(Cb.Date.now())},s},yc=function(e){function t(e,i){return X(this,t),m(n(e=r.call(this,Lm(e,i))),"originalError",void 0),m(n(e),"code",void 0),m(n(e),"serverCode",void 0),"number"==typeof i?e.code=i:"string"==typeof i?e.name=i:void 0!==i&&(i.originalError&&(e.originalError=i.originalError),void 0!==i.code&&(e.code=i.code),void 0!==i.serverCode&&(e.serverCode=i.serverCode)),e}la(t,e);var r=ma(t);return t}(ef(Error)),Ia=function(e){function t(e,i){return X(this,t),m(n(e=r.call(this,Lm(e,i))),"name","RtmInternalError"),m(n(e),"code",void 0),e.code=i,e}la(t,e);var r=ma(t);return t}(ef(Error)),Oh=function(){return function(e){function t(e){X(this,t);var r=Object.keys(e);return n.call(this,e[r[0]],r[0])}la(t,e);var n=ma(t);return t}(Ia)},Fa=Oh(),cb=function(e){function t(){X(this,t);for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];return m(n(e=r.call.apply(r,[this].concat(i))),"name","RtmTimeoutError"),e}la(t,e);var r=ma(t);return t}(yc),L=function(e){function t(){X(this,t);for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];return m(n(e=r.call.apply(r,[this].concat(i))),"name","RtmInvalidArgumentError"),e}la(t,e);var r=ma(t);return t}(yc),M=function(e){function t(){X(this,t);for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];return m(n(e=r.call.apply(r,[this].concat(i))),"name","RtmInvalidStatusError"),e}la(t,e);var r=ma(t);return t}(yc),gl=function(e){function t(){X(this,t);for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];return m(n(e=r.call.apply(r,[this].concat(i))),"name","RtmInterruptedError"),e}la(t,e);var r=ma(t);return t}(yc),ib=function(e){function t(){X(this,t);for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];return m(n(e=r.call.apply(r,[this].concat(i))),"name","RtmLimitExceededError"),e}la(t,e);var r=ma(t);return t}(yc),qC=function(e){function t(){X(this,t);for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];return m(n(e=r.call.apply(r,[this].concat(i))),"name","RtmInvokeTooOftenError"),e}la(t,e);var r=ma(t);return t}(yc),da=function(e){function t(){X(this,t);for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];return m(n(e=r.call.apply(r,[this].concat(i))),"name","RtmUnavailableError"),m(n(e),"serverCode",void 0),m(n(e),"statusCode",void 0),e}la(t,e);var r=ma(t);return t}(yc),Xe=function(e){function t(){X(this,t);for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];return m(n(e=r.call.apply(r,[this].concat(i))),"name","RtmUnauthenticatedError"),m(n(e),"serverCode",void 0),e}la(t,e);var r=ma(t);return t}(yc),Vc=function(e){function t(){X(this,t);for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];return m(n(e=r.call.apply(r,[this].concat(i))),"name","RtmUnknownError"),e}la(t,e);var r=ma(t);return t}(yc),Sa=function(e){return e instanceof cb||e instanceof pb},sa=function(e){return e instanceof yc},Yd=function(e,t,n){return['Executing "%s.%s" timed out after %ds',e,t,n/1e3]},Km=new Map,rC=function(){var e=new Date;return"".concat(e.toISOString().split("T")[1].replace(/\..+/,""),".").concat(e.getMilliseconds())},xf=Object.keys,Gg=Object.entries.bind(Object),Cg=function(e){return"string"==typeof e?e.endsWith(".")?e:"".concat(e,"."):e},Rm=function(e){for(var t="",n=(e=new Uint8Array(e)).byteLength,r=-1;++r<n;)t+=String.fromCharCode(e[r]);return t=btoa(t),"data:;base64,".concat(t)},sC=R((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}));P({target:"Date",proto:!0,forced:sC},{toJSON:function(e){e=Qa(this);var t=lc(e);return"number"!=typeof t||isFinite(t)?e.toISOString():null}}),P({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}});var Yt=Object.prototype.hasOwnProperty,Er=function(e,t,n){return JSON.stringify(Xm(e),t,n)};Er.ensureProperties=Xm;var tC=function(e,t){t=t||{};var n=aa(e);if("string"===n&&0<e.length)return Zt(e);if("number"===n&&isFinite(e))return e=t.long?864e5<=(t=Math.abs(e))?Ig(e,t,864e5,"day"):36e5<=t?Ig(e,t,36e5,"hour"):6e4<=t?Ig(e,t,6e4,"minute"):1e3<=t?Ig(e,t,1e3,"second"):e+" ms":864e5<=(t=Math.abs(e))?Math.round(e/864e5)+"d":36e5<=t?Math.round(e/36e5)+"h":6e4<=t?Math.round(e/6e4)+"m":1e3<=t?Math.round(e/1e3)+"s":e+"ms";throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))},uC=function(e){function t(e){function r(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];if(r.enabled){e=Number(new Date),r.diff=e-(i||e),r.prev=i,i=r.curr=e,n[0]=t.coerce(n[0]),"string"!=typeof n[0]&&n.unshift("%O");var a=0;n[0]=n[0].replace(/%([a-zA-Z%])/g,(function(e,i){return"%%"===e?"%":(a++,"function"==typeof(i=t.formatters[i])&&(e=i.call(r,n[a]),n.splice(a,1),a--),e)})),t.formatArgs.call(r,n),(r.log||t.log).apply(r,n)}}var i,o=null;return r.namespace=e,r.useColors=t.useColors(),r.color=t.selectColor(e),r.extend=n,r.destroy=t.destroy,Object.defineProperty(r,"enabled",{enumerable:!0,configurable:!1,get:function(){return null===o?t.enabled(e):o},set:function(e){o=e}}),"function"==typeof t.init&&t.init(r),r}function n(e,n){return(e=t(this.namespace+(void 0===n?":":n)+e)).log=this.log,e}function r(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){var e=[].concat(I(t.names.map(r)),I(t.skips.map(r).map((function(e){return"-"+e})))).join(",");return t.enable(""),e},t.enable=function(e){t.save(e),t.names=[],t.skips=[];var n,r=("string"==typeof e?e:"").split(/[\s,]+/),i=r.length;for(n=0;n<i;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;var n,r=0;for(n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=tC,t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((function(n){t[n]=e[n]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){for(var n=0,r=0;r<e.length;r++)n=(n<<5)-n+e.charCodeAt(r),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t},Fr=$a((function(e,t){t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),this.useColors){var n="color: "+this.color;t.splice(1,0,n,"color: inherit");var r=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(r++,"%c"===e&&(i=r))})),t.splice(i,0,n)}},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){try{var e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))};e:{try{var n=localStorage;break e}catch(e){}n=void 0}t.storage=n,t.destroy=function(){var e=!1;return function(){e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}}(),t.colors="#0000CC #0000FF #0033CC #0033FF #0066CC #0066FF #0099CC #0099FF #00CC00 #00CC33 #00CC66 #00CC99 #00CCCC #00CCFF #3300CC #3300FF #3333CC #3333FF #3366CC #3366FF #3399CC #3399FF #33CC00 #33CC33 #33CC66 #33CC99 #33CCCC #33CCFF #6600CC #6600FF #6633CC #6633FF #66CC00 #66CC33 #9900CC #9900FF #9933CC #9933FF #99CC00 #99CC33 #CC0000 #CC0033 #CC0066 #CC0099 #CC00CC #CC00FF #CC3300 #CC3333 #CC3366 #CC3399 #CC33CC #CC33FF #CC6600 #CC6633 #CC9900 #CC9933 #CCCC00 #CCCC33 #FF0000 #FF0033 #FF0066 #FF0099 #FF00CC #FF00FF #FF3300 #FF3333 #FF3366 #FF3399 #FF33CC #FF33FF #FF6600 #FF6633 #FF9900 #FF9933 #FFCC00 #FFCC33".split(" "),t.log=console.debug||console.log||function(){},e.exports=uC(t),e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}})),Gr=Fr("RTM:DEBUG"),Ye;Gr.enabled=!1,function(e){e[e.Uploading=0]="Uploading",e[e.Free=1]="Free"}(Ye||(Ye={}));var vC=function(){function e(t){X(this,e),m(this,"uploadRequest",void 0),m(this,"uploadState",void 0),m(this,"uploadResendCount",void 0),m(this,"LogCache",void 0),m(this,"LogsToPost",void 0),m(this,"processId",void 0),m(this,"sdkVersion",void 0),m(this,"logId",void 0),this.processId=t.processId,this.sdkVersion=t.sdkVersion,this.uploadRequest=t.uploadRequest,this.uploadState=Ye.Free,this.uploadResendCount=0,this.LogCache=[],this.LogsToPost=[],this.logId=0}return Ha(e,[{key:"upload",value:function(e,t){this.LogCache.push(e),this.uploadState===Ye.Free&&(this.LogsToPost=40>this.LogCache.length?this.LogCache.splice(0,this.LogCache.length):this.LogCache.splice(0,40),this.postLog(this.LogsToPost,t))}},{key:"postLog",value:function(e,t){var n=this;this.uploadState=Ye.Uploading,setTimeout(K(x.mark((function r(){var i,o;return x.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i={sdk_version:n.sdkVersion,process_id:n.processId,payload:JSON.stringify(e)},r.prev=1,r.next=4,n.uploadRequest(i,t);case 4:if(!Tk){r.next=6;break}throw Error("RTM is busy");case 6:r.next=13;break;case 8:return r.prev=8,r.t0=r.catch(1),o=2>n.uploadResendCount++?2e3:1e4,setTimeout((function(){return n.postLog(n.LogsToPost,t)}),o),r.abrupt("return");case 13:if(Gr('The logs uploaded for "process-'.concat(gg,'"')),0!==n.LogCache.length){r.next=17;break}return n.uploadState=Ye.Free,r.abrupt("return");case 17:n.uploadResendCount=0,n.LogsToPost=40>n.LogCache.length?n.LogCache.splice(0,n.LogCache.length):n.LogCache.splice(0,40),n.postLog(n.LogsToPost,t);case 20:case"end":return r.stop()}}),r,null,[[1,8]])}))),Zd.getParameter("LOG_UPLOAD_INTERVAL"))}}]),e}(),Hr=function(){var e=K(x.mark((function e(t,n){var r,i,o,a=arguments;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(2<(r=2<a.length&&void 0!==a[2]?a[2]:0))){e.next=3;break}return e.abrupt("return");case 3:return i={withCredentials:!0,body:t,timeout:2e4},o="https://".concat(0<r?(null==n?void 0:n.LOG_UPLOAD_SERVER[0])||"rtm.logservice.sd-rtn.com":(null==n?void 0:n.LOG_UPLOAD_SERVER[0])||"logservice-rtm.agora.io","/upload/v1"),e.next=7,se(o,i).catch((function(e){return Hr(t,n,r+1)}));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),wC=new vC({processId:"process-".concat(gg),sdkVersion:"Agora_RTM_SDK_for_Web_".concat("v1.4.3-0-gc918e772"),uploadRequest:Hr}),hl="text payload rawMessage thumbnail attributeInfos keys value extra".split(" "),Ir="account ticket uid detail token account fileName cname user group key origin users src dst lastUpdateUserId channel".split(" "),Jr="serverReceivedTs isOfflineMessage enableHistoricalMessaging enableOfflineMessaging hasPeerReceived messageType enableNotificationToChannelMembers lastUpdateTs".split(" "),xC="ChannelMessage MemberLeft MessageFromPeer LocalInvitationRefused LocalInvitationAccepted RemoteInvitationCanceled PeersOnlineStatusChanged AttributesUpdated MemberJoined".split(" "),we=function(e){if("string"==typeof e)return oa(e);if(Array.isArray(e)&&e.every((function(e){return"string"==typeof e})))return e.map((function(e){return oa(e)}));if(!Hl(e)){for(var t={},n=0;n<Jr.length;n++){var r=Jr[n];r in e&&(t[r]=e[r])}if(0<Object.keys(t).length)return t;if(5>Object.keys(e).length){for(n=0,e=Object.entries(e);n<e.length;n++){var i=ra(e[n],2);r=i[0],i=i[1],hl.includes(r)?t[r]="[Hidden Info]":t[oa(r)]="string"==typeof i?oa(i):"[Sensitive Info]"}return t}return"[Sensitive Info]"}return e},Kr=function(e){return"object"===aa(e)?yd(e)?Um(ee(e,5),hl,Ir):e.constructor&&e.constructor.name:e},Lr=function(e,t){return e instanceof Error?e.message:"string"!=typeof e?JSON.stringify(Um(ee(e,5),hl,Ir)):(t=t.map((function(e){return e instanceof Error?e.message:"object"===aa(e)?Er(Array.isArray(e)?e.map(Kr):Kr(e)):e})),Mm.apply(void 0,[e.replace(/%[%Oo]/g,(function(e){return"%%"===e?"%":"%o"===e||"%O"===e?"%s":e}))].concat(I(t))))},yC=1,Mr=function(e,t,n){var r=Fr(e);return r.enabled=!0,r.log=n,r.useColors=!1,function(n){for(var i=arguments.length,o=Array(1<i?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];if(t.enableLogUpload){i=Cg(n);var s=Lr(i,o);wC.upload({log_item_id:"".concat(yC++),log_level:e,payload_str:"[".concat(rC(),"] ").concat(e," - ").concat(256<s.length?s.slice(0,256):s)},t._areaConfig)}switch(i=function(e){var t=s||Lr(Cg(n),o),i=od.LOG_HANDLER;"function"==typeof i&&i({level:e,message:t}),r(t)},e){case"RTM:INFO":t.logFilter.info&&i("log");break;case"RTM:WARN":t.logFilter.warn&&i("warning");break;case"RTM:ERROR":t.logFilter.error&&i("error");break;case"RTM:TRACK":t.logFilter.track&&i("log");break;case"RTM:MSG:RECV":case"RTM:MSG:SEND":case"RTM:DEBUG":t.logFilter.debug&&i("debug")}}},il,Nr=function(e){return function(t){var n=1===il||void 0===e?"":"Ins#".concat(e," ");return"".concat(n).concat(t)}},jl=function(e,t,n){var r=Nr(il);return Mr("RTM:".concat(t),n,(function(t){return e(r(t))}))},tb=function(){return function(e){function t(e,i){var o=2<arguments.length&&void 0!==arguments[2]&&arguments[2];X(this,t);var a=r.call(this);if(m(n(a),"logError",void 0),m(n(a),"invokeTracker",void 0),m(n(a),"resultTracker",void 0),m(n(a),"errorTracker",void 0),m(n(a),"eventTracker",void 0),m(n(a),"info",void 0),m(n(a),"warn",void 0),m(n(a),"log",void 0),m(n(a),"genLogger",void 0),m(n(a),"loggerId",void 0),m(n(a),"logger",void 0),m(n(a),"name",void 0),a.logger=e,a.name=i,a.loggerId=e.loggerId,a.info=e.info,a.warn=e.warn,a.logError=e.logError,a.genLogger=e.genLogger,a.log=e.genLogger("RTM:DEBUG","<".concat(i,"> ")),a.invokeTracker=e.genTracker("Invoke"),a.eventTracker=e.genTracker("Event"),a.resultTracker=e.genTracker("Result"),a.errorTracker=e.genTracker("Error"),o){var s=a.emit.bind(n(a));a.emit=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];e=t[0],n=t.slice(1);var r=xC.includes(e);a.eventTracker.apply(a,["%s: ".concat(0<n.length?"%s emitted with args: ".concat(n.map((function(){return"%o"}))):"%s emitted"),i,e].concat(I(r?n.map(we):n)));try{s.apply(void 0,t)}catch(t){a.logError("Caught in the callback function of the event %s",e,t)}}}return a}la(t,e);var r=ma(t);return t}(ea)},zC=function(e){return jl(console.log.bind(console),"INFO",e)},AC=function(e){return jl(console.warn.bind(console),"WARN",e)},BC=function(e){return jl(console.error.bind(console),"ERROR",e)},Or=function(e,t){return function(n){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",i=Nr(e),o=console.debug.bind(console),a=Mr(n,t,(function(e){return o(i(e))}));return function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return a.apply(void 0,[r+e].concat(n))}}},CC=function(e,t){return function(n){return Or(e,t)("RTM:TRACK","[".concat(n,"] "))}},Ki=t.URI,au=Nh,DC=ff(UB,["Wrapper"]),Ym=Fk(DC,"URI"),Pr=function(e,t){var n=-1,r=e.length,i=r-1;for(t=void 0===t?r:t;++n<t;){var o=e[r=lr(n,i)];e[r]=e[n],e[n]=o}return e.length=t,e},EC=function(e){return Pr(Wh(e))},FC=function(e){return Pr(Mi(e))},Ze=function(e){return(Va(e)?EC:FC)(e)},$e={0:9591,1:9593},af=function(e){return"https://".concat(e,"/api/v1")},GC=fb.apply(void 0,I(Ze(["web-1.ap.sd-rtn.com","web-2.ap.sd-rtn.com"].map(af)))),HC=fb.apply(void 0,I(Ze(["ap-web-1.agora.io","ap-web-2.agora.io"].map(af)))),IC=fb.apply(void 0,I(Ze(["web-3.ap.sd-rtn.com","web-4.ap.sd-rtn.com"].map(af)))),JC=fb.apply(void 0,I(Ze(["ap-web-3.agora.io","ap-web-4.agora.io"].map(af)))),kl=Oh(),ll=function(e){function t(e,i,o,a,s,c){X(this,t);var u=r.call(this,s,zi("Socket-",s.loggerId));if(m(n(u),"isActiveClose",!1),m(n(u),"loggedIn",!1),m(n(u),"useNewDomain",void 0),m(n(u),"receivedPacket",new Pa),m(n(u),"open$",void 0),m(n(u),"input$",new Pa),m(n(u),"userJoin$",new Pa),m(n(u),"attemptsSinceLastError",0),m(n(u),"message$",new Pa),m(n(u),"socket$",void 0),m(n(u),"toClose",new Pa),m(n(u),"toReconnect",new Pa),m(n(u),"sendLogger",void 0),m(n(u),"receiveLogger",void 0),m(n(u),"ip",void 0),m(n(u),"env",void 0),m(n(u),"ticket",void 0),m(n(u),"context",void 0),m(n(u),"getDomain",(function(){return Zm(u.ip,u.useNewDomain)})),m(n(u),"socketReconnector",(function(e){var t=function(e){return u.attemptsSinceLastError+=1,u.warn("The %s of Env %d reconnecting %s",u.name,u.env,e.message),Bc(1500)};return e.pipe(Ga((function(e){return u.log("socket connection closed"),u.loggedIn=!1,2<=u.attemptsSinceLastError?(u.warn("socket connection failure"),u.emit("connectionFailure"),u.close(),Y(e)):u.isActiveClose?vb:(u.emit("reconnect"),u.useNewDomain=!u.useNewDomain,Y(e))})),ne((function(e){return e.pipe(Cc(t))})))})),u.ip=e,u.env=i,u.ticket=o,u.context=a,u.useNewDomain=null!=c?c:.5<=Math.random(),u.sendLogger=u.genLogger("RTM:MSG:SEND"),u.receiveLogger=u.genLogger("RTM:MSG:RECV"),0!==i&&1!==i)throw new kl({ILLEGAL_RTM_ENV:"The env number is out of rtm env count"});if(!Fm(e))throw new kl({IP_NOT_VALID:"The ip from ap is not valid"});var l=$e[i];u.log("Opening websocket address %s for the Env %d",u.ip,u.env);var h=Xb(u.input$,u.userJoin$.pipe(Ot(2)),u.message$).pipe(ba((function(e){return Nh.encode(e).finish()})));return e=Xb(Pt("",{protocols:[],makeWebSocket:function(){if(u.context.config.enableCloudProxy){if(0===u.context.cloudProxyServers.length)throw u.logError("No cloud proxy server to connect"),new da;var e="wss://".concat(Zm(KA(u.context.cloudProxyServers),!1),"/");e=ve(e,"sid",u.context.sid),e=ve(e,"remote_port",l.toString()),e=ve(e,"remote_ip",u.ip),e=ve(e,"token",u.context.key),e=new WebSocket(e)}else e=new WebSocket("wss://".concat(u.getDomain(),":").concat(l));return e.binaryType="arraybuffer",e}}),u.toReconnect),u.socket$=Ca(e,Sk.pipe(hb(7e3),Ga((function(e){return Sa(e)&&u.warn("socket open timed out"),Y(e)})))).pipe(ba((function(e){if(e instanceof Error)throw u.warn("Env_%d: Force reconnect the socket",u.env),e;return e(h).pipe(ba((function(e){return Nh.decode(new Uint8Array(e))})))})),u.socketReconnector),u.open$=u.socket$.pipe(ca((function(e){u.log("Websocket opened",u.name),e.subscribe((function(e){var t=e.data;e=Ki[e.uri].slice(0,-3),t=Ym[e].decode(t);var n=FA({},Fk(t,"toJSON"),(function(e,t){return t instanceof U?Jm(t):t})),r=!1;if((t instanceof tr||t instanceof sr)&&t.instance.lessThanOrEqual(4294967295)&&(r=!0),t instanceof ur||t instanceof vr){var i=t.instance,o=t.sequence;(t.dialogue.lessThanOrEqual(4294967295)||i.lessThanOrEqual(4294967295)||o.lessThan(1))&&(r=!0)}r?u.warn("Env_%d: Illegal %s, abandoned %o",u.env,e,n):("Pong"!==e&&u.receiveLogger("Env_%d: %s %o",u.env,e,n),u.receivedPacket.next([e,t]))}),(function(){}))})),qf(void 0),ob(u.toClose),oe()),u}la(t,e);var r=ma(t);return Ha(t,[{key:"address",get:function(){return"".concat(this.ip,":").concat($e[this.env])}},{key:"sendPacket",value:function(e,t){if("Ping"!==e){var n=uc(t,(function(e){return e instanceof U?Jm(e):e}));this.sendLogger("Env_%d: %s %o",this.env,e,n)}t=$t(e,t),"UserJoin"===e?this.userJoin$.next(t):"Message"===e?this.message$.next(t):this.input$.next(t)}},{key:"close",value:function(){this.isActiveClose=!0,this.loggedIn=!1,this.toClose.next()}},{key:"fromReceived",value:function(e){var t=this;return this.receivedPacket.pipe(ca((function(e){var n=ra(e,2);e=n[0],n=n[1],"UserResp"===e&&(t.attemptsSinceLastError=0,t.loggedIn=!0),"UserDrop"===e&&t.emit("socketUserDrop",n)})),wb((function(t){return ra(t,1)[0]===e})),ba((function(e){return ra(e,2)[1]})))}},{key:"forceReconnect",value:function(){this.toReconnect.next(new kl({FORCE_RECONNECTING:"Connection seems broken, try force reconnecting"}))}}]),t}(tb());P({target:"String",proto:!0,forced:xr},{padStart:function(e){return WB(this,e,1<arguments.length?arguments[1]:void 0)}});var Qr=function(e,t,n,r,i,o,a,s){var c=0;for(a=!!a&&Id(a,s,3);c<r;){if(c in n){if(s=a?a(n[c],c,t):n[c],0<o&&fd(s))i=Qr(e,t,s,ta(s.length),i,o-1)-1;else{if(9007199254740991<=i)throw TypeError("Exceed the acceptable array length");e[i]=s}i++}c++}return i},KC=Qr,Db,ud,C;P({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=Qa(this),n=ta(t.length),r=Rg(t,0);return r.length=KC(r,t,t,n,0,void 0===e?1:$b(e)),r}}),P({target:"Object",stat:!0},{values:function(e){return $B(e)}}),function(e){e.CHINA="CN",e.ASIA="AS",e.NORTH_AMERICA="NA",e.EUROPE="EU",e.JAPAN="JP",e.INDIA="IN",e.OCEANIA="OC",e.SOUTH_AMERICA="SA",e.AFRICA="AF",e.OVERSEA="OVERSEA",e.GLOBAL="GLOBAL"}(C||(C={}));var LC={CN:C.CHINA,NA:C.NORTH_AMERICA,EU:C.EUROPE,AS:C.ASIA,JP:C.JAPAN,IN:C.INDIA,GLOB:C.GLOBAL,AF:C.AFRICA,OC:C.OVERSEA,OVS:C.OVERSEA,SA:C.SOUTH_AMERICA},Jg=Vm((Db={},m(Db,C.ASIA,{CODE:C.ASIA,AP_DOMAINS:["ap-web-1-asia.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-asia.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-asia.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-asia.agora.io"],LOG_UPLOAD_SERVER:["logservice-asia.agora.io"]}),m(Db,C.NORTH_AMERICA,{CODE:C.NORTH_AMERICA,AP_DOMAINS:["ap-web-1-north-america.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-north-america.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-north-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-north-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-north-america.agora.io"]}),m(Db,C.EUROPE,{CODE:C.EUROPE,AP_DOMAINS:["ap-web-1-europe.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-europe.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-europe.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-europe.agora.io"],LOG_UPLOAD_SERVER:["logservice-europe.agora.io"]}),m(Db,C.JAPAN,{CODE:C.JAPAN,AP_DOMAINS:["ap-web-1-japan.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-japan.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-japan.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-japan.agora.io"],LOG_UPLOAD_SERVER:["logservice-japan.agora.io"]}),m(Db,C.INDIA,{CODE:C.INDIA,AP_DOMAINS:["ap-web-1-india.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-india.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-india.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-india.agora.io"],LOG_UPLOAD_SERVER:["logservice-india.agora.io"]}),m(Db,C.OVERSEA,{CODE:C.OVERSEA,AP_DOMAINS:["ap-web-1-oversea.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-oversea.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oversea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oversea.agora.io"],LOG_UPLOAD_SERVER:["logservice-oversea.agora.io"]}),m(Db,C.GLOBAL,{CODE:C.GLOBAL,AP_DOMAINS:["ap-web-1.agora.io","ap-web-2.agora.io"],AP_BACKUP_DOMAINS:["ap-web-3.agora.io","ap-web-4.agora.io"],EVENT_REPORT_DOMAIN:["webcollector-rtm.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["webcollector-1.agora.io"],LOG_UPLOAD_SERVER:["logservice-rtm.agora.io"]}),m(Db,C.OCEANIA,{CODE:C.OCEANIA,AP_DOMAINS:["ap-web-1-oceania.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-oceania.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oceania.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oceania.agora.io"],LOG_UPLOAD_SERVER:["logservice-oceania.agora.io"]}),m(Db,C.SOUTH_AMERICA,{CODE:C.SOUTH_AMERICA,AP_DOMAINS:["ap-web-1-south-america.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-south-america.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-south-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-south-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-america.agora.io"]}),m(Db,C.AFRICA,{CODE:C.AFRICA,AP_DOMAINS:["ap-web-1-africa.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-africa.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-africa.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-africa.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-africa.agora.io"]}),m(Db,C.CHINA,{CODE:C.CHINA,AP_DOMAINS:["webrtc2-2.ap.sd-rtn.com"],AP_BACKUP_DOMAINS:["webrtc2-4.ap.sd-rtn.com"],EVENT_REPORT_DOMAIN:["web-3.statscollector.sd-rtn.com"],EVENT_REPORT_BACKUP_DOMAIN:["web-4.statscollector.sd-rtn.com"],LOG_UPLOAD_SERVER:["logservice-china.agora.io"]}),Db)),yf=(ud={},m(ud,C.ASIA,[C.CHINA,C.JAPAN,C.INDIA]),m(ud,C.EUROPE,[]),m(ud,C.NORTH_AMERICA,[]),m(ud,C.SOUTH_AMERICA,[]),m(ud,C.OCEANIA,[]),m(ud,C.AFRICA,[]),ud),Rr=[C.OVERSEA,C.GLOBAL,C.CHINA,C.NORTH_AMERICA,C.EUROPE,C.ASIA,C.JAPAN,C.INDIA,C.OCEANIA,C.SOUTH_AMERICA,C.AFRICA],$m=function(e){return Object.values(yf).flat().includes(e)},cu=function(e){var t;return null===(t=Gg(yf).find((function(t){return(t=ra(t,2))[0],t[1].includes(e)})))||void 0===t?void 0:t[0]},MC=function(e){return e.sort((function(e,t){return Rr.indexOf(e)-Rr.indexOf(t)}))},xe=function(e){var t=new Set;if(0===(e=MC(e).slice(0,3).map((function(e){var n=Jg[e];if(void 0===n)throw new Ia("invalid area key");return e=n.CODE,n=ff(n,["CODE"]),t.add(e),n}))).length)throw new Ia("areas cannot be empty");return ua({CODES:t},e.reduce((function(e,t){for(var n=0,r=Gg(e);n<r.length;n++){var i=ra(r[n],2),o=i[0];i=i[1],e[o]=Array.from(new Set([].concat(I(t[o]),I(i))))}return e})))},y,NC=function(e){var t=xf(Jg);e=Wt(e);for(var n=0;n<t.length;n++){var r=Jg[t[n]];if(null!=r&&r.AP_DOMAINS.includes(e)||null!=r&&r.AP_BACKUP_DOMAINS.includes(e))return[r.CODE]}return[C.CHINA,C.GLOBAL]},OC={INVALID_APP_ID:"Illegal App ID",NO_AUTHORIZED:"Signature verification failed",TOKEN_TIMEOUT:"Dynamic key expired",INVALID_TOKEN_UID:"UID in the security key(token) is not valid",APP_ID_NO_ACTIVATED:"The vendor is not activated",DYNAMIC_KEY_NOT_ENABLED:"The vendor did not enable the dynamic key, but uses the dynamic key",DYNAMIC_ENABLED_BUT_STATIC_KEY:"The vendor enabled the dynamic key, but uses the static key",TOKEN_EXPIRED:"The token has expired",INVALID_USER_ID:"The user ID to login does not match the token",FORBIDDEN_REGION:"Forbidden to access the request in this area",CANNOT_MEET_AREA_DEMAND:"Cannot allocate to meet the requirements of the given area limit"},Sr={5:"INVALID_APP_ID",7:"INVALID_USER_ID",9:"NO_AUTHORIZED",10:"TOKEN_TIMEOUT",11:"APP_ID_NO_ACTIVATED",12:"INVALID_TOKEN_UID",13:"TOKEN_EXPIRED",14:"DYNAMIC_KEY_NOT_ENABLED",15:"DYNAMIC_ENABLED_BUT_STATIC_KEY",18:"FORBIDDEN_REGION",19:"CANNOT_MEET_AREA_DEMAND"},PC=[100,101,102],Ph=/web-(\d)/,Tr=function(e){function t(e,i){var o=2<arguments.length&&void 0!==arguments[2]&&arguments[2];X(this,t);var a=r.call(this,i,"AccessPoint");return m(n(a),"handleUniLbsError",(function(e,t){var n=e;if(4<e.toString().length){var r=e.toString().padStart(8,"0"),i=parseInt(r.slice(0,4),10);if(r=parseInt(r.slice(4,8),10),201===i)n=r;else if(101===i&&!PC.includes(r))return Y(Error("service is currently unavailable"))}if(i=n.toString(),!Object.keys(Sr).includes(i))return(e=new da(["Login is rejected by the server. The response code is %d",e],jg)).serverCode=n,Y(e);switch(i=Sr[i],n=OC[i],i){case"INVALID_APP_ID":case"APP_ID_NO_ACTIVATED":return(t=new Xe(n,Yq)).serverCode=e,Y(t);case"INVALID_USER_ID":return(t=new Xe(n,Ih)).serverCode=e,Y(t);case"TOKEN_EXPIRED":case"TOKEN_TIMEOUT":return(t=new Xe(n,Jh)).serverCode=e,Y(t);case"NO_AUTHORIZED":case"INVALID_TOKEN_UID":case"DYNAMIC_KEY_NOT_ENABLED":case"DYNAMIC_ENABLED_BUT_STATIC_KEY":return(t=new Xe(n,Zq)).serverCode=e,Y(t);case"CANNOT_MEET_AREA_DEMAND":return(t=NC(t)).forEach((function(e){return a.failedAreas.add(e)})),a.failedAreas.size===(void 0===y?2:y.CODES.size)?((t=new L(n,jg)).serverCode=e,Y(t)):Y(Error("ap ".concat(t.join(", ")," cannot meet requirement")));case"FORBIDDEN_REGION":return(t=new da(n,jg)).serverCode=e,Y(t);default:return Y(Hm("ApResErrType",i))}})),m(n(a),"getApEdgeInfo$",void 0),m(n(a),"getApEdgeInfoEndFirst$",void 0),m(n(a),"apFinish$",new Pa),m(n(a),"retryCount",0),m(n(a),"failedAreas",new Set),m(n(a),"usedUrl",[]),m(n(a),"newDomainUsed",!1),m(n(a),"backupNewDomainUsed",!1),m(n(a),"genUrl",(function(){return void 0===y?li.apply(void 0,I(Ze([GC,HC]))).pipe(mi((function(e){return fb.apply(void 0,I(e))}))):fb.apply(void 0,I(y.AP_DOMAINS.slice(0,3).map(af)))})),m(n(a),"genBackupUrl",(function(){return void 0===y?li.apply(void 0,I(Ze([IC,JC]))).pipe(mi((function(e){return fb.apply(void 0,I(e))}))):fb.apply(void 0,I(y.AP_BACKUP_DOMAINS.slice(0,3).map(af)))})),m(n(a),"getUrl$",(function(e){var n,r;return a.genUrl().pipe(wb((function(e){return!(a.newDomainUsed&&e.includes("sd-rtn.com")||(e.includes("sd-rtn.com")&&(a.newDomainUsed=!0),cl(a.usedUrl,(function(t){var n;return t===(null===(n=e.match(Ph))||void 0===n?void 0:n[1])}))))})),ca((function(e){var t;void 0===y&&"string"==typeof(e=null===(t=e.match(Ph))||void 0===t?void 0:t[1])&&a.usedUrl.push(e)})),Oa(e?Math.max(od.RECONNECTING_AP_NUM,null!==(n=null==y?void 0:y.CODES.size)&&void 0!==n?n:0):null!==(r=null==y?void 0:y.CODES.size)&&void 0!==r?r:2),Dd((function(){return t.runOutOfUrlSymbol})),Ga((function(e,n){return a.newDomainUsed=!1,e===t.runOutOfUrlSymbol?(a.usedUrl=[],n):Y(e)})))})),m(n(a),"getBackupUrl$",(function(e){var n,r;return a.genBackupUrl().pipe(wb((function(e){return!(a.backupNewDomainUsed&&e.includes("sd-rtn.com")||(e.includes("sd-rtn.com")&&(a.backupNewDomainUsed=!0),cl(a.usedUrl,(function(t){var n;return t===(null===(n=e.match(Ph))||void 0===n?void 0:n[1])}))))})),ca((function(e){var t;void 0===y&&"string"==typeof(e=null===(t=e.match(Ph))||void 0===t?void 0:t[1])&&a.usedUrl.push(e)})),Oa(e?Math.max(od.RECONNECTING_AP_NUM,null!==(n=null==y?void 0:y.CODES.size)&&void 0!==n?n:0):null!==(r=null==y?void 0:y.CODES.size)&&void 0!==r?r:2),Dd((function(){return t.runOutOfUrlSymbol})),Ga((function(e,n){return a.backupNewDomainUsed=!1,e===t.runOutOfUrlSymbol?(a.usedUrl=[],n):Y(e)})))})),m(n(a),"context",void 0),m(n(a),"fetchCloudProxy",(function(e,t){var n=zi("AP-",a.loggerId);a.log("The AccessPoint requests %s(%s)",e,n);var r=new AbortController;return a.apFinish$.pipe(Oa(1)).subscribe((function(){return r.abort()})),$c(K(x.mark((function i(){var o;return x.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return o=Ag(0,Number.MAX_SAFE_INTEGER),a.log("%s request opid: %d",n,o),i.abrupt("return",se(e,{headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"90","Content-Type":"application/json"},body:{sid:a.context.sid,opid:o,appid:a.context.appId,client_ts:Math.ceil(Date.now()/1e3),request_bodies:[{uri:22,buffer:{service_ids:[7,16],key:null!=t?t:a.context.key,cname:a.context.uid,uid:0,detail:ua({},void 0===y?{11:[C.CHINA,C.GLOBAL].join()}:{11:Array.from(y.CODES).map((function(e){return e===C.OVERSEA?"".concat(C.ASIA,",").concat(C.EUROPE,",").concat(C.AFRICA,",").concat(C.NORTH_AMERICA,",").concat(C.SOUTH_AMERICA,",").concat(C.OCEANIA):e})).join(",")})}}]},signal:r.signal}));case 3:case"end":return i.stop()}}),i)})))).pipe(Ga((function(t){return"AbortError"!==t.name&&(a.logError(t),a.warn("The AP server %s request failure",e,t)),vb})),bb(function(){var t=K(x.mark((function t(r){var i,o,s,c,u,l,h,d,f,p,g,A,v,m,y,b,_,E,w;return x.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=r.responseText,o=JSON.parse(i),a.log("The %s response is %o",n,o),(void 0===(s=o.response_body)||0===s.length||s.some((function(e){var t;return void 0===(null===(t=e.buffer)||void 0===t?void 0:t.code)||23!==e.uri})))&&Y(new da("cloud proxy response_body not valid",jg)),0===(c=s.filter((function(e){return 0!==e.buffer.code}))).length){t.next=14;break}if(void 0===(u=c.find((function(e){return 128===e.buffer.flag})))){t.next=12;break}return t.abrupt("return",a.handleUniLbsError(u.buffer.code,e));case 12:return a.logError("cloud proxy error response"),t.abrupt("return",a.handleUniLbsError(c[0].buffer.code,e));case 14:for(l=[],h=0;h<s.length;h++)if(262144===(null==(p=s[h])||null===(d=p.buffer)||void 0===d?void 0:d.flag))null===(g=p.buffer)||void 0===g||null===(A=g.edges_services)||void 0===A||null===(v=A.forEach)||void 0===v||v.call(A,(function(e){Fm(e=e.ip)&&-1===a.context.cloudProxyServers.indexOf(e)&&(a.log("got cloud proxy server: %s",e),a.context.cloudProxyServers.push(e))}));else if(128===(null==p||null===(f=p.buffer)||void 0===f?void 0:f.flag)){for(_=function(e,t){var n=t[e];l.some((function(e){return e.ip===n.ip}))||l.push({ip:n.ip,ticket:p.buffer.cert})},E=0,w=p.buffer.edges_services;E<w.length;E++)_(E,w);a.context.rtmArea=null!==(m=null===(y=p.buffer)||void 0===y||null===(b=y.detail)||void 0===b?void 0:b[9])&&void 0!==m?m:""}return t.abrupt("return",fb.apply(void 0,I(l).concat([fg])));case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),Ga((function(e){return sa(e)?Y(e):vb})),tg(),wb((function(e){return void 0!==e&&"string"==typeof e.ip&&"string"==typeof e.ticket})))})),m(n(a),"fetchAp",(function(e,t){var n=zi("AP-",a.loggerId);a.log("The AccessPoint requests %s(%s)",e,n);var r=new AbortController;return a.apFinish$.pipe(Oa(1)).subscribe((function(){return r.abort()})),$c(K(x.mark((function i(){var o;return x.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return o=Ag(0,Number.MAX_SAFE_INTEGER),a.log("%s request opid: %d",n,o),i.abrupt("return",se(e,{headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"69","Content-Type":"application/json"},body:{flag:128,opid:o,key:t||a.context.key,cname:a.context.uid,detail:ua({},void 0===y?{11:[C.CHINA,C.GLOBAL].join()}:{11:Array.from(y.CODES).map((function(e){return e===C.OVERSEA?"".concat(C.ASIA,",").concat(C.EUROPE,",").concat(C.AFRICA,",").concat(C.NORTH_AMERICA,",").concat(C.SOUTH_AMERICA,",").concat(C.OCEANIA):e})).join(",")}),uid:0,sid:a.context.sid},signal:r.signal}));case 3:case"end":return i.stop()}}),i)})))).pipe(Ga((function(t){return"AbortError"!==t.name&&(a.logError(t),a.warn("The AP server %s request failure",e,t)),vb})),bb(function(){var t=K(x.mark((function t(r){var i,o,s,c,u,l,h;return x.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=r.responseText,o=JSON.parse(i),a.log("The %s response is %o",n,o),c=(s=o).code,u=s.addresses,l=s.detail,0===c){t.next=6;break}return t.abrupt("return",a.handleUniLbsError(c,e));case 6:if(0!==(h=u).length){t.next=11;break}return t.abrupt("return",Y(Error("No available edge address to connect")));case 11:return a.context.rtmArea=null==l?void 0:l[9],t.abrupt("return",fb.apply(void 0,I(h).concat([fg])));case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),tg(),Ga((function(e){return sa(e)?Y(e):vb})),wb((function(e){return void 0!==e&&"string"==typeof e.ip&&"string"==typeof e.ticket})))})),a.context=e,a.getApEdgeInfoEndFirst$=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return Bc(0,e||o?od.RECONNECTING_AP_INTERVAL:2e3).pipe(Oa(1),ca((function(){a.retryCount+=1})),bb((function(){return 4<=a.retryCount&&(a.retryCount=0),3>=a.retryCount?a.getUrl$(e||o):a.getBackupUrl$(e||o)})),bb((function(e){return a.context.config.enableCloudProxy?a.fetchCloudProxy(e):a.fetchAp(e)})),Ga((function(e){return e instanceof pb&&a.warn("AP request timeout"),Y(e)})),nm((function(e){return e.ip})),ob(a.apFinish$))},a.getApEdgeInfo$=function(e){return Bc(0,e||o?od.RECONNECTING_AP_INTERVAL:2e3).pipe(Oa(8),ca((function(){a.retryCount+=1})),bb((function(){return 3>=a.retryCount?a.getUrl$(e||o):a.getBackupUrl$(e||o)})),bb((function(e){return(a.context.config.enableCloudProxy?a.fetchCloudProxy(e):a.fetchAp(e)).pipe()})),Ga((function(e){return e instanceof pb&&a.warn("AP request timeout"),Y(e)})),nm((function(e){return e.ip})),ob(a.apFinish$))},a}la(t,e);var r=ma(t);return Ha(t,[{key:"clearUp",value:function(){this.failedAreas.clear(),this.retryCount=0}}]),t}(tb());m(Tr,"runOutOfUrlSymbol",Symbol("AP urls are used up"));var Ur=Oh(),Vr=function(e){function t(e,i,o){X(this,t);var a=r.call(this,i,"Connection");m(n(a),"apClient",void 0),m(n(a),"lastOpenSockets",[new pe(1),new pe(1)]),m(n(a),"curOpenSockets",[void 0,void 0]),m(n(a),"ipIterator",0),m(n(a),"firstEnv",.5<=Math.random()?1:0),m(n(a),"firstSocketOpener",void 0),m(n(a),"secondSocketOpener",void 0),m(n(a),"firstOpenKeeperSubject",new Pa),m(n(a),"secondOpenKeeperSubject",new Pa),m(n(a),"edgeInfoReplayed",void 0),m(n(a),"firstEnvOpenSocket",void 0),m(n(a),"firstOpenKeeperSub",void 0),m(n(a),"secondOpenKeeperSub",void 0),m(n(a),"context",void 0),m(n(a),"logger",void 0),a.context=e,a.logger=i,a.apClient=new Tr(a.context,i),a.apClient.apFinish$.subscribe((function(){a.log("Ap client fetch finished")}));var s,c=[];return a.edgeInfoReplayed=a.apClient.getApEdgeInfo$(o).pipe(ne((function(e){return e.pipe(ca((function(e){if(sa(e))throw e})),bd(o?Zd.getParameter("RECONNECTING_AP_INTERVAL"):900),ob(Bc(1e4)))})),wb((function(e){return!cl(c,e)})),Dd((function(){return new Ur({AP_NO_AVAILABLE_EDGE:"No available edge address to connect"})})),ca((function(e){c.push(e),a.log("An edge info got %o",e)})),ca({error:function(e){a.emit("connectionInitFailure",e)}}),wg((function(){a.apClient.clearUp()})),rm()),a.firstEnvOpenSocket=a.edgeInfoReplayed.pipe(bb((function(e){if(void 0===e)return Y(Error("Invalid edge info"));var t=new ll(e.ip,a.firstEnv,e.ticket,a.context,i,s);return a.firstEnv=1===a.firstEnv?0:1,t.on("connectionFailure",(function(){return a.onSocketConnectionFailure(t)})),s=!t.useNewDomain,t.open$.pipe(qf(t))})),ca((function(e){a.log("The websocket of ENV_%d opened to %s:%d",e.env,e.ip,$e[e.env]),a.curOpenSockets[e.env]=e,a.lastOpenSockets[e.env].next(e),a.firstEnv=e.env,a.openSecondSocket(e.env,e.ip,e.useNewDomain)})),Oa(1),oe()),a.firstSocketOpener=a.firstEnvOpenSocket.pipe(bb((function(e){return e.open$.pipe(ca((function(){a.log("The websocket of first ENV_%d re-opened to %s:%d",e.env,e.ip,$e[e.env]),a.curOpenSockets[e.env]=e,a.lastOpenSockets[e.env].next(e)})))}))),e=a.firstOpenKeeperSubject.pipe(Cc(Xc)),a.firstOpenKeeperSub=e.subscribe({error:a.logError}),a}la(t,e);var r=ma(t);return Ha(t,[{key:"initConnection",value:function(){this.firstOpenKeeperSubject.next(this.firstSocketOpener)}},{key:"closeSocket",value:function(e,t){if(![0,1].includes(e))throw new Fa({INVALID_ENV:"The env argument is not 0 or 1"});var n=e===this.firstEnv?this.firstOpenKeeperSub:this.secondOpenKeeperSub;this.firstOpenKeeperSub=void 0;var r=this.curOpenSockets[e];this.curOpenSockets[e]=void 0,r&&(r.isActiveClose=!0,setTimeout((function(){r.close()}),t)),void 0!==n&&setTimeout((function(){null==n||n.unsubscribe()}),t)}},{key:"waitClosing",value:function(e){var t=this;return e.isActiveClose=!0,e.open$.pipe(qt(),Ga((function(e){return e.message===kr.normalClosureMessage?vb:Y(e)})),hb(5e3),Ga((function(n){return n instanceof pb?(t.warn("Force closing the ENV_%d connection",e.env),vb):Y(n)})))}},{key:"onSocketConnectionFailure",value:function(e){var t=[0,1].filter((function(t){return t!==e.env}))[0];(t=this.curOpenSockets[t])&&t.loggedIn?this.reopenSocketWithApRequest(e.env):this.emit("socketsFailure")}},{key:"openSecondSocket",value:function(e,t,n){var r=this,i=1===e?0:1;this.secondSocketOpener=this.edgeInfoReplayed.pipe(qm((function(e,t){return[].concat(I(e),[t])}),[]),ba((function(e){return ir(e,(function(e){return Im(t,e.ip)})).slice(-1)[0]})),Oa(1),bb((function(e){if(void 0===e)return Y(Error("Invalid edge info"));var t=new ll(e.ip,i,e.ticket,r.context,r.logger,n);return t.on("connectionFailure",(function(){return r.onSocketConnectionFailure(t)})),t.open$.pipe(ca((function(){r.lastOpenSockets[i].next(t),r.curOpenSockets[i]=t})))})),oe()),this.secondOpenKeeperSub=this.secondOpenKeeperSubject.pipe(Cc(Xc)).subscribe({error:this.logError}),this.secondOpenKeeperSubject.next(this.secondSocketOpener)}},{key:"reopenSocketWithApRequest",value:function(e){var t=this,n=[0,1].filter((function(t){return t!==e}))[0];if(void 0!==(n=this.curOpenSockets[n])){var r,i=n.ip;n=this.apClient.getApEdgeInfoEndFirst$(!0).pipe(Dd((function(){return new Ur({AP_NO_AVAILABLE_EDGE:"No available edge address to connect"})})),ne((function(e){return e.pipe(ca((function(e){if(e.code===Jh)t.emit("tokenExpired"),t.apClient.apFinish$.next(void 0);else if(sa(e))throw e})),bd(Zd.getParameter("RECONNECTING_AP_INTERVAL")),ob(Bc(8e3)))})),ca((function(e){t.log("An edge info got %o",e)})),wg((function(){t.apClient.clearUp()}))).pipe(qm((function(e,t){return[].concat(I(e),[t])}),[]),ba((function(e){return(e=ir(e,(function(e){return Im(i,e.ip)}))).length-1>=t.ipIterator?e.slice(-t.ipIterator++-1)[0]:(t.ipIterator=0,e.slice(-1)[0])})),Dd(),bb((function(n){if(void 0===n)return Y(Error("Invalid edge info"));var i=new ll(n.ip,e,n.ticket,t.context,t.logger,r);return i.on("connectionFailure",(function(){return t.onSocketConnectionFailure(i)})),r=!i.useNewDomain,i.open$.pipe(qf(i))})),ca((function(n){t.log("The websocket of ENV_%d re-opened to %s:%d using ap",n.env,n.ip,$e[n.env]),t.curOpenSockets[e]=n,t.lastOpenSockets[e].next(n)})),bb((function(n){return n.open$.pipe(ca((function(){t.log("The websocket of ENV_%d re-opened to %s:%d",n.env,n.ip,$e[n.env]),t.curOpenSockets[e]=n,t.lastOpenSockets[e].next(n)})))})),oe()),e===this.firstEnv?this.firstOpenKeeperSubject.next(n):this.secondOpenKeeperSubject.next(n)}}}]),t}(tb()),Wc=fc.Writer,na=fc.util,zc=fc.roots.default||(fc.roots.default={}),QC=zc.Session=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.sid="",e.prototype.userId="",e.prototype.lts=na.Long?na.Long.fromBits(0,0,!1):0,e.prototype.elapse=na.Long?na.Long.fromBits(0,0,!1):0,e.prototype.appId="",e.prototype.ver="",e.prototype.buildno=0,e.prototype.installId="",e.prototype.os=0,e.prototype.did="",e.prototype.index=null,e.prototype.token="",e.prototype.version=0,e.prototype.subVersion=0,e.encode=function(e,t){return t||(t=Wc.create()),null!=e.sid&&Object.hasOwnProperty.call(e,"sid")&&t.uint32(10).string(e.sid),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(18).string(e.userId),null!=e.lts&&Object.hasOwnProperty.call(e,"lts")&&t.uint32(24).int64(e.lts),null!=e.elapse&&Object.hasOwnProperty.call(e,"elapse")&&t.uint32(32).int64(e.elapse),null!=e.appId&&Object.hasOwnProperty.call(e,"appId")&&t.uint32(42).string(e.appId),null!=e.ver&&Object.hasOwnProperty.call(e,"ver")&&t.uint32(50).string(e.ver),null!=e.buildno&&Object.hasOwnProperty.call(e,"buildno")&&t.uint32(56).int32(e.buildno),null!=e.installId&&Object.hasOwnProperty.call(e,"installId")&&t.uint32(66).string(e.installId),null!=e.os&&Object.hasOwnProperty.call(e,"os")&&t.uint32(128).int32(e.os),null!=e.did&&Object.hasOwnProperty.call(e,"did")&&t.uint32(138).string(e.did),null!=e.index&&Object.hasOwnProperty.call(e,"index")&&zc.Session.CommonIndex.encode(e.index,t.uint32(162).fork()).ldelim(),null!=e.token&&Object.hasOwnProperty.call(e,"token")&&t.uint32(170).string(e.token),null!=e.version&&Object.hasOwnProperty.call(e,"version")&&t.uint32(176).int32(e.version),null!=e.subVersion&&Object.hasOwnProperty.call(e,"subVersion")&&t.uint32(184).int32(e.subVersion),t},e.CommonIndex=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.index1="",e.prototype.index2="",e.prototype.index3="",e.encode=function(e,t){return t||(t=Wc.create()),null!=e.index1&&Object.hasOwnProperty.call(e,"index1")&&t.uint32(10).string(e.index1),null!=e.index2&&Object.hasOwnProperty.call(e,"index2")&&t.uint32(18).string(e.index2),null!=e.index3&&Object.hasOwnProperty.call(e,"index3")&&t.uint32(26).string(e.index3),t},e}(),e}(),RC=zc.Link=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.sid="",e.prototype.userId="",e.prototype.lts=na.Long?na.Long.fromBits(0,0,!1):0,e.prototype.elapse=na.Long?na.Long.fromBits(0,0,!1):0,e.prototype.ec=0,e.prototype.sc=0,e.prototype.destServerIp="",e.prototype.ackedServerIp="",e.prototype.responseTime=0,e.encode=function(e,t){return t||(t=Wc.create()),null!=e.sid&&Object.hasOwnProperty.call(e,"sid")&&t.uint32(10).string(e.sid),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(18).string(e.userId),null!=e.lts&&Object.hasOwnProperty.call(e,"lts")&&t.uint32(24).int64(e.lts),null!=e.elapse&&Object.hasOwnProperty.call(e,"elapse")&&t.uint32(32).int64(e.elapse),null!=e.ec&&Object.hasOwnProperty.call(e,"ec")&&t.uint32(40).int32(e.ec),null!=e.sc&&Object.hasOwnProperty.call(e,"sc")&&t.uint32(48).int32(e.sc),null!=e.destServerIp&&Object.hasOwnProperty.call(e,"destServerIp")&&t.uint32(58).string(e.destServerIp),null!=e.ackedServerIp&&Object.hasOwnProperty.call(e,"ackedServerIp")&&t.uint32(66).string(e.ackedServerIp),null!=e.responseTime&&Object.hasOwnProperty.call(e,"responseTime")&&t.uint32(72).int32(e.responseTime),t},e}(),SC=zc.Logout=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.sid="",e.prototype.userId="",e.prototype.lts=na.Long?na.Long.fromBits(0,0,!1):0,e.prototype.elapse=na.Long?na.Long.fromBits(0,0,!1):0,e.encode=function(e,t){return t||(t=Wc.create()),null!=e.sid&&Object.hasOwnProperty.call(e,"sid")&&t.uint32(10).string(e.sid),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(18).string(e.userId),null!=e.lts&&Object.hasOwnProperty.call(e,"lts")&&t.uint32(24).int64(e.lts),null!=e.elapse&&Object.hasOwnProperty.call(e,"elapse")&&t.uint32(32).int64(e.elapse),t},e}(),TC=zc.KickedOff=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.sid="",e.prototype.userId="",e.prototype.lts=na.Long?na.Long.fromBits(0,0,!1):0,e.prototype.elapse=na.Long?na.Long.fromBits(0,0,!1):0,e.prototype.linkId=0,e.prototype.code=0,e.prototype.server="",e.prototype.serverCode=0,e.encode=function(e,t){return t||(t=Wc.create()),null!=e.sid&&Object.hasOwnProperty.call(e,"sid")&&t.uint32(10).string(e.sid),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(18).string(e.userId),null!=e.lts&&Object.hasOwnProperty.call(e,"lts")&&t.uint32(24).int64(e.lts),null!=e.elapse&&Object.hasOwnProperty.call(e,"elapse")&&t.uint32(32).int64(e.elapse),null!=e.linkId&&Object.hasOwnProperty.call(e,"linkId")&&t.uint32(48).int32(e.linkId),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(56).int32(e.code),null!=e.server&&Object.hasOwnProperty.call(e,"server")&&t.uint32(66).string(e.server),null!=e.serverCode&&Object.hasOwnProperty.call(e,"serverCode")&&t.uint32(72).int32(e.serverCode),t},e}(),UC=zc.ChnJoin=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.sid="",e.prototype.userId="",e.prototype.lts=na.Long?na.Long.fromBits(0,0,!1):0,e.prototype.elapse=na.Long?na.Long.fromBits(0,0,!1):0,e.prototype.cname="",e.prototype.errCode=0,e.encode=function(e,t){return t||(t=Wc.create()),null!=e.sid&&Object.hasOwnProperty.call(e,"sid")&&t.uint32(10).string(e.sid),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(18).string(e.userId),null!=e.lts&&Object.hasOwnProperty.call(e,"lts")&&t.uint32(24).int64(e.lts),null!=e.elapse&&Object.hasOwnProperty.call(e,"elapse")&&t.uint32(32).int64(e.elapse),null!=e.cname&&Object.hasOwnProperty.call(e,"cname")&&t.uint32(50).string(e.cname),null!=e.errCode&&Object.hasOwnProperty.call(e,"errCode")&&t.uint32(56).int32(e.errCode),t},e}(),VC=zc.ChnJoinRes=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.sid="",e.prototype.userId="",e.prototype.lts=na.Long?na.Long.fromBits(0,0,!1):0,e.prototype.elapse=na.Long?na.Long.fromBits(0,0,!1):0,e.prototype.cname="",e.prototype.errCode=0,e.prototype.serverErrCode=0,e.encode=function(e,t){return t||(t=Wc.create()),null!=e.sid&&Object.hasOwnProperty.call(e,"sid")&&t.uint32(10).string(e.sid),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(18).string(e.userId),null!=e.lts&&Object.hasOwnProperty.call(e,"lts")&&t.uint32(24).int64(e.lts),null!=e.elapse&&Object.hasOwnProperty.call(e,"elapse")&&t.uint32(32).int64(e.elapse),null!=e.cname&&Object.hasOwnProperty.call(e,"cname")&&t.uint32(50).string(e.cname),null!=e.errCode&&Object.hasOwnProperty.call(e,"errCode")&&t.uint32(56).int32(e.errCode),null!=e.serverErrCode&&Object.hasOwnProperty.call(e,"serverErrCode")&&t.uint32(64).int32(e.serverErrCode),t},e}(),WC=zc.ChnLeave=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.sid="",e.prototype.userId="",e.prototype.lts=na.Long?na.Long.fromBits(0,0,!1):0,e.prototype.elapse=na.Long?na.Long.fromBits(0,0,!1):0,e.prototype.cname="",e.prototype.errCode=0,e.encode=function(e,t){return t||(t=Wc.create()),null!=e.sid&&Object.hasOwnProperty.call(e,"sid")&&t.uint32(10).string(e.sid),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(18).string(e.userId),null!=e.lts&&Object.hasOwnProperty.call(e,"lts")&&t.uint32(24).int64(e.lts),null!=e.elapse&&Object.hasOwnProperty.call(e,"elapse")&&t.uint32(32).int64(e.elapse),null!=e.cname&&Object.hasOwnProperty.call(e,"cname")&&t.uint32(50).string(e.cname),null!=e.errCode&&Object.hasOwnProperty.call(e,"errCode")&&t.uint32(56).int32(e.errCode),t},e}(),XC=zc.ConnectionStateChange=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.sid="",e.prototype.userId="",e.prototype.lts=na.Long?na.Long.fromBits(0,0,!1):0,e.prototype.elapse=na.Long?na.Long.fromBits(0,0,!1):0,e.prototype.oldState=0,e.prototype.newState=0,e.prototype.reason=0,e.prototype.reconnId=0,e.encode=function(e,t){return t||(t=Wc.create()),null!=e.sid&&Object.hasOwnProperty.call(e,"sid")&&t.uint32(10).string(e.sid),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(18).string(e.userId),null!=e.lts&&Object.hasOwnProperty.call(e,"lts")&&t.uint32(24).int64(e.lts),null!=e.elapse&&Object.hasOwnProperty.call(e,"elapse")&&t.uint32(32).int64(e.elapse),null!=e.oldState&&Object.hasOwnProperty.call(e,"oldState")&&t.uint32(40).int32(e.oldState),null!=e.newState&&Object.hasOwnProperty.call(e,"newState")&&t.uint32(48).int32(e.newState),null!=e.reason&&Object.hasOwnProperty.call(e,"reason")&&t.uint32(56).int32(e.reason),null!=e.reconnId&&Object.hasOwnProperty.call(e,"reconnId")&&t.uint32(64).int32(e.reconnId),t},e}(),du=Object.freeze({__proto__:null,Session:QC,Link:RC,Logout:SC,KickedOff:TC,ChnJoin:UC,ChnJoinRes:VC,ChnLeave:WC,ConnectionStateChange:XC,default:zc}),eu=Object.freeze({__proto__:null,Counter:1,ApiExec:154,Session:164,ApEvent:165,Link:166,Logout:167,TxMessage:168,RxMessage:169,KickedOff:170,TxMessageRes:171,ChnJoin:172,ChnJoinRes:173,ChnLeave:174,ChnGetMembers:175,ChnGetMembersRes:176,ChnMemberJoined:177,ChnMemberLeft:178,QueryPeersOnlineStatus:179,QueryPeersOnlineStatusRes:180,RenewToken:181,OperateAttribute:186,OperateAttributeRes:187,ApRequest:188,LinkTcpEvent:189,LinkLoginRequest:190,ConnectionStateChange:191,default:{Counter:1,ApiExec:154,Session:164,ApEvent:165,Link:166,Logout:167,TxMessage:168,RxMessage:169,KickedOff:170,TxMessageRes:171,ChnJoin:172,ChnJoinRes:173,ChnLeave:174,ChnGetMembers:175,ChnGetMembersRes:176,ChnMemberJoined:177,ChnMemberLeft:178,QueryPeersOnlineStatus:179,QueryPeersOnlineStatusRes:180,RenewToken:181,OperateAttribute:186,OperateAttributeRes:187,ApRequest:188,LinkTcpEvent:189,LinkLoginRequest:190,ConnectionStateChange:191}}),YC=function(e){function t(e,i,o){return X(this,t),m(n(o=r.call(this,o,"Context")),"_token",void 0),m(n(o),"config",void 0),m(n(o),"_uid",void 0),m(n(o),"_sid",void 0),m(n(o),"_area","CN"),m(n(o),"appId",void 0),m(n(o),"enableCloudProxy",!1),m(n(o),"cloudProxyServers",[]),o.appId=e,o.config=i,o}la(t,e);var r=ma(t);return Ha(t,[{key:"token",set:function(e){this._token="string"==typeof e&&e?e:void 0}},{key:"uid",get:function(){if("string"==typeof this._uid&&this._uid)return this._uid;throw new Ia("Cannot get illegal uid")},set:function(e){if(this.log("The user ID is set to %s",oa(e)),!za(e))throw new Ia;this._uid=e}},{key:"key",get:function(){if("string"==typeof this._token&&this._token)return this._token;if("string"==typeof this.appId&&this.appId)return this.appId;throw new Ia("Cannot get illegal key")}},{key:"sid",get:function(){if("string"==typeof this._sid&&this._sid)return this._sid;throw new Ia("Cannot get illegal sid")},set:function(e){if(this.log("sid is set to %s",e),"string"!=typeof e||!e)throw new Ia;this._sid=e}},{key:"rtmArea",get:function(){if("string"==typeof this._area&&this._area)return this._area;throw new Ia("Cannot get illegal area")},set:function(e){this.log("area is set to %s",e),"string"==typeof e&&e?this._area=e:this.warn("set area failed")}}]),t}(tb()),ZC=!!Fc&&R((function(){Fc.prototype.finally.call({then:function(){}},(function(){}))}));if(P({target:"Promise",proto:!0,real:!0,forced:ZC},{finally:function(e){var t=jd(this,mc("Promise")),n="function"==typeof e;return this.then(n?function(n){return lj(t,e()).then((function(){return n}))}:e,n?function(n){return lj(t,e()).then((function(){throw n}))}:e)}}),"function"==typeof Fc){var Wr=mc("Promise").prototype.finally;Fc.prototype.finally!==Wr&&Ta(Fc.prototype,"finally",Wr,{unsafe:!0})}var $C=function(){var e=K(x.mark((function e(t){return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Uint8Array,e.next=3,crypto.subtle.digest("SHA-256",t);case 3:return e.t1=e.sent,e.abrupt("return",new e.t0(e.t1));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Xr=function(e){return Array.from(e).map((function(e){return e.toString(16).padStart(2,"0")})).join("")},aD=function(e){if("string"!=typeof e)throw new TypeError("Expected input to be a string");if(0!=e.length%2)throw new RangeError("Expected string to be an even number of characters");for(var t=new Uint8Array(e.length/2),n=0;n<e.length;n+=2)t[n/2]=parseInt(e.substring(n,n+2),16);return t},Yr=function(e){return btoa(String.fromCharCode.apply(String,I(e))).replace(/={1,2}$/,"")},Zr=function(){var e=K(x.mark((function e(t){var n;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,crypto.subtle.digest("SHA-1",t);case 3:n=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),n=sha1.arrayBuffer(t);case 9:return e.abrupt("return",Yr(new Uint8Array(n)));case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),$r=function(e,t,n,r){r[t]=!0,n.has(e)?n.get(e).add(t):n.set(e,new Set([t]))},bD=function(e){switch(e){case"89504E47":return"image/png";case"47494638":return"image/gif";case"25504446":return"application/pdf";case"FFD8FFDB":case"FFD8FFE0":case"FFD8FFE1":return"image/jpeg";case"504B0304":return"application/zip";default:return"application/octet-stream"}},as=function(e){function t(e,i,o,a){X(this,t);var s=r.call(this,o,"ChunkDownloadManager");if(m(n(s),"abortController",new AbortController),m(n(s),"downloadedSize",0),m(n(s),"successCount",0),m(n(s),"timer",void 0),m(n(s),"chunks",[]),m(n(s),"retUnit",void 0),m(n(s),"singleThread",!1),m(n(s),"initialized",!1),m(n(s),"ee",void 0),m(n(s),"chunkCount",void 0),m(n(s),"aborted",!1),m(n(s),"serverToIndices",new Map),m(n(s),"backupToIndices",new Map),m(n(s),"indexToBackupServers",[]),m(n(s),"busyBackupServers",new Map),m(n(s),"downloadingChunks",new Set),m(n(s),"metaInfo",void 0),m(n(s),"transHandler",void 0),s.metaInfo=e,s.transHandler=i,s.ee=void 0===a?new ea:a,o=e.size,e=e.unit,0===o)throw new Ia("size cannot be 0");return void 0!==i.cancelSignal&&i.cancelSignal.addEventListener("abort",(function(){s.abortController.abort()}),{once:!0}),s.abortController.signal.addEventListener("abort",(function(){s.aborted=!0}),{once:!0}),s.chunkCount=Math.ceil(o/(32768*e)),s}la(t,e);var r=ma(t);return Ha(t,[{key:"setInfoByResponse",value:function(e){var t=this,n=e.serverList,r=e.backupList;if(e=e.unit,n.length<this.chunkCount&&r.length<this.chunkCount)throw new Ia("servers is not enough");this.updateProgress(0),this.initialized=!0;var i=Array(this.chunkCount).fill(!1);if(n.forEach((function(e,n){return e.forEach((function(e){return $r(e,n,t.serverToIndices,i)}))})),r.forEach((function(e,n){return e.forEach((function(e){return $r(e,n,t.backupToIndices,i)}))})),i.some((function(){return!1})))throw new da("Not enough servers to download",mg);this.indexToBackupServers=r.map((function(e){return new Set(e)})),this.retUnit=e}},{key:"downloadChunks",value:function(){this.aborted?this.warn("downloadChunks after abort, ignored"):1===this.serverToIndices.size&&0===Array.from(this.serverToIndices.keys())[0]?this.serversDownload(this.backupToIndices):1<=this.serverToIndices.size?this.serversDownload(this.serverToIndices,!0):this.ee.emit("error",new da("not enough servers to download",mg))}},{key:"updateProgress",value:function(e){var t=this,n=this.downloadedSize+e;this.downloadedSize>this.metaInfo.size?(this.warn("Invalid download size, overflowed"),this.ee.emit("error",new Vc("Invalid download size",mg))):(this.downloadedSize=n,void 0!==this.timer&&0!==e&&(clearTimeout(this.timer),this.timer=void 0),void 0===this.timer&&this.successCount!==this.chunkCount&&(this.timer=setTimeout((function(){t.ee.emit("timedOut"),t.abortController.abort()}),12e4)),this.initialized&&0===e||void 0===this.transHandler.onOperationProgress||this.transHandler.onOperationProgress({totalSize:this.metaInfo.size,currentSize:this.downloadedSize}))}},{key:"getPayload",value:function(){for(var e=0,t=0,n=this.chunks;t<n.length;t++)e+=n[t].byteLength;if(e!==this.metaInfo.size)throw new Ia("invalid chunks total size");e=new Uint8Array(e),n=t=0;for(var r=this.chunks;n<r.length;n++){var i=r[n];e.set(new Uint8Array(i),t),t+=i.byteLength}return t=Array.from(e.subarray(0,4)).map((function(e){return e.toString(16)})).join("").toUpperCase(),Xt(e.buffer,bD(t))}},{key:"getDownloadUrl",value:function(e){var t=this.metaInfo.useNewDomain?"sd-rtn.com":"agora.io";return"https://".concat(Dg(e).split(".").join("-"),".edge.").concat(t,":9601/api/v1/chuck/download")}},{key:"serversDownload",value:function(){var e=K(x.mark((function e(t){var n,r=this,i=arguments;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=1<i.length&&void 0!==i[1]&&i[1],e.next=3,Promise.all(Array.from(t.entries()).map((function(e){return e=ra(e,2),r.postDownloadRequest(e[0],Array.from(e[1]),n).catch((function(e){404===e.statusCode?(r.ee.emit("notExist"),r.abortController.abort()):"AbortError"!==e.name&&(Sa(e)?r.singleThread?(r.abortController.abort(),r.ee.emit("timedOut")):(r.warn("%d download timed out after %d, retrying use single thread",e.index,r.singleThread?6e4:3e4),r.abortController.abort(),r.singleThread=!0,r.ee.emit("multiTimeOut")):(r.ee.emit("error",e),r.abortController.abort()))}))})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"postDownloadRequest",value:function(){var e=K(x.mark((function e(t,n,r){var i,o,a,s,c,u,l,h,d,f=this;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d=function(){return(d=K(x.mark((function e(o){var a,d,f,p,g,A,v,m,y;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,void 0!==o||0!==t){e.next=5;break}throw new Ia("Invalid serverIp");case 5:a=void 0===o?l.getDownloadUrl(t):o;case 6:return l.downloadingChunks.add(i),e.next=9,u(a);case 9:return d=e.sent,f=d.responseData,l.downloadingChunks.delete(i),e.abrupt("return",f);case 15:if(e.prev=15,e.t0=e.catch(0),l.downloadingChunks.delete(i),n.unshift(i),l.metaInfo.useNewDomain=!1,"AbortError"!==e.t0.name){e.next=22;break}throw e.t0;case 22:if(!Sa(e.t0)){e.next=25;break}throw e.t0.index=i,e.t0;case 25:if(p=s,s+=1,!(2>p)){e.next=30;break}return e.t0 instanceof Ia||l.warn("%o, %d download failed, retrying",e.t0,i),e.abrupt("return",h());case 30:if(504!==e.t0.statusCode){e.next=34;break}throw(g=new cb("download server timed out",{originalError:e.t0,serverCode:504})).index=i,g;case 34:if(!r||2!==p||0===c[0]){e.next=45;break}return e.t0 instanceof Ia||l.warn("%d download failed, using backup: %d, %o",i,c[0],e.t0),e.next=38,l.busyBackupServers.get(c[0]);case 38:return A=h(l.getDownloadUrl(c[0])),l.busyBackupServers.set(c[0],A),e.next=42,A;case 42:return v=e.sent,l.busyBackupServers.delete(c[0]),e.abrupt("return",v);case 45:if(!(r&&2<p&&void 0!==c[1]&&0!==c[1])){e.next=56;break}return l.warn("%d download failed, using backup 1: %d",i,c[1]),e.next=49,l.busyBackupServers.get(c[1]);case 49:return m=h(l.getDownloadUrl(c[1])),l.busyBackupServers.set(c[1],m),e.next=53,m;case 53:return y=e.sent,l.busyBackupServers.delete(c[1]),e.abrupt("return",y);case 56:throw e.t0.index=i,e.t0;case 58:case"end":return e.stop()}}),e,null,[[0,15]])})))).apply(this,arguments)},h=function(e){return d.apply(this,arguments)},!this.aborted){e.next=4;break}throw new Ia("download already aborted");case 4:if(void 0!==(i=n.shift())){e.next=8;break}return this.log("%s download finished",t),e.abrupt("return");case 8:if(!(this.singleThread&&0<this.downloadingChunks.size)){e.next=10;break}return e.abrupt("return");case 10:if(!this.downloadingChunks.has(i)){e.next=13;break}return this.log("%s already downloading, return",i),e.abrupt("return");case 13:if(void 0===this.chunks[i]){e.next=19;break}return this.successCount===this.chunkCount&&(this.log("chunks all download"),this.ee.emit("finished")),this.log("%s already downloaded, do next",i),e.next=18,this.postDownloadRequest(t,n,r);case 18:return e.abrupt("return");case 19:return o=new FormData,a={hash:fu(this.metaInfo.hashHexStr),unit:void 0===this.retUnit?this.metaInfo.unit:this.retUnit,instance:this.metaInfo.instance,loginOpt:this.metaInfo.loginOpt,ticket:this.metaInfo.ticket,index:i},o.append("parameter",JSON.stringify(a)),s=0,c=Array.from(this.indexToBackupServers[i]),u=function(e){return se(e,{body:o,signal:f.abortController.signal,timeout:f.singleThread?12e4:3e4},{useBinaryResponse:!0})},l=this,e.next=28,h().then((function(e){return void 0!==f.chunks[i]?f.log("chunk %d download duplicated",i):(f.chunks[i]=e,f.log("chunk %d downloaded",i),f.successCount+=1,f.updateProgress(f.chunks[i].byteLength)),f.successCount===f.chunkCount&&(f.log("chunks all download"),f.ee.emit("finished")),f.singleThread?(f.downloadChunks(),Promise.resolve()):f.postDownloadRequest(t,n,r)}));case 28:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()}]),t}(tb()),bs=function(e){function t(e,i,o,a){X(this,t);var s=r.call(this,o,"ChunkUploadManager");if(m(n(s),"chunkCount",0),m(n(s),"chunks",[]),m(n(s),"uploadedChunks",[]),m(n(s),"totalFailures",0),m(n(s),"timer",void 0),m(n(s),"initState","uninitialized"),m(n(s),"ee",void 0),m(n(s),"unit",0),m(n(s),"uploadedSize",0),m(n(s),"singleThread",!1),m(n(s),"abortController",new AbortController),m(n(s),"servers",[]),m(n(s),"aborted",!1),m(n(s),"metaInfo",void 0),m(n(s),"transHandler",void 0),s.metaInfo=e,s.transHandler=i,s.ee=void 0===a?new ea:a,0===e.file.length)throw new L("file not found or is empty",wf);return void 0!==i.cancelSignal&&i.cancelSignal.addEventListener("abort",(function(){s.abortController.abort()}),{once:!0}),s.abortController.signal.addEventListener("abort",(function(){s.aborted=!0}),{once:!0}),s}la(t,e);var r=ma(t);return Ha(t,[{key:"initChunks",value:function(){var e=K(x.mark((function e(t){var n,r,i,o,a,s=this;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("initialized"!==this.initState&&"initializing"!==this.initState){e.next=2;break}throw new Ia("cannot re-initialize");case 2:for(this.initState="initializing",this.unit=t,n=this.sliceFile(t,this.metaInfo.file),this.chunkCount=n.length,r=[],i=function(e,t){var n=(e=ra(t[e],2))[0],i=e[1];e=Zr(i).then((function(e){s.chunks[n]={payload:i,sha1:e,uploadedTo:void 0,index:n,processed:!1}})),r.push(e)},o=0,a=Array.from(n.entries());o<a.length;o++)i(o,a);return e.next=11,Promise.all(r);case 11:this.updateProgress(0),this.initState="initialized",this.log("upload chunks initialized");case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"uploadToServers",value:function(){var e=this;if(!this.aborted){for(var t=this.chunks.filter((function(e){return!e.processed})),n=function(n){var r=t[n],i=e.servers.filter((function(e){return!e.isUploading})).sort((function(e,t){return e.successCount-t.successCount})).sort((function(e,t){return e.failureCount-t.failureCount}))[0];if(void 0===i||1<i.failureCount)return e.log("Upload server not available, waiting"),e.ee.emit("serverUsedUp"),Nm(1e3).then((function(){e.totalFailures>2*e.chunkCount&&e.ee.emit("error"),e.totalFailures+=1,void 0!==i&&(i.failureCount=0),e.uploadToServers()})).catch((function(){})),"break";r.processed=!0,i.isUploading=!0,e.log("uploading chunk %d to server %s",r.index,Dg(i.ip));var o=e.getUploadUrl(i.ip);return K(x.mark((function t(){var n;return x.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.postChunk(r.payload,o,r.index);case 3:n=e.chunks.findIndex((function(e){return e===r})),r.uploadedTo=i.ip,e.chunks.splice(n,1),e.uploadedChunks.push(r),i.successCount+=1,i.isUploading=!1,e.updateProgress(r.payload.byteLength),e.log("upload chunk %d successfully",r.index),t.next=31;break;case 13:if(t.prev=13,t.t0=t.catch(0),i.isUploading=!1,r.processed=!1,504!==t.t0.statusCode&&!Sa(t.t0)){t.next=27;break}if(e.singleThread){t.next=24;break}return e.warn("%d upload timed out after %d, retrying use single thread",r.index,e.singleThread?12e4:3e4),e.abortController.abort(),e.singleThread=!0,e.ee.emit("multiTimeOut"),t.abrupt("return");case 24:return e.ee.emit("timedOut"),e.abortController.abort(),t.abrupt("return");case 27:return e.metaInfo.useNewDomain=!1,i.failureCount+=1,t.next=31,Nm(1e3);case 31:e.uploadedChunks.length===e.chunkCount?(e.log("chunks uploaded"),e.ee.emit("finished")):(e.singleThread||1===e.chunks.filter((function(e){return!e.processed})).length)&&e.uploadToServers();case 32:case"end":return t.stop()}}),t,null,[[0,13]])})))(),e.singleThread?"break":void 0},r=0;r<t.length&&"break"!==n(r);r++);0===t.length&&this.uploadedChunks.length!==this.chunkCount&&this.log("%d chunks left uploading",this.chunkCount-this.uploadedChunks.length)}}},{key:"getUploadServerIPs",value:function(){var e=!0,t=[],n=I(this.uploadedChunks).sort((function(e,t){return e.index-t.index})),r=0;for(n=Array.from(n.values());r<n.length;r++){var i=n[r].uploadedTo;if(void 0===i){e=!1;break}t.push(i)}if(!e)throw new Ia("some chunks not uploaded, cannot get upload server ips");return t}},{key:"addServers",value:function(e){var t=this;e.forEach((function(e){var n=t.servers.findIndex((function(t){return t.ip===e}));-1!==n?t.servers[n].failureCount=0:(t.log("server %s added",Dg(e)),t.servers.push({successCount:0,isUploading:!1,ip:e,failureCount:0}))}))}},{key:"updateProgress",value:function(e){var t=this,n=void 0!==e?this.uploadedSize+e:this.metaInfo.file.length;n>this.metaInfo.file.length?(this.warn("Invalid upload size, overflowed"),this.ee.emit("error",new Vc("Invalid upload size",lg))):(this.uploadedSize=n,void 0!==this.timer&&0!==e&&(clearTimeout(this.timer),this.timer=void 0),void 0===this.timer&&void 0!==e&&this.uploadedChunks.length!==this.chunkCount&&(this.timer=setTimeout((function(){t.ee.emit("timedOut"),t.abortController.abort()}),12e4)),"initialized"===this.initState&&0===e||void 0===this.transHandler.onOperationProgress||this.transHandler.onOperationProgress({totalSize:this.metaInfo.file.length,currentSize:this.uploadedSize}))}},{key:"sliceFile",value:function(e,t){var n=0,r=[],i=t.length;for(e*=32768;n<i;)r.push(t.slice(n,n+e)),n+=e;return this.log("chunks split into %d",r.length),r}},{key:"postChunk",value:function(){var e=K(x.mark((function e(t,n,r){var i,o,a,s,c,u,l;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.aborted){e.next=2;break}throw new Ia("upload already aborted");case 2:if(void 0!==this.unit){e.next=4;break}throw new Ia("unit is undefined");case 4:return i=this.metaInfo,o=i.ticket,a=i.instance,s=i.loginOpt,c=i.hashStr,e.t0=r,e.t1=c,e.next=9,Zr(t);case 9:return e.t2=e.sent,e.t3=this.unit,e.t4=o,e.t5=a,e.t6=s,u={index:e.t0,hash:e.t1,sha1:e.t2,unit:e.t3,ticket:e.t4,instance:e.t5,loginOpt:e.t6},(l=new FormData).append("parameter",JSON.stringify(u)),l.append("payload",new Blob([t])),e.next=20,se(n,{headers:{Accept:"application/json"},body:l,timeout:this.singleThread?12e4:3e4,signal:this.abortController.signal});case 20:if(201===e.sent.status){e.next=24;break}throw new da("uploading chunk ".concat(r," failed"));case 24:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"getUploadUrl",value:function(e){var t=this.metaInfo.useNewDomain?"sd-rtn.com":"agora.io";return"https://".concat(Dg(e).split(".").join("-"),".edge.").concat(t,":9601/api/v1/chuck/upload")}}]),t}(tb()),cs=function(e){function t(e){X(this,t);var i=r.call(this,e,"MediaTaskManager");return m(n(i),"isProcessing",!1),m(n(i),"authInfo",void 0),m(n(i),"taskFinishers",{}),m(n(i),"mediaTasks",new Map),m(n(i),"ongoingTask",void 0),i.on("connectionStateChanged",(function(e){if(e===S.ConnectionState.ABORTED||e===S.ConnectionState.DISCONNECTED){void 0!==i.ongoingTask&&i.cancelTask(i.ongoingTask),e=0;for(var t=Array.from(i.mediaTasks.entries());e<t.length;e++){var n=ra(t[e],2)[1];i.cancelTask(n)}i.mediaTasks.clear(),i.taskFinishers={}}else e===S.ConnectionState.RECONNECTING?void 0!==i.ongoingTask&&i.ongoingTask.manager.abortController.abort():e===S.ConnectionState.CONNECTED&&void 0!==i.ongoingTask&&i.ongoingTask.manager.ee.emit("reconnected")})),i}la(t,e);var r=ma(t);return Ha(t,[{key:"setAuthInfo",value:function(e){this.authInfo=e}},{key:"waitMediaTask",value:function(e){var t=this;return new Promise((function(n,r){t.taskFinishers[e]={resolve:n,reject:r},t.isProcessing||t.processMediaTask()})).finally((function(){void 0!==t.ongoingTask&&void 0!==t.ongoingTask.manager.timer&&clearTimeout(t.ongoingTask.manager.timer),delete t.taskFinishers[e],0!==t.mediaTasks.size?t.processMediaTask():t.isProcessing=!1}))}},{key:"addUploadTask",value:function(e,n,r,i){var o=e.file;if(e=e.hash,void 0===this.authInfo)throw new Ia("session not found");if(this.mediaTasks.size>=t.MAX_PENDING_TASK_COUNT-1)throw new ib("Upload media failed, exceed max pending jobs",vA);return i=new bs({hashStr:Yr(e),file:o,ticket:this.authInfo.ticket,instance:this.authInfo.instance.toString(),loginOpt:this.authInfo.loginOpt.toString(),useNewDomain:this.authInfo.useNewDomain},i,this.logger),o=Ud(),this.mediaTasks.set(o,{type:"UPLOAD",manager:i,hash:e,setter:r,fetcher:n,taskId:o}),o}},{key:"addDownloadTask",value:function(e,n,r){var i=e.hashHexStr,o=e.size,a=e.unit;if(e=e.zone,void 0===this.authInfo)throw new Ia("session not found");if(this.mediaTasks.size>=t.MAX_PENDING_TASK_COUNT-1)throw new ib("Download media failed, exceed max pending jobs",zA);return r=new as({hashHexStr:i,ticket:this.authInfo.ticket,useNewDomain:this.authInfo.useNewDomain,instance:this.authInfo.instance.toString(),loginOpt:this.authInfo.loginOpt.toString(),size:o,zone:e,unit:a},r,this.logger),i=Ud(),this.mediaTasks.set(i,{type:"DOWNLOAD",manager:r,fetcher:n,taskId:i}),i}},{key:"doDownloadTaskImpl",value:function(){var e=K(x.mark((function e(t,n){var r,i,o,a,s,c,u,l,h=this,d=arguments;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=2<d.length&&void 0!==d[2]&&d[2],o=i=t.manager,r&&(i=new as(o.metaInfo,o.transHandler,this.logger,o.ee)),a=t.fetcher,e.next=7,a();case 7:if(s=e.sent,c=s.serverList,u=s.backupList,l=s.unit,!r||l===o.retUnit){e.next=13;break}throw new da("download unit is different, reject to continue",mg);case 13:r&&(t.manager=i,i.downloadedSize=o.downloadedSize,i.successCount=o.successCount,i.timer=o.timer,i.chunks=o.chunks,i.initialized=o.initialized,i.singleThread=o.singleThread,i.updateProgress(0)),i.ee.once("reconnected",(function(){i.ee.removeAllListeners(),h.doDownloadTaskImpl(t,n,!0).catch((function(e){n.reject(e)}))})),i.ee.once("multiTimeOut",(function(){i.ee.removeAllListeners(),h.doDownloadTaskImpl(t,n,!0).catch((function(e){n.reject(e)}))})),i.ee.once("error",(function(e){i.ee.removeAllListeners(),n.reject(new da(["download file file, index %d",e.index],{code:mg,originalError:e}))})),i.ee.once("notExist",(function(){i.abortController.abort(),i.ee.removeAllListeners(),n.reject(new da("download file not found",yA))})),i.ee.once("timedOut",(function(){i.ee.removeAllListeners(),i.abortController.abort(),n.reject(new cb("download timed out",xA))})),void 0!==i.transHandler.cancelSignal&&i.transHandler.cancelSignal.addEventListener("abort",(function(){n.reject(new gl("Downloading canceled",gr))}),{once:!0}),i.ee.once("finished",(function(){n.resolve({type:"DOWNLOAD",payload:i.getPayload()})})),i.setInfoByResponse({serverList:c,backupList:u,unit:l}),i.downloadChunks();case 23:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"doDownloadTask",value:function(e,t){var n=this,r=2<arguments.length&&void 0!==arguments[2]&&arguments[2],i=e.taskId;return r||(this.mediaTasks.delete(i),this.ongoingTask=e),new Promise((function(i,o){n.doDownloadTaskImpl(e,t,r).then(i).catch(o)}))}},{key:"doUploadTaskImpl",value:function(){var e=K(x.mark((function e(t,n){var r,i,o,a,s,c,u,l,h=this,d=arguments;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=2<d.length&&void 0!==d[2]&&d[2],o=i=t.manager,r&&(i=new bs(o.metaInfo,o.transHandler,this.logger,o.ee)),a=t.fetcher,s=new Pa,u=new Promise((function(e,u){var l=a(),h=l.ret,d=l.err,f=l.timeout;l.fin.pipe(ob(s)).subscribe({next:function(e){n.resolve({type:"UPLOAD",retUnit:e.unit,zone:e.zone})},complete:function(){e({hasExist:!0}),s.next(),s.complete()}}),h.pipe(ob(s),bb(function(){var e=K(x.mark((function e(a){var s,u;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=a.servers,u=a.unit,r&&o.unit!==u?n.reject(new da("upload unit is different, reject to continue",lg)):r&&(t.manager=i,i.chunkCount=o.chunkCount,i.chunks=o.chunks,i.totalFailures=o.totalFailures,i.uploadedChunks=o.uploadedChunks,i.timer=o.timer,i.initState=o.initState,i.unit=o.unit,i.uploadedSize=o.uploadedSize,i.singleThread=o.singleThread,i.updateProgress(0)),i.addServers(s),"uninitialized"!==i.initState){e.next=7;break}return c=i.initChunks(u),e.next=7,c;case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).subscribe({complete:function(){return e({hasExist:!1})},error:u}),l=function(t){"uninitialized"!==i.initState&&c?e(c.then((function(){return{hasExist:!1}}))):u(t)},d.pipe(ob(s)).subscribe({error:l}),f.pipe(ob(s)).subscribe({error:l})})),e.next=9,u;case 9:if(!e.sent.hasExist){e.next=15;break}return i.updateProgress(),this.log("file already exists, skipping upload"),e.abrupt("return");case 15:s.next(),s.complete(),this.log("chunks initialization promise resolved"),l=gb(i.ee,"serverUsedUp").pipe(Dt((function(){return i.chunkCount!==i.uploadedChunks.length})),Gt(5e3,void 0,{leading:!1}),om((function(){return a().ret}))).subscribe((function(e){i.addServers(e.servers)})),i.ee.once("reconnected",(function(){i.ee.removeAllListeners(),h.doUploadTask(t,n,!0).catch((function(e){n.reject(e)}))})),i.ee.once("multiTimeOut",(function(){i.ee.removeAllListeners(),h.doUploadTask(t,n,!0).catch((function(e){n.reject(e)}))})),i.ee.once("timedOut",(function(){l.unsubscribe(),i.ee.removeAllListeners(),i.abortController.abort(),n.reject(new cb("upload timed out",Kh))})),i.ee.once("error",(function(e){l.unsubscribe(),i.ee.removeAllListeners(),i.abortController.abort(),n.reject(e||new da("upload error",lg))})),void 0!==i.transHandler.cancelSignal&&i.transHandler.cancelSignal.addEventListener("abort",(function(){n.reject(new gl("Uploading canceled",fr))}),{once:!0}),i.ee.once("finished",K(x.mark((function e(){var r,o,a;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l.unsubscribe(),e.next=3,t.setter(i.unit,i.getUploadServerIPs());case 3:r=e.sent,o=r.zone,a=r.unit,i.ee.removeAllListeners(),n.resolve({type:"UPLOAD",retUnit:a,zone:o});case 8:case"end":return e.stop()}}),e)})))),i.uploadToServers();case 26:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"doUploadTask",value:function(e,t){var n=this,r=2<arguments.length&&void 0!==arguments[2]&&arguments[2],i=e.taskId;return r||(this.mediaTasks.delete(i),this.ongoingTask=e),new Promise((function(i,o){n.doUploadTaskImpl(e,t,r).then(i).catch(o)}))}},{key:"processMediaTask",value:function(){var e=K(x.mark((function e(){var t,n,r;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.mediaTasks.size){e.next=2;break}throw Error("no upload tasks");case 2:if(this.isProcessing=!0,t=this.mediaTasks.keys().next().value,void 0!==(n=this.taskFinishers[t])){e.next=7;break}throw Error("top task not found");case 7:if(void 0!==(r=this.mediaTasks.get(t))){e.next=10;break}throw new Ia("task invalid");case 10:if("UPLOAD"!==r.type){e.next=15;break}return e.next=13,this.doUploadTask(r,n).catch((function(e){r.manager.ee.removeAllListeners(),n.reject(e)}));case 13:e.next=18;break;case 15:if("DOWNLOAD"!==r.type){e.next=18;break}return e.next=18,this.doDownloadTask(r,n).catch((function(e){r.manager.ee.removeAllListeners(),n.reject(e)}));case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cancelTask",value:function(e){var t="DOWNLOAD"===e.type?gr:fr;e.manager.ee.removeAllListeners(),e.manager.abortController.abort(),void 0!==this.taskFinishers[e.taskId]&&this.taskFinishers[e.taskId].reject(new gl("User logged out or kicked off, media task canceled",t))}}]),t}(tb());m(cs,"MAX_PENDING_TASK_COUNT",9),zo("of",(function(){for(var e=0,t=arguments.length,n=new(Ke(this))(t);t>e;)n[e]=arguments[e++];return n}),zj);var ds=1/0,cD=Math.max,hu=function(e,t,n){var r=Object(e);if(!Ed(e)){var i=Se(t);e=Ad(e),t=function(e){return i(r[e],e,r)}}return-1<(t=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;if(null==n)n=0;else{var i=(n=n?(n=fl(n))===ds||n===-ds?17976931348623157e292*(0>n?-1:1):n==n?n:0:0===n?n:0)%1;n=n==n?i?n-i:n:0}return 0>n&&(n=cD(r+n,0)),Vp(e,Se(t),n)}(e,t,n))?r[i?e[t]:t]:void 0},gu=function(e,t){return e&&e.length?uk(e,void 0,"function"==typeof t?t:void 0):[]},es=function(){function e(){X(this,e),m(this,"size",0),m(this,"fields",new Map)}return Ha(e,[{key:"define",value:function(e,t,n){if(this.size+=n,64<this.size)throw new RangeError("the struct over 64 bits is not supported");Lg(t={val:0,isNumber:"number"===t,isBoolean:"boolean"===t,oneof:"number"===t||"boolean"===t?void 0:t,len:n}),this.fields.set(e,t)}},{key:"set",value:function(e,t){if(!(e=this.fields.get(e)))throw Error("field not found");var n=e.oneof;if(!U.isLong(t)&&"number"!=typeof t)if("boolean"==typeof t)t=t?1:0;else{if(void 0===n)throw Error("invalid field type");if(void 0===(t=n[t]))throw Error("field type not found")}Lg(e,t),e.val=t}},{key:"toNumber",value:function(){for(var e=0,t=0,n=0,r=Array.from(this.fields);n<r.length;n++){var i=ra(r[n],2)[1],o=i.len;void 0!==(i=i.val)&&(e+=U.fromValue(i).shiftLeft(t).toNumber(),t+=o)}return e}},{key:"toLong",value:function(){for(var e=U.fromNumber(0,!0),t=0,n=0,r=Array.from(this.fields);n<r.length;n++){var i=ra(r[n],2)[1],o=i.len;void 0!==(i=i.val)&&(e=U.fromValue(i).shiftLeft(t).add(e),t+=o)}return e}},{key:"assert",value:function(e,t){function n(e){if(!U.isLong(e)&&"number"!=typeof e)if("boolean"==typeof e)e=e?1:0;else{if(void 0===i)throw Error("invalid field type");if(void 0===(e=i[e]))throw Error("field type not found")}return Lg(r,e),Kg(e,r.val)}var r=this.fields.get(e);if(!r)throw Error("field not found");var i=r.oneof;if(!Array.isArray(t))return n(t);if(1===t.length)return n(t[0]);if(t.every((function(e){return"string"==typeof e}))&&void 0!==i)return t.some((function(e){return n(e)}));throw Error("invalid valueTypes")}},{key:"from",value:function(e){e=U.fromValue(e);for(var t=0,n=0,r=Array.from(this.fields);n<r.length;n++){var i=ra(r[n],2)[1],o=i.len,a=U.fromNumber(Math.pow(2,o)-1,!0).shiftLeft(t);Lg(i,a=e.and(a).shiftRightUnsigned(t)),i.val=a,t+=o}}},{key:"typeOf",value:function(e){if(void 0!==(e=this.fields.get(e))){var t=e.oneof;if(e=e.val,void 0!==t){var n=0;for(t=Object.entries(t);n<t.length;n++){var r=ra(t[n],2),i=r[0];if(Kg(e,r[1]))return i}}}throw new TypeError("can only get type of oneof type")}}]),e}(),fs=function(e){function t(e){X(this,t);var r=n.call(this);return r.define("Rejoin","boolean",1),r.define("Unused","number",31),r.define("Platform","number",8),r.define("Version","number",12),r.define("Subversion","number",12),r.set("Platform",7),r.set("Version",4),r.set("Subversion",13),r.set("Rejoin",e),r}la(t,e);var n=ma(t);return t}(es),dD=ua(ua(ua(ua({},{PeerTextMessage:0,ChannelTextMessage:1,VendorTextMessage:2}),{PeerRawMessage:3,ChannelRawMessage:4,VendorRawMessage:5}),{PeerImageMessage:6,ChannelImageMessage:7,VendorImageMessage:8}),{PeerFileMessage:15,ChannelFileMessage:16,VendorFileMessage:17}),gs={CallInvite:101,CallAccept:102,CallReject:103,CallCancel:104},eD=ua(ua({},dD),gs),fD={Uncompressed:0,Zlib:1},$d=function(e){function t(e){X(this,t);var r=n.call(this);if(r.define("MessageType",eD,8),r.define("BroadcastJumps","number",2),r.define("ToCache","boolean",1),r.define("FromCache","boolean",1),r.define("CompressionMethod",fD,2),r.define("IterationNumber","number",4),r.define("BufferedMessage","boolean",1),r.define("ToArchive","boolean",1),r.define("FromArchive","boolean",1),"number"==typeof e||U.isLong(e))r.from(e);else if(void 0!==e){var i=0;for(e=Gg(e);i<e.length;i++){var o=ra(e[i],2);r.set(o[0],o[1])}}return r}la(t,e);var n=ma(t);return Ha(t,[{key:"isTextMessage",value:function(){return this.assert("MessageType",["PeerTextMessage","ChannelTextMessage","VendorTextMessage"])}},{key:"isRawMessage",value:function(){return this.assert("MessageType",["ChannelRawMessage","PeerRawMessage","VendorRawMessage"])}},{key:"isRawPeerMessage",value:function(){return this.assert("MessageType","PeerRawMessage")}},{key:"isRawChannelMessage",value:function(){return this.assert("MessageType","ChannelRawMessage")}},{key:"isPeerTextMessage",value:function(){return this.assert("MessageType","PeerTextMessage")}},{key:"isChannelTextMessage",value:function(){return this.assert("MessageType","ChannelTextMessage")}},{key:"isInvitation",value:function(e){var t=this;return void 0!==e?this.assert("MessageType",e):xf(gs).some((function(e){return t.assert("MessageType",e)}))}},{key:"isFileMessage",value:function(){return this.assert("MessageType",["PeerFileMessage","ChannelFileMessage","VendorFileMessage"])}},{key:"isImageMessage",value:function(){return this.assert("MessageType",["PeerImageMessage","ChannelImageMessage","VendorImageMessage"])}},{key:"isPeerMessage",value:function(){return this.assert("MessageType",["PeerFileMessage","PeerTextMessage","PeerImageMessage","PeerRawMessage"])}},{key:"isZlibCompressed",value:function(){return this.assert("CompressionMethod","Zlib")}},{key:"isFromCache",value:function(){return this.assert("FromCache",!0)}},{key:"isBufferedMessage",value:function(){return this.assert("BufferedMessage",!0)}},{key:"getInvitationType",value:function(){if(!this.isInvitation())throw new TypeError("cannot get InvitationType of a normal message type");return this.typeOf("MessageType")}}]),t}(es),gD=function(e){function t(e){return X(this,t),m(n(e=r.call(this,e,"ChatManager")),"dialogueLru",new Qx(void 0,{maxlen:1e4,ttl:1e4})),e}la(t,e);var r=ma(t);return Ha(t,[{key:"getChatInfo",value:function(e){var t=this.dialogueLru.get(e);if(this.dialogueLru.prune(),t){var n=t.dialogue,r={dialogue:n,sequence:t=t.sequence.add(1)};return this.dialogueLru.set(e,{dialogue:n,sequence:t}),r}return n={dialogue:Bg(),sequence:U.fromNumber(1,!0)},this.dialogueLru.set(e,n),n}}]),t}(tb()),v={};"object"==aa(module)&&(module.exports=v),v.parse=function(e,t){var n,r=v.bin.readUshort,i=v.bin.readUint,o={};for(n=(e=new Uint8Array(e)).length-4;101010256!=i(e,n);)n--;var a=r(e,n=n+4+4);r(e,n+=2),i(e,n+=2),n=i(e,n+=4);for(var s=0;s<a;s++){i(e,n),n+=4,n+=4,n+=4,i(e,n+=4);var c=i(e,n+=4),u=i(e,n+=4),l=r(e,n+=4),h=r(e,n+2),d=r(e,n+4);n+=6;var f=i(e,n+=8);n+=4,n+=l+h+d,v._readLocal(e,f,o,c,u,t)}return o},v._readLocal=function(e,t,n,r,i,o){var a=v.bin.readUshort,s=v.bin.readUint;s(e,t),a(e,t+=4),a(e,t+=2);var c=a(e,t+=2);s(e,t+=2),s(e,t+=4),s=a(e,t=t+4+8);var u=a(e,t+=2);if(t+=2,a=v.bin.readUTF8(e,t,s),t=t+s+u,o)n[a]={size:i,csize:r};else if(e=new Uint8Array(e.buffer,t),0==c)n[a]=new Uint8Array(e.buffer.slice(t,t+r));else{if(8!=c)throw"unknown compression method: "+c;t=new Uint8Array(i),v.inflateRaw(e,t),n[a]=t}},v.inflateRaw=function(e,t){return v.F.inflate(e,t)},v.inflate=function(e,t){return e[0],e[1],v.inflateRaw(new Uint8Array(e.buffer,e.byteOffset+2,e.length-2),t)},v.deflate=function(e,t){null==t&&(t={level:6});var n=0,r=new Uint8Array(50+Math.floor(1.1*e.length));return r[n]=120,r[n+1]=156,n=v.F.deflateRaw(e,r,n+2,t.level),e=v.adler(e,0,e.length),r[n+0]=e>>>24&255,r[n+1]=e>>>16&255,r[n+2]=e>>>8&255,r[n+3]=e>>>0&255,new Uint8Array(r.buffer,0,n+4)},v.deflateRaw=function(e,t){null==t&&(t={level:6});var n=new Uint8Array(50+Math.floor(1.1*e.length)),r=v.F.deflateRaw(e,n,r,t.level);return new Uint8Array(n.buffer,0,r)},v.encode=function(e,t){null==t&&(t=!1);var n,r=0,i=v.bin.writeUint,o=v.bin.writeUshort,a={};for(n in e){var s=!v._noNeed(n)&&!t,c=e[n],u=v.crc.crc(c,0,c.length);a[n]={cpr:s,usize:c.length,crc:u,file:s?v.deflateRaw(c):c}}for(n in a)r+=a[n].file.length+30+46+2*v.bin.sizeUTF8(n);for(n in e=new Uint8Array(r+22),t=0,c=[],a)u=a[n],c.push(t),t=v._writeHeader(e,t,n,u,0);for(n in r=0,s=t,a)u=a[n],c.push(t),t=v._writeHeader(e,t,n,u,1,c[r++]);return a=t-s,i(e,t,101010256),o(e,t=t+4+4,r),o(e,t+=2,r),i(e,t+=2,a),i(e,t+4,s),e.buffer},v._noNeed=function(e){return e=e.split(".").pop().toLowerCase(),-1!="png,jpg,jpeg,zip".indexOf(e)},v._writeHeader=function(e,t,n,r,i,o){var a=v.bin.writeUint,s=v.bin.writeUshort,c=r.file;return a(e,t,0==i?67324752:33639248),t+=4,1==i&&(t+=2),s(e,t,20),s(e,t+=2,0),s(e,t+=2,r.cpr?8:0),a(e,t+=2,0),a(e,t+=4,r.crc),a(e,t+=4,c.length),a(e,t+=4,r.usize),s(e,t+=4,v.bin.sizeUTF8(n)),s(e,t+=2,0),t+=2,1==i&&(a(e,t=t+2+2+6,o),t+=4),t+=n=v.bin.writeUTF8(e,t,n),0==i&&(e.set(c,t),t+=c.length),t},v.crc={table:function(){for(var e=new Uint32Array(256),t=0;256>t;t++){for(var n=t,r=0;8>r;r++)n=1&n?3988292384^n>>>1:n>>>1;e[t]=n}return e}(),update:function(e,t,n,r){for(var i=0;i<r;i++)e=v.crc.table[255&(e^t[n+i])]^e>>>8;return e},crc:function(e,t,n){return 4294967295^v.crc.update(4294967295,e,t,n)}},v.adler=function(e,t,n){var r=1,i=0,o=t;for(t+=n;o<t;){for(n=Math.min(o+5552,t);o<n;)i+=r+=e[o++];r%=65521,i%=65521}return i<<16|r},v.bin={readUshort:function(e,t){return e[t]|e[t+1]<<8},writeUshort:function(e,t,n){e[t]=255&n,e[t+1]=n>>8&255},readUint:function(e,t){return 16777216*e[t+3]+(e[t+2]<<16|e[t+1]<<8|e[t])},writeUint:function(e,t,n){e[t]=255&n,e[t+1]=n>>8&255,e[t+2]=n>>16&255,e[t+3]=n>>24&255},readASCII:function(e,t,n){for(var r="",i=0;i<n;i++)r+=String.fromCharCode(e[t+i]);return r},writeASCII:function(e,t,n){for(var r=0;r<n.length;r++)e[t+r]=n.charCodeAt(r)},pad:function(e){return 2>e.length?"0"+e:e},readUTF8:function(e,t,n){for(var r,i="",o=0;o<n;o++)i+="%"+v.bin.pad(e[t+o].toString(16));try{r=decodeURIComponent(i)}catch(r){return v.bin.readASCII(e,t,n)}return r},writeUTF8:function(e,t,n){for(var r=n.length,i=0,o=0;o<r;o++){var a=n.charCodeAt(o);if(0==(4294967168&a))e[t+i]=a,i++;else if(0==(4294965248&a))e[t+i]=192|a>>6,e[t+i+1]=128|a>>0&63,i+=2;else if(0==(4294901760&a))e[t+i]=224|a>>12,e[t+i+1]=128|a>>6&63,e[t+i+2]=128|a>>0&63,i+=3;else{if(0!=(4292870144&a))throw"e";e[t+i]=240|a>>18,e[t+i+1]=128|a>>12&63,e[t+i+2]=128|a>>6&63,e[t+i+3]=128|a>>0&63,i+=4}}return i},sizeUTF8:function(e){for(var t=e.length,n=0,r=0;r<t;r++){var i=e.charCodeAt(r);if(0==(4294967168&i))n++;else if(0==(4294965248&i))n+=2;else if(0==(4294901760&i))n+=3;else{if(0!=(4292870144&i))throw"e";n+=4}}return n}},v.F={},v.F.deflateRaw=function(e,t,n,r){var i=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][r],o=v.F.U,a=v.F._goodIndex;v.F._hash;var s=v.F._putsE,c=0;n<<=3;var u=0,l=e.length;if(0==r){for(;c<l;){var h=Math.min(65535,l-c);s(t,n,c+h==l?1:0),n=v.F._copyExact(e,c,h,t,n+8),c+=h}return n>>>3}s=o.lits,r=o.strt;var d=o.prev,f=0,p=0,g=0,A=0,m=0;for(2<l&&(r[m=v.F._hash(e,0)]=0),c=0;c<l;c++){if(h=m,c+1<l-2){m=v.F._hash(e,c+1);var y=c+1&32767;d[y]=r[m],r[m]=y}if(u<=c){if((14e3<f||26697<p)&&100<l-c&&(u<c&&(s[f]=c-u,f+=2,u=c),n=v.F._writeBlock(c==l-1||u==l?1:0,s,f,A,e,g,c-g,t,n),f=p=A=0,g=c),y=0,c<l-2&&(y=v.F._bestMatch(e,c,d,h,Math.min(i[2],l-c),i[3])),0!=y){h=y>>>16,y&=65535;var b=a(h,o.of0);o.lhst[257+b]++;var _=a(y,o.df0);o.dhst[_]++,A+=o.exb[b]+o.dxb[_],s[f]=h<<23|c-u,s[f+1]=y<<16|b<<8|_,f+=2,u=c+h}else o.lhst[e[c]]++;p++}}for(g==c&&0!=e.length||(u<c&&(s[f]=c-u,f+=2),n=v.F._writeBlock(1,s,f,A,e,g,c-g,t,n));0!=(7&n);)n++;return n>>>3},v.F._bestMatch=function(e,t,n,r,i,o){var a=32767&t,s=n[a],c=a-s+32768&32767;if(s==a||r!=v.F._hash(e,t-c))return 0;for(var u=r=0,l=Math.min(32767,t);c<=l&&0!=--o&&s!=a;){if((0==r||e[t+r]==e[t+r-c])&&(a=v.F._howLong(e,t,c))>r){if(u=c,(r=a)>=i)break;c+2<a&&(a=c+2);for(var h=0,d=0;d<a-2;d++){var f=t-c+d+32768&32767,p=f-n[f]+32768&32767;p>h&&(h=p,s=f)}}c+=(a=s)-(s=n[a])+32768&32767}return r<<16|u},v.F._howLong=function(e,t,n){if(e[t]!=e[t-n]||e[t+1]!=e[t+1-n]||e[t+2]!=e[t+2-n])return 0;var r=t,i=Math.min(e.length,t+258);for(t+=3;t<i&&e[t]==e[t-n];)t++;return t-r},v.F._hash=function(e,t){return(e[t]<<8|e[t+1])+(e[t+2]<<4)&65535},v.saved=0,v.F._writeBlock=function(e,t,n,r,i,o,a,s,c){var u=v.F.U,l=v.F._putsF,h=v.F._putsE;u.lhst[256]++;var d=v.F.getTrees(),f=d[0],p=d[1],g=d[2],A=d[3],m=d[4],y=d[5],b=d[6];d=d[7];var _=32+(0==(c+3&7)?0:8-(c+3&7))+(a<<3),E=r+v.F.contSize(u.fltree,u.lhst)+v.F.contSize(u.fdtree,u.dhst);r=r+v.F.contSize(u.ltree,u.lhst)+v.F.contSize(u.dtree,u.dhst),r+=14+3*y+v.F.contSize(u.itree,u.ihst)+(2*u.ihst[16]+3*u.ihst[17]+7*u.ihst[18]);for(var w=0;286>w;w++)u.lhst[w]=0;for(w=0;30>w;w++)u.dhst[w]=0;for(w=0;19>w;w++)u.ihst[w]=0;if(_=_<E&&_<r?0:E<r?1:2,l(s,c,e),l(s,c+1,_),c+=3,0==_){for(;0!=(7&c);)c++;c=v.F._copyExact(i,o,a,s,c)}else{if(1==_)var I=u.fltree,C=u.fdtree;if(2==_){for(v.F.makeCodes(u.ltree,f),v.F.revCodes(u.ltree,f),v.F.makeCodes(u.dtree,p),v.F.revCodes(u.dtree,p),v.F.makeCodes(u.itree,g),v.F.revCodes(u.itree,g),I=u.ltree,C=u.dtree,h(s,c,A-257),h(s,c+=5,m-1),h(s,c+=5,y-4),c+=4,e=0;e<y;e++)h(s,c+3*e,u.itree[1+(u.ordr[e]<<1)]);c=v.F._codeTiny(b,u.itree,s,c+3*y),c=v.F._codeTiny(d,u.itree,s,c)}for(y=0;y<n;y+=2){for(b=(e=t[y])>>>23,e=o+(8388607&e);o<e;)c=v.F._writeLit(i[o++],I,s,c);0!=b&&(e=(f=t[y+1])>>16,a=f>>8&255,f&=255,h(s,c=v.F._writeLit(257+a,I,s,c),b-u.of0[a]),c+=u.exb[a],l(s,c=v.F._writeLit(f,C,s,c),e-u.df0[f]),c+=u.dxb[f],o+=b)}c=v.F._writeLit(256,I,s,c)}return c},v.F._copyExact=function(e,t,n,r,i){var o=i>>>3;return r[o]=n,r[o+1]=n>>>8,r[o+2]=255-r[o],r[o+3]=255-r[o+1],o+=4,r.set(new Uint8Array(e.buffer,t,n),o),i+(n+4<<3)},v.F.getTrees=function(){for(var e=v.F.U,t=v.F._hufTree(e.lhst,e.ltree,15),n=v.F._hufTree(e.dhst,e.dtree,15),r=[],i=v.F._lenCodes(e.ltree,r),o=[],a=v.F._lenCodes(e.dtree,o),s=0;s<r.length;s+=2)e.ihst[r[s]]++;for(s=0;s<o.length;s+=2)e.ihst[o[s]]++;s=v.F._hufTree(e.ihst,e.itree,7);for(var c=19;4<c&&0==e.itree[1+(e.ordr[c-1]<<1)];)c--;return[t,n,s,i,a,c,r,o]},v.F.getSecond=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(e[n+1]);return t},v.F.nonZero=function(e){for(var t="",n=0;n<e.length;n+=2)0!=e[n+1]&&(t+=(n>>1)+",");return t},v.F.contSize=function(e,t){for(var n=0,r=0;r<t.length;r++)n+=t[r]*e[1+(r<<1)];return n},v.F._codeTiny=function(e,t,n,r){for(var i=0;i<e.length;i+=2){var o=e[i],a=e[i+1];r=v.F._writeLit(o,t,n,r);var s=16==o?2:17==o?3:7;15<o&&(v.F._putsE(n,r,a,s),r+=s)}return r},v.F._lenCodes=function(e,t){for(var n=e.length;2!=n&&0==e[n-1];)n-=2;for(var r=0;r<n;r+=2){var i=e[r+1],o=r+3<n?e[r+3]:-1,a=r+5<n?e[r+5]:-1,s=0==r?-1:e[r-1];if(0==i&&o==i&&a==i){for(o=r+5;o+2<n&&e[o+2]==i;)o+=2;11>(i=Math.min(o+1-r>>>1,138))?t.push(17,i-3):t.push(18,i-11),r+=2*i-2}else if(i==s&&o==i&&a==i){for(o=r+5;o+2<n&&e[o+2]==i;)o+=2;i=Math.min(o+1-r>>>1,6),t.push(16,i-3),r+=2*i-2}else t.push(i,0)}return n>>>1},v.F._hufTree=function(e,t,n){var r=[],i=e.length,o=t.length,a=0;for(a=0;a<o;a+=2)t[a]=0,t[a+1]=0;for(a=0;a<i;a++)0!=e[a]&&r.push({lit:a,f:e[a]});if(e=r.length,i=r.slice(0),0==e)return 0;if(1==e)return t[1+((n=r[0].lit)<<1)]=1,t[1+((0==n?1:0)<<1)]=1;r.sort((function(e,t){return e.f-t.f})),a=r[0],o=r[1];var s=0,c=1,u=2;for(r[0]={lit:-1,f:a.f+o.f,l:a,r:o,d:0};c!=e-1;)a=s!=c&&(u==e||r[s].f<r[u].f)?r[s++]:r[u++],o=s!=c&&(u==e||r[s].f<r[u].f)?r[s++]:r[u++],r[c++]={lit:-1,f:a.f+o.f,l:a,r:o};for((r=v.F.setDepth(r[c-1],0))>n&&(v.F.restrictDepth(i,n,r),r=n),a=0;a<e;a++)t[1+(i[a].lit<<1)]=i[a].d;return r},v.F.setDepth=function(e,t){return-1!=e.lit?e.d=t:Math.max(v.F.setDepth(e.l,t+1),v.F.setDepth(e.r,t+1))},v.F.restrictDepth=function(e,t,n){var r=0,i=1<<n-t,o=0;for(e.sort((function(e,t){return t.d==e.d?e.f-t.f:t.d-e.d})),r=0;r<e.length&&e[r].d>t;r++){var a=e[r].d;e[r].d=t,o+=i-(1<<n-a)}for(o>>>=n-t;0<o;)(a=e[r].d)<t?(e[r].d++,o-=1<<t-a-1):r++;for(;0<=r;r--)e[r].d==t&&0>o&&(e[r].d--,o++);0!=o&&console.log("debt left")},v.F._goodIndex=function(e,t){var n=0;return t[16|n]<=e&&(n|=16),t[8|n]<=e&&(n|=8),t[4|n]<=e&&(n|=4),t[2|n]<=e&&(n|=2),t[1|n]<=e&&(n|=1),n},v.F._writeLit=function(e,t,n,r){return v.F._putsF(n,r,t[e<<1]),r+t[1+(e<<1)]},v.F.inflate=function(e,t){var n=Uint8Array;if(3==e[0]&&0==e[1])return t||new n(0);var r=v.F,i=r._bitsF,o=r._bitsE,a=r._decodeTiny,s=r.makeCodes,c=r.codes2map,u=r._get17,l=r.U,h=null==t;h&&(t=new n(e.length>>>2<<3));for(var d,f,p,g,A=0,m=0,y=f=0,b=0;0==A;)if(A=i(e,b,1),d=i(e,b+1,2),b+=3,0==d)0!=(7&b)&&(b+=8-(7&b)),d=e[(b=4+(b>>>3))-4]|e[b-3]<<8,h&&(t=v.F._check(t,y+d)),t.set(new n(e.buffer,e.byteOffset+b,d),y),b=b+d<<3,y+=d;else{if(h&&(t=v.F._check(t,y+131072)),1==d&&(p=l.flmap,g=l.fdmap,m=511,f=31),2==d){for(f=o(e,b,5)+257,d=o(e,b+5,5)+1,p=o(e,b+10,4)+4,b+=14,g=0;38>g;g+=2)l.itree[g]=0,l.itree[g+1]=0;for(m=1,g=0;g<p;g++){var _=o(e,b+3*g,3);l.itree[1+(l.ordr[g]<<1)]=_,_>m&&(m=_)}b+=3*p,s(l.itree,m),c(l.itree,m,l.imap),p=l.lmap,g=l.dmap,b=a(l.imap,(1<<m)-1,f+d,e,b,l.ttree),m=(1<<(_=r._copyOut(l.ttree,0,f,l.ltree)))-1,f=(1<<(d=r._copyOut(l.ttree,f,d,l.dtree)))-1,s(l.ltree,_),c(l.ltree,_,p),s(l.dtree,d),c(l.dtree,d,g)}for(;;)if(b+=15&(d=p[u(e,b)&m]),0==(_=d>>>4)>>>8)t[y++]=_;else{if(256==_)break;d=y+_-254,264<_&&(d=y+((_=l.ldef[_-257])>>>3)+o(e,b,7&_),b+=7&_),b+=15&(_=g[u(e,b)&f]);var E=((_=l.ddef[_>>>4])>>>4)+i(e,b,15&_);for(b+=15&_,h&&(t=v.F._check(t,y+131072));y<d;)t[y]=t[y++-E],t[y]=t[y++-E],t[y]=t[y++-E],t[y]=t[y++-E];y=d}}return t.length==y?t:t.slice(0,y)},v.F._check=function(e,t){var n=e.length;return t<=n?e:((t=new Uint8Array(Math.max(n<<1,t))).set(e,0),t)},v.F._decodeTiny=function(e,t,n,r,i,o){for(var a=v.F._bitsE,s=v.F._get17,c=0;c<n;){var u=e[s(r,i)&t];i+=15&u;var l=u>>>4;if(15>=l)o[c]=l,c++;else{var h=u=0;for(16==l?(h=3+a(r,i,2),i+=2,u=o[c-1]):17==l?(h=3+a(r,i,3),i+=3):18==l&&(h=11+a(r,i,7),i+=7),l=c+h;c<l;)o[c]=u,c++}}return i},v.F._copyOut=function(e,t,n,r){for(var i=0,o=0,a=r.length>>>1;o<n;){var s=e[o+t];r[o<<1]=0,r[1+(o<<1)]=s,s>i&&(i=s),o++}for(;o<a;)r[o<<1]=0,r[1+(o<<1)]=0,o++;return i},v.F.makeCodes=function(e,t){var n,r,i=v.F.U,o=e.length,a=i.bl_count;for(n=0;n<=t;n++)a[n]=0;for(n=1;n<o;n+=2)a[e[n]]++;for(i=i.next_code,n=0,a[0]=0,r=1;r<=t;r++)n=n+a[r-1]<<1,i[r]=n;for(t=0;t<o;t+=2)0!=(a=e[t+1])&&(e[t]=i[a],i[a]++)},v.F.codes2map=function(e,t,n){for(var r=e.length,i=v.F.U.rev15,o=0;o<r;o+=2)if(0!=e[o+1]){var a=e[o+1],s=o>>1<<4|a,c=t-a;for(c=(a=e[o]<<c)+(1<<c);a!=c;)n[i[a]>>>15-t]=s,a++}},v.F.revCodes=function(e,t){for(var n=v.F.U.rev15,r=15-t,i=0;i<e.length;i+=2)e[i]=n[e[i]<<t-e[i+1]]>>>r},v.F._putsE=function(e,t,n){n<<=7&t,e[t>>>=3]|=n,e[t+1]|=n>>>8},v.F._putsF=function(e,t,n){n<<=7&t,e[t>>>=3]|=n,e[t+1]|=n>>>8,e[t+2]|=n>>>16},v.F._bitsE=function(e,t,n){return(e[t>>>3]|e[1+(t>>>3)]<<8)>>>(7&t)&(1<<n)-1},v.F._bitsF=function(e,t,n){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)&(1<<n)-1},v.F._get17=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)},v.F._get25=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16|e[3+(t>>>3)]<<24)>>>(7&t)},v.F.U=function(){var e=Uint16Array,t=Uint32Array;return{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new t(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new t(286),dhst:new t(30),ihst:new t(19),lits:new t(15e3),strt:new e(65536),prev:new e(32768)}}(),function(){function e(e,t,n){for(;0!=t--;)e.push(0,n)}for(var t=v.F.U,n=0;32768>n;n++){var r=n;r=(4278255360&(r=(4042322160&(r=(3435973836&(r=(2863311530&r)>>>1|(1431655765&r)<<1))>>>2|(858993459&r)<<2))>>>4|(252645135&r)<<4))>>>8|(16711935&r)<<8,t.rev15[n]=(r>>>16|r<<16)>>>17}for(n=0;32>n;n++)t.ldef[n]=t.of0[n]<<3|t.exb[n],t.ddef[n]=t.df0[n]<<4|t.dxb[n];e(t.fltree,144,8),e(t.fltree,112,9),e(t.fltree,24,7),e(t.fltree,8,8),v.F.makeCodes(t.fltree,9),v.F.codes2map(t.fltree,9,t.flmap),v.F.revCodes(t.fltree,9),e(t.fdtree,32,5),v.F.makeCodes(t.fdtree,5),v.F.codes2map(t.fdtree,5,t.fdmap),v.F.revCodes(t.fdtree,5),e(t.itree,19,0),e(t.ltree,286,0),e(t.dtree,30,0),e(t.ttree,320,0)}();var ml=v.inflate,hs=v.deflate,is=function(e){function t(e,i,o,a){X(this,t);var s=r.call(this,a,"Session");return m(n(s),"chatManager",void 0),m(n(s),"joinedChannels",new Set),m(n(s),"msgDedupLru",new tc(void 0,{maxlen:200})),m(n(s),"startTime",Date.now()),m(n(s),"seq",U.fromNumber(1,!0)),m(n(s),"userJoinOptions",new fs(!1)),m(n(s),"seqSentStatuses",[!1,!1]),m(n(s),"dialogueSequenceLru",new tc(void 0,{maxlen:1e4})),m(n(s),"loggedOut",!1),m(n(s),"messageSentTimes",[]),m(n(s),"curLoginSockets",[void 0,void 0]),m(n(s),"loginSocketSubs",[{channels:new Map,receivers:[]},{channels:new Map,receivers:[]}]),m(n(s),"lastLoginSockets",[new pe(1),new pe(1)]),m(n(s),"dialPendingMsgSubjectMap",new Map),m(n(s),"context",void 0),m(n(s),"connection",void 0),m(n(s),"instanceId",void 0),m(n(s),"registerSocketsFailureListener",(function(){s.connection.once("socketsFailure",(function(){s.log("socketsFailure, creating a new connection"),$c((function(){return s.connection.removeAllListeners(),s.connection=new Vr(s.context,s.logger,!0),s.loginHandler(6e3,!0)})).pipe(ne((function(e){return e.pipe(bd(Zd.getParameter("RECONNECTING_AP_INTERVAL")))})),ob(s.connection.apClient.apFinish$)).subscribe((function(){s.log("new connection connected")}))})),0===s.connection.listenerCount("tokenExpired")&&s.connection.on("tokenExpired",(function(){s.emit("tokenExpired")}))})),s.context=e,s.connection=i,s.instanceId=o,s.chatManager=new gD(a),s.log("The instanceId is %s",s.instanceId.toString()),s}la(t,e);var r=ma(t);return Ha(t,[{key:"fetchFileUploadIndexGet",value:function(e){var n=e.hash,r=e.size;if(0===(e=this.getLoginSockets()).length)throw new M("Client is not logged in");var i=this.incGetSeq();return e.forEach((function(e){e.sendPacket("FileUploadIndexGet",{seq:i,hash:n,size:r})})),{ret:Ca.apply(void 0,I(e.map((function(e){return e.fromReceived("FileUploadIndexRet").pipe(Z((function(e){return i.eq(e.seq)})))})))),fin:Ca.apply(void 0,I(e.map((function(e){return e.fromReceived("FileUploadIndexFin").pipe(Z((function(e){return i.eq(e.seq)})))})))),err:Xb.apply(void 0,I(e.map((function(e){return e.fromReceived("FileUploadIndexErr").pipe(Z((function(e){return i.eq(e.seq)})),ba((function(e){throw new da(["The media message upload failure, code %d",e.code],lg)})))})))),timeout:t.genTimeoutError(Kh)}}},{key:"requestFileUploadIndexSet",value:function(e){var n=e.hash,r=e.unit,i=e.servers;if(0===(e=this.getLoginSockets()).length)throw new M("Client is not logged in");var o=this.incGetSeq();return e.forEach((function(e){e.sendPacket("FileUploadIndexSet",{seq:o,servers:i,hash:n,unit:r})})),Ca.apply(void 0,[t.genTimeoutError(Kh)].concat(I(e.map((function(e){return e.fromReceived("FileUploadIndexErr").pipe(Z((function(e){return o.eq(e.seq)})),ba((function(e){throw new da(["FileUploadIndexSet failure, code %d",e.code],lg)})))}))),I(e.map((function(e){return e.fromReceived("FileUploadIndexFin").pipe(Z((function(e){return o.eq(e.seq)})))})))))}},{key:"requestFileDownloadIndexGet",value:function(e){var n=e.size,r=e.zone,i=e.unit,o=e.hash,a=this.getLoginSockets();if(0===a.length)throw new M("Client is not logged in");var s=this.incGetSeq();return a.forEach((function(e){e.sendPacket("FileDownloadIndexGet",{seq:s,size:n,zone:r,unit:i,hash:o})})),e=Ca.apply(void 0,I(a.map((function(e){return e.fromReceived("FileDownloadIndexRet").pipe(Z((function(e){return s.eq(e.seq)})))})))).pipe(ba((function(e){var t=e.backups,n=e.servers;return e=ff(e,["backups","servers"]),ua({backupList:t.map((function(e){return[e]})),serverList:n.map((function(e){return[e]}))},e)})),bd(500)),a=im(a.map((function(e){return e.fromReceived("FileDownloadIndexRet").pipe(Z((function(e){return s.eq(e.seq)})))}))),Ca(e,a.pipe(ba((function(e){return e.reduce((function(e,t){var n=e.backupList,r=e.serverList;e=t.backups;var i=t.servers;return t=ff(t,["backups","servers"]),ua({backupList:e.map((function(e,t){return[e].concat(I(void 0!==n&&Array.isArray(n[t])?n[t]:[]))})),serverList:i.map((function(e,t){return[e].concat(I(void 0!==n&&Array.isArray(r[t])?r[t]:[]))}))},t)}),{})}))),t.genTimeoutError(Kh))}},{key:"loginHandler",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1e4,n=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(this.loggedOut&&n)throw new M("Already logged out, request ignored");n&&this.registerSocketsFailureListener(),this.connection.initConnection();var r=this.getSocketLoginObservables(this.connection.lastOpenSockets,this.seq),i=Date.now();return r.forEach((function(t,r){var o=e.loginSocketSubs[r].login;void 0!==o&&o.unsubscribe(),e.loginSocketSubs[r].login=t.pipe(ca((function(t){e.curLoginSockets[r]=t;var o=Date.now();db("Link",{ackedServerIp:t.address,destServerIp:t.ip,ec:0,sc:0,elapse:eb(e.startTime),lts:U.fromNumber(o),responseTime:i-o,sid:Xa(e.instanceId),userId:e.context.uid},null==y?void 0:y.EVENT_REPORT_DOMAIN[0],null==y?void 0:y.EVENT_REPORT_BACKUP_DOMAIN[0]),e.emit("userJoined",t.env),n&&e.connection.apClient.apFinish$.next(void 0)}))).subscribe(e.lastLoginSockets[r])})),this.initKeepAliveSender(),this.initKeepAliveReconnector(),this.initLoginReceiver(),Xb.apply(void 0,I(r).concat([gb(this.connection,"connectionInitFailure").pipe(ca((function(e){if(sa(e)||Sa(e))throw e;throw new da("Login failure",{code:Xq,originalError:e})})))])).pipe(Oa(1),hb(t),Ga((function(t){return t instanceof pb&&e.warn("Client login timeout"),t&&t.code===Jh&&(e.connection.emit("tokenExpired"),e.connection.apClient.apFinish$.next(void 0)),e.clearSockets(0,n),Y(t)})),ca((function(){n||e.registerSocketsFailureListener()})),wg((function(){n||e.connection.apClient.apFinish$.next(void 0)})))}},{key:"logoutHandler",value:function(){var e=K(x.mark((function e(){var t,n,r,i=this;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loggedOut=!0,this.connection.apClient.apFinish$.next(void 0),t=this.getLoginSockets(),n=t.map((function(e){return e.sendPacket("UserQuit",{}),i.connection.waitClosing(e)})),this.clearSockets(5e3),r=t.map((function(e){return e.env})),[0,1].filter((function(e){return!r.includes(e)})).forEach((function(e){i.connection.closeSocket(e,0)})),e.abrupt("return",Xb.apply(void 0,I(n)).toPromise());case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"requestChannelJoin",value:function(){var e=K(x.mark((function e(t,n){var r,i,o,a=this;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.getLoginSockets().length){e.next=2;break}throw new M("Client is not logged in. Cannot join the channel",Tq);case 2:return r=gb(this,"channelLeft").pipe(wb((function(e){return e===t})),Oa(1)),i=this.incGetSeq(),(o=this.lastLoginSockets.map((function(e){return e.pipe(Cc((function(e,t){0!==t&&a.incSeqIfNeeded(e.env);var r=0===t?i:a.seq;return e.sendPacket("GroupEnter",{account:n,seq:r}),e.fromReceived("GroupReply").pipe(Z((function(e){return r.eq(e.seq)})),ca((function(e){if(0!==(e=e.code))throw new da(["Channel join failure. The response code is %d",e],Pq)})))})),ob(r),oe())}))).forEach((function(e,n){var r=function(){return a.loginSocketSubs[n].channels.delete(t.channelId)};a.loginSocketSubs[n].channels.set(t.channelId,e.subscribe({error:r,complete:r}))})),e.next=8,Xb.apply(void 0,I(o)).pipe(Oa(1),hb(1e4),Ga((function(e){return e instanceof pb&&a.warn("Channel join timeout"),Y(e)}))).toPromise();case 8:this.joinedChannels.add(t);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"requestChannelLeave",value:function(e,t){this.emit("channelLeft",e),this.joinedChannels.delete(e),this.getLoginSockets().forEach((function(e){e.sendPacket("GroupLeave",{account:t})}))}},{key:"requestChannelMemberList",value:function(e){var n=this.getLoginSockets();if(0===n.length)throw new M("Client is not logged in. Cannot get the channel members",aA);var r=this.incGetSeq();return n.forEach((function(t){t.sendPacket("GroupAllUsersList",{group:e,pageNumber:0,pageSize:200,seq:r})})),Ca.apply(void 0,[t.genTimeoutError(Nq)].concat(I(n.map((function(t){return t.fromReceived("GroupAllUsersResult").pipe(Z((function(t){var n=t.seq;return t.group===e&&r.eq(n)})))})))))}},{key:"requestPeersOnlineStatus",value:function(e){var n=this.getLoginSockets();if(0===n.length)throw new M("Client is not logged in");var r=this.incGetSeq();return n.forEach((function(t){t.sendPacket("UserStatusList",{users:e,seq:r})})),Ca.apply(void 0,[t.genTimeoutError(mA)].concat(I(n.map((function(e){return e.fromReceived("UserStatusResult").pipe(Z((function(e){return r.eq(e.seq)})))})))))}},{key:"requestSetLocalUserAttributes",value:function(e,n){var r=this,i=this.getLoginSockets();if(0===i.length)throw new M("Client is not logged in");var o=this.incGetSeq();return i.forEach((function(t,i){void 0!==n&&i!==n||t.sendPacket("UserAttributeSet",{account:r.context.uid,attributeInfos:Object.entries(e).map((function(e){return{key:(e=ra(e,2))[0],value:e[1]}})),seq:o})})),Ca.apply(void 0,I(i.map((function(e){return e.fromReceived("UserAttributeErr").pipe(Z((function(e){return o.eq(e.seq)})),ba((function(e){throw new da(["The user attributes set failure, code %d",e.code],Sb)})))}))).concat([t.genTimeoutError(Tb)],I(i.map((function(e){return e.fromReceived("UserAttributeRsp").pipe(Z((function(e){return o.eq(e.seq)})))})))))}},{key:"requestSetChannelAttributes",value:function(e,n,r){var i=this.getLoginSockets();if(0===i.length)throw new M("Client is not logged in");var o=this.incGetSeq();return i.forEach((function(t){t.sendPacket("GroupAttributeSet",{broadcast:r,group:e,attributeInfos:Object.entries(n).map((function(e){return{key:(e=ra(e,2))[0],value:e[1]}})),seq:o})})),Ca.apply(void 0,I(i.map((function(e){return e.fromReceived("GroupAttributeErr").pipe(Z((function(e){return o.eq(e.seq)})),ba((function(e){throw new da(["The group attributes set failure, code %d",e.code],Sb)})))}))).concat([t.genTimeoutError(Tb)],I(i.map((function(e){return e.fromReceived("GroupAttributeRsp").pipe(Z((function(e){return o.eq(e.seq)})))})))))}},{key:"requestAddOrUpdateLocalUserAttributes",value:function(e){var n=this,r=this.getLoginSockets();if(0===r.length)throw new M("Client is not logged in");var i=this.incGetSeq();return r.forEach((function(t){t.sendPacket("UserAttributeMod",{account:n.context.uid,attributeInfos:Object.entries(e).map((function(e){return{key:(e=ra(e,2))[0],value:e[1]}})),seq:i})})),Ca.apply(void 0,I(r.map((function(e){return e.fromReceived("UserAttributeErr").pipe(Z((function(e){return i.eq(e.seq)})),ba((function(e){throw new da(["The user attributes add or update failure, code %d",e.code],Sb)})))}))).concat([t.genTimeoutError(Tb)],I(r.map((function(e){return e.fromReceived("UserAttributeRsp").pipe(Z((function(e){return i.eq(e.seq)})))})))))}},{key:"requestAddOrUpdateChannelAttributes",value:function(e,n,r){var i=this.getLoginSockets();if(0===i.length)throw new M("Client is not logged in");var o=this.incGetSeq();return i.forEach((function(t){t.sendPacket("GroupAttributeMod",{broadcast:r,group:e,attributeInfos:Object.entries(n).map((function(e){return{key:(e=ra(e,2))[0],value:e[1]}})),seq:o})})),Ca.apply(void 0,I(i.map((function(e){return e.fromReceived("GroupAttributeErr").pipe(Z((function(e){return o.eq(e.seq)})),ba((function(e){throw new da(["The group attributes add or update failure, code %d",e.code],Sb)})))}))).concat([t.genTimeoutError(Tb)],I(i.map((function(e){return e.fromReceived("GroupAttributeRsp").pipe(Z((function(e){return o.eq(e.seq)})))})))))}},{key:"requestDeleteLocalUserAttributesByKeys",value:function(e){var n=this,r=this.getLoginSockets();if(0===r.length)throw new M("Client is not logged in");var i=this.incGetSeq();return r.forEach((function(t){t.sendPacket("UserAttributeDel",{account:n.context.uid,attributes:e,seq:i})})),Ca.apply(void 0,I(r.map((function(e){return e.fromReceived("UserAttributeErr").pipe(Z((function(e){return i.eq(e.seq)})),ba((function(e){throw new da(["The user attributes delete failure, code %d",e.code],Sb)})))}))).concat([t.genTimeoutError(Tb)],I(r.map((function(e){return e.fromReceived("UserAttributeRsp").pipe(Z((function(e){return i.eq(e.seq)})))})))))}},{key:"requestDeleteChannelAttributesByKeys",value:function(e,n,r){var i=this.getLoginSockets();if(0===i.length)throw new M("Client is not logged in");var o=this.incGetSeq();return i.forEach((function(t){t.sendPacket("GroupAttributeDel",{group:e,broadcast:r,attributes:n,seq:o})})),Ca.apply(void 0,I(i.map((function(e){return e.fromReceived("GroupAttributeErr").pipe(Z((function(e){return o.eq(e.seq)})),ba((function(e){throw new da(["The channel attributes delete failure, code %d",e.code],Sb)})))}))).concat([t.genTimeoutError(Tb)],I(i.map((function(e){return e.fromReceived("GroupAttributeRsp").pipe(Z((function(e){return o.eq(e.seq)})))})))))}},{key:"requestClearLocalUserAttributes",value:function(){var e=this,n=this.getLoginSockets();if(0===n.length)throw new M("Client is not logged in");var r=this.incGetSeq();return n.forEach((function(t){t.sendPacket("UserAttributeSet",{account:e.context.uid,seq:r,attributeInfos:[]})})),Ca.apply(void 0,I(n.map((function(e){return e.fromReceived("UserAttributeErr").pipe(Z((function(e){return r.eq(e.seq)})),ba((function(e){throw new da(["The user attributes clear failure, code %d",e.code],Sb)})))}))).concat([t.genTimeoutError(Tb)],I(n.map((function(e){return e.fromReceived("UserAttributeRsp").pipe(Z((function(e){return r.eq(e.seq)})))})))))}},{key:"requestClearChannelAttributes",value:function(e,n){var r=this.getLoginSockets();if(0===r.length)throw new M("Client is not logged in");var i=this.incGetSeq();return r.forEach((function(t){t.sendPacket("GroupAttributeSet",{group:e,seq:i,attributeInfos:[],broadcast:n})})),Ca.apply(void 0,I(r.map((function(e){return e.fromReceived("GroupAttributeErr").pipe(Z((function(e){return i.eq(e.seq)})),ba((function(e){throw new da(["The channel attributes clear failure, code %d",e.code],Sb)})))}))).concat([t.genTimeoutError(Tb)],I(r.map((function(e){return e.fromReceived("GroupAttributeRsp").pipe(Z((function(e){return i.eq(e.seq)})))})))))}},{key:"requestGetUserAttributesByKeys",value:function(e,n){var r=this.getLoginSockets();if(0===r.length)throw new M("Client is not logged in");var i=this.incGetSeq();return r.forEach((function(t){t.sendPacket("UserAttributeGet",{account:e,seq:i,attributes:n})})),Ca.apply(void 0,[t.genTimeoutError(Tb)].concat(I(r.map((function(e){return e.fromReceived("UserAttributeErr").pipe(Z((function(e){return i.eq(e.seq)})),ba((function(e){if(10008===(e=e.code))throw new da("The user requested is not online",Jq);throw new Vc(["User attribute operation unknown error code: %d",e],Sb)})))}))),I(r.map((function(e){return e.fromReceived("UserAttributeRet").pipe(Z((function(e){return i.eq(e.seq)})))})))))}},{key:"requestGetChannelAttributesByKeys",value:function(e,n){var r=this.getLoginSockets();if(0===r.length)throw new M("Client is not logged in");var i=this.incGetSeq();return r.forEach((function(t){t.sendPacket("GroupAttributeGet",{group:e,seq:i,attributes:n})})),Ca.apply(void 0,[t.genTimeoutError(Tb)].concat(I(r.map((function(e){return e.fromReceived("GroupAttributeErr").pipe(Z((function(e){return i.eq(e.seq)})),ba((function(e){throw new da(["The channel attributes get failure, code %d",e.code],Sb)})))}))),I(r.map((function(e){return e.fromReceived("GroupAttributeRet").pipe(Z((function(e){return i.eq(e.seq)})))})))))}},{key:"requestGetUserAttributeKeys",value:function(e){var n=this.getLoginSockets();if(0===n.length)throw new M("Client is not logged in");var r=this.incGetSeq();return n.forEach((function(t){t.sendPacket("UserAttributeKeysGet",{account:e,seq:r})})),Ca.apply(void 0,[t.genTimeoutError(Tb)].concat(I(n.map((function(e){return e.fromReceived("UserAttributeErr").pipe(Z((function(e){return r.eq(e.seq)})),ba((function(e){if(10008===(e=e.code))throw new da("The user requested is not online",Jq);throw new Vc(["User attribute operation unknown error code: %d",e],Sb)})))}))),I(n.map((function(e){return e.fromReceived("UserAttributeKeysRet").pipe(Z((function(e){return r.eq(e.seq)})))})))))}},{key:"requestGetChannelAttributesKeys",value:function(e){var n=this.getLoginSockets();if(0===n.length)throw new M("Client is not logged in");var r=this.incGetSeq();return n.forEach((function(t){t.sendPacket("GroupAttributeKeysGet",{group:e,seq:r})})),Ca.apply(void 0,[t.genTimeoutError(Tb)].concat(I(n.map((function(e){return e.fromReceived("GroupAttributeErr").pipe(Z((function(e){return r.eq(e.seq)})),ba((function(e){throw new Vc(["Channel attribute operation unknown error code: %d",e.code],Sb)})))}))),I(n.map((function(e){return e.fromReceived("GroupAttributeKeysRet").pipe(Z((function(e){return r.eq(e.seq)})))})))))}},{key:"requestGetChannelMemberCount",value:function(e){var n=this.getLoginSockets();if(0===n.length)throw new M("Client is not logged in");var r=this.incGetSeq();return n.forEach((function(t){t.sendPacket("GroupStatusList",{groups:e,seq:r})})),Ca.apply(void 0,[t.genTimeoutError(Nq)].concat(I(n.map((function(e){return e.fromReceived("GroupStatusResult").pipe(Z((function(e){return r.eq(e.seq)})))})))))}},{key:"requestSubscribePeersOnlineStatus",value:function(e){var n=this.getLoginSockets();if(0===n.length)throw new M("Client is not logged in");var r=this.incGetSeq();return n.forEach((function(t){t.sendPacket("SubscribeUserStatus",{seq:r,users:e})})),Ca.apply(void 0,[t.genTimeoutError(tA)].concat(I(n.map((function(e){return e.fromReceived("SubscribeResponse").pipe(Z((function(e){return r.eq(e.seq)})))})))))}},{key:"requestUnsubscribePeersOnlineStatus",value:function(e){var t=this.getLoginSockets();if(0===t.length)throw new M("Client is not logged in");var n=this.incGetSeq();t.forEach((function(t){t.sendPacket("UnsubscribeUserStatus",{seq:n,users:e})}))}},{key:"sendInvitationMessage",value:function(){var e=K(x.mark((function e(t){var n,r,i,o,a,s,c,u,l,h,d,f,p=this;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.peerId,r=t.callId,i=t.extra,o=t.isAcceptAck,a=t.channelId,s=t.type,c={callId:r},void 0===o){e.next=6;break}if("CallAccept"===s){e.next=5;break}throw Error("invalid invitation type");case 5:c.type=o?"ack":"request";case 6:return c.channel=a,("CallInvite"===s||"CallCancel"===s||"CallReject"===s||"CallAccept"===s&&!1===o)&&void 0!==i&&(c.extra=i),u=Bg(),this.log("The sent invitation body is %o",c),l=function(e){return{MiscMap:{},sequence:U.fromNumber(1),dialogue:u,instance:p.instanceId,dst:n,ms:U.fromNumber(Date.now(),!0),options:new $d({IterationNumber:e,MessageType:s}).toLong(),payload:(new TextEncoder).encode(JSON.stringify(c)),src:p.context.uid}},e.next=14,Kb(this.sendMessageToRetry(l,!0)).pipe(hb(1e4),Ga((function(e){return e instanceof pb&&p.warn("Send invitation timeout"),Y(e)}))).toPromise();case 14:return h=e.sent,d=h.code,f=h.retryTimes,e.abrupt("return",{hasPeerReceived:0===d,hasReSent:0!==f});case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendMediaMessage",value:function(){var e=K(x.mark((function e(t,n,r,i,o,a){var s,c,u,l,h,d,f,p,g,A,v,y,b,_,E,w,I,C,S,T,R,k,O,N,D,P,B,M,j,F=this;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=n.width,u=void 0===c?0:c,l=n.height,h=void 0===l?0:l,d=n.fileName,f=void 0===d?"":d,p=n.description,g=void 0===p?"":p,A=n.thumbnail,v=void 0===A?new Blob:A,y=n.thumbnailHeight,b=void 0===y?0:y,_=n.thumbnailWidth,E=void 0===_?0:_,w=n.size,I=void 0===w?0:w,C=n.mediaId,S=o.enableOfflineMessaging,T=o.enableHistoricalMessaging,za(r)){e.next=4;break}throw new L("The send message arguments are not valid",i?Zk:hg);case 4:if(!(32768<new Blob([f,v,g]).size)){e.next=6;break}throw new L("The size of message overflowed ",i?ue:Gh);case 6:return R=this.chatManager.getChatInfo(r),k=R.dialogue,O=R.sequence,N=this.instanceId,this.log('A%s media message is sending to %s: "'.concat(N,"-").concat(k,"#").concat(O,'"'),i?" peer":" channel",oa(r)),m(s={},"media_description",g),m(s,"media_width",u),m(s,"media_height",h),m(s,"media_thumbnailwidth",E),m(s,"media_thumbnailheight",b),m(s,"media_size",I),m(s,"media_id",C),m(s,"media_filename",f),D=uc(s,(function(e){return(new TextEncoder).encode(e.toString())})),e.t0=Uint8Array,e.next=14,Ii(v);case 14:return e.t1=e.sent,D.media_thumbnail=new e.t0(e.t1),P=i&&"IMAGE"===t?"PeerImageMessage":i&&"FILE"===t?"PeerFileMessage":i||"IMAGE"!==t?"ChannelFileMessage":"ChannelImageMessage",B=function(e){return{MiscMap:D,sequence:O,dialogue:k,instance:N,dst:r,ms:U.fromNumber(Date.now(),!0),options:new $d({IterationNumber:e,CompressionMethod:"Uncompressed",MessageType:P,ToCache:S,ToArchive:T}).toLong(),payload:new Uint8Array,src:F.context.uid}},e.next=20,Kb(this.sendMessageToRetry(B,!0)).pipe(hb(void 0===a?1e4:a),Ga((function(e){return e instanceof pb&&F.warn("Send message timeout"),Y(e)}))).toPromise();case 20:if(M=e.sent,2!==(j=M.code)){e.next=24;break}throw new da("The peer does not support this type of message",lA);case 24:return e.abrupt("return",{hasPeerReceived:0===j});case 25:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i,o,a){return e.apply(this,arguments)}}()},{key:"sendRawMessage",value:function(){var e=K(x.mark((function e(t,n,r,i,o,a){var s,c,u,l,h,d,f,p,g,A,v=this;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=o.enableOfflineMessaging,c=o.enableHistoricalMessaging,za(r)&&t instanceof Uint8Array&&"string"==typeof n){e.next=3;break}throw new L("The send message arguments are not valid",i?Zk:hg);case 3:if(!(32768<t.byteLength+new Blob([n]).size)){e.next=5;break}throw new ib("The message size is over the 32KB limit",i?ue:Gh);case 5:return u=!Zd.getParameter("DISABLE_MESSAGE_COMPRESSION")&&128<=t.byteLength,l=this.chatManager.getChatInfo(r),h=l.dialogue,d=l.sequence,f=this.instanceId,this.log('A%s %s raw message is sending to %s: "'.concat(f,"-").concat(h,"#").concat(d,'"'),u?" compressed":"",i?"peer":"channel",oa(r)),p=function(e){return{MiscMap:{description:(new TextEncoder).encode(n)},sequence:d,dialogue:h,instance:f,dst:r,ms:U.fromNumber(Date.now(),!0),options:new $d({IterationNumber:e,CompressionMethod:u?"Zlib":"Uncompressed",MessageType:i?"PeerRawMessage":"ChannelRawMessage",ToCache:s,ToArchive:c}).toLong(),payload:u?hs(t):t,src:v.context.uid}},e.next=12,Kb(this.sendMessageToRetry(p,!0)).pipe(hb(void 0===a?1e4:a),Ga((function(e){return e instanceof pb&&v.warn("Send message timeout"),Y(e)}))).toPromise();case 12:return g=e.sent,A=g.code,e.abrupt("return",{hasPeerReceived:0===A});case 15:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i,o,a){return e.apply(this,arguments)}}()},{key:"sendTextMessage",value:function(){var e=K(x.mark((function e(t,n,r,i,o){var a,s,c,u,l,h,d,f,p,g,A,v=this;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=i.enableOfflineMessaging,s=i.enableHistoricalMessaging,za(n)){e.next=3;break}throw new L("The send message arguments are not valid",r?Zk:hg);case 3:if(!(32768<new Blob([t]).size)){e.next=5;break}throw new ib("The message size is over the 32KB limit",r?ue:Gh);case 5:return c=!Zd.getParameter("DISABLE_MESSAGE_COMPRESSION")&&128<=new Blob([t]).size,u=this.chatManager.getChatInfo(n),l=u.dialogue,h=u.sequence,d=this.instanceId,this.log('A%s %s message is sending to %s: "'.concat(d,"-").concat(l,"#").concat(h,'"'),c?" compressed":"",r?"peer":"channel",oa(n)),f=(new TextEncoder).encode(t),p=function(e){return{MiscMap:{},sequence:h,dialogue:l,instance:d,dst:n,ms:U.fromNumber(Date.now(),!0),options:new $d({IterationNumber:e,CompressionMethod:c?"Zlib":"Uncompressed",MessageType:r?"PeerTextMessage":"ChannelTextMessage",ToCache:a,ToArchive:s}).toLong(),payload:c?hs(f):f,src:v.context.uid}},e.next=13,Kb(this.sendMessageToRetry(p,!0)).pipe(hb(void 0===o?1e4:o),Ga((function(e){return e instanceof pb&&v.warn("Send message timeout"),Y(e)}))).toPromise();case 13:return g=e.sent,A=g.code,e.abrupt("return",{hasPeerReceived:0===A});case 16:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i,o){return e.apply(this,arguments)}}()},{key:"cleanLoginSubs",value:function(e,t){Object.entries(this.loginSocketSubs[e]).forEach((function(e){var n=(e=ra(e,2))[1];"channels"===e[0]&&t||(Array.isArray(n)||n instanceof Map?n.forEach((function(e){return e.unsubscribe()})):n&&n.unsubscribe())})),this.loginSocketSubs[e]={channels:t?this.loginSocketSubs[e].channels:new Map,receivers:[]}}},{key:"sendMessageToRetry",value:function(){var e=K(x.mark((function e(t,n){var r,i,o,a,s,c,u,l,h,d=this,f=arguments;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=2<f.length&&void 0!==f[2]?f[2]:0,this.log("Attempt to send the message ".concat(n?" with retrying, %o":"without retrying"),{retryTimes:r}),0!==(i=this.getLoginSockets()).length){e.next=5;break}throw Error("no logged-in sockets");case 5:return o=t(r),i.forEach((function(e){e.sendPacket("Message",o)})),a=o.dialogue,s=o.sequence,c=o.instance,u=i.map((function(e){return e.fromReceived("Ack").pipe(wb((function(e){return a.eq(e.dialogue)&&s.eq(e.sequence)&&c.eq(e.instance)})))})),e.prev=9,e.next=12,Xb.apply(void 0,I(u)).pipe(hb(6e3),Ga((function(e){return Sa(e)&&d.warn("Message send timeout, retry times %d",r),Y(e)})),Oa(1)).toPromise();case 12:return l=e.sent,h=l.code,this.log("The message has been acked, %o",{code:h}),e.abrupt("return",{code:h,retryTimes:r});case 18:if(e.prev=18,e.t0=e.catch(9),!(e.t0 instanceof pb&&n)){e.next=22;break}return e.abrupt("return",this.sendMessageToRetry(t,!1,r+1));case 22:throw e.t0;case 23:case"end":return e.stop()}}),e,this,[[9,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"initKeepAliveSender",value:function(){var e=this;this.lastLoginSockets.map((function(t){return t.pipe(Cc((function(t){return Bc(0,1e3).pipe(ca((function(){e.incSeqIfNeeded(t.env),t.sendPacket("Ping",{ms:U.fromNumber(Date.now(),!0),seq:e.seq})})))})))})).forEach((function(t,n){var r=e.loginSocketSubs[n].keepAlive;void 0!==r&&r.unsubscribe(),e.loginSocketSubs[n].keepAlive=t.subscribe({error:function(){}})}))}},{key:"initKeepAliveReconnector",value:function(){var e=this;this.lastLoginSockets.map((function(e){return e.pipe(Cc((function(e){var t,n=!1,r=e.userJoin$.pipe(ca((function(){n=!0}))),i=e.input$.pipe(ca((function(e){"Ping"!==Ki[e.uri].slice(0,-3)&&(n=!1)})));return Xb(Bc(7e3,4500).pipe(Mt(e.receivedPacket),ca((function(r){r=ra(r,2),r=ra(r[1],2)[1],t!==r||n||e.forceReconnect(),t=r}))),r,i)})))})).forEach((function(t,n){var r=e.loginSocketSubs[n].keepAliveReconnector;void 0!==r&&r.unsubscribe(),e.loginSocketSubs[n].keepAliveReconnector=t.subscribe({error:function(){}})}))}},{key:"initLoginReceiver",value:function(){var e=this;this.lastLoginSockets.map((function(t){return t.pipe(Cc((function(t){return Xb(gb(t,"reconnect").pipe(ca(e.onSocketReconnect(t))),t.fromReceived("Message").pipe(ca(e.onMessage(t))),t.fromReceived("GroupEnterNotice").pipe(ca(e.onGroupEnterNotice())),t.fromReceived("GroupLeaveNotice").pipe(ca(e.onGroupLeaveNotice())),t.fromReceived("GroupCountNotice").pipe(ca(e.onGroupCountNotice())),t.fromReceived("GroupAttributeAlt").pipe(ca(e.onGroupAttributeAlt())),t.fromReceived("UserJoinNotice").pipe(ca(e.onUserNotice(S.PeerOnlineState.ONLINE))),t.fromReceived("UserQuitNotice").pipe(ca(e.onUserNotice(S.PeerOnlineState.OFFLINE))),t.fromReceived("UserWaitNotice").pipe(ca(e.onUserNotice(S.PeerOnlineState.UNREACHABLE)))).pipe(qf(void 0))})))})).forEach((function(t,n){e.loginSocketSubs[n].receivers.push(t.subscribe({error:function(){}}))}))}},{key:"requestSocketLogin",value:function(e,t,n){var r=this;return hm($c((function(){r.userJoinOptions=new fs(t),e.sendPacket("UserJoin",{account:r.context.uid,instance:r.instanceId,opt:r.userJoinOptions.toLong(),seq:n,ticket:e.ticket})})),e.fromReceived("UserResp").pipe(Z((function(e){return n.eq(e.seq)})),ca((function(t){if(0!==(t=t.code))throw r.clearSockets(),r.logError("Connected to gateway success but the Rtm server rejected login"),new da(["Login failure. The response code from the RTM service is %d",t],jg);r.log("ENV_%d logged in",e.env)})),qf(e),hb(7e3))).pipe(wb((function(e){return void 0!==e})),Ga((function(e){return e instanceof pb&&r.warn("Login response timeout, rejoin: %s",t),Y(e)})))}},{key:"getSocketLoginObservables",value:function(e,t){var n=this;return e.map((function(e){return e.pipe(ca((function(e){0===e.listenerCount("socketUserDrop")&&e.on("socketUserDrop",(function(t){return n.onUserDrop(t,e)}))})),Cc((function(e,r){return n.incSeqIfNeeded(e.env),n.requestSocketLogin(e,0!==r,0===r?t:n.seq)})),oe())}))}},{key:"incSeqIfNeeded",value:function(e){if(![0,1].includes(e))throw new Fa({INVALID_ENV:"The env argument is not 0 or 1"});this.seqSentStatuses[e]&&(this.seq=this.seq.add(1),this.seqSentStatuses=[!1,!1]),this.seqSentStatuses[e]=!0}},{key:"incGetSeq",value:function(){return this.seq=this.seq.add(1),this.seqSentStatuses=[!0,!0],this.seq}},{key:"getLoginSockets",value:function(){for(var e=this.curLoginSockets,t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i}},{key:"emitMessage",value:function(e,n){var r=e.options,i=e.payload,o=e.src,a=e.dst,s=e.instance,c=e.dialogue,u=e.sequence,l=e.ms,h=e.MiscMap;this.dialogueSequenceLru.set(c.toString(),u),s="".concat(s,"-").concat(c,"#").concat(u),this.msgDedupLru.has(s)?this.warn("Env_%d: Messages out-of-order or not start with 1: %s",n,s):(this.msgDedupLru.set(s,void 0),n=new $d(r),this.lastLoginSockets.forEach(function(){var n=K(x.mark((function n(r){var i;return x.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.pipe(Oa(1)).toPromise();case 2:i=n.sent,t.sendMessageAck(e,i);case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()),r=n.isZlibCompressed(),n.isInvitation()?(a=pa(r?ml(Wm(i,Uint8Array.of(0,0,0,0))):i),a=JSON.parse(a),this.log("The received invitation body is %o",a),this.emit("invitationMessage",{body:a,type:n.getInvitationType(),peerId:o,serverReceivedTs:l.toNumber()})):n.isTextMessage()?(h=n.isPeerTextMessage(),i=pa(r?ml(Wm(i,Uint8Array.of(0,0,0,0))):i),this.info("Received a %s %s text message from %s to %s, %s",r?" compressed":"",h?"peer":"channel",oa(o),oa(a),s),h?(o={text:i,peerId:o,properties:{serverReceivedTs:l.toNumber(),isOfflineMessage:n.isFromCache()}},this.emit("peerTextMessage",o)):this.emit("channelTextMessage",{channelId:a,memberId:o,text:i,properties:{serverReceivedTs:l.toNumber(),isOfflineMessage:!1}})):n.isRawMessage()?(c=n.isRawPeerMessage(),h=void 0===(h=h.description)?"":pa(h),i=r?ml(i):i,this.info("Received a %s %s raw message from %s to %s, %s",r?" compressed":"",c?"peer":"channel",oa(o),oa(a),s),c?(o={desc:h,raw:i,peerId:o,properties:{serverReceivedTs:l.toNumber(),isOfflineMessage:n.isFromCache()}},this.emit("peerRawMessage",o)):this.emit("channelRawMessage",{desc:h,raw:i,channelId:a,memberId:o,properties:{serverReceivedTs:l.toNumber(),isOfflineMessage:!1}})):(n.isImageMessage()||n.isFileMessage())&&(i=n.isPeerMessage(),this.info("Received a %s media message from %s to %s, %s",i?"peer":"channel",oa(o),oa(a),s),i?this.emit("peerMediaMessage",{messageType:n.isImageMessage()?"IMAGE":"FILE",details:h,peerId:o,properties:{serverReceivedTs:l.toNumber(),isOfflineMessage:n.isFromCache()}}):this.emit("channelMediaMessage",{messageType:n.isImageMessage()?"IMAGE":"FILE",details:h,memberId:o,channelId:a,properties:{serverReceivedTs:l.toNumber(),isOfflineMessage:n.isFromCache()}})))}},{key:"onSocketReconnect",value:function(e){var t=this;return function(){var n=[0,1].filter((function(t){return t!==e.env}))[0];(n=t.connection.curOpenSockets[n])&&!n.loggedIn&&t.emit("connectionLost")}}},{key:"onUserDrop",value:function(e,t){e=e.code,db("KickedOff",{code:0,elapse:eb(this.startTime),linkId:parseInt(t.name.split("-")[1],10),lts:U.fromNumber(Date.now()),server:t.address,serverCode:e,sid:Xa(this.instanceId),userId:this.context.uid},null==y?void 0:y.EVENT_REPORT_DOMAIN[0],null==y?void 0:y.EVENT_REPORT_BACKUP_DOMAIN[0]),10006===e||10001===e?this.warn("Login too often and kicked off, reconnect and login"):10009===e?(this.warn("The instance ID conflicts, reconnecting"),this.instanceId=Bg(),this.context.sid=Xa(this.instanceId),this.emit("instanceChanged",this.instanceId)):[11,14,15,16].includes(e)&&(this.emit("userDrop",e),this.clearSockets())}},{key:"clearSockets",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,n=1<arguments.length&&void 0!==arguments[1]&&arguments[1];[0,1].forEach((function(r){e.cleanLoginSubs(r,n),e.connection.closeSocket(r,t)}))}},{key:"onMessage",value:function(e){var t=this;return function(n){var r=n.dialogue,i=n.instance,o=n.sequence,a=n.options;if(n.src===t.context.uid)t.log("The message is from the local account, ignored");else{var s=r.toString(),c=t.dialPendingMsgSubjectMap.get(s);if(r="".concat(i,"-").concat(r,"#").concat(o),c)c.next(n),t.log("Env_%d: The dialogue has pending messages, next: %s",e.env,r);else{var u=t.dialogueSequenceLru.get(s);if(c=!u&&o.eq(1),i=void 0!==u&&o.sub(u).eq(1),c||i)t.emitMessage(n,e.env);else{if(u){if(o.lte(u))return;t.log("Env_%d: The message pended, the sequence is not continuous with the last: %s",e.env,r)}else t.log("Env_%d: The message pended, the first sequence is not equal to 1: %s",e.env,r);o=new Pa,t.dialPendingMsgSubjectMap.set(s,o);var l=o.pipe(Ns(Ok),xg((function(e,t){return[].concat(I(e),[t])}),[]),ba((function(e){return I(e).sort((function(e,t){return e=e.sequence,t=t.sequence,e.eq(t)?0:e.gt(t)?1:-1}))})),rm(1));a=!(a=new $d(a)).isFromCache()&&!a.isBufferedMessage(),l.pipe(ob(Bc(a?750:1500)),Z((function(e){if(2>e.length)return!1;for(var t=void 0===u?U.fromNumber(1,!0):u.add(1),n=0;n<e.length;t=t.add(1),n++)if(!e[n].sequence.eq(t))return!1;return!0})),wg((function(){t.dialPendingMsgSubjectMap.delete(s)}))).subscribe((function(n){n.forEach((function(n){t.emitMessage(n,e.env),t.log("Env_%d: The message queue has fully ordered, emitting: %s",e.env,"".concat(n.instance,"-").concat(n.dialogue,"#").concat(n.sequence))}))}),(function(n){n instanceof vg&&l.pipe(Oa(1)).subscribe((function(n){return n.forEach((function(n){t.log("Env_%d: The message pending queue expired, emitting: %s",e.env,"".concat(n.instance,"-").concat(n.dialogue,"#").concat(n.sequence)),t.emitMessage(n,e.env)}))}))})),o.next(n)}}}}}},{key:"onGroupEnterNotice",value:function(){var e=this;return function(t){e.emit("memberNotice",{channelId:t.group,seq:t.seq,instance:t.instance,memberId:t.user,type:"MemberJoined",size:t.size})}}},{key:"onGroupLeaveNotice",value:function(){var e=this;return function(t){e.emit("memberNotice",{channelId:t.group,seq:t.seq,instance:t.instance,memberId:t.user,type:"MemberLeft",size:t.size})}}},{key:"onGroupCountNotice",value:function(){var e=this;return function(t){e.emit("memberNotice",{channelId:t.group,seq:t.seq,instance:t.instance,type:"MemberCountUpdated",size:t.size})}}},{key:"onGroupAttributeAlt",value:function(){var e=this;return function(t){var n=t.group;t=ff(t,["group"]),e.emit("channelAttributesUpdated",ua({channelId:n},t))}}},{key:"onUserNotice",value:function(e){var t=this;return function(n){t.emit("peerOnlineStatusChanged",{peerId:n.user,instance:n.instance,seq:n.seq,state:e})}}}],[{key:"sendMessageAck",value:function(e,t){var n=new $d(e.options);(n.isInvitation()||n.isPeerMessage())&&t.sendPacket("Ack",{code:0,dialogue:e.dialogue,instance:e.instance,sequence:e.sequence})}}]),t}(tb());m(is,"genTimeoutError",(function(e,t){return fb(void 0).pipe(bd(void 0===t?1e4:t),ba((function(){throw new cb(["Request timed out after %ds",void 0===t?1e4:t],e)})))}));var js,nl,ol=0,pl=0;Ud.v1=function(e,t,n){n=t&&n||0;var r=t||[],i=(e=e||{}).node||js,o=void 0!==e.clockseq?e.clockseq:nl;if(null==i||null==o){var a=Hq();null==i&&(i=js=[1|a[0],a[1],a[2],a[3],a[4],a[5]]),null==o&&(o=nl=16383&(a[6]<<8|a[7]))}a=void 0!==e.msecs?e.msecs:(new Date).getTime();var s=void 0!==e.nsecs?e.nsecs:pl+1,c=a-ol+(s-pl)/1e4;if(0>c&&void 0===e.clockseq&&(o=o+1&16383),(0>c||a>ol)&&void 0===e.nsecs&&(s=0),1e4<=s)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");for(ol=a,pl=s,nl=o,e=(1e4*(268435455&(a+=122192928e5))+s)%4294967296,r[n++]=e>>>24&255,r[n++]=e>>>16&255,r[n++]=e>>>8&255,r[n++]=255&e,e=a/4294967296*1e4&268435455,r[n++]=e>>>8&255,r[n++]=255&e,r[n++]=e>>>24&15|16,r[n++]=e>>>16&255,r[n++]=o>>>8|128,r[n++]=255&o,o=0;6>o;++o)r[n+o]=i[o];return t||Iq(r)},Ud.v4=Ud;var ql=Oh(),vd,bf=S.LocalInvitationFailureReason,Ba=S.LocalInvitationState,hD=(vd=function(e){function t(e,i,o){X(this,t);var a=r.call(this,o,"RtmLocalInvitation",!0);return m(n(a),"state",Ba.IDLE),m(n(a),"localInvitationEnd$",Ca(gb(n(a),"LocalInvitationAccepted"),gb(n(a),"LocalInvitationRefused"),gb(n(a),"LocalInvitationFailure"),gb(n(a),"LocalInvitationCanceled")).pipe(Oa(1))),m(n(a),"callId",Ud.v4()),m(n(a),"_content",""),m(n(a),"_channelId",""),m(n(a),"_response",""),m(n(a),"calleeId",void 0),m(n(a),"logger",void 0),m(n(a),"getSession",void 0),a.calleeId=e,a.getSession=i,a.logger=o,a}la(t,e);var r=ma(t);return Ha(t,[{key:"channelId",get:function(){return this._channelId},set:function(e){this.state!==Ba.IDLE?this.info("set channelId only allow before invitation sent to remote"):(this.log("set channelId for %s",this.callId),this._channelId=e)}},{key:"content",get:function(){return this._content},set:function(e){this.log("set content for %s",this.callId),this._content=e}},{key:"response",get:function(){return this._response},set:function(e){throw new L('Cannot set the "response" of the LocalInvitation instance.',xc)}},{key:"send",value:function(){var e,t=this;if(this.state===Ba.SENT_TO_REMOTE||this.state===Ba.RECEIVED_BY_REMOTE)throw new M("The local invitation send failure. The call invitation has already been sent.",eA);if(this.isLocalInvitationEnd())throw new M("The local invitation send failure. The call invitation has ended.",Hh);if(0<this._channelId.length&&!za(this._channelId))throw new L("Illegal invitation channel ID",xc);if(!za(this.calleeId))throw new L("Illegal invitation callee user ID",xc);if(8192<Hg(this._content))throw new L('The length of the "content" overflows. The number of bytes representing content must not exceed 8  1024 if encoded in UTF-8.',xc);this.state=Ba.SENT_TO_REMOTE,$c(K(x.mark((function n(){var r,i,o;return x.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.getSession().sendInvitationMessage({peerId:t.calleeId,callId:t.callId,extra:t._content,type:"CallInvite",channelId:t._channelId});case 2:if(r=n.sent,i=r.hasPeerReceived,o=r.hasReSent,!t.isLocalInvitationEnd()){n.next=7;break}throw new cb("send invitation timeout");case 7:if(t.log("The local invitation has sent to the callee"),i||o){n.next=11;break}throw e=new ql({PEER_NOT_ONLINE:"The peer of the invitation is not online"});case 11:if(i){n.next=14;break}throw e=new ql({RESENT_AND_OFFLINE:"Resent and the peer of the invitation is not online"});case 14:case"end":return n.stop()}}),n)})))).pipe(ne((function(e){return e.pipe(ca((function(e){if(!(e instanceof ql))throw e})),bd(2e3))})),hb(3e4),Ga((function(e){return Sa(e)&&t.warn("local invitation ack timed out"),Y(e)})),ob(this.localInvitationEnd$)).subscribe({next:function(){t.state===Ba.RECEIVED_BY_REMOTE?t.log('The local invitation state is already "RECEIVED_BY_REMOTE", skipped emitting "LocalInvitationReceivedByPeer"'):t.state!==Ba.SENT_TO_REMOTE?t.log("The invitation has ended, skipped emitting the %s event","LocalInvitationReceivedByPeer"):(t.info("The peer received the local invitation %s.",t.callId),t.state=Ba.RECEIVED_BY_REMOTE,t.emit("LocalInvitationReceivedByPeer"),t.localInvitationEnd$.pipe(hb(6e4),Ga((function(e){return Sa(e)&&t.warn("local invitation expired"),Y(e)}))).subscribe({error:function(){t.state=Ba.FAILURE,t.emit("LocalInvitationFailure",bf.INVITATION_EXPIRE)}}))},error:function(n){t.isLocalInvitationEnd()?t.log("The invitation has ended, skipped emitting the %s event","LocalInvitationFailure"):(t.state=Ba.FAILURE,Sa(n)&&e?"PEER_NOT_ONLINE"===e.code?t.emit("LocalInvitationFailure",bf.PEER_OFFLINE):"RESENT_AND_OFFLINE"===e.code&&t.emit("LocalInvitationFailure",bf.PEER_NO_RESPONSE):Sa(n)?t.emit("LocalInvitationFailure",bf.PEER_NO_RESPONSE):"RtmInvalidStatusError"===n.name?t.emit("LocalInvitationFailure",bf.NOT_LOGGEDIN):t.emit("LocalInvitationFailure",bf.UNKNOWN))}})}},{key:"cancel",value:function(){if(this.isLocalInvitationEnd())throw new M("The local invitation cancel failure",Hh);if(this.state===Ba.IDLE)throw new M("The local invitation has not been sent",dA);if(8192<Hg(this._content))throw new L('The length of the "content" overflows. The number of bytes representing content must not exceed 8  1024 if encoded in UTF-8.',xc);this.getSession().sendInvitationMessage({callId:this.callId,peerId:this.calleeId,type:"CallCancel",channelId:this._channelId,extra:this._content}),this.state=Ba.CANCELED,this.emit("LocalInvitationCanceled")}},{key:"onAcceptReceived",value:function(e){if(this.isLocalInvitationEnd()&&this.state!==Ba.ACCEPTED_BY_REMOTE)this.log("The invitation has ended, skipped emitting the %s event","LocalInvitationAccepted");else{if(this.state===Ba.IDLE)throw new M("the local have not sent the invitation, how can remote accept it?");this.getSession().sendInvitationMessage({callId:this.callId,isAcceptAck:!0,type:"CallAccept",peerId:this.calleeId,channelId:this.channelId}),this.state===Ba.ACCEPTED_BY_REMOTE?this.log("already in ACCEPTED_BY_REMOTE state, ignore emit ACCEPTED_BY_REMOTE"):(this.state===Ba.SENT_TO_REMOTE&&(this.log("receive LocalInvitationAccepted before remote response to the invitation"),this.state=Ba.RECEIVED_BY_REMOTE,this.emit("LocalInvitationReceivedByPeer")),this.state=Ba.ACCEPTED_BY_REMOTE,this._response=e,this.emit("LocalInvitationAccepted",e))}}},{key:"onRefuseReceived",value:function(e){if(this.isLocalInvitationEnd())this.log("The invitation has ended, skipped emitting the %s event","LocalInvitationRefused");else{if(this.state===Ba.IDLE)throw new M("the local have not sent the invitation, how can remote refuse it?");this.state===Ba.SENT_TO_REMOTE&&(this.log("receive LocalInvitationRefused before remote response to the invitation"),this.state=Ba.RECEIVED_BY_REMOTE,this.emit("LocalInvitationReceivedByPeer")),this._response=e,this.state=Ba.REFUSED_BY_REMOTE,this.emit("LocalInvitationRefused",e)}}},{key:"isLocalInvitationEnd",value:function(){return[Ba.CANCELED,Ba.FAILURE,Ba.ACCEPTED_BY_REMOTE,Ba.REFUSED_BY_REMOTE].includes(this.state)}}]),t}(tb()),fa(vd.prototype,"send",[Nb],Object.getOwnPropertyDescriptor(vd.prototype,"send"),vd.prototype),fa(vd.prototype,"cancel",[Nb],Object.getOwnPropertyDescriptor(vd.prototype,"cancel"),vd.prototype),vd),Qh=S.RemoteInvitationFailureReason,kb=S.RemoteInvitationState,iD=function(e){function t(e){var i=e.invitationChannel,o=e.extraContent,a=e.callId,s=e.callerId,c=e.logger;e=e.getSession,X(this,t);var u=r.call(this,c,"RtmRemoteInvitation",!0);return m(n(u),"state",kb.INVITATION_RECEIVED),m(n(u),"remoteInvitationEnd$",Ca(gb(n(u),"RemoteInvitationCanceled"),gb(n(u),"RemoteInvitationRefused"),gb(n(u),"RemoteInvitationAccepted"),gb(n(u),"RemoteInvitationFailure")).pipe(Oa(1))),m(n(u),"callerId",void 0),m(n(u),"callId",void 0),m(n(u),"_getSession",void 0),m(n(u),"logger",void 0),m(n(u),"_content",void 0),m(n(u),"_channelId",void 0),m(n(u),"_response",""),u._channelId=i,u._content=o,u.callId=a,u.callerId=s,u._getSession=e,u.logger=c,u.remoteInvitationEnd$.pipe(hb(6e4),Ga((function(e){return Sa(e)&&u.warn("Remote invitation expired"),Y(e)}))).subscribe({error:function(){u.state=kb.FAILURE,u.emit("RemoteInvitationFailure",Qh.INVITATION_EXPIRE)}}),u}la(t,e);var r=ma(t);return Ha(t,[{key:"channelId",get:function(){return this._channelId},set:function(e){throw new L('Cannot set the "response" of the RemoteInvitation instance.',xc)}},{key:"content",get:function(){return this._content},set:function(e){throw new L('Cannot set the "content" of the RemoteInvitation instance.',xc)}},{key:"response",get:function(){return this._response},set:function(e){this._response=e}},{key:"accept",value:function(){var e,t=this;if(this.isRemoteInvitationEnd())throw new M("The local invitation has ended. Cannot accept.",Hh);if(this.state===kb.ACCEPT_SENT_TO_LOCAL)throw new M("The remote invitation is accepting. Cannot do the operation.",Oq);if(8192<Hg(this._response))throw new L('The length of the "response" overflows. The number of bytes representing content must not exceed 8  1024 if encoded in UTF-8.',xc);this.state=kb.ACCEPT_SENT_TO_LOCAL,Xb(lm(1e3).pipe(bb((function(){return $c(K(x.mark((function e(){return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t._getSession().sendInvitationMessage({peerId:t.callerId,callId:t.callId,extra:t.response,type:"CallAccept",isAcceptAck:!1,channelId:t.channelId}));case 1:case"end":return e.stop()}}),e)}))))})),wb((function(t){return e=t.hasPeerReceived})),Oa(1)),gb(this,"RemoteInvitationAccepted")).pipe(hb(5e3),ob(this.remoteInvitationEnd$)).subscribe({error:function(n){if(t.logError(n),t.state=kb.FAILURE,Sa(n))switch(e){case void 0:case!0:return void t.emit("RemoteInvitationFailure",Qh.ACCEPT_FAILURE);case!1:return void t.emit("RemoteInvitationFailure",Qh.PEER_OFFLINE)}t.emit("RemoteInvitationFailure",Qh.UNKNOWN)}})}},{key:"refuse",value:function(){if(this.state===kb.ACCEPT_SENT_TO_LOCAL)throw new M("The remote invitation is accepting. Cannot do the operation.",Oq);if(this.isRemoteInvitationEnd())throw new M("The invitation is end. Cannot refuse",Hh);if(8192<Hg(this._response))throw new L('The length of the "response" overflows. The number of bytes representing content must not exceed 8  1024 if encoded in UTF-8.',xc);this._getSession().sendInvitationMessage({peerId:this.callerId,callId:this.callId,extra:this.response,type:"CallReject",channelId:this.channelId}),this.state=kb.REFUSED,this.emit("RemoteInvitationRefused")}},{key:"onCancelReceived",value:function(e){this.isRemoteInvitationEnd()?this.log("The invitation has ended, skipped emitting the %s event","RemoteInvitationCanceled"):(this.state===kb.ACCEPT_SENT_TO_LOCAL&&this.log("caller canceled before receive accept"),this._content=e,this.state=kb.CANCELED,this.emit("RemoteInvitationCanceled",e))}},{key:"onAcceptAckReceived",value:function(){this.state!==kb.ACCEPT_SENT_TO_LOCAL?this.log("The invitation has ended, skipped emitting the %s event","ori:".concat(this.state,", to: RemoteInvitationAccepted")):(this.state=kb.ACCEPTED,this.emit("RemoteInvitationAccepted"))}},{key:"isRemoteInvitationEnd",value:function(){return[kb.ACCEPTED,kb.REFUSED,kb.CANCELED,kb.FAILURE].includes(this.state)}}]),t}(tb()),jD=function(e){function t(e,i){X(this,t);var o=r.call(this,i,"InvitationManager");return m(n(o),"getSession",void 0),m(n(o),"invitationDispatcher",new ea.EventEmitter),m(n(o),"outgoingLocalInvitations",new Map),m(n(o),"receivedRemoteInvitations",new tc(void 0,{maxlen:1e4})),m(n(o),"logger",void 0),o.getSession=an(e),o.logger=i,o.invitationDispatcher.on("remoteInvitationToManager",(function(e){var t=e.callId,n=e.extra,r=e.callerId;e=e.channelId,o.receivedRemoteInvitations.has(t)||((n=new iD({callerId:r,callId:t,getSession:o.getSession,logger:i,extraContent:n,invitationChannel:e})).remoteInvitationEnd$.subscribe((function(){o.receivedRemoteInvitations.delete(t)})),o.receivedRemoteInvitations.set(t,n),o.emit("remoteInvitationInstance",n))})),o.invitationDispatcher.on("acceptAckToRemoteInvitation",(function(e){(e=o.receivedRemoteInvitations.get(e.callId))&&e.onAcceptAckReceived()})),o.invitationDispatcher.on("cancelToRemoteInvitation",(function(e){var t=e.extra;(e=o.receivedRemoteInvitations.get(e.callId))&&e.onCancelReceived(t)})),o.invitationDispatcher.on("acceptToLocalInvitation",(function(e){var t=e.extra;(e=o.outgoingLocalInvitations.get(e.callId))&&e.onAcceptReceived(t)})),o.invitationDispatcher.on("refuseToLocalInvitation",(function(e){var t=e.extra;(e=o.outgoingLocalInvitations.get(e.callId))&&e.onRefuseReceived(t)})),o}la(t,e);var r=ma(t);return Ha(t,[{key:"invitationMessageHandler",value:function(e){var t=e.body,n=t.callId,r=t.extra;r=void 0===r?"":r;var i=t.type,o=void 0===(t=t.channel)?"":t,a=e.type;switch(t=e.peerId,e=e.serverReceivedTs,a){case"CallAccept":"ack"===i?this.invitationDispatcher.emit("acceptAckToRemoteInvitation",{callId:n}):"request"===i&&this.invitationDispatcher.emit("acceptToLocalInvitation",{callId:n,extra:r});break;case"CallInvite":this.invitationDispatcher.emit("remoteInvitationToManager",{callId:n,callerId:t,extra:r,channelId:o});break;case"CallCancel":if("0"===n){n="".concat("AgoraRTMLegacyEndcallCompatibleMessagePrefix","_").concat(o,"_").concat(r),this.getSession().emit("peerTextMessage",{peerId:t,properties:{serverReceivedTs:e,isOfflineMessage:!1},text:n});break}this.invitationDispatcher.emit("cancelToRemoteInvitation",{callId:n,extra:r});break;case"CallReject":this.invitationDispatcher.emit("refuseToLocalInvitation",{callId:n,extra:r});break;default:throw Hm("invitationType",a)}}},{key:"genLocalInvitation",value:function(e){var t=this,n=new hD(e,this.getSession,this.logger);return n.localInvitationEnd$.subscribe((function(){t.outgoingLocalInvitations.delete(n.callId)})),this.outgoingLocalInvitations.set(n.callId,n),n}}]),t}(tb()),kD=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return lb(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),pC(e,t,{leading:r,maxWait:t,trailing:i})},ub,cf;!function(e){e[e.JOINED=0]="JOINED",e[e.LEFT=1]="LEFT"}(cf||(cf={}));var ks=S.ConnectionState,lD=(ub=function(e){function t(e,i,o,a){X(this,t);var s=r.call(this,a,"RtmChannel",!0);return m(n(s),"onMemberCountUpdated",kD((function(e){e!==s.memberCount&&(s.memberCount=e,s.emit("MemberCountUpdated",e))}),1e3)),m(n(s),"getSession",void 0),m(n(s),"memberCount",0),m(n(s),"memberJoinedLru",new tc(void 0,{maxlen:1e4})),m(n(s),"memberLeftLru",new tc(void 0,{maxlen:1e4})),m(n(s),"memberJoinStateLru",new tc(void 0,{maxlen:1e4})),m(n(s),"attributesSeqLru",new tc(void 0,{maxlen:1e4})),m(n(s),"channelId",void 0),m(n(s),"client",void 0),m(n(s),"onAttributesUpdated",(function(e){var t=e.channelId,n=e.attributeMaps,r=e.seq;e=e.instance.toString();var i=s.attributesSeqLru.get(e);if((!i||r.greaterThan(i))&&(s.attributesSeqLru.set(e,r),t===s.channelId)){for(t={},r=0;r<n.length;r++){var o=n[r];e=o.key,i=o.ms;var a=o.value;if(o=o.origin,"string"!=typeof e||!U.isLong(i)||"string"!=typeof a||!za(o))break;t[e]={value:a,lastUpdateUserId:o,lastUpdateTs:i.toNumber()}}s.emit("AttributesUpdated",t)}})),m(n(s),"onChannelTextMessage",(function(e){var t=e.memberId,n=e.text,r=e.properties;e.channelId===s.channelId&&s.emit("ChannelMessage",{text:n,messageType:S.MessageType.TEXT},t,r)})),m(n(s),"onChannelMediaMessage",(function(e){var t=e.memberId,n=e.properties,r=e.details,i=e.messageType;e.channelId===s.channelId&&("FILE"===i?s.emit("ChannelMessage",{messageType:S.MessageType.FILE,size:parseInt(pa(r.media_size),10),description:pa(r.media_description),fileName:pa(r.media_filename),mediaId:pa(r.media_id),thumbnail:new Blob([r.media_thumbnail])},t,n):"IMAGE"===i&&s.emit("ChannelMessage",{messageType:S.MessageType.IMAGE,size:parseInt(pa(r.media_size),10),description:pa(r.media_description),fileName:pa(r.media_filename),mediaId:pa(r.media_id),thumbnail:new Blob([r.media_thumbnail]),height:parseInt(pa(r.media_height),10),width:parseInt(pa(r.media_width),10),thumbnailHeight:parseInt(pa(r.media_thumbnailheight),10),thumbnailWidth:parseInt(pa(r.media_thumbnailwidth),10)},t,n))})),m(n(s),"onChannelRawMessage",(function(e){var t=e.desc,n=e.raw,r=e.memberId,i=e.properties;e.channelId===s.channelId&&s.emit("ChannelMessage",{messageType:S.MessageType.RAW,rawMessage:n,description:t},r,i)})),m(n(s),"onMemberNotice",(function(e){var t=e.memberId,n=e.type,r=e.size;if(e.channelId===s.channelId){var i=e.instance.toString();e=e.seq.toString();var o={MemberLeft:s.memberLeftLru,MemberJoined:s.memberJoinedLru,MemberCountUpdated:void 0}[n];if(o){if(o.has(i+e))return void s.log("received duplicated %s notice (seq: %s), channel '%s', member '%s'",n,e,oa(s.channelId),oa(t||""));if(o.set(i+e,void 0),"string"!=typeof t)return;if(t!==s.getSession().context.uid){if((i=s.memberJoinStateLru.get(t))===cf.JOINED&&"MemberJoined"===n)return void s.log("received duplicated %s state (seq: %s), channel '%s', member '%s'",n,e,oa(s.channelId),oa(t||""));if(i===cf.LEFT&&"MemberLeft"===n)return void s.log("received duplicated %s state (seq: %s), channel '%s', member '%s'",n,e,oa(s.channelId),oa(t||""))}s.memberJoinStateLru.set(t,"MemberJoined"===n?cf.JOINED:cf.LEFT)}s.info("Channel %s - %s, memberId: %s",n,oa(s.channelId),"MemberCountUpdated"===n?"[unknown]":oa(t||"")),i=t===s.getSession().context.uid,"MemberLeft"===n&&za(t)||"MemberJoined"===n&&za(t)?(i||s.emit(n,t),s.onMemberCountUpdated(r)):"MemberCountUpdated"===n&&"number"==typeof r&&s.onMemberCountUpdated(r)}})),s.getSession=an(i),s.channelId=e,s.client=o,s.info("A channel created, id %s",oa(e)),s}la(t,e);var r=ma(t);return Ha(t,[{key:"join",value:function(){var e=K(x.mark((function e(){var t;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(za(this.channelId)){e.next=2;break}throw new L(["The %s in the arguments is invalid","channelId"],fA);case 2:e.prev=2,t=this.getSession(),e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(2),new M("The client is not logged in. Cannot do the operation",Tq);case 9:if(!t.joinedChannels.has(this)){e.next=12;break}throw db("ChnJoin",{cname:this.channelId,lts:U.fromNumber(Date.now()),userId:t.context.uid,elapse:eb(t.startTime),errCode:Sq,sid:Xa(t.instanceId)},null==y?void 0:y.EVENT_REPORT_DOMAIN[0],null==y?void 0:y.EVENT_REPORT_BACKUP_DOMAIN[0]),new M("The channel has joined. Cannot rejoin",Sq);case 12:if(e.prev=12,this.log("Joining the channel %s",oa(this.channelId)),!this.hasOtherChannelJoined()){e.next=17;break}throw db("ChnJoin",{cname:this.channelId,lts:U.fromNumber(Date.now()),userId:t.context.uid,elapse:eb(t.startTime),errCode:Uq,sid:Xa(t.instanceId)},null==y?void 0:y.EVENT_REPORT_DOMAIN[0],null==y?void 0:y.EVENT_REPORT_BACKUP_DOMAIN[0]),new M("A channel of the same channel ID has already joined. Cannot rejoin",Uq);case 17:if(20!==t.joinedChannels.size){e.next=20;break}throw db("ChnJoin",{cname:this.channelId,lts:U.fromNumber(Date.now()),userId:t.context.uid,elapse:eb(t.startTime),errCode:Rq,sid:Xa(t.instanceId)},null==y?void 0:y.EVENT_REPORT_DOMAIN[0],null==y?void 0:y.EVENT_REPORT_BACKUP_DOMAIN[0]),new ib("The joined channels has exceeded the limit of 20",Rq);case 20:return db("ChnJoin",{cname:this.channelId,lts:U.fromNumber(Date.now()),userId:t.context.uid,elapse:eb(t.startTime),errCode:0,sid:Xa(t.instanceId)},null==y?void 0:y.EVENT_REPORT_DOMAIN[0],null==y?void 0:y.EVENT_REPORT_BACKUP_DOMAIN[0]),e.next=23,t.requestChannelJoin(this,this.channelId);case 23:db("ChnJoinRes",{cname:this.channelId,lts:U.fromNumber(Date.now()),elapse:eb(t.startTime),errCode:0,sid:Xa(t.instanceId),serverErrCode:0,userId:t.context.uid},null==y?void 0:y.EVENT_REPORT_DOMAIN[0],null==y?void 0:y.EVENT_REPORT_BACKUP_DOMAIN[0]),this.info("The channel %s joined successfully",oa(this.channelId)),t.on("channelTextMessage",this.onChannelTextMessage),t.on("channelRawMessage",this.onChannelRawMessage),t.on("channelMediaMessage",this.onChannelMediaMessage),t.on("memberNotice",this.onMemberNotice),t.on("channelAttributesUpdated",this.onAttributesUpdated),e.next=41;break;case 32:if(e.prev=32,e.t1=e.catch(12),this.logError(e.t1),!sa(e.t1)){e.next=37;break}throw e.t1;case 37:if(!Sa(e.t1)){e.next=40;break}throw db("ChnJoinRes",{cname:this.channelId,lts:U.fromNumber(Date.now()),elapse:eb(t.startTime),errCode:Qq,sid:Xa(t.instanceId),serverErrCode:0,userId:t.context.uid},null==y?void 0:y.EVENT_REPORT_DOMAIN[0],null==y?void 0:y.EVENT_REPORT_BACKUP_DOMAIN[0]),new cb(["Join channel %s timed out",oa(this.channelId)],Qq);case 40:throw new Vc(["The channel %s join failure",oa(this.channelId)],{code:Pq,originalError:e.t1});case 41:case"end":return e.stop()}}),e,this,[[2,6],[12,32]])})));return function(){return e.apply(this,arguments)}}()},{key:"leave",value:function(){var e=K(x.mark((function e(){var t;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,t=this.getSession(),e.next=7;break;case 4:throw e.prev=4,e.t0=e.catch(0),new M("The client is not logged in. Cannot do the operation",hA);case 7:if(t.joinedChannels.has(this)){e.next=9;break}throw new M("The channel does not join. Cannot do the operation",gA);case 9:e.prev=9,t.requestChannelLeave(this,this.channelId),this.memberLeftLru.empty(),this.memberJoinedLru.empty(),this.attributesSeqLru.empty(),this.memberJoinStateLru.empty(),this.memberCount=0,t.removeListener("channelTextMessage",this.onChannelTextMessage),t.removeListener("channelRawMessage",this.onChannelRawMessage),t.removeListener("channelMediaMessage",this.onChannelMediaMessage),t.removeListener("memberNotice",this.onMemberNotice),t.removeListener("channelAttributesUpdated",this.onAttributesUpdated),e.next=32;break;case 23:if(e.prev=23,e.t1=e.catch(9),this.logError(e.t1),!sa(e.t1)){e.next=30;break}throw void 0===e.t1.code&&(e.t1.code=Wq),db("ChnLeave",{cname:this.channelId,lts:U.fromNumber(Date.now()),elapse:eb(t.startTime),errCode:Wq,sid:Xa(t.instanceId),userId:t.context.uid},null==y?void 0:y.EVENT_REPORT_DOMAIN[0],null==y?void 0:y.EVENT_REPORT_BACKUP_DOMAIN[0]),e.t1;case 30:throw db("ChnLeave",{cname:this.channelId,lts:U.fromNumber(Date.now()),elapse:eb(t.startTime),errCode:Vq,sid:Xa(t.instanceId),userId:t.context.uid},null==y?void 0:y.EVENT_REPORT_DOMAIN[0],null==y?void 0:y.EVENT_REPORT_BACKUP_DOMAIN[0]),new Vc("The channel leave failure",{code:Vq,originalError:e.t1});case 32:db("ChnLeave",{cname:this.channelId,lts:U.fromNumber(Date.now()),elapse:eb(t.startTime),errCode:0,sid:Xa(t.instanceId),userId:t.context.uid},null==y?void 0:y.EVENT_REPORT_DOMAIN[0],null==y?void 0:y.EVENT_REPORT_BACKUP_DOMAIN[0]);case 33:case"end":return e.stop()}}),e,this,[[0,4],[9,23]])})));return function(){return e.apply(this,arguments)}}()},{key:"sendMessage",value:function(){var e=K(x.mark((function e(t){var n,r,i,o,a,s=this,c=arguments;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=1<c.length&&void 0!==c[1]?c[1]:{},r=n.enableHistoricalMessaging,i=void 0!==r&&r,Sm(t,Gh),e.prev=2,o=this.getSession(),e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(2),new M("The client is not logged in. Cannot do the operation",ig);case 9:if(o.joinedChannels.has(this)){e.next=11;break}throw new M("The channel does not join. Cannot do the operation",ig);case 11:if(this.client.connectionState!==ks.RECONNECTING){e.next=16;break}return a=Date.now(),e.next=15,new Promise((function(e,n){var r=function(){var r=K(x.mark((function r(){var c;return x.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return c=Date.now()-a,r.prev=1,r.next=4,Fg({message:t,peerId:s.channelId,toPeer:!1,session:s.getSession(),errorCodes:{NOT_LOGGED_IN:ig,TOO_OFTEN:Kq},diff:c,logger:s.logger,options:{enableHistoricalMessaging:i,enableOfflineMessaging:!1}});case 4:e(),r.next=12;break;case 7:r.prev=7,r.t0=r.catch(1),Sa(r.t0)&&n(new cb(Yd(s.name,"sendMessageToPeer",1e4),Xk)),sa(r.t0)&&n(r.t0),n(new da("Channel message send failure",{code:hg,originalError:r.t0}));case 12:return r.prev=12,clearTimeout(o),r.finish(12);case 15:case"end":return r.stop()}}),r,null,[[1,7,12,15]])})));return function(){return r.apply(this,arguments)}}();s.client.internalEmitter.once("RECONNECTED",r);var o=setTimeout((function(){s.client.internalEmitter.off("RECONNECTED",r),n(new cb(Yd(s.name,"sendMessageToPeer",1e4),Xk))}),9e3)}));case 15:return e.abrupt("return");case 16:if(this.client.connectionState===ks.CONNECTED){e.next=18;break}throw new M("The client is not logged in. Cannot do the operation",ig);case 18:return e.prev=18,e.next=21,Fg({message:t,peerId:this.channelId,toPeer:!1,session:this.getSession(),errorCodes:{NOT_LOGGED_IN:ig,TOO_OFTEN:Kq},diff:0,logger:this.logger,options:{enableHistoricalMessaging:i,enableOfflineMessaging:!1}});case 21:e.next=31;break;case 23:if(e.prev=23,e.t1=e.catch(18),!Sa(e.t1)){e.next=27;break}throw new cb(Yd(this.name,"sendMessage",1e4),Xk);case 27:if(!sa(e.t1)){e.next=30;break}throw this.logError(e.t1),e.t1;case 30:throw new Vc("The channel message send failure",hg);case 31:case"end":return e.stop()}}),e,this,[[2,6],[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getMembers",value:function(){var e=K(x.mark((function e(){var t,n,r;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,e.prev=1,t=this.getSession(),e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(1),new M("The client is not logged in. Cannot do the operation",cA);case 8:if(t.joinedChannels.has(this)){e.next=10;break}throw new M("The channel does not join. Cannot do the operation",bA);case 10:return n=this.getSession().requestChannelMemberList(this.channelId),e.next=13,n.pipe(ba((function(e){return e.memberInfos.map((function(e){return e.account}))}))).toPromise();case 13:return r=e.sent,this.info("Channel %s - get members success, %o",oa(this.channelId),r.map(oa)),e.abrupt("return",r);case 18:if(e.prev=18,e.t1=e.catch(0),!sa(e.t1)){e.next=23;break}throw this.logError(e.t1),e.t1;case 23:throw new Vc("The channel members get failure",$z);case 24:case"end":return e.stop()}}),e,this,[[0,18],[1,5]])})));return function(){return e.apply(this,arguments)}}()},{key:"hasOtherChannelJoined",value:function(){var e=this;return!this.getSession().joinedChannels.has(this)&&Array.from(this.getSession().joinedChannels).some((function(t){return t.channelId===e.channelId}))}}]),t}(tb()),fa(ub.prototype,"join",[Nb],Object.getOwnPropertyDescriptor(ub.prototype,"join"),ub.prototype),fa(ub.prototype,"leave",[Nb],Object.getOwnPropertyDescriptor(ub.prototype,"leave"),ub.prototype),fa(ub.prototype,"sendMessage",[Nb],Object.getOwnPropertyDescriptor(ub.prototype,"sendMessage"),ub.prototype),fa(ub.prototype,"getMembers",[La],Object.getOwnPropertyDescriptor(ub.prototype,"getMembers"),ub.prototype),ub),z,Eb=S.ConnectionChangeReason,T=S.ConnectionState,ls={DISCONNECTED:1,CONNECTING:2,CONNECTED:3,RECONNECTING:4,ABORTED:5},mD={LOGIN:1,LOGIN_SUCCESS:2,LOGIN_FAILURE:3,LOGIN_TIMEOUT:4,INTERRUPTED:5,LOGOUT:6,BANNED_BY_SERVER:7,REMOTE_LOGIN:8},nD=(z=function(e){function t(e,i,o,a){X(this,t);var s=r.call(this,i,"RtmClient",!0);return m(n(s),"connectionState",T.DISCONNECTED),m(n(s),"internalEmitter",new ea),m(n(s),"context",void 0),m(n(s),"attributes",{}),m(n(s),"loginPromise",void 0),m(n(s),"attributeDrafts",new Set),m(n(s),"session",void 0),m(n(s),"lastLoginTime",void 0),m(n(s),"reconnId",0),m(n(s),"channelAttributesCacheLru",new tc(void 0,{maxlen:1e4})),m(n(s),"invitationManager",void 0),m(n(s),"subscribedPeerStatusCache",{}),m(n(s),"peerStatusSeqLru",new tc(void 0,{maxlen:1e4})),m(n(s),"peerUnreachableTimers",{}),m(n(s),"mediaTaskManager",void 0),m(n(s),"setParameters",void 0),m(n(s),"updateConfig",void 0),m(n(s),"userDropHandler",(function(e){if(s.connectionState!==T.ABORTED)switch(e){case 11:s.logError("Kicked off by remote session"),s.onConnectionStateChanged(T.ABORTED,Eb.REMOTE_LOGIN);break;case 14:case 15:case 16:s.logError("Server banned because of illegal ".concat({14:"User ID",15:"IP",16:"Channel Name"}[e])),s.onConnectionStateChanged(T.ABORTED,Eb.BANNED_BY_SERVER);break;default:s.logError("User kicked off for unknown code: ".concat(e)),s.onConnectionStateChanged(T.ABORTED,Eb.INTERRUPTED)}})),s.context=new YC(e,o,i),s.mediaTaskManager=new cs(i),s.context.config=o,s.internalEmitter.setMaxListeners(512),s.setParameters=a.bind(n(s)),s.updateConfig=a.bind(n(s)),s.invitationManager=new jD((function(){return s.session}),i),s.invitationManager.on("remoteInvitationInstance",(function(e){s.emit("RemoteInvitationReceived",e)})),s}la(t,e);var r=ma(t);return Ha(t,[{key:"renewToken",value:function(){var e=K(x.mark((function e(t){var n,r,i,o=this;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t&&0!==t.length){e.next=2;break}throw new L("Invalid argument",pA);case 2:if(this.connectionState!==T.ABORTED){e.next=5;break}return e.next=5,new Promise((function(){}));case 5:if(this.connectionState===T.CONNECTED||this.connectionState===T.RECONNECTING){e.next=7;break}throw new M("The client is not logged in",sA);case 7:if(void 0!==this.session){e.next=9;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 9:return e.prev=9,n=this.context.token,this.context.token=t,e.next=14,this.session.connection.apClient.getApEdgeInfo$(!1).pipe(Dd((function(){return Error("No available edge address to connect")})),ne((function(e){return e.pipe(ca((function(e){if(sa(e))throw e})),bd(1500),Oa(4))})),Oa(1),hb(1e4),Ga((function(e){return Sa(e)&&o.warn("renewToken timed out"),Y(e)}))).toPromise();case 14:r=e.sent,i=r.ticket,e.next=27;break;case 18:if(e.prev=18,e.t0=e.catch(9),this.context.token=n,e.t0.code!==Yq&&e.t0.code!==Zq){e.next=23;break}throw new Xe("Invalid token",rA);case 23:if(e.t0.code!==Jh){e.next=25;break}throw new Xe("The token expired",qA);case 25:if(!Sa(e.t0)){e.next=27;break}throw new cb("Renew token timed out",oA);case 27:this.session.curLoginSockets.filter((function(e){return void 0!==e})).forEach((function(e){return e.ticket=i}));case 28:case"end":return e.stop()}}),e,this,[[9,18]])})));return function(t){return e.apply(this,arguments)}}()},{key:"queryPeersOnlineStatus",value:function(){var e=K(x.mark((function e(t){var n,r,i=this;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connectionState===T.CONNECTED){e.next=2;break}throw new M("The client is not logged in",nA);case 2:if(void 0!==this.session){e.next=4;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:if(!(!Array.isArray(t)||0===t.length||t.some((function(e){return!za(e)}))||256<t.length)){e.next=6;break}throw new L("invalid arguments",cr);case 6:return e.next=8,this.session.requestPeersOnlineStatus(t).toPromise();case 8:return n=e.sent,r=uc(Ik(n.userInfos,"account"),(function(e){return!!e.ts})),Object.keys(r).forEach((function(e){if(e in i.subscribedPeerStatusCache&&i.subscribedPeerStatusCache[e]!==S.PeerOnlineState.UNREACHABLE){var t=r[e]?S.PeerOnlineState.ONLINE:S.PeerOnlineState.OFFLINE;i.emit("PeersOnlineStatusChanged",m({},e,t)),i.subscribedPeerStatusCache[e]=t}})),e.abrupt("return",r);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getChannelMemberCount",value:function(){var e=K(x.mark((function e(t){var n,r,i,o,a,s,c,u=this;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connectionState===T.CONNECTED){e.next=2;break}throw new M("The client is not logged in",Zz);case 2:if(void 0!==this.session){e.next=4;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:if(Array.isArray(t)&&t.every((function(e){return"string"==typeof e}))&&0!==t.length){e.next=6;break}throw new L("Invalid arguments: channelIds",Mq);case 6:if(!(32<t.length)){e.next=8;break}throw new L("getChannelMemberCount exceed limit of 32 channelIds",Yz);case 8:n=0;case 9:if(!(n<t.length)){e.next=16;break}if(za(r=t[n])){e.next=13;break}throw new L(["getChannelMemberCount channel id %s is invalid",r],Mq);case 13:n++,e.next=9;break;case 16:return e.next=18,this.session.requestGetChannelMemberCount(t).toPromise();case 18:for(i=e.sent,o=i.groupInfos,a={},s=function(e){var t=(e=o[e]).group,n=e.memberCount;za(t)&&"number"==typeof n&&(u.session.joinedChannels.forEach((function(e){e.channelId===t&&e.onMemberCountUpdated(n)})),a[t]=n)},c=0;c<o.length;c++)s(c);return e.abrupt("return",a);case 24:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setLocalUserAttributes",value:function(){var e=K(x.mark((function e(t){var n,r;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(uf({attributes:t,maxAttrValueSize:8192,maxAttrsCount:32,maxTotalSize:16384}),this.connectionState===T.CONNECTED){e.next=3;break}throw new M("The client is not logged in",Ub);case 3:if(void 0!==this.session){e.next=5;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 5:return n=this.session.requestSetLocalUserAttributes(t).toPromise(),r={attribute:t,promise:n},this.attributeDrafts.add(r),e.prev=8,e.next=11,n;case 11:this.attributes=t,e.next=19;break;case 14:if(e.prev=14,e.t0=e.catch(8),!sa(e.t0)){e.next=18;break}throw e.t0;case 18:throw new L("arguments is not valid",Ja);case 19:return e.prev=19,this.attributeDrafts.delete(r),e.finish(19);case 22:case"end":return e.stop()}}),e,this,[[8,14,19,22]])})));return function(t){return e.apply(this,arguments)}}()},{key:"setChannelAttributes",value:function(){var e=K(x.mark((function e(t,n){var r,i,o,a,s,c=arguments;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=2<c.length&&void 0!==c[2]?c[2]:{},i=r.enableNotificationToChannelMembers,o=void 0!==i&&i,uf({attributes:n,maxAttrValueSize:8192,maxAttrsCount:32,maxTotalSize:32768}),this.connectionState===T.CONNECTED){e.next=4;break}throw new M("The client is not logged in",Ub);case 4:if(void 0!==this.session){e.next=6;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 6:return a=this.session.requestSetChannelAttributes(t,n,o).toPromise(),e.prev=7,e.next=10,a;case 10:s=uc(n,(function(e){return new Blob([e]).size})),this.channelAttributesCacheLru.set(t,s),e.next=19;break;case 14:if(e.prev=14,e.t0=e.catch(7),!sa(e.t0)){e.next=18;break}throw e.t0;case 18:throw new L("arguments is not valid",Ja);case 19:case"end":return e.stop()}}),e,this,[[7,14]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"addOrUpdateLocalUserAttributes",value:function(){var e=K(x.mark((function e(t){var n,r,i;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=ua(ua({},this.attributes),t),uf({attributes:t,maxAttrValueSize:8192,maxAttrsCount:32,maxTotalSize:16384}),uf({attributes:n,maxAttrValueSize:8192,maxAttrsCount:32,maxTotalSize:16384}),this.connectionState===T.CONNECTED){e.next=5;break}throw new M("The client is not logged in",Ub);case 5:if(void 0!==this.session){e.next=7;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 7:return r=this.session.requestAddOrUpdateLocalUserAttributes(t).toPromise(),i={attribute:n,promise:r},this.attributeDrafts.add(i),e.prev=10,e.next=13,r;case 13:this.attributes=n,e.next=21;break;case 16:if(e.prev=16,e.t0=e.catch(10),!sa(e.t0)){e.next=20;break}throw e.t0;case 20:throw new L("arguments is not valid",cr);case 21:return e.prev=21,this.attributeDrafts.delete(i),e.finish(21);case 24:case"end":return e.stop()}}),e,this,[[10,16,21,24]])})));return function(t){return e.apply(this,arguments)}}()},{key:"addOrUpdateChannelAttributes",value:function(){var e=K(x.mark((function e(t,n){var r,i,o,a,s,c,u,l=arguments;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=2<l.length&&void 0!==l[2]?l[2]:{},i=r.enableNotificationToChannelMembers,o=void 0!==i&&i,a=this.channelAttributesCacheLru.get(t,{}),s=uc(n,(function(e){return new Blob([e]).size})),c=ua(ua({},a),s),uf({attributes:n,attrSizeMap:c,maxAttrValueSize:8192,maxAttrsCount:32,maxTotalSize:32768}),this.connectionState===T.CONNECTED){e.next=7;break}throw new M("The client is not logged in",Ub);case 7:if(void 0!==this.session){e.next=9;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 9:return u=this.session.requestAddOrUpdateChannelAttributes(t,n,o).toPromise(),e.prev=10,e.next=13,u;case 13:this.channelAttributesCacheLru.set(t,c),e.next=21;break;case 16:if(e.prev=16,e.t0=e.catch(10),!sa(e.t0)){e.next=20;break}throw e.t0;case 20:throw new L("arguments is not valid",Ja);case 21:case"end":return e.stop()}}),e,this,[[10,16]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"deleteLocalUserAttributesByKeys",value:function(){var e=K(x.mark((function e(t){var n,r,i,o;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Array.isArray(t)&&0!==t.length&&!t.some((function(e){return 0===e.length}))){e.next=2;break}throw new M("arguments is not valid",Ja);case 2:if(this.connectionState===T.CONNECTED){e.next=4;break}throw new M("The client is not logged in",Ub);case 4:if(void 0!==this.session){e.next=6;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 6:return n=this.session.requestDeleteLocalUserAttributesByKeys(t).toPromise(),r={attribute:Fk(this.attributes,t),promise:n},this.attributeDrafts.add(r),e.prev=9,e.next=12,n;case 12:for(i=0;i<t.length;i++)o=t[i],delete this.attributes[o];e.next=20;break;case 15:if(e.prev=15,e.t0=e.catch(9),!sa(e.t0)){e.next=19;break}throw e.t0;case 19:throw new L("arguments is not valid",Ja);case 20:return e.prev=20,this.attributeDrafts.delete(r),e.finish(20);case 23:case"end":return e.stop()}}),e,this,[[9,15,20,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteChannelAttributesByKeys",value:function(){var e=K(x.mark((function e(t,n){var r,i,o,a,s,c,u,l=arguments;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=2<l.length&&void 0!==l[2]?l[2]:{},i=r.enableNotificationToChannelMembers,o=void 0!==i&&i,Array.isArray(n)&&0!==n.length&&za(t)&&!n.some((function(e){return 0===e.length||512<e.length}))){e.next=3;break}throw new M("arguments is not valid",Ja);case 3:if(this.connectionState===T.CONNECTED){e.next=5;break}throw new M("The client is not logged in",Ub);case 5:if(void 0!==this.session){e.next=7;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 7:return a=this.session.requestDeleteChannelAttributesByKeys(t,n,o).toPromise(),e.prev=8,e.next=11,a;case 11:if(s=this.channelAttributesCacheLru.get(t))for(c=0;c<n.length;c++)u=n[c],delete s[u];e.next=20;break;case 15:if(e.prev=15,e.t0=e.catch(8),!sa(e.t0)){e.next=19;break}throw e.t0;case 19:throw new L("arguments is not valid",Ja);case 20:case"end":return e.stop()}}),e,this,[[8,15]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"clearLocalUserAttributes",value:function(){var e=K(x.mark((function e(){var t,n;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connectionState===T.CONNECTED){e.next=2;break}throw new M("The client is not logged in",Ub);case 2:if(void 0!==this.session){e.next=4;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:return t=this.session.requestClearLocalUserAttributes().toPromise(),n={attribute:{},promise:t},this.attributeDrafts.add(n),e.prev=7,e.next=10,t;case 10:this.attributes={},e.next=18;break;case 13:if(e.prev=13,e.t0=e.catch(7),!sa(e.t0)){e.next=17;break}throw e.t0;case 17:throw new L("arguments is not valid",Ja);case 18:return e.prev=18,this.attributeDrafts.delete(n),e.finish(18);case 21:case"end":return e.stop()}}),e,this,[[7,13,18,21]])})));return function(){return e.apply(this,arguments)}}()},{key:"clearChannelAttributes",value:function(){var e=K(x.mark((function e(t){var n,r,i,o,a=arguments;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=1<a.length&&void 0!==a[1]?a[1]:{},r=n.enableNotificationToChannelMembers,i=void 0!==r&&r,this.connectionState===T.CONNECTED){e.next=3;break}throw new M("The client is not logged in",Ub);case 3:if(void 0!==this.session){e.next=5;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 5:return o=this.session.requestClearChannelAttributes(t,i).toPromise(),e.prev=6,e.next=9,o;case 9:this.channelAttributesCacheLru.delete(t),e.next=17;break;case 12:if(e.prev=12,e.t0=e.catch(6),!sa(e.t0)){e.next=16;break}throw e.t0;case 16:throw new L("arguments is not valid",Ja);case 17:case"end":return e.stop()}}),e,this,[[6,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getUserAttributes",value:function(){var e=K(x.mark((function e(t){var n,r,i;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(za(t)){e.next=2;break}throw new L("Not a valid user ID",Ja);case 2:if(this.connectionState===T.CONNECTED){e.next=4;break}throw new M("The client is not logged in",Ub);case 4:if(void 0!==this.session){e.next=6;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 6:return e.prev=6,e.next=9,this.session.requestGetUserAttributeKeys(t).toPromise();case 9:return n=e.sent,r=n.keys,e.next=13,this.session.requestGetUserAttributesByKeys(t,r.slice(0,512)).toPromise();case 13:i=e.sent,e.next=21;break;case 16:if(e.prev=16,e.t0=e.catch(6),!sa(e.t0)){e.next=20;break}throw e.t0;case 20:throw new L("arguments is not valid",Ja);case 21:return e.abrupt("return",Wp(i.attributeInfos.map((function(e){return[e.key,e.value]}))));case 22:case"end":return e.stop()}}),e,this,[[6,16]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getChannelAttributes",value:function(){var e=K(x.mark((function e(t){var n,r,i,o,a,s,c,u,l,h,d;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(za(t)){e.next=2;break}throw new L("Not a valid channel ID",Ja);case 2:if(this.connectionState===T.CONNECTED){e.next=4;break}throw new M("The client is not logged in",Ub);case 4:if(void 0!==this.session){e.next=6;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 6:return e.prev=6,e.next=9,this.session.requestGetChannelAttributesKeys(t).toPromise();case 9:return n=e.sent,r=n.keys,e.next=13,this.session.requestGetChannelAttributesByKeys(t,r).toPromise();case 13:i=e.sent,o=i.attributeMaps,e.next=22;break;case 17:if(e.prev=17,e.t0=e.catch(6),!sa(e.t0)){e.next=21;break}throw e.t0;case 21:throw new L("arguments is not valid",Ja);case 22:a={},s=0;case 24:if(!(s<o.length)){e.next=32;break}if(c=o[s],u=c.key,l=c.ms,h=c.value,d=c.origin,"string"==typeof u&&U.isLong(l)&&"string"==typeof h&&za(d)){e.next=28;break}return e.abrupt("break",32);case 28:a[u]={value:h,lastUpdateUserId:d,lastUpdateTs:l.toNumber()};case 29:s++,e.next=24;break;case 32:return this.channelAttributesCacheLru.set(t,uc(a,(function(e){return new Blob([e.value]).size}))),e.abrupt("return",a);case 34:case"end":return e.stop()}}),e,this,[[6,17]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getChannelAttributesByKeys",value:function(){var e=K(x.mark((function e(t,n){var r,i,o,a,s,c,u,l,h,d;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connectionState===T.CONNECTED){e.next=2;break}throw new M("The client is not logged in",Ub);case 2:if(void 0!==this.session){e.next=4;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:return Gm(t,n),e.prev=5,e.next=8,this.session.requestGetChannelAttributesByKeys(t,n).toPromise();case 8:r=e.sent,i=r.attributeMaps,e.next=17;break;case 12:if(e.prev=12,e.t0=e.catch(5),!sa(e.t0)){e.next=16;break}throw e.t0;case 16:throw new L("arguments is not valid",Ja);case 17:o={},a=this.channelAttributesCacheLru.get(t,{}),s=0;case 20:if(!(s<i.length)){e.next=29;break}if(c=i[s],u=c.key,l=c.ms,h=c.value,d=c.origin,"string"==typeof u&&U.isLong(l)&&"string"==typeof h&&za(d)){e.next=24;break}return e.abrupt("break",29);case 24:a[u]=new Blob([h]).size,o[u]={value:h,lastUpdateUserId:d,lastUpdateTs:l.toNumber()};case 26:s++,e.next=20;break;case 29:return this.channelAttributesCacheLru.set(t,a),e.abrupt("return",o);case 31:case"end":return e.stop()}}),e,this,[[5,12]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getUserAttributesByKeys",value:function(){var e=K(x.mark((function e(t,n){var r;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connectionState===T.CONNECTED){e.next=2;break}throw new M("The client is not logged in",Ub);case 2:if(void 0!==this.session){e.next=4;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:return Gm(t,n),e.prev=5,e.next=8,this.session.requestGetUserAttributesByKeys(t,n).toPromise();case 8:r=e.sent,e.next=16;break;case 11:if(e.prev=11,e.t0=e.catch(5),!sa(e.t0)){e.next=15;break}throw e.t0;case 15:throw new L("arguments is not valid",Ja);case 16:return e.abrupt("return",Wp(r.attributeInfos.map((function(e){return[e.key,e.value]}))));case 17:case"end":return e.stop()}}),e,this,[[5,11]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"login",value:function(){var e=K(x.mark((function e(t){var n,r,i,o=this;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Tk=!0,n=Bg(),r=t.token,t.token===this.context.appId&&(r=void 0),setTimeout((function(){db("Session",{appId:o.context.appId,did:navigator.userAgent,elapse:eb(o.session&&o.session.startTime),index:{index1:t.uid,index2:o.context.appId,index3:"enableLogUpload=".concat(o.context.config.enableLogUpload)},installId:gg,lts:U.fromNumber(Date.now()),os:7,sid:Xa(n),token:r||"",userId:t.uid,ver:"1.4.3",buildno:413,subVersion:13,version:4},null==y?void 0:y.EVENT_REPORT_DOMAIN[0],null==y?void 0:y.EVENT_REPORT_BACKUP_DOMAIN[0])}),6e3),yd(t)&&za(t.uid)){e.next=7;break}throw new L("not a valid user id",Ih);case 7:if("string"!=typeof r||!r){e.next=11;break}this.context.token=r,e.next=13;break;case 11:if("string"==typeof r||null==r){e.next=13;break}throw new L('The "token" is not a valid string.',Ih);case 13:return i=Date.now(),this.context.sid=Xa(n),this.loginPromise=this.loginImpl({uid:t.uid,instanceId:n}),this.info("RTM Client logging in as ".concat(oa(t.uid))),e.prev=17,e.next=20,this.loginPromise;case 20:e.next=27;break;case 22:throw e.prev=22,e.t0=e.catch(17),sa(e.t0)&&db("Link",{ackedServerIp:"",destServerIp:"",ec:e.t0.code||1,sc:e.t0.serverCode,elapse:eb(this.session&&this.session.startTime),lts:U.fromNumber(Date.now()),responseTime:Date.now()-i,sid:Xa(n),userId:t.uid},null==y?void 0:y.EVENT_REPORT_DOMAIN[0],null==y?void 0:y.EVENT_REPORT_BACKUP_DOMAIN[0]),this.context.token=void 0,e.t0;case 27:return e.prev=27,this.loginPromise=void 0,e.finish(27);case 30:Tk=!1;case 31:case"end":return e.stop()}}),e,this,[[17,22,27,30]])})));return function(t){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=K(x.mark((function e(){return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.loginPromise){e.next=3;break}return e.next=3,this.loginPromise;case 3:if(this.connectionState!==T.DISCONNECTED){e.next=6;break}throw this.logError("Already in logout state"),new M("Logout failure. The client has already been logged out",$q);case 6:if(this.connectionState!==T.ABORTED){e.next=10;break}return this.info('Reset connection state from "ABORTED" to "DISCONNECTED"'),this.onConnectionStateChanged(T.DISCONNECTED,Eb.LOGOUT),e.abrupt("return");case 10:if(void 0!==this.session){e.next=13;break}return this.onConnectionStateChanged(T.DISCONNECTED,Eb.LOGOUT),e.abrupt("return");case 13:return db("Logout",{elapse:eb(this.session.startTime),lts:U.fromNumber(Date.now()),sid:Xa(this.session.instanceId),userId:this.context.uid},null==y?void 0:y.EVENT_REPORT_DOMAIN[0],null==y?void 0:y.EVENT_REPORT_BACKUP_DOMAIN[0]),e.next=16,this.session.logoutHandler();case 16:this.onConnectionStateChanged(T.DISCONNECTED,Eb.LOGOUT),this.log("Log out success");case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"logoutSync",value:function(){var e=this;if(this.connectionState===T.DISCONNECTED)throw this.logError("Already in logout state"),new M("Logout failure. The client has already been logged out",$q);this.connectionState===T.ABORTED?this.info('Reset connection state from "ABORTED" to "DISCONNECTED"'):void 0!==this.session&&(db("Logout",{elapse:eb(this.session.startTime),lts:U.fromNumber(Date.now()),sid:Xa(this.session.instanceId),userId:this.context.uid},null==y?void 0:y.EVENT_REPORT_DOMAIN[0],null==y?void 0:y.EVENT_REPORT_BACKUP_DOMAIN[0]),this.session.logoutHandler().then((function(){e.log("Log out success")}))),this.onConnectionStateChanged(T.DISCONNECTED,Eb.LOGOUT)}},{key:"sendMessageToPeer",value:function(){var e=K(x.mark((function e(t,n){var r,i,o,a,s,c,u=this,l=arguments;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=2<l.length&&void 0!==l[2]?l[2]:{},i=r.enableOfflineMessaging,o=void 0!==i&&i,a=r.enableHistoricalMessaging,s=void 0!==a&&a,Sm(t,ue),this.connectionState!==T.RECONNECTING){e.next=5;break}return c=Date.now(),e.abrupt("return",new Promise((function(e,r){var i=function(){var i=K(x.mark((function i(){var l;return x.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(void 0!==u.session){i.next=2;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 2:return l=Date.now()-c,i.prev=3,i.t0=e,i.next=7,Fg({message:t,peerId:n,toPeer:!0,session:u.session,errorCodes:{NOT_LOGGED_IN:$k,TOO_OFTEN:br},diff:l,logger:u.logger,options:{enableHistoricalMessaging:s,enableOfflineMessaging:o}});case 7:i.t1=i.sent,(0,i.t0)(i.t1),i.next=16;break;case 11:i.prev=11,i.t2=i.catch(3),Sa(i.t2)&&r(new cb(Yd(u.name,"sendMessageToPeer",1e4),Yk)),sa(i.t2)&&r(i.t2),r(new da("Peer-to-peer message send failure",{code:ar,originalError:i.t2}));case 16:return i.prev=16,clearTimeout(a),i.finish(16);case 19:case"end":return i.stop()}}),i,null,[[3,11,16,19]])})));return function(){return i.apply(this,arguments)}}();u.internalEmitter.once("RECONNECTED",i);var a=setTimeout((function(){u.internalEmitter.off("RECONNECTED",i),r(new cb(Yd(u.name,"sendMessageToPeer",1e4),Yk))}),9e3)})));case 5:if(this.connectionState===T.CONNECTED){e.next=7;break}throw new M("Failed to send the peer-to-peer message. The client is not logged in",$k);case 7:if(void 0!==this.session){e.next=9;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 9:return e.prev=9,e.next=12,Fg({message:t,peerId:n,toPeer:!0,session:this.session,errorCodes:{NOT_LOGGED_IN:$k,TOO_OFTEN:br},diff:0,logger:this.logger,options:{enableHistoricalMessaging:s,enableOfflineMessaging:o}});case 12:return e.abrupt("return",e.sent);case 15:if(e.prev=15,e.t0=e.catch(9),!Sa(e.t0)){e.next=19;break}throw new cb(Yd(this.name,"sendMessageToPeer",1e4),Yk);case 19:if(!sa(e.t0)){e.next=21;break}throw e.t0;case 21:throw new da("Peer-to-peer message send failure",{code:ar,originalError:e.t0});case 22:case"end":return e.stop()}}),e,this,[[9,15]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createChannel",value:function(e){var t=this;if(!za(e))throw new L(["The %s in the arguments is invalid",Object.keys({channelId:e})[0]],Xz);return new lD(e,(function(){return t.session}),this,this.logger)}},{key:"createLocalInvitation",value:function(e){if(!za(e))throw new L(["The %s in the arguments is invalid",Object.keys({calleeId:e})[0]],xc);return this.invitationManager.genLocalInvitation(e)}},{key:"subscribePeersOnlineStatus",value:function(){var e=K(x.mark((function e(t){var n,r,i,o,a,s,c,u,l,h,d,f,p,g=this;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connectionState===T.CONNECTED){e.next=2;break}throw new M("The client is not logged in",al);case 2:if(void 0!==this.session){e.next=4;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:if(Array.isArray(t)&&0!==t.length){e.next=6;break}throw new L("Invalid arguments: peerIds",kg);case 6:n=0;case 7:if(!(n<t.length)){e.next=14;break}if(za(r=t[n])){e.next=11;break}throw new L(["subscribePeersOnlineStatus peer id %s is invalid",r],kg);case 11:n++,e.next=7;break;case 14:if(!(512<(i=t&&t.length?uk(t):[]).length+Object.keys(this.subscribedPeerStatusCache).length)){e.next=17;break}throw new ib("Subscribed peers overflows",er);case 17:return e.next=19,this.session.requestSubscribePeersOnlineStatus(i).toPromise();case 19:o=e.sent,a=o.errors,s=[],c=[],u=0;case 24:if(!(u<a.length)){e.next=32;break}if(l=a[u],h=l.code,"string"==typeof(d=l.account)){e.next=28;break}throw new da("Returned account is invalid",dr);case 28:0!==h&&s.push(d);case 29:u++,e.next=24;break;case 32:for(f=0;f<i.length;f++)p=i[f],s.includes(p)||(c.push(p),this.subscribedPeerStatusCache[p]=void 0);if(this.session.requestPeersOnlineStatus(c).pipe(ba((function(e){return uc(Ik(e.userInfos,"account"),(function(e){return!!e.ts}))}))).subscribe((function(e){e=uc(e,(function(e,t){return e=e?S.PeerOnlineState.ONLINE:S.PeerOnlineState.OFFLINE,g.subscribedPeerStatusCache[t]=e})),g.emit("PeersOnlineStatusChanged",e)})),0===s.length){e.next=36;break}throw new da("Subscription failed",dr);case 36:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"unsubscribePeersOnlineStatus",value:function(){var e=K(x.mark((function e(t){var n,r,i,o,a;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connectionState===T.CONNECTED){e.next=2;break}throw new M("The client is not logged in",al);case 2:if(void 0!==this.session){e.next=4;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:if(Array.isArray(t)&&0!==t.length){e.next=6;break}throw new L("Invalid arguments: peerIds",kg);case 6:n=0;case 7:if(!(n<t.length)){e.next=14;break}if(za(r=t[n])){e.next=11;break}throw new L(["subscribePeersOnlineStatus peer id %s is invalid",r],kg);case 11:n++,e.next=7;break;case 14:if(!(512<t.length)){e.next=16;break}throw new ib("Unsubscribed peers overflows",er);case 16:for(i=t&&t.length?uk(t):[],this.session.requestUnsubscribePeersOnlineStatus(i),o=0;o<i.length;o++)a=i[o],delete this.subscribedPeerStatusCache[a];case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queryPeersBySubscriptionOption",value:function(){var e=K(x.mark((function e(t){return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connectionState===T.CONNECTED){e.next=2;break}throw new M("The client is not logged in",al);case 2:if(t!==S.PeerSubscriptionOption.ONLINE_STATUS){e.next=4;break}return e.abrupt("return",Object.keys(this.subscribedPeerStatusCache));case 4:throw new L("Subscription option not supported",kg);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createMessage",value:function(e){return"IMAGE"===e.messageType?ua({width:0,height:0,fileName:"",description:"",thumbnail:new Blob,thumbnailWidth:0,thumbnailHeight:0,size:0},e):"FILE"===e.messageType?ua({fileName:"",description:"",thumbnail:new Blob,size:0},e):e}},{key:"downloadMedia",value:function(){var e=K(x.mark((function e(t){var n,r,i,o,a,s,c,u,l,h,d,f,p,g,A=this,v=arguments;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=1<v.length&&void 0!==v[1]?v[1]:{},"string"==typeof t){e.next=3;break}throw new L("invalid mediaId format",bl);case 3:if(e.prev=3,r=t.split("z"),i=ra(r,3),o=i[0],a=i[1],s=i[2],c=o.slice(1,65),u=aD(c),l=parseInt(o.slice(65),10),h=parseInt(a,10),d=parseInt(s,10),!(Number.isNaN(l)||Number.isNaN(h)||Number.isNaN(d))){e.next=12;break}throw new L("Invalid mediaId content",bl);case 12:e.next=19;break;case 14:if(e.prev=14,e.t0=e.catch(3),!sa(e.t0)){e.next=18;break}throw e.t0;case 18:throw new L("parse mediaId failure",{code:bl,originalError:e.t0});case 19:if(this.connectionState===T.CONNECTED){e.next=21;break}throw new M("The client is not logged in, cannot download",AA);case 21:if(void 0!==this.session){e.next=23;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 23:return f=this.mediaTaskManager.addDownloadTask({unit:h,zone:l,hashHexStr:c,size:d},(function(){if(void 0===A.session)throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});return A.session.requestFileDownloadIndexGet({hash:u,zone:l,unit:h,size:d}).toPromise()}),n),e.next=26,this.mediaTaskManager.waitMediaTask(f);case 26:return p=e.sent,g=p.payload,e.abrupt("return",g);case 29:case"end":return e.stop()}}),e,this,[[3,14]])})));return function(t){return e.apply(this,arguments)}}()},{key:"createMediaMessageByUploading",value:function(){var e=K(x.mark((function e(t){var n,r,i,o,a,s,c,u,l,h,d,f,p,g,A,v,m,y,b,_,E,w,I,C,S=this,R=arguments;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=1<R.length&&void 0!==R[1]?R[1]:{},r=2<R.length&&void 0!==R[2]?R[2]:{},yd(n)){e.next=4;break}throw new L("Invalid params",wf);case 4:if(i="thumbnailWidth"in n||"thumbnailHeight"in n||"width"in n||"height"in n,o=n.messageType,a=void 0===o?i?"IMAGE":"FILE":o,s=n.description,c=void 0===s?"":s,u=n.fileName,l=void 0===u?"":u,h=n.thumbnail,"string"==typeof n.messageType&&"string"==typeof c&&"string"==typeof l&&(Om(h)||void 0===h)&&Om(t)){e.next=8;break}throw new L("Invalid message params type",wf);case 8:if(!i||"FILE"!==a){e.next=10;break}throw new L("Invalid message params, unexpected field in RtmFileMessage",wf);case 10:if(!(33554432<(d=t.size))){e.next=13;break}throw new ib("The payload size overflow 32 MB",uA);case 13:return e.next=15,Ii(t);case 15:return f=e.sent,e.next=18,$C(f);case 18:if(p=e.sent,this.connectionState===T.CONNECTED){e.next=21;break}throw new M("The client is not logged in",wA);case 21:if("IMAGE"!==a){e.next=29;break}return e.next=24,Vt(n,f);case 24:g=e.sent,A=g.height,v=g.width,m=g.thumbnailWidth,y=g.thumbnailHeight;case 29:return b=this.mediaTaskManager.addUploadTask({file:new Uint8Array(f),hash:p},(function(){if(void 0===S.session)throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});return S.session.fetchFileUploadIndexGet({hash:p,size:d})}),(function(e,t){if(void 0===S.session)throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});return S.session.requestFileUploadIndexSet({hash:p,unit:e,servers:t}).toPromise()}),r),e.next=32,this.mediaTaskManager.waitMediaTask(b);case 32:if(_=e.sent,E=_.zone,w=_.retUnit,"IMAGE"!==a){e.next=38;break}return I={height:A,width:v,fileName:l,size:d,description:c,thumbnail:h,messageType:a,thumbnailWidth:m,thumbnailHeight:y,mediaId:"0".concat(Xr(p)).concat(E,"z").concat(w,"z").concat(d,"z").concat(A,"z").concat(v)},e.abrupt("return",I);case 38:return C={fileName:l,size:d,description:c,mediaId:"0".concat(Xr(p)).concat(E,"z").concat(w,"z").concat(d),thumbnail:h,messageType:a},e.abrupt("return",C);case 40:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loginImpl",value:function(){var e=K(x.mark((function e(t){var n,r,i,o,a=this;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.uid,r=t.instanceId,!(void 0!==this.lastLoginTime&&500>Date.now()-this.lastLoginTime)){e.next=4;break}throw new qC(["The frequency of login exceeded the limit of %d queries per second",2],kA);case 4:if(this.connectionState===T.DISCONNECTED){e.next=6;break}throw new M("The SDK is either logging in or has logged in the Agora RTM system",iA);case 6:e.prev=6,this.context.uid=n,e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(6),new L(["The %s in the arguments is invalid",Object.keys({uid:n})[0]],Ih);case 13:return this.onConnectionStateChanged(T.CONNECTING,Eb.LOGIN),this.session=i=new is(this.context,new Vr(this.context,this.logger,!1),r,this.logger),o=function(){a.connectionState===T.CONNECTED&&(a.onConnectionStateChanged(T.RECONNECTING,Eb.INTERRUPTED),a.session)&&a.session.once("userJoined",(function(){a.onConnectionStateChanged(T.CONNECTED,Eb.LOGIN_SUCCESS)}))},i.on("connectionLost",o),i.on("tokenExpired",(function(){a.emit("TokenExpired")})),i.once("userDrop",this.userDropHandler),this.session.on("peerTextMessage",(function(e){a.emit("MessageFromPeer",{text:e.text,messageType:S.MessageType.TEXT},e.peerId,e.properties)})),this.session.on("peerMediaMessage",(function(e){var t=e.peerId,n=e.properties,r=e.messageType;e=e.details,"FILE"===r?a.emit("MessageFromPeer",{messageType:S.MessageType.FILE,size:parseInt(pa(e.media_size),10),description:pa(e.media_description),fileName:pa(e.media_filename),mediaId:pa(e.media_id),thumbnail:new Blob([e.media_thumbnail])},t,n):"IMAGE"===r&&a.emit("MessageFromPeer",{messageType:S.MessageType.IMAGE,size:parseInt(pa(e.media_size),10),description:pa(e.media_description),fileName:pa(e.media_filename),mediaId:pa(e.media_id),thumbnail:new Blob([e.media_thumbnail]),height:parseInt(pa(e.media_height),10),width:parseInt(pa(e.media_width),10),thumbnailHeight:parseInt(pa(e.media_thumbnailheight),10),thumbnailWidth:parseInt(pa(e.media_thumbnailwidth),10)},t,n)})),this.session.on("peerRawMessage",(function(e){a.emit("MessageFromPeer",{rawMessage:e.raw,description:e.desc,messageType:S.MessageType.RAW},e.peerId,e.properties)})),i.on("instanceChanged",(function(e){return r=e})),i.on("peerOnlineStatusChanged",(function(e){var t=e.instance.toString()+e.state,n=a.peerStatusSeqLru.get(t);!n||e.seq.greaterThan(n)?(a.peerStatusSeqLru.set(t,e.seq),e.state!==a.subscribedPeerStatusCache[e.peerId]&&a.emit("PeersOnlineStatusChanged",m({},e.peerId,e.state)),a.subscribedPeerStatusCache[e.peerId]=e.state,clearTimeout(a.peerUnreachableTimers[t]),e.state===S.PeerOnlineState.UNREACHABLE&&(a.peerUnreachableTimers[t]=setTimeout((function(){a.subscribedPeerStatusCache[e.peerId]===S.PeerOnlineState.UNREACHABLE&&(a.subscribedPeerStatusCache[e.peerId]=S.PeerOnlineState.ONLINE,a.emit("PeersOnlineStatusChanged",m({},e.peerId,S.PeerOnlineState.ONLINE)))}),3e4))):a.log("peerOnlineStatusChanged dedup for %s, %d",t,e.seq.toNumber())})),i.on("invitationMessage",this.invitationManager.invitationMessageHandler.bind(this.invitationManager)),i.on("channelAttributesUpdated",(function(e){var t=e.channelId;e=e.attributeMaps;for(var n={},r=0;r<e.length;r++){var i=e[r],o=i.key,s=i.ms,c=i.value;if(i=i.origin,"string"!=typeof o||!U.isLong(s)||"string"!=typeof c||!za(i))break;n[o]=new Blob([c]).size}a.channelAttributesCacheLru.set(t,n)})),i.on("userJoined",(function(e){if(0!==Object.keys(a.attributes).length){if(void 0===a.session)return;a.session.requestSetLocalUserAttributes(a.attributes,e).toPromise()}if(0!==a.attributeDrafts.size)for(var t=function(t,n){var r=(t=n[t]).attribute;t.promise.then((function(){void 0!==a.session&&a.session.requestSetLocalUserAttributes(r,e).toPromise()}))},n=0,r=Array.from(a.attributeDrafts);n<r.length;n++)t(n,r);0!==Object.keys(a.subscribedPeerStatusCache).length&&i.requestSubscribePeersOnlineStatus(Object.keys(a.subscribedPeerStatusCache))})),this.lastLoginTime=Date.now(),e.prev=29,e.next=32,i.loginHandler().toPromise();case 32:this.mediaTaskManager.setAuthInfo({ticket:i.connection.curOpenSockets.filter((function(e){return void 0!==e}))[0].ticket,instance:i.instanceId,useNewDomain:.5<=Math.random(),loginOpt:i.userJoinOptions.toLong()}),e.next=44;break;case 35:if(e.prev=35,e.t1=e.catch(29),!Sa(e.t1)){e.next=40;break}throw this.onConnectionStateChanged(T.DISCONNECTED,Eb.LOGIN_TIMEOUT),new cb(Yd(this.name,"login",1e4),jA);case 40:if(this.onConnectionStateChanged(T.DISCONNECTED,Eb.LOGIN_FAILURE),!sa(e.t1)){e.next=43;break}throw e.t1;case 43:throw new da("Login failure",{code:Xq,originalError:e.t1});case 44:this.onConnectionStateChanged(T.CONNECTED,Eb.LOGIN_SUCCESS);case 45:case"end":return e.stop()}}),e,this,[[6,10],[29,35]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onConnectionStateChanged",value:function(e,t){var n=this;e===T.RECONNECTING&&(this.reconnId+=1),db("ConnectionStateChange",{elapse:eb(this.session&&this.session.startTime),lts:U.fromNumber(Date.now()),newState:ls[e],oldState:ls[this.connectionState],reason:mD[t],sid:Xa(this.session&&this.session.instanceId||U.fromNumber(0)),userId:this.context.uid,reconnId:this.reconnId},null==y?void 0:y.EVENT_REPORT_DOMAIN[0],null==y?void 0:y.EVENT_REPORT_BACKUP_DOMAIN[0]),this.connectionState===T.RECONNECTING&&e===T.CONNECTED&&(0!==Object.keys(this.subscribedPeerStatusCache).length&&void 0!==this.session&&this.session.requestPeersOnlineStatus(Object.keys(this.subscribedPeerStatusCache)).pipe(ba((function(e){return uc(Ik(e.userInfos,"account"),(function(e){return!!e.ts}))}))).subscribe((function(e){e=uc(e,(function(e,t){return e=e?S.PeerOnlineState.ONLINE:S.PeerOnlineState.OFFLINE,n.subscribedPeerStatusCache[t]=e})),n.emit("PeersOnlineStatusChanged",e)})),this.internalEmitter.emit("RECONNECTED")),this.connectionState=e,e!==T.ABORTED&&e!==T.DISCONNECTED||(this.reconnId=0,this.attributes={},this.session&&(this.session.removeAllListeners(),this.session.joinedChannels.clear(),this.session.msgDedupLru.empty(),this.session.dialogueSequenceLru.empty(),this.session.dialPendingMsgSubjectMap.clear()),this.session=void 0,this.channelAttributesCacheLru.empty(),this.peerStatusSeqLru.empty(),this.peerUnreachableTimers={},this.subscribedPeerStatusCache={},this.attributeDrafts.clear(),this.context.token=void 0),this.mediaTaskManager.emit("connectionStateChanged",e),this.emit("ConnectionStateChanged",e,t)}}]),t}(tb()),fa(z.prototype,"renewToken",[La],Object.getOwnPropertyDescriptor(z.prototype,"renewToken"),z.prototype),fa(z.prototype,"queryPeersOnlineStatus",[La],Object.getOwnPropertyDescriptor(z.prototype,"queryPeersOnlineStatus"),z.prototype),fa(z.prototype,"getChannelMemberCount",[La],Object.getOwnPropertyDescriptor(z.prototype,"getChannelMemberCount"),z.prototype),fa(z.prototype,"setLocalUserAttributes",[La],Object.getOwnPropertyDescriptor(z.prototype,"setLocalUserAttributes"),z.prototype),fa(z.prototype,"setChannelAttributes",[La],Object.getOwnPropertyDescriptor(z.prototype,"setChannelAttributes"),z.prototype),fa(z.prototype,"addOrUpdateLocalUserAttributes",[La],Object.getOwnPropertyDescriptor(z.prototype,"addOrUpdateLocalUserAttributes"),z.prototype),fa(z.prototype,"addOrUpdateChannelAttributes",[La],Object.getOwnPropertyDescriptor(z.prototype,"addOrUpdateChannelAttributes"),z.prototype),fa(z.prototype,"deleteLocalUserAttributesByKeys",[La],Object.getOwnPropertyDescriptor(z.prototype,"deleteLocalUserAttributesByKeys"),z.prototype),fa(z.prototype,"deleteChannelAttributesByKeys",[La],Object.getOwnPropertyDescriptor(z.prototype,"deleteChannelAttributesByKeys"),z.prototype),fa(z.prototype,"clearLocalUserAttributes",[Nb],Object.getOwnPropertyDescriptor(z.prototype,"clearLocalUserAttributes"),z.prototype),fa(z.prototype,"clearChannelAttributes",[La],Object.getOwnPropertyDescriptor(z.prototype,"clearChannelAttributes"),z.prototype),fa(z.prototype,"getUserAttributes",[La],Object.getOwnPropertyDescriptor(z.prototype,"getUserAttributes"),z.prototype),fa(z.prototype,"getChannelAttributes",[La],Object.getOwnPropertyDescriptor(z.prototype,"getChannelAttributes"),z.prototype),fa(z.prototype,"getChannelAttributesByKeys",[La],Object.getOwnPropertyDescriptor(z.prototype,"getChannelAttributesByKeys"),z.prototype),fa(z.prototype,"getUserAttributesByKeys",[La],Object.getOwnPropertyDescriptor(z.prototype,"getUserAttributesByKeys"),z.prototype),fa(z.prototype,"login",[Nb],Object.getOwnPropertyDescriptor(z.prototype,"login"),z.prototype),fa(z.prototype,"logout",[Nb],Object.getOwnPropertyDescriptor(z.prototype,"logout"),z.prototype),fa(z.prototype,"logoutSync",[Nb],Object.getOwnPropertyDescriptor(z.prototype,"logoutSync"),z.prototype),fa(z.prototype,"sendMessageToPeer",[La],Object.getOwnPropertyDescriptor(z.prototype,"sendMessageToPeer"),z.prototype),fa(z.prototype,"createChannel",[La],Object.getOwnPropertyDescriptor(z.prototype,"createChannel"),z.prototype),fa(z.prototype,"createLocalInvitation",[La],Object.getOwnPropertyDescriptor(z.prototype,"createLocalInvitation"),z.prototype),fa(z.prototype,"subscribePeersOnlineStatus",[La],Object.getOwnPropertyDescriptor(z.prototype,"subscribePeersOnlineStatus"),z.prototype),fa(z.prototype,"unsubscribePeersOnlineStatus",[La],Object.getOwnPropertyDescriptor(z.prototype,"unsubscribePeersOnlineStatus"),z.prototype),fa(z.prototype,"queryPeersBySubscriptionOption",[La],Object.getOwnPropertyDescriptor(z.prototype,"queryPeersBySubscriptionOption"),z.prototype),fa(z.prototype,"createMessage",[Nb],Object.getOwnPropertyDescriptor(z.prototype,"createMessage"),z.prototype),fa(z.prototype,"downloadMedia",[Nb],Object.getOwnPropertyDescriptor(z.prototype,"downloadMedia"),z.prototype),fa(z.prototype,"createMediaMessageByUploading",[Nb],Object.getOwnPropertyDescriptor(z.prototype,"createMediaMessageByUploading"),z.prototype),z),ms={LOG_FILTER_OFF:{error:!1,warn:!1,info:!1,track:!1,debug:!1},LOG_FILTER_ERROR:{error:!0,warn:!1,info:!1,track:!1,debug:!1},LOG_FILTER_WARNING:{error:!0,warn:!0,info:!1,track:!1,debug:!1},LOG_FILTER_INFO:{error:!0,warn:!0,info:!0,track:!1,debug:!1},LOG_FILTER_DEBUG:{error:!0,warn:!0,info:!0,track:!0,debug:!0}},ns={enableLogUpload:!1,logFilter:ms.LOG_FILTER_INFO,enableCloudProxy:!1},Zd=ua(ua({createInstance:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length?arguments[2]:void 0;if(!/^[\dA-Za-z]{32}$/.test(e))throw new L(["The %s in the arguments is invalid",Object.keys({appId:e})[0]],Lq);var r=Object.keys(t).filter((function(e){return!(e in ns)}));if(0!==r.length)throw new L("Invalid RTM config: ".concat(r.join(", ")),Lq);var i=ua(ua({},ns),t);if(void 0!==n&&(!Array.isArray(n)||0===n.length))throw new L("Invalid area config");if(null!=n){if(!n.every((function(e){return e in S.LegacyAreaCode})))throw new L("Invalid area codes: ".concat(n.filter((function(e){return!(e in S)})).join(", ")));y=xe(n.map((function(e){return LC[e]})))}n=il=Ya.__global_unique_id__=(Ya.__global_unique_id__||0)+1;var o=zC(i);r=AC(i);var a=BC(i),s=CC(n,i),c=Or(n,i),u=c("RTM:DEBUG","<Entry> ");return o("The Agora RTM Web SDK version is %s","1.4.3"),t.enableCloudProxy&&o("RTM cloud proxy enabled"),t.enableLogUpload&&o("Log upload enabled"),y&&u("Area is set to %s",Array.from(y.CODES).map((function(e){return xf(C).find((function(t){return C[t]===e}))})).join(", ")),u("Creating an RtmClient instance"),u('The Git commit ID is "'.concat("v1.4.3-0-gc918e772",'"')),u("The App ID is %s",Tm(e,4,10,"*".repeat(6))),o("The process ID is %s",gg),u("The build is %s","v1.4.3-0-gc918e772"),u("NODE_ENV is %s","production"),new nD(e,{genLogger:c,genTracker:s,info:o,warn:r,logError:a,loggerId:n},i,(function(e){for(var t=0,n=xf(e);t<n.length;t++){var r=n[t];try{var a=e[r];null!=a&&(e.enableCloudProxy&&o("RTM cloud proxy enabled"),e.enableLogUpload&&o("Log upload enabled"),i[r]=a)}catch(e){throw new L(["The %s in the arguments is invalid",r],void 0)}}}))},BUILD:"v1.4.3-0-gc918e772",VERSION:"1.4.3",END_CALL_PREFIX:"AgoraRTMLegacyEndcallCompatibleMessagePrefix",processId:gg,ConnectionChangeReason:S.ConnectionChangeReason,ConnectionState:S.ConnectionState,LocalInvitationFailureReason:S.LocalInvitationFailureReason,LocalInvitationState:S.LocalInvitationState,RemoteInvitationFailureReason:S.RemoteInvitationFailureReason,RemoteInvitationState:S.RemoteInvitationState,MessageType:S.MessageType,PeerOnlineState:S.PeerOnlineState,PeerSubscriptionOption:S.PeerSubscriptionOption},ms),{},{setParameter:function(e,t){Object.keys(od).includes(e)&&(od[e]=t)},getParameter:function(e){return od[e]},setArea:function(e){var t=e.areaCodes;if(e=e.excludedArea,!Array.isArray(t)||0===t.length||!t.every((function(e){return e in S.AreaCode})))throw new L("Invalid area config");if(void 0!==e&&e===S.AreaCode.GLOBAL)throw new L("Excluded area cannot be global");if(void 0===e)y=xe(t.map((function(e){return C[e]})));else{if(t.includes(e))throw new L("Excluded area cannot be in areaCodes");if(!(e in C))throw new L("Invalid excludedArea:",e);y=bu({areas:t.map((function(e){return C[e]})),excludedArea:C[e]})}}});return Zd},module.exports=t()},3977:(module,__unused_webpack_exports,__webpack_require__)=>{var f;f=function(){var define,module,exports;return function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[a]={exports:{}};t[a][0].call(u.exports,(function(e){return i(t[a][1][e]||e)}),u,u.exports,e,t,n,r)}return n[a].exports}for(var o=void 0,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,n){"use strict";var r=e("./browser/client");r.Buffer=e("buffer").Buffer,r.urllib=e("../shims/xhr"),r.version=e("./browser/version").version,t.exports=r},{"../shims/xhr":397,"./browser/client":2,"./browser/version":5,buffer:98}],2:[function(e,t,n){(function(n,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.starts-with");var o=i(e("@babel/runtime/regenerator"));e("regenerator-runtime/runtime");var a=i(e("@babel/runtime/helpers/asyncToGenerator")),s=e("debug")("ali-oss"),c=e("xml2js"),u=e("agentkeepalive"),l=e("merge-descriptors"),h=e("platform"),d=e("utility"),f=e("urllib"),p=e("./version"),g=e("bowser"),A=e("../common/signUtils"),v=e("../common/client/initOptions"),m=e("../common/utils/createRequest").createRequest,y=e("../common/utils/encoder").encoder,b=e("../common/client/getReqUrl").getReqUrl,_=e("../common/utils/setSTSToken").setSTSToken,E=e("../common/utils/retry").retry,w=new u;function I(e,t){var n,r;if(n=h.name,r=h.version,n&&n.toLowerCase&&"ie"===n.toLowerCase()&&r.split(".")[0]<10&&console.warn("ali-oss does not support the current browser"),!(this instanceof I))return new I(e,t);e&&e.inited?this.options=e:this.options=I.initOptions(e),this.options.cancelFlag=!1,this.options.urllib?this.urllib=this.options.urllib:(this.urllib=f,this.agent=this.options.agent||w),this.ctx=t,this.userAgent=this._getUserAgent(),this.options.amendTimeSkewed=0}t.exports=I,I.initOptions=function(e){e.stsToken||console.warn("Please use STS Token for safety, see more details at https://help.aliyun.com/document_detail/32077.html");var t=Object.assign({secure:location&&"https:"===location.protocol,useFetch:!1},e);return v(t)};var C=I.prototype;function S(e){return T.apply(this,arguments)}function T(){return(T=(0,a.default)(o.default.mark((function e(t){var n,r,i,a,s,c;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=m.call(this,t),this.options.useFetch||(n.params.mode="disable-fetch"),a=!!t.stream,e.prev=3,e.next=6,this.urllib.request(n.url,n.params);case 6:r=e.sent,this.debug("response %s %s, got %s, headers: %j",t.method,n.url,r.status,r.headers,"info"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),i=e.t0;case 13:if(!r||!t.successStatuses||-1!==t.successStatuses.indexOf(r.status)){e.next=25;break}return e.next=16,this.requestError(r);case 16:if("RequestTimeTooSkewed"!==(s=e.sent).code||a){e.next=22;break}return this.options.amendTimeSkewed=+new Date(s.serverTime)-new Date,e.next=21,this.request(t);case 21:return e.abrupt("return",e.sent);case 22:s.params=t,e.next=29;break;case 25:if(!i){e.next=29;break}return e.next=28,this.requestError(i);case 28:s=e.sent;case 29:if(!s){e.next=37;break}if(403!==s.status||"InvalidAccessKeyId"!==s.code||!this.options.accessKeyId.startsWith("STS.")||"function"!=typeof this.options.refreshSTSToken){e.next=36;break}if(this._setOptions&&!(Date.now()-this._setOptions>1e4)){e.next=36;break}return this._setOptions=Date.now(),e.next=35,_.call(this);case 35:return e.abrupt("return",this.request(t));case 36:throw s;case 37:if(!t.xmlResponse){e.next=42;break}return e.next=40,this.parseXML(r.data);case 40:c=e.sent,r.data=c;case 42:return e.abrupt("return",r);case 43:case"end":return e.stop()}}),e,this,[[3,10]])})))).apply(this,arguments)}C.debug=s,l(C,e("./object")),l(C,e("../common/bucket/getBucketWebsite")),l(C,e("../common/bucket/putBucketWebsite")),l(C,e("../common/bucket/deleteBucketWebsite")),l(C,e("../common/bucket/getBucketLifecycle")),l(C,e("../common/bucket/putBucketLifecycle")),l(C,e("../common/bucket/deleteBucketLifecycle")),l(C,e("../common/bucket/putBucketVersioning")),l(C,e("../common/bucket/getBucketVersioning")),l(C,e("../common/bucket/getBucketInventory")),l(C,e("../common/bucket/deleteBucketInventory")),l(C,e("../common/bucket/listBucketInventory")),l(C,e("../common/bucket/putBucketInventory")),l(C,e("../common/bucket/abortBucketWorm")),l(C,e("../common/bucket/completeBucketWorm")),l(C,e("../common/bucket/extendBucketWorm")),l(C,e("../common/bucket/getBucketWorm")),l(C,e("../common/bucket/initiateBucketWorm")),l(C,e("./managed-upload")),l(C,e("../common/multipart")),l(C,e("../common/parallel")),C.signature=function(e){return this.debug("authorization stringToSign: %s",e,"info"),A.computeSignature(this.options.accessKeySecret,e,this.options.headerEncoding)},C._getReqUrl=b,C.authorization=function(e,t,n,r){var i=A.buildCanonicalString(e.toUpperCase(),t,{headers:r,parameters:n});return A.authorization(this.options.accessKeyId,this.options.accessKeySecret,i,this.options.headerEncoding)},C.request=function(){var e=(0,a.default)(o.default.mark((function e(t){var n=this;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.options.retryMax){e.next=6;break}return e.next=3,E(S.bind(this),this.options.retryMax,{errorHandler:function(e){return!!function(e){if(t.stream)return!1;var r=[-1,-2].includes(e.status),i=n.options.requestErrorRetryHandle||function(){return!0};return r&&i(e)}(e)}})(t);case 3:return e.abrupt("return",e.sent);case 6:return e.abrupt("return",S.call(this,t));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),C._getResource=function(e){var t="/";return e.bucket&&(t+="".concat(e.bucket,"/")),e.object&&(t+=y(e.object,this.options.headerEncoding)),t},C._escape=function(e){return d.encodeURIComponent(e).replace(/%2F/g,"/")},C._getUserAgent=function(){var e=r&&r.browser?"js":"nodejs",t="aliyun-sdk-".concat(e,"/").concat(p.version),n=h.description;return!n&&r&&(n="Node.js ".concat(r.version.slice(1)," on ").concat(r.platform," ").concat(r.arch)),this._checkUserAgent("".concat(t," ").concat(n))},C._checkUserAgent=function(e){return e.replace(/\u03b1/,"alpha").replace(/\u03b2/,"beta")},C.checkBrowserAndVersion=function(e,t){return g.name===e&&g.version.split(".")[0]===t},C.parseXML=function(e){return new Promise((function(t,r){n.isBuffer(e)&&(e=e.toString()),c.parseString(e,{explicitRoot:!1,explicitArray:!1},(function(e,n){e?r(e):t(n)}))}))},C.requestError=function(){var e=(0,a.default)(o.default.mark((function e(t){var n,r,i,a;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null,t.data&&t.data.length){e.next=5;break}-1===t.status||-2===t.status?((n=new Error(t.message)).name=t.name,n.status=t.status,n.code=t.name):(404===t.status?((n=new Error("Object not exists")).name="NoSuchKeyError",n.status=404,n.code="NoSuchKey"):412===t.status?((n=new Error("Pre condition failed")).name="PreconditionFailedError",n.status=412,n.code="PreconditionFailed"):((n=new Error("Unknow error, status: ".concat(t.status))).name="UnknowError",n.status=t.status),n.requestId=t.headers["x-oss-request-id"],n.host=""),e.next=32;break;case 5:return r=String(t.data),this.debug("request response error data: %s",r,"error"),e.prev=7,e.next=10,this.parseXML(r);case 10:if(e.t0=e.sent,e.t0){e.next=13;break}e.t0={};case 13:i=e.t0,e.next=23;break;case 16:return e.prev=16,e.t1=e.catch(7),this.debug(r,"error"),e.t1.message+="\nraw xml: ".concat(r),e.t1.status=t.status,e.t1.requestId=t.headers["x-oss-request-id"],e.abrupt("return",e.t1);case 23:a=i.Message||"unknow request error, status: ".concat(t.status),i.Condition&&(a+=" (condition: ".concat(i.Condition,")")),(n=new Error(a)).name=i.Code?"".concat(i.Code,"Error"):"UnknowError",n.status=t.status,n.code=i.Code,n.requestId=i.RequestId,n.hostId=i.HostId,n.serverTime=i.ServerTime;case 32:return this.debug("generate error %j",n,"error"),e.abrupt("return",n);case 34:case"end":return e.stop()}}),e,this,[[7,16]])})));return function(t){return e.apply(this,arguments)}}()}).call(this,{isBuffer:e("../../node_modules/is-buffer/index.js")},e("_process"))},{"../../node_modules/is-buffer/index.js":308,"../common/bucket/abortBucketWorm":6,"../common/bucket/completeBucketWorm":7,"../common/bucket/deleteBucketInventory":8,"../common/bucket/deleteBucketLifecycle":9,"../common/bucket/deleteBucketWebsite":10,"../common/bucket/extendBucketWorm":11,"../common/bucket/getBucketInventory":12,"../common/bucket/getBucketLifecycle":13,"../common/bucket/getBucketVersioning":14,"../common/bucket/getBucketWebsite":15,"../common/bucket/getBucketWorm":16,"../common/bucket/initiateBucketWorm":17,"../common/bucket/listBucketInventory":18,"../common/bucket/putBucketInventory":19,"../common/bucket/putBucketLifecycle":20,"../common/bucket/putBucketVersioning":21,"../common/bucket/putBucketWebsite":22,"../common/client/getReqUrl":24,"../common/client/initOptions":25,"../common/multipart":28,"../common/parallel":46,"../common/signUtils":47,"../common/utils/createRequest":52,"../common/utils/encoder":55,"../common/utils/retry":67,"../common/utils/setSTSToken":69,"./managed-upload":3,"./object":4,"./version":5,"@babel/runtime/helpers/asyncToGenerator":70,"@babel/runtime/helpers/interopRequireDefault":71,"@babel/runtime/regenerator":74,_process:393,agentkeepalive:75,bowser:77,"core-js/modules/es.array.concat":234,"core-js/modules/es.array.includes":240,"core-js/modules/es.array.index-of":241,"core-js/modules/es.array.slice":246,"core-js/modules/es.function.name":249,"core-js/modules/es.object.assign":251,"core-js/modules/es.object.to-string":254,"core-js/modules/es.promise":255,"core-js/modules/es.regexp.exec":256,"core-js/modules/es.regexp.to-string":257,"core-js/modules/es.string.replace":261,"core-js/modules/es.string.split":263,"core-js/modules/es.string.starts-with":264,"core-js/modules/es.symbol":267,"core-js/modules/es.symbol.description":266,debug:391,"merge-descriptors":311,platform:317,"regenerator-runtime/runtime":337,urllib:397,utility:396,xml2js:352}],3:[function(e,t,n){(function(t){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.find"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array-buffer.slice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string");var i=r(e("@babel/runtime/regenerator"));e("regenerator-runtime/runtime");var o=r(e("@babel/runtime/helpers/asyncToGenerator")),a=e("util"),s=e("path"),c=e("mime"),u=e("copy-to"),l=e("../common/utils/isBlob").isBlob,h=e("../common/utils/isFile").isFile,d=(e("../common/utils/isArray").isArray,e("../common/utils/isBuffer").isBuffer),f=(e("../common/utils/retry").retry,n);f.multipartUpload=function(){var e=(0,o.default)(i.default.mark((function e(t,n){var r,o,a,u,f,p,g,A,v,m=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=m.length>2&&void 0!==m[2]?m[2]:{},this.resetCancelFlag(),r.disabledMD5=void 0===r.disabledMD5||!!r.disabledMD5,!r.checkpoint||!r.checkpoint.uploadId){e.next=8;break}return n&&h(n)&&(r.checkpoint.file=n),e.next=7,this._resumeMultipart(r.checkpoint,r);case 7:case 41:return e.abrupt("return",e.sent);case 8:return o=102400,r.mime||(h(n)?r.mime=c.getType(s.extname(n.name)):l(n)?r.mime=n.type:d(n)?r.mime="":r.mime=c.getType(s.extname(n))),r.headers=r.headers||{},this._convertMetaToHeaders(r.meta,r.headers),e.next=14,this._getFileSize(n);case 14:if(!((a=e.sent)<o)){e.next=26;break}return r.contentLength=a,e.next=19,this.put(t,n,r);case 19:if(u=e.sent,!r||!r.progress){e.next=23;break}return e.next=23,r.progress(1);case 23:return f={res:u.res,bucket:this.options.bucket,name:t,etag:u.res.headers.etag},(r.headers&&r.headers["x-oss-callback"]||r.callback)&&(f.data=u.data),e.abrupt("return",f);case 26:if(!r.partSize||parseInt(r.partSize,10)===r.partSize){e.next=28;break}throw new Error("partSize must be int number");case 28:if(!(r.partSize&&r.partSize<o)){e.next=30;break}throw new Error("partSize must not be smaller than ".concat(o));case 30:return e.next=32,this.initMultipartUpload(t,r);case 32:if(p=e.sent,g=p.uploadId,A=this._getPartSize(a,r.partSize),v={file:n,name:t,fileSize:a,partSize:A,uploadId:g,doneParts:[]},!r||!r.progress){e.next=39;break}return e.next=39,r.progress(0,v,p.res);case 39:return e.next=41,this._resumeMultipart(v,r);case 42:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),f._resumeMultipart=function(){var e=(0,o.default)(i.default.mark((function e(t,n){var r,a,s,c,l,h,d,f,p,g,A,v,m,y,b,_,E,w;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this,!this.isCancel()){e.next=3;break}throw this._makeCancelEvent();case 3:return a=t.file,s=t.fileSize,c=t.partSize,l=t.uploadId,h=t.doneParts,d=t.name,f=[],h.length>0&&u(h).to(f),p=this._divideParts(s,c),g=p.length,A=!1,v=function(e,r){return new Promise(function(){var s=(0,o.default)(i.default.mark((function o(s,c){var f,v,m,y,b;return i.default.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,e.isCancel()){i.next=29;break}return f=p[r-1],i.next=5,e._createBuffer(a,f.start,f.end);case 5:return v=i.sent,m={content:v,size:f.end-f.start},i.prev=7,i.next=10,e._uploadPart(d,l,r,m,{timeout:n.timeout,disabledMD5:n.disabledMD5});case 10:y=i.sent,i.next=18;break;case 13:if(i.prev=13,i.t0=i.catch(7),404!==i.t0.status){i.next=17;break}throw e._makeAbortEvent();case 17:throw i.t0;case 18:if(e.isCancel()||A){i.next=26;break}if(t.doneParts.push({number:r,etag:y.res.headers.etag}),!n.progress){i.next=23;break}return i.next=23,n.progress(h.length/g,t,y.res);case 23:s({number:r,etag:y.res.headers.etag}),i.next=27;break;case 26:s();case 27:i.next=30;break;case 29:s();case 30:i.next=41;break;case 32:i.prev=32,i.t1=i.catch(0),(b=new Error).name=i.t1.name,b.message=i.t1.message,b.stack=i.t1.stack,b.partNum=r,u(i.t1).to(b),c(b);case 41:case"end":return i.stop()}}),o,null,[[0,32],[7,13]])})));return function(e,t){return s.apply(this,arguments)}}())},m=Array.from(new Array(g),(function(e,t){return t+1})),y=f.map((function(e){return e.number})),b=m.filter((function(e){return y.indexOf(e)<0})),_=n.parallel||5,e.next=17,this._parallel(b,_,(function(e){return new Promise((function(t,n){v(r,e).then((function(e){e&&f.push(e),t()})).catch((function(e){n(e)}))}))}));case 17:if(E=e.sent,A=!0,!(w=E.find((function(e){return"abort"===e.name})))){e.next=22;break}throw w;case 22:if(!this.isCancel()){e.next=25;break}throw v=null,this._makeCancelEvent();case 25:if(!(E&&E.length>0)){e.next=28;break}throw E[0].message="Failed to upload some parts with error: ".concat(E[0].toString()," part_num: ").concat(E[0].partNum),E[0];case 28:return e.next=30,this.completeMultipartUpload(d,l,f,n);case 30:return e.abrupt("return",e.sent);case 31:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),f._getFileSize=function(){var e=(0,o.default)(i.default.mark((function e(t){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!d(t)){e.next=4;break}return e.abrupt("return",t.length);case 4:if(!l(t)&&!h(t)){e.next=6;break}return e.abrupt("return",t.size);case 6:throw new Error("_getFileSize requires Buffer/File/Blob.");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var p=e("stream").Readable;function g(e,t){if(!(this instanceof g))return new g(e,t);p.call(this,t),this.file=e,this.reader=new FileReader,this.start=0,this.finish=!1,this.fileBuffer=null}function A(e){return e.arrayBuffer?e.arrayBuffer():new Promise((function(t,n){var r=new FileReader;r.onload=function(e){t(e.target.result)},r.onerror=function(e){n(e)},r.readAsArrayBuffer(e)}))}a.inherits(g,p),g.prototype.readFileAndPush=function(e){if(this.fileBuffer)for(var t=!0;t&&this.fileBuffer&&this.start<this.fileBuffer.length;){var n=this.start,r=n+e;r=r>this.fileBuffer.length?this.fileBuffer.length:r,this.start=r,t=this.push(this.fileBuffer.slice(n,r))}},g.prototype._read=function(e){if(this.file&&this.start>=this.file.size||this.fileBuffer&&this.start>=this.fileBuffer.length||this.finish||0===this.start&&!this.file)return this.finish||(this.fileBuffer=null,this.finish=!0),void this.push(null);e=e||16384;var n=this;this.reader.onload=function(r){n.fileBuffer=t.from(new Uint8Array(r.target.result)),n.file=null,n.readFileAndPush(e)},0===this.start?this.reader.readAsArrayBuffer(this.file):this.readFileAndPush(e)},f._createBuffer=function(){var e=(0,o.default)(i.default.mark((function e(n,r,o){var a,s;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l(n)&&!h(n)){e.next=8;break}return a=n.slice(r,o),e.next=4,A(a);case 4:return s=e.sent,e.abrupt("return",t.from(s));case 8:if(!d(n)){e.next=12;break}return e.abrupt("return",n.subarray(r,o));case 12:throw new Error("_createBuffer requires File/Blob/Buffer.");case 13:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),f._getPartSize=function(e,t){t||(t=1048576);var n=Math.ceil(e/1e4);return t<n&&(t=n,console.warn("partSize has been set to ".concat(t,", because the partSize you provided causes partNumber to be greater than 10,000"))),t},f._divideParts=function(e,t){for(var n=Math.ceil(e/t),r=[],i=0;i<n;i++){var o=t*i,a=Math.min(o+t,e);r.push({start:o,end:a})}return r}}).call(this,e("buffer").Buffer)},{"../common/utils/isArray":59,"../common/utils/isBlob":60,"../common/utils/isBuffer":61,"../common/utils/isFile":62,"../common/utils/retry":67,"@babel/runtime/helpers/asyncToGenerator":70,"@babel/runtime/helpers/interopRequireDefault":71,"@babel/runtime/regenerator":74,buffer:98,"copy-to":101,"core-js/modules/es.array-buffer.slice":233,"core-js/modules/es.array.concat":234,"core-js/modules/es.array.filter":236,"core-js/modules/es.array.find":237,"core-js/modules/es.array.from":239,"core-js/modules/es.array.index-of":241,"core-js/modules/es.array.iterator":242,"core-js/modules/es.array.map":245,"core-js/modules/es.array.slice":246,"core-js/modules/es.function.name":249,"core-js/modules/es.object.to-string":254,"core-js/modules/es.promise":255,"core-js/modules/es.regexp.to-string":257,"core-js/modules/es.string.iterator":259,"core-js/modules/es.typed-array.copy-within":268,"core-js/modules/es.typed-array.every":269,"core-js/modules/es.typed-array.fill":270,"core-js/modules/es.typed-array.filter":271,"core-js/modules/es.typed-array.find":273,"core-js/modules/es.typed-array.find-index":272,"core-js/modules/es.typed-array.for-each":274,"core-js/modules/es.typed-array.includes":275,"core-js/modules/es.typed-array.index-of":276,"core-js/modules/es.typed-array.iterator":277,"core-js/modules/es.typed-array.join":278,"core-js/modules/es.typed-array.last-index-of":279,"core-js/modules/es.typed-array.map":280,"core-js/modules/es.typed-array.reduce":282,"core-js/modules/es.typed-array.reduce-right":281,"core-js/modules/es.typed-array.reverse":283,"core-js/modules/es.typed-array.set":284,"core-js/modules/es.typed-array.slice":285,"core-js/modules/es.typed-array.some":286,"core-js/modules/es.typed-array.sort":287,"core-js/modules/es.typed-array.subarray":288,"core-js/modules/es.typed-array.to-locale-string":289,"core-js/modules/es.typed-array.to-string":290,"core-js/modules/es.typed-array.uint8-array":291,mime:313,path:316,"regenerator-runtime/runtime":337,stream:340,util:346}],4:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.map"),e("core-js/modules/es.function.name"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.replace"),e("core-js/modules/web.dom-collections.for-each");var i=r(e("@babel/runtime/regenerator"));e("regenerator-runtime/runtime");var o=r(e("@babel/runtime/helpers/asyncToGenerator")),a=e("fs"),s=e("copy-to"),c=e("path"),u=e("mime"),l=e("../common/callback"),h=e("merge-descriptors"),d=e("../common/utils/isBlob").isBlob,f=e("../common/utils/isFile").isFile,p=e("../common/utils/isBuffer").isBuffer,g=n;g.append=function(){var e=(0,o.default)(i.default.mark((function e(t,n,r){var o;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===(r=r||{}).position&&(r.position="0"),r.subres={append:"",position:r.position},r.method="POST",e.next=6,this.put(t,n,r);case 6:return(o=e.sent).nextAppendPosition=o.res.headers["x-oss-next-append-position"],e.abrupt("return",o);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}(),g.put=function(){var e=(0,o.default)(i.default.mark((function e(t,n,r){var o,a,s,h,g;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=r||{}).disabledMD5=void 0===r.disabledMD5||!!r.disabledMD5,r.headers=r.headers||{},t=this._objectName(t),!p(n)){e.next=8;break}o=n,e.next=19;break;case 8:if(!d(n)&&!f(n)){e.next=18;break}return r.mime||(f(n)?r.mime=u.getType(c.extname(n.name)):r.mime=n.type),e.next=12,this._createBuffer(n,0,n.size);case 12:return o=e.sent,e.next=15,this._getFileSize(n);case 15:r.contentLength=e.sent,e.next=19;break;case 18:throw new TypeError("Must provide Buffer/Blob/File for put.");case 19:return this._convertMetaToHeaders(r.meta,r.headers),a=r.method||"PUT",s=this._objectRequestParams(a,t,r),l.encodeCallback(s,r),s.mime=r.mime,s.disabledMD5=r.disabledMD5,s.content=o,s.successStatuses=[200],e.next=29,this.request(s);case 29:return h=e.sent,g={name:t,url:this._objectUrl(t),res:h.res},s.headers&&s.headers["x-oss-callback"]&&(g.data=JSON.parse(h.data.toString())),e.abrupt("return",g);case 33:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}(),g.putStream=function(){var e=(0,o.default)(i.default.mark((function e(t,n,r){var o,a,s,c;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=r||{}).headers=r.headers||{},t=this._objectName(t),r.contentLength?r.headers["Content-Length"]=r.contentLength:r.headers["Transfer-Encoding"]="chunked",this._convertMetaToHeaders(r.meta,r.headers),o=r.method||"PUT",a=this._objectRequestParams(o,t,r),l.encodeCallback(a,r),a.mime=r.mime,a.stream=n,a.successStatuses=[200],e.next=13,this.request(a);case 13:return s=e.sent,c={name:t,url:this._objectUrl(t),res:s.res},a.headers&&a.headers["x-oss-callback"]&&(c.data=JSON.parse(s.data.toString())),e.abrupt("return",c);case 17:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}(),h(g,e("../common/object/copyObject")),h(g,e("../common/object/getObjectTagging")),h(g,e("../common/object/putObjectTagging")),h(g,e("../common/object/deleteObjectTagging")),h(g,e("../common/image")),h(g,e("../common/object/getBucketVersions")),h(g,e("../common/object/getACL")),h(g,e("../common/object/putACL")),h(g,e("../common/object/head")),h(g,e("../common/object/delete")),h(g,e("../common/object/get")),h(g,e("../common/object/putSymlink")),h(g,e("../common/object/getSymlink")),h(g,e("../common/object/deleteMulti")),h(g,e("../common/object/getObjectMeta")),h(g,e("../common/object/getObjectUrl")),h(g,e("../common/object/generateObjectUrl")),h(g,e("../common/object/signatureUrl")),g.putMeta=function(){var e=(0,o.default)(i.default.mark((function e(t,n,r){var o;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.copy(t,t,{meta:n||{},timeout:r&&r.timeout,ctx:r&&r.ctx});case 2:return o=e.sent,e.abrupt("return",o);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}(),g.list=function(){var e=(0,o.default)(i.default.mark((function e(t,n){var r,o,a,s,c;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=this._objectRequestParams("GET","",n)).query=t,r.xmlResponse=!0,r.successStatuses=[200],e.next=6,this.request(r);case 6:return o=e.sent,a=o.data.Contents,s=this,a&&(Array.isArray(a)||(a=[a]),a=a.map((function(e){return{name:e.Key,url:s._objectUrl(e.Key),lastModified:e.LastModified,etag:e.ETag,type:e.Type,size:Number(e.Size),storageClass:e.StorageClass,owner:{id:e.Owner.ID,displayName:e.Owner.DisplayName}}}))),(c=o.data.CommonPrefixes||null)&&(Array.isArray(c)||(c=[c]),c=c.map((function(e){return e.Prefix}))),e.abrupt("return",{res:o.res,objects:a,prefixes:c,nextMarker:o.data.NextMarker||null,isTruncated:"true"===o.data.IsTruncated});case 13:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),g.listV2=function(){var e=(0,o.default)(i.default.mark((function e(t){var n,r,o,a,s,c,u,l=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:{},r=t["continuation-token"]||t.continuationToken,delete t["continuation-token"],delete t.continuationToken,r&&(n.subres=Object.assign({"continuation-token":r},n.subres)),(o=this._objectRequestParams("GET","",n)).query=Object.assign({"list-type":2},t),o.xmlResponse=!0,o.successStatuses=[200],e.next=11,this.request(o);case 11:return a=e.sent,s=a.data.Contents,c=this,s&&(Array.isArray(s)||(s=[s]),s=s.map((function(e){return{name:e.Key,url:c._objectUrl(e.Key),lastModified:e.LastModified,etag:e.ETag,type:e.Type,size:Number(e.Size),storageClass:e.StorageClass,owner:e.Owner?{id:e.Owner.ID,displayName:e.Owner.DisplayName}:null}}))),(u=a.data.CommonPrefixes||null)&&(Array.isArray(u)||(u=[u]),u=u.map((function(e){return e.Prefix}))),e.abrupt("return",{res:a.res,objects:s,prefixes:u,isTruncated:"true"===a.data.IsTruncated,keyCount:+a.data.KeyCount,continuationToken:a.data.ContinuationToken||null,nextContinuationToken:a.data.NextContinuationToken||null});case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),g.restore=function(){var e=(0,o.default)(i.default.mark((function e(t,n){var r,o;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=n||{}).subres=Object.assign({restore:""},n.subres),n.versionId&&(n.subres.versionId=n.versionId),(r=this._objectRequestParams("POST",t,n)).successStatuses=[202],e.next=7,this.request(r);case 7:return o=e.sent,e.abrupt("return",{res:o.res});case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),g._objectUrl=function(e){return this._getReqUrl({bucket:this.options.bucket,object:e})},g._objectRequestParams=function(e,t,n){if(!this.options.bucket&&!this.options.cname)throw new Error("Please create a bucket first");n=n||{};var r={object:t=this._objectName(t),bucket:this.options.bucket,method:e,subres:n&&n.subres,timeout:n&&n.timeout,ctx:n&&n.ctx};return n.headers&&(r.headers={},s(n.headers).to(r.headers)),r},g._objectName=function(e){return e.replace(/^\/+/,"")},g._convertMetaToHeaders=function(e,t){e&&Object.keys(e).forEach((function(n){t["x-oss-meta-".concat(n)]=e[n]}))},g._deleteFileSafe=function(e){var t=this;return new Promise((function(n){a.exists(e,(function(r){r?a.unlink(e,(function(r){r&&t.debug("unlink %j error: %s",e,r,"error"),n()})):n()}))}))}},{"../common/callback":23,"../common/image":26,"../common/object/copyObject":29,"../common/object/delete":30,"../common/object/deleteMulti":31,"../common/object/deleteObjectTagging":32,"../common/object/generateObjectUrl":33,"../common/object/get":34,"../common/object/getACL":35,"../common/object/getBucketVersions":36,"../common/object/getObjectMeta":37,"../common/object/getObjectTagging":38,"../common/object/getObjectUrl":39,"../common/object/getSymlink":40,"../common/object/head":41,"../common/object/putACL":42,"../common/object/putObjectTagging":43,"../common/object/putSymlink":44,"../common/object/signatureUrl":45,"../common/utils/isBlob":60,"../common/utils/isBuffer":61,"../common/utils/isFile":62,"@babel/runtime/helpers/asyncToGenerator":70,"@babel/runtime/helpers/interopRequireDefault":71,"@babel/runtime/regenerator":74,"copy-to":101,"core-js/modules/es.array.for-each":238,"core-js/modules/es.array.map":245,"core-js/modules/es.function.name":249,"core-js/modules/es.number.constructor":250,"core-js/modules/es.object.assign":251,"core-js/modules/es.object.keys":253,"core-js/modules/es.object.to-string":254,"core-js/modules/es.promise":255,"core-js/modules/es.regexp.exec":256,"core-js/modules/es.regexp.to-string":257,"core-js/modules/es.string.replace":261,"core-js/modules/web.dom-collections.for-each":292,fs:78,"merge-descriptors":311,mime:313,path:316,"regenerator-runtime/runtime":337}],5:[function(e,t,n){"use strict";n.version="6.15.1"},{}],6:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),i=r(e("@babel/runtime/regenerator"));e("regenerator-runtime/runtime");var o=r(e("@babel/runtime/helpers/asyncToGenerator"));Object.defineProperty(n,"__esModule",{value:!0}),n.abortBucketWorm=void 0;var a=e("../utils/checkBucketName");function s(){return(s=(0,o.default)(i.default.mark((function e(t,n){var r,o;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.checkBucketName(t),r=this._bucketRequestParams("DELETE",t,"worm",n),e.next=4,this.request(r);case 4:return o=e.sent,e.abrupt("return",{res:o.res,status:o.status});case 6:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}n.abortBucketWorm=function(e,t){return s.apply(this,arguments)}},{"../utils/checkBucketName":48,"@babel/runtime/helpers/asyncToGenerator":70,"@babel/runtime/helpers/interopRequireDefault":71,"@babel/runtime/regenerator":74,"regenerator-runtime/runtime":337}],7:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),i=r(e("@babel/runtime/regenerator"));e("regenerator-runtime/runtime");var o=r(e("@babel/runtime/helpers/asyncToGenerator"));Object.defineProperty(n,"__esModule",{value:!0}),n.completeBucketWorm=void 0;var a=e("../utils/checkBucketName");function s(){return(s=(0,o.default)(i.default.mark((function e(t,n,r){var o,s;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.checkBucketName(t),o=this._bucketRequestParams("POST",t,{wormId:n},r),e.next=4,this.request(o);case 4:return s=e.sent,e.abrupt("return",{res:s.res,status:s.status});case 6:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}n.completeBucketWorm=function(e,t,n){return s.apply(this,arguments)}},{"../utils/checkBucketName":48,"@babel/runtime/helpers/asyncToGenerator":70,"@babel/runtime/helpers/interopRequireDefault":71,"@babel/runtime/regenerator":74,"regenerator-runtime/runtime":337}],8:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.object.assign");var i=r(e("@babel/runtime/regenerator"));e("regenerator-runtime/runtime");var o=r(e("@babel/runtime/helpers/asyncToGenerator"));Object.defineProperty(n,"__esModule",{value:!0}),n.deleteBucketInventory=void 0;var a=e("../utils/checkBucketName");function s(){return s=(0,o.default)(i.default.mark((function e(t,n){var r,o,s,c,u=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]?u[2]:{},o=Object.assign({inventory:"",inventoryId:n},r.subres),a.checkBucketName(t),(s=this._bucketRequestParams("DELETE",t,o,r)).successStatuses=[204],e.next=7,this.request(s);case 7:return c=e.sent,e.abrupt("return",{status:c.status,res:c.res});case 9:case"end":return e.stop()}}),e,this)}))),s.apply(this,arguments)}n.deleteBucketInventory=function(e,t){return s.apply(this,arguments)}},{"../utils/checkBucketName":48,"@babel/runtime/helpers/asyncToGenerator":70,"@babel/runtime/helpers/interopRequireDefault":71,"@babel/runtime/regenerator":74,"core-js/modules/es.object.assign":251,"regenerator-runtime/runtime":337}],9:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),i=r(e("@babel/runtime/regenerator"));e("regenerator-runtime/runtime");var o=r(e("@babel/runtime/helpers/asyncToGenerator")),a=e("../utils/checkBucketName").checkBucketName;n.deleteBucketLifecycle=function(){var e=(0,o.default)(i.default.mark((function e(t,n){var r,o;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(t),(r=this._bucketRequestParams("DELETE",t,"lifecycle",n)).successStatuses=[204],e.next=5,this.request(r);case 5:return o=e.sent,e.abrupt("return",{res:o.res});case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{"../utils/checkBucketName":48,"@babel/runtime/helpers/asyncToGenerator":70,"@babel/runtime/helpers/interopRequireDefault":71,"@babel/runtime/regenerator":74,"regenerator-runtime/runtime":337}],10:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),i=r(e("@babel/runtime/regenerator"));e("regenerator-runtime/runtime");var o=r(e("@babel/runtime/helpers/asyncToGenerator")),a=e("../utils/checkBucketName").checkBucketName;n.deleteBucketWebsite=function(){var e=(0,o.default)(i.default.mark((function e(t,n){var r,o;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(t),(r=this._bucketRequestParams("DELETE",t,"website",n)).successStatuses=[204],e.next=5,this.request(r);case 5:return o=e.sent,e.abrupt("return",{res:o.res});case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{"../utils/checkBucketName":48,"@babel/runtime/helpers/asyncToGenerator":70,"@babel/runtime/helpers/interopRequireDefault":71,"@babel/runtime/regenerator":74,"regenerator-runtime/runtime":337}],11:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),i=r(e("@babel/runtime/regenerator"));e("regenerator-runtime/runtime");var o=r(e("@babel/runtime/helpers/asyncToGenerator"));Object.defineProperty(n,"__esModule",{value:!0}),n.extendBucketWorm=void 0;var a=e("../utils/checkBucketName"),s=e("../utils/obj2xml");function c(){return(c=(0,o.default)(i.default.mark((function e(t,n,r,o){var c,u,l;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.checkBucketName(t),c=this._bucketRequestParams("POST",t,{wormExtend:"",wormId:n},o),u={ExtendWormConfiguration:{RetentionPeriodInDays:r}},c.mime="xml",c.content=s.obj2xml(u,{headers:!0}),c.successStatuses=[200],e.next=8,this.request(c);case 8:return l=e.sent,e.abrupt("return",{res:l.res,status:l.status});case 10:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}n.extendBucketWorm=function(e,t,n,r){return c.apply(this,arguments)}},{"../utils/checkBucketName":48,"../utils/obj2xml":66,"@babel/runtime/helpers/asyncToGenerator":70,"@babel/runtime/helpers/interopRequireDefault":71,"@babel/runtime/regenerator":74,"regenerator-runtime/runtime":337}],12:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.object.assign");var i=r(e("@babel/runtime/regenerator"));e("regenerator-runtime/runtime");var o=r(e("@babel/runtime/helpers/asyncToGenerator"));Object.defineProperty(n,"__esModule",{value:!0}),n.getBucketInventory=void 0;var a=e("../utils/checkBucketName"),s=e("../utils/formatInventoryConfig");function c(){return c=(0,o.default)(i.default.mark((function e(t,n){var r,o,c,u,l=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>2&&void 0!==l[2]?l[2]:{},o=Object.assign({inventory:"",inventoryId:n},r.subres),a.checkBucketName(t),(c=this._bucketRequestParams("GET",t,o,r)).successStatuses=[200],c.xmlResponse=!0,e.next=8,this.request(c);case 8:return u=e.sent,e.abrupt("return",{status:u.status,res:u.res,inventory:s.formatInventoryConfig(u.data)});case 10:case"end":return e.stop()}}),e,this)}))),c.apply(this,arguments)}n.getBucketInventory=function(e,t){return c.apply(this,arguments)}},{"../utils/checkBucketName":48,"../utils/formatInventoryConfig":56,"@babel/runtime/helpers/asyncToGenerator":70,"@babel/runtime/helpers/interopRequireDefault":71,"@babel/runtime/regenerator":74,"core-js/modules/es.object.assign":251,"regenerator-runtime/runtime":337}],13:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.map");var i=r(e("@babel/runtime/regenerator"));e("regenerator-runtime/runtime");var o=r(e("@babel/runtime/helpers/asyncToGenerator")),a=e("../utils/checkBucketName").checkBucketName,s=e("../utils/isArray").isArray,c=e("../utils/formatObjKey").formatObjKey;n.getBucketLifecycle=function(){var e=(0,o.default)(i.default.mark((function e(t,n){var r,o,u;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(t),(r=this._bucketRequestParams("GET",t,"lifecycle",n)).successStatuses=[200],r.xmlResponse=!0,e.next=6,this.request(r);case 6:return o=e.sent,(u=o.data.Rule||null)&&(s(u)||(u=[u]),u=u.map((function(e){return e.ID&&(e.id=e.ID,delete e.ID),e.Tag&&!s(e.Tag)&&(e.Tag=[e.Tag]),c(e,"firstLowerCase")}))),e.abrupt("return",{rules:u,res:o.res});case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{"../utils/checkBucketName":48,"../utils/formatObjKey":57,"../utils/isArray":59,"@babel/runtime/helpers/asyncToGenerator":70,"@babel/runtime/helpers/interopRequireDefault":71,"@babel/runtime/regenerator":74,"core-js/modules/es.array.map":245,"regenerator-runtime/runtime":337}],14:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),i=r(e("@babel/runtime/regenerator"));e("regenerator-runtime/runtime");var o=r(e("@babel/runtime/helpers/asyncToGenerator")),a=e("../utils/checkBucketName").checkBucketName;n.getBucketVersioning=function(){var e=(0,o.default)(i.default.mark((function e(t,n){var r,o,s;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(t),(r=this._bucketRequestParams("GET",t,"versioning",n)).xmlResponse=!0,r.successStatuses=[200],e.next=6,this.request(r);case 6:return o=e.sent,s=o.data.Status,e.abrupt("return",{status:o.status,versionStatus:s,res:o.res});case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{"../utils/checkBucketName":48,"@babel/runtime/helpers/asyncToGenerator":70,"@babel/runtime/helpers/interopRequireDefault":71,"@babel/runtime/regenerator":74,"regenerator-runtime/runtime":337}],15:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),i=r(e("@babel/runtime/regenerator"));e("regenerator-runtime/runtime");var o=r(e("@babel/runtime/helpers/asyncToGenerator")),a=e("../utils/checkBucketName").checkBucketName,s=e("../utils/isObject").isObject;n.getBucketWebsite=function(){var e=(0,o.default)(i.default.mark((function e(t,n){var r,o,c;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(t),(r=this._bucketRequestParams("GET",t,"website",n)).successStatuses=[200],r.xmlResponse=!0,e.next=6,this.request(r);case 6:return o=e.sent,c=[],o.data.RoutingRules&&o.data.RoutingRules.RoutingRule&&(c=s(o.data.RoutingRules.RoutingRule)?[o.data.RoutingRules.RoutingRule]:o.data.RoutingRules.RoutingRule),e.abrupt("return",{index:o.data.IndexDocument&&o.data.IndexDocument.Suffix||"",supportSubDir:o.data.IndexDocument&&o.data.IndexDocument.SupportSubDir||"false",type:o.data.IndexDocument&&o.data.IndexDocument.Type,routingRules:c,error:o.data.ErrorDocument&&o.data.ErrorDocument.Key||null,res:o.res});case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{"../utils/checkBucketName":48,"../utils/isObject":64,"@babel/runtime/helpers/asyncToGenerator":70,"@babel/runtime/helpers/interopRequireDefault":71,"@babel/runtime/regenerator":74,"regenerator-runtime/runtime":337}],16:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.object.assign");var i=r(e("@babel/runtime/regenerator"));e("regenerator-runtime/runtime");var o=r(e("@babel/runtime/helpers/asyncToGenerator"));Object.defineProperty(n,"__esModule",{value:!0}),n.getBucketWorm=void 0;var a=e("../utils/checkBucketName"),s=e("../utils/dataFix");function c(){return(c=(0,o.default)(i.default.mark((function e(t,n){var r,o;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.checkBucketName(t),(r=this._bucketRequestParams("GET",t,"worm",n)).successStatuses=[200],r.xmlResponse=!0,e.next=6,this.request(r);case 6:return o=e.sent,s.dataFix(o.data,{lowerFirst:!0,rename:{RetentionPeriodInDays:"days"}}),e.abrupt("return",Object.assign(Object.assign({},o.data),{res:o.res,status:o.status}));case 9:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}n.getBucketWorm=function(e,t){return c.apply(this,arguments)}},{"../utils/checkBucketName":48,"../utils/dataFix":53,"@babel/runtime/helpers/asyncToGenerator":70,"@babel/runtime/helpers/interopRequireDefault":71,"@babel/runtime/regenerator":74,"core-js/modules/es.object.assign":251,"regenerator-runtime/runtime":337}],17:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),i=r(e("@babel/runtime/regenerator"));e("regenerator-runtime/runtime");var o=r(e("@babel/runtime/helpers/asyncToGenerator"));Object.defineProperty(n,"__esModule",{value:!0}),n.initiateBucketWorm=void 0;var a=e("../utils/obj2xml"),s=e("../utils/checkBucketName");function c(){return(c=(0,o.default)(i.default.mark((function e(t,n,r){var o,c,u;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.checkBucketName(t),o=this._bucketRequestParams("POST",t,"worm",r),c={InitiateWormConfiguration:{RetentionPeriodInDays:n}},o.mime="xml",o.content=a.obj2xml(c,{headers:!0}),o.successStatuses=[200],e.next=8,this.request(o);case 8:return u=e.sent,e.abrupt("return",{res:u.res,wormId:u.res.headers["x-oss-worm-id"],status:u.status});case 10:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}n.initiateBucketWorm=function(e,t,n){return c.apply(this,arguments)}},{"../utils/checkBucketName":48,"../utils/obj2xml":66,"@babel/runtime/helpers/asyncToGenerator":70,"@babel/runtime/helpers/interopRequireDefault":71,"@babel/runtime/regenerator":74,"regenerator-runtime/runtime":337}],18:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.object.assign");var i=r(e("@babel/runtime/regenerator"));e("regenerator-runtime/runtime");var o=r(e("@babel/runtime/helpers/asyncToGenerator"));Object.defineProperty(n,"__esModule",{value:!0}),n.listBucketInventory=void 0;var a=e("../utils/checkBucketName"),s=e("../utils/formatInventoryConfig");function c(){return c=(0,o.default)(i.default.mark((function e(t){var n,r,o,c,u,l,h,d,f=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=f.length>1&&void 0!==f[1]?f[1]:{},r=n.continuationToken,o=Object.assign({inventory:""},r&&{"continuation-token":r},n.subres),a.checkBucketName(t),(c=this._bucketRequestParams("GET",t,o,n)).successStatuses=[200],c.xmlResponse=!0,e.next=9,this.request(c);case 9:return u=e.sent,l=u.data,h=u.res,d=u.status,e.abrupt("return",{isTruncated:"true"===l.IsTruncated,nextContinuationToken:l.NextContinuationToken,inventoryList:s.formatInventoryConfig(l.InventoryConfiguration,!0),status:d,res:h});case 12:case"end":return e.stop()}}),e,this)}))),c.apply(this,arguments)}n.listBucketInventory=function(e){return c.apply(this,arguments)}},{"../utils/checkBucketName":48,"../utils/formatInventoryConfig":56,"@babel/runtime/helpers/asyncToGenerator":70,"@babel/runtime/helpers/interopRequireDefault":71,"@babel/runtime/regenerator":74,"core-js/modules/es.object.assign":251,"regenerator-runtime/runtime":337}],19:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.concat"),e("core-js/modules/es.object.assign");var i=r(e("@babel/runtime/regenerator"));e("regenerator-runtime/runtime");var o=r(e("@babel/runtime/helpers/asyncToGenerator"));Object.defineProperty(n,"__esModule",{value:!0}),n.putBucketInventory=void 0;var a=e("../utils/checkBucketName"),s=e("../utils/obj2xml");function c(){return c=(0,o.default)(i.default.mark((function e(t,n){var r,o,c,u,l,h,d,f,p,g,A,v=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=v.length>2&&void 0!==v[2]?v[2]:{},o=Object.assign({inventory:"",inventoryId:n.id},r.subres),a.checkBucketName(t),c=n.OSSBucketDestination,u=n.optionalFields,l=n.includedObjectVersions,h="acs:oss:::",d="acs:ram::".concat(c.accountId,":role/"),f={InventoryConfiguration:{Id:n.id,IsEnabled:n.isEnabled,Filter:{Prefix:n.prefix||""},Destination:{OSSBucketDestination:{Format:c.format,AccountId:c.accountId,RoleArn:"".concat(d).concat(c.rolename),Bucket:"".concat(h).concat(c.bucket),Prefix:c.prefix||"",Encryption:c.encryption||""}},Schedule:{Frequency:n.frequency},IncludedObjectVersions:l,OptionalFields:{Field:(null==u?void 0:u.field)||[]}}},p=s.obj2xml(f,{headers:!0,firstUpperCase:!0}),(g=this._bucketRequestParams("PUT",t,o,r)).successStatuses=[200],g.mime="xml",g.content=p,e.next=14,this.request(g);case 14:return A=e.sent,e.abrupt("return",{status:A.status,res:A.res});case 16:case"end":return e.stop()}}),e,this)}))),c.apply(this,arguments)}n.putBucketInventory=function(e,t){return c.apply(this,arguments)}},{"../utils/checkBucketName":48,"../utils/obj2xml":66,"@babel/runtime/helpers/asyncToGenerator":70,"@babel/runtime/helpers/interopRequireDefault":71,"@babel/runtime/regenerator":74,"core-js/modules/es.array.concat":234,"core-js/modules/es.object.assign":251,"regenerator-runtime/runtime":337}],20:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.includes"),e("core-js/modules/web.dom-collections.for-each");var i=r(e("@babel/runtime/regenerator"));e("regenerator-runtime/runtime");var o=r(e("@babel/runtime/helpers/asyncToGenerator")),a=e("../utils/checkBucketName").checkBucketName,s=e("../utils/isArray").isArray,c=e("../utils/deepCopy").deepCopy,u=e("../utils/isObject").isObject,l=e("../utils/obj2xml").obj2xml,h=e("../utils/checkObjectTag").checkObjectTag,d=e("../utils/getStrBytesCount").getStrBytesCount;function f(e,t){var n=e.days,r=e.createdBeforeDate;if(!n&&!r)throw new Error("".concat(t," must includes days or createdBeforeDate"));if(n&&!/^[1-9][0-9]*$/.test(n))throw new Error("days must be a positive integer");if(r&&!/\d{4}-\d{2}-\d{2}T00:00:00.000Z/.test(r))throw new Error("createdBeforeDate must be date and conform to iso8601 format")}function p(e){if(e.id&&d(e.id)>255)throw new Error("ID is composed of 255 bytes at most");if(void 0===e.prefix)throw new Error("Rule must includes prefix");if(!["Enabled","Disabled"].includes(e.status))throw new Error("Status must be  Enabled or Disabled");if(e.transition){if(!["IA","Archive"].includes(e.transition.storageClass))throw new Error("StorageClass must be  IA or Archive");f(e.transition,"Transition")}if(e.expiration)if(e.expiration.expiredObjectDeleteMarker){if(e.expiration.days||e.expiration.createdBeforeDate)throw new Error("expiredObjectDeleteMarker cannot be used with days or createdBeforeDate")}else f(e.expiration,"Expiration");if(e.abortMultipartUpload&&f(e.abortMultipartUpload,"AbortMultipartUpload"),!(e.expiration||e.abortMultipartUpload||e.transition||e.noncurrentVersionTransition))throw new Error("Rule must includes expiration or abortMultipartUpload or transition or noncurrentVersionTransition");if(e.tag){if(e.abortMultipartUpload)throw new Error("Tag cannot be used with abortMultipartUpload");!function(e){if(!s(e)&&!u(e))throw new Error("tag must be Object or Array");e=u(e)?[e]:e;var t={};c(e).forEach((function(e){t[e.key]=e.value})),h(t)}(e.tag)}}n.putBucketLifecycle=function(){var e=(0,o.default)(i.default.mark((function e(t,n,r){var o,c,u,h,d;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a(t),s(n)){e.next=3;break}throw new Error("rules must be Array");case 3:return o=this._bucketRequestParams("PUT",t,"lifecycle",r),u={LifecycleConfiguration:{Rule:c=[]}},n.forEach((function(e){var t;(t=e).days&&(t.expiration={days:t.days}),t.date&&(t.expiration={createdBeforeDate:t.date}),p(e),e.id&&(e.ID=e.id,delete e.id),c.push(e)})),h=l(u,{headers:!0,firstUpperCase:!0}),o.content=h,o.mime="xml",o.successStatuses=[200],e.next=13,this.request(o);case 13:return d=e.sent,e.abrupt("return",{res:d.res});case 15:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{"../utils/checkBucketName":48,"../utils/checkObjectTag":50,"../utils/deepCopy":54,"../utils/getStrBytesCount":58,"../utils/isArray":59,"../utils/isObject":64,"../utils/obj2xml":66,"@babel/runtime/helpers/asyncToGenerator":70,"@babel/runtime/helpers/interopRequireDefault":71,"@babel/runtime/regenerator":74,"core-js/modules/es.array.for-each":238,"core-js/modules/es.array.includes":240,"core-js/modules/web.dom-collections.for-each":292,"regenerator-runtime/runtime":337}],21:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.includes");var i=r(e("@babel/runtime/regenerator"));e("regenerator-runtime/runtime");var o=r(e("@babel/runtime/helpers/asyncToGenerator")),a=e("../utils/checkBucketName").checkBucketName,s=e("../utils/obj2xml").obj2xml;n.putBucketVersioning=function(){var e=(0,o.default)(i.default.mark((function e(t,n){var r,o,c,u,l=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=l.length>2&&void 0!==l[2]?l[2]:{},a(t),["Enabled","Suspended"].includes(n)){e.next=4;break}throw new Error("status must be Enabled or Suspended");case 4:return o=this._bucketRequestParams("PUT",t,"versioning",r),c={VersioningConfiguration:{Status:n}},o.mime="xml",o.content=s(c,{headers:!0}),e.next=10,this.request(o);case 10:return u=e.sent,e.abrupt("return",{res:u.res,status:u.status});case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{"../utils/checkBucketName":48,"../utils/obj2xml":66,"@babel/runtime/helpers/asyncToGenerator":70,"@babel/runtime/helpers/interopRequireDefault":71,"@babel/runtime/regenerator":74,"core-js/modules/es.array.includes":240,"regenerator-runtime/runtime":337}],22:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),i=r(e("@babel/runtime/regenerator"));e("regenerator-runtime/runtime");var o=r(e("@babel/runtime/helpers/asyncToGenerator")),a=e("../utils/checkBucketName").checkBucketName,s=e("../utils/obj2xml").obj2xml,c=e("../utils/isArray").isArray;n.putBucketWebsite=function(){var e=(0,o.default)(i.default.mark((function e(t){var n,r,o,u,l,h,d,f=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=f.length>1&&void 0!==f[1]?f[1]:{},r=f.length>2?f[2]:void 0,a(t),o=this._bucketRequestParams("PUT",t,"website",r),u={Suffix:n.index||"index.html"},h={WebsiteConfiguration:l={IndexDocument:u}},n.supportSubDir&&(u.SupportSubDir=n.supportSubDir),n.type&&(u.Type=n.type),n.error&&(l.ErrorDocument={Key:n.error}),void 0===n.routingRules){e.next=14;break}if(c(n.routingRules)){e.next=13;break}throw new Error("RoutingRules must be Array");case 13:l.RoutingRules={RoutingRule:n.routingRules};case 14:return h=s(h),o.content=h,o.mime="xml",o.successStatuses=[200],e.next=20,this.request(o);case 20:return d=e.sent,e.abrupt("return",{res:d.res});case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{"../utils/checkBucketName":48,"../utils/isArray":59,"../utils/obj2xml":66,"@babel/runtime/helpers/asyncToGenerator":70,"@babel/runtime/helpers/interopRequireDefault":71,"@babel/runtime/regenerator":74,"regenerator-runtime/runtime":337}],23:[function(e,t,n){(function(t){"use strict";e("core-js/modules/es.array.for-each"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/web.dom-collections.for-each"),n.encodeCallback=function(e,n){if(e.headers=e.headers||{},!Object.prototype.hasOwnProperty.call(e.headers,"x-oss-callback")&&n.callback){var r={callbackUrl:encodeURI(n.callback.url),callbackBody:n.callback.body};n.callback.host&&(r.callbackHost=n.callback.host),n.callback.contentType&&(r.callbackBodyType=n.callback.contentType);var i=t.from(JSON.stringify(r)).toString("base64");if(e.headers["x-oss-callback"]=i,n.callback.customValue){var o={};Object.keys(n.callback.customValue).forEach((function(e){o["x:".concat(e)]=n.callback.customValue[e]})),e.headers["x-oss-callback-var"]=t.from(JSON.stringify(o)).toString("base64")}}}}).call(this,e("buffer").Buffer)},{buffer:98,"core-js/modules/es.array.for-each":238,"core-js/modules/es.object.keys":253,"core-js/modules/es.object.to-string":254,"core-js/modules/es.regexp.to-string":257,"core-js/modules/web.dom-collections.for-each":292}],24:[function(e,t,n){"use strict";e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.replace"),e("core-js/modules/web.dom-collections.for-each");var r=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.getReqUrl=void 0;var i=r(e("copy-to")),o=r(e("url")),a=r(e("merge-descriptors")),s=r(e("is-type-of")),c=e("../utils/isIP"),u=e("../utils/checkConfigValid");n.getReqUrl=function(e){var t={},n=this.options.cname;u.checkConfigValid(this.options.endpoint,"endpoint"),i.default(this.options.endpoint,!1).to(t),!e.bucket||n||c.isIP(t.hostname)||this.options.sldEnable||(t.host="".concat(e.bucket,".").concat(t.host));var r="/";e.bucket&&this.options.sldEnable&&(r+="".concat(e.bucket,"/")),e.object&&(r+=this._escape(e.object).replace(/\+/g,"%2B")),t.pathname=r;var l={};if(e.query&&a.default(l,e.query),e.subres){var h={};s.default.string(e.subres)?h[e.subres]="":s.default.array(e.subres)?e.subres.forEach((function(e){h[e]=""})):h=e.subres,a.default(l,h)}return t.query=l,o.default.format(t)}},{"../utils/checkConfigValid":49,"../utils/isIP":63,"copy-to":101,"core-js/modules/es.array.concat":234,"core-js/modules/es.array.for-each":238,"core-js/modules/es.regexp.exec":256,"core-js/modules/es.string.replace":261,"core-js/modules/web.dom-collections.for-each":292,"is-type-of":392,"merge-descriptors":311,url:394}],25:[function(e,t,n){"use strict";e("core-js/modules/es.array.concat"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.string.trim");var r=e("humanize-ms"),i=e("url"),o=e("../utils/checkBucketName").checkBucketName,a=e("../utils/setRegion").setRegion,s=e("../utils/checkConfigValid").checkConfigValid;t.exports=function(e){if(!e||!e.accessKeyId||!e.accessKeySecret)throw new Error("require accessKeyId, accessKeySecret");e.stsToken&&!e.refreshSTSToken&&console.warn("It's recommended to set `refreshSTSToken` to refresh stsTokenaccessKeyIdaccessKeySecret automatically when sts info expires"),e.bucket&&o(e.bucket);var t=Object.assign({region:"oss-cn-hangzhou",internal:!1,secure:!1,timeout:6e4,bucket:null,endpoint:null,cname:!1,isRequestPay:!1,sldEnable:!1,headerEncoding:"utf-8",refreshSTSToken:null,retryMax:0},e);if(t.accessKeyId=t.accessKeyId.trim(),t.accessKeySecret=t.accessKeySecret.trim(),t.timeout&&(t.timeout=r(t.timeout)),t.endpoint)t.endpoint=function(e,t){s(e,"endpoint");var n=i.parse(e);if(n.protocol||(n=i.parse("http".concat(t?"s":"","://").concat(e))),"http:"!==n.protocol&&"https:"!==n.protocol)throw new Error("Endpoint protocol must be http or https.");return n}(t.endpoint,t.secure);else{if(!t.region)throw new Error("require options.endpoint or options.region");t.endpoint=a(t.region,t.internal,t.secure)}return t.inited=!0,t}},{"../utils/checkBucketName":48,"../utils/checkConfigValid":49,"../utils/setRegion":68,"core-js/modules/es.array.concat":234,"core-js/modules/es.object.assign":251,"core-js/modules/es.string.trim":265,"humanize-ms":299,url:394}],26:[function(e,t,n){"use strict";e("merge-descriptors")(n,e("./processObjectSave"))},{"./processObjectSave":27,"merge-descriptors":311}],27:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.concat");var i=r(e("@babel/runtime/regenerator"));e("regenerator-runtime/runtime");var o=r(e("@babel/runtime/helpers/asyncToGenerator")),a=e("../utils/checkBucketName").checkBucketName,s=e("querystring"),c=e("js-base64").Base64.encode;function u(e,t){if(!e)throw new Error("".concat(t," is required"));if("string"!=typeof e)throw new Error("".concat(t," must be String"))}n.processObjectSave=function(){var e=(0,o.default)(i.default.mark((function e(t,n,r,o){var l,h,d,f;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(t,"sourceObject"),u(n,"targetObject"),u(r,"process"),n=this._objectName(n),o&&a(o),l=this._objectRequestParams("POST",t,{subres:"x-oss-process"}),h=o?",b_".concat(c(o)):"",n=c(n),d={"x-oss-process":"".concat(r,"|sys/saveas,o_").concat(n).concat(h)},l.content=s.stringify(d),e.next=12,this.request(l);case 12:return f=e.sent,e.abrupt("return",{res:f.res,status:f.res.status});case 14:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{"../utils/checkBucketName":48,"@babel/runtime/helpers/asyncToGenerator":70,"@babel/runtime/helpers/interopRequireDefault":71,"@babel/runtime/regenerator":74,"core-js/modules/es.array.concat":234,"js-base64":310,querystring:323,"regenerator-runtime/runtime":337}],28:[function(e,t,n){(function(t){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.sort"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string");var i=r(e("@babel/runtime/regenerator"));e("regenerator-runtime/runtime");var o=r(e("@babel/runtime/helpers/asyncToGenerator")),a=e("copy-to"),s=e("./callback"),c=e("./utils/deepCopy").deepCopyWith,u=e("./utils/isBuffer").isBuffer,l=n;l.listUploads=function(){var e=(0,o.default)(i.default.mark((function e(t,n){var r,o,s,c;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},a(n=n||{}).to(r),r.subres="uploads",(o=this._objectRequestParams("GET","",r)).query=t,o.xmlResponse=!0,o.successStatuses=[200],e.next=10,this.request(o);case 10:return s=e.sent,c=s.data.Upload||[],Array.isArray(c)||(c=[c]),c=c.map((function(e){return{name:e.Key,uploadId:e.UploadId,initiated:e.Initiated}})),e.abrupt("return",{res:s.res,uploads:c,bucket:s.data.Bucket,nextKeyMarker:s.data.NextKeyMarker,nextUploadIdMarker:s.data.NextUploadIdMarker,isTruncated:"true"===s.data.IsTruncated});case 15:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),l.listParts=function(){var e=(0,o.default)(i.default.mark((function e(t,n,r,o){var s,c,u;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={},a(o=o||{}).to(s),s.subres={uploadId:n},(c=this._objectRequestParams("GET",t,s)).query=r,c.xmlResponse=!0,c.successStatuses=[200],e.next=10,this.request(c);case 10:return u=e.sent,e.abrupt("return",{res:u.res,uploadId:u.data.UploadId,bucket:u.data.Bucket,name:u.data.Key,partNumberMarker:u.data.PartNumberMarker,nextPartNumberMarker:u.data.NextPartNumberMarker,maxParts:u.data.MaxParts,isTruncated:u.data.IsTruncated,parts:u.data.Part||[]});case 12:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}(),l.abortMultipartUpload=function(){var e=(0,o.default)(i.default.mark((function e(t,n,r){var o,s,c;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._stop(),o={},a(r=r||{}).to(o),o.subres={uploadId:n},(s=this._objectRequestParams("DELETE",t,o)).successStatuses=[204],e.next=9,this.request(s);case 9:return c=e.sent,e.abrupt("return",{res:c.res});case 11:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}(),l.initMultipartUpload=function(){var e=(0,o.default)(i.default.mark((function e(t,n){var r,o,s;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},a(n=n||{}).to(r),r.headers=r.headers||{},this._convertMetaToHeaders(n.meta,r.headers),r.subres="uploads",(o=this._objectRequestParams("POST",t,r)).mime=n.mime,o.xmlResponse=!0,o.successStatuses=[200],e.next=12,this.request(o);case 12:return s=e.sent,e.abrupt("return",{res:s.res,bucket:s.data.Bucket,name:s.data.Key,uploadId:s.data.UploadId});case 14:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),l.uploadPart=function(){var e=(0,o.default)(i.default.mark((function e(n,r,o,a,s,c,u){var l;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l={size:c-s},!t||!t.browser){e.next=8;break}return e.next=5,this._createBuffer(a,s,c);case 5:l.content=e.sent,e.next=11;break;case 8:return e.next=10,this._createStream(a,s,c);case 10:l.stream=e.sent;case 11:return e.next=13,this._uploadPart(n,r,o,l,u);case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i,o,a,s){return e.apply(this,arguments)}}(),l.completeMultipartUpload=function(){var e=(0,o.default)(i.default.mark((function e(t,n,r,o){var a,l,h,d,f,p,g,A;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=r.concat().sort((function(e,t){return e.number-t.number})).filter((function(e,t,n){return!t||e.number!==n[t-1].number})),l='<?xml version="1.0" encoding="UTF-8"?>\n<CompleteMultipartUpload>\n',h=0;h<a.length;h++)d=a[h],l+="<Part>\n",l+="<PartNumber>".concat(d.number,"</PartNumber>\n"),l+="<ETag>".concat(d.etag,"</ETag>\n"),l+="</Part>\n";return l+="</CompleteMultipartUpload>",f={},(f=c(o=o||{},(function(e){if(u(e))return null}))).headers&&delete f.headers["x-oss-server-side-encryption"],f.subres={uploadId:n},p=this._objectRequestParams("POST",t,f),s.encodeCallback(p,f),p.mime="xml",p.content=l,p.headers&&p.headers["x-oss-callback"]||(p.xmlResponse=!0),p.successStatuses=[200],e.next=17,this.request(p);case 17:return g=e.sent,A={res:g.res,bucket:p.bucket,name:t,etag:g.res.headers.etag},p.headers&&p.headers["x-oss-callback"]&&(A.data=JSON.parse(g.data.toString())),e.abrupt("return",A);case 21:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}(),l._uploadPart=function(){var e=(0,o.default)(i.default.mark((function e(n,r,o,s,c){var u,l,h;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u={},a(c=c||{}).to(u),u.headers={"Content-Length":s.size},u.subres={partNumber:o,uploadId:r},(l=this._objectRequestParams("PUT",n,u)).mime=u.mime,t&&t.browser?l.content=s.content:l.stream=s.stream,l.successStatuses=[200],l.disabledMD5=c.disabledMD5,e.next=13,this.request(l);case 13:if((h=e.sent).res.headers.etag){e.next=16;break}throw new Error("Please set the etag of expose-headers in OSS \n https://help.aliyun.com/document_detail/32069.html");case 16:return s.stream&&(s.stream=null,l.stream=null),e.abrupt("return",{name:n,etag:h.res.headers.etag,res:h.res});case 18:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i,o){return e.apply(this,arguments)}}()}).call(this,e("_process"))},{"./callback":23,"./utils/deepCopy":54,"./utils/isBuffer":61,"@babel/runtime/helpers/asyncToGenerator":70,"@babel/runtime/helpers/interopRequireDefault":71,"@babel/runtime/regenerator":74,_process:393,"copy-to":101,"core-js/modules/es.array.concat":234,"core-js/modules/es.array.filter":236,"core-js/modules/es.array.map":245,"core-js/modules/es.array.sort":247,"core-js/modules/es.object.to-string":254,"core-js/modules/es.regexp.to-string":257,"regenerator-runtime/runtime":337}],29:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.find"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.replace"),e("core-js/modules/web.dom-collections.for-each");var i=r(e("@babel/runtime/regenerator")),o=r(e("@babel/runtime/helpers/typeof"));e("regenerator-runtime/runtime");var a=r(e("@babel/runtime/helpers/asyncToGenerator")),s=e("../utils/checkBucketName").checkBucketName,c=n,u=["content-type","content-encoding","content-language","content-disposition","cache-control","expires"];c.copy=function(){var e=(0,a.default)(i.default.mark((function e(t,n,r,a){var s,c,l;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"object"===(0,o.default)(r)&&(a=r),(a=a||{}).headers=a.headers||{},Object.keys(a.headers).forEach((function(e){a.headers["x-oss-copy-source-".concat(e.toLowerCase())]=a.headers[e]})),(a.meta||Object.keys(a.headers).find((function(e){return u.includes(e.toLowerCase())})))&&(a.headers["x-oss-metadata-directive"]="REPLACE"),this._convertMetaToHeaders(a.meta,a.headers),n=this._getSourceName(n,r),a.versionId&&(n="".concat(n,"?versionId=").concat(a.versionId)),a.headers["x-oss-copy-source"]=n,(s=this._objectRequestParams("PUT",t,a)).xmlResponse=!0,s.successStatuses=[200,304],e.next=14,this.request(s);case 14:return c=e.sent,(l=c.data)&&(l={etag:l.ETag,lastModified:l.LastModified}),e.abrupt("return",{data:l,res:c.res});case 18:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}(),c._getSourceName=function(e,t){return"string"==typeof t?e=this._objectName(e):"/"!==e[0]?t=this.options.bucket:(t=e.replace(/\/(.+?)(\/.*)/,"$1"),e=e.replace(/(\/.+?\/)(.*)/,"$2")),s(t),e=encodeURIComponent(e),e="/".concat(t,"/").concat(e)}},{"../utils/checkBucketName":48,"@babel/runtime/helpers/asyncToGenerator":70,"@babel/runtime/helpers/interopRequireDefault":71,"@babel/runtime/helpers/typeof":72,"@babel/runtime/regenerator":74,"core-js/modules/es.array.concat":234,"core-js/modules/es.array.find":237,"core-js/modules/es.array.for-each":238,"core-js/modules/es.array.includes":240,"core-js/modules/es.object.keys":253,"core-js/modules/es.regexp.exec":256,"core-js/modules/es.string.replace":261,"core-js/modules/web.dom-collections.for-each":292,"regenerator-runtime/runtime":337}],30:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.object.assign");var i=r(e("@babel/runtime/regenerator"));e("regenerator-runtime/runtime");var o=r(e("@babel/runtime/helpers/asyncToGenerator"));n.delete=function(){var e=(0,o.default)(i.default.mark((function e(t){var n,r,o,a=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=a.length>1&&void 0!==a[1]?a[1]:{}).subres=Object.assign({},n.subres),n.versionId&&(n.subres.versionId=n.versionId),(r=this._objectRequestParams("DELETE",t,n)).successStatuses=[204],e.next=7,this.request(r);case 7:return o=e.sent,e.abrupt("return",{res:o.res});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{"@babel/runtime/helpers/asyncToGenerator":70,"@babel/runtime/helpers/interopRequireDefault":71,"@babel/runtime/regenerator":74,"core-js/modules/es.object.assign":251,"regenerator-runtime/runtime":337}],31:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.object.assign");var i=r(e("@babel/runtime/regenerator"));e("regenerator-runtime/runtime");var o=r(e("@babel/runtime/helpers/asyncToGenerator")),a=e("utility"),s=e("../utils/obj2xml").obj2xml;n.deleteMulti=function(){var e=(0,o.default)(i.default.mark((function e(t){var n,r,o,c,u,l,h,d,f,p,g,A,v,m=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=m.length>1&&void 0!==m[1]?m[1]:{},r=[],t&&t.length){e.next=4;break}throw new Error("names is required");case 4:for(o=0;o<t.length;o++)c={},"string"==typeof t[o]?c.Key=a.escape(this._objectName(t[o])):(u=t[o],l=u.key,h=u.versionId,c.Key=a.escape(this._objectName(l)),c.VersionId=h),r.push(c);return d={Delete:{Quiet:!!n.quiet,Object:r}},f=s(d,{headers:!0}),n.subres=Object.assign({delete:""},n.subres),n.versionId&&(n.subres.versionId=n.versionId),(p=this._objectRequestParams("POST","",n)).mime="xml",p.content=f,p.xmlResponse=!0,p.successStatuses=[200],e.next=16,this.request(p);case 16:return g=e.sent,A=g.data,(v=A&&A.Deleted||null)&&(Array.isArray(v)||(v=[v])),e.abrupt("return",{res:g.res,deleted:v||[]});case 21:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{"../utils/obj2xml":66,"@babel/runtime/helpers/asyncToGenerator":70,"@babel/runtime/helpers/interopRequireDefault":71,"@babel/runtime/regenerator":74,"core-js/modules/es.object.assign":251,"regenerator-runtime/runtime":337,utility:396}],32:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.object.assign");var i=r(e("@babel/runtime/regenerator"));e("regenerator-runtime/runtime");var o=r(e("@babel/runtime/helpers/asyncToGenerator"));n.deleteObjectTagging=function(){var e=(0,o.default)(i.default.mark((function e(t){var n,r,o,a=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=a.length>1&&void 0!==a[1]?a[1]:{}).subres=Object.assign({tagging:""},n.subres),n.versionId&&(n.subres.versionId=n.versionId),t=this._objectName(t),(r=this._objectRequestParams("DELETE",t,n)).successStatuses=[204],e.next=8,this.request(r);case 8:return o=e.sent,e.abrupt("return",{status:o.status,res:o.res});case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{"@babel/runtime/helpers/asyncToGenerator":70,"@babel/runtime/helpers/interopRequireDefault":71,"@babel/runtime/regenerator":74,"core-js/modules/es.object.assign":251,"regenerator-runtime/runtime":337}],33:[function(e,t,n){"use strict";e("core-js/modules/es.array.concat");var r=e("url"),i=e("../utils/isIP").isIP;n.generateObjectUrl=function(e,t){if(i(this.options.endpoint.hostname))throw new Error("can not get the object URL when endpoint is IP");if(t)"/"!==t[t.length-1]&&(t+="/");else{t=this.options.endpoint.format();var n=r.parse(t),o=this.options.bucket;n.hostname="".concat(o,".").concat(n.hostname),n.host="".concat(o,".").concat(n.host),t=n.format()}return t+this._escape(this._objectName(e))}},{"../utils/isIP":63,"core-js/modules/es.array.concat":234,url:394}],34:[function(e,t,n){(function(t){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.object.assign");var i=r(e("@babel/runtime/regenerator"));e("regenerator-runtime/runtime");var o=r(e("@babel/runtime/helpers/asyncToGenerator")),a=e("fs"),s=e("is-type-of");n.get=function(){var e=(0,o.default)(i.default.mark((function e(n,r){var o,c,u,l,h,d,f,p,g=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=g.length>2&&void 0!==g[2]?g[2]:{},c=null,u=!1,s.writableStream(r)?c=r:s.string(r)?(c=a.createWriteStream(r),u=!0):o=r,o=o||{},l=t&&t.browser,h=null===o.responseCacheControl?"":"no-cache",d=l&&h?{"response-cache-control":h}:{},o.subres=Object.assign(d,o.subres),o.versionId&&(o.subres.versionId=o.versionId),o.process&&(o.subres["x-oss-process"]=o.process),e.prev=11,(p=this._objectRequestParams("GET",n,o)).writeStream=c,p.successStatuses=[200,206,304],e.next=17,this.request(p);case 17:f=e.sent,u&&c.destroy(),e.next=28;break;case 21:if(e.prev=21,e.t0=e.catch(11),!u){e.next=27;break}return c.destroy(),e.next=27,this._deleteFileSafe(r);case 27:throw e.t0;case 28:return e.abrupt("return",{res:f.res,content:f.data});case 29:case"end":return e.stop()}}),e,this,[[11,21]])})));return function(t,n){return e.apply(this,arguments)}}()}).call(this,e("_process"))},{"@babel/runtime/helpers/asyncToGenerator":70,"@babel/runtime/helpers/interopRequireDefault":71,"@babel/runtime/regenerator":74,_process:393,"core-js/modules/es.object.assign":251,fs:78,"is-type-of":392,"regenerator-runtime/runtime":337}],35:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.object.assign");var i=r(e("@babel/runtime/regenerator"));e("regenerator-runtime/runtime");var o=r(e("@babel/runtime/helpers/asyncToGenerator"));n.getACL=function(){var e=(0,o.default)(i.default.mark((function e(t){var n,r,o,a=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=a.length>1&&void 0!==a[1]?a[1]:{}).subres=Object.assign({acl:""},n.subres),n.versionId&&(n.subres.versionId=n.versionId),t=this._objectName(t),(r=this._objectRequestParams("GET",t,n)).successStatuses=[200],r.xmlResponse=!0,e.next=9,this.request(r);case 9:return o=e.sent,e.abrupt("return",{acl:o.data.AccessControlList.Grant,owner:{id:o.data.Owner.ID,displayName:o.data.Owner.DisplayName},res:o.res});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{"@babel/runtime/helpers/asyncToGenerator":70,"@babel/runtime/helpers/interopRequireDefault":71,"@babel/runtime/regenerator":74,"core-js/modules/es.object.assign":251,"regenerator-runtime/runtime":337}],36:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.map"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.replace"),e("core-js/modules/web.dom-collections.for-each");var i=r(e("@babel/runtime/regenerator"));e("regenerator-runtime/runtime");var o=r(e("@babel/runtime/helpers/asyncToGenerator")),a=n,s=e("../utils/isObject").isObject,c=e("../utils/isArray").isArray;function u(){return l.apply(this,arguments)}function l(){return l=(0,o.default)(i.default.mark((function e(){var t,n,r,o,a,s,u,l,h=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.length>0&&void 0!==h[0]?h[0]:{},n=h.length>1&&void 0!==h[1]?h[1]:{},!t.versionIdMarker||void 0!==t.keyMarker){e.next=4;break}throw new Error("A version-id marker cannot be specified without a key marker");case 4:return n.subres=Object.assign({versions:""},n.subres),n.versionId&&(n.subres.versionId=n.versionId),(r=this._objectRequestParams("GET","",n)).xmlResponse=!0,r.successStatuses=[200],r.query=d(t),e.next=12,this.request(r);case 12:return o=e.sent,a=o.data.Version||[],s=o.data.DeleteMarker||[],u=this,a&&(Array.isArray(a)||(a=[a]),a=a.map((function(e){return{name:e.Key,url:u._objectUrl(e.Key),lastModified:e.LastModified,isLatest:"true"===e.IsLatest,versionId:e.VersionId,etag:e.ETag,type:e.Type,size:Number(e.Size),storageClass:e.StorageClass,owner:{id:e.Owner.ID,displayName:e.Owner.DisplayName}}}))),s&&(c(s)||(s=[s]),s=s.map((function(e){return{name:e.Key,lastModified:e.LastModified,versionId:e.VersionId,owner:{id:e.Owner.ID,displayName:e.Owner.DisplayName}}}))),(l=o.data.CommonPrefixes||null)&&(c(l)||(l=[l]),l=l.map((function(e){return e.Prefix}))),e.abrupt("return",{res:o.res,objects:a,deleteMarker:s,prefixes:l,nextMarker:o.data.NextKeyMarker||null,NextVersionIdMarker:o.data.NextVersionIdMarker||null,nextKeyMarker:o.data.NextKeyMarker||null,nextVersionIdMarker:o.data.NextVersionIdMarker||null,isTruncated:"true"===o.data.IsTruncated});case 21:case"end":return e.stop()}}),e,this)}))),l.apply(this,arguments)}function h(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};return s(e)&&Object.keys(e).forEach((function(n){t[h(n)]=e[n]})),t}a.getBucketVersions=u,a.listObjectVersions=u},{"../utils/isArray":59,"../utils/isObject":64,"@babel/runtime/helpers/asyncToGenerator":70,"@babel/runtime/helpers/interopRequireDefault":71,"@babel/runtime/regenerator":74,"core-js/modules/es.array.for-each":238,"core-js/modules/es.array.map":245,"core-js/modules/es.number.constructor":250,"core-js/modules/es.object.assign":251,"core-js/modules/es.object.keys":253,"core-js/modules/es.regexp.exec":256,"core-js/modules/es.string.replace":261,"core-js/modules/web.dom-collections.for-each":292,"regenerator-runtime/runtime":337}],37:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.object.assign");var i=r(e("@babel/runtime/regenerator"));e("regenerator-runtime/runtime");var o=r(e("@babel/runtime/helpers/asyncToGenerator"));n.getObjectMeta=function(){var e=(0,o.default)(i.default.mark((function e(t,n){var r,o;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=n||{},t=this._objectName(t),n.subres=Object.assign({objectMeta:""},n.subres),n.versionId&&(n.subres.versionId=n.versionId),(r=this._objectRequestParams("HEAD",t,n)).successStatuses=[200],e.next=8,this.request(r);case 8:return o=e.sent,e.abrupt("return",{status:o.status,res:o.res});case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{"@babel/runtime/helpers/asyncToGenerator":70,"@babel/runtime/helpers/interopRequireDefault":71,"@babel/runtime/regenerator":74,"core-js/modules/es.object.assign":251,"regenerator-runtime/runtime":337}],38:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.for-each"),e("core-js/modules/es.object.assign"),e("core-js/modules/web.dom-collections.for-each");var i=r(e("@babel/runtime/regenerator"));e("regenerator-runtime/runtime");var o=r(e("@babel/runtime/helpers/asyncToGenerator")),a=n,s=e("../utils/isObject").isObject;a.getObjectTagging=function(){var e=(0,o.default)(i.default.mark((function e(t){var n,r,o,a,c,u,l=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=l.length>1&&void 0!==l[1]?l[1]:{}).subres=Object.assign({tagging:""},n.subres),n.versionId&&(n.subres.versionId=n.versionId),t=this._objectName(t),(r=this._objectRequestParams("GET",t,n)).successStatuses=[200],e.next=8,this.request(r);case 8:return o=e.sent,e.next=11,this.parseXML(o.data);case 11:return a=e.sent,c=(c=a.TagSet.Tag)&&s(c)?[c]:c||[],u={},c.forEach((function(e){u[e.Key]=e.Value})),e.abrupt("return",{status:o.status,res:o.res,tag:u});case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{"../utils/isObject":64,"@babel/runtime/helpers/asyncToGenerator":70,"@babel/runtime/helpers/interopRequireDefault":71,"@babel/runtime/regenerator":74,"core-js/modules/es.array.for-each":238,"core-js/modules/es.object.assign":251,"core-js/modules/web.dom-collections.for-each":292,"regenerator-runtime/runtime":337}],39:[function(e,t,n){"use strict";var r=e("../utils/isIP").isIP;n.getObjectUrl=function(e,t){if(r(this.options.endpoint.hostname))throw new Error("can not get the object URL when endpoint is IP");return t?"/"!==t[t.length-1]&&(t+="/"):t=this.options.endpoint.format(),t+this._escape(this._objectName(e))}},{"../utils/isIP":63}],40:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.object.assign");var i=r(e("@babel/runtime/regenerator"));e("regenerator-runtime/runtime");var o=r(e("@babel/runtime/helpers/asyncToGenerator"));n.getSymlink=function(){var e=(0,o.default)(i.default.mark((function e(t){var n,r,o,a,s=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=s.length>1&&void 0!==s[1]?s[1]:{}).subres=Object.assign({symlink:""},n.subres),n.versionId&&(n.subres.versionId=n.versionId),t=this._objectName(t),(r=this._objectRequestParams("GET",t,n)).successStatuses=[200],e.next=8,this.request(r);case 8:return o=e.sent,a=o.res.headers["x-oss-symlink-target"],e.abrupt("return",{targetName:decodeURIComponent(a),res:o.res});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{"@babel/runtime/helpers/asyncToGenerator":70,"@babel/runtime/helpers/interopRequireDefault":71,"@babel/runtime/regenerator":74,"core-js/modules/es.object.assign":251,"regenerator-runtime/runtime":337}],41:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.keys"),e("core-js/modules/web.dom-collections.for-each");var i=r(e("@babel/runtime/regenerator"));e("regenerator-runtime/runtime");var o=r(e("@babel/runtime/helpers/asyncToGenerator"));n.head=function(){var e=(0,o.default)(i.default.mark((function e(t){var n,r,o,a,s=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=s.length>1&&void 0!==s[1]?s[1]:{}).subres=Object.assign({},n.subres),n.versionId&&(n.subres.versionId=n.versionId),(r=this._objectRequestParams("HEAD",t,n)).successStatuses=[200,304],e.next=7,this.request(r);case 7:return o=e.sent,a={meta:null,res:o.res,status:o.status},200===o.status&&Object.keys(o.headers).forEach((function(e){0===e.indexOf("x-oss-meta-")&&(a.meta||(a.meta={}),a.meta[e.substring(11)]=o.headers[e])})),e.abrupt("return",a);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{"@babel/runtime/helpers/asyncToGenerator":70,"@babel/runtime/helpers/interopRequireDefault":71,"@babel/runtime/regenerator":74,"core-js/modules/es.array.for-each":238,"core-js/modules/es.array.index-of":241,"core-js/modules/es.object.assign":251,"core-js/modules/es.object.keys":253,"core-js/modules/web.dom-collections.for-each":292,"regenerator-runtime/runtime":337}],42:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.object.assign");var i=r(e("@babel/runtime/regenerator"));e("regenerator-runtime/runtime");var o=r(e("@babel/runtime/helpers/asyncToGenerator"));n.putACL=function(){var e=(0,o.default)(i.default.mark((function e(t,n,r){var o,a;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=r||{}).subres=Object.assign({acl:""},r.subres),r.versionId&&(r.subres.versionId=r.versionId),r.headers=r.headers||{},r.headers["x-oss-object-acl"]=n,t=this._objectName(t),(o=this._objectRequestParams("PUT",t,r)).successStatuses=[200],e.next=10,this.request(o);case 10:return a=e.sent,e.abrupt("return",{res:a.res});case 12:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{"@babel/runtime/helpers/asyncToGenerator":70,"@babel/runtime/helpers/interopRequireDefault":71,"@babel/runtime/regenerator":74,"core-js/modules/es.object.assign":251,"regenerator-runtime/runtime":337}],43:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.map"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.keys");var i=r(e("@babel/runtime/regenerator"));e("regenerator-runtime/runtime");var o=r(e("@babel/runtime/helpers/asyncToGenerator")),a=e("../utils/obj2xml").obj2xml,s=e("../utils/checkObjectTag").checkObjectTag;n.putObjectTagging=function(){var e=(0,o.default)(i.default.mark((function e(t,n){var r,o,c,u,l=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>2&&void 0!==l[2]?l[2]:{},s(n),r.subres=Object.assign({tagging:""},r.subres),r.versionId&&(r.subres.versionId=r.versionId),t=this._objectName(t),(o=this._objectRequestParams("PUT",t,r)).successStatuses=[200],n=Object.keys(n).map((function(e){return{Key:e,Value:n[e]}})),c={Tagging:{TagSet:{Tag:n}}},o.mime="xml",o.content=a(c),e.next=13,this.request(o);case 13:return u=e.sent,e.abrupt("return",{res:u.res,status:u.status});case 15:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{"../utils/checkObjectTag":50,"../utils/obj2xml":66,"@babel/runtime/helpers/asyncToGenerator":70,"@babel/runtime/helpers/interopRequireDefault":71,"@babel/runtime/regenerator":74,"core-js/modules/es.array.map":245,"core-js/modules/es.object.assign":251,"core-js/modules/es.object.keys":253,"regenerator-runtime/runtime":337}],44:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.object.assign");var i=r(e("@babel/runtime/regenerator"));e("regenerator-runtime/runtime");var o=r(e("@babel/runtime/helpers/asyncToGenerator"));n.putSymlink=function(){var e=(0,o.default)(i.default.mark((function e(t,n,r){var o,a;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=r||{}).headers=r.headers||{},n=this._escape(this._objectName(n)),this._convertMetaToHeaders(r.meta,r.headers),r.headers["x-oss-symlink-target"]=n,r.subres=Object.assign({symlink:""},r.subres),r.versionId&&(r.subres.versionId=r.versionId),r.storageClass&&(r.headers["x-oss-storage-class"]=r.storageClass),t=this._objectName(t),(o=this._objectRequestParams("PUT",t,r)).successStatuses=[200],e.next=13,this.request(o);case 13:return a=e.sent,e.abrupt("return",{res:a.res});case 15:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{"@babel/runtime/helpers/asyncToGenerator":70,"@babel/runtime/helpers/interopRequireDefault":71,"@babel/runtime/regenerator":74,"core-js/modules/es.object.assign":251,"regenerator-runtime/runtime":337}],45:[function(e,t,n){"use strict";var r=e("url"),i=e("utility"),o=e("copy-to"),a=e("../../common/signUtils"),s=e("../utils/isIP").isIP;n.signatureUrl=function(e,t){if(s(this.options.endpoint.hostname))throw new Error("can not get the object URL when endpoint is IP");t=t||{},e=this._objectName(e),t.method=t.method||"GET";var n=i.timestamp()+(t.expires||1800),c={bucket:this.options.bucket,object:e},u=this._getResource(c);this.options.stsToken&&(t["security-token"]=this.options.stsToken);var l=a._signatureForURL(this.options.accessKeySecret,t,u,n),h=r.parse(this._getReqUrl(c));return h.query={OSSAccessKeyId:this.options.accessKeyId,Expires:n,Signature:l.Signature},o(l.subResource).to(h.query),h.format()}},{"../../common/signUtils":47,"../utils/isIP":63,"copy-to":101,url:394,utility:396}],46:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator");var i=r(e("@babel/runtime/regenerator"));e("regenerator-runtime/runtime");var o=r(e("@babel/runtime/helpers/asyncToGenerator")),a=e("./utils/isArray").isArray,s=n;s._parallelNode=function(){var e=(0,o.default)(i.default.mark((function e(t,n,r,o){var a,s,c,u,l,h,d,f;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=this,s=[],c=[],u=t.length/n,l=t.length%n,h=0===l?u:(t.length-l)/n+1,d=1,f=0;case 8:if(!(f<t.length)){e.next=26;break}if(!a.isCancel()){e.next=11;break}return e.abrupt("break",26);case 11:if(o?c.push(r(a,t[f],o)):c.push(r(a,t[f])),c.length!==n&&(d!==h||f!==t.length-1)){e.next=23;break}return e.prev=13,d+=1,e.next=17,Promise.all(c);case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(13),s.push(e.t0);case 22:c=[];case 23:f++,e.next=8;break;case 26:return e.abrupt("return",s);case 27:case"end":return e.stop()}}),e,this,[[13,19]])})));return function(t,n,r,i){return e.apply(this,arguments)}}(),s._parallel=function(e,t,n){var r=this;return new Promise((function(i){var o=[];if(t<=0||!e)i(o);else{var a,s,c,u=(s=-1,c=(a=e).length,function(){return++s<c&&!r.isCancel()?{value:a[s],key:s}:null}),l=!1,h=0,d=!1;A()}function f(e){return function(){if(null===e)throw new Error("Callback was already called.");var t=e;e=null;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];t.apply(this,r)}}function p(e,t){h-=1,e?(l=!0,o.push(e),i(o)):t==={}||l&&h<=0?(l=!0,i(o)):d||(r.isCancel()?i(o):A())}function g(e,t){n(e).then((function(e){t(null,e)})).catch((function(e){t(e)}))}function A(){for(d=!0;h<t&&!l&&!r.isCancel();){var e=u();if(null===e||o.length>0)return l=!0,void(h<=0&&i(o));h+=1,g(e.value,f(p))}d=!1}}))},s.cancel=function(e){this.options.cancelFlag=!0,a(this.multipartUploadStreams)&&this.multipartUploadStreams.forEach((function(e){!1===e.destroyed&&e.destroy({name:"cancel",message:"cancel"})})),this.multipartUploadStreams=[],e&&this.abortMultipartUpload(e.name,e.uploadId,e.options)},s.isCancel=function(){return this.options.cancelFlag},s.resetCancelFlag=function(){this.options.cancelFlag=!1},s._stop=function(){this.options.cancelFlag=!0},s._makeCancelEvent=function(){return{status:0,name:"cancel"}},s._makeAbortEvent=function(){return{status:0,name:"abort",message:"upload task has been abort"}}},{"./utils/isArray":59,"@babel/runtime/helpers/asyncToGenerator":70,"@babel/runtime/helpers/interopRequireDefault":71,"@babel/runtime/regenerator":74,"core-js/modules/es.array.for-each":238,"core-js/modules/es.array.iterator":242,"core-js/modules/es.function.name":249,"core-js/modules/es.object.to-string":254,"core-js/modules/es.promise":255,"core-js/modules/es.string.iterator":259,"core-js/modules/web.dom-collections.for-each":292,"core-js/modules/web.dom-collections.iterator":293,"regenerator-runtime/runtime":337}],47:[function(e,t,n){(function(t){"use strict";e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.sort"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.trim"),e("core-js/modules/web.dom-collections.for-each");var r=e("./../../shims/crypto/crypto.js"),i=e("is-type-of"),o=e("./utils/lowercaseKeyHeader").lowercaseKeyHeader;n.buildCanonicalizedResource=function(e,t){var n="".concat(e),r="?";return i.string(t)&&""!==t.trim()?n+=r+t:i.array(t)?(t.sort(),n+=r+t.join("&")):t&&Object.keys(t).sort((function(e,t){return e[0]>t[0]?1:e[0]<t[0]?-1:0})).forEach((function(e){n+=r+e,t[e]&&(n+="=".concat(t[e])),r="&"})),n},n.buildCanonicalString=function(e,t,n,r){var i=o((n=n||{}).headers),a=[],s={},c=[e.toUpperCase(),i["content-md5"]||"",i["content-type"],r||i["x-oss-date"]];return Object.keys(i).forEach((function(e){var t=e.toLowerCase();0===t.indexOf("x-oss-")&&(s[t]=String(i[e]).trim())})),Object.keys(s).sort().forEach((function(e){a.push("".concat(e,":").concat(s[e]))})),(c=c.concat(a)).push(this.buildCanonicalizedResource(t,n.parameters)),c.join("\n")},n.computeSignature=function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"utf-8",o=r.createHmac("sha1",e);return o.update(t.from(n,i)).digest("base64")},n.authorization=function(e,t,n,r){return"OSS ".concat(e,":").concat(this.computeSignature(t,n,r))},n._signatureForURL=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,a={},s=n.subResource,c=void 0===s?{}:s;if(n.process){var u="x-oss-process";c[u]=n.process}if(n.trafficLimit){var l="x-oss-traffic-limit";c[l]=n.trafficLimit}if(n.response&&Object.keys(n.response).forEach((function(e){var t="response-".concat(e.toLowerCase());c[t]=n.response[e]})),Object.keys(n).forEach((function(e){var t=e.toLowerCase(),r=n[e];0===t.indexOf("x-oss-")?a[t]=r:(0===t.indexOf("content-md5")||0===t.indexOf("content-type"))&&(a[e]=r)})),Object.prototype.hasOwnProperty.call(n,"security-token")&&(c["security-token"]=n["security-token"]),Object.prototype.hasOwnProperty.call(n,"callback")){var h={callbackUrl:encodeURI(n.callback.url),callbackBody:n.callback.body};if(n.callback.host&&(h.callbackHost=n.callback.host),n.callback.contentType&&(h.callbackBodyType=n.callback.contentType),c.callback=t.from(JSON.stringify(h)).toString("base64"),n.callback.customValue){var d={};Object.keys(n.callback.customValue).forEach((function(e){d["x:".concat(e)]=n.callback.customValue[e]})),c["callback-var"]=t.from(JSON.stringify(d)).toString("base64")}}var f=this.buildCanonicalString(n.method,r,{headers:a,parameters:c},i.toString());return{Signature:this.computeSignature(e,f,o),subResource:c}}}).call(this,e("buffer").Buffer)},{"./../../shims/crypto/crypto.js":387,"./utils/lowercaseKeyHeader":65,buffer:98,"core-js/modules/es.array.concat":234,"core-js/modules/es.array.for-each":238,"core-js/modules/es.array.index-of":241,"core-js/modules/es.array.join":243,"core-js/modules/es.array.sort":247,"core-js/modules/es.object.keys":253,"core-js/modules/es.object.to-string":254,"core-js/modules/es.regexp.to-string":257,"core-js/modules/es.string.trim":265,"core-js/modules/web.dom-collections.for-each":292,"is-type-of":392}],48:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.checkBucketName=void 0,n.checkBucketName=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t?/^[a-z0-9][a-z0-9-]{1,61}[a-z0-9]$/:/^[a-z0-9_][a-z0-9-_]{1,61}[a-z0-9_]$/;if(!n.test(e))throw new Error("The bucket must be conform to the specifications")}},{}],49:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.checkConfigValid=void 0;var r={endpoint:function(e){return"string"==typeof e?/^[a-zA-Z0-9._:/-]+$/.test(e):!!e.host&&/^[a-zA-Z0-9._:/-]+$/.test(e.host)},region:/^[a-zA-Z0-9\-_]+$/};n.checkConfigValid=function(e,t){if(r[t]&&!(r[t]instanceof Function?r[t](e):r[t].test(e)))throw new Error("The ".concat(t," must be conform to the specifications"))}},{}],50:[function(e,t,n){"use strict";e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.object.entries"),e("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(n,"__esModule",{value:!0}),n.checkObjectTag=void 0;var r=e("./checkValid").checkValid,i=e("./isObject").isObject,o=[{validator:function(e){if("string"!=typeof e)throw new Error("the key and value of the tag must be String")}},{pattern:/^[a-zA-Z0-9 +-=._:/]+$/,msg:"tag can contain letters, numbers, spaces, and the following symbols: plus sign (+), hyphen (-), equal sign (=), period (.), underscore (_), colon (:), and forward slash (/)"}],a={key:[].concat(o,[{pattern:/^.{1,128}$/,msg:"tag key can be a maximum of 128 bytes in length"}]),value:[].concat(o,[{pattern:/^.{0,256}$/,msg:"tag value can be a maximum of 256 bytes in length"}])};n.checkObjectTag=function(e){if(!i(e))throw new Error("tag must be Object");var t=Object.entries(e);if(t.length>10)throw new Error("maximum of 10 tags for a object");var n=["key","value"];t.forEach((function(e){e.forEach((function(e,t){r(e,a[n[t]])}))}))}},{"./checkValid":51,"./isObject":64,"core-js/modules/es.array.concat":234,"core-js/modules/es.array.for-each":238,"core-js/modules/es.object.entries":252,"core-js/modules/web.dom-collections.for-each":292}],51:[function(e,t,n){"use strict";e("core-js/modules/es.array.for-each"),e("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(n,"__esModule",{value:!0}),n.checkValid=void 0,n.checkValid=function(e,t){t.forEach((function(t){if(t.validator)t.validator(e);else if(t.pattern&&!t.pattern.test(e))throw new Error(t.msg)}))}},{"core-js/modules/es.array.for-each":238,"core-js/modules/web.dom-collections.for-each":292}],52:[function(e,t,n){(function(t){"use strict";e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.string.includes"),Object.defineProperty(n,"__esModule",{value:!0}),n.createRequest=void 0;var r=e("./../../../shims/crypto/crypto.js"),i=e("debug")("ali-oss"),o=e("mime"),a=e("dateformat"),s=e("copy-to"),c=e("path"),u=e("./encoder").encoder,l=e("./isIP").isIP,h=e("./setRegion").setRegion,d=e("../client/getReqUrl").getReqUrl;function f(e,t){return e[t]||e[t.toLowerCase()]}n.createRequest=function(e){var n=new Date;this.options.amendTimeSkewed&&(n=+new Date+this.options.amendTimeSkewed);var p={"x-oss-date":a(n,"UTC:ddd, dd mmm yyyy HH:MM:ss 'GMT'"),"x-oss-user-agent":this.userAgent};this.userAgent.includes("nodejs")&&(p["User-Agent"]=this.userAgent),this.options.isRequestPay&&Object.assign(p,{"x-oss-request-payer":"requester"}),this.options.stsToken&&(p["x-oss-security-token"]=this.options.stsToken),s(e.headers).to(p),f(p,"Content-Type")||(e.mime&&e.mime.indexOf("/")>0?p["Content-Type"]=e.mime:p["Content-Type"]=o.getType(e.mime||c.extname(e.object||""))),f(p,"Content-Type")||function(e,t){delete e[t],delete e[t.toLowerCase()]}(p,"Content-Type"),e.content&&(e.disabledMD5||(p["Content-MD5"]=r.createHash("md5").update(t.from(e.content,"utf8")).digest("base64")),p["Content-Length"]||(p["Content-Length"]=e.content.length));var g=Object.prototype.hasOwnProperty;for(var A in p)p[A]&&g.call(p,A)&&(p[A]=u(String(p[A]),this.options.headerEncoding));var v=this._getResource(e);if(p.authorization=this.authorization(e.method,v,e.subres,p,this.options.headerEncoding),l(this.options.endpoint.hostname)){var m=this.options,y=m.region,b=m.internal,_=m.secure,E=h(y,b,_);p.host="".concat(e.bucket,".").concat(E.host)}var w=d.bind(this)(e);i("request %s %s, with headers %j, !!stream: %s",e.method,w,p,!!e.stream);var I=e.timeout||this.options.timeout,C={method:e.method,content:e.content,stream:e.stream,headers:p,timeout:I,writeStream:e.writeStream,customResponse:e.customResponse,ctx:e.ctx||this.ctx};return this.agent&&(C.agent=this.agent),this.httpsAgent&&(C.httpsAgent=this.httpsAgent),C.enableProxy=!!this.options.enableProxy,C.proxy=this.options.proxy?this.options.proxy:null,{url:w,params:C}}}).call(this,e("buffer").Buffer)},{"../client/getReqUrl":24,"./../../../shims/crypto/crypto.js":387,"./encoder":55,"./isIP":63,"./setRegion":68,buffer:98,"copy-to":101,"core-js/modules/es.array.concat":234,"core-js/modules/es.array.includes":240,"core-js/modules/es.array.index-of":241,"core-js/modules/es.object.assign":251,"core-js/modules/es.string.includes":258,dateformat:295,debug:391,mime:313,path:316}],53:[function(e,t,n){"use strict";e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.object.entries"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.replace"),e("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(n,"__esModule",{value:!0}),n.dataFix=void 0;var r=e("./isObject"),i=["true","TRUE","1",1],o=["false","FALSE","0",0];n.dataFix=function e(t,n,a){if(r.isObject(t)){var s=n.remove,c=void 0===s?[]:s,u=n.rename,l=void 0===u?{}:u,h=n.camel,d=void 0===h?[]:h,f=n.bool,p=void 0===f?[]:f,g=n.lowerFirst,A=void 0!==g&&g;return c.forEach((function(e){return delete t[e]})),Object.entries(l).forEach((function(e){t[e[0]]&&(t[e[1]]||(t[e[1]]=t[e[0]],delete t[e[0]]))})),d.forEach((function(e){if(t[e]){var n=e.replace(/^(.)/,(function(e){return e.toLowerCase()})).replace(/-(\w)/g,(function(e,t){return t.toUpperCase()}));t[n]||(t[n]=t[e])}})),p.forEach((function(e){var n;t[e]=!!(n=t[e])&&(!!i.includes(n)||!o.includes(n)&&n)})),"function"==typeof a&&a(t),function(e,t){t&&Object.keys(e).forEach((function(t){var n=t.replace(/^\w/,(function(e){return e.toLowerCase()}));void 0===e[n]&&(e[n]=e[t],delete e[t])}))}(t,A),e}}},{"./isObject":64,"core-js/modules/es.array.for-each":238,"core-js/modules/es.array.includes":240,"core-js/modules/es.object.entries":252,"core-js/modules/es.object.keys":253,"core-js/modules/es.regexp.exec":256,"core-js/modules/es.string.replace":261,"core-js/modules/web.dom-collections.for-each":292}],54:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.keys"),e("core-js/modules/web.dom-collections.for-each");var i=r(e("@babel/runtime/helpers/typeof"));Object.defineProperty(n,"__esModule",{value:!0}),n.deepCopyWith=n.deepCopy=void 0;var o=e("./isBuffer");n.deepCopy=function(e){if(null===e||"object"!==(0,i.default)(e))return e;if(o.isBuffer(e))return e.slice();var t=Array.isArray(e)?[]:{};return Object.keys(e).forEach((function(r){t[r]=n.deepCopy(e[r])})),t},n.deepCopyWith=function(e,t){return t?function e(n,r,a){var s=t(n,r,a);if(void 0!==s)return s;if(null===n||"object"!==(0,i.default)(n))return n;if(o.isBuffer(n))return n.slice();var c=Array.isArray(n)?[]:{};return Object.keys(n).forEach((function(t){c[t]=e(n[t],t,n)})),c}(e,"",null):n.deepCopy(e)}},{"./isBuffer":61,"@babel/runtime/helpers/interopRequireDefault":71,"@babel/runtime/helpers/typeof":72,"core-js/modules/es.array.for-each":238,"core-js/modules/es.array.slice":246,"core-js/modules/es.object.keys":253,"core-js/modules/web.dom-collections.for-each":292}],55:[function(e,t,n){(function(t){"use strict";e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),Object.defineProperty(n,"__esModule",{value:!0}),n.encoder=void 0,n.encoder=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return"utf-8"===n?e:t.from(e).toString("latin1")}}).call(this,e("buffer").Buffer)},{buffer:98,"core-js/modules/es.object.to-string":254,"core-js/modules/es.regexp.to-string":257}],56:[function(e,t,n){"use strict";e("core-js/modules/es.array.map"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.replace"),Object.defineProperty(n,"__esModule",{value:!0}),n.formatInventoryConfig=void 0;var r=e("../utils/dataFix"),i=e("../utils/isObject"),o=e("../utils/isArray"),a=e("../utils/formatObjKey");function s(e){return r.dataFix(e,{bool:["IsEnabled"]},(function(e){var t,n;e.prefix=e.Filter.Prefix,delete e.Filter,e.OSSBucketDestination=e.Destination.OSSBucketDestination,e.OSSBucketDestination.rolename=e.OSSBucketDestination.RoleArn.replace(/.*\//,""),delete e.OSSBucketDestination.RoleArn,e.OSSBucketDestination.bucket=e.OSSBucketDestination.Bucket.replace(/.*:::/,""),delete e.OSSBucketDestination.Bucket,delete e.Destination,e.frequency=e.Schedule.Frequency,delete e.Schedule.Frequency,(null===(t=null==e?void 0:e.OptionalFields)||void 0===t?void 0:t.Field)&&!o.isArray(null===(n=e.OptionalFields)||void 0===n?void 0:n.Field)&&(e.OptionalFields.Field=[e.OptionalFields.Field])})),e=a.formatObjKey(e,"firstLowerCase",{exclude:["OSSBucketDestination","SSE-OSS","SSE-KMS"]})}n.formatInventoryConfig=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t&&i.isObject(e)&&(e=[e]),e=o.isArray(e)?e.map(s):s(e)}},{"../utils/dataFix":53,"../utils/formatObjKey":57,"../utils/isArray":59,"../utils/isObject":64,"core-js/modules/es.array.map":245,"core-js/modules/es.regexp.exec":256,"core-js/modules/es.string.replace":261}],57:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.replace"),e("core-js/modules/web.dom-collections.for-each");var i=r(e("@babel/runtime/helpers/typeof"));Object.defineProperty(n,"__esModule",{value:!0}),n.formatObjKey=void 0,n.formatObjKey=function e(t,n,r){if(null===t||"object"!==(0,i.default)(t))return t;var o;if(Array.isArray(t)){o=[];for(var a=0;a<t.length;a++)o.push(e(t[a],n,r))}else o={},Object.keys(t).forEach((function(i){o[function(e,t,n){var r;return n&&(null===(r=n.exclude)||void 0===r?void 0:r.includes(e))||("firstUpperCase"===t?e=e.replace(/^./,(function(e){return e.toUpperCase()})):"firstLowerCase"===t&&(e=e.replace(/^./,(function(e){return e.toLowerCase()})))),e}(i,n,r)]=e(t[i],n,r)}));return o}},{"@babel/runtime/helpers/interopRequireDefault":71,"@babel/runtime/helpers/typeof":72,"core-js/modules/es.array.for-each":238,"core-js/modules/es.array.includes":240,"core-js/modules/es.object.keys":253,"core-js/modules/es.regexp.exec":256,"core-js/modules/es.string.includes":258,"core-js/modules/es.string.replace":261,"core-js/modules/web.dom-collections.for-each":292}],58:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getStrBytesCount=void 0,n.getStrBytesCount=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charAt(n);/^[\u00-\uff]$/.test(r)?t+=1:t+=2}return t}},{}],59:[function(e,t,n){"use strict";e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),Object.defineProperty(n,"__esModule",{value:!0}),n.isArray=void 0,n.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{"core-js/modules/es.object.to-string":254,"core-js/modules/es.regexp.to-string":257}],60:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.isBlob=void 0,n.isBlob=function(e){return"undefined"!=typeof Blob&&e instanceof Blob}},{}],61:[function(e,t,n){(function(e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.isBuffer=void 0,n.isBuffer=function(t){return e.isBuffer(t)}}).call(this,{isBuffer:e("../../../node_modules/is-buffer/index.js")})},{"../../../node_modules/is-buffer/index.js":308}],62:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.isFile=void 0,n.isFile=function(e){return"undefined"!=typeof File&&e instanceof File}},{}],63:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.isIP=void 0,n.isIP=function(e){return/^(25[0-5]|2[0-4]\d|[0-1]?\d?\d)(\.(25[0-5]|2[0-4]\d|[0-1]?\d?\d)){3}$/.test(e)||/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/.test(e)}},{}],64:[function(e,t,n){"use strict";e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),Object.defineProperty(n,"__esModule",{value:!0}),n.isObject=void 0,n.isObject=function(e){return"[object Object]"===Object.prototype.toString.call(e)}},{"core-js/modules/es.object.to-string":254,"core-js/modules/es.regexp.to-string":257}],65:[function(e,t,n){"use strict";e("core-js/modules/es.array.for-each"),e("core-js/modules/es.object.keys"),e("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(n,"__esModule",{value:!0}),n.lowercaseKeyHeader=void 0;var r=e("./isObject");n.lowercaseKeyHeader=function(e){var t={};return r.isObject(e)&&Object.keys(e).forEach((function(n){t[n.toLowerCase()]=e[n]})),t}},{"./isObject":64,"core-js/modules/es.array.for-each":238,"core-js/modules/es.object.keys":253,"core-js/modules/web.dom-collections.for-each":292}],66:[function(e,t,n){"use strict";e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.replace"),e("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(n,"__esModule",{value:!0}),n.obj2xml=void 0;var r=e("./formatObjKey");function i(e){return Object.prototype.toString.call(e).replace(/(.*? |])/g,"").toLowerCase()}n.obj2xml=function e(t,n){var o="";return n&&n.headers&&(o='<?xml version="1.0" encoding="UTF-8"?>\n'),n&&n.firstUpperCase&&(t=r.formatObjKey(t,"firstUpperCase")),"object"===i(t)?Object.keys(t).forEach((function(n){"undefined"!==i(t[n])&&"null"!==i(t[n])&&("string"===i(t[n])||"number"===i(t[n])?o+="<".concat(n,">").concat(t[n],"</").concat(n,">"):"object"===i(t[n])?o+="<".concat(n,">").concat(e(t[n]),"</").concat(n,">"):"array"===i(t[n])?o+=t[n].map((function(t){return"<".concat(n,">").concat(e(t),"</").concat(n,">")})).join(""):o+="<".concat(n,">").concat(t[n].toString(),"</").concat(n,">"))})):o+=t.toString(),o}},{"./formatObjKey":57,"core-js/modules/es.array.concat":234,"core-js/modules/es.array.for-each":238,"core-js/modules/es.array.join":243,"core-js/modules/es.array.map":245,"core-js/modules/es.object.keys":253,"core-js/modules/es.object.to-string":254,"core-js/modules/es.regexp.exec":256,"core-js/modules/es.regexp.to-string":257,"core-js/modules/es.string.replace":261,"core-js/modules/web.dom-collections.for-each":292}],67:[function(e,t,n){"use strict";e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),Object.defineProperty(n,"__esModule",{value:!0}),n.retry=void 0,n.retry=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=0,i=n.retryDelay,o=void 0===i?500:i,a=n.errorHandler,s=void 0===a?function(){return!0}:a,c=function n(){for(var i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];return new Promise((function(i,c){e.apply(void 0,a).then((function(e){r=0,i(e)})).catch((function(e){r<t&&s(e)?(r++,setTimeout((function(){i(n.apply(void 0,a))}),o)):(r=0,c(e))}))}))};return c}},{"core-js/modules/es.object.to-string":254,"core-js/modules/es.promise":255}],68:[function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.setRegion=void 0;var i=r(e("url")),o=e("./checkConfigValid");n.setRegion=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];o.checkConfigValid(e,"region");var r=n?"https://":"http://",a=t?"-internal.aliyuncs.com":".aliyuncs.com",s="vpc100-oss-cn-";return e.substr(0,s.length)===s&&(a=".aliyuncs.com"),i.default.parse(r+e+a)}},{"./checkConfigValid":49,url:394}],69:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.find"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.keys");var i=r(e("@babel/runtime/regenerator"));e("regenerator-runtime/runtime");var o=r(e("@babel/runtime/helpers/asyncToGenerator"));Object.defineProperty(n,"__esModule",{value:!0}),n.setSTSToken=void 0;var a=e("./formatObjKey");function s(){return(s=(0,o.default)(i.default.mark((function e(){var t;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.options||(this.options={}),e.next=3,this.options.refreshSTSToken();case 3:t=e.sent,(t=a.formatObjKey(t,"firstLowerCase")).securityToken&&(t.stsToken=t.securityToken),c(t),Object.assign(this.options,t);case 8:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function c(e){var t=Object.keys(e);["accessKeySecret","accessKeyId","stsToken"].forEach((function(e){if(!t.find((function(t){return t===e})))throw Error("refreshSTSToken must return contains ".concat(e))}))}n.setSTSToken=function(){return s.apply(this,arguments)}},{"./formatObjKey":57,"@babel/runtime/helpers/asyncToGenerator":70,"@babel/runtime/helpers/interopRequireDefault":71,"@babel/runtime/regenerator":74,"core-js/modules/es.array.find":237,"core-js/modules/es.array.for-each":238,"core-js/modules/es.object.assign":251,"core-js/modules/es.object.keys":253,"regenerator-runtime/runtime":337}],70:[function(e,t,n){function r(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}t.exports=function(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var a=e.apply(t,n);function s(e){r(a,i,o,s,c,"next",e)}function c(e){r(a,i,o,s,c,"throw",e)}s(void 0)}))}}},{}],71:[function(e,t,n){t.exports=function(e){return e&&e.__esModule?e:{default:e}}},{}],72:[function(e,t,n){function r(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=r=function(e){return typeof e}:t.exports=r=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}t.exports=r},{}],73:[function(e,t,n){var r=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof A?t:A,o=Object.create(i.prototype),a=new R(r||[]);return o._invoke=function(e,t,n){var r=h;return function(i,o){if(r===f)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw o;return O()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=C(a,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===h)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=f;var c=l(e,t,n);if("normal"===c.type){if(r=n.done?p:d,c.arg===g)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=p,n.method="throw",n.arg=c.arg)}}}(e,n,a),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var h="suspendedStart",d="suspendedYield",f="executing",p="completed",g={};function A(){}function v(){}function m(){}var y={};y[o]=function(){return this};var b=Object.getPrototypeOf,_=b&&b(b(k([])));_&&_!==n&&r.call(_,o)&&(y=_);var E=m.prototype=A.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function I(e,t){function n(i,o,a,s){var c=l(e[i],e,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&r.call(h,"__await")?t.resolve(h.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(h).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}var i;this._invoke=function(e,r){function o(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(o,o):o()}}function C(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method))return g;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,g;var o=i.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function k(e){if(e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:O}}function O(){return{value:t,done:!0}}return v.prototype=E.constructor=m,m.constructor=v,v.displayName=c(m,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,s,"GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},w(I.prototype),I.prototype[a]=function(){return this},e.AsyncIterator=I,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new I(u(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(E),c(E,s,"Generator"),E[o]=function(){return this},E.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,R.prototype={constructor:R,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;T(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:k(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}("object"==typeof t?t.exports:{});try{regeneratorRuntime=r}catch(e){Function("r","regeneratorRuntime = r")(r)}},{}],74:[function(e,t,n){t.exports=e("regenerator-runtime")},{"regenerator-runtime":73}],75:[function(e,t,n){function r(){}t.exports=r,t.exports.HttpsAgent=r},{}],76:[function(e,t,n){"use strict";n.byteLength=function(e){var t=u(e),n=t[0],r=t[1];return 3*(n+r)/4-r},n.toByteArray=function(e){var t,n,r=u(e),a=r[0],s=r[1],c=new o(function(e,t,n){return 3*(t+n)/4-n}(0,a,s)),l=0,h=s>0?a-4:a;for(n=0;n<h;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],c[l++]=t>>16&255,c[l++]=t>>8&255,c[l++]=255&t;return 2===s&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,c[l++]=255&t),1===s&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,c[l++]=t>>8&255,c[l++]=255&t),c},n.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],a=16383,s=0,c=n-i;s<c;s+=a)o.push(l(e,s,s+a>c?c:s+a));return 1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,c=a.length;s<c;++s)r[s]=a[s],i[a.charCodeAt(s)]=s;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e,t,n){for(var i,o,a=[],s=t;s<n;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},{}],77:[function(e,t,n){var r,i,o;r=this,i="bowser",o=function(){var e=!0;function t(t){function n(e){var n=t.match(e);return n&&n.length>1&&n[1]||""}function r(e){var n=t.match(e);return n&&n.length>1&&n[2]||""}var i,a=n(/(ipod|iphone|ipad)/i).toLowerCase(),s=!/like android/i.test(t)&&/android/i.test(t),c=/nexus\s*[0-6]\s*/i.test(t),u=!c&&/nexus\s*[0-9]+/i.test(t),l=/CrOS/.test(t),h=/silk/i.test(t),d=/sailfish/i.test(t),f=/tizen/i.test(t),p=/(web|hpw)(o|0)s/i.test(t),g=/windows phone/i.test(t),A=(/SamsungBrowser/i.test(t),!g&&/windows/i.test(t)),v=!a&&!h&&/macintosh/i.test(t),m=!s&&!d&&!f&&!p&&/linux/i.test(t),y=r(/edg([ea]|ios)\/(\d+(\.\d+)?)/i),b=n(/version\/(\d+(\.\d+)?)/i),_=/tablet/i.test(t)&&!/tablet pc/i.test(t),E=!_&&/[^-]mobi/i.test(t),w=/xbox/i.test(t);/opera/i.test(t)?i={name:"Opera",opera:e,version:b||n(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/opr\/|opios/i.test(t)?i={name:"Opera",opera:e,version:n(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||b}:/SamsungBrowser/i.test(t)?i={name:"Samsung Internet for Android",samsungBrowser:e,version:b||n(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)}:/Whale/i.test(t)?i={name:"NAVER Whale browser",whale:e,version:n(/(?:whale)[\s\/](\d+(?:\.\d+)+)/i)}:/MZBrowser/i.test(t)?i={name:"MZ Browser",mzbrowser:e,version:n(/(?:MZBrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/coast/i.test(t)?i={name:"Opera Coast",coast:e,version:b||n(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/focus/i.test(t)?i={name:"Focus",focus:e,version:n(/(?:focus)[\s\/](\d+(?:\.\d+)+)/i)}:/yabrowser/i.test(t)?i={name:"Yandex Browser",yandexbrowser:e,version:b||n(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(t)?i={name:"UC Browser",ucbrowser:e,version:n(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(t)?i={name:"Maxthon",maxthon:e,version:n(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(t)?i={name:"Epiphany",epiphany:e,version:n(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(t)?i={name:"Puffin",puffin:e,version:n(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(t)?i={name:"Sleipnir",sleipnir:e,version:n(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(t)?i={name:"K-Meleon",kMeleon:e,version:n(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:g?(i={name:"Windows Phone",osname:"Windows Phone",windowsphone:e},y?(i.msedge=e,i.version=y):(i.msie=e,i.version=n(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(t)?i={name:"Internet Explorer",msie:e,version:n(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:l?i={name:"Chrome",osname:"Chrome OS",chromeos:e,chromeBook:e,chrome:e,version:n(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/edg([ea]|ios)/i.test(t)?i={name:"Microsoft Edge",msedge:e,version:y}:/vivaldi/i.test(t)?i={name:"Vivaldi",vivaldi:e,version:n(/vivaldi\/(\d+(\.\d+)?)/i)||b}:d?i={name:"Sailfish",osname:"Sailfish OS",sailfish:e,version:n(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(t)?i={name:"SeaMonkey",seamonkey:e,version:n(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(t)?(i={name:"Firefox",firefox:e,version:n(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(t)&&(i.firefoxos=e,i.osname="Firefox OS")):h?i={name:"Amazon Silk",silk:e,version:n(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(t)?i={name:"PhantomJS",phantom:e,version:n(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(t)?i={name:"SlimerJS",slimer:e,version:n(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(t)||/rim\stablet/i.test(t)?i={name:"BlackBerry",osname:"BlackBerry OS",blackberry:e,version:b||n(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:p?(i={name:"WebOS",osname:"WebOS",webos:e,version:b||n(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(t)&&(i.touchpad=e)):/bada/i.test(t)?i={name:"Bada",osname:"Bada",bada:e,version:n(/dolfin\/(\d+(\.\d+)?)/i)}:f?i={name:"Tizen",osname:"Tizen",tizen:e,version:n(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||b}:/qupzilla/i.test(t)?i={name:"QupZilla",qupzilla:e,version:n(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||b}:/chromium/i.test(t)?i={name:"Chromium",chromium:e,version:n(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||b}:/chrome|crios|crmo/i.test(t)?i={name:"Chrome",chrome:e,version:n(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:s?i={name:"Android",version:b}:/safari|applewebkit/i.test(t)?(i={name:"Safari",safari:e},b&&(i.version=b)):a?(i={name:"iphone"==a?"iPhone":"ipad"==a?"iPad":"iPod"},b&&(i.version=b)):i=/googlebot/i.test(t)?{name:"Googlebot",googlebot:e,version:n(/googlebot\/(\d+(\.\d+))/i)||b}:{name:n(/^(.*)\/(.*) /),version:r(/^(.*)\/(.*) /)},!i.msedge&&/(apple)?webkit/i.test(t)?(/(apple)?webkit\/537\.36/i.test(t)?(i.name=i.name||"Blink",i.blink=e):(i.name=i.name||"Webkit",i.webkit=e),!i.version&&b&&(i.version=b)):!i.opera&&/gecko\//i.test(t)&&(i.name=i.name||"Gecko",i.gecko=e,i.version=i.version||n(/gecko\/(\d+(\.\d+)?)/i)),i.windowsphone||!s&&!i.silk?!i.windowsphone&&a?(i[a]=e,i.ios=e,i.osname="iOS"):v?(i.mac=e,i.osname="macOS"):w?(i.xbox=e,i.osname="Xbox"):A?(i.windows=e,i.osname="Windows"):m&&(i.linux=e,i.osname="Linux"):(i.android=e,i.osname="Android");var I="";i.windows?I=function(e){switch(e){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}(n(/Windows ((NT|XP)( \d\d?.\d)?)/i)):i.windowsphone?I=n(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):i.mac?I=(I=n(/Mac OS X (\d+([_\.\s]\d+)*)/i)).replace(/[_\s]/g,"."):a?I=(I=n(/os (\d+([_\s]\d+)*) like mac os x/i)).replace(/[_\s]/g,"."):s?I=n(/android[ \/-](\d+(\.\d+)*)/i):i.webos?I=n(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):i.blackberry?I=n(/rim\stablet\sos\s(\d+(\.\d+)*)/i):i.bada?I=n(/bada\/(\d+(\.\d+)*)/i):i.tizen&&(I=n(/tizen[\/\s](\d+(\.\d+)*)/i)),I&&(i.osversion=I);var C=!i.windows&&I.split(".")[0];return _||u||"ipad"==a||s&&(3==C||C>=4&&!E)||i.silk?i.tablet=e:(E||"iphone"==a||"ipod"==a||s||c||i.blackberry||i.webos||i.bada)&&(i.mobile=e),i.msedge||i.msie&&i.version>=10||i.yandexbrowser&&i.version>=15||i.vivaldi&&i.version>=1||i.chrome&&i.version>=20||i.samsungBrowser&&i.version>=4||i.whale&&1===o([i.version,"1.0"])||i.mzbrowser&&1===o([i.version,"6.0"])||i.focus&&1===o([i.version,"1.0"])||i.firefox&&i.version>=20||i.safari&&i.version>=6||i.opera&&i.version>=10||i.ios&&i.osversion&&i.osversion.split(".")[0]>=6||i.blackberry&&i.version>=10.1||i.chromium&&i.version>=20?i.a=e:i.msie&&i.version<10||i.chrome&&i.version<20||i.firefox&&i.version<20||i.safari&&i.version<6||i.opera&&i.version<10||i.ios&&i.osversion&&i.osversion.split(".")[0]<6||i.chromium&&i.version<20?i.c=e:i.x=e,i}var n=t("undefined"!=typeof navigator&&navigator.userAgent||"");function r(e){return e.split(".").length}function i(e,t){var n,r=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(n=0;n<e.length;n++)r.push(t(e[n]));return r}function o(e){for(var t=Math.max(r(e[0]),r(e[1])),n=i(e,(function(e){var n=t-r(e);return i((e+=new Array(n+1).join(".0")).split("."),(function(e){return new Array(20-e.length).join("0")+e})).reverse()}));--t>=0;){if(n[0][t]>n[1][t])return 1;if(n[0][t]!==n[1][t])return-1;if(0===t)return 0}}function a(e,r,i){var a=n;"string"==typeof r&&(i=r,r=void 0),void 0===r&&(r=!1),i&&(a=t(i));var s=""+a.version;for(var c in e)if(e.hasOwnProperty(c)&&a[c]){if("string"!=typeof e[c])throw new Error("Browser version in the minVersion map should be a string: "+c+": "+String(e));return o([s,e[c]])<0}return r}return n.test=function(e){for(var t=0;t<e.length;++t){var r=e[t];if("string"==typeof r&&r in n)return!0}return!1},n.isUnsupportedBrowser=a,n.compareVersions=o,n.check=function(e,t,n){return!a(e,t,n)},n._detect=t,n.detect=t,n},void 0!==t&&t.exports?t.exports=o():"function"==typeof define&&define.amd?define(i,o):r[i]=o()},{}],78:[function(e,t,n){},{}],79:[function(e,t,n){(function(t){var r=e("./lib/request"),i=e("./lib/response"),o=e("xtend"),a=e("builtin-status-codes"),s=e("url"),c=n;c.request=function(e,n){e="string"==typeof e?s.parse(e):o(e);var i=-1===t.location.protocol.search(/^https?:$/)?"http:":"",a=e.protocol||i,c=e.hostname||e.host,u=e.port,l=e.path||"/";c&&-1!==c.indexOf(":")&&(c="["+c+"]"),e.url=(c?a+"//"+c:"")+(u?":"+u:"")+l,e.method=(e.method||"GET").toUpperCase(),e.headers=e.headers||{};var h=new r(e);return n&&h.on("response",n),h},c.get=function(e,t){var n=c.request(e,t);return n.end(),n},c.ClientRequest=r,c.IncomingMessage=i.IncomingMessage,c.Agent=function(){},c.Agent.defaultMaxSockets=4,c.globalAgent=new c.Agent,c.STATUS_CODES=a,c.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}).call(this,void 0!==__webpack_require__.g?__webpack_require__.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./lib/request":81,"./lib/response":82,"builtin-status-codes":99,url:394,xtend:386}],80:[function(e,t,n){(function(e){var t;function r(){if(void 0!==t)return t;if(e.XMLHttpRequest){t=new e.XMLHttpRequest;try{t.open("GET",e.XDomainRequest?"/":"https://example.com")}catch(e){t=null}}else t=null;return t}function i(e){var t=r();if(!t)return!1;try{return t.responseType=e,t.responseType===e}catch(e){}return!1}function o(e){return"function"==typeof e}n.fetch=o(e.fetch)&&o(e.ReadableStream),n.writableStream=o(e.WritableStream),n.abortController=o(e.AbortController),n.arraybuffer=n.fetch||i("arraybuffer"),n.msstream=!n.fetch&&i("ms-stream"),n.mozchunkedarraybuffer=!n.fetch&&i("moz-chunked-arraybuffer"),n.overrideMimeType=n.fetch||!!r()&&o(r().overrideMimeType),t=null}).call(this,void 0!==__webpack_require__.g?__webpack_require__.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],81:[function(e,t,n){(function(n,r,i){var o=e("./capability"),a=e("inherits"),s=e("./response"),c=e("readable-stream"),u=s.IncomingMessage,l=s.readyStates,h=t.exports=function(e){var t,n=this;c.Writable.call(n),n._opts=e,n._body=[],n._headers={},e.auth&&n.setHeader("Authorization","Basic "+i.from(e.auth).toString("base64")),Object.keys(e.headers).forEach((function(t){n.setHeader(t,e.headers[t])}));var r=!0;if("disable-fetch"===e.mode||"requestTimeout"in e&&!o.abortController)r=!1,t=!0;else if("prefer-streaming"===e.mode)t=!1;else if("allow-wrong-content-type"===e.mode)t=!o.overrideMimeType;else{if(e.mode&&"default"!==e.mode&&"prefer-fast"!==e.mode)throw new Error("Invalid value for opts.mode");t=!0}n._mode=function(e,t){return o.fetch&&t?"fetch":o.mozchunkedarraybuffer?"moz-chunked-arraybuffer":o.msstream?"ms-stream":o.arraybuffer&&e?"arraybuffer":"text"}(t,r),n._fetchTimer=null,n.on("finish",(function(){n._onFinish()}))};a(h,c.Writable),h.prototype.setHeader=function(e,t){var n=e.toLowerCase();-1===d.indexOf(n)&&(this._headers[n]={name:e,value:t})},h.prototype.getHeader=function(e){var t=this._headers[e.toLowerCase()];return t?t.value:null},h.prototype.removeHeader=function(e){delete this._headers[e.toLowerCase()]},h.prototype._onFinish=function(){var e=this;if(!e._destroyed){var t=e._opts,i=e._headers,a=null;"GET"!==t.method&&"HEAD"!==t.method&&(a=new Blob(e._body,{type:(i["content-type"]||{}).value||""}));var s=[];if(Object.keys(i).forEach((function(e){var t=i[e].name,n=i[e].value;Array.isArray(n)?n.forEach((function(e){s.push([t,e])})):s.push([t,n])})),"fetch"===e._mode){var c=null;if(o.abortController){var u=new AbortController;c=u.signal,e._fetchAbortController=u,"requestTimeout"in t&&0!==t.requestTimeout&&(e._fetchTimer=r.setTimeout((function(){e.emit("requestTimeout"),e._fetchAbortController&&e._fetchAbortController.abort()}),t.requestTimeout))}r.fetch(e._opts.url,{method:e._opts.method,headers:s,body:a||void 0,mode:"cors",credentials:t.withCredentials?"include":"same-origin",signal:c}).then((function(t){e._fetchResponse=t,e._connect()}),(function(t){r.clearTimeout(e._fetchTimer),e._destroyed||e.emit("error",t)}))}else{var h=e._xhr=new r.XMLHttpRequest;try{h.open(e._opts.method,e._opts.url,!0)}catch(t){return void n.nextTick((function(){e.emit("error",t)}))}"responseType"in h&&(h.responseType=e._mode),"withCredentials"in h&&(h.withCredentials=!!t.withCredentials),"text"===e._mode&&"overrideMimeType"in h&&h.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in t&&(h.timeout=t.requestTimeout,h.ontimeout=function(){e.emit("requestTimeout")}),s.forEach((function(e){h.setRequestHeader(e[0],e[1])})),e._response=null,h.onreadystatechange=function(){switch(h.readyState){case l.LOADING:case l.DONE:e._onXHRProgress()}},"moz-chunked-arraybuffer"===e._mode&&(h.onprogress=function(){e._onXHRProgress()}),h.onerror=function(){e._destroyed||e.emit("error",new Error("XHR error"))};try{h.send(a)}catch(t){return void n.nextTick((function(){e.emit("error",t)}))}}}},h.prototype._onXHRProgress=function(){var e=this;(function(e){try{var t=e.status;return null!==t&&0!==t}catch(e){return!1}})(e._xhr)&&!e._destroyed&&(e._response||e._connect(),e._response._onXHRProgress())},h.prototype._connect=function(){var e=this;e._destroyed||(e._response=new u(e._xhr,e._fetchResponse,e._mode,e._fetchTimer),e._response.on("error",(function(t){e.emit("error",t)})),e.emit("response",e._response))},h.prototype._write=function(e,t,n){this._body.push(e),n()},h.prototype.abort=h.prototype.destroy=function(){var e=this;e._destroyed=!0,r.clearTimeout(e._fetchTimer),e._response&&(e._response._destroyed=!0),e._xhr?e._xhr.abort():e._fetchAbortController&&e._fetchAbortController.abort()},h.prototype.end=function(e,t,n){"function"==typeof e&&(n=e,e=void 0),c.Writable.prototype.end.call(this,e,t,n)},h.prototype.flushHeaders=function(){},h.prototype.setTimeout=function(){},h.prototype.setNoDelay=function(){},h.prototype.setSocketKeepAlive=function(){};var d=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"]}).call(this,e("_process"),void 0!==__webpack_require__.g?__webpack_require__.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer)},{"./capability":80,"./response":82,_process:393,buffer:98,inherits:307,"readable-stream":97}],82:[function(e,t,n){(function(t,r,i){var o=e("./capability"),a=e("inherits"),s=e("readable-stream"),c=n.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},u=n.IncomingMessage=function(e,n,a,c){var u=this;if(s.Readable.call(u),u._mode=a,u.headers={},u.rawHeaders=[],u.trailers={},u.rawTrailers=[],u.on("end",(function(){t.nextTick((function(){u.emit("close")}))})),"fetch"===a){if(u._fetchResponse=n,u.url=n.url,u.statusCode=n.status,u.statusMessage=n.statusText,n.headers.forEach((function(e,t){u.headers[t.toLowerCase()]=e,u.rawHeaders.push(t,e)})),o.writableStream){var l=new WritableStream({write:function(e){return new Promise((function(t,n){u._destroyed?n():u.push(i.from(e))?t():u._resumeFetch=t}))},close:function(){r.clearTimeout(c),u._destroyed||u.push(null)},abort:function(e){u._destroyed||u.emit("error",e)}});try{return void n.body.pipeTo(l).catch((function(e){r.clearTimeout(c),u._destroyed||u.emit("error",e)}))}catch(e){}}var h=n.body.getReader();!function e(){h.read().then((function(t){if(!u._destroyed){if(t.done)return r.clearTimeout(c),void u.push(null);u.push(i.from(t.value)),e()}})).catch((function(e){r.clearTimeout(c),u._destroyed||u.emit("error",e)}))}()}else if(u._xhr=e,u._pos=0,u.url=e.responseURL,u.statusCode=e.status,u.statusMessage=e.statusText,e.getAllResponseHeaders().split(/\r?\n/).forEach((function(e){var t=e.match(/^([^:]+):\s*(.*)/);if(t){var n=t[1].toLowerCase();"set-cookie"===n?(void 0===u.headers[n]&&(u.headers[n]=[]),u.headers[n].push(t[2])):void 0!==u.headers[n]?u.headers[n]+=", "+t[2]:u.headers[n]=t[2],u.rawHeaders.push(t[1],t[2])}})),u._charset="x-user-defined",!o.overrideMimeType){var d=u.rawHeaders["mime-type"];if(d){var f=d.match(/;\s*charset=([^;])(;|$)/);f&&(u._charset=f[1].toLowerCase())}u._charset||(u._charset="utf-8")}};a(u,s.Readable),u.prototype._read=function(){var e=this._resumeFetch;e&&(this._resumeFetch=null,e())},u.prototype._onXHRProgress=function(){var e=this,t=e._xhr,n=null;switch(e._mode){case"text":if((n=t.responseText).length>e._pos){var o=n.substr(e._pos);if("x-user-defined"===e._charset){for(var a=i.alloc(o.length),s=0;s<o.length;s++)a[s]=255&o.charCodeAt(s);e.push(a)}else e.push(o,e._charset);e._pos=n.length}break;case"arraybuffer":if(t.readyState!==c.DONE||!t.response)break;n=t.response,e.push(i.from(new Uint8Array(n)));break;case"moz-chunked-arraybuffer":if(n=t.response,t.readyState!==c.LOADING||!n)break;e.push(i.from(new Uint8Array(n)));break;case"ms-stream":if(n=t.response,t.readyState!==c.LOADING)break;var u=new r.MSStreamReader;u.onprogress=function(){u.result.byteLength>e._pos&&(e.push(i.from(new Uint8Array(u.result.slice(e._pos)))),e._pos=u.result.byteLength)},u.onload=function(){e.push(null)},u.readAsArrayBuffer(n)}e._xhr.readyState===c.DONE&&"ms-stream"!==e._mode&&e.push(null)}}).call(this,e("_process"),void 0!==__webpack_require__.g?__webpack_require__.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer)},{"./capability":80,_process:393,buffer:98,inherits:307,"readable-stream":97}],83:[function(e,t,n){"use strict";var r={};function i(e,t,n){n||(n=Error);var i=function(e){var n,r;function i(n,r,i){return e.call(this,function(e,n,r){return"string"==typeof t?t:t(e,n,r)}(n,r,i))||this}return r=e,(n=i).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r,i}(n);i.prototype.name=n.name,i.prototype.code=e,r[e]=i}function o(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map((function(e){return String(e)})),n>2?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}i("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),i("ERR_INVALID_ARG_TYPE",(function(e,t,n){var r,i,a,s;if("string"==typeof t&&(i="not ",t.substr(!a||a<0?0:+a,i.length)===i)?(r="must not be",t=t.replace(/^not /,"")):r="must be",function(e,t,n){return(void 0===n||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t}(e," argument"))s="The ".concat(e," ").concat(r," ").concat(o(t,"type"));else{var c=function(e,t,n){return"number"!=typeof n&&(n=0),!(n+t.length>e.length)&&-1!==e.indexOf(t,n)}(e,".")?"property":"argument";s='The "'.concat(e,'" ').concat(c," ").concat(r," ").concat(o(t,"type"))}return s+=". Received type ".concat(typeof n)}),TypeError),i("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),i("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),i("ERR_STREAM_PREMATURE_CLOSE","Premature close"),i("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),i("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),i("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),i("ERR_STREAM_WRITE_AFTER_END","write after end"),i("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),i("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),i("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=r},{}],84:[function(e,t,n){(function(n){"use strict";var r=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};t.exports=u;var i=e("./_stream_readable"),o=e("./_stream_writable");e("inherits")(u,i);for(var a=r(o.prototype),s=0;s<a.length;s++){var c=a[s];u.prototype[c]||(u.prototype[c]=o.prototype[c])}function u(e){if(!(this instanceof u))return new u(e);i.call(this,e),o.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",l)))}function l(){this._writableState.ended||n.nextTick(h,this)}function h(e){e.end()}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(u.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(u.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}).call(this,e("_process"))},{"./_stream_readable":86,"./_stream_writable":88,_process:393,inherits:307}],85:[function(e,t,n){"use strict";t.exports=i;var r=e("./_stream_transform");function i(e){if(!(this instanceof i))return new i(e);r.call(this,e)}e("inherits")(i,r),i.prototype._transform=function(e,t,n){n(null,e)}},{"./_stream_transform":87,inherits:307}],86:[function(e,t,n){(function(n,r){"use strict";var i;t.exports=C,C.ReadableState=I,e("events").EventEmitter;var o,a=function(e,t){return e.listeners(t).length},s=e("./internal/streams/stream"),c=e("buffer").Buffer,u=r.Uint8Array||function(){},l=e("util");o=l&&l.debuglog?l.debuglog("stream"):function(){};var h,d,f,p=e("./internal/streams/buffer_list"),g=e("./internal/streams/destroy"),A=e("./internal/streams/state").getHighWaterMark,v=e("../errors").codes,m=v.ERR_INVALID_ARG_TYPE,y=v.ERR_STREAM_PUSH_AFTER_EOF,b=v.ERR_METHOD_NOT_IMPLEMENTED,_=v.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;e("inherits")(C,s);var E=g.errorOrDestroy,w=["error","close","destroy","pause","resume"];function I(t,n,r){i=i||e("./_stream_duplex"),t=t||{},"boolean"!=typeof r&&(r=n instanceof i),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=A(this,t,"readableHighWaterMark",r),this.buffer=new p,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(h||(h=e("string_decoder/").StringDecoder),this.decoder=new h(t.encoding),this.encoding=t.encoding)}function C(t){if(i=i||e("./_stream_duplex"),!(this instanceof C))return new C(t);var n=this instanceof i;this._readableState=new I(t,this,n),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),s.call(this)}function S(e,t,n,r,i){o("readableAddChunk",t);var a,s=e._readableState;if(null===t)s.reading=!1,function(e,t){if(o("onEofChunk"),!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?O(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,N(e)))}}(e,s);else if(i||(a=function(e,t){var n,r;return r=t,c.isBuffer(r)||r instanceof u||"string"==typeof t||void 0===t||e.objectMode||(n=new m("chunk",["string","Buffer","Uint8Array"],t)),n}(s,t)),a)E(e,a);else if(s.objectMode||t&&t.length>0)if("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===c.prototype||(t=function(e){return c.from(e)}(t)),r)s.endEmitted?E(e,new _):T(e,s,t,!0);else if(s.ended)E(e,new y);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!n?(t=s.decoder.write(t),s.objectMode||0!==t.length?T(e,s,t,!1):x(e,s)):T(e,s,t,!1)}else r||(s.reading=!1,x(e,s));return!s.ended&&(s.length<s.highWaterMark||0===s.length)}function T(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&O(e)),x(e,t)}Object.defineProperty(C.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),C.prototype.destroy=g.destroy,C.prototype._undestroy=g.undestroy,C.prototype._destroy=function(e,t){t(e)},C.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=c.from(e,t),t=""),n=!0),S(this,e,t,!1,n)},C.prototype.unshift=function(e){return S(this,e,null,!0,!1)},C.prototype.isPaused=function(){return!1===this._readableState.flowing},C.prototype.setEncoding=function(t){h||(h=e("string_decoder/").StringDecoder);var n=new h(t);this._readableState.decoder=n,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,i="";null!==r;)i+=n.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var R=1073741824;function k(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=R?e=R:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function O(e){var t=e._readableState;o("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(o("emitReadable",t.flowing),t.emittedReadable=!0,n.nextTick(N,e))}function N(e){var t=e._readableState;o("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,M(e)}function x(e,t){t.readingMore||(t.readingMore=!0,n.nextTick(D,e,t))}function D(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(o("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function L(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function P(e){o("readable nexttick read 0"),e.read(0)}function B(e,t){o("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),M(e),t.flowing&&!t.reading&&e.read(0)}function M(e){var t=e._readableState;for(o("flow",t.flowing);t.flowing&&null!==e.read(););}function j(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function U(e){var t=e._readableState;o("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,n.nextTick(F,t,e))}function F(e,t){if(o("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var n=t._writableState;(!n||n.autoDestroy&&n.finished)&&t.destroy()}}function Q(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}C.prototype.read=function(e){o("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return o("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?U(this):O(this),null;if(0===(e=k(e,t))&&t.ended)return 0===t.length&&U(this),null;var r,i=t.needReadable;return o("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&o("length less than watermark",i=!0),t.ended||t.reading?o("reading or ended",i=!1):i&&(o("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=k(n,t))),null===(r=e>0?j(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&U(this)),null!==r&&this.emit("data",r),r},C.prototype._read=function(e){E(this,new b("_read()"))},C.prototype.pipe=function(e,t){var r=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e)}i.pipesCount+=1,o("pipe count=%d opts=%j",i.pipesCount,t);var s=t&&!1===t.end||e===n.stdout||e===n.stderr?A:u;function c(t,n){o("onunpipe"),t===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,o("cleanup"),e.removeListener("close",p),e.removeListener("finish",g),e.removeListener("drain",l),e.removeListener("error",f),e.removeListener("unpipe",c),r.removeListener("end",u),r.removeListener("end",A),r.removeListener("data",d),h=!0,!i.awaitDrain||e._writableState&&!e._writableState.needDrain||l())}function u(){o("onend"),e.end()}i.endEmitted?n.nextTick(s):r.once("end",s),e.on("unpipe",c);var l=function(e){return function(){var t=e._readableState;o("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&a(e,"data")&&(t.flowing=!0,M(e))}}(r);e.on("drain",l);var h=!1;function d(t){o("ondata");var n=e.write(t);o("dest.write",n),!1===n&&((1===i.pipesCount&&i.pipes===e||i.pipesCount>1&&-1!==Q(i.pipes,e))&&!h&&(o("false write response, pause",i.awaitDrain),i.awaitDrain++),r.pause())}function f(t){o("onerror",t),A(),e.removeListener("error",f),0===a(e,"error")&&E(e,t)}function p(){e.removeListener("finish",g),A()}function g(){o("onfinish"),e.removeListener("close",p),A()}function A(){o("unpipe"),r.unpipe(e)}return r.on("data",d),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",f),e.once("close",p),e.once("finish",g),e.emit("pipe",r),i.flowing||(o("pipe resume"),r.resume()),e},C.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,{hasUnpiped:!1});return this}var a=Q(t.pipes,e);return-1===a||(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},C.prototype.on=function(e,t){var r=s.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,o("on readable",i.length,i.reading),i.length?O(this):i.reading||n.nextTick(P,this))),r},C.prototype.addListener=C.prototype.on,C.prototype.removeListener=function(e,t){var r=s.prototype.removeListener.call(this,e,t);return"readable"===e&&n.nextTick(L,this),r},C.prototype.removeAllListeners=function(e){var t=s.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||n.nextTick(L,this),t},C.prototype.resume=function(){var e=this._readableState;return e.flowing||(o("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n.nextTick(B,e,t))}(this,e)),e.paused=!1,this},C.prototype.pause=function(){return o("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(o("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},C.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on("end",(function(){if(o("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){o("wrapped data"),n.decoder&&(i=n.decoder.write(i)),n.objectMode&&null==i||(n.objectMode||i&&i.length)&&(t.push(i)||(r=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var a=0;a<w.length;a++)e.on(w[a],this.emit.bind(this,w[a]));return this._read=function(t){o("wrapped _read",t),r&&(r=!1,e.resume())},this},"function"==typeof Symbol&&(C.prototype[Symbol.asyncIterator]=function(){return void 0===d&&(d=e("./internal/streams/async_iterator")),d(this)}),Object.defineProperty(C.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(C.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(C.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),C._fromList=j,Object.defineProperty(C.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(C.from=function(t,n){return void 0===f&&(f=e("./internal/streams/from")),f(C,t,n)})}).call(this,e("_process"),void 0!==__webpack_require__.g?__webpack_require__.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":83,"./_stream_duplex":84,"./internal/streams/async_iterator":89,"./internal/streams/buffer_list":90,"./internal/streams/destroy":91,"./internal/streams/from":93,"./internal/streams/state":95,"./internal/streams/stream":96,_process:393,buffer:98,events:297,inherits:307,"string_decoder/":341,util:78}],87:[function(e,t,n){"use strict";t.exports=l;var r=e("../errors").codes,i=r.ERR_METHOD_NOT_IMPLEMENTED,o=r.ERR_MULTIPLE_CALLBACK,a=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=r.ERR_TRANSFORM_WITH_LENGTH_0,c=e("./_stream_duplex");function u(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(null===r)return this.emit("error",new o);n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function l(e){if(!(this instanceof l))return new l(e);c.call(this,e),this._transformState={afterTransform:u.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",h)}function h(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?d(this,null,null):this._flush((function(t,n){d(e,t,n)}))}function d(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new s;if(e._transformState.transforming)throw new a;return e.push(null)}e("inherits")(l,c),l.prototype.push=function(e,t){return this._transformState.needTransform=!1,c.prototype.push.call(this,e,t)},l.prototype._transform=function(e,t,n){n(new i("_transform()"))},l.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},l.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},l.prototype._destroy=function(e,t){c.prototype._destroy.call(this,e,(function(e){t(e)}))}},{"../errors":83,"./_stream_duplex":84,inherits:307}],88:[function(e,t,n){(function(n,r){"use strict";function i(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;for(e.entry=null;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree.next=e}(t,e)}}var o;t.exports=C,C.WritableState=I;var a,s={deprecate:e("util-deprecate")},c=e("./internal/streams/stream"),u=e("buffer").Buffer,l=r.Uint8Array||function(){},h=e("./internal/streams/destroy"),d=e("./internal/streams/state").getHighWaterMark,f=e("../errors").codes,p=f.ERR_INVALID_ARG_TYPE,g=f.ERR_METHOD_NOT_IMPLEMENTED,A=f.ERR_MULTIPLE_CALLBACK,v=f.ERR_STREAM_CANNOT_PIPE,m=f.ERR_STREAM_DESTROYED,y=f.ERR_STREAM_NULL_VALUES,b=f.ERR_STREAM_WRITE_AFTER_END,_=f.ERR_UNKNOWN_ENCODING,E=h.errorOrDestroy;function w(){}function I(t,r,a){o=o||e("./_stream_duplex"),t=t||{},"boolean"!=typeof a&&(a=r instanceof o),this.objectMode=!!t.objectMode,a&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=d(this,t,"writableHighWaterMark",a),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=!1===t.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,i=r.sync,o=r.writecb;if("function"!=typeof o)throw new A;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,i,o){--t.pendingcb,r?(n.nextTick(o,i),n.nextTick(N,e,t),e._writableState.errorEmitted=!0,E(e,i)):(o(i),e._writableState.errorEmitted=!0,E(e,i),N(e,t))}(e,r,i,t,o);else{var a=k(r)||e.destroyed;a||r.corked||r.bufferProcessing||!r.bufferedRequest||R(e,r),i?n.nextTick(T,e,r,a,o):T(e,r,a,o)}}(r,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function C(t){var n=this instanceof(o=o||e("./_stream_duplex"));if(!n&&!a.call(C,this))return new C(t);this._writableState=new I(t,this,n),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),c.call(this)}function S(e,t,n,r,i,o,a){t.writelen=r,t.writecb=a,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new m("write")):n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function T(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),N(e,t)}function R(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,o=new Array(r),a=t.corkedRequestsFree;a.entry=n;for(var s=0,c=!0;n;)o[s]=n,n.isBuf||(c=!1),n=n.next,s+=1;o.allBuffers=c,S(e,t,!0,t.length,o,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new i(t),t.bufferedRequestCount=0}else{for(;n;){var u=n.chunk,l=n.encoding,h=n.callback;if(S(e,t,!1,t.objectMode?1:u.length,u,l,h),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function k(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function O(e,t){e._final((function(n){t.pendingcb--,n&&E(e,n),t.prefinished=!0,e.emit("prefinish"),N(e,t)}))}function N(e,t){var r=k(t);if(r&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,n.nextTick(O,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var i=e._readableState;(!i||i.autoDestroy&&i.endEmitted)&&e.destroy()}return r}e("inherits")(C,c),I.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(I.prototype,"buffer",{get:s.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(a=Function.prototype[Symbol.hasInstance],Object.defineProperty(C,Symbol.hasInstance,{value:function(e){return!!a.call(this,e)||this===C&&e&&e._writableState instanceof I}})):a=function(e){return e instanceof this},C.prototype.pipe=function(){E(this,new v)},C.prototype.write=function(e,t,r){var i,o=this._writableState,a=!1,s=!o.objectMode&&(i=e,u.isBuffer(i)||i instanceof l);return s&&!u.isBuffer(e)&&(e=function(e){return u.from(e)}(e)),"function"==typeof t&&(r=t,t=null),s?t="buffer":t||(t=o.defaultEncoding),"function"!=typeof r&&(r=w),o.ending?function(e,t){var r=new b;E(e,r),n.nextTick(t,r)}(this,r):(s||function(e,t,r,i){var o;return null===r?o=new y:"string"==typeof r||t.objectMode||(o=new p("chunk",["string","Buffer"],r)),!o||(E(e,o),n.nextTick(i,o),!1)}(this,o,e,r))&&(o.pendingcb++,a=function(e,t,n,r,i,o){if(!n){var a=function(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=u.from(t,n)),t}(t,r,i);r!==a&&(n=!0,i="buffer",r=a)}var s=t.objectMode?1:r.length;t.length+=s;var c=t.length<t.highWaterMark;if(c||(t.needDrain=!0),t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else S(e,t,!1,s,r,i,o);return c}(this,o,s,e,t,r)),a},C.prototype.cork=function(){this._writableState.corked++},C.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||R(this,e))},C.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new _(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(C.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(C.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),C.prototype._write=function(e,t,n){n(new g("_write()"))},C.prototype._writev=null,C.prototype.end=function(e,t,r){var i=this._writableState;return"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||function(e,t,r){t.ending=!0,N(e,t),r&&(t.finished?n.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}(this,i,r),this},Object.defineProperty(C.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(C.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),C.prototype.destroy=h.destroy,C.prototype._undestroy=h.undestroy,C.prototype._destroy=function(e,t){t(e)}}).call(this,e("_process"),void 0!==__webpack_require__.g?__webpack_require__.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":83,"./_stream_duplex":84,"./internal/streams/destroy":91,"./internal/streams/state":95,"./internal/streams/stream":96,_process:393,buffer:98,inherits:307,"util-deprecate":343}],89:[function(e,t,n){(function(n){"use strict";var r;function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=e("./end-of-stream"),a=Symbol("lastResolve"),s=Symbol("lastReject"),c=Symbol("error"),u=Symbol("ended"),l=Symbol("lastPromise"),h=Symbol("handlePromise"),d=Symbol("stream");function f(e,t){return{value:e,done:t}}function p(e){var t=e[a];if(null!==t){var n=e[d].read();null!==n&&(e[l]=null,e[a]=null,e[s]=null,t(f(n,!1)))}}function g(e){n.nextTick(p,e)}var A=Object.getPrototypeOf((function(){})),v=Object.setPrototypeOf((i(r={get stream(){return this[d]},next:function(){var e=this,t=this[c];if(null!==t)return Promise.reject(t);if(this[u])return Promise.resolve(f(void 0,!0));if(this[d].destroyed)return new Promise((function(t,r){n.nextTick((function(){e[c]?r(e[c]):t(f(void 0,!0))}))}));var r,i=this[l];if(i)r=new Promise(function(e,t){return function(n,r){e.then((function(){t[u]?n(f(void 0,!0)):t[h](n,r)}),r)}}(i,this));else{var o=this[d].read();if(null!==o)return Promise.resolve(f(o,!1));r=new Promise(this[h])}return this[l]=r,r}},Symbol.asyncIterator,(function(){return this})),i(r,"return",(function(){var e=this;return new Promise((function(t,n){e[d].destroy(null,(function(e){e?n(e):t(f(void 0,!0))}))}))})),r),A);t.exports=function(e){var t,n=Object.create(v,(i(t={},d,{value:e,writable:!0}),i(t,a,{value:null,writable:!0}),i(t,s,{value:null,writable:!0}),i(t,c,{value:null,writable:!0}),i(t,u,{value:e._readableState.endEmitted,writable:!0}),i(t,h,{value:function(e,t){var r=n[d].read();r?(n[l]=null,n[a]=null,n[s]=null,e(f(r,!1))):(n[a]=e,n[s]=t)},writable:!0}),t));return n[l]=null,o(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=n[s];return null!==t&&(n[l]=null,n[a]=null,n[s]=null,t(e)),void(n[c]=e)}var r=n[a];null!==r&&(n[l]=null,n[a]=null,n[s]=null,r(f(void 0,!0))),n[u]=!0})),e.on("readable",g.bind(null,n)),n}}).call(this,e("_process"))},{"./end-of-stream":92,_process:393}],90:[function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=e("buffer").Buffer,s=e("util").inspect,c=s&&s.custom||"inspect";t.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,n,u;return t=e,n=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n}},{key:"concat",value:function(e){if(0===this.length)return a.alloc(0);for(var t,n,r,i=a.allocUnsafe(e>>>0),o=this.head,s=0;o;)t=o.data,n=i,r=s,a.prototype.copy.call(t,n,r),s+=o.data.length,o=o.next;return i}},{key:"consume",value:function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,n=1,r=t.data;for(e-=r.length;t=t.next;){var i=t.data,o=e>i.length?i.length:e;if(o===i.length?r+=i:r+=i.slice(0,e),0==(e-=o)){o===i.length?(++n,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(o));break}++n}return this.length-=n,r}},{key:"_getBuffer",value:function(e){var t=a.allocUnsafe(e),n=this.head,r=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var i=n.data,o=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,o),0==(e-=o)){o===i.length?(++r,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=i.slice(o));break}++r}return this.length-=r,t}},{key:c,value:function(e,t){return s(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{depth:0,customInspect:!1}))}}],n&&o(t.prototype,n),u&&o(t,u),e}()},{buffer:98,util:78}],91:[function(e,t,n){(function(e){"use strict";function n(e,t){i(e,t),r(e)}function r(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function i(e,t){e.emit("error",t)}t.exports={destroy:function(t,o){var a=this,s=this._readableState&&this._readableState.destroyed,c=this._writableState&&this._writableState.destroyed;return s||c?(o?o(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,e.nextTick(i,this,t)):e.nextTick(i,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!o&&t?a._writableState?a._writableState.errorEmitted?e.nextTick(r,a):(a._writableState.errorEmitted=!0,e.nextTick(n,a,t)):e.nextTick(n,a,t):o?(e.nextTick(r,a),o(t)):e.nextTick(r,a)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var n=e._readableState,r=e._writableState;n&&n.autoDestroy||r&&r.autoDestroy?e.destroy(t):e.emit("error",t)}}}).call(this,e("_process"))},{_process:393}],92:[function(e,t,n){"use strict";var r=e("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function i(){}t.exports=function e(t,n,o){if("function"==typeof n)return e(t,null,n);n||(n={}),o=function(e){var t=!1;return function(){if(!t){t=!0;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r)}}}(o||i);var a=n.readable||!1!==n.readable&&t.readable,s=n.writable||!1!==n.writable&&t.writable,c=function(){t.writable||l()},u=t._writableState&&t._writableState.finished,l=function(){s=!1,u=!0,a||o.call(t)},h=t._readableState&&t._readableState.endEmitted,d=function(){a=!1,h=!0,s||o.call(t)},f=function(e){o.call(t,e)},p=function(){var e;return a&&!h?(t._readableState&&t._readableState.ended||(e=new r),o.call(t,e)):s&&!u?(t._writableState&&t._writableState.ended||(e=new r),o.call(t,e)):void 0},g=function(){t.req.on("finish",l)};return function(e){return e.setHeader&&"function"==typeof e.abort}(t)?(t.on("complete",l),t.on("abort",p),t.req?g():t.on("request",g)):s&&!t._writableState&&(t.on("end",c),t.on("close",c)),t.on("end",d),t.on("finish",l),!1!==n.error&&t.on("error",f),t.on("close",p),function(){t.removeListener("complete",l),t.removeListener("abort",p),t.removeListener("request",g),t.req&&t.req.removeListener("finish",l),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",l),t.removeListener("end",d),t.removeListener("error",f),t.removeListener("close",p)}}},{"../../../errors":83}],93:[function(e,t,n){t.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],94:[function(e,t,n){"use strict";var r,i=e("../../../errors").codes,o=i.ERR_MISSING_ARGS,a=i.ERR_STREAM_DESTROYED;function s(e){if(e)throw e}function c(t,n,i,o){o=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(o);var s=!1;t.on("close",(function(){s=!0})),void 0===r&&(r=e("./end-of-stream")),r(t,{readable:n,writable:i},(function(e){if(e)return o(e);s=!0,o()}));var c=!1;return function(e){if(!s&&!c)return c=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(t)?t.abort():"function"==typeof t.destroy?t.destroy():void o(e||new a("pipe"))}}function u(e){e()}function l(e,t){return e.pipe(t)}function h(e){return e.length?"function"!=typeof e[e.length-1]?s:e.pop():s}t.exports=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,i=h(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new o("streams");var a=t.map((function(e,n){var o=n<t.length-1;return c(e,o,n>0,(function(e){r||(r=e),e&&a.forEach(u),o||(a.forEach(u),i(r))}))}));return t.reduce(l)}},{"../../../errors":83,"./end-of-stream":92}],95:[function(e,t,n){"use strict";var r=e("../../../errors").codes.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(e,t,n,i){var o=function(e,t,n){return null!=e.highWaterMark?e.highWaterMark:t?e[n]:null}(t,i,n);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new r(i?n:"highWaterMark",o);return Math.floor(o)}return e.objectMode?16:16384}}},{"../../../errors":83}],96:[function(e,t,n){t.exports=e("events").EventEmitter},{events:297}],97:[function(e,t,n){(n=t.exports=e("./lib/_stream_readable.js")).Stream=n,n.Readable=n,n.Writable=e("./lib/_stream_writable.js"),n.Duplex=e("./lib/_stream_duplex.js"),n.Transform=e("./lib/_stream_transform.js"),n.PassThrough=e("./lib/_stream_passthrough.js"),n.finished=e("./lib/internal/streams/end-of-stream.js"),n.pipeline=e("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":84,"./lib/_stream_passthrough.js":85,"./lib/_stream_readable.js":86,"./lib/_stream_transform.js":87,"./lib/_stream_writable.js":88,"./lib/internal/streams/end-of-stream.js":92,"./lib/internal/streams/pipeline.js":94}],98:[function(e,t,n){(function(t){"use strict";var r=e("base64-js"),i=e("ieee754");n.Buffer=t,n.SlowBuffer=function(e){return+e!=e&&(e=0),t.alloc(+e)},n.INSPECT_MAX_BYTES=50;var o=2147483647;function a(e){if(e>o)throw new RangeError('The value "'+e+'" is invalid for option "size"');var n=new Uint8Array(e);return n.__proto__=t.prototype,n}function t(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return u(e)}return s(e,t,n)}function s(e,n,r){if("string"==typeof e)return function(e,n){if("string"==typeof n&&""!==n||(n="utf8"),!t.isEncoding(n))throw new TypeError("Unknown encoding: "+n);var r=0|d(e,n),i=a(r),o=i.write(e,n);return o!==r&&(i=i.slice(0,o)),i}(e,n);if(ArrayBuffer.isView(e))return l(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(U(e,ArrayBuffer)||e&&U(e.buffer,ArrayBuffer))return function(e,n,r){if(n<0||e.byteLength<n)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<n+(r||0))throw new RangeError('"length" is outside of buffer bounds');var i;return(i=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r)).__proto__=t.prototype,i}(e,n,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var i=e.valueOf&&e.valueOf();if(null!=i&&i!==e)return t.from(i,n,r);var o=function(e){if(t.isBuffer(e)){var n=0|h(e.length),r=a(n);return 0===r.length||e.copy(r,0,0,n),r}return void 0!==e.length?"number"!=typeof e.length||F(e.length)?a(0):l(e):"Buffer"===e.type&&Array.isArray(e.data)?l(e.data):void 0}(e);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return t.from(e[Symbol.toPrimitive]("string"),n,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function u(e){return c(e),a(e<0?0:0|h(e))}function l(e){for(var t=e.length<0?0:0|h(e.length),n=a(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function h(e){if(e>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|e}function d(e,n){if(t.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||U(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===r)return 0;for(var o=!1;;)switch(n){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return B(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return M(e).length;default:if(o)return i?-1:B(e).length;n=(""+n).toLowerCase(),o=!0}}function f(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return R(this,t,n);case"utf8":case"utf-8":return I(this,t,n);case"ascii":return S(this,t,n);case"latin1":case"binary":return T(this,t,n);case"base64":return w(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function p(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function g(e,n,r,i,o){if(0===e.length)return-1;if("string"==typeof r?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),F(r=+r)&&(r=o?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(o)return-1;r=e.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof n&&(n=t.from(n,i)),t.isBuffer(n))return 0===n.length?-1:A(e,n,r,i,o);if("number"==typeof n)return n&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,n,r):Uint8Array.prototype.lastIndexOf.call(e,n,r):A(e,[n],r,i,o);throw new TypeError("val must be string, number or Buffer")}function A(e,t,n,r,i){var o,a=1,s=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,c/=2,n/=2}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var l=-1;for(o=n;o<s;o++)if(u(e,o)===u(t,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===c)return l*a}else-1!==l&&(o-=o-l),l=-1}else for(n+c>s&&(n=s-c),o=n;o>=0;o--){for(var h=!0,d=0;d<c;d++)if(u(e,o+d)!==u(t,d)){h=!1;break}if(h)return o}return-1}function v(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(F(s))return a;e[n+a]=s}return a}function m(e,t,n,r){return j(B(t,e.length-n),e,n,r)}function y(e,t,n,r){return j(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function b(e,t,n,r){return y(e,t,n,r)}function _(e,t,n,r){return j(M(t),e,n,r)}function E(e,t,n,r){return j(function(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)r=(n=e.charCodeAt(a))>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function w(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function I(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,a,s,c,u=e[i],l=null,h=u>239?4:u>223?3:u>191?2:1;if(i+h<=n)switch(h){case 1:u<128&&(l=u);break;case 2:128==(192&(o=e[i+1]))&&(c=(31&u)<<6|63&o)>127&&(l=c);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&(c=(15&u)<<12|(63&o)<<6|63&a)>2047&&(c<55296||c>57343)&&(l=c);break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(c=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&c<1114112&&(l=c)}null===l?(l=65533,h=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=h}return function(e){var t=e.length;if(t<=C)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=C));return n}(r)}n.kMaxLength=o,t.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}(),t.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(t.prototype,"parent",{enumerable:!0,get:function(){if(t.isBuffer(this))return this.buffer}}),Object.defineProperty(t.prototype,"offset",{enumerable:!0,get:function(){if(t.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&t[Symbol.species]===t&&Object.defineProperty(t,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),t.poolSize=8192,t.from=function(e,t,n){return s(e,t,n)},t.prototype.__proto__=Uint8Array.prototype,t.__proto__=Uint8Array,t.alloc=function(e,t,n){return function(e,t,n){return c(e),e<=0?a(e):void 0!==t?"string"==typeof n?a(e).fill(t,n):a(e).fill(t):a(e)}(e,t,n)},t.allocUnsafe=function(e){return u(e)},t.allocUnsafeSlow=function(e){return u(e)},t.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==t.prototype},t.compare=function(e,n){if(U(e,Uint8Array)&&(e=t.from(e,e.offset,e.byteLength)),U(n,Uint8Array)&&(n=t.from(n,n.offset,n.byteLength)),!t.isBuffer(e)||!t.isBuffer(n))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===n)return 0;for(var r=e.length,i=n.length,o=0,a=Math.min(r,i);o<a;++o)if(e[o]!==n[o]){r=e[o],i=n[o];break}return r<i?-1:i<r?1:0},t.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},t.concat=function(e,n){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return t.alloc(0);var r;if(void 0===n)for(n=0,r=0;r<e.length;++r)n+=e[r].length;var i=t.allocUnsafe(n),o=0;for(r=0;r<e.length;++r){var a=e[r];if(U(a,Uint8Array)&&(a=t.from(a)),!t.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(i,o),o+=a.length}return i},t.byteLength=d,t.prototype._isBuffer=!0,t.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)p(this,t,t+1);return this},t.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)p(this,t,t+3),p(this,t+1,t+2);return this},t.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)p(this,t,t+7),p(this,t+1,t+6),p(this,t+2,t+5),p(this,t+3,t+4);return this},t.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?I(this,0,e):f.apply(this,arguments)},t.prototype.toLocaleString=t.prototype.toString,t.prototype.equals=function(e){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===t.compare(this,e)},t.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},t.prototype.compare=function(e,n,r,i,o){if(U(e,Uint8Array)&&(e=t.from(e,e.offset,e.byteLength)),!t.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===n&&(n=0),void 0===r&&(r=e?e.length:0),void 0===i&&(i=0),void 0===o&&(o=this.length),n<0||r>e.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&n>=r)return 0;if(i>=o)return-1;if(n>=r)return 1;if(this===e)return 0;for(var a=(o>>>=0)-(i>>>=0),s=(r>>>=0)-(n>>>=0),c=Math.min(a,s),u=this.slice(i,o),l=e.slice(n,r),h=0;h<c;++h)if(u[h]!==l[h]){a=u[h],s=l[h];break}return a<s?-1:s<a?1:0},t.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},t.prototype.indexOf=function(e,t,n){return g(this,e,t,n,!0)},t.prototype.lastIndexOf=function(e,t,n){return g(this,e,t,n,!1)},t.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return v(this,e,t,n);case"utf8":case"utf-8":return m(this,e,t,n);case"ascii":return y(this,e,t,n);case"latin1":case"binary":return b(this,e,t,n);case"base64":return _(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},t.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var C=4096;function S(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function T(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function R(e,t,n){var r,i=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>i)&&(n=i);for(var o="",a=t;a<n;++a)o+=(r=e[a])<16?"0"+r.toString(16):r.toString(16);return o}function k(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function O(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function N(e,n,r,i,o,a){if(!t.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(n>o||n<a)throw new RangeError('"value" argument is out of bounds');if(r+i>e.length)throw new RangeError("Index out of range")}function x(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function D(e,t,n,r,o){return t=+t,n>>>=0,o||x(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function L(e,t,n,r,o){return t=+t,n>>>=0,o||x(e,0,n,8),i.write(e,t,n,r,52,8),n+8}t.prototype.slice=function(e,n){var r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(n=void 0===n?r:~~n)<0?(n+=r)<0&&(n=0):n>r&&(n=r),n<e&&(n=e);var i=this.subarray(e,n);return i.__proto__=t.prototype,i},t.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||O(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},t.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||O(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},t.prototype.readUInt8=function(e,t){return e>>>=0,t||O(e,1,this.length),this[e]},t.prototype.readUInt16LE=function(e,t){return e>>>=0,t||O(e,2,this.length),this[e]|this[e+1]<<8},t.prototype.readUInt16BE=function(e,t){return e>>>=0,t||O(e,2,this.length),this[e]<<8|this[e+1]},t.prototype.readUInt32LE=function(e,t){return e>>>=0,t||O(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},t.prototype.readUInt32BE=function(e,t){return e>>>=0,t||O(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},t.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||O(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},t.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||O(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},t.prototype.readInt8=function(e,t){return e>>>=0,t||O(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},t.prototype.readInt16LE=function(e,t){e>>>=0,t||O(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},t.prototype.readInt16BE=function(e,t){e>>>=0,t||O(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},t.prototype.readInt32LE=function(e,t){return e>>>=0,t||O(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},t.prototype.readInt32BE=function(e,t){return e>>>=0,t||O(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},t.prototype.readFloatLE=function(e,t){return e>>>=0,t||O(e,4,this.length),i.read(this,e,!0,23,4)},t.prototype.readFloatBE=function(e,t){return e>>>=0,t||O(e,4,this.length),i.read(this,e,!1,23,4)},t.prototype.readDoubleLE=function(e,t){return e>>>=0,t||O(e,8,this.length),i.read(this,e,!0,52,8)},t.prototype.readDoubleBE=function(e,t){return e>>>=0,t||O(e,8,this.length),i.read(this,e,!1,52,8)},t.prototype.writeUIntLE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||N(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},t.prototype.writeUIntBE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||N(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},t.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,1,255,0),this[t]=255&e,t+1},t.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},t.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},t.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},t.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},t.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);N(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},t.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);N(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},t.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},t.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},t.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},t.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},t.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},t.prototype.writeFloatLE=function(e,t,n){return D(this,e,t,!0,n)},t.prototype.writeFloatBE=function(e,t,n){return D(this,e,t,!1,n)},t.prototype.writeDoubleLE=function(e,t,n){return L(this,e,t,!0,n)},t.prototype.writeDoubleBE=function(e,t,n){return L(this,e,t,!1,n)},t.prototype.copy=function(e,n,r,i){if(!t.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),i||0===i||(i=this.length),n>=e.length&&(n=e.length),n||(n=0),i>0&&i<r&&(i=r),i===r)return 0;if(0===e.length||0===this.length)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-n<i-r&&(i=e.length-n+r);var o=i-r;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(n,r,i);else if(this===e&&r<n&&n<i)for(var a=o-1;a>=0;--a)e[a+n]=this[a+r];else Uint8Array.prototype.set.call(e,this.subarray(r,i),n);return o},t.prototype.fill=function(e,n,r,i){if("string"==typeof e){if("string"==typeof n?(i=n,n=0,r=this.length):"string"==typeof r&&(i=r,r=this.length),void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!t.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(1===e.length){var o=e.charCodeAt(0);("utf8"===i&&o<128||"latin1"===i)&&(e=o)}}else"number"==typeof e&&(e&=255);if(n<0||this.length<n||this.length<r)throw new RangeError("Out of range index");if(r<=n)return this;var a;if(n>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(a=n;a<r;++a)this[a]=e;else{var s=t.isBuffer(e)?e:t.from(e,i),c=s.length;if(0===c)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(a=0;a<r-n;++a)this[a+n]=s[a%c]}return this};var P=/[^+/0-9A-Za-z-_]/g;function B(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function M(e){return r.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(P,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function j(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function U(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function F(e){return e!=e}}).call(this,e("buffer").Buffer)},{"base64-js":76,buffer:98,ieee754:300}],99:[function(e,t,n){t.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},{}],100:[function(e,t,n){t.exports={O_RDONLY:0,O_WRONLY:1,O_RDWR:2,S_IFMT:61440,S_IFREG:32768,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960,S_IFSOCK:49152,O_CREAT:512,O_EXCL:2048,O_NOCTTY:131072,O_TRUNC:1024,O_APPEND:8,O_DIRECTORY:1048576,O_NOFOLLOW:256,O_SYNC:128,O_SYMLINK:2097152,O_NONBLOCK:4,S_IRWXU:448,S_IRUSR:256,S_IWUSR:128,S_IXUSR:64,S_IRWXG:56,S_IRGRP:32,S_IWGRP:16,S_IXGRP:8,S_IRWXO:7,S_IROTH:4,S_IWOTH:2,S_IXOTH:1,E2BIG:7,EACCES:13,EADDRINUSE:48,EADDRNOTAVAIL:49,EAFNOSUPPORT:47,EAGAIN:35,EALREADY:37,EBADF:9,EBADMSG:94,EBUSY:16,ECANCELED:89,ECHILD:10,ECONNABORTED:53,ECONNREFUSED:61,ECONNRESET:54,EDEADLK:11,EDESTADDRREQ:39,EDOM:33,EDQUOT:69,EEXIST:17,EFAULT:14,EFBIG:27,EHOSTUNREACH:65,EIDRM:90,EILSEQ:92,EINPROGRESS:36,EINTR:4,EINVAL:22,EIO:5,EISCONN:56,EISDIR:21,ELOOP:62,EMFILE:24,EMLINK:31,EMSGSIZE:40,EMULTIHOP:95,ENAMETOOLONG:63,ENETDOWN:50,ENETRESET:52,ENETUNREACH:51,ENFILE:23,ENOBUFS:55,ENODATA:96,ENODEV:19,ENOENT:2,ENOEXEC:8,ENOLCK:77,ENOLINK:97,ENOMEM:12,ENOMSG:91,ENOPROTOOPT:42,ENOSPC:28,ENOSR:98,ENOSTR:99,ENOSYS:78,ENOTCONN:57,ENOTDIR:20,ENOTEMPTY:66,ENOTSOCK:38,ENOTSUP:45,ENOTTY:25,ENXIO:6,EOPNOTSUPP:102,EOVERFLOW:84,EPERM:1,EPIPE:32,EPROTO:100,EPROTONOSUPPORT:43,EPROTOTYPE:41,ERANGE:34,EROFS:30,ESPIPE:29,ESRCH:3,ESTALE:70,ETIME:101,ETIMEDOUT:60,ETXTBSY:26,EWOULDBLOCK:35,EXDEV:18,SIGHUP:1,SIGINT:2,SIGQUIT:3,SIGILL:4,SIGTRAP:5,SIGABRT:6,SIGIOT:6,SIGBUS:10,SIGFPE:8,SIGKILL:9,SIGUSR1:30,SIGSEGV:11,SIGUSR2:31,SIGPIPE:13,SIGALRM:14,SIGTERM:15,SIGCHLD:20,SIGCONT:19,SIGSTOP:17,SIGTSTP:18,SIGTTIN:21,SIGTTOU:22,SIGURG:16,SIGXCPU:24,SIGXFSZ:25,SIGVTALRM:26,SIGPROF:27,SIGWINCH:28,SIGIO:23,SIGSYS:12,SSL_OP_ALL:2147486719,SSL_OP_ALLOW_UNSAFE_LEGACY_RENEGOTIATION:262144,SSL_OP_CIPHER_SERVER_PREFERENCE:4194304,SSL_OP_CISCO_ANYCONNECT:32768,SSL_OP_COOKIE_EXCHANGE:8192,SSL_OP_CRYPTOPRO_TLSEXT_BUG:2147483648,SSL_OP_DONT_INSERT_EMPTY_FRAGMENTS:2048,SSL_OP_EPHEMERAL_RSA:0,SSL_OP_LEGACY_SERVER_CONNECT:4,SSL_OP_MICROSOFT_BIG_SSLV3_BUFFER:32,SSL_OP_MICROSOFT_SESS_ID_BUG:1,SSL_OP_MSIE_SSLV2_RSA_PADDING:0,SSL_OP_NETSCAPE_CA_DN_BUG:536870912,SSL_OP_NETSCAPE_CHALLENGE_BUG:2,SSL_OP_NETSCAPE_DEMO_CIPHER_CHANGE_BUG:1073741824,SSL_OP_NETSCAPE_REUSE_CIPHER_CHANGE_BUG:8,SSL_OP_NO_COMPRESSION:131072,SSL_OP_NO_QUERY_MTU:4096,SSL_OP_NO_SESSION_RESUMPTION_ON_RENEGOTIATION:65536,SSL_OP_NO_SSLv2:16777216,SSL_OP_NO_SSLv3:33554432,SSL_OP_NO_TICKET:16384,SSL_OP_NO_TLSv1:67108864,SSL_OP_NO_TLSv1_1:268435456,SSL_OP_NO_TLSv1_2:134217728,SSL_OP_PKCS1_CHECK_1:0,SSL_OP_PKCS1_CHECK_2:0,SSL_OP_SINGLE_DH_USE:1048576,SSL_OP_SINGLE_ECDH_USE:524288,SSL_OP_SSLEAY_080_CLIENT_DH_BUG:128,SSL_OP_SSLREF2_REUSE_CERT_TYPE_BUG:0,SSL_OP_TLS_BLOCK_PADDING_BUG:512,SSL_OP_TLS_D5_BUG:256,SSL_OP_TLS_ROLLBACK_BUG:8388608,ENGINE_METHOD_DSA:2,ENGINE_METHOD_DH:4,ENGINE_METHOD_RAND:8,ENGINE_METHOD_ECDH:16,ENGINE_METHOD_ECDSA:32,ENGINE_METHOD_CIPHERS:64,ENGINE_METHOD_DIGESTS:128,ENGINE_METHOD_STORE:256,ENGINE_METHOD_PKEY_METHS:512,ENGINE_METHOD_PKEY_ASN1_METHS:1024,ENGINE_METHOD_ALL:65535,ENGINE_METHOD_NONE:0,DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6,F_OK:0,R_OK:4,W_OK:2,X_OK:1,UV_UDP_REUSEADDR:4}},{}],101:[function(e,t,n){"use strict";var r=Array.prototype.slice;function i(e,t){if(!(this instanceof i))return new i(e,t);this.src=e,this._withAccess=t}function o(e,t){return void 0===e[t]&&void 0===e.__lookupGetter__(t)&&void 0===e.__lookupSetter__(t)}t.exports=i,i.prototype.withAccess=function(e){return this._withAccess=!1!==e,this},i.prototype.pick=function(e){return Array.isArray(e)||(e=r.call(arguments)),e.length&&(this.keys=e),this},i.prototype.to=function(e){if(e=e||{},!this.src)return e;var t=this.keys||Object.keys(this.src);if(!this._withAccess){for(var n=0;n<t.length;n++)void 0===e[r=t[n]]&&(e[r]=this.src[r]);return e}for(n=0;n<t.length;n++){var r=t[n];if(o(e,r)){var i=this.src.__lookupGetter__(r),a=this.src.__lookupSetter__(r);i&&e.__defineGetter__(r,i),a&&e.__defineSetter__(r,a),i||a||(e[r]=this.src[r])}}return e},i.prototype.toCover=function(e){for(var t=this.keys||Object.keys(this.src),n=0;n<t.length;n++){var r=t[n];delete e[r];var i=this.src.__lookupGetter__(r),o=this.src.__lookupSetter__(r);i&&e.__defineGetter__(r,i),o&&e.__defineSetter__(r,o),i||o||(e[r]=this.src[r])}},i.prototype.override=i.prototype.toCover,i.prototype.and=function(e){var t={};return this.to(t),this.src=e,this.to(t),this.src=t,this}},{}],102:[function(e,t,n){t.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},{}],103:[function(e,t,n){var r=e("../internals/is-object");t.exports=function(e){if(!r(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},{"../internals/is-object":164}],104:[function(e,t,n){var r=e("../internals/well-known-symbol"),i=e("../internals/object-create"),o=e("../internals/object-define-property"),a=r("unscopables"),s=Array.prototype;null==s[a]&&o.f(s,a,{configurable:!0,value:i(null)}),t.exports=function(e){s[a][e]=!0}},{"../internals/object-create":178,"../internals/object-define-property":180,"../internals/well-known-symbol":231}],105:[function(e,t,n){"use strict";var r=e("../internals/string-multibyte").charAt;t.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},{"../internals/string-multibyte":211}],106:[function(e,t,n){t.exports=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e}},{}],107:[function(e,t,n){var r=e("../internals/is-object");t.exports=function(e){if(!r(e))throw TypeError(String(e)+" is not an object");return e}},{"../internals/is-object":164}],108:[function(e,t,n){t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},{}],109:[function(e,t,n){"use strict";var r,i=e("../internals/array-buffer-native"),o=e("../internals/descriptors"),a=e("../internals/global"),s=e("../internals/is-object"),c=e("../internals/has"),u=e("../internals/classof"),l=e("../internals/create-non-enumerable-property"),h=e("../internals/redefine"),d=e("../internals/object-define-property").f,f=e("../internals/object-get-prototype-of"),p=e("../internals/object-set-prototype-of"),g=e("../internals/well-known-symbol"),A=e("../internals/uid"),v=a.Int8Array,m=v&&v.prototype,y=a.Uint8ClampedArray,b=y&&y.prototype,_=v&&f(v),E=m&&f(m),w=Object.prototype,I=w.isPrototypeOf,C=g("toStringTag"),S=A("TYPED_ARRAY_TAG"),T=i&&!!p&&"Opera"!==u(a.opera),R=!1,k={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},O=function(e){return s(e)&&c(k,u(e))};for(r in k)a[r]||(T=!1);if((!T||"function"!=typeof _||_===Function.prototype)&&(_=function(){throw TypeError("Incorrect invocation")},T))for(r in k)a[r]&&p(a[r],_);if((!T||!E||E===w)&&(E=_.prototype,T))for(r in k)a[r]&&p(a[r].prototype,E);if(T&&f(b)!==E&&p(b,E),o&&!c(E,C))for(r in R=!0,d(E,C,{get:function(){return s(this)?this[S]:void 0}}),k)a[r]&&l(a[r],S,r);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:T,TYPED_ARRAY_TAG:R&&S,aTypedArray:function(e){if(O(e))return e;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(e){if(p){if(I.call(_,e))return e}else for(var t in k)if(c(k,r)){var n=a[t];if(n&&(e===n||I.call(n,e)))return e}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(e,t,n){if(o){if(n)for(var r in k){var i=a[r];i&&c(i.prototype,e)&&delete i.prototype[e]}E[e]&&!n||h(E,e,n?t:T&&m[e]||t)}},exportTypedArrayStaticMethod:function(e,t,n){var r,i;if(o){if(p){if(n)for(r in k)(i=a[r])&&c(i,e)&&delete i[e];if(_[e]&&!n)return;try{return h(_,e,n?t:T&&v[e]||t)}catch(e){}}for(r in k)!(i=a[r])||i[e]&&!n||h(i,e,t)}},isView:function(e){var t=u(e);return"DataView"===t||c(k,t)},isTypedArray:O,TypedArray:_,TypedArrayPrototype:E}},{"../internals/array-buffer-native":108,"../internals/classof":126,"../internals/create-non-enumerable-property":131,"../internals/descriptors":136,"../internals/global":150,"../internals/has":151,"../internals/is-object":164,"../internals/object-define-property":180,"../internals/object-get-prototype-of":185,"../internals/object-set-prototype-of":189,"../internals/redefine":197,"../internals/uid":228,"../internals/well-known-symbol":231}],110:[function(e,t,n){"use strict";var r=e("../internals/global"),i=e("../internals/descriptors"),o=e("../internals/array-buffer-native"),a=e("../internals/create-non-enumerable-property"),s=e("../internals/redefine-all"),c=e("../internals/fails"),u=e("../internals/an-instance"),l=e("../internals/to-integer"),h=e("../internals/to-length"),d=e("../internals/to-index"),f=e("../internals/ieee754"),p=e("../internals/object-get-prototype-of"),g=e("../internals/object-set-prototype-of"),A=e("../internals/object-get-own-property-names").f,v=e("../internals/object-define-property").f,m=e("../internals/array-fill"),y=e("../internals/set-to-string-tag"),b=e("../internals/internal-state"),_=b.get,E=b.set,w="ArrayBuffer",I="DataView",C="Wrong index",S=r.ArrayBuffer,T=S,R=r.DataView,k=R&&R.prototype,O=Object.prototype,N=r.RangeError,x=f.pack,D=f.unpack,L=function(e){return[255&e]},P=function(e){return[255&e,e>>8&255]},B=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},M=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},j=function(e){return x(e,23,4)},U=function(e){return x(e,52,8)},F=function(e,t){v(e.prototype,t,{get:function(){return _(this)[t]}})},Q=function(e,t,n,r){var i=d(n),o=_(e);if(i+t>o.byteLength)throw N(C);var a=_(o.buffer).bytes,s=i+o.byteOffset,c=a.slice(s,s+t);return r?c:c.reverse()},G=function(e,t,n,r,i,o){var a=d(n),s=_(e);if(a+t>s.byteLength)throw N(C);for(var c=_(s.buffer).bytes,u=a+s.byteOffset,l=r(+i),h=0;h<t;h++)c[u+h]=l[o?h:t-h-1]};if(o){if(!c((function(){S(1)}))||!c((function(){new S(-1)}))||c((function(){return new S,new S(1.5),new S(NaN),S.name!=w}))){for(var q,V=(T=function(e){return u(this,T),new S(d(e))}).prototype=S.prototype,K=A(S),H=0;K.length>H;)(q=K[H++])in T||a(T,q,S[q]);V.constructor=T}g&&p(k)!==O&&g(k,O);var W=new R(new T(2)),z=k.setInt8;W.setInt8(0,2147483648),W.setInt8(1,2147483649),!W.getInt8(0)&&W.getInt8(1)||s(k,{setInt8:function(e,t){z.call(this,e,t<<24>>24)},setUint8:function(e,t){z.call(this,e,t<<24>>24)}},{unsafe:!0})}else T=function(e){u(this,T,w);var t=d(e);E(this,{bytes:m.call(new Array(t),0),byteLength:t}),i||(this.byteLength=t)},R=function(e,t,n){u(this,R,I),u(e,T,I);var r=_(e).byteLength,o=l(t);if(o<0||o>r)throw N("Wrong offset");if(o+(n=void 0===n?r-o:h(n))>r)throw N("Wrong length");E(this,{buffer:e,byteLength:n,byteOffset:o}),i||(this.buffer=e,this.byteLength=n,this.byteOffset=o)},i&&(F(T,"byteLength"),F(R,"buffer"),F(R,"byteLength"),F(R,"byteOffset")),s(R.prototype,{getInt8:function(e){return Q(this,1,e)[0]<<24>>24},getUint8:function(e){return Q(this,1,e)[0]},getInt16:function(e){var t=Q(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=Q(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return M(Q(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return M(Q(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return D(Q(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return D(Q(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){G(this,1,e,L,t)},setUint8:function(e,t){G(this,1,e,L,t)},setInt16:function(e,t){G(this,2,e,P,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){G(this,2,e,P,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){G(this,4,e,B,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){G(this,4,e,B,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){G(this,4,e,j,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){G(this,8,e,U,t,arguments.length>2?arguments[2]:void 0)}});y(T,w),y(R,I),t.exports={ArrayBuffer:T,DataView:R}},{"../internals/an-instance":106,"../internals/array-buffer-native":108,"../internals/array-fill":112,"../internals/create-non-enumerable-property":131,"../internals/descriptors":136,"../internals/fails":145,"../internals/global":150,"../internals/ieee754":156,"../internals/internal-state":160,"../internals/object-define-property":180,"../internals/object-get-own-property-names":183,"../internals/object-get-prototype-of":185,"../internals/object-set-prototype-of":189,"../internals/redefine-all":196,"../internals/set-to-string-tag":206,"../internals/to-index":216,"../internals/to-integer":218,"../internals/to-length":219}],111:[function(e,t,n){"use strict";var r=e("../internals/to-object"),i=e("../internals/to-absolute-index"),o=e("../internals/to-length"),a=Math.min;t.exports=[].copyWithin||function(e,t){var n=r(this),s=o(n.length),c=i(e,s),u=i(t,s),l=arguments.length>2?arguments[2]:void 0,h=a((void 0===l?s:i(l,s))-u,s-c),d=1;for(u<c&&c<u+h&&(d=-1,u+=h-1,c+=h-1);h-- >0;)u in n?n[c]=n[u]:delete n[c],c+=d,u+=d;return n}},{"../internals/to-absolute-index":215,"../internals/to-length":219,"../internals/to-object":220}],112:[function(e,t,n){"use strict";var r=e("../internals/to-object"),i=e("../internals/to-absolute-index"),o=e("../internals/to-length");t.exports=function(e){for(var t=r(this),n=o(t.length),a=arguments.length,s=i(a>1?arguments[1]:void 0,n),c=a>2?arguments[2]:void 0,u=void 0===c?n:i(c,n);u>s;)t[s++]=e;return t}},{"../internals/to-absolute-index":215,"../internals/to-length":219,"../internals/to-object":220}],113:[function(e,t,n){"use strict";var r=e("../internals/array-iteration").forEach,i=e("../internals/array-method-is-strict"),o=e("../internals/array-method-uses-to-length"),a=i("forEach"),s=o("forEach");t.exports=a&&s?[].forEach:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}},{"../internals/array-iteration":116,"../internals/array-method-is-strict":119,"../internals/array-method-uses-to-length":120}],114:[function(e,t,n){"use strict";var r=e("../internals/function-bind-context"),i=e("../internals/to-object"),o=e("../internals/call-with-safe-iteration-closing"),a=e("../internals/is-array-iterator-method"),s=e("../internals/to-length"),c=e("../internals/create-property"),u=e("../internals/get-iterator-method");t.exports=function(e){var t,n,l,h,d,f,p=i(e),g="function"==typeof this?this:Array,A=arguments.length,v=A>1?arguments[1]:void 0,m=void 0!==v,y=u(p),b=0;if(m&&(v=r(v,A>2?arguments[2]:void 0,2)),null==y||g==Array&&a(y))for(n=new g(t=s(p.length));t>b;b++)f=m?v(p[b],b):p[b],c(n,b,f);else for(d=(h=y.call(p)).next,n=new g;!(l=d.call(h)).done;b++)f=m?o(h,v,[l.value,b],!0):l.value,c(n,b,f);return n.length=b,n}},{"../internals/call-with-safe-iteration-closing":123,"../internals/create-property":133,"../internals/function-bind-context":147,"../internals/get-iterator-method":149,"../internals/is-array-iterator-method":161,"../internals/to-length":219,"../internals/to-object":220}],115:[function(e,t,n){var r=e("../internals/to-indexed-object"),i=e("../internals/to-length"),o=e("../internals/to-absolute-index"),a=function(e){return function(t,n,a){var s,c=r(t),u=i(c.length),l=o(a,u);if(e&&n!=n){for(;u>l;)if((s=c[l++])!=s)return!0}else for(;u>l;l++)if((e||l in c)&&c[l]===n)return e||l||0;return!e&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}},{"../internals/to-absolute-index":215,"../internals/to-indexed-object":217,"../internals/to-length":219}],116:[function(e,t,n){var r=e("../internals/function-bind-context"),i=e("../internals/indexed-object"),o=e("../internals/to-object"),a=e("../internals/to-length"),s=e("../internals/array-species-create"),c=[].push,u=function(e){var t=1==e,n=2==e,u=3==e,l=4==e,h=6==e,d=5==e||h;return function(f,p,g,A){for(var v,m,y=o(f),b=i(y),_=r(p,g,3),E=a(b.length),w=0,I=A||s,C=t?I(f,E):n?I(f,0):void 0;E>w;w++)if((d||w in b)&&(m=_(v=b[w],w,y),e))if(t)C[w]=m;else if(m)switch(e){case 3:return!0;case 5:return v;case 6:return w;case 2:c.call(C,v)}else if(l)return!1;return h?-1:u||l?l:C}};t.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6)}},{"../internals/array-species-create":122,"../internals/function-bind-context":147,"../internals/indexed-object":157,"../internals/to-length":219,"../internals/to-object":220}],117:[function(e,t,n){"use strict";var r=e("../internals/to-indexed-object"),i=e("../internals/to-integer"),o=e("../internals/to-length"),a=e("../internals/array-method-is-strict"),s=e("../internals/array-method-uses-to-length"),c=Math.min,u=[].lastIndexOf,l=!!u&&1/[1].lastIndexOf(1,-0)<0,h=a("lastIndexOf"),d=s("indexOf",{ACCESSORS:!0,1:0}),f=l||!h||!d;t.exports=f?function(e){if(l)return u.apply(this,arguments)||0;var t=r(this),n=o(t.length),a=n-1;for(arguments.length>1&&(a=c(a,i(arguments[1]))),a<0&&(a=n+a);a>=0;a--)if(a in t&&t[a]===e)return a||0;return-1}:u},{"../internals/array-method-is-strict":119,"../internals/array-method-uses-to-length":120,"../internals/to-indexed-object":217,"../internals/to-integer":218,"../internals/to-length":219}],118:[function(e,t,n){var r=e("../internals/fails"),i=e("../internals/well-known-symbol"),o=e("../internals/engine-v8-version"),a=i("species");t.exports=function(e){return o>=51||!r((function(){var t=[];return(t.constructor={})[a]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},{"../internals/engine-v8-version":142,"../internals/fails":145,"../internals/well-known-symbol":231}],119:[function(e,t,n){"use strict";var r=e("../internals/fails");t.exports=function(e,t){var n=[][e];return!!n&&r((function(){n.call(null,t||function(){throw 1},1)}))}},{"../internals/fails":145}],120:[function(e,t,n){var r=e("../internals/descriptors"),i=e("../internals/fails"),o=e("../internals/has"),a=Object.defineProperty,s={},c=function(e){throw e};t.exports=function(e,t){if(o(s,e))return s[e];t||(t={});var n=[][e],u=!!o(t,"ACCESSORS")&&t.ACCESSORS,l=o(t,0)?t[0]:c,h=o(t,1)?t[1]:void 0;return s[e]=!!n&&!i((function(){if(u&&!r)return!0;var e={length:-1};u?a(e,1,{enumerable:!0,get:c}):e[1]=1,n.call(e,l,h)}))}},{"../internals/descriptors":136,"../internals/fails":145,"../internals/has":151}],121:[function(e,t,n){var r=e("../internals/a-function"),i=e("../internals/to-object"),o=e("../internals/indexed-object"),a=e("../internals/to-length"),s=function(e){return function(t,n,s,c){r(n);var u=i(t),l=o(u),h=a(u.length),d=e?h-1:0,f=e?-1:1;if(s<2)for(;;){if(d in l){c=l[d],d+=f;break}if(d+=f,e?d<0:h<=d)throw TypeError("Reduce of empty array with no initial value")}for(;e?d>=0:h>d;d+=f)d in l&&(c=n(c,l[d],d,u));return c}};t.exports={left:s(!1),right:s(!0)}},{"../internals/a-function":102,"../internals/indexed-object":157,"../internals/to-length":219,"../internals/to-object":220}],122:[function(e,t,n){var r=e("../internals/is-object"),i=e("../internals/is-array"),o=e("../internals/well-known-symbol")("species");t.exports=function(e,t){var n;return i(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!i(n.prototype)?r(n)&&null===(n=n[o])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)}},{"../internals/is-array":162,"../internals/is-object":164,"../internals/well-known-symbol":231}],123:[function(e,t,n){var r=e("../internals/an-object"),i=e("../internals/iterator-close");t.exports=function(e,t,n,o){try{return o?t(r(n)[0],n[1]):t(n)}catch(t){throw i(e),t}}},{"../internals/an-object":107,"../internals/iterator-close":168}],124:[function(e,t,n){var r=e("../internals/well-known-symbol")("iterator"),i=!1;try{var o=0,a={next:function(){return{done:!!o++}},return:function(){i=!0}};a[r]=function(){return this},Array.from(a,(function(){throw 2}))}catch(e){}t.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o={};o[r]=function(){return{next:function(){return{done:n=!0}}}},e(o)}catch(e){}return n}},{"../internals/well-known-symbol":231}],125:[function(e,t,n){var r={}.toString;t.exports=function(e){return r.call(e).slice(8,-1)}},{}],126:[function(e,t,n){var r=e("../internals/to-string-tag-support"),i=e("../internals/classof-raw"),o=e("../internals/well-known-symbol")("toStringTag"),a="Arguments"==i(function(){return arguments}());t.exports=r?i:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),o))?n:a?i(t):"Object"==(r=i(t))&&"function"==typeof t.callee?"Arguments":r}},{"../internals/classof-raw":125,"../internals/to-string-tag-support":224,"../internals/well-known-symbol":231}],127:[function(e,t,n){var r=e("../internals/has"),i=e("../internals/own-keys"),o=e("../internals/object-get-own-property-descriptor"),a=e("../internals/object-define-property");t.exports=function(e,t){for(var n=i(t),s=a.f,c=o.f,u=0;u<n.length;u++){var l=n[u];r(e,l)||s(e,l,c(t,l))}}},{"../internals/has":151,"../internals/object-define-property":180,"../internals/object-get-own-property-descriptor":181,"../internals/own-keys":192}],128:[function(e,t,n){var r=e("../internals/well-known-symbol")("match");t.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,"/./"[e](t)}catch(e){}}return!1}},{"../internals/well-known-symbol":231}],129:[function(e,t,n){var r=e("../internals/fails");t.exports=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},{"../internals/fails":145}],130:[function(e,t,n){"use strict";var r=e("../internals/iterators-core").IteratorPrototype,i=e("../internals/object-create"),o=e("../internals/create-property-descriptor"),a=e("../internals/set-to-string-tag"),s=e("../internals/iterators"),c=function(){return this};t.exports=function(e,t,n){var u=t+" Iterator";return e.prototype=i(r,{next:o(1,n)}),a(e,u,!1,!0),s[u]=c,e}},{"../internals/create-property-descriptor":132,"../internals/iterators":170,"../internals/iterators-core":169,"../internals/object-create":178,"../internals/set-to-string-tag":206}],131:[function(e,t,n){var r=e("../internals/descriptors"),i=e("../internals/object-define-property"),o=e("../internals/create-property-descriptor");t.exports=r?function(e,t,n){return i.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},{"../internals/create-property-descriptor":132,"../internals/descriptors":136,"../internals/object-define-property":180}],132:[function(e,t,n){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],133:[function(e,t,n){"use strict";var r=e("../internals/to-primitive"),i=e("../internals/object-define-property"),o=e("../internals/create-property-descriptor");t.exports=function(e,t,n){var a=r(t);a in e?i.f(e,a,o(0,n)):e[a]=n}},{"../internals/create-property-descriptor":132,"../internals/object-define-property":180,"../internals/to-primitive":223}],134:[function(e,t,n){"use strict";var r=e("../internals/export"),i=e("../internals/create-iterator-constructor"),o=e("../internals/object-get-prototype-of"),a=e("../internals/object-set-prototype-of"),s=e("../internals/set-to-string-tag"),c=e("../internals/create-non-enumerable-property"),u=e("../internals/redefine"),l=e("../internals/well-known-symbol"),h=e("../internals/is-pure"),d=e("../internals/iterators"),f=e("../internals/iterators-core"),p=f.IteratorPrototype,g=f.BUGGY_SAFARI_ITERATORS,A=l("iterator"),v="keys",m="values",y="entries",b=function(){return this};t.exports=function(e,t,n,l,f,_,E){i(n,t,l);var w,I,C,S=function(e){if(e===f&&N)return N;if(!g&&e in k)return k[e];switch(e){case v:case m:case y:return function(){return new n(this,e)}}return function(){return new n(this)}},T=t+" Iterator",R=!1,k=e.prototype,O=k[A]||k["@@iterator"]||f&&k[f],N=!g&&O||S(f),x="Array"==t&&k.entries||O;if(x&&(w=o(x.call(new e)),p!==Object.prototype&&w.next&&(h||o(w)===p||(a?a(w,p):"function"!=typeof w[A]&&c(w,A,b)),s(w,T,!0,!0),h&&(d[T]=b))),f==m&&O&&O.name!==m&&(R=!0,N=function(){return O.call(this)}),h&&!E||k[A]===N||c(k,A,N),d[t]=N,f)if(I={values:S(m),keys:_?N:S(v),entries:S(y)},E)for(C in I)(g||R||!(C in k))&&u(k,C,I[C]);else r({target:t,proto:!0,forced:g||R},I);return I}},{"../internals/create-iterator-constructor":130,"../internals/create-non-enumerable-property":131,"../internals/export":144,"../internals/is-pure":165,"../internals/iterators":170,"../internals/iterators-core":169,"../internals/object-get-prototype-of":185,"../internals/object-set-prototype-of":189,"../internals/redefine":197,"../internals/set-to-string-tag":206,"../internals/well-known-symbol":231}],135:[function(e,t,n){var r=e("../internals/path"),i=e("../internals/has"),o=e("../internals/well-known-symbol-wrapped"),a=e("../internals/object-define-property").f;t.exports=function(e){var t=r.Symbol||(r.Symbol={});i(t,e)||a(t,e,{value:o.f(e)})}},{"../internals/has":151,"../internals/object-define-property":180,"../internals/path":193,"../internals/well-known-symbol-wrapped":230}],136:[function(e,t,n){var r=e("../internals/fails");t.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},{"../internals/fails":145}],137:[function(e,t,n){var r=e("../internals/global"),i=e("../internals/is-object"),o=r.document,a=i(o)&&i(o.createElement);t.exports=function(e){return a?o.createElement(e):{}}},{"../internals/global":150,"../internals/is-object":164}],138:[function(e,t,n){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},{}],139:[function(e,t,n){var r=e("../internals/engine-user-agent");t.exports=/(iphone|ipod|ipad).*applewebkit/i.test(r)},{"../internals/engine-user-agent":141}],140:[function(e,t,n){var r=e("../internals/classof-raw"),i=e("../internals/global");t.exports="process"==r(i.process)},{"../internals/classof-raw":125,"../internals/global":150}],141:[function(e,t,n){var r=e("../internals/get-built-in");t.exports=r("navigator","userAgent")||""},{"../internals/get-built-in":148}],142:[function(e,t,n){var r,i,o=e("../internals/global"),a=e("../internals/engine-user-agent"),s=o.process,c=s&&s.versions,u=c&&c.v8;u?i=(r=u.split("."))[0]+r[1]:a&&(!(r=a.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/))&&(i=r[1]),t.exports=i&&+i},{"../internals/engine-user-agent":141,"../internals/global":150}],143:[function(e,t,n){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],144:[function(e,t,n){var r=e("../internals/global"),i=e("../internals/object-get-own-property-descriptor").f,o=e("../internals/create-non-enumerable-property"),a=e("../internals/redefine"),s=e("../internals/set-global"),c=e("../internals/copy-constructor-properties"),u=e("../internals/is-forced");t.exports=function(e,t){var n,l,h,d,f,p=e.target,g=e.global,A=e.stat;if(n=g?r:A?r[p]||s(p,{}):(r[p]||{}).prototype)for(l in t){if(d=t[l],h=e.noTargetGet?(f=i(n,l))&&f.value:n[l],!u(g?l:p+(A?".":"#")+l,e.forced)&&void 0!==h){if(typeof d==typeof h)continue;c(d,h)}(e.sham||h&&h.sham)&&o(d,"sham",!0),a(n,l,d,e)}}},{"../internals/copy-constructor-properties":127,"../internals/create-non-enumerable-property":131,"../internals/global":150,"../internals/is-forced":163,"../internals/object-get-own-property-descriptor":181,"../internals/redefine":197,"../internals/set-global":204}],145:[function(e,t,n){t.exports=function(e){try{return!!e()}catch(e){return!0}}},{}],146:[function(e,t,n){"use strict";e("../modules/es.regexp.exec");var r=e("../internals/redefine"),i=e("../internals/fails"),o=e("../internals/well-known-symbol"),a=e("../internals/regexp-exec"),s=e("../internals/create-non-enumerable-property"),c=o("species"),u=!i((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),l="$0"==="a".replace(/./,"$0"),h=o("replace"),d=!!/./[h]&&""===/./[h]("a","$0"),f=!i((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));t.exports=function(e,t,n,h){var p=o(e),g=!i((function(){var t={};return t[p]=function(){return 7},7!=""[e](t)})),A=g&&!i((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[c]=function(){return n},n.flags="",n[p]=/./[p]),n.exec=function(){return t=!0,null},n[p](""),!t}));if(!g||!A||"replace"===e&&(!u||!l||d)||"split"===e&&!f){var v=/./[p],m=n(p,""[e],(function(e,t,n,r,i){return t.exec===a?g&&!i?{done:!0,value:v.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),{REPLACE_KEEPS_$0:l,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:d}),y=m[0],b=m[1];r(String.prototype,e,y),r(RegExp.prototype,p,2==t?function(e,t){return b.call(e,this,t)}:function(e){return b.call(e,this)})}h&&s(RegExp.prototype[p],"sham",!0)}},{"../internals/create-non-enumerable-property":131,"../internals/fails":145,"../internals/redefine":197,"../internals/regexp-exec":199,"../internals/well-known-symbol":231,"../modules/es.regexp.exec":256}],147:[function(e,t,n){var r=e("../internals/a-function");t.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},{"../internals/a-function":102}],148:[function(e,t,n){var r=e("../internals/path"),i=e("../internals/global"),o=function(e){return"function"==typeof e?e:void 0};t.exports=function(e,t){return arguments.length<2?o(r[e])||o(i[e]):r[e]&&r[e][t]||i[e]&&i[e][t]}},{"../internals/global":150,"../internals/path":193}],149:[function(e,t,n){var r=e("../internals/classof"),i=e("../internals/iterators"),o=e("../internals/well-known-symbol")("iterator");t.exports=function(e){if(null!=e)return e[o]||e["@@iterator"]||i[r(e)]}},{"../internals/classof":126,"../internals/iterators":170,"../internals/well-known-symbol":231}],150:[function(e,t,n){(function(e){var n=function(e){return e&&e.Math==Math&&e};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof e&&e)||function(){return this}()||Function("return this")()}).call(this,void 0!==__webpack_require__.g?__webpack_require__.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],151:[function(e,t,n){var r={}.hasOwnProperty;t.exports=function(e,t){return r.call(e,t)}},{}],152:[function(e,t,n){t.exports={}},{}],153:[function(e,t,n){var r=e("../internals/global");t.exports=function(e,t){var n=r.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}},{"../internals/global":150}],154:[function(e,t,n){var r=e("../internals/get-built-in");t.exports=r("document","documentElement")},{"../internals/get-built-in":148}],155:[function(e,t,n){var r=e("../internals/descriptors"),i=e("../internals/fails"),o=e("../internals/document-create-element");t.exports=!r&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},{"../internals/descriptors":136,"../internals/document-create-element":137,"../internals/fails":145}],156:[function(e,t,n){var r=1/0,i=Math.abs,o=Math.pow,a=Math.floor,s=Math.log,c=Math.LN2;t.exports={pack:function(e,t,n){var u,l,h,d=new Array(n),f=8*n-t-1,p=(1<<f)-1,g=p>>1,A=23===t?o(2,-24)-o(2,-77):0,v=e<0||0===e&&1/e<0?1:0,m=0;for((e=i(e))!=e||e===r?(l=e!=e?1:0,u=p):(u=a(s(e)/c),e*(h=o(2,-u))<1&&(u--,h*=2),(e+=u+g>=1?A/h:A*o(2,1-g))*h>=2&&(u++,h/=2),u+g>=p?(l=0,u=p):u+g>=1?(l=(e*h-1)*o(2,t),u+=g):(l=e*o(2,g-1)*o(2,t),u=0));t>=8;d[m++]=255&l,l/=256,t-=8);for(u=u<<t|l,f+=t;f>0;d[m++]=255&u,u/=256,f-=8);return d[--m]|=128*v,d},unpack:function(e,t){var n,i=e.length,a=8*i-t-1,s=(1<<a)-1,c=s>>1,u=a-7,l=i-1,h=e[l--],d=127&h;for(h>>=7;u>0;d=256*d+e[l],l--,u-=8);for(n=d&(1<<-u)-1,d>>=-u,u+=t;u>0;n=256*n+e[l],l--,u-=8);if(0===d)d=1-c;else{if(d===s)return n?NaN:h?-1/0:r;n+=o(2,t),d-=c}return(h?-1:1)*n*o(2,d-t)}}},{}],157:[function(e,t,n){var r=e("../internals/fails"),i=e("../internals/classof-raw"),o="".split;t.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==i(e)?o.call(e,""):Object(e)}:Object},{"../internals/classof-raw":125,"../internals/fails":145}],158:[function(e,t,n){var r=e("../internals/is-object"),i=e("../internals/object-set-prototype-of");t.exports=function(e,t,n){var o,a;return i&&"function"==typeof(o=t.constructor)&&o!==n&&r(a=o.prototype)&&a!==n.prototype&&i(e,a),e}},{"../internals/is-object":164,"../internals/object-set-prototype-of":189}],159:[function(e,t,n){var r=e("../internals/shared-store"),i=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(e){return i.call(e)}),t.exports=r.inspectSource},{"../internals/shared-store":208}],160:[function(e,t,n){var r,i,o,a=e("../internals/native-weak-map"),s=e("../internals/global"),c=e("../internals/is-object"),u=e("../internals/create-non-enumerable-property"),l=e("../internals/has"),h=e("../internals/shared-store"),d=e("../internals/shared-key"),f=e("../internals/hidden-keys"),p=s.WeakMap;if(a){var g=h.state||(h.state=new p),A=g.get,v=g.has,m=g.set;r=function(e,t){return t.facade=e,m.call(g,e,t),t},i=function(e){return A.call(g,e)||{}},o=function(e){return v.call(g,e)}}else{var y=d("state");f[y]=!0,r=function(e,t){return t.facade=e,u(e,y,t),t},i=function(e){return l(e,y)?e[y]:{}},o=function(e){return l(e,y)}}t.exports={set:r,get:i,has:o,enforce:function(e){return o(e)?i(e):r(e,{})},getterFor:function(e){return function(t){var n;if(!c(t)||(n=i(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}}},{"../internals/create-non-enumerable-property":131,"../internals/global":150,"../internals/has":151,"../internals/hidden-keys":152,"../internals/is-object":164,"../internals/native-weak-map":174,"../internals/shared-key":207,"../internals/shared-store":208}],161:[function(e,t,n){var r=e("../internals/well-known-symbol"),i=e("../internals/iterators"),o=r("iterator"),a=Array.prototype;t.exports=function(e){return void 0!==e&&(i.Array===e||a[o]===e)}},{"../internals/iterators":170,"../internals/well-known-symbol":231}],162:[function(e,t,n){var r=e("../internals/classof-raw");t.exports=Array.isArray||function(e){return"Array"==r(e)}},{"../internals/classof-raw":125}],163:[function(e,t,n){var r=e("../internals/fails"),i=/#|\.prototype\./,o=function(e,t){var n=s[a(e)];return n==u||n!=c&&("function"==typeof t?r(t):!!t)},a=o.normalize=function(e){return String(e).replace(i,".").toLowerCase()},s=o.data={},c=o.NATIVE="N",u=o.POLYFILL="P";t.exports=o},{"../internals/fails":145}],164:[function(e,t,n){t.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},{}],165:[function(e,t,n){t.exports=!1},{}],166:[function(e,t,n){var r=e("../internals/is-object"),i=e("../internals/classof-raw"),o=e("../internals/well-known-symbol")("match");t.exports=function(e){var t;return r(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==i(e))}},{"../internals/classof-raw":125,"../internals/is-object":164,"../internals/well-known-symbol":231}],167:[function(e,t,n){var r=e("../internals/an-object"),i=e("../internals/is-array-iterator-method"),o=e("../internals/to-length"),a=e("../internals/function-bind-context"),s=e("../internals/get-iterator-method"),c=e("../internals/iterator-close"),u=function(e,t){this.stopped=e,this.result=t};t.exports=function(e,t,n){var l,h,d,f,p,g,A,v=n&&n.that,m=!(!n||!n.AS_ENTRIES),y=!(!n||!n.IS_ITERATOR),b=!(!n||!n.INTERRUPTED),_=a(t,v,1+m+b),E=function(e){return l&&c(l),new u(!0,e)},w=function(e){return m?(r(e),b?_(e[0],e[1],E):_(e[0],e[1])):b?_(e,E):_(e)};if(y)l=e;else{if("function"!=typeof(h=s(e)))throw TypeError("Target is not iterable");if(i(h)){for(d=0,f=o(e.length);f>d;d++)if((p=w(e[d]))&&p instanceof u)return p;return new u(!1)}l=h.call(e)}for(g=l.next;!(A=g.call(l)).done;){try{p=w(A.value)}catch(e){throw c(l),e}if("object"==typeof p&&p&&p instanceof u)return p}return new u(!1)}},{"../internals/an-object":107,"../internals/function-bind-context":147,"../internals/get-iterator-method":149,"../internals/is-array-iterator-method":161,"../internals/iterator-close":168,"../internals/to-length":219}],168:[function(e,t,n){var r=e("../internals/an-object");t.exports=function(e){var t=e.return;if(void 0!==t)return r(t.call(e)).value}},{"../internals/an-object":107}],169:[function(e,t,n){"use strict";var r,i,o,a=e("../internals/object-get-prototype-of"),s=e("../internals/create-non-enumerable-property"),c=e("../internals/has"),u=e("../internals/well-known-symbol"),l=e("../internals/is-pure"),h=u("iterator"),d=!1;[].keys&&("next"in(o=[].keys())?(i=a(a(o)))!==Object.prototype&&(r=i):d=!0),null==r&&(r={}),l||c(r,h)||s(r,h,(function(){return this})),t.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:d}},{"../internals/create-non-enumerable-property":131,"../internals/has":151,"../internals/is-pure":165,"../internals/object-get-prototype-of":185,"../internals/well-known-symbol":231}],170:[function(e,t,n){arguments[4][152][0].apply(n,arguments)},{dup:152}],171:[function(e,t,n){var r,i,o,a,s,c,u,l,h=e("../internals/global"),d=e("../internals/object-get-own-property-descriptor").f,f=e("../internals/task").set,p=e("../internals/engine-is-ios"),g=e("../internals/engine-is-node"),A=h.MutationObserver||h.WebKitMutationObserver,v=h.document,m=h.process,y=h.Promise,b=d(h,"queueMicrotask"),_=b&&b.value;_||(r=function(){var e,t;for(g&&(e=m.domain)&&e.exit();i;){t=i.fn,i=i.next;try{t()}catch(e){throw i?a():o=void 0,e}}o=void 0,e&&e.enter()},!p&&!g&&A&&v?(s=!0,c=v.createTextNode(""),new A(r).observe(c,{characterData:!0}),a=function(){c.data=s=!s}):y&&y.resolve?(u=y.resolve(void 0),l=u.then,a=function(){l.call(u,r)}):a=g?function(){m.nextTick(r)}:function(){f.call(h,r)}),t.exports=_||function(e){var t={fn:e,next:void 0};o&&(o.next=t),i||(i=t,a()),o=t}},{"../internals/engine-is-ios":139,"../internals/engine-is-node":140,"../internals/global":150,"../internals/object-get-own-property-descriptor":181,"../internals/task":214}],172:[function(e,t,n){var r=e("../internals/global");t.exports=r.Promise},{"../internals/global":150}],173:[function(e,t,n){var r=e("../internals/fails");t.exports=!!Object.getOwnPropertySymbols&&!r((function(){return!String(Symbol())}))},{"../internals/fails":145}],174:[function(e,t,n){var r=e("../internals/global"),i=e("../internals/inspect-source"),o=r.WeakMap;t.exports="function"==typeof o&&/native code/.test(i(o))},{"../internals/global":150,"../internals/inspect-source":159}],175:[function(e,t,n){"use strict";var r=e("../internals/a-function"),i=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)};t.exports.f=function(e){return new i(e)}},{"../internals/a-function":102}],176:[function(e,t,n){var r=e("../internals/is-regexp");t.exports=function(e){if(r(e))throw TypeError("The method doesn't accept regular expressions");return e}},{"../internals/is-regexp":166}],177:[function(e,t,n){"use strict";var r=e("../internals/descriptors"),i=e("../internals/fails"),o=e("../internals/object-keys"),a=e("../internals/object-get-own-property-symbols"),s=e("../internals/object-property-is-enumerable"),c=e("../internals/to-object"),u=e("../internals/indexed-object"),l=Object.assign,h=Object.defineProperty;t.exports=!l||i((function(){if(r&&1!==l({b:1},l(h({},"a",{enumerable:!0,get:function(){h(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach((function(e){t[e]=e})),7!=l({},e)[n]||o(l({},t)).join("")!=i}))?function(e,t){for(var n=c(e),i=arguments.length,l=1,h=a.f,d=s.f;i>l;)for(var f,p=u(arguments[l++]),g=h?o(p).concat(h(p)):o(p),A=g.length,v=0;A>v;)f=g[v++],r&&!d.call(p,f)||(n[f]=p[f]);return n}:l},{"../internals/descriptors":136,"../internals/fails":145,"../internals/indexed-object":157,"../internals/object-get-own-property-symbols":184,"../internals/object-keys":187,"../internals/object-property-is-enumerable":188,"../internals/to-object":220}],178:[function(e,t,n){var r,i=e("../internals/an-object"),o=e("../internals/object-define-properties"),a=e("../internals/enum-bug-keys"),s=e("../internals/hidden-keys"),c=e("../internals/html"),u=e("../internals/document-create-element"),l=e("../internals/shared-key"),h=l("IE_PROTO"),d=function(){},f=function(e){return"<script>"+e+"<\/script>"},p=function(){try{r=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t;p=r?function(e){e.write(f("")),e.close();var t=e.parentWindow.Object;return e=null,t}(r):((t=u("iframe")).style.display="none",c.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(f("document.F=Object")),e.close(),e.F);for(var n=a.length;n--;)delete p.prototype[a[n]];return p()};s[h]=!0,t.exports=Object.create||function(e,t){var n;return null!==e?(d.prototype=i(e),n=new d,d.prototype=null,n[h]=e):n=p(),void 0===t?n:o(n,t)}},{"../internals/an-object":107,"../internals/document-create-element":137,"../internals/enum-bug-keys":143,"../internals/hidden-keys":152,"../internals/html":154,"../internals/object-define-properties":179,"../internals/shared-key":207}],179:[function(e,t,n){var r=e("../internals/descriptors"),i=e("../internals/object-define-property"),o=e("../internals/an-object"),a=e("../internals/object-keys");t.exports=r?Object.defineProperties:function(e,t){o(e);for(var n,r=a(t),s=r.length,c=0;s>c;)i.f(e,n=r[c++],t[n]);return e}},{"../internals/an-object":107,"../internals/descriptors":136,"../internals/object-define-property":180,"../internals/object-keys":187}],180:[function(e,t,n){var r=e("../internals/descriptors"),i=e("../internals/ie8-dom-define"),o=e("../internals/an-object"),a=e("../internals/to-primitive"),s=Object.defineProperty;n.f=r?s:function(e,t,n){if(o(e),t=a(t,!0),o(n),i)try{return s(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},{"../internals/an-object":107,"../internals/descriptors":136,"../internals/ie8-dom-define":155,"../internals/to-primitive":223}],181:[function(e,t,n){var r=e("../internals/descriptors"),i=e("../internals/object-property-is-enumerable"),o=e("../internals/create-property-descriptor"),a=e("../internals/to-indexed-object"),s=e("../internals/to-primitive"),c=e("../internals/has"),u=e("../internals/ie8-dom-define"),l=Object.getOwnPropertyDescriptor;n.f=r?l:function(e,t){if(e=a(e),t=s(t,!0),u)try{return l(e,t)}catch(e){}if(c(e,t))return o(!i.f.call(e,t),e[t])}},{"../internals/create-property-descriptor":132,"../internals/descriptors":136,"../internals/has":151,"../internals/ie8-dom-define":155,"../internals/object-property-is-enumerable":188,"../internals/to-indexed-object":217,"../internals/to-primitive":223}],182:[function(e,t,n){var r=e("../internals/to-indexed-object"),i=e("../internals/object-get-own-property-names").f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(e){return a&&"[object Window]"==o.call(e)?function(e){try{return i(e)}catch(e){return a.slice()}}(e):i(r(e))}},{"../internals/object-get-own-property-names":183,"../internals/to-indexed-object":217}],183:[function(e,t,n){var r=e("../internals/object-keys-internal"),i=e("../internals/enum-bug-keys").concat("length","prototype");n.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},{"../internals/enum-bug-keys":143,"../internals/object-keys-internal":186}],184:[function(e,t,n){n.f=Object.getOwnPropertySymbols},{}],185:[function(e,t,n){var r=e("../internals/has"),i=e("../internals/to-object"),o=e("../internals/shared-key"),a=e("../internals/correct-prototype-getter"),s=o("IE_PROTO"),c=Object.prototype;t.exports=a?Object.getPrototypeOf:function(e){return e=i(e),r(e,s)?e[s]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?c:null}},{"../internals/correct-prototype-getter":129,"../internals/has":151,"../internals/shared-key":207,"../internals/to-object":220}],186:[function(e,t,n){var r=e("../internals/has"),i=e("../internals/to-indexed-object"),o=e("../internals/array-includes").indexOf,a=e("../internals/hidden-keys");t.exports=function(e,t){var n,s=i(e),c=0,u=[];for(n in s)!r(a,n)&&r(s,n)&&u.push(n);for(;t.length>c;)r(s,n=t[c++])&&(~o(u,n)||u.push(n));return u}},{"../internals/array-includes":115,"../internals/has":151,"../internals/hidden-keys":152,"../internals/to-indexed-object":217}],187:[function(e,t,n){var r=e("../internals/object-keys-internal"),i=e("../internals/enum-bug-keys");t.exports=Object.keys||function(e){return r(e,i)}},{"../internals/enum-bug-keys":143,"../internals/object-keys-internal":186}],188:[function(e,t,n){"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,o=i&&!r.call({1:2},1);n.f=o?function(e){var t=i(this,e);return!!t&&t.enumerable}:r},{}],189:[function(e,t,n){var r=e("../internals/an-object"),i=e("../internals/a-possible-prototype");t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(e){}return function(n,o){return r(n),i(o),t?e.call(n,o):n.__proto__=o,n}}():void 0)},{"../internals/a-possible-prototype":103,"../internals/an-object":107}],190:[function(e,t,n){var r=e("../internals/descriptors"),i=e("../internals/object-keys"),o=e("../internals/to-indexed-object"),a=e("../internals/object-property-is-enumerable").f,s=function(e){return function(t){for(var n,s=o(t),c=i(s),u=c.length,l=0,h=[];u>l;)n=c[l++],r&&!a.call(s,n)||h.push(e?[n,s[n]]:s[n]);return h}};t.exports={entries:s(!0),values:s(!1)}},{"../internals/descriptors":136,"../internals/object-keys":187,"../internals/object-property-is-enumerable":188,"../internals/to-indexed-object":217}],191:[function(e,t,n){"use strict";var r=e("../internals/to-string-tag-support"),i=e("../internals/classof");t.exports=r?{}.toString:function(){return"[object "+i(this)+"]"}},{"../internals/classof":126,"../internals/to-string-tag-support":224}],192:[function(e,t,n){var r=e("../internals/get-built-in"),i=e("../internals/object-get-own-property-names"),o=e("../internals/object-get-own-property-symbols"),a=e("../internals/an-object");t.exports=r("Reflect","ownKeys")||function(e){var t=i.f(a(e)),n=o.f;return n?t.concat(n(e)):t}},{"../internals/an-object":107,"../internals/get-built-in":148,"../internals/object-get-own-property-names":183,"../internals/object-get-own-property-symbols":184}],193:[function(e,t,n){var r=e("../internals/global");t.exports=r},{"../internals/global":150}],194:[function(e,t,n){t.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},{}],195:[function(e,t,n){var r=e("../internals/an-object"),i=e("../internals/is-object"),o=e("../internals/new-promise-capability");t.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=o.f(e);return(0,n.resolve)(t),n.promise}},{"../internals/an-object":107,"../internals/is-object":164,"../internals/new-promise-capability":175}],196:[function(e,t,n){var r=e("../internals/redefine");t.exports=function(e,t,n){for(var i in t)r(e,i,t[i],n);return e}},{"../internals/redefine":197}],197:[function(e,t,n){var r=e("../internals/global"),i=e("../internals/create-non-enumerable-property"),o=e("../internals/has"),a=e("../internals/set-global"),s=e("../internals/inspect-source"),c=e("../internals/internal-state"),u=c.get,l=c.enforce,h=String(String).split("String");(t.exports=function(e,t,n,s){var c,u=!!s&&!!s.unsafe,d=!!s&&!!s.enumerable,f=!!s&&!!s.noTargetGet;"function"==typeof n&&("string"!=typeof t||o(n,"name")||i(n,"name",t),(c=l(n)).source||(c.source=h.join("string"==typeof t?t:""))),e!==r?(u?!f&&e[t]&&(d=!0):delete e[t],d?e[t]=n:i(e,t,n)):d?e[t]=n:a(t,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&u(this).source||s(this)}))},{"../internals/create-non-enumerable-property":131,"../internals/global":150,"../internals/has":151,"../internals/inspect-source":159,"../internals/internal-state":160,"../internals/set-global":204}],198:[function(e,t,n){var r=e("./classof-raw"),i=e("./regexp-exec");t.exports=function(e,t){var n=e.exec;if("function"==typeof n){var o=n.call(e,t);if("object"!=typeof o)throw TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==r(e))throw TypeError("RegExp#exec called on incompatible receiver");return i.call(e,t)}},{"./classof-raw":125,"./regexp-exec":199}],199:[function(e,t,n){"use strict";var r,i,o=e("./regexp-flags"),a=e("./regexp-sticky-helpers"),s=RegExp.prototype.exec,c=String.prototype.replace,u=s,l=(r=/a/,i=/b*/g,s.call(r,"a"),s.call(i,"a"),0!==r.lastIndex||0!==i.lastIndex),h=a.UNSUPPORTED_Y||a.BROKEN_CARET,d=void 0!==/()??/.exec("")[1];(l||d||h)&&(u=function(e){var t,n,r,i,a=this,u=h&&a.sticky,f=o.call(a),p=a.source,g=0,A=e;return u&&(-1===(f=f.replace("y","")).indexOf("g")&&(f+="g"),A=String(e).slice(a.lastIndex),a.lastIndex>0&&(!a.multiline||a.multiline&&"\n"!==e[a.lastIndex-1])&&(p="(?: "+p+")",A=" "+A,g++),n=new RegExp("^(?:"+p+")",f)),d&&(n=new RegExp("^"+p+"$(?!\\s)",f)),l&&(t=a.lastIndex),r=s.call(u?n:a,A),u?r?(r.input=r.input.slice(g),r[0]=r[0].slice(g),r.index=a.lastIndex,a.lastIndex+=r[0].length):a.lastIndex=0:l&&r&&(a.lastIndex=a.global?r.index+r[0].length:t),d&&r&&r.length>1&&c.call(r[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)})),r}),t.exports=u},{"./regexp-flags":200,"./regexp-sticky-helpers":201}],200:[function(e,t,n){"use strict";var r=e("../internals/an-object");t.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},{"../internals/an-object":107}],201:[function(e,t,n){"use strict";var r=e("./fails");function i(e,t){return RegExp(e,t)}n.UNSUPPORTED_Y=r((function(){var e=i("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),n.BROKEN_CARET=r((function(){var e=i("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},{"./fails":145}],202:[function(e,t,n){t.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},{}],203:[function(e,t,n){t.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},{}],204:[function(e,t,n){var r=e("../internals/global"),i=e("../internals/create-non-enumerable-property");t.exports=function(e,t){try{i(r,e,t)}catch(n){r[e]=t}return t}},{"../internals/create-non-enumerable-property":131,"../internals/global":150}],205:[function(e,t,n){"use strict";var r=e("../internals/get-built-in"),i=e("../internals/object-define-property"),o=e("../internals/well-known-symbol"),a=e("../internals/descriptors"),s=o("species");t.exports=function(e){var t=r(e),n=i.f;a&&t&&!t[s]&&n(t,s,{configurable:!0,get:function(){return this}})}},{"../internals/descriptors":136,"../internals/get-built-in":148,"../internals/object-define-property":180,"../internals/well-known-symbol":231}],206:[function(e,t,n){var r=e("../internals/object-define-property").f,i=e("../internals/has"),o=e("../internals/well-known-symbol")("toStringTag");t.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},{"../internals/has":151,"../internals/object-define-property":180,"../internals/well-known-symbol":231}],207:[function(e,t,n){var r=e("../internals/shared"),i=e("../internals/uid"),o=r("keys");t.exports=function(e){return o[e]||(o[e]=i(e))}},{"../internals/shared":209,"../internals/uid":228}],208:[function(e,t,n){var r=e("../internals/global"),i=e("../internals/set-global"),o="__core-js_shared__",a=r[o]||i(o,{});t.exports=a},{"../internals/global":150,"../internals/set-global":204}],209:[function(e,t,n){var r=e("../internals/is-pure"),i=e("../internals/shared-store");(t.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.7.0",mode:r?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},{"../internals/is-pure":165,"../internals/shared-store":208}],210:[function(e,t,n){var r=e("../internals/an-object"),i=e("../internals/a-function"),o=e("../internals/well-known-symbol")("species");t.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||null==(n=r(a)[o])?t:i(n)}},{"../internals/a-function":102,"../internals/an-object":107,"../internals/well-known-symbol":231}],211:[function(e,t,n){var r=e("../internals/to-integer"),i=e("../internals/require-object-coercible"),o=function(e){return function(t,n){var o,a,s=String(i(t)),c=r(n),u=s.length;return c<0||c>=u?e?"":void 0:(o=s.charCodeAt(c))<55296||o>56319||c+1===u||(a=s.charCodeAt(c+1))<56320||a>57343?e?s.charAt(c):o:e?s.slice(c,c+2):a-56320+(o-55296<<10)+65536}};t.exports={codeAt:o(!1),charAt:o(!0)}},{"../internals/require-object-coercible":202,"../internals/to-integer":218}],212:[function(e,t,n){var r=e("../internals/fails"),i=e("../internals/whitespaces");t.exports=function(e){return r((function(){return!!i[e]()||""!=""[e]()||i[e].name!==e}))}},{"../internals/fails":145,"../internals/whitespaces":232}],213:[function(e,t,n){var r=e("../internals/require-object-coercible"),i="["+e("../internals/whitespaces")+"]",o=RegExp("^"+i+i+"*"),a=RegExp(i+i+"*$"),s=function(e){return function(t){var n=String(r(t));return 1&e&&(n=n.replace(o,"")),2&e&&(n=n.replace(a,"")),n}};t.exports={start:s(1),end:s(2),trim:s(3)}},{"../internals/require-object-coercible":202,"../internals/whitespaces":232}],214:[function(e,t,n){var r,i,o,a=e("../internals/global"),s=e("../internals/fails"),c=e("../internals/function-bind-context"),u=e("../internals/html"),l=e("../internals/document-create-element"),h=e("../internals/engine-is-ios"),d=e("../internals/engine-is-node"),f=a.location,p=a.setImmediate,g=a.clearImmediate,A=a.process,v=a.MessageChannel,m=a.Dispatch,y=0,b={},_="onreadystatechange",E=function(e){if(b.hasOwnProperty(e)){var t=b[e];delete b[e],t()}},w=function(e){return function(){E(e)}},I=function(e){E(e.data)},C=function(e){a.postMessage(e+"",f.protocol+"//"+f.host)};p&&g||(p=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return b[++y]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},r(y),y},g=function(e){delete b[e]},d?r=function(e){A.nextTick(w(e))}:m&&m.now?r=function(e){m.now(w(e))}:v&&!h?(o=(i=new v).port2,i.port1.onmessage=I,r=c(o.postMessage,o,1)):a.addEventListener&&"function"==typeof postMessage&&!a.importScripts&&f&&"file:"!==f.protocol&&!s(C)?(r=C,a.addEventListener("message",I,!1)):r=_ in l("script")?function(e){u.appendChild(l("script")).onreadystatechange=function(){u.removeChild(this),E(e)}}:function(e){setTimeout(w(e),0)}),t.exports={set:p,clear:g}},{"../internals/document-create-element":137,"../internals/engine-is-ios":139,"../internals/engine-is-node":140,"../internals/fails":145,"../internals/function-bind-context":147,"../internals/global":150,"../internals/html":154}],215:[function(e,t,n){var r=e("../internals/to-integer"),i=Math.max,o=Math.min;t.exports=function(e,t){var n=r(e);return n<0?i(n+t,0):o(n,t)}},{"../internals/to-integer":218}],216:[function(e,t,n){var r=e("../internals/to-integer"),i=e("../internals/to-length");t.exports=function(e){if(void 0===e)return 0;var t=r(e),n=i(t);if(t!==n)throw RangeError("Wrong length or index");return n}},{"../internals/to-integer":218,"../internals/to-length":219}],217:[function(e,t,n){var r=e("../internals/indexed-object"),i=e("../internals/require-object-coercible");t.exports=function(e){return r(i(e))}},{"../internals/indexed-object":157,"../internals/require-object-coercible":202}],218:[function(e,t,n){var r=Math.ceil,i=Math.floor;t.exports=function(e){return isNaN(e=+e)?0:(e>0?i:r)(e)}},{}],219:[function(e,t,n){var r=e("../internals/to-integer"),i=Math.min;t.exports=function(e){return e>0?i(r(e),9007199254740991):0}},{"../internals/to-integer":218}],220:[function(e,t,n){var r=e("../internals/require-object-coercible");t.exports=function(e){return Object(r(e))}},{"../internals/require-object-coercible":202}],221:[function(e,t,n){var r=e("../internals/to-positive-integer");t.exports=function(e,t){var n=r(e);if(n%t)throw RangeError("Wrong offset");return n}},{"../internals/to-positive-integer":222}],222:[function(e,t,n){var r=e("../internals/to-integer");t.exports=function(e){var t=r(e);if(t<0)throw RangeError("The argument can't be less than 0");return t}},{"../internals/to-integer":218}],223:[function(e,t,n){var r=e("../internals/is-object");t.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},{"../internals/is-object":164}],224:[function(e,t,n){var r={};r[e("../internals/well-known-symbol")("toStringTag")]="z",t.exports="[object z]"===String(r)},{"../internals/well-known-symbol":231}],225:[function(e,t,n){"use strict";var r=e("../internals/export"),i=e("../internals/global"),o=e("../internals/descriptors"),a=e("../internals/typed-array-constructors-require-wrappers"),s=e("../internals/array-buffer-view-core"),c=e("../internals/array-buffer"),u=e("../internals/an-instance"),l=e("../internals/create-property-descriptor"),h=e("../internals/create-non-enumerable-property"),d=e("../internals/to-length"),f=e("../internals/to-index"),p=e("../internals/to-offset"),g=e("../internals/to-primitive"),A=e("../internals/has"),v=e("../internals/classof"),m=e("../internals/is-object"),y=e("../internals/object-create"),b=e("../internals/object-set-prototype-of"),_=e("../internals/object-get-own-property-names").f,E=e("../internals/typed-array-from"),w=e("../internals/array-iteration").forEach,I=e("../internals/set-species"),C=e("../internals/object-define-property"),S=e("../internals/object-get-own-property-descriptor"),T=e("../internals/internal-state"),R=e("../internals/inherit-if-required"),k=T.get,O=T.set,N=C.f,x=S.f,D=Math.round,L=i.RangeError,P=c.ArrayBuffer,B=c.DataView,M=s.NATIVE_ARRAY_BUFFER_VIEWS,j=s.TYPED_ARRAY_TAG,U=s.TypedArray,F=s.TypedArrayPrototype,Q=s.aTypedArrayConstructor,G=s.isTypedArray,q="BYTES_PER_ELEMENT",V="Wrong length",K=function(e,t){for(var n=0,r=t.length,i=new(Q(e))(r);r>n;)i[n]=t[n++];return i},H=function(e,t){N(e,t,{get:function(){return k(this)[t]}})},W=function(e){var t;return e instanceof P||"ArrayBuffer"==(t=v(e))||"SharedArrayBuffer"==t},z=function(e,t){return G(e)&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},Y=function(e,t){return z(e,t=g(t,!0))?l(2,e[t]):x(e,t)},J=function(e,t,n){return!(z(e,t=g(t,!0))&&m(n)&&A(n,"value"))||A(n,"get")||A(n,"set")||n.configurable||A(n,"writable")&&!n.writable||A(n,"enumerable")&&!n.enumerable?N(e,t,n):(e[t]=n.value,e)};o?(M||(S.f=Y,C.f=J,H(F,"buffer"),H(F,"byteOffset"),H(F,"byteLength"),H(F,"length")),r({target:"Object",stat:!0,forced:!M},{getOwnPropertyDescriptor:Y,defineProperty:J}),t.exports=function(e,t,n){var o=e.match(/\d+$/)[0]/8,s=e+(n?"Clamped":"")+"Array",c="get"+e,l="set"+e,g=i[s],A=g,v=A&&A.prototype,C={},S=function(e,t){N(e,t,{get:function(){return function(e,t){var n=k(e);return n.view[c](t*o+n.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,r){var i=k(e);n&&(r=(r=D(r))<0?0:r>255?255:255&r),i.view[l](t*o+i.byteOffset,r,!0)}(this,t,e)},enumerable:!0})};M?a&&(A=t((function(e,t,n,r){return u(e,A,s),R(m(t)?W(t)?void 0!==r?new g(t,p(n,o),r):void 0!==n?new g(t,p(n,o)):new g(t):G(t)?K(A,t):E.call(A,t):new g(f(t)),e,A)})),b&&b(A,U),w(_(g),(function(e){e in A||h(A,e,g[e])})),A.prototype=v):(A=t((function(e,t,n,r){u(e,A,s);var i,a,c,l=0,h=0;if(m(t)){if(!W(t))return G(t)?K(A,t):E.call(A,t);i=t,h=p(n,o);var g=t.byteLength;if(void 0===r){if(g%o)throw L(V);if((a=g-h)<0)throw L(V)}else if((a=d(r)*o)+h>g)throw L(V);c=a/o}else c=f(t),i=new P(a=c*o);for(O(e,{buffer:i,byteOffset:h,byteLength:a,length:c,view:new B(i)});l<c;)S(e,l++)})),b&&b(A,U),v=A.prototype=y(F)),v.constructor!==A&&h(v,"constructor",A),j&&h(v,j,s),C[s]=A,r({global:!0,forced:A!=g,sham:!M},C),q in A||h(A,q,o),q in v||h(v,q,o),I(s)}):t.exports=function(){}},{"../internals/an-instance":106,"../internals/array-buffer":110,"../internals/array-buffer-view-core":109,"../internals/array-iteration":116,"../internals/classof":126,"../internals/create-non-enumerable-property":131,"../internals/create-property-descriptor":132,"../internals/descriptors":136,"../internals/export":144,"../internals/global":150,"../internals/has":151,"../internals/inherit-if-required":158,"../internals/internal-state":160,"../internals/is-object":164,"../internals/object-create":178,"../internals/object-define-property":180,"../internals/object-get-own-property-descriptor":181,"../internals/object-get-own-property-names":183,"../internals/object-set-prototype-of":189,"../internals/set-species":205,"../internals/to-index":216,"../internals/to-length":219,"../internals/to-offset":221,"../internals/to-primitive":223,"../internals/typed-array-constructors-require-wrappers":226,"../internals/typed-array-from":227}],226:[function(e,t,n){var r=e("../internals/global"),i=e("../internals/fails"),o=e("../internals/check-correctness-of-iteration"),a=e("../internals/array-buffer-view-core").NATIVE_ARRAY_BUFFER_VIEWS,s=r.ArrayBuffer,c=r.Int8Array;t.exports=!a||!i((function(){c(1)}))||!i((function(){new c(-1)}))||!o((function(e){new c,new c(null),new c(1.5),new c(e)}),!0)||i((function(){return 1!==new c(new s(2),1,void 0).length}))},{"../internals/array-buffer-view-core":109,"../internals/check-correctness-of-iteration":124,"../internals/fails":145,"../internals/global":150}],227:[function(e,t,n){var r=e("../internals/to-object"),i=e("../internals/to-length"),o=e("../internals/get-iterator-method"),a=e("../internals/is-array-iterator-method"),s=e("../internals/function-bind-context"),c=e("../internals/array-buffer-view-core").aTypedArrayConstructor;t.exports=function(e){var t,n,u,l,h,d,f=r(e),p=arguments.length,g=p>1?arguments[1]:void 0,A=void 0!==g,v=o(f);if(null!=v&&!a(v))for(d=(h=v.call(f)).next,f=[];!(l=d.call(h)).done;)f.push(l.value);for(A&&p>2&&(g=s(g,arguments[2],2)),n=i(f.length),u=new(c(this))(n),t=0;n>t;t++)u[t]=A?g(f[t],t):f[t];return u}},{"../internals/array-buffer-view-core":109,"../internals/function-bind-context":147,"../internals/get-iterator-method":149,"../internals/is-array-iterator-method":161,"../internals/to-length":219,"../internals/to-object":220}],228:[function(e,t,n){var r=0,i=Math.random();t.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++r+i).toString(36)}},{}],229:[function(e,t,n){var r=e("../internals/native-symbol");t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},{"../internals/native-symbol":173}],230:[function(e,t,n){var r=e("../internals/well-known-symbol");n.f=r},{"../internals/well-known-symbol":231}],231:[function(e,t,n){var r=e("../internals/global"),i=e("../internals/shared"),o=e("../internals/has"),a=e("../internals/uid"),s=e("../internals/native-symbol"),c=e("../internals/use-symbol-as-uid"),u=i("wks"),l=r.Symbol,h=c?l:l&&l.withoutSetter||a;t.exports=function(e){return o(u,e)||(s&&o(l,e)?u[e]=l[e]:u[e]=h("Symbol."+e)),u[e]}},{"../internals/global":150,"../internals/has":151,"../internals/native-symbol":173,"../internals/shared":209,"../internals/uid":228,"../internals/use-symbol-as-uid":229}],232:[function(e,t,n){t.exports="\t\n\v\f\r \u2028\u2029\ufeff"},{}],233:[function(e,t,n){"use strict";var r=e("../internals/export"),i=e("../internals/fails"),o=e("../internals/array-buffer"),a=e("../internals/an-object"),s=e("../internals/to-absolute-index"),c=e("../internals/to-length"),u=e("../internals/species-constructor"),l=o.ArrayBuffer,h=o.DataView,d=l.prototype.slice;r({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:i((function(){return!new l(2).slice(1,void 0).byteLength}))},{slice:function(e,t){if(void 0!==d&&void 0===t)return d.call(a(this),e);for(var n=a(this).byteLength,r=s(e,n),i=s(void 0===t?n:t,n),o=new(u(this,l))(c(i-r)),f=new h(this),p=new h(o),g=0;r<i;)p.setUint8(g++,f.getUint8(r++));return o}})},{"../internals/an-object":107,"../internals/array-buffer":110,"../internals/export":144,"../internals/fails":145,"../internals/species-constructor":210,"../internals/to-absolute-index":215,"../internals/to-length":219}],234:[function(e,t,n){"use strict";var r=e("../internals/export"),i=e("../internals/fails"),o=e("../internals/is-array"),a=e("../internals/is-object"),s=e("../internals/to-object"),c=e("../internals/to-length"),u=e("../internals/create-property"),l=e("../internals/array-species-create"),h=e("../internals/array-method-has-species-support"),d=e("../internals/well-known-symbol"),f=e("../internals/engine-v8-version"),p=d("isConcatSpreadable"),g=9007199254740991,A="Maximum allowed index exceeded",v=f>=51||!i((function(){var e=[];return e[p]=!1,e.concat()[0]!==e})),m=h("concat"),y=function(e){if(!a(e))return!1;var t=e[p];return void 0!==t?!!t:o(e)};r({target:"Array",proto:!0,forced:!v||!m},{concat:function(e){var t,n,r,i,o,a=s(this),h=l(a,0),d=0;for(t=-1,r=arguments.length;t<r;t++)if(y(o=-1===t?a:arguments[t])){if(d+(i=c(o.length))>g)throw TypeError(A);for(n=0;n<i;n++,d++)n in o&&u(h,d,o[n])}else{if(d>=g)throw TypeError(A);u(h,d++,o)}return h.length=d,h}})},{"../internals/array-method-has-species-support":118,"../internals/array-species-create":122,"../internals/create-property":133,"../internals/engine-v8-version":142,"../internals/export":144,"../internals/fails":145,"../internals/is-array":162,"../internals/is-object":164,"../internals/to-length":219,"../internals/to-object":220,"../internals/well-known-symbol":231}],235:[function(e,t,n){var r=e("../internals/export"),i=e("../internals/array-fill"),o=e("../internals/add-to-unscopables");r({target:"Array",proto:!0},{fill:i}),o("fill")},{"../internals/add-to-unscopables":104,"../internals/array-fill":112,"../internals/export":144}],236:[function(e,t,n){"use strict";var r=e("../internals/export"),i=e("../internals/array-iteration").filter,o=e("../internals/array-method-has-species-support"),a=e("../internals/array-method-uses-to-length"),s=o("filter"),c=a("filter");r({target:"Array",proto:!0,forced:!s||!c},{filter:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},{"../internals/array-iteration":116,"../internals/array-method-has-species-support":118,"../internals/array-method-uses-to-length":120,"../internals/export":144}],237:[function(e,t,n){"use strict";var r=e("../internals/export"),i=e("../internals/array-iteration").find,o=e("../internals/add-to-unscopables"),a=e("../internals/array-method-uses-to-length"),s="find",c=!0,u=a(s);s in[]&&Array(1).find((function(){c=!1})),r({target:"Array",proto:!0,forced:c||!u},{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),o(s)},{"../internals/add-to-unscopables":104,"../internals/array-iteration":116,"../internals/array-method-uses-to-length":120,"../internals/export":144}],238:[function(e,t,n){"use strict";var r=e("../internals/export"),i=e("../internals/array-for-each");r({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},{"../internals/array-for-each":113,"../internals/export":144}],239:[function(e,t,n){var r=e("../internals/export"),i=e("../internals/array-from");r({target:"Array",stat:!0,forced:!e("../internals/check-correctness-of-iteration")((function(e){Array.from(e)}))},{from:i})},{"../internals/array-from":114,"../internals/check-correctness-of-iteration":124,"../internals/export":144}],240:[function(e,t,n){"use strict";var r=e("../internals/export"),i=e("../internals/array-includes").includes,o=e("../internals/add-to-unscopables");r({target:"Array",proto:!0,forced:!e("../internals/array-method-uses-to-length")("indexOf",{ACCESSORS:!0,1:0})},{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),o("includes")},{"../internals/add-to-unscopables":104,"../internals/array-includes":115,"../internals/array-method-uses-to-length":120,"../internals/export":144}],241:[function(e,t,n){"use strict";var r=e("../internals/export"),i=e("../internals/array-includes").indexOf,o=e("../internals/array-method-is-strict"),a=e("../internals/array-method-uses-to-length"),s=[].indexOf,c=!!s&&1/[1].indexOf(1,-0)<0,u=o("indexOf"),l=a("indexOf",{ACCESSORS:!0,1:0});r({target:"Array",proto:!0,forced:c||!u||!l},{indexOf:function(e){return c?s.apply(this,arguments)||0:i(this,e,arguments.length>1?arguments[1]:void 0)}})},{"../internals/array-includes":115,"../internals/array-method-is-strict":119,"../internals/array-method-uses-to-length":120,"../internals/export":144}],242:[function(e,t,n){"use strict";var r=e("../internals/to-indexed-object"),i=e("../internals/add-to-unscopables"),o=e("../internals/iterators"),a=e("../internals/internal-state"),s=e("../internals/define-iterator"),c="Array Iterator",u=a.set,l=a.getterFor(c);t.exports=s(Array,"Array",(function(e,t){u(this,{type:c,target:r(e),index:0,kind:t})}),(function(){var e=l(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},{"../internals/add-to-unscopables":104,"../internals/define-iterator":134,"../internals/internal-state":160,"../internals/iterators":170,"../internals/to-indexed-object":217}],243:[function(e,t,n){"use strict";var r=e("../internals/export"),i=e("../internals/indexed-object"),o=e("../internals/to-indexed-object"),a=e("../internals/array-method-is-strict"),s=[].join,c=i!=Object,u=a("join",",");r({target:"Array",proto:!0,forced:c||!u},{join:function(e){return s.call(o(this),void 0===e?",":e)}})},{"../internals/array-method-is-strict":119,"../internals/export":144,"../internals/indexed-object":157,"../internals/to-indexed-object":217}],244:[function(e,t,n){var r=e("../internals/export"),i=e("../internals/array-last-index-of");r({target:"Array",proto:!0,forced:i!==[].lastIndexOf},{lastIndexOf:i})},{"../internals/array-last-index-of":117,"../internals/export":144}],245:[function(e,t,n){"use strict";var r=e("../internals/export"),i=e("../internals/array-iteration").map,o=e("../internals/array-method-has-species-support"),a=e("../internals/array-method-uses-to-length"),s=o("map"),c=a("map");r({target:"Array",proto:!0,forced:!s||!c},{map:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},{"../internals/array-iteration":116,"../internals/array-method-has-species-support":118,"../internals/array-method-uses-to-length":120,"../internals/export":144}],246:[function(e,t,n){"use strict";var r=e("../internals/export"),i=e("../internals/is-object"),o=e("../internals/is-array"),a=e("../internals/to-absolute-index"),s=e("../internals/to-length"),c=e("../internals/to-indexed-object"),u=e("../internals/create-property"),l=e("../internals/well-known-symbol"),h=e("../internals/array-method-has-species-support"),d=e("../internals/array-method-uses-to-length"),f=h("slice"),p=d("slice",{ACCESSORS:!0,0:0,1:2}),g=l("species"),A=[].slice,v=Math.max;r({target:"Array",proto:!0,forced:!f||!p},{slice:function(e,t){var n,r,l,h=c(this),d=s(h.length),f=a(e,d),p=a(void 0===t?d:t,d);if(o(h)&&("function"!=typeof(n=h.constructor)||n!==Array&&!o(n.prototype)?i(n)&&null===(n=n[g])&&(n=void 0):n=void 0,n===Array||void 0===n))return A.call(h,f,p);for(r=new(void 0===n?Array:n)(v(p-f,0)),l=0;f<p;f++,l++)f in h&&u(r,l,h[f]);return r.length=l,r}})},{"../internals/array-method-has-species-support":118,"../internals/array-method-uses-to-length":120,"../internals/create-property":133,"../internals/export":144,"../internals/is-array":162,"../internals/is-object":164,"../internals/to-absolute-index":215,"../internals/to-indexed-object":217,"../internals/to-length":219,"../internals/well-known-symbol":231}],247:[function(e,t,n){"use strict";var r=e("../internals/export"),i=e("../internals/a-function"),o=e("../internals/to-object"),a=e("../internals/fails"),s=e("../internals/array-method-is-strict"),c=[],u=c.sort,l=a((function(){c.sort(void 0)})),h=a((function(){c.sort(null)})),d=s("sort");r({target:"Array",proto:!0,forced:l||!h||!d},{sort:function(e){return void 0===e?u.call(o(this)):u.call(o(this),i(e))}})},{"../internals/a-function":102,"../internals/array-method-is-strict":119,"../internals/export":144,"../internals/fails":145,"../internals/to-object":220}],248:[function(e,t,n){"use strict";var r=e("../internals/export"),i=e("../internals/to-absolute-index"),o=e("../internals/to-integer"),a=e("../internals/to-length"),s=e("../internals/to-object"),c=e("../internals/array-species-create"),u=e("../internals/create-property"),l=e("../internals/array-method-has-species-support"),h=e("../internals/array-method-uses-to-length"),d=l("splice"),f=h("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,g=Math.min,A=9007199254740991,v="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!d||!f},{splice:function(e,t){var n,r,l,h,d,f,m=s(this),y=a(m.length),b=i(e,y),_=arguments.length;if(0===_?n=r=0:1===_?(n=0,r=y-b):(n=_-2,r=g(p(o(t),0),y-b)),y+n-r>A)throw TypeError(v);for(l=c(m,r),h=0;h<r;h++)(d=b+h)in m&&u(l,h,m[d]);if(l.length=r,n<r){for(h=b;h<y-r;h++)f=h+n,(d=h+r)in m?m[f]=m[d]:delete m[f];for(h=y;h>y-r+n;h--)delete m[h-1]}else if(n>r)for(h=y-r;h>b;h--)f=h+n-1,(d=h+r-1)in m?m[f]=m[d]:delete m[f];for(h=0;h<n;h++)m[h+b]=arguments[h+2];return m.length=y-r+n,l}})},{"../internals/array-method-has-species-support":118,"../internals/array-method-uses-to-length":120,"../internals/array-species-create":122,"../internals/create-property":133,"../internals/export":144,"../internals/to-absolute-index":215,"../internals/to-integer":218,"../internals/to-length":219,"../internals/to-object":220}],249:[function(e,t,n){var r=e("../internals/descriptors"),i=e("../internals/object-define-property").f,o=Function.prototype,a=o.toString,s=/^\s*function ([^ (]*)/,c="name";r&&!(c in o)&&i(o,c,{configurable:!0,get:function(){try{return a.call(this).match(s)[1]}catch(e){return""}}})},{"../internals/descriptors":136,"../internals/object-define-property":180}],250:[function(e,t,n){"use strict";var r=e("../internals/descriptors"),i=e("../internals/global"),o=e("../internals/is-forced"),a=e("../internals/redefine"),s=e("../internals/has"),c=e("../internals/classof-raw"),u=e("../internals/inherit-if-required"),l=e("../internals/to-primitive"),h=e("../internals/fails"),d=e("../internals/object-create"),f=e("../internals/object-get-own-property-names").f,p=e("../internals/object-get-own-property-descriptor").f,g=e("../internals/object-define-property").f,A=e("../internals/string-trim").trim,v="Number",m=i.Number,y=m.prototype,b=c(d(y))==v,_=function(e){var t,n,r,i,o,a,s,c,u=l(e,!1);if("string"==typeof u&&u.length>2)if(43===(t=(u=A(u)).charCodeAt(0))||45===t){if(88===(n=u.charCodeAt(2))||120===n)return NaN}else if(48===t){switch(u.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+u}for(a=(o=u.slice(2)).length,s=0;s<a;s++)if((c=o.charCodeAt(s))<48||c>i)return NaN;return parseInt(o,r)}return+u};if(o(v,!m(" 0o1")||!m("0b1")||m("+0x1"))){for(var E,w=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof w&&(b?h((function(){y.valueOf.call(n)})):c(n)!=v)?u(new m(_(t)),n,w):_(t)},I=r?f(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),C=0;I.length>C;C++)s(m,E=I[C])&&!s(w,E)&&g(w,E,p(m,E));w.prototype=y,y.constructor=w,a(i,v,w)}},{"../internals/classof-raw":125,"../internals/descriptors":136,"../internals/fails":145,"../internals/global":150,"../internals/has":151,"../internals/inherit-if-required":158,"../internals/is-forced":163,"../internals/object-create":178,"../internals/object-define-property":180,"../internals/object-get-own-property-descriptor":181,"../internals/object-get-own-property-names":183,"../internals/redefine":197,"../internals/string-trim":213,"../internals/to-primitive":223}],251:[function(e,t,n){var r=e("../internals/export"),i=e("../internals/object-assign");r({target:"Object",stat:!0,forced:Object.assign!==i},{assign:i})},{"../internals/export":144,"../internals/object-assign":177}],252:[function(e,t,n){var r=e("../internals/export"),i=e("../internals/object-to-array").entries;r({target:"Object",stat:!0},{entries:function(e){return i(e)}})},{"../internals/export":144,"../internals/object-to-array":190}],253:[function(e,t,n){var r=e("../internals/export"),i=e("../internals/to-object"),o=e("../internals/object-keys");r({target:"Object",stat:!0,forced:e("../internals/fails")((function(){o(1)}))},{keys:function(e){return o(i(e))}})},{"../internals/export":144,"../internals/fails":145,"../internals/object-keys":187,"../internals/to-object":220}],254:[function(e,t,n){var r=e("../internals/to-string-tag-support"),i=e("../internals/redefine"),o=e("../internals/object-to-string");r||i(Object.prototype,"toString",o,{unsafe:!0})},{"../internals/object-to-string":191,"../internals/redefine":197,"../internals/to-string-tag-support":224}],255:[function(e,t,n){"use strict";var r,i,o,a,s=e("../internals/export"),c=e("../internals/is-pure"),u=e("../internals/global"),l=e("../internals/get-built-in"),h=e("../internals/native-promise-constructor"),d=e("../internals/redefine"),f=e("../internals/redefine-all"),p=e("../internals/set-to-string-tag"),g=e("../internals/set-species"),A=e("../internals/is-object"),v=e("../internals/a-function"),m=e("../internals/an-instance"),y=e("../internals/inspect-source"),b=e("../internals/iterate"),_=e("../internals/check-correctness-of-iteration"),E=e("../internals/species-constructor"),w=e("../internals/task").set,I=e("../internals/microtask"),C=e("../internals/promise-resolve"),S=e("../internals/host-report-errors"),T=e("../internals/new-promise-capability"),R=e("../internals/perform"),k=e("../internals/internal-state"),O=e("../internals/is-forced"),N=e("../internals/well-known-symbol"),x=e("../internals/engine-is-node"),D=e("../internals/engine-v8-version"),L=N("species"),P="Promise",B=k.get,M=k.set,j=k.getterFor(P),U=h,F=u.TypeError,Q=u.document,G=u.process,q=l("fetch"),V=T.f,K=V,H=!!(Q&&Q.createEvent&&u.dispatchEvent),W="function"==typeof PromiseRejectionEvent,z="unhandledrejection",Y=O(P,(function(){if(y(U)===String(U)){if(66===D)return!0;if(!x&&!W)return!0}if(c&&!U.prototype.finally)return!0;if(D>=51&&/native code/.test(U))return!1;var e=U.resolve(1),t=function(e){e((function(){}),(function(){}))};return(e.constructor={})[L]=t,!(e.then((function(){}))instanceof t)})),J=Y||!_((function(e){U.all(e).catch((function(){}))})),X=function(e){var t;return!(!A(e)||"function"!=typeof(t=e.then))&&t},Z=function(e,t){if(!e.notified){e.notified=!0;var n=e.reactions;I((function(){for(var r=e.value,i=1==e.state,o=0;n.length>o;){var a,s,c,u=n[o++],l=i?u.ok:u.fail,h=u.resolve,d=u.reject,f=u.domain;try{l?(i||(2===e.rejection&&ne(e),e.rejection=1),!0===l?a=r:(f&&f.enter(),a=l(r),f&&(f.exit(),c=!0)),a===u.promise?d(F("Promise-chain cycle")):(s=X(a))?s.call(a,h,d):h(a)):d(r)}catch(e){f&&!c&&f.exit(),d(e)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&ee(e)}))}},$=function(e,t,n){var r,i;H?((r=Q.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),u.dispatchEvent(r)):r={promise:t,reason:n},!W&&(i=u["on"+e])?i(r):e===z&&S("Unhandled promise rejection",n)},ee=function(e){w.call(u,(function(){var t,n=e.facade,r=e.value;if(te(e)&&(t=R((function(){x?G.emit("unhandledRejection",r,n):$(z,n,r)})),e.rejection=x||te(e)?2:1,t.error))throw t.value}))},te=function(e){return 1!==e.rejection&&!e.parent},ne=function(e){w.call(u,(function(){var t=e.facade;x?G.emit("rejectionHandled",t):$("rejectionhandled",t,e.value)}))},re=function(e,t,n){return function(r){e(t,r,n)}},ie=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,Z(e,!0))},oe=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw F("Promise can't be resolved itself");var r=X(t);r?I((function(){var n={done:!1};try{r.call(t,re(oe,n,e),re(ie,n,e))}catch(t){ie(n,t,e)}})):(e.value=t,e.state=1,Z(e,!1))}catch(t){ie({done:!1},t,e)}}};Y&&(U=function(e){m(this,U,P),v(e),r.call(this);var t=B(this);try{e(re(oe,t),re(ie,t))}catch(e){ie(t,e)}},(r=function(e){M(this,{type:P,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=f(U.prototype,{then:function(e,t){var n=j(this),r=V(E(this,U));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=x?G.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&Z(n,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),i=function(){var e=new r,t=B(e);this.promise=e,this.resolve=re(oe,t),this.reject=re(ie,t)},T.f=V=function(e){return e===U||e===o?new i(e):K(e)},c||"function"!=typeof h||(a=h.prototype.then,d(h.prototype,"then",(function(e,t){var n=this;return new U((function(e,t){a.call(n,e,t)})).then(e,t)}),{unsafe:!0}),"function"==typeof q&&s({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return C(U,q.apply(u,arguments))}}))),s({global:!0,wrap:!0,forced:Y},{Promise:U}),p(U,P,!1,!0),g(P),o=l(P),s({target:P,stat:!0,forced:Y},{reject:function(e){var t=V(this);return t.reject.call(void 0,e),t.promise}}),s({target:P,stat:!0,forced:c||Y},{resolve:function(e){return C(c&&this===o?U:this,e)}}),s({target:P,stat:!0,forced:J},{all:function(e){var t=this,n=V(t),r=n.resolve,i=n.reject,o=R((function(){var n=v(t.resolve),o=[],a=0,s=1;b(e,(function(e){var c=a++,u=!1;o.push(void 0),s++,n.call(t,e).then((function(e){u||(u=!0,o[c]=e,--s||r(o))}),i)})),--s||r(o)}));return o.error&&i(o.value),n.promise},race:function(e){var t=this,n=V(t),r=n.reject,i=R((function(){var i=v(t.resolve);b(e,(function(e){i.call(t,e).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}})},{"../internals/a-function":102,"../internals/an-instance":106,"../internals/check-correctness-of-iteration":124,"../internals/engine-is-node":140,"../internals/engine-v8-version":142,"../internals/export":144,"../internals/get-built-in":148,"../internals/global":150,"../internals/host-report-errors":153,"../internals/inspect-source":159,"../internals/internal-state":160,"../internals/is-forced":163,"../internals/is-object":164,"../internals/is-pure":165,"../internals/iterate":167,"../internals/microtask":171,"../internals/native-promise-constructor":172,"../internals/new-promise-capability":175,"../internals/perform":194,"../internals/promise-resolve":195,"../internals/redefine":197,"../internals/redefine-all":196,"../internals/set-species":205,"../internals/set-to-string-tag":206,"../internals/species-constructor":210,"../internals/task":214,"../internals/well-known-symbol":231}],256:[function(e,t,n){"use strict";var r=e("../internals/export"),i=e("../internals/regexp-exec");r({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},{"../internals/export":144,"../internals/regexp-exec":199}],257:[function(e,t,n){"use strict";var r=e("../internals/redefine"),i=e("../internals/an-object"),o=e("../internals/fails"),a=e("../internals/regexp-flags"),s="toString",c=RegExp.prototype,u=c.toString,l=o((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),h=u.name!=s;(l||h)&&r(RegExp.prototype,s,(function(){var e=i(this),t=String(e.source),n=e.flags;return"/"+t+"/"+String(void 0===n&&e instanceof RegExp&&!("flags"in c)?a.call(e):n)}),{unsafe:!0})},{"../internals/an-object":107,"../internals/fails":145,"../internals/redefine":197,"../internals/regexp-flags":200}],258:[function(e,t,n){"use strict";var r=e("../internals/export"),i=e("../internals/not-a-regexp"),o=e("../internals/require-object-coercible");r({target:"String",proto:!0,forced:!e("../internals/correct-is-regexp-logic")("includes")},{includes:function(e){return!!~String(o(this)).indexOf(i(e),arguments.length>1?arguments[1]:void 0)}})},{"../internals/correct-is-regexp-logic":128,"../internals/export":144,"../internals/not-a-regexp":176,"../internals/require-object-coercible":202}],259:[function(e,t,n){"use strict";var r=e("../internals/string-multibyte").charAt,i=e("../internals/internal-state"),o=e("../internals/define-iterator"),a="String Iterator",s=i.set,c=i.getterFor(a);o(String,"String",(function(e){s(this,{type:a,string:String(e),index:0})}),(function(){var e,t=c(this),n=t.string,i=t.index;return i>=n.length?{value:void 0,done:!0}:(e=r(n,i),t.index+=e.length,{value:e,done:!1})}))},{"../internals/define-iterator":134,"../internals/internal-state":160,"../internals/string-multibyte":211}],260:[function(e,t,n){"use strict";var r=e("../internals/fix-regexp-well-known-symbol-logic"),i=e("../internals/an-object"),o=e("../internals/to-length"),a=e("../internals/require-object-coercible"),s=e("../internals/advance-string-index"),c=e("../internals/regexp-exec-abstract");r("match",1,(function(e,t,n){return[function(t){var n=a(this),r=null==t?void 0:t[e];return void 0!==r?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r=n(t,e,this);if(r.done)return r.value;var a=i(e),u=String(this);if(!a.global)return c(a,u);var l=a.unicode;a.lastIndex=0;for(var h,d=[],f=0;null!==(h=c(a,u));){var p=String(h[0]);d[f]=p,""===p&&(a.lastIndex=s(u,o(a.lastIndex),l)),f++}return 0===f?null:d}]}))},{"../internals/advance-string-index":105,"../internals/an-object":107,"../internals/fix-regexp-well-known-symbol-logic":146,"../internals/regexp-exec-abstract":198,"../internals/require-object-coercible":202,"../internals/to-length":219}],261:[function(e,t,n){"use strict";var r=e("../internals/fix-regexp-well-known-symbol-logic"),i=e("../internals/an-object"),o=e("../internals/to-object"),a=e("../internals/to-length"),s=e("../internals/to-integer"),c=e("../internals/require-object-coercible"),u=e("../internals/advance-string-index"),l=e("../internals/regexp-exec-abstract"),h=Math.max,d=Math.min,f=Math.floor,p=/\$([$&'`]|\d\d?|<[^>]*>)/g,g=/\$([$&'`]|\d\d?)/g;r("replace",2,(function(e,t,n,r){var A=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,v=r.REPLACE_KEEPS_$0,m=A?"$":"$0";return[function(n,r){var i=c(this),o=null==n?void 0:n[e];return void 0!==o?o.call(n,i,r):t.call(String(i),n,r)},function(e,r){if(!A&&v||"string"==typeof r&&-1===r.indexOf(m)){var o=n(t,e,this,r);if(o.done)return o.value}var c=i(e),f=String(this),p="function"==typeof r;p||(r=String(r));var g=c.global;if(g){var b=c.unicode;c.lastIndex=0}for(var _=[];;){var E=l(c,f);if(null===E)break;if(_.push(E),!g)break;""===String(E[0])&&(c.lastIndex=u(f,a(c.lastIndex),b))}for(var w,I="",C=0,S=0;S<_.length;S++){E=_[S];for(var T=String(E[0]),R=h(d(s(E.index),f.length),0),k=[],O=1;O<E.length;O++)k.push(void 0===(w=E[O])?w:String(w));var N=E.groups;if(p){var x=[T].concat(k,R,f);void 0!==N&&x.push(N);var D=String(r.apply(void 0,x))}else D=y(T,f,R,k,N,r);R>=C&&(I+=f.slice(C,R)+D,C=R+T.length)}return I+f.slice(C)}];function y(e,n,r,i,a,s){var c=r+e.length,u=i.length,l=g;return void 0!==a&&(a=o(a),l=p),t.call(s,l,(function(t,o){var s;switch(o.charAt(0)){case"$":return"$";case"&":return e;case"`":return n.slice(0,r);case"'":return n.slice(c);case"<":s=a[o.slice(1,-1)];break;default:var l=+o;if(0===l)return t;if(l>u){var h=f(l/10);return 0===h?t:h<=u?void 0===i[h-1]?o.charAt(1):i[h-1]+o.charAt(1):t}s=i[l-1]}return void 0===s?"":s}))}}))},{"../internals/advance-string-index":105,"../internals/an-object":107,"../internals/fix-regexp-well-known-symbol-logic":146,"../internals/regexp-exec-abstract":198,"../internals/require-object-coercible":202,"../internals/to-integer":218,"../internals/to-length":219,"../internals/to-object":220}],262:[function(e,t,n){"use strict";var r=e("../internals/fix-regexp-well-known-symbol-logic"),i=e("../internals/an-object"),o=e("../internals/require-object-coercible"),a=e("../internals/same-value"),s=e("../internals/regexp-exec-abstract");r("search",1,(function(e,t,n){return[function(t){var n=o(this),r=null==t?void 0:t[e];return void 0!==r?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r=n(t,e,this);if(r.done)return r.value;var o=i(e),c=String(this),u=o.lastIndex;a(u,0)||(o.lastIndex=0);var l=s(o,c);return a(o.lastIndex,u)||(o.lastIndex=u),null===l?-1:l.index}]}))},{"../internals/an-object":107,"../internals/fix-regexp-well-known-symbol-logic":146,"../internals/regexp-exec-abstract":198,"../internals/require-object-coercible":202,"../internals/same-value":203}],263:[function(e,t,n){"use strict";var r=e("../internals/fix-regexp-well-known-symbol-logic"),i=e("../internals/is-regexp"),o=e("../internals/an-object"),a=e("../internals/require-object-coercible"),s=e("../internals/species-constructor"),c=e("../internals/advance-string-index"),u=e("../internals/to-length"),l=e("../internals/regexp-exec-abstract"),h=e("../internals/regexp-exec"),d=e("../internals/fails"),f=[].push,p=Math.min,g=4294967295,A=!d((function(){return!RegExp(g,"y")}));r("split",2,(function(e,t,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var r=String(a(this)),o=void 0===n?g:n>>>0;if(0===o)return[];if(void 0===e)return[r];if(!i(e))return t.call(r,e,o);for(var s,c,u,l=[],d=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),p=0,A=new RegExp(e.source,d+"g");(s=h.call(A,r))&&!((c=A.lastIndex)>p&&(l.push(r.slice(p,s.index)),s.length>1&&s.index<r.length&&f.apply(l,s.slice(1)),u=s[0].length,p=c,l.length>=o));)A.lastIndex===s.index&&A.lastIndex++;return p===r.length?!u&&A.test("")||l.push(""):l.push(r.slice(p)),l.length>o?l.slice(0,o):l}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var i=a(this),o=null==t?void 0:t[e];return void 0!==o?o.call(t,i,n):r.call(String(i),t,n)},function(e,i){var a=n(r,e,this,i,r!==t);if(a.done)return a.value;var h=o(e),d=String(this),f=s(h,RegExp),v=h.unicode,m=(h.ignoreCase?"i":"")+(h.multiline?"m":"")+(h.unicode?"u":"")+(A?"y":"g"),y=new f(A?h:"^(?:"+h.source+")",m),b=void 0===i?g:i>>>0;if(0===b)return[];if(0===d.length)return null===l(y,d)?[d]:[];for(var _=0,E=0,w=[];E<d.length;){y.lastIndex=A?E:0;var I,C=l(y,A?d:d.slice(E));if(null===C||(I=p(u(y.lastIndex+(A?0:E)),d.length))===_)E=c(d,E,v);else{if(w.push(d.slice(_,E)),w.length===b)return w;for(var S=1;S<=C.length-1;S++)if(w.push(C[S]),w.length===b)return w;E=_=I}}return w.push(d.slice(_)),w}]}),!A)},{"../internals/advance-string-index":105,"../internals/an-object":107,"../internals/fails":145,"../internals/fix-regexp-well-known-symbol-logic":146,"../internals/is-regexp":166,"../internals/regexp-exec":199,"../internals/regexp-exec-abstract":198,"../internals/require-object-coercible":202,"../internals/species-constructor":210,"../internals/to-length":219}],264:[function(e,t,n){"use strict";var r,i=e("../internals/export"),o=e("../internals/object-get-own-property-descriptor").f,a=e("../internals/to-length"),s=e("../internals/not-a-regexp"),c=e("../internals/require-object-coercible"),u=e("../internals/correct-is-regexp-logic"),l=e("../internals/is-pure"),h="".startsWith,d=Math.min,f=u("startsWith");i({target:"String",proto:!0,forced:!(!l&&!f&&(r=o(String.prototype,"startsWith"),r&&!r.writable)||f)},{startsWith:function(e){var t=String(c(this));s(e);var n=a(d(arguments.length>1?arguments[1]:void 0,t.length)),r=String(e);return h?h.call(t,r,n):t.slice(n,n+r.length)===r}})},{"../internals/correct-is-regexp-logic":128,"../internals/export":144,"../internals/is-pure":165,"../internals/not-a-regexp":176,"../internals/object-get-own-property-descriptor":181,"../internals/require-object-coercible":202,"../internals/to-length":219}],265:[function(e,t,n){"use strict";var r=e("../internals/export"),i=e("../internals/string-trim").trim;r({target:"String",proto:!0,forced:e("../internals/string-trim-forced")("trim")},{trim:function(){return i(this)}})},{"../internals/export":144,"../internals/string-trim":213,"../internals/string-trim-forced":212}],266:[function(e,t,n){"use strict";var r=e("../internals/export"),i=e("../internals/descriptors"),o=e("../internals/global"),a=e("../internals/has"),s=e("../internals/is-object"),c=e("../internals/object-define-property").f,u=e("../internals/copy-constructor-properties"),l=o.Symbol;if(i&&"function"==typeof l&&(!("description"in l.prototype)||void 0!==l().description)){var h={},d=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof d?new l(e):void 0===e?l():l(e);return""===e&&(h[t]=!0),t};u(d,l);var f=d.prototype=l.prototype;f.constructor=d;var p=f.toString,g="Symbol(test)"==String(l("test")),A=/^Symbol\((.*)\)[^)]+$/;c(f,"description",{configurable:!0,get:function(){var e=s(this)?this.valueOf():this,t=p.call(e);if(a(h,e))return"";var n=g?t.slice(7,-1):t.replace(A,"$1");return""===n?void 0:n}}),r({global:!0,forced:!0},{Symbol:d})}},{"../internals/copy-constructor-properties":127,"../internals/descriptors":136,"../internals/export":144,"../internals/global":150,"../internals/has":151,"../internals/is-object":164,"../internals/object-define-property":180}],267:[function(e,t,n){"use strict";var r=e("../internals/export"),i=e("../internals/global"),o=e("../internals/get-built-in"),a=e("../internals/is-pure"),s=e("../internals/descriptors"),c=e("../internals/native-symbol"),u=e("../internals/use-symbol-as-uid"),l=e("../internals/fails"),h=e("../internals/has"),d=e("../internals/is-array"),f=e("../internals/is-object"),p=e("../internals/an-object"),g=e("../internals/to-object"),A=e("../internals/to-indexed-object"),v=e("../internals/to-primitive"),m=e("../internals/create-property-descriptor"),y=e("../internals/object-create"),b=e("../internals/object-keys"),_=e("../internals/object-get-own-property-names"),E=e("../internals/object-get-own-property-names-external"),w=e("../internals/object-get-own-property-symbols"),I=e("../internals/object-get-own-property-descriptor"),C=e("../internals/object-define-property"),S=e("../internals/object-property-is-enumerable"),T=e("../internals/create-non-enumerable-property"),R=e("../internals/redefine"),k=e("../internals/shared"),O=e("../internals/shared-key"),N=e("../internals/hidden-keys"),x=e("../internals/uid"),D=e("../internals/well-known-symbol"),L=e("../internals/well-known-symbol-wrapped"),P=e("../internals/define-well-known-symbol"),B=e("../internals/set-to-string-tag"),M=e("../internals/internal-state"),j=e("../internals/array-iteration").forEach,U=O("hidden"),F="Symbol",Q=D("toPrimitive"),G=M.set,q=M.getterFor(F),V=Object.prototype,K=i.Symbol,H=o("JSON","stringify"),W=I.f,z=C.f,Y=E.f,J=S.f,X=k("symbols"),Z=k("op-symbols"),$=k("string-to-symbol-registry"),ee=k("symbol-to-string-registry"),te=k("wks"),ne=i.QObject,re=!ne||!ne.prototype||!ne.prototype.findChild,ie=s&&l((function(){return 7!=y(z({},"a",{get:function(){return z(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=W(V,t);r&&delete V[t],z(e,t,n),r&&e!==V&&z(V,t,r)}:z,oe=function(e,t){var n=X[e]=y(K.prototype);return G(n,{type:F,tag:e,description:t}),s||(n.description=t),n},ae=u?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof K},se=function(e,t,n){e===V&&se(Z,t,n),p(e);var r=v(t,!0);return p(n),h(X,r)?(n.enumerable?(h(e,U)&&e[U][r]&&(e[U][r]=!1),n=y(n,{enumerable:m(0,!1)})):(h(e,U)||z(e,U,m(1,{})),e[U][r]=!0),ie(e,r,n)):z(e,r,n)},ce=function(e,t){p(e);var n=A(t),r=b(n).concat(de(n));return j(r,(function(t){s&&!ue.call(n,t)||se(e,t,n[t])})),e},ue=function(e){var t=v(e,!0),n=J.call(this,t);return!(this===V&&h(X,t)&&!h(Z,t))&&(!(n||!h(this,t)||!h(X,t)||h(this,U)&&this[U][t])||n)},le=function(e,t){var n=A(e),r=v(t,!0);if(n!==V||!h(X,r)||h(Z,r)){var i=W(n,r);return!i||!h(X,r)||h(n,U)&&n[U][r]||(i.enumerable=!0),i}},he=function(e){var t=Y(A(e)),n=[];return j(t,(function(e){h(X,e)||h(N,e)||n.push(e)})),n},de=function(e){var t=e===V,n=Y(t?Z:A(e)),r=[];return j(n,(function(e){!h(X,e)||t&&!h(V,e)||r.push(X[e])})),r};c||(K=function(){if(this instanceof K)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=x(e),n=function(e){this===V&&n.call(Z,e),h(this,U)&&h(this[U],t)&&(this[U][t]=!1),ie(this,t,m(1,e))};return s&&re&&ie(V,t,{configurable:!0,set:n}),oe(t,e)},R(K.prototype,"toString",(function(){return q(this).tag})),R(K,"withoutSetter",(function(e){return oe(x(e),e)})),S.f=ue,C.f=se,I.f=le,_.f=E.f=he,w.f=de,L.f=function(e){return oe(D(e),e)},s&&(z(K.prototype,"description",{configurable:!0,get:function(){return q(this).description}}),a||R(V,"propertyIsEnumerable",ue,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!c,sham:!c},{Symbol:K}),j(b(te),(function(e){P(e)})),r({target:F,stat:!0,forced:!c},{for:function(e){var t=String(e);if(h($,t))return $[t];var n=K(t);return $[t]=n,ee[n]=t,n},keyFor:function(e){if(!ae(e))throw TypeError(e+" is not a symbol");if(h(ee,e))return ee[e]},useSetter:function(){re=!0},useSimple:function(){re=!1}}),r({target:"Object",stat:!0,forced:!c,sham:!s},{create:function(e,t){return void 0===t?y(e):ce(y(e),t)},defineProperty:se,defineProperties:ce,getOwnPropertyDescriptor:le}),r({target:"Object",stat:!0,forced:!c},{getOwnPropertyNames:he,getOwnPropertySymbols:de}),r({target:"Object",stat:!0,forced:l((function(){w.f(1)}))},{getOwnPropertySymbols:function(e){return w.f(g(e))}}),H&&r({target:"JSON",stat:!0,forced:!c||l((function(){var e=K();return"[null]"!=H([e])||"{}"!=H({a:e})||"{}"!=H(Object(e))}))},{stringify:function(e,t,n){for(var r,i=[e],o=1;arguments.length>o;)i.push(arguments[o++]);if(r=t,(f(t)||void 0!==e)&&!ae(e))return d(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!ae(t))return t}),i[1]=t,H.apply(null,i)}}),K.prototype[Q]||T(K.prototype,Q,K.prototype.valueOf),B(K,F),N[U]=!0},{"../internals/an-object":107,"../internals/array-iteration":116,"../internals/create-non-enumerable-property":131,"../internals/create-property-descriptor":132,"../internals/define-well-known-symbol":135,"../internals/descriptors":136,"../internals/export":144,"../internals/fails":145,"../internals/get-built-in":148,"../internals/global":150,"../internals/has":151,"../internals/hidden-keys":152,"../internals/internal-state":160,"../internals/is-array":162,"../internals/is-object":164,"../internals/is-pure":165,"../internals/native-symbol":173,"../internals/object-create":178,"../internals/object-define-property":180,"../internals/object-get-own-property-descriptor":181,"../internals/object-get-own-property-names":183,"../internals/object-get-own-property-names-external":182,"../internals/object-get-own-property-symbols":184,"../internals/object-keys":187,"../internals/object-property-is-enumerable":188,"../internals/redefine":197,"../internals/set-to-string-tag":206,"../internals/shared":209,"../internals/shared-key":207,"../internals/to-indexed-object":217,"../internals/to-object":220,"../internals/to-primitive":223,"../internals/uid":228,"../internals/use-symbol-as-uid":229,"../internals/well-known-symbol":231,"../internals/well-known-symbol-wrapped":230}],268:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),i=e("../internals/array-copy-within"),o=r.aTypedArray;(0,r.exportTypedArrayMethod)("copyWithin",(function(e,t){return i.call(o(this),e,t,arguments.length>2?arguments[2]:void 0)}))},{"../internals/array-buffer-view-core":109,"../internals/array-copy-within":111}],269:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),i=e("../internals/array-iteration").every,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("every",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},{"../internals/array-buffer-view-core":109,"../internals/array-iteration":116}],270:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),i=e("../internals/array-fill"),o=r.aTypedArray;(0,r.exportTypedArrayMethod)("fill",(function(e){return i.apply(o(this),arguments)}))},{"../internals/array-buffer-view-core":109,"../internals/array-fill":112}],271:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),i=e("../internals/array-iteration").filter,o=e("../internals/species-constructor"),a=r.aTypedArray,s=r.aTypedArrayConstructor;(0,r.exportTypedArrayMethod)("filter",(function(e){for(var t=i(a(this),e,arguments.length>1?arguments[1]:void 0),n=o(this,this.constructor),r=0,c=t.length,u=new(s(n))(c);c>r;)u[r]=t[r++];return u}))},{"../internals/array-buffer-view-core":109,"../internals/array-iteration":116,"../internals/species-constructor":210}],272:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),i=e("../internals/array-iteration").findIndex,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("findIndex",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},{"../internals/array-buffer-view-core":109,"../internals/array-iteration":116}],273:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),i=e("../internals/array-iteration").find,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("find",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},{"../internals/array-buffer-view-core":109,"../internals/array-iteration":116}],274:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),i=e("../internals/array-iteration").forEach,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("forEach",(function(e){i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},{"../internals/array-buffer-view-core":109,"../internals/array-iteration":116}],275:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),i=e("../internals/array-includes").includes,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("includes",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},{"../internals/array-buffer-view-core":109,"../internals/array-includes":115}],276:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),i=e("../internals/array-includes").indexOf,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("indexOf",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},{"../internals/array-buffer-view-core":109,"../internals/array-includes":115}],277:[function(e,t,n){"use strict";var r=e("../internals/global"),i=e("../internals/array-buffer-view-core"),o=e("../modules/es.array.iterator"),a=e("../internals/well-known-symbol")("iterator"),s=r.Uint8Array,c=o.values,u=o.keys,l=o.entries,h=i.aTypedArray,d=i.exportTypedArrayMethod,f=s&&s.prototype[a],p=!!f&&("values"==f.name||null==f.name),g=function(){return c.call(h(this))};d("entries",(function(){return l.call(h(this))})),d("keys",(function(){return u.call(h(this))})),d("values",g,!p),d(a,g,!p)},{"../internals/array-buffer-view-core":109,"../internals/global":150,"../internals/well-known-symbol":231,"../modules/es.array.iterator":242}],278:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),i=r.aTypedArray,o=r.exportTypedArrayMethod,a=[].join;o("join",(function(e){return a.apply(i(this),arguments)}))},{"../internals/array-buffer-view-core":109}],279:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),i=e("../internals/array-last-index-of"),o=r.aTypedArray;(0,r.exportTypedArrayMethod)("lastIndexOf",(function(e){return i.apply(o(this),arguments)}))},{"../internals/array-buffer-view-core":109,"../internals/array-last-index-of":117}],280:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),i=e("../internals/array-iteration").map,o=e("../internals/species-constructor"),a=r.aTypedArray,s=r.aTypedArrayConstructor;(0,r.exportTypedArrayMethod)("map",(function(e){return i(a(this),e,arguments.length>1?arguments[1]:void 0,(function(e,t){return new(s(o(e,e.constructor)))(t)}))}))},{"../internals/array-buffer-view-core":109,"../internals/array-iteration":116,"../internals/species-constructor":210}],281:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),i=e("../internals/array-reduce").right,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduceRight",(function(e){return i(o(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)}))},{"../internals/array-buffer-view-core":109,"../internals/array-reduce":121}],282:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),i=e("../internals/array-reduce").left,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduce",(function(e){return i(o(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)}))},{"../internals/array-buffer-view-core":109,"../internals/array-reduce":121}],283:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),i=r.aTypedArray,o=r.exportTypedArrayMethod,a=Math.floor;o("reverse",(function(){for(var e,t=this,n=i(t).length,r=a(n/2),o=0;o<r;)e=t[o],t[o++]=t[--n],t[n]=e;return t}))},{"../internals/array-buffer-view-core":109}],284:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),i=e("../internals/to-length"),o=e("../internals/to-offset"),a=e("../internals/to-object"),s=e("../internals/fails"),c=r.aTypedArray;(0,r.exportTypedArrayMethod)("set",(function(e){c(this);var t=o(arguments.length>1?arguments[1]:void 0,1),n=this.length,r=a(e),s=i(r.length),u=0;if(s+t>n)throw RangeError("Wrong length");for(;u<s;)this[t+u]=r[u++]}),s((function(){new Int8Array(1).set({})})))},{"../internals/array-buffer-view-core":109,"../internals/fails":145,"../internals/to-length":219,"../internals/to-object":220,"../internals/to-offset":221}],285:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),i=e("../internals/species-constructor"),o=e("../internals/fails"),a=r.aTypedArray,s=r.aTypedArrayConstructor,c=r.exportTypedArrayMethod,u=[].slice;c("slice",(function(e,t){for(var n=u.call(a(this),e,t),r=i(this,this.constructor),o=0,c=n.length,l=new(s(r))(c);c>o;)l[o]=n[o++];return l}),o((function(){new Int8Array(1).slice()})))},{"../internals/array-buffer-view-core":109,"../internals/fails":145,"../internals/species-constructor":210}],286:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),i=e("../internals/array-iteration").some,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("some",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},{"../internals/array-buffer-view-core":109,"../internals/array-iteration":116}],287:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),i=r.aTypedArray,o=r.exportTypedArrayMethod,a=[].sort;o("sort",(function(e){return a.call(i(this),e)}))},{"../internals/array-buffer-view-core":109}],288:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),i=e("../internals/to-length"),o=e("../internals/to-absolute-index"),a=e("../internals/species-constructor"),s=r.aTypedArray;(0,r.exportTypedArrayMethod)("subarray",(function(e,t){var n=s(this),r=n.length,c=o(e,r);return new(a(n,n.constructor))(n.buffer,n.byteOffset+c*n.BYTES_PER_ELEMENT,i((void 0===t?r:o(t,r))-c))}))},{"../internals/array-buffer-view-core":109,"../internals/species-constructor":210,"../internals/to-absolute-index":215,"../internals/to-length":219}],289:[function(e,t,n){"use strict";var r=e("../internals/global"),i=e("../internals/array-buffer-view-core"),o=e("../internals/fails"),a=r.Int8Array,s=i.aTypedArray,c=i.exportTypedArrayMethod,u=[].toLocaleString,l=[].slice,h=!!a&&o((function(){u.call(new a(1))}));c("toLocaleString",(function(){return u.apply(h?l.call(s(this)):s(this),arguments)}),o((function(){return[1,2].toLocaleString()!=new a([1,2]).toLocaleString()}))||!o((function(){a.prototype.toLocaleString.call([1,2])})))},{"../internals/array-buffer-view-core":109,"../internals/fails":145,"../internals/global":150}],290:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core").exportTypedArrayMethod,i=e("../internals/fails"),o=e("../internals/global").Uint8Array,a=o&&o.prototype||{},s=[].toString,c=[].join;i((function(){s.call({})}))&&(s=function(){return c.call(this)});var u=a.toString!=s;r("toString",s,u)},{"../internals/array-buffer-view-core":109,"../internals/fails":145,"../internals/global":150}],291:[function(e,t,n){e("../internals/typed-array-constructor")("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},{"../internals/typed-array-constructor":225}],292:[function(e,t,n){var r=e("../internals/global"),i=e("../internals/dom-iterables"),o=e("../internals/array-for-each"),a=e("../internals/create-non-enumerable-property");for(var s in i){var c=r[s],u=c&&c.prototype;if(u&&u.forEach!==o)try{a(u,"forEach",o)}catch(e){u.forEach=o}}},{"../internals/array-for-each":113,"../internals/create-non-enumerable-property":131,"../internals/dom-iterables":138,"../internals/global":150}],293:[function(e,t,n){var r=e("../internals/global"),i=e("../internals/dom-iterables"),o=e("../modules/es.array.iterator"),a=e("../internals/create-non-enumerable-property"),s=e("../internals/well-known-symbol"),c=s("iterator"),u=s("toStringTag"),l=o.values;for(var h in i){var d=r[h],f=d&&d.prototype;if(f){if(f[c]!==l)try{a(f,c,l)}catch(e){f[c]=l}if(f[u]||a(f,u,h),i[h])for(var p in o)if(f[p]!==o[p])try{a(f,p,o[p])}catch(e){f[p]=o[p]}}}},{"../internals/create-non-enumerable-property":131,"../internals/dom-iterables":138,"../internals/global":150,"../internals/well-known-symbol":231,"../modules/es.array.iterator":242}],294:[function(e,t,n){(function(e){function t(e){return Object.prototype.toString.call(e)}n.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===t(e)},n.isBoolean=function(e){return"boolean"==typeof e},n.isNull=function(e){return null===e},n.isNullOrUndefined=function(e){return null==e},n.isNumber=function(e){return"number"==typeof e},n.isString=function(e){return"string"==typeof e},n.isSymbol=function(e){return"symbol"==typeof e},n.isUndefined=function(e){return void 0===e},n.isRegExp=function(e){return"[object RegExp]"===t(e)},n.isObject=function(e){return"object"==typeof e&&null!==e},n.isDate=function(e){return"[object Date]"===t(e)},n.isError=function(e){return"[object Error]"===t(e)||e instanceof Error},n.isFunction=function(e){return"function"==typeof e},n.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},n.isBuffer=e.isBuffer}).call(this,{isBuffer:e("../../is-buffer/index.js")})},{"../../is-buffer/index.js":308}],295:[function(e,t,n){!function(e){"use strict";var r,i,o,a=(r=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZWN]|'[^']*'|'[^']*'/g,i=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,o=/[^-+\dA-Z]/g,function(e,t,n,h){if(1!==arguments.length||"string"!==l(e)||/\d/.test(e)||(t=e,e=void 0),(e=e||new Date)instanceof Date||(e=new Date(e)),isNaN(e))throw TypeError("Invalid date");var d=(t=String(a.masks[t]||t||a.masks.default)).slice(0,4);"UTC:"!==d&&"GMT:"!==d||(t=t.slice(4),n=!0,"GMT:"===d&&(h=!0));var f=n?"getUTC":"get",p=e[f+"Date"](),g=e[f+"Day"](),A=e[f+"Month"](),v=e[f+"FullYear"](),m=e[f+"Hours"](),y=e[f+"Minutes"](),b=e[f+"Seconds"](),_=e[f+"Milliseconds"](),E=n?0:e.getTimezoneOffset(),w=c(e),I=u(e),C={d:p,dd:s(p),ddd:a.i18n.dayNames[g],dddd:a.i18n.dayNames[g+7],m:A+1,mm:s(A+1),mmm:a.i18n.monthNames[A],mmmm:a.i18n.monthNames[A+12],yy:String(v).slice(2),yyyy:v,h:m%12||12,hh:s(m%12||12),H:m,HH:s(m),M:y,MM:s(y),s:b,ss:s(b),l:s(_,3),L:s(Math.round(_/10)),t:m<12?"a":"p",tt:m<12?"am":"pm",T:m<12?"A":"P",TT:m<12?"AM":"PM",Z:h?"GMT":n?"UTC":(String(e).match(i)||[""]).pop().replace(o,""),o:(E>0?"-":"+")+s(100*Math.floor(Math.abs(E)/60)+Math.abs(E)%60,4),S:["th","st","nd","rd"][p%10>3?0:(p%100-p%10!=10)*p%10],W:w,N:I};return t.replace(r,(function(e){return e in C?C[e]:e.slice(1,e.length-1)}))});function s(e,t){for(e=String(e),t=t||2;e.length<t;)e="0"+e;return e}function c(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate());t.setDate(t.getDate()-(t.getDay()+6)%7+3);var n=new Date(t.getFullYear(),0,4);n.setDate(n.getDate()-(n.getDay()+6)%7+3);var r=t.getTimezoneOffset()-n.getTimezoneOffset();t.setHours(t.getHours()-r);var i=(t-n)/6048e5;return 1+Math.floor(i)}function u(e){var t=e.getDay();return 0===t&&(t=7),t}function l(e){return null===e?"null":void 0===e?"undefined":"object"!=typeof e?typeof e:Array.isArray(e)?"array":{}.toString.call(e).slice(8,-1).toLowerCase()}a.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:sso",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"},a.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},"function"==typeof define&&define.amd?define((function(){return a})):"object"==typeof n?t.exports=a:e.dateFormat=a}(this)},{}],296:[function(e,t,n){"use strict";var r=/["'&<>]/;t.exports=function(e){var t,n=""+e,i=r.exec(n);if(!i)return n;var o="",a=0,s=0;for(a=i.index;a<n.length;a++){switch(n.charCodeAt(a)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#39;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}s!==a&&(o+=n.substring(s,a)),s=a+1,o+=t}return s!==a?o+n.substring(s,a):o}},{}],297:[function(e,t,n){var r=Object.create||function(e){var t=function(){};return t.prototype=e,new t},i=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return n},o=Function.prototype.bind||function(e){var t=this;return function(){return t.apply(e,arguments)}};function a(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=r(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}t.exports=a,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._maxListeners=void 0;var s,c=10;try{var u={};Object.defineProperty&&Object.defineProperty(u,"x",{value:0}),s=0===u.x}catch(e){s=!1}function l(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function h(e,t,n){if(t)e.call(n);else for(var r=e.length,i=_(e,r),o=0;o<r;++o)i[o].call(n)}function d(e,t,n,r){if(t)e.call(n,r);else for(var i=e.length,o=_(e,i),a=0;a<i;++a)o[a].call(n,r)}function f(e,t,n,r,i){if(t)e.call(n,r,i);else for(var o=e.length,a=_(e,o),s=0;s<o;++s)a[s].call(n,r,i)}function p(e,t,n,r,i,o){if(t)e.call(n,r,i,o);else for(var a=e.length,s=_(e,a),c=0;c<a;++c)s[c].call(n,r,i,o)}function g(e,t,n,r){if(t)e.apply(n,r);else for(var i=e.length,o=_(e,i),a=0;a<i;++a)o[a].apply(n,r)}function A(e,t,n,i){var o,a,s;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((a=e._events)?(a.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),s=a[t]):(a=e._events=r(null),e._eventsCount=0),s){if("function"==typeof s?s=a[t]=i?[n,s]:[s,n]:i?s.unshift(n):s.push(n),!s.warned&&(o=l(e))&&o>0&&s.length>o){s.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+s.length+' "'+String(t)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=s.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",c.name,c.message)}}else s=a[t]=n,++e._eventsCount;return e}function v(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e)}}function m(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=o.call(v,r);return i.listener=n,r.wrapFn=i,i}function y(e,t,n){var r=e._events;if(!r)return[];var i=r[t];return i?"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):_(i,i.length):[]}function b(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function _(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}s?Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(e){if("number"!=typeof e||e<0||e!=e)throw new TypeError('"defaultMaxListeners" must be a positive number');c=e}}):a.defaultMaxListeners=c,a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return l(this)},a.prototype.emit=function(e){var t,n,r,i,o,a,s="error"===e;if(a=this._events)s=s&&null==a.error;else if(!s)return!1;if(s){if(arguments.length>1&&(t=arguments[1]),t instanceof Error)throw t;var c=new Error('Unhandled "error" event. ('+t+")");throw c.context=t,c}if(!(n=a[e]))return!1;var u="function"==typeof n;switch(r=arguments.length){case 1:h(n,u,this);break;case 2:d(n,u,this,arguments[1]);break;case 3:f(n,u,this,arguments[1],arguments[2]);break;case 4:p(n,u,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(r-1),o=1;o<r;o++)i[o-1]=arguments[o];g(n,u,this,i)}return!0},a.prototype.addListener=function(e,t){return A(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return A(this,e,t,!0)},a.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,m(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,m(this,e,t)),this},a.prototype.removeListener=function(e,t){var n,i,o,a,s;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(i=this._events))return this;if(!(n=i[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=r(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,a=n.length-1;a>=0;a--)if(n[a]===t||n[a].listener===t){s=n[a].listener,o=a;break}if(o<0)return this;0===o?n.shift():function(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}(n,o),1===n.length&&(i[e]=n[0]),i.removeListener&&this.emit("removeListener",e,s||t)}return this},a.prototype.removeAllListeners=function(e){var t,n,o;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=r(null),this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=r(null):delete n[e]),this;if(0===arguments.length){var a,s=i(n);for(o=0;o<s.length;++o)"removeListener"!==(a=s[o])&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=r(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(t)for(o=t.length-1;o>=0;o--)this.removeListener(e,t[o]);return this},a.prototype.listeners=function(e){return y(this,e,!0)},a.prototype.rawListeners=function(e){return y(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):b.call(e,t)},a.prototype.listenerCount=b,a.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]}},{}],298:[function(e,t,n){var r=e("http"),i=e("url"),o=t.exports;for(var a in r)r.hasOwnProperty(a)&&(o[a]=r[a]);function s(e){if("string"==typeof e&&(e=i.parse(e)),e.protocol||(e.protocol="https:"),"https:"!==e.protocol)throw new Error('Protocol "'+e.protocol+'" not supported. Expected "https:"');return e}o.request=function(e,t){return e=s(e),r.request.call(this,e,t)},o.get=function(e,t){return e=s(e),r.get.call(this,e,t)}},{http:79,url:394}],299:[function(e,t,n){"use strict";var r=e("util"),i=e("ms");t.exports=function(e){if("number"==typeof e)return e;var t=i(e);if(void 0===t){var n=new Error(r.format("humanize-ms(%j) result undefined",e));console.warn(n.stack)}return t}},{ms:315,util:346}],300:[function(e,t,n){n.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,c=(1<<s)-1,u=c>>1,l=-7,h=n?i-1:0,d=n?-1:1,f=e[t+h];for(h+=d,o=f&(1<<-l)-1,f>>=-l,l+=s;l>0;o=256*o+e[t+h],h+=d,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+e[t+h],h+=d,l-=8);if(0===o)o=1-u;else{if(o===c)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,r),o-=u}return(f?-1:1)*a*Math.pow(2,o-r)},n.write=function(e,t,n,r,i,o){var a,s,c,u=8*o-i-1,l=(1<<u)-1,h=l>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,p=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),(t+=a+h>=1?d/c:d*Math.pow(2,1-h))*c>=2&&(a++,c/=2),a+h>=l?(s=0,a=l):a+h>=1?(s=(t*c-1)*Math.pow(2,i),a+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;e[n+f]=255&s,f+=p,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;e[n+f]=255&a,f+=p,a/=256,u-=8);e[n+f-p]|=128*g}},{}],301:[function(e,t,n){"use strict";var r,i,o,a=[e("./nextTick"),e("./queueMicrotask"),e("./mutation.js"),e("./messageChannel"),e("./stateChange"),e("./timeout")],s=-1,c=[],u=!1;function l(){r&&i&&(r=!1,i.length?c=i.concat(c):s=-1,c.length&&h())}function h(){if(!r){u=!1,r=!0;for(var e=c.length,t=setTimeout(l);e;){for(i=c,c=[];i&&++s<e;)i[s].run();s=-1,e=c.length}i=null,s=-1,r=!1,clearTimeout(t)}}for(var d=-1,f=a.length;++d<f;)if(a[d]&&a[d].test&&a[d].test()){o=a[d].install(h);break}function p(e,t){this.fun=e,this.array=t}p.prototype.run=function(){var e=this.fun,t=this.array;switch(t.length){case 0:return e();case 1:return e(t[0]);case 2:return e(t[0],t[1]);case 3:return e(t[0],t[1],t[2]);default:return e.apply(null,t)}},t.exports=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new p(e,t)),u||r||(u=!0,o())}},{"./messageChannel":302,"./mutation.js":303,"./nextTick":78,"./queueMicrotask":304,"./stateChange":305,"./timeout":306}],302:[function(e,t,n){(function(e){"use strict";n.test=function(){return!e.setImmediate&&void 0!==e.MessageChannel},n.install=function(t){var n=new e.MessageChannel;return n.port1.onmessage=t,function(){n.port2.postMessage(0)}}}).call(this,void 0!==__webpack_require__.g?__webpack_require__.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],303:[function(e,t,n){(function(e){"use strict";var t=e.MutationObserver||e.WebKitMutationObserver;n.test=function(){return t},n.install=function(n){var r=0,i=new t(n),o=e.document.createTextNode("");return i.observe(o,{characterData:!0}),function(){o.data=r=++r%2}}}).call(this,void 0!==__webpack_require__.g?__webpack_require__.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],304:[function(e,t,n){(function(e){"use strict";n.test=function(){return"function"==typeof e.queueMicrotask},n.install=function(t){return function(){e.queueMicrotask(t)}}}).call(this,void 0!==__webpack_require__.g?__webpack_require__.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],305:[function(e,t,n){(function(e){"use strict";n.test=function(){return"document"in e&&"onreadystatechange"in e.document.createElement("script")},n.install=function(t){return function(){var n=e.document.createElement("script");return n.onreadystatechange=function(){t(),n.onreadystatechange=null,n.parentNode.removeChild(n),n=null},e.document.documentElement.appendChild(n),t}}}).call(this,void 0!==__webpack_require__.g?__webpack_require__.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],306:[function(e,t,n){"use strict";n.test=function(){return!0},n.install=function(e){return function(){setTimeout(e,0)}}},{}],307:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},{}],308:[function(e,t,n){function r(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}t.exports=function(e){return null!=e&&(r(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&r(e.slice(0,0))}(e)||!!e._isBuffer)}},{}],309:[function(e,t,n){var r={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},{}],310:[function(require,module,exports){(function(global){!function(e,t){"object"==typeof exports&&void 0!==module?module.exports=t(e):"function"==typeof define&&define.amd?define(t):t(e)}("undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==global?global:this,(function(global){"use strict";global=global||{};var _Base64=global.Base64,version="2.5.2",buffer;if(void 0!==module&&module.exports)try{buffer=eval("require('buffer').Buffer")}catch(e){buffer=void 0}var b64chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b64tab=function(e){for(var t={},n=0,r=e.length;n<r;n++)t[e.charAt(n)]=n;return t}(b64chars),fromCharCode=String.fromCharCode,cb_utob=function(e){if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?fromCharCode(192|t>>>6)+fromCharCode(128|63&t):fromCharCode(224|t>>>12&15)+fromCharCode(128|t>>>6&63)+fromCharCode(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return fromCharCode(240|t>>>18&7)+fromCharCode(128|t>>>12&63)+fromCharCode(128|t>>>6&63)+fromCharCode(128|63&t)},re_utob=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,utob=function(e){return e.replace(re_utob,cb_utob)},cb_encode=function(e){var t=[0,2,1][e.length%3],n=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0);return[b64chars.charAt(n>>>18),b64chars.charAt(n>>>12&63),t>=2?"=":b64chars.charAt(n>>>6&63),t>=1?"=":b64chars.charAt(63&n)].join("")},btoa=global.btoa?function(e){return global.btoa(e)}:function(e){return e.replace(/[\s\S]{1,3}/g,cb_encode)},_encode=function(e){return"[object Uint8Array]"===Object.prototype.toString.call(e)?e.toString("base64"):btoa(utob(String(e)))},encode=function(e,t){return t?_encode(String(e)).replace(/[+\/]/g,(function(e){return"+"==e?"-":"_"})).replace(/=/g,""):_encode(e)},encodeURI=function(e){return encode(e,!0)},re_btou=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,cb_btou=function(e){switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return fromCharCode(55296+(t>>>10))+fromCharCode(56320+(1023&t));case 3:return fromCharCode((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return fromCharCode((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},btou=function(e){return e.replace(re_btou,cb_btou)},cb_decode=function(e){var t=e.length,n=t%4,r=(t>0?b64tab[e.charAt(0)]<<18:0)|(t>1?b64tab[e.charAt(1)]<<12:0)|(t>2?b64tab[e.charAt(2)]<<6:0)|(t>3?b64tab[e.charAt(3)]:0),i=[fromCharCode(r>>>16),fromCharCode(r>>>8&255),fromCharCode(255&r)];return i.length-=[0,0,2,1][n],i.join("")},_atob=global.atob?function(e){return global.atob(e)}:function(e){return e.replace(/\S{1,4}/g,cb_decode)},atob=function(e){return _atob(String(e).replace(/[^A-Za-z0-9\+\/]/g,""))},_decode=buffer?buffer.from&&Uint8Array&&buffer.from!==Uint8Array.from?function(e){return(e.constructor===buffer.constructor?e:buffer.from(e,"base64")).toString()}:function(e){return(e.constructor===buffer.constructor?e:new buffer(e,"base64")).toString()}:function(e){return btou(_atob(e))},decode=function(e){return _decode(String(e).replace(/[-_]/g,(function(e){return"-"==e?"+":"/"})).replace(/[^A-Za-z0-9\+\/]/g,""))},noConflict=function(){var e=global.Base64;return global.Base64=_Base64,e};if(global.Base64={VERSION:version,atob,btoa,fromBase64:decode,toBase64:encode,utob,encode,encodeURI,btou,decode,noConflict,__buffer__:buffer},"function"==typeof Object.defineProperty){var noEnum=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}};global.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",noEnum((function(){return decode(this)}))),Object.defineProperty(String.prototype,"toBase64",noEnum((function(e){return encode(this,e)}))),Object.defineProperty(String.prototype,"toBase64URI",noEnum((function(){return encode(this,!0)})))}}return global.Meteor&&(Base64=global.Base64),void 0!==module&&module.exports?module.exports.Base64=global.Base64:"function"==typeof define&&define.amd&&define([],(function(){return global.Base64})),{Base64:global.Base64}}))}).call(this,void 0!==__webpack_require__.g?__webpack_require__.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],311:[function(e,t,n){"use strict";t.exports=function(e,t,n){if(!e)throw new TypeError("argument dest is required");if(!t)throw new TypeError("argument src is required");return void 0===n&&(n=!0),Object.getOwnPropertyNames(t).forEach((function(i){if(n||!r.call(e,i)){var o=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(e,i,o)}})),e};var r=Object.prototype.hasOwnProperty},{}],312:[function(e,t,n){"use strict";function r(){this._types=Object.create(null),this._extensions=Object.create(null);for(var e=0;e<arguments.length;e++)this.define(arguments[e]);this.define=this.define.bind(this),this.getType=this.getType.bind(this),this.getExtension=this.getExtension.bind(this)}r.prototype.define=function(e,t){for(var n in e){var r=e[n].map((function(e){return e.toLowerCase()}));n=n.toLowerCase();for(var i=0;i<r.length;i++)if("*"!=(o=r[i])[0]){if(!t&&o in this._types)throw new Error('Attempt to change mapping for "'+o+'" extension from "'+this._types[o]+'" to "'+n+'". Pass `force=true` to allow this, otherwise remove "'+o+'" from the list of extensions for "'+n+'".');this._types[o]=n}if(t||!this._extensions[n]){var o=r[0];this._extensions[n]="*"!=o[0]?o:o.substr(1)}}},r.prototype.getType=function(e){var t=(e=String(e)).replace(/^.*[/\\]/,"").toLowerCase(),n=t.replace(/^.*\./,"").toLowerCase(),r=t.length<e.length;return(n.length<t.length-1||!r)&&this._types[n]||null},r.prototype.getExtension=function(e){return(e=/^\s*([^;\s]*)/.test(e)&&RegExp.$1)&&this._extensions[e.toLowerCase()]||null},t.exports=r},{}],313:[function(e,t,n){"use strict";var r=e("./Mime");t.exports=new r(e("./types/standard"))},{"./Mime":312,"./types/standard":314}],314:[function(e,t,n){t.exports={"application/andrew-inset":["ez"],"application/applixware":["aw"],"application/atom+xml":["atom"],"application/atomcat+xml":["atomcat"],"application/atomdeleted+xml":["atomdeleted"],"application/atomsvc+xml":["atomsvc"],"application/atsc-dwd+xml":["dwd"],"application/atsc-held+xml":["held"],"application/atsc-rsat+xml":["rsat"],"application/bdoc":["bdoc"],"application/calendar+xml":["xcs"],"application/ccxml+xml":["ccxml"],"application/cdfx+xml":["cdfx"],"application/cdmi-capability":["cdmia"],"application/cdmi-container":["cdmic"],"application/cdmi-domain":["cdmid"],"application/cdmi-object":["cdmio"],"application/cdmi-queue":["cdmiq"],"application/cu-seeme":["cu"],"application/dash+xml":["mpd"],"application/davmount+xml":["davmount"],"application/docbook+xml":["dbk"],"application/dssc+der":["dssc"],"application/dssc+xml":["xdssc"],"application/ecmascript":["ecma","es"],"application/emma+xml":["emma"],"application/emotionml+xml":["emotionml"],"application/epub+zip":["epub"],"application/exi":["exi"],"application/fdt+xml":["fdt"],"application/font-tdpfr":["pfr"],"application/geo+json":["geojson"],"application/gml+xml":["gml"],"application/gpx+xml":["gpx"],"application/gxf":["gxf"],"application/gzip":["gz"],"application/hjson":["hjson"],"application/hyperstudio":["stk"],"application/inkml+xml":["ink","inkml"],"application/ipfix":["ipfix"],"application/its+xml":["its"],"application/java-archive":["jar","war","ear"],"application/java-serialized-object":["ser"],"application/java-vm":["class"],"application/javascript":["js","mjs"],"application/json":["json","map"],"application/json5":["json5"],"application/jsonml+json":["jsonml"],"application/ld+json":["jsonld"],"application/lgr+xml":["lgr"],"application/lost+xml":["lostxml"],"application/mac-binhex40":["hqx"],"application/mac-compactpro":["cpt"],"application/mads+xml":["mads"],"application/manifest+json":["webmanifest"],"application/marc":["mrc"],"application/marcxml+xml":["mrcx"],"application/mathematica":["ma","nb","mb"],"application/mathml+xml":["mathml"],"application/mbox":["mbox"],"application/mediaservercontrol+xml":["mscml"],"application/metalink+xml":["metalink"],"application/metalink4+xml":["meta4"],"application/mets+xml":["mets"],"application/mmt-aei+xml":["maei"],"application/mmt-usd+xml":["musd"],"application/mods+xml":["mods"],"application/mp21":["m21","mp21"],"application/mp4":["mp4s","m4p"],"application/mrb-consumer+xml":["*xdf"],"application/mrb-publish+xml":["*xdf"],"application/msword":["doc","dot"],"application/mxf":["mxf"],"application/n-quads":["nq"],"application/n-triples":["nt"],"application/node":["cjs"],"application/octet-stream":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"],"application/oda":["oda"],"application/oebps-package+xml":["opf"],"application/ogg":["ogx"],"application/omdoc+xml":["omdoc"],"application/onenote":["onetoc","onetoc2","onetmp","onepkg"],"application/oxps":["oxps"],"application/p2p-overlay+xml":["relo"],"application/patch-ops-error+xml":["*xer"],"application/pdf":["pdf"],"application/pgp-encrypted":["pgp"],"application/pgp-signature":["asc","sig"],"application/pics-rules":["prf"],"application/pkcs10":["p10"],"application/pkcs7-mime":["p7m","p7c"],"application/pkcs7-signature":["p7s"],"application/pkcs8":["p8"],"application/pkix-attr-cert":["ac"],"application/pkix-cert":["cer"],"application/pkix-crl":["crl"],"application/pkix-pkipath":["pkipath"],"application/pkixcmp":["pki"],"application/pls+xml":["pls"],"application/postscript":["ai","eps","ps"],"application/provenance+xml":["provx"],"application/pskc+xml":["pskcxml"],"application/raml+yaml":["raml"],"application/rdf+xml":["rdf","owl"],"application/reginfo+xml":["rif"],"application/relax-ng-compact-syntax":["rnc"],"application/resource-lists+xml":["rl"],"application/resource-lists-diff+xml":["rld"],"application/rls-services+xml":["rs"],"application/route-apd+xml":["rapd"],"application/route-s-tsid+xml":["sls"],"application/route-usd+xml":["rusd"],"application/rpki-ghostbusters":["gbr"],"application/rpki-manifest":["mft"],"application/rpki-roa":["roa"],"application/rsd+xml":["rsd"],"application/rss+xml":["rss"],"application/rtf":["rtf"],"application/sbml+xml":["sbml"],"application/scvp-cv-request":["scq"],"application/scvp-cv-response":["scs"],"application/scvp-vp-request":["spq"],"application/scvp-vp-response":["spp"],"application/sdp":["sdp"],"application/senml+xml":["senmlx"],"application/sensml+xml":["sensmlx"],"application/set-payment-initiation":["setpay"],"application/set-registration-initiation":["setreg"],"application/shf+xml":["shf"],"application/sieve":["siv","sieve"],"application/smil+xml":["smi","smil"],"application/sparql-query":["rq"],"application/sparql-results+xml":["srx"],"application/srgs":["gram"],"application/srgs+xml":["grxml"],"application/sru+xml":["sru"],"application/ssdl+xml":["ssdl"],"application/ssml+xml":["ssml"],"application/swid+xml":["swidtag"],"application/tei+xml":["tei","teicorpus"],"application/thraud+xml":["tfi"],"application/timestamped-data":["tsd"],"application/toml":["toml"],"application/ttml+xml":["ttml"],"application/urc-ressheet+xml":["rsheet"],"application/voicexml+xml":["vxml"],"application/wasm":["wasm"],"application/widget":["wgt"],"application/winhlp":["hlp"],"application/wsdl+xml":["wsdl"],"application/wspolicy+xml":["wspolicy"],"application/xaml+xml":["xaml"],"application/xcap-att+xml":["xav"],"application/xcap-caps+xml":["xca"],"application/xcap-diff+xml":["xdf"],"application/xcap-el+xml":["xel"],"application/xcap-error+xml":["xer"],"application/xcap-ns+xml":["xns"],"application/xenc+xml":["xenc"],"application/xhtml+xml":["xhtml","xht"],"application/xliff+xml":["xlf"],"application/xml":["xml","xsl","xsd","rng"],"application/xml-dtd":["dtd"],"application/xop+xml":["xop"],"application/xproc+xml":["xpl"],"application/xslt+xml":["xslt"],"application/xspf+xml":["xspf"],"application/xv+xml":["mxml","xhvml","xvml","xvm"],"application/yang":["yang"],"application/yin+xml":["yin"],"application/zip":["zip"],"audio/3gpp":["*3gpp"],"audio/adpcm":["adp"],"audio/basic":["au","snd"],"audio/midi":["mid","midi","kar","rmi"],"audio/mobile-xmf":["mxmf"],"audio/mp3":["*mp3"],"audio/mp4":["m4a","mp4a"],"audio/mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"audio/ogg":["oga","ogg","spx"],"audio/s3m":["s3m"],"audio/silk":["sil"],"audio/wav":["wav"],"audio/wave":["*wav"],"audio/webm":["weba"],"audio/xm":["xm"],"font/collection":["ttc"],"font/otf":["otf"],"font/ttf":["ttf"],"font/woff":["woff"],"font/woff2":["woff2"],"image/aces":["exr"],"image/apng":["apng"],"image/bmp":["bmp"],"image/cgm":["cgm"],"image/dicom-rle":["drle"],"image/emf":["emf"],"image/fits":["fits"],"image/g3fax":["g3"],"image/gif":["gif"],"image/heic":["heic"],"image/heic-sequence":["heics"],"image/heif":["heif"],"image/heif-sequence":["heifs"],"image/hej2k":["hej2"],"image/hsj2":["hsj2"],"image/ief":["ief"],"image/jls":["jls"],"image/jp2":["jp2","jpg2"],"image/jpeg":["jpeg","jpg","jpe"],"image/jph":["jph"],"image/jphc":["jhc"],"image/jpm":["jpm"],"image/jpx":["jpx","jpf"],"image/jxr":["jxr"],"image/jxra":["jxra"],"image/jxrs":["jxrs"],"image/jxs":["jxs"],"image/jxsc":["jxsc"],"image/jxsi":["jxsi"],"image/jxss":["jxss"],"image/ktx":["ktx"],"image/png":["png"],"image/sgi":["sgi"],"image/svg+xml":["svg","svgz"],"image/t38":["t38"],"image/tiff":["tif","tiff"],"image/tiff-fx":["tfx"],"image/webp":["webp"],"image/wmf":["wmf"],"message/disposition-notification":["disposition-notification"],"message/global":["u8msg"],"message/global-delivery-status":["u8dsn"],"message/global-disposition-notification":["u8mdn"],"message/global-headers":["u8hdr"],"message/rfc822":["eml","mime"],"model/3mf":["3mf"],"model/gltf+json":["gltf"],"model/gltf-binary":["glb"],"model/iges":["igs","iges"],"model/mesh":["msh","mesh","silo"],"model/mtl":["mtl"],"model/obj":["obj"],"model/stl":["stl"],"model/vrml":["wrl","vrml"],"model/x3d+binary":["*x3db","x3dbz"],"model/x3d+fastinfoset":["x3db"],"model/x3d+vrml":["*x3dv","x3dvz"],"model/x3d+xml":["x3d","x3dz"],"model/x3d-vrml":["x3dv"],"text/cache-manifest":["appcache","manifest"],"text/calendar":["ics","ifb"],"text/coffeescript":["coffee","litcoffee"],"text/css":["css"],"text/csv":["csv"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/jsx":["jsx"],"text/less":["less"],"text/markdown":["markdown","md"],"text/mathml":["mml"],"text/mdx":["mdx"],"text/n3":["n3"],"text/plain":["txt","text","conf","def","list","log","in","ini"],"text/richtext":["rtx"],"text/rtf":["*rtf"],"text/sgml":["sgml","sgm"],"text/shex":["shex"],"text/slim":["slim","slm"],"text/stylus":["stylus","styl"],"text/tab-separated-values":["tsv"],"text/troff":["t","tr","roff","man","me","ms"],"text/turtle":["ttl"],"text/uri-list":["uri","uris","urls"],"text/vcard":["vcard"],"text/vtt":["vtt"],"text/xml":["*xml"],"text/yaml":["yaml","yml"],"video/3gpp":["3gp","3gpp"],"video/3gpp2":["3g2"],"video/h261":["h261"],"video/h263":["h263"],"video/h264":["h264"],"video/jpeg":["jpgv"],"video/jpm":["*jpm","jpgm"],"video/mj2":["mj2","mjp2"],"video/mp2t":["ts"],"video/mp4":["mp4","mp4v","mpg4"],"video/mpeg":["mpeg","mpg","mpe","m1v","m2v"],"video/ogg":["ogv"],"video/quicktime":["qt","mov"],"video/webm":["webm"]}},{}],315:[function(e,t,n){var r=1e3,i=60*r,o=60*i,a=24*o,s=7*a,c=365.25*a;function u(e,t,n,r){var i=t>=1.5*n;return Math.round(e/n)+" "+r+(i?"s":"")}t.exports=function(e,t){t=t||{};var n,l,h=typeof e;if("string"===h&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*c;case"weeks":case"week":case"w":return n*s;case"days":case"day":case"d":return n*a;case"hours":case"hour":case"hrs":case"hr":case"h":return n*o;case"minutes":case"minute":case"mins":case"min":case"m":return n*i;case"seconds":case"second":case"secs":case"sec":case"s":return n*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}(e);if("number"===h&&isFinite(e))return t.long?(n=e,(l=Math.abs(n))>=a?u(n,l,a,"day"):l>=o?u(n,l,o,"hour"):l>=i?u(n,l,i,"minute"):l>=r?u(n,l,r,"second"):n+" ms"):function(e){var t=Math.abs(e);return t>=a?Math.round(e/a)+"d":t>=o?Math.round(e/o)+"h":t>=i?Math.round(e/i)+"m":t>=r?Math.round(e/r)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},{}],316:[function(e,t,n){(function(e){function t(e,t){for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}n.resolve=function(){for(var n="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var a=o>=0?arguments[o]:e.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(n=a+"/"+n,i="/"===a.charAt(0))}return(i?"/":"")+(n=t(r(n.split("/"),(function(e){return!!e})),!i).join("/"))||"."},n.normalize=function(e){var o=n.isAbsolute(e),a="/"===i(e,-1);return(e=t(r(e.split("/"),(function(e){return!!e})),!o).join("/"))||o||(e="."),e&&a&&(e+="/"),(o?"/":"")+e},n.isAbsolute=function(e){return"/"===e.charAt(0)},n.join=function(){var e=Array.prototype.slice.call(arguments,0);return n.normalize(r(e,(function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},n.relative=function(e,t){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=n.resolve(e).substr(1),t=n.resolve(t).substr(1);for(var i=r(e.split("/")),o=r(t.split("/")),a=Math.min(i.length,o.length),s=a,c=0;c<a;c++)if(i[c]!==o[c]){s=c;break}var u=[];for(c=s;c<i.length;c++)u.push("..");return(u=u.concat(o.slice(s))).join("/")},n.sep="/",n.delimiter=":",n.dirname=function(e){if("string"!=typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,r=-1,i=!0,o=e.length-1;o>=1;--o)if(47===(t=e.charCodeAt(o))){if(!i){r=o;break}}else i=!1;return-1===r?n?"/":".":n&&1===r?"/":e.slice(0,r)},n.basename=function(e,t){var n=function(e){"string"!=typeof e&&(e+="");var t,n=0,r=-1,i=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!i){n=t+1;break}}else-1===r&&(i=!1,r=t+1);return-1===r?"":e.slice(n,r)}(e);return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},n.extname=function(e){"string"!=typeof e&&(e+="");for(var t=-1,n=0,r=-1,i=!0,o=0,a=e.length-1;a>=0;--a){var s=e.charCodeAt(a);if(47!==s)-1===r&&(i=!1,r=a+1),46===s?-1===t?t=a:1!==o&&(o=1):-1!==t&&(o=-1);else if(!i){n=a+1;break}}return-1===t||-1===r||0===o||1===o&&t===r-1&&t===n+1?"":e.slice(t,r)};var i=function(e,t,n){return e.substr(t,n)}}).call(this,e("_process"))},{_process:393}],317:[function(e,t,n){(function(e){(function(){"use strict";var r={function:!0,object:!0},i=r[typeof window]&&window||this,o=r[typeof n]&&n,a=r[typeof t]&&t&&!t.nodeType&&t,s=o&&a&&"object"==typeof e&&e;!s||s.global!==s&&s.window!==s&&s.self!==s||(i=s);var c=Math.pow(2,53)-1,u=/\bOpera/,l=Object.prototype,h=l.hasOwnProperty,d=l.toString;function f(e){return(e=String(e)).charAt(0).toUpperCase()+e.slice(1)}function p(e){return e=y(e),/^(?:webOS|i(?:OS|P))/.test(e)?e:f(e)}function g(e,t){for(var n in e)h.call(e,n)&&t(e[n],n,e)}function A(e){return null==e?f(e):d.call(e).slice(8,-1)}function v(e){return String(e).replace(/([ -])(?!$)/g,"$1?")}function m(e,t){var n=null;return function(e,t){var n=-1,r=e?e.length:0;if("number"==typeof r&&r>-1&&r<=c)for(;++n<r;)t(e[n],n,e);else g(e,t)}(e,(function(r,i){n=t(n,r,i,e)})),n}function y(e){return String(e).replace(/^ +| +$/g,"")}var b=function e(t){var n=i,r=t&&"object"==typeof t&&"String"!=A(t);r&&(n=t,t=null);var o=n.navigator||{},a=o.userAgent||"";t||(t=a);var s,c,l,h,f,b=r?!!o.likeChrome:/\bChrome\b/.test(t)&&!/internal|\n/i.test(d.toString()),_="Object",E=r?_:"ScriptBridgingProxyObject",w=r?_:"Environment",I=r&&n.java?"JavaPackage":A(n.java),C=r?_:"RuntimeObject",S=/\bJava/.test(I)&&n.java,T=S&&A(n.environment)==w,R=S?"a":"",k=S?"b":"",O=n.document||{},N=n.operamini||n.opera,x=u.test(x=r&&N?N["[[Class]]"]:A(N))?x:N=null,D=t,L=[],P=null,B=t==a,M=B&&N&&"function"==typeof N.version&&N.version(),j=m([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"],(function(e,n){return e||RegExp("\\b"+(n.pattern||v(n))+"\\b","i").exec(t)&&(n.label||n)})),U=function(e){return m(e,(function(e,n){return e||RegExp("\\b"+(n.pattern||v(n))+"\\b","i").exec(t)&&(n.label||n)}))}(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"Edge"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Waterfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),F=q([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),Q=function(e){return m(e,(function(e,n,r){return e||(n[F]||n[/^[a-z]+(?: +[a-z]+\b)*/i.exec(F)]||RegExp("\\b"+v(r)+"(?:\\b|\\w*\\d)","i").exec(t))&&r}))}({Apple:{iPad:1,iPhone:1,iPod:1},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1}}),G=function(e){return m(e,(function(e,n){var r=n.pattern||v(n);return!e&&(e=RegExp("\\b"+r+"(?:/[\\d.]+|[ \\w.]*)","i").exec(t))&&(e=function(e,t,n){var r={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return t&&n&&/^Win/i.test(e)&&!/^Windows Phone /i.test(e)&&(r=r[/[\d.]+$/.exec(e)])&&(e="Windows "+r),e=String(e),t&&n&&(e=e.replace(RegExp(t,"i"),n)),p(e.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}(e,r,n.label||n)),e}))}(["Windows Phone","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);function q(e){return m(e,(function(e,n){var r=n.pattern||v(n);return!e&&(e=RegExp("\\b"+r+" *\\d+[.\\w_]*","i").exec(t)||RegExp("\\b"+r+" *\\w+-[\\w]*","i").exec(t)||RegExp("\\b"+r+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(t))&&((e=String(n.label&&!RegExp(r,"i").test(n.label)?n.label:e).split("/"))[1]&&!/[\d.]+/.test(e[0])&&(e[0]+=" "+e[1]),n=n.label||n,e=p(e[0].replace(RegExp(r,"i"),n).replace(RegExp("; *(?:"+n+"[_-])?","i")," ").replace(RegExp("("+n+")[-_.]?(\\w)","i"),"$1 $2"))),e}))}if(j&&(j=[j]),Q&&!F&&(F=q([Q])),(s=/\bGoogle TV\b/.exec(F))&&(F=s[0]),/\bSimulator\b/i.test(t)&&(F=(F?F+" ":"")+"Simulator"),"Opera Mini"==U&&/\bOPiOS\b/.test(t)&&L.push("running in Turbo/Uncompressed mode"),"IE"==U&&/\blike iPhone OS\b/.test(t)?(Q=(s=e(t.replace(/like iPhone OS/,""))).manufacturer,F=s.product):/^iP/.test(F)?(U||(U="Safari"),G="iOS"+((s=/ OS ([\d_]+)/i.exec(t))?" "+s[1].replace(/_/g,"."):"")):"Konqueror"!=U||/buntu/i.test(G)?Q&&"Google"!=Q&&(/Chrome/.test(U)&&!/\bMobile Safari\b/i.test(t)||/\bVita\b/.test(F))||/\bAndroid\b/.test(G)&&/^Chrome/.test(U)&&/\bVersion\//i.test(t)?(U="Android Browser",G=/\bAndroid\b/.test(G)?G:"Android"):"Silk"==U?(/\bMobi/i.test(t)||(G="Android",L.unshift("desktop mode")),/Accelerated *= *true/i.test(t)&&L.unshift("accelerated")):"PaleMoon"==U&&(s=/\bFirefox\/([\d.]+)\b/.exec(t))?L.push("identifying as Firefox "+s[1]):"Firefox"==U&&(s=/\b(Mobile|Tablet|TV)\b/i.exec(t))?(G||(G="Firefox OS"),F||(F=s[1])):!U||(s=!/\bMinefield\b/i.test(t)&&/\b(?:Firefox|Safari)\b/.exec(U))?(U&&!F&&/[\/,]|^[^(]+?\)/.test(t.slice(t.indexOf(s+"/")+8))&&(U=null),(s=F||Q||G)&&(F||Q||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(G))&&(U=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(G)?G:s)+" Browser")):"Electron"==U&&(s=(/\bChrome\/([\d.]+)\b/.exec(t)||0)[1])&&L.push("Chromium "+s):G="Kubuntu",M||(M=m(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$))","Version",v(U),"(?:Firefox|Minefield|NetFront)"],(function(e,n){return e||(RegExp(n+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(t)||0)[1]||null}))),(s=("iCab"==j&&parseFloat(M)>3?"WebKit":/\bOpera\b/.test(U)&&(/\bOPR\b/.test(t)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test(t)&&!/^(?:Trident|EdgeHTML)$/.test(j)&&"WebKit"||!j&&/\bMSIE\b/i.test(t)&&("Mac OS"==G?"Tasman":"Trident")||"WebKit"==j&&/\bPlayStation\b(?! Vita\b)/i.test(U)&&"NetFront")&&(j=[s]),"IE"==U&&(s=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(t)||0)[1])?(U+=" Mobile",G="Windows Phone "+(/\+$/.test(s)?s:s+".x"),L.unshift("desktop mode")):/\bWPDesktop\b/i.test(t)?(U="IE Mobile",G="Windows Phone 8.x",L.unshift("desktop mode"),M||(M=(/\brv:([\d.]+)/.exec(t)||0)[1])):"IE"!=U&&"Trident"==j&&(s=/\brv:([\d.]+)/.exec(t))&&(U&&L.push("identifying as "+U+(M?" "+M:"")),U="IE",M=s[1]),B){if(h="global",f=null!=(l=n)?typeof l[h]:"number",/^(?:boolean|number|string|undefined)$/.test(f)||"object"==f&&!l[h])A(s=n.runtime)==E?(U="Adobe AIR",G=s.flash.system.Capabilities.os):A(s=n.phantom)==C?(U="PhantomJS",M=(s=s.version||null)&&s.major+"."+s.minor+"."+s.patch):"number"==typeof O.documentMode&&(s=/\bTrident\/(\d+)/i.exec(t))?(M=[M,O.documentMode],(s=+s[1]+4)!=M[1]&&(L.push("IE "+M[1]+" mode"),j&&(j[1]=""),M[1]=s),M="IE"==U?String(M[1].toFixed(1)):M[0]):"number"==typeof O.documentMode&&/^(?:Chrome|Firefox)\b/.test(U)&&(L.push("masking as "+U+" "+M),U="IE",M="11.0",j=["Trident"],G="Windows");else if(S&&(D=(s=S.lang.System).getProperty("os.arch"),G=G||s.getProperty("os.name")+" "+s.getProperty("os.version")),T){try{M=n.require("ringo/engine").version.join("."),U="RingoJS"}catch(e){(s=n.system)&&s.global.system==n.system&&(U="Narwhal",G||(G=s[0].os||null))}U||(U="Rhino")}else"object"==typeof n.process&&!n.process.browser&&(s=n.process)&&("object"==typeof s.versions&&("string"==typeof s.versions.electron?(L.push("Node "+s.versions.node),U="Electron",M=s.versions.electron):"string"==typeof s.versions.nw&&(L.push("Chromium "+M,"Node "+s.versions.node),U="NW.js",M=s.versions.nw)),U||(U="Node.js",D=s.arch,G=s.platform,M=(M=/[\d.]+/.exec(s.version))?M[0]:null));G=G&&p(G)}if(M&&(s=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(M)||/(?:alpha|beta)(?: ?\d)?/i.exec(t+";"+(B&&o.appMinorVersion))||/\bMinefield\b/i.test(t)&&"a")&&(P=/b/i.test(s)?"beta":"alpha",M=M.replace(RegExp(s+"\\+?$"),"")+("beta"==P?k:R)+(/\d+\+?/.exec(s)||"")),"Fennec"==U||"Firefox"==U&&/\b(?:Android|Firefox OS)\b/.test(G))U="Firefox Mobile";else if("Maxthon"==U&&M)M=M.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(F))"Xbox 360"==F&&(G=null),"Xbox 360"==F&&/\bIEMobile\b/.test(t)&&L.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(U)&&(!U||F||/Browser|Mobi/.test(U))||"Windows CE"!=G&&!/Mobi/i.test(t))if("IE"==U&&B)try{null===n.external&&L.unshift("platform preview")}catch(e){L.unshift("embedded")}else(/\bBlackBerry\b/.test(F)||/\bBB10\b/.test(t))&&(s=(RegExp(F.replace(/ +/g," *")+"/([.\\d]+)","i").exec(t)||0)[1]||M)?(G=((s=[s,/BB10/.test(t)])[1]?(F=null,Q="BlackBerry"):"Device Software")+" "+s[0],M=null):this!=g&&"Wii"!=F&&(B&&N||/Opera/.test(U)&&/\b(?:MSIE|Firefox)\b/i.test(t)||"Firefox"==U&&/\bOS X (?:\d+\.){2,}/.test(G)||"IE"==U&&(G&&!/^Win/.test(G)&&M>5.5||/\bWindows XP\b/.test(G)&&M>8||8==M&&!/\bTrident\b/.test(t)))&&!u.test(s=e.call(g,t.replace(u,"")+";"))&&s.name&&(s="ing as "+s.name+((s=s.version)?" "+s:""),u.test(U)?(/\bIE\b/.test(s)&&"Mac OS"==G&&(G=null),s="identify"+s):(s="mask"+s,U=x?p(x.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(s)&&(G=null),B||(M=null)),j=["Presto"],L.push(s));else U+=" Mobile";(s=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(t)||0)[1])&&(s=[parseFloat(s.replace(/\.(\d)$/,".0$1")),s],"Safari"==U&&"+"==s[1].slice(-1)?(U="WebKit Nightly",P="alpha",M=s[1].slice(0,-1)):M!=s[1]&&M!=(s[2]=(/\bSafari\/([\d.]+\+?)/i.exec(t)||0)[1])||(M=null),s[1]=(/\bChrome\/([\d.]+)/i.exec(t)||0)[1],537.36==s[0]&&537.36==s[2]&&parseFloat(s[1])>=28&&"WebKit"==j&&(j=["Blink"]),B&&(b||s[1])?(j&&(j[1]="like Chrome"),s=s[1]||((s=s[0])<530?1:s<532?2:s<532.05?3:s<533?4:s<534.03?5:s<534.07?6:s<534.1?7:s<534.13?8:s<534.16?9:s<534.24?10:s<534.3?11:s<535.01?12:s<535.02?"13+":s<535.07?15:s<535.11?16:s<535.19?17:s<536.05?18:s<536.1?19:s<537.01?20:s<537.11?"21+":s<537.13?23:s<537.18?24:s<537.24?25:s<537.36?26:"Blink"!=j?"27":"28")):(j&&(j[1]="like Safari"),s=(s=s[0])<400?1:s<500?2:s<526?3:s<533?4:s<534?"4+":s<535?5:s<537?6:s<538?7:s<601?8:"8"),j&&(j[1]+=" "+(s+="number"==typeof s?".x":/[.+]/.test(s)?"":"+")),"Safari"==U&&(!M||parseInt(M)>45)&&(M=s)),"Opera"==U&&(s=/\bzbov|zvav$/.exec(G))?(U+=" ",L.unshift("desktop mode"),"zvav"==s?(U+="Mini",M=null):U+="Mobile",G=G.replace(RegExp(" *"+s+"$"),"")):"Safari"==U&&/\bChrome\b/.exec(j&&j[1])&&(L.unshift("desktop mode"),U="Chrome Mobile",M=null,/\bOS X\b/.test(G)?(Q="Apple",G="iOS 4.3+"):G=null),M&&0==M.indexOf(s=/[\d.]+$/.exec(G))&&t.indexOf("/"+s+"-")>-1&&(G=y(G.replace(s,""))),j&&!/\b(?:Avant|Nook)\b/.test(U)&&(/Browser|Lunascape|Maxthon/.test(U)||"Safari"!=U&&/^iOS/.test(G)&&/\bSafari\b/.test(j[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|Web)/.test(U)&&j[1])&&(s=j[j.length-1])&&L.push(s),L.length&&(L=["("+L.join("; ")+")"]),Q&&F&&F.indexOf(Q)<0&&L.push("on "+Q),F&&L.push((/^on /.test(L[L.length-1])?"":"on ")+F),G&&(s=/ ([\d.+]+)$/.exec(G),c=s&&"/"==G.charAt(G.length-s[0].length-1),G={architecture:32,family:s&&!c?G.replace(s[0],""):G,version:s?s[1]:null,toString:function(){var e=this.version;return this.family+(e&&!c?" "+e:"")+(64==this.architecture?" 64-bit":"")}}),(s=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(D))&&!/\bi686\b/i.test(D)?(G&&(G.architecture=64,G.family=G.family.replace(RegExp(" *"+s),"")),U&&(/\bWOW64\b/i.test(t)||B&&/\w(?:86|32)$/.test(o.cpuClass||o.platform)&&!/\bWin64; x64\b/i.test(t))&&L.unshift("32-bit")):G&&/^OS X/.test(G.family)&&"Chrome"==U&&parseFloat(M)>=39&&(G.architecture=64),t||(t=null);var V={};return V.description=t,V.layout=j&&j[0],V.manufacturer=Q,V.name=U,V.prerelease=P,V.product=F,V.ua=t,V.version=U&&M,V.os=G||{architecture:null,family:null,version:null,toString:function(){return"null"}},V.parse=e,V.toString=function(){return this.description||""},V.version&&L.unshift(M),V.name&&L.unshift(U),G&&U&&(G!=String(G).split(" ")[0]||G!=U.split(" ")[0]&&!F)&&L.push(F?"("+G+")":"on "+G),L.length&&(V.description=L.join(" ")),V}();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(i.platform=b,define((function(){return b}))):o&&a?g(b,(function(e,t){o[t]=e})):i.platform=b}).call(this)}).call(this,void 0!==__webpack_require__.g?__webpack_require__.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],318:[function(e,t,n){(function(e){"use strict";void 0===e||!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports={nextTick:function(t,n,r,i){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var o,a,s=arguments.length;switch(s){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick((function(){t.call(null,n)}));case 3:return e.nextTick((function(){t.call(null,n,r)}));case 4:return e.nextTick((function(){t.call(null,n,r,i)}));default:for(o=new Array(s-1),a=0;a<o.length;)o[a++]=arguments[a];return e.nextTick((function(){t.apply(null,o)}))}}}:t.exports=e}).call(this,e("_process"))},{_process:393}],319:[function(e,t,n){var r,i,o=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function c(e){if(r===setTimeout)return setTimeout(e,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(e){r=a}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(e){i=s}}();var u,l=[],h=!1,d=-1;function f(){h&&u&&(h=!1,u.length?l=u.concat(l):d=-1,l.length&&p())}function p(){if(!h){var e=c(f);h=!0;for(var t=l.length;t;){for(u=l,l=[];++d<t;)u&&u[d].run();d=-1,t=l.length}u=null,h=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function g(e,t){this.fun=e,this.array=t}function A(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new g(e,t)),1!==l.length||h||c(p)},g.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=A,o.addListener=A,o.once=A,o.off=A,o.removeListener=A,o.removeAllListeners=A,o.emit=A,o.prependListener=A,o.prependOnceListener=A,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],320:[function(e,t,n){(function(e){!function(r){var i="object"==typeof n&&n&&!n.nodeType&&n,o="object"==typeof t&&t&&!t.nodeType&&t,a="object"==typeof e&&e;a.global!==a&&a.window!==a&&a.self!==a||(r=a);var s,c,u=2147483647,l=36,h=/^xn--/,d=/[^\x20-\x7E]/,f=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},g=Math.floor,A=String.fromCharCode;function v(e){throw new RangeError(p[e])}function m(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function y(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+m((e=e.replace(f,".")).split("."),t).join(".")}function b(e){for(var t,n,r=[],i=0,o=e.length;i<o;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<o?56320==(64512&(n=e.charCodeAt(i++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--):r.push(t);return r}function _(e){return m(e,(function(e){var t="";return e>65535&&(t+=A((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=A(e)})).join("")}function E(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function w(e,t,n){var r=0;for(e=n?g(e/700):e>>1,e+=g(e/t);e>455;r+=l)e=g(e/35);return g(r+36*e/(e+38))}function I(e){var t,n,r,i,o,a,s,c,h,d,f,p=[],A=e.length,m=0,y=128,b=72;for((n=e.lastIndexOf("-"))<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&v("not-basic"),p.push(e.charCodeAt(r));for(i=n>0?n+1:0;i<A;){for(o=m,a=1,s=l;i>=A&&v("invalid-input"),((c=(f=e.charCodeAt(i++))-48<10?f-22:f-65<26?f-65:f-97<26?f-97:l)>=l||c>g((u-m)/a))&&v("overflow"),m+=c*a,!(c<(h=s<=b?1:s>=b+26?26:s-b));s+=l)a>g(u/(d=l-h))&&v("overflow"),a*=d;b=w(m-o,t=p.length+1,0==o),g(m/t)>u-y&&v("overflow"),y+=g(m/t),m%=t,p.splice(m++,0,y)}return _(p)}function C(e){var t,n,r,i,o,a,s,c,h,d,f,p,m,y,_,I=[];for(p=(e=b(e)).length,t=128,n=0,o=72,a=0;a<p;++a)(f=e[a])<128&&I.push(A(f));for(r=i=I.length,i&&I.push("-");r<p;){for(s=u,a=0;a<p;++a)(f=e[a])>=t&&f<s&&(s=f);for(s-t>g((u-n)/(m=r+1))&&v("overflow"),n+=(s-t)*m,t=s,a=0;a<p;++a)if((f=e[a])<t&&++n>u&&v("overflow"),f==t){for(c=n,h=l;!(c<(d=h<=o?1:h>=o+26?26:h-o));h+=l)_=c-d,y=l-d,I.push(A(E(d+_%y,0))),c=g(_/y);I.push(A(E(c,0))),o=w(n,m,r==i),n=0,++r}++n,++t}return I.join("")}if(s={version:"1.4.1",ucs2:{decode:b,encode:_},decode:I,encode:C,toASCII:function(e){return y(e,(function(e){return d.test(e)?"xn--"+C(e):e}))},toUnicode:function(e){return y(e,(function(e){return h.test(e)?I(e.slice(4).toLowerCase()):e}))}},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",(function(){return s}));else if(i&&o)if(t.exports==i)o.exports=s;else for(c in s)s.hasOwnProperty(c)&&(i[c]=s[c]);else r.punycode=s}(this)}).call(this,void 0!==__webpack_require__.g?__webpack_require__.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],321:[function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,n,o){t=t||"&",n=n||"=";var a={};if("string"!=typeof e||0===e.length)return a;var s=/\+/g;e=e.split(t);var c=1e3;o&&"number"==typeof o.maxKeys&&(c=o.maxKeys);var u=e.length;c>0&&u>c&&(u=c);for(var l=0;l<u;++l){var h,d,f,p,g=e[l].replace(s,"%20"),A=g.indexOf(n);A>=0?(h=g.substr(0,A),d=g.substr(A+1)):(h=g,d=""),f=decodeURIComponent(h),p=decodeURIComponent(d),r(a,f)?i(a[f])?a[f].push(p):a[f]=[a[f],p]:a[f]=p}return a};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],322:[function(e,t,n){"use strict";var r=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,n,s){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?o(a(e),(function(a){var s=encodeURIComponent(r(a))+n;return i(e[a])?o(e[a],(function(e){return s+encodeURIComponent(r(e))})).join(t):s+encodeURIComponent(r(e[a]))})).join(t):s?encodeURIComponent(r(s))+n+encodeURIComponent(r(e)):""};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function o(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var a=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},{}],323:[function(e,t,n){"use strict";n.decode=n.parse=e("./decode"),n.encode=n.stringify=e("./encode")},{"./decode":321,"./encode":322}],324:[function(e,t,n){t.exports=e("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":325}],325:[function(e,t,n){"use strict";var r=e("process-nextick-args"),i=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};t.exports=h;var o=Object.create(e("core-util-is"));o.inherits=e("inherits");var a=e("./_stream_readable"),s=e("./_stream_writable");o.inherits(h,a);for(var c=i(s.prototype),u=0;u<c.length;u++){var l=c[u];h.prototype[l]||(h.prototype[l]=s.prototype[l])}function h(e){if(!(this instanceof h))return new h(e);a.call(this,e),s.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",d)}function d(){this.allowHalfOpen||this._writableState.ended||r.nextTick(f,this)}function f(e){e.end()}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),h.prototype._destroy=function(e,t){this.push(null),this.end(),r.nextTick(t,e)}},{"./_stream_readable":327,"./_stream_writable":329,"core-util-is":294,inherits:307,"process-nextick-args":318}],326:[function(e,t,n){"use strict";t.exports=o;var r=e("./_stream_transform"),i=Object.create(e("core-util-is"));function o(e){if(!(this instanceof o))return new o(e);r.call(this,e)}i.inherits=e("inherits"),i.inherits(o,r),o.prototype._transform=function(e,t,n){n(null,e)}},{"./_stream_transform":328,"core-util-is":294,inherits:307}],327:[function(e,t,n){(function(n,r){"use strict";var i=e("process-nextick-args");t.exports=y;var o,a=e("isarray");y.ReadableState=m,e("events").EventEmitter;var s=function(e,t){return e.listeners(t).length},c=e("./internal/streams/stream"),u=e("safe-buffer").Buffer,l=r.Uint8Array||function(){},h=Object.create(e("core-util-is"));h.inherits=e("inherits");var d=e("util"),f=void 0;f=d&&d.debuglog?d.debuglog("stream"):function(){};var p,g=e("./internal/streams/BufferList"),A=e("./internal/streams/destroy");h.inherits(y,c);var v=["error","close","destroy","pause","resume"];function m(t,n){t=t||{};var r=n instanceof(o=o||e("./_stream_duplex"));this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var i=t.highWaterMark,a=t.readableHighWaterMark,s=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(a||0===a)?a:s,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new g,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(p||(p=e("string_decoder/").StringDecoder),this.decoder=new p(t.encoding),this.encoding=t.encoding)}function y(t){if(o=o||e("./_stream_duplex"),!(this instanceof y))return new y(t);this._readableState=new m(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),c.call(this)}function b(e,t,n,r,i){var o,a=e._readableState;return null===t?(a.reading=!1,function(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,I(e)}}(e,a)):(i||(o=function(e,t){var n,r;return r=t,u.isBuffer(r)||r instanceof l||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}(a,t)),o?e.emit("error",o):a.objectMode||t&&t.length>0?("string"==typeof t||a.objectMode||Object.getPrototypeOf(t)===u.prototype||(t=function(e){return u.from(e)}(t)),r?a.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):_(e,a,t,!0):a.ended?e.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!n?(t=a.decoder.write(t),a.objectMode||0!==t.length?_(e,a,t,!1):S(e,a)):_(e,a,t,!1))):r||(a.reading=!1)),function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(a)}function _(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&I(e)),S(e,t)}Object.defineProperty(y.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),y.prototype.destroy=A.destroy,y.prototype._undestroy=A.undestroy,y.prototype._destroy=function(e,t){this.push(null),t(e)},y.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=u.from(e,t),t=""),n=!0),b(this,e,t,!1,n)},y.prototype.unshift=function(e){return b(this,e,null,!0,!1)},y.prototype.isPaused=function(){return!1===this._readableState.flowing},y.prototype.setEncoding=function(t){return p||(p=e("string_decoder/").StringDecoder),this._readableState.decoder=new p(t),this._readableState.encoding=t,this};var E=8388608;function w(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=E?e=E:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function I(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(f("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?i.nextTick(C,e):C(e))}function C(e){f("emit readable"),e.emit("readable"),O(e)}function S(e,t){t.readingMore||(t.readingMore=!0,i.nextTick(T,e,t))}function T(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(f("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function R(e){f("readable nexttick read 0"),e.read(0)}function k(e,t){t.reading||(f("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),O(e),t.flowing&&!t.reading&&e.read(0)}function O(e){var t=e._readableState;for(f("flow",t.flowing);t.flowing&&null!==e.read(););}function N(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=function(e,t,n){var r;return e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?function(e,t){var n=t.head,r=1,i=n.data;for(e-=i.length;n=n.next;){var o=n.data,a=e>o.length?o.length:e;if(a===o.length?i+=o:i+=o.slice(0,e),0==(e-=a)){a===o.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(a));break}++r}return t.length-=r,i}(e,t):function(e,t){var n=u.allocUnsafe(e),r=t.head,i=1;for(r.data.copy(n),e-=r.data.length;r=r.next;){var o=r.data,a=e>o.length?o.length:e;if(o.copy(n,n.length-e,0,a),0==(e-=a)){a===o.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(a));break}++i}return t.length-=i,n}(e,t),r}(e,t.buffer,t.decoder),n);var n}function x(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,i.nextTick(D,t,e))}function D(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function L(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}y.prototype.read=function(e){f("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return f("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?x(this):I(this),null;if(0===(e=w(e,t))&&t.ended)return 0===t.length&&x(this),null;var r,i=t.needReadable;return f("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&f("length less than watermark",i=!0),t.ended||t.reading?f("reading or ended",i=!1):i&&(f("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=w(n,t))),null===(r=e>0?N(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&x(this)),null!==r&&this.emit("data",r),r},y.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},y.prototype.pipe=function(e,t){var r=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=e;break;case 1:o.pipes=[o.pipes,e];break;default:o.pipes.push(e)}o.pipesCount+=1,f("pipe count=%d opts=%j",o.pipesCount,t);var c=t&&!1===t.end||e===n.stdout||e===n.stderr?y:l;function u(t,n){f("onunpipe"),t===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,f("cleanup"),e.removeListener("close",v),e.removeListener("finish",m),e.removeListener("drain",h),e.removeListener("error",A),e.removeListener("unpipe",u),r.removeListener("end",l),r.removeListener("end",y),r.removeListener("data",g),d=!0,!o.awaitDrain||e._writableState&&!e._writableState.needDrain||h())}function l(){f("onend"),e.end()}o.endEmitted?i.nextTick(c):r.once("end",c),e.on("unpipe",u);var h=function(e){return function(){var t=e._readableState;f("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&s(e,"data")&&(t.flowing=!0,O(e))}}(r);e.on("drain",h);var d=!1,p=!1;function g(t){f("ondata"),p=!1,!1!==e.write(t)||p||((1===o.pipesCount&&o.pipes===e||o.pipesCount>1&&-1!==L(o.pipes,e))&&!d&&(f("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,p=!0),r.pause())}function A(t){f("onerror",t),y(),e.removeListener("error",A),0===s(e,"error")&&e.emit("error",t)}function v(){e.removeListener("finish",m),y()}function m(){f("onfinish"),e.removeListener("close",v),y()}function y(){f("unpipe"),r.unpipe(e)}return r.on("data",g),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?a(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",A),e.once("close",v),e.once("finish",m),e.emit("pipe",r),o.flowing||(f("pipe resume"),r.resume()),e},y.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,n);return this}var a=L(t.pipes,e);return-1===a||(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},y.prototype.on=function(e,t){var n=c.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&I(this):i.nextTick(R,this))}return n},y.prototype.addListener=y.prototype.on,y.prototype.resume=function(){var e=this._readableState;return e.flowing||(f("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,i.nextTick(k,e,t))}(this,e)),this},y.prototype.pause=function(){return f("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(f("pause"),this._readableState.flowing=!1,this.emit("pause")),this},y.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on("end",(function(){if(f("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){f("wrapped data"),n.decoder&&(i=n.decoder.write(i)),n.objectMode&&null==i||(n.objectMode||i&&i.length)&&(t.push(i)||(r=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<v.length;o++)e.on(v[o],this.emit.bind(this,v[o]));return this._read=function(t){f("wrapped _read",t),r&&(r=!1,e.resume())},this},Object.defineProperty(y.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),y._fromList=N}).call(this,e("_process"),void 0!==__webpack_require__.g?__webpack_require__.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./_stream_duplex":325,"./internal/streams/BufferList":330,"./internal/streams/destroy":331,"./internal/streams/stream":332,_process:393,"core-util-is":294,events:297,inherits:307,isarray:309,"process-nextick-args":318,"safe-buffer":338,"string_decoder/":341,util:78}],328:[function(e,t,n){"use strict";t.exports=a;var r=e("./_stream_duplex"),i=Object.create(e("core-util-is"));function o(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function a(e){if(!(this instanceof a))return new a(e);r.call(this,e),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",s)}function s(){var e=this;"function"==typeof this._flush?this._flush((function(t,n){c(e,t,n)})):c(this,null,null)}function c(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}i.inherits=e("inherits"),i.inherits(a,r),a.prototype.push=function(e,t){return this._transformState.needTransform=!1,r.prototype.push.call(this,e,t)},a.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},a.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},a.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},a.prototype._destroy=function(e,t){var n=this;r.prototype._destroy.call(this,e,(function(e){t(e),n.emit("close")}))}},{"./_stream_duplex":325,"core-util-is":294,inherits:307}],329:[function(e,t,n){(function(n,r,i){"use strict";var o=e("process-nextick-args");function a(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;for(e.entry=null;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}t.exports=m;var s,c=!n.browser&&["v0.10","v0.9."].indexOf(n.version.slice(0,5))>-1?i:o.nextTick;m.WritableState=v;var u=Object.create(e("core-util-is"));u.inherits=e("inherits");var l,h={deprecate:e("util-deprecate")},d=e("./internal/streams/stream"),f=e("safe-buffer").Buffer,p=r.Uint8Array||function(){},g=e("./internal/streams/destroy");function A(){}function v(t,n){s=s||e("./_stream_duplex"),t=t||{};var r=n instanceof s;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var i=t.highWaterMark,u=t.writableHighWaterMark,l=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(u||0===u)?u:l,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var h=!1===t.decodeStrings;this.decodeStrings=!h,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,r=n.sync,i=n.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,r,i){--t.pendingcb,n?(o.nextTick(i,r),o.nextTick(I,e,t),e._writableState.errorEmitted=!0,e.emit("error",r)):(i(r),e._writableState.errorEmitted=!0,e.emit("error",r),I(e,t))}(e,n,r,t,i);else{var a=E(n);a||n.corked||n.bufferProcessing||!n.bufferedRequest||_(e,n),r?c(b,e,n,a,i):b(e,n,a,i)}}(n,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}function m(t){if(s=s||e("./_stream_duplex"),!(l.call(m,this)||this instanceof s))return new m(t);this._writableState=new v(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),d.call(this)}function y(e,t,n,r,i,o,a){t.writelen=r,t.writecb=a,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function b(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),I(e,t)}function _(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,i=new Array(r),o=t.corkedRequestsFree;o.entry=n;for(var s=0,c=!0;n;)i[s]=n,n.isBuf||(c=!1),n=n.next,s+=1;i.allBuffers=c,y(e,t,!0,t.length,i,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new a(t),t.bufferedRequestCount=0}else{for(;n;){var u=n.chunk,l=n.encoding,h=n.callback;if(y(e,t,!1,t.objectMode?1:u.length,u,l,h),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function E(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function w(e,t){e._final((function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),I(e,t)}))}function I(e,t){var n=E(t);return n&&(function(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,o.nextTick(w,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}u.inherits(m,d),v.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(v.prototype,"buffer",{get:h.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(l=Function.prototype[Symbol.hasInstance],Object.defineProperty(m,Symbol.hasInstance,{value:function(e){return!!l.call(this,e)||this===m&&e&&e._writableState instanceof v}})):l=function(e){return e instanceof this},m.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},m.prototype.write=function(e,t,n){var r,i=this._writableState,a=!1,s=!i.objectMode&&(r=e,f.isBuffer(r)||r instanceof p);return s&&!f.isBuffer(e)&&(e=function(e){return f.from(e)}(e)),"function"==typeof t&&(n=t,t=null),s?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof n&&(n=A),i.ended?function(e,t){var n=new Error("write after end");e.emit("error",n),o.nextTick(t,n)}(this,n):(s||function(e,t,n,r){var i=!0,a=!1;return null===n?a=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||t.objectMode||(a=new TypeError("Invalid non-string/buffer chunk")),a&&(e.emit("error",a),o.nextTick(r,a),i=!1),i}(this,i,e,n))&&(i.pendingcb++,a=function(e,t,n,r,i,o){if(!n){var a=function(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=f.from(t,n)),t}(t,r,i);r!==a&&(n=!0,i="buffer",r=a)}var s=t.objectMode?1:r.length;t.length+=s;var c=t.length<t.highWaterMark;if(c||(t.needDrain=!0),t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else y(e,t,!1,s,r,i,o);return c}(this,i,s,e,t,n)),a},m.prototype.cork=function(){this._writableState.corked++},m.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||_(this,e))},m.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(m.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),m.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},m.prototype._writev=null,m.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(e,t,n){t.ending=!0,I(e,t),n&&(t.finished?o.nextTick(n):e.once("finish",n)),t.ended=!0,e.writable=!1}(this,r,n)},Object.defineProperty(m.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),m.prototype.destroy=g.destroy,m.prototype._undestroy=g.undestroy,m.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,e("_process"),void 0!==__webpack_require__.g?__webpack_require__.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("timers").setImmediate)},{"./_stream_duplex":325,"./internal/streams/destroy":331,"./internal/streams/stream":332,_process:393,"core-util-is":294,inherits:307,"process-nextick-args":318,"safe-buffer":338,timers:342,"util-deprecate":343}],330:[function(e,t,n){"use strict";var r=e("safe-buffer").Buffer,i=e("util");t.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},e.prototype.concat=function(e){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var t,n,i,o=r.allocUnsafe(e>>>0),a=this.head,s=0;a;)t=a.data,n=o,i=s,t.copy(n,i),s+=a.data.length,a=a.next;return o},e}(),i&&i.inspect&&i.inspect.custom&&(t.exports.prototype[i.inspect.custom]=function(){var e=i.inspect({length:this.length});return this.constructor.name+" "+e})},{"safe-buffer":338,util:78}],331:[function(e,t,n){"use strict";var r=e("process-nextick-args");function i(e,t){e.emit("error",t)}t.exports={destroy:function(e,t){var n=this,o=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return o||a?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||r.nextTick(i,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?(r.nextTick(i,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},{"process-nextick-args":318}],332:[function(e,t,n){arguments[4][96][0].apply(n,arguments)},{dup:96,events:297}],333:[function(e,t,n){t.exports=e("./readable").PassThrough},{"./readable":334}],334:[function(e,t,n){(n=t.exports=e("./lib/_stream_readable.js")).Stream=n,n.Readable=n,n.Writable=e("./lib/_stream_writable.js"),n.Duplex=e("./lib/_stream_duplex.js"),n.Transform=e("./lib/_stream_transform.js"),n.PassThrough=e("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":325,"./lib/_stream_passthrough.js":326,"./lib/_stream_readable.js":327,"./lib/_stream_transform.js":328,"./lib/_stream_writable.js":329}],335:[function(e,t,n){t.exports=e("./readable").Transform},{"./readable":334}],336:[function(e,t,n){t.exports=e("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":329}],337:[function(e,t,n){!function(e){"use strict";var n,r=Object.prototype,i=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag",u="object"==typeof t,l=e.regeneratorRuntime;if(l)u&&(t.exports=l);else{(l=e.regeneratorRuntime=u?t.exports:{}).wrap=b;var h="suspendedStart",d="suspendedYield",f="executing",p="completed",g={},A={};A[a]=function(){return this};var v=Object.getPrototypeOf,m=v&&v(v(N([])));m&&m!==r&&i.call(m,a)&&(A=m);var y=I.prototype=E.prototype=Object.create(A);w.prototype=y.constructor=I,I.constructor=w,I[c]=w.displayName="GeneratorFunction",l.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},l.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,I):(e.__proto__=I,c in e||(e[c]="GeneratorFunction")),e.prototype=Object.create(y),e},l.awrap=function(e){return{__await:e}},C(S.prototype),S.prototype[s]=function(){return this},l.AsyncIterator=S,l.async=function(e,t,n,r){var i=new S(b(e,t,n,r));return l.isGeneratorFunction(t)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},C(y),y[c]="Generator",y[a]=function(){return this},y.toString=function(){return"[object Generator]"},l.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},l.values=N,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,i){return s.type="throw",s.arg=e,t.next=r,i&&(t.method="next",t.arg=n),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=i.call(a,"catchLoc"),u=i.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:N(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=n),g}}}function b(e,t,n,r){var i=t&&t.prototype instanceof E?t:E,o=Object.create(i.prototype),a=new O(r||[]);return o._invoke=function(e,t,n){var r=h;return function(i,o){if(r===f)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw o;return x()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=T(a,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===h)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=f;var c=_(e,t,n);if("normal"===c.type){if(r=n.done?p:d,c.arg===g)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=p,n.method="throw",n.arg=c.arg)}}}(e,n,a),o}function _(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function E(){}function w(){}function I(){}function C(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function S(e){function t(n,r,o,a){var s=_(e[n],e,r);if("throw"!==s.type){var c=s.arg,u=c.value;return u&&"object"==typeof u&&i.call(u,"__await")?Promise.resolve(u.__await).then((function(e){t("next",e,o,a)}),(function(e){t("throw",e,o,a)})):Promise.resolve(u).then((function(e){c.value=e,o(c)}),a)}a(s.arg)}var n;this._invoke=function(e,r){function i(){return new Promise((function(n,i){t(e,r,n,i)}))}return n=n?n.then(i,i):i()}}function T(e,t){var r=e.iterator[t.method];if(r===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=n,T(e,t),"throw"===t.method))return g;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var i=_(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,g;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=n),t.delegate=null,g):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,g)}function R(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(R,this),this.reset(!0)}function N(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(i.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=n,t.done=!0,t};return o.next=o}}return{next:x}}function x(){return{value:n,done:!0}}}(function(){return this}()||Function("return this")())},{}],338:[function(e,t,n){var r=e("buffer"),i=r.Buffer;function o(e,t){for(var n in e)t[n]=e[n]}function a(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(o(r,n),n.Buffer=a),o(i,a),a.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},a.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},a.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},a.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},{buffer:98}],339:[function(e,t,n){(function(t){!function(n){n.parser=function(e,t){return new o(e,t)},n.SAXParser=o,n.SAXStream=s,n.createStream=function(e,t){return new s(e,t)},n.MAX_BUFFER_LENGTH=65536;var r,i=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function o(e,t){if(!(this instanceof o))return new o(e,t);var r=this;!function(e){for(var t=0,n=i.length;t<n;t++)e[i[t]]=""}(r),r.q=r.c="",r.bufferCheckPosition=n.MAX_BUFFER_LENGTH,r.opt=t||{},r.opt.lowercase=r.opt.lowercase||r.opt.lowercasetags,r.looseCase=r.opt.lowercase?"toLowerCase":"toUpperCase",r.tags=[],r.closed=r.closedRoot=r.sawRoot=!1,r.tag=r.error=null,r.strict=!!e,r.noscript=!(!e&&!r.opt.noscript),r.state=w.BEGIN,r.strictEntities=r.opt.strictEntities,r.ENTITIES=r.strictEntities?Object.create(n.XML_ENTITIES):Object.create(n.ENTITIES),r.attribList=[],r.opt.xmlns&&(r.ns=Object.create(l)),r.trackPosition=!1!==r.opt.position,r.trackPosition&&(r.position=r.line=r.column=0),C(r,"onready")}n.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(e){function t(){}return t.prototype=e,new t}),Object.keys||(Object.keys=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}),o.prototype={end:function(){O(this)},write:function(e){var t=this;if(this.error)throw this.error;if(t.closed)return k(t,"Cannot write after close. Assign an onready handler.");if(null===e)return O(t);"object"==typeof e&&(e=e.toString());for(var r=0,o="";o=U(e,r++),t.c=o,o;)switch(t.trackPosition&&(t.position++,"\n"===o?(t.line++,t.column=0):t.column++),t.state){case w.BEGIN:if(t.state=w.BEGIN_WHITESPACE,"\ufeff"===o)continue;j(t,o);continue;case w.BEGIN_WHITESPACE:j(t,o);continue;case w.TEXT:if(t.sawRoot&&!t.closedRoot){for(var a=r-1;o&&"<"!==o&&"&"!==o;)(o=U(e,r++))&&t.trackPosition&&(t.position++,"\n"===o?(t.line++,t.column=0):t.column++);t.textNode+=e.substring(a,r-1)}"<"!==o||t.sawRoot&&t.closedRoot&&!t.strict?(g(o)||t.sawRoot&&!t.closedRoot||N(t,"Text data outside of root node."),"&"===o?t.state=w.TEXT_ENTITY:t.textNode+=o):(t.state=w.OPEN_WAKA,t.startTagPosition=t.position);continue;case w.SCRIPT:"<"===o?t.state=w.SCRIPT_ENDING:t.script+=o;continue;case w.SCRIPT_ENDING:"/"===o?t.state=w.CLOSE_TAG:(t.script+="<"+o,t.state=w.SCRIPT);continue;case w.OPEN_WAKA:if("!"===o)t.state=w.SGML_DECL,t.sgmlDecl="";else if(g(o));else if(m(h,o))t.state=w.OPEN_TAG,t.tagName=o;else if("/"===o)t.state=w.CLOSE_TAG,t.tagName="";else if("?"===o)t.state=w.PROC_INST,t.procInstName=t.procInstBody="";else{if(N(t,"Unencoded <"),t.startTagPosition+1<t.position){var s=t.position-t.startTagPosition;o=new Array(s).join(" ")+o}t.textNode+="<"+o,t.state=w.TEXT}continue;case w.SGML_DECL:"[CDATA["===(t.sgmlDecl+o).toUpperCase()?(S(t,"onopencdata"),t.state=w.CDATA,t.sgmlDecl="",t.cdata=""):t.sgmlDecl+o==="--"?(t.state=w.COMMENT,t.comment="",t.sgmlDecl=""):"DOCTYPE"===(t.sgmlDecl+o).toUpperCase()?(t.state=w.DOCTYPE,(t.doctype||t.sawRoot)&&N(t,"Inappropriately located doctype declaration"),t.doctype="",t.sgmlDecl=""):">"===o?(S(t,"onsgmldeclaration",t.sgmlDecl),t.sgmlDecl="",t.state=w.TEXT):A(o)?(t.state=w.SGML_DECL_QUOTED,t.sgmlDecl+=o):t.sgmlDecl+=o;continue;case w.SGML_DECL_QUOTED:o===t.q&&(t.state=w.SGML_DECL,t.q=""),t.sgmlDecl+=o;continue;case w.DOCTYPE:">"===o?(t.state=w.TEXT,S(t,"ondoctype",t.doctype),t.doctype=!0):(t.doctype+=o,"["===o?t.state=w.DOCTYPE_DTD:A(o)&&(t.state=w.DOCTYPE_QUOTED,t.q=o));continue;case w.DOCTYPE_QUOTED:t.doctype+=o,o===t.q&&(t.q="",t.state=w.DOCTYPE);continue;case w.DOCTYPE_DTD:t.doctype+=o,"]"===o?t.state=w.DOCTYPE:A(o)&&(t.state=w.DOCTYPE_DTD_QUOTED,t.q=o);continue;case w.DOCTYPE_DTD_QUOTED:t.doctype+=o,o===t.q&&(t.state=w.DOCTYPE_DTD,t.q="");continue;case w.COMMENT:"-"===o?t.state=w.COMMENT_ENDING:t.comment+=o;continue;case w.COMMENT_ENDING:"-"===o?(t.state=w.COMMENT_ENDED,t.comment=R(t.opt,t.comment),t.comment&&S(t,"oncomment",t.comment),t.comment=""):(t.comment+="-"+o,t.state=w.COMMENT);continue;case w.COMMENT_ENDED:">"!==o?(N(t,"Malformed comment"),t.comment+="--"+o,t.state=w.COMMENT):t.state=w.TEXT;continue;case w.CDATA:"]"===o?t.state=w.CDATA_ENDING:t.cdata+=o;continue;case w.CDATA_ENDING:"]"===o?t.state=w.CDATA_ENDING_2:(t.cdata+="]"+o,t.state=w.CDATA);continue;case w.CDATA_ENDING_2:">"===o?(t.cdata&&S(t,"oncdata",t.cdata),S(t,"onclosecdata"),t.cdata="",t.state=w.TEXT):"]"===o?t.cdata+="]":(t.cdata+="]]"+o,t.state=w.CDATA);continue;case w.PROC_INST:"?"===o?t.state=w.PROC_INST_ENDING:g(o)?t.state=w.PROC_INST_BODY:t.procInstName+=o;continue;case w.PROC_INST_BODY:if(!t.procInstBody&&g(o))continue;"?"===o?t.state=w.PROC_INST_ENDING:t.procInstBody+=o;continue;case w.PROC_INST_ENDING:">"===o?(S(t,"onprocessinginstruction",{name:t.procInstName,body:t.procInstBody}),t.procInstName=t.procInstBody="",t.state=w.TEXT):(t.procInstBody+="?"+o,t.state=w.PROC_INST_BODY);continue;case w.OPEN_TAG:m(d,o)?t.tagName+=o:(x(t),">"===o?P(t):"/"===o?t.state=w.OPEN_TAG_SLASH:(g(o)||N(t,"Invalid character in tag name"),t.state=w.ATTRIB));continue;case w.OPEN_TAG_SLASH:">"===o?(P(t,!0),B(t)):(N(t,"Forward-slash in opening tag not followed by >"),t.state=w.ATTRIB);continue;case w.ATTRIB:if(g(o))continue;">"===o?P(t):"/"===o?t.state=w.OPEN_TAG_SLASH:m(h,o)?(t.attribName=o,t.attribValue="",t.state=w.ATTRIB_NAME):N(t,"Invalid attribute name");continue;case w.ATTRIB_NAME:"="===o?t.state=w.ATTRIB_VALUE:">"===o?(N(t,"Attribute without value"),t.attribValue=t.attribName,L(t),P(t)):g(o)?t.state=w.ATTRIB_NAME_SAW_WHITE:m(d,o)?t.attribName+=o:N(t,"Invalid attribute name");continue;case w.ATTRIB_NAME_SAW_WHITE:if("="===o)t.state=w.ATTRIB_VALUE;else{if(g(o))continue;N(t,"Attribute without value"),t.tag.attributes[t.attribName]="",t.attribValue="",S(t,"onattribute",{name:t.attribName,value:""}),t.attribName="",">"===o?P(t):m(h,o)?(t.attribName=o,t.state=w.ATTRIB_NAME):(N(t,"Invalid attribute name"),t.state=w.ATTRIB)}continue;case w.ATTRIB_VALUE:if(g(o))continue;A(o)?(t.q=o,t.state=w.ATTRIB_VALUE_QUOTED):(N(t,"Unquoted attribute value"),t.state=w.ATTRIB_VALUE_UNQUOTED,t.attribValue=o);continue;case w.ATTRIB_VALUE_QUOTED:if(o!==t.q){"&"===o?t.state=w.ATTRIB_VALUE_ENTITY_Q:t.attribValue+=o;continue}L(t),t.q="",t.state=w.ATTRIB_VALUE_CLOSED;continue;case w.ATTRIB_VALUE_CLOSED:g(o)?t.state=w.ATTRIB:">"===o?P(t):"/"===o?t.state=w.OPEN_TAG_SLASH:m(h,o)?(N(t,"No whitespace between attributes"),t.attribName=o,t.attribValue="",t.state=w.ATTRIB_NAME):N(t,"Invalid attribute name");continue;case w.ATTRIB_VALUE_UNQUOTED:if(!v(o)){"&"===o?t.state=w.ATTRIB_VALUE_ENTITY_U:t.attribValue+=o;continue}L(t),">"===o?P(t):t.state=w.ATTRIB;continue;case w.CLOSE_TAG:if(t.tagName)">"===o?B(t):m(d,o)?t.tagName+=o:t.script?(t.script+="</"+t.tagName,t.tagName="",t.state=w.SCRIPT):(g(o)||N(t,"Invalid tagname in closing tag"),t.state=w.CLOSE_TAG_SAW_WHITE);else{if(g(o))continue;y(h,o)?t.script?(t.script+="</"+o,t.state=w.SCRIPT):N(t,"Invalid tagname in closing tag."):t.tagName=o}continue;case w.CLOSE_TAG_SAW_WHITE:if(g(o))continue;">"===o?B(t):N(t,"Invalid characters in closing tag");continue;case w.TEXT_ENTITY:case w.ATTRIB_VALUE_ENTITY_Q:case w.ATTRIB_VALUE_ENTITY_U:var c,u;switch(t.state){case w.TEXT_ENTITY:c=w.TEXT,u="textNode";break;case w.ATTRIB_VALUE_ENTITY_Q:c=w.ATTRIB_VALUE_QUOTED,u="attribValue";break;case w.ATTRIB_VALUE_ENTITY_U:c=w.ATTRIB_VALUE_UNQUOTED,u="attribValue"}";"===o?(t[u]+=M(t),t.entity="",t.state=c):m(t.entity.length?p:f,o)?t.entity+=o:(N(t,"Invalid character in entity name"),t[u]+="&"+t.entity+o,t.entity="",t.state=c);continue;default:throw new Error(t,"Unknown state: "+t.state)}return t.position>=t.bufferCheckPosition&&function(e){for(var t=Math.max(n.MAX_BUFFER_LENGTH,10),r=0,o=0,a=i.length;o<a;o++){var s=e[i[o]].length;if(s>t)switch(i[o]){case"textNode":T(e);break;case"cdata":S(e,"oncdata",e.cdata),e.cdata="";break;case"script":S(e,"onscript",e.script),e.script="";break;default:k(e,"Max buffer length exceeded: "+i[o])}r=Math.max(r,s)}var c=n.MAX_BUFFER_LENGTH-r;e.bufferCheckPosition=c+e.position}(t),t},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var e;T(e=this),""!==e.cdata&&(S(e,"oncdata",e.cdata),e.cdata=""),""!==e.script&&(S(e,"onscript",e.script),e.script="")}};try{r=e("stream").Stream}catch(e){r=function(){}}var a=n.EVENTS.filter((function(e){return"error"!==e&&"end"!==e}));function s(e,t){if(!(this instanceof s))return new s(e,t);r.apply(this),this._parser=new o(e,t),this.writable=!0,this.readable=!0;var n=this;this._parser.onend=function(){n.emit("end")},this._parser.onerror=function(e){n.emit("error",e),n._parser.error=null},this._decoder=null,a.forEach((function(e){Object.defineProperty(n,"on"+e,{get:function(){return n._parser["on"+e]},set:function(t){if(!t)return n.removeAllListeners(e),n._parser["on"+e]=t,t;n.on(e,t)},enumerable:!0,configurable:!1})}))}s.prototype=Object.create(r.prototype,{constructor:{value:s}}),s.prototype.write=function(n){if("function"==typeof t&&"function"==typeof t.isBuffer&&t.isBuffer(n)){if(!this._decoder){var r=e("string_decoder").StringDecoder;this._decoder=new r("utf8")}n=this._decoder.write(n)}return this._parser.write(n.toString()),this.emit("data",n),!0},s.prototype.end=function(e){return e&&e.length&&this.write(e),this._parser.end(),!0},s.prototype.on=function(e,t){var n=this;return n._parser["on"+e]||-1===a.indexOf(e)||(n._parser["on"+e]=function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);t.splice(0,0,e),n.emit.apply(n,t)}),r.prototype.on.call(n,e,t)};var c="http://www.w3.org/XML/1998/namespace",u="http://www.w3.org/2000/xmlns/",l={xml:c,xmlns:u},h=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,d=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,f=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,p=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function g(e){return" "===e||"\n"===e||"\r"===e||"\t"===e}function A(e){return'"'===e||"'"===e}function v(e){return">"===e||g(e)}function m(e,t){return e.test(t)}function y(e,t){return!m(e,t)}var b,_,E,w=0;for(var I in n.STATE={BEGIN:w++,BEGIN_WHITESPACE:w++,TEXT:w++,TEXT_ENTITY:w++,OPEN_WAKA:w++,SGML_DECL:w++,SGML_DECL_QUOTED:w++,DOCTYPE:w++,DOCTYPE_QUOTED:w++,DOCTYPE_DTD:w++,DOCTYPE_DTD_QUOTED:w++,COMMENT_STARTING:w++,COMMENT:w++,COMMENT_ENDING:w++,COMMENT_ENDED:w++,CDATA:w++,CDATA_ENDING:w++,CDATA_ENDING_2:w++,PROC_INST:w++,PROC_INST_BODY:w++,PROC_INST_ENDING:w++,OPEN_TAG:w++,OPEN_TAG_SLASH:w++,ATTRIB:w++,ATTRIB_NAME:w++,ATTRIB_NAME_SAW_WHITE:w++,ATTRIB_VALUE:w++,ATTRIB_VALUE_QUOTED:w++,ATTRIB_VALUE_CLOSED:w++,ATTRIB_VALUE_UNQUOTED:w++,ATTRIB_VALUE_ENTITY_Q:w++,ATTRIB_VALUE_ENTITY_U:w++,CLOSE_TAG:w++,CLOSE_TAG_SAW_WHITE:w++,SCRIPT:w++,SCRIPT_ENDING:w++},n.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},n.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(n.ENTITIES).forEach((function(e){var t=n.ENTITIES[e],r="number"==typeof t?String.fromCharCode(t):t;n.ENTITIES[e]=r})),n.STATE)n.STATE[n.STATE[I]]=I;function C(e,t,n){e[t]&&e[t](n)}function S(e,t,n){e.textNode&&T(e),C(e,t,n)}function T(e){e.textNode=R(e.opt,e.textNode),e.textNode&&C(e,"ontext",e.textNode),e.textNode=""}function R(e,t){return e.trim&&(t=t.trim()),e.normalize&&(t=t.replace(/\s+/g," ")),t}function k(e,t){return T(e),e.trackPosition&&(t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c),t=new Error(t),e.error=t,C(e,"onerror",t),e}function O(e){return e.sawRoot&&!e.closedRoot&&N(e,"Unclosed root tag"),e.state!==w.BEGIN&&e.state!==w.BEGIN_WHITESPACE&&e.state!==w.TEXT&&k(e,"Unexpected end"),T(e),e.c="",e.closed=!0,C(e,"onend"),o.call(e,e.strict,e.opt),e}function N(e,t){if("object"!=typeof e||!(e instanceof o))throw new Error("bad call to strictFail");e.strict&&k(e,t)}function x(e){e.strict||(e.tagName=e.tagName[e.looseCase]());var t=e.tags[e.tags.length-1]||e,n=e.tag={name:e.tagName,attributes:{}};e.opt.xmlns&&(n.ns=t.ns),e.attribList.length=0,S(e,"onopentagstart",n)}function D(e,t){var n=e.indexOf(":")<0?["",e]:e.split(":"),r=n[0],i=n[1];return t&&"xmlns"===e&&(r="xmlns",i=""),{prefix:r,local:i}}function L(e){if(e.strict||(e.attribName=e.attribName[e.looseCase]()),-1!==e.attribList.indexOf(e.attribName)||e.tag.attributes.hasOwnProperty(e.attribName))e.attribName=e.attribValue="";else{if(e.opt.xmlns){var t=D(e.attribName,!0),n=t.prefix,r=t.local;if("xmlns"===n)if("xml"===r&&e.attribValue!==c)N(e,"xml: prefix must be bound to "+c+"\nActual: "+e.attribValue);else if("xmlns"===r&&e.attribValue!==u)N(e,"xmlns: prefix must be bound to "+u+"\nActual: "+e.attribValue);else{var i=e.tag,o=e.tags[e.tags.length-1]||e;i.ns===o.ns&&(i.ns=Object.create(o.ns)),i.ns[r]=e.attribValue}e.attribList.push([e.attribName,e.attribValue])}else e.tag.attributes[e.attribName]=e.attribValue,S(e,"onattribute",{name:e.attribName,value:e.attribValue});e.attribName=e.attribValue=""}}function P(e,t){if(e.opt.xmlns){var n=e.tag,r=D(e.tagName);n.prefix=r.prefix,n.local=r.local,n.uri=n.ns[r.prefix]||"",n.prefix&&!n.uri&&(N(e,"Unbound namespace prefix: "+JSON.stringify(e.tagName)),n.uri=r.prefix);var i=e.tags[e.tags.length-1]||e;n.ns&&i.ns!==n.ns&&Object.keys(n.ns).forEach((function(t){S(e,"onopennamespace",{prefix:t,uri:n.ns[t]})}));for(var o=0,a=e.attribList.length;o<a;o++){var s=e.attribList[o],c=s[0],u=s[1],l=D(c,!0),h=l.prefix,d=l.local,f=""===h?"":n.ns[h]||"",p={name:c,value:u,prefix:h,local:d,uri:f};h&&"xmlns"!==h&&!f&&(N(e,"Unbound namespace prefix: "+JSON.stringify(h)),p.uri=h),e.tag.attributes[c]=p,S(e,"onattribute",p)}e.attribList.length=0}e.tag.isSelfClosing=!!t,e.sawRoot=!0,e.tags.push(e.tag),S(e,"onopentag",e.tag),t||(e.noscript||"script"!==e.tagName.toLowerCase()?e.state=w.TEXT:e.state=w.SCRIPT,e.tag=null,e.tagName=""),e.attribName=e.attribValue="",e.attribList.length=0}function B(e){if(!e.tagName)return N(e,"Weird empty close tag."),e.textNode+="</>",void(e.state=w.TEXT);if(e.script){if("script"!==e.tagName)return e.script+="</"+e.tagName+">",e.tagName="",void(e.state=w.SCRIPT);S(e,"onscript",e.script),e.script=""}var t=e.tags.length,n=e.tagName;e.strict||(n=n[e.looseCase]());for(var r=n;t--&&e.tags[t].name!==r;)N(e,"Unexpected close tag");if(t<0)return N(e,"Unmatched closing tag: "+e.tagName),e.textNode+="</"+e.tagName+">",void(e.state=w.TEXT);e.tagName=n;for(var i=e.tags.length;i-- >t;){var o=e.tag=e.tags.pop();e.tagName=e.tag.name,S(e,"onclosetag",e.tagName);var a={};for(var s in o.ns)a[s]=o.ns[s];var c=e.tags[e.tags.length-1]||e;e.opt.xmlns&&o.ns!==c.ns&&Object.keys(o.ns).forEach((function(t){var n=o.ns[t];S(e,"onclosenamespace",{prefix:t,uri:n})}))}0===t&&(e.closedRoot=!0),e.tagName=e.attribValue=e.attribName="",e.attribList.length=0,e.state=w.TEXT}function M(e){var t,n=e.entity,r=n.toLowerCase(),i="";return e.ENTITIES[n]?e.ENTITIES[n]:e.ENTITIES[r]?e.ENTITIES[r]:("#"===(n=r).charAt(0)&&("x"===n.charAt(1)?(n=n.slice(2),i=(t=parseInt(n,16)).toString(16)):(n=n.slice(1),i=(t=parseInt(n,10)).toString(10))),n=n.replace(/^0+/,""),isNaN(t)||i.toLowerCase()!==n?(N(e,"Invalid character entity"),"&"+e.entity+";"):String.fromCodePoint(t))}function j(e,t){"<"===t?(e.state=w.OPEN_WAKA,e.startTagPosition=e.position):g(t)||(N(e,"Non-whitespace before first tag."),e.textNode=t,e.state=w.TEXT)}function U(e,t){var n="";return t<e.length&&(n=e.charAt(t)),n}w=n.STATE,String.fromCodePoint||(b=String.fromCharCode,_=Math.floor,E=function(){var e,t,n=16384,r=[],i=-1,o=arguments.length;if(!o)return"";for(var a="";++i<o;){var s=Number(arguments[i]);if(!isFinite(s)||s<0||s>1114111||_(s)!==s)throw RangeError("Invalid code point: "+s);s<=65535?r.push(s):(e=55296+((s-=65536)>>10),t=s%1024+56320,r.push(e,t)),(i+1===o||r.length>n)&&(a+=b.apply(null,r),r.length=0)}return a},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:E,configurable:!0,writable:!0}):String.fromCodePoint=E)}(void 0===n?this.sax={}:n)}).call(this,e("buffer").Buffer)},{buffer:98,stream:340,string_decoder:341}],340:[function(e,t,n){t.exports=i;var r=e("events").EventEmitter;function i(){r.call(this)}e("inherits")(i,r),i.Readable=e("readable-stream/readable.js"),i.Writable=e("readable-stream/writable.js"),i.Duplex=e("readable-stream/duplex.js"),i.Transform=e("readable-stream/transform.js"),i.PassThrough=e("readable-stream/passthrough.js"),i.Stream=i,i.prototype.pipe=function(e,t){var n=this;function i(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function o(){n.readable&&n.resume&&n.resume()}n.on("data",i),e.on("drain",o),e._isStdio||t&&!1===t.end||(n.on("end",s),n.on("close",c));var a=!1;function s(){a||(a=!0,e.end())}function c(){a||(a=!0,"function"==typeof e.destroy&&e.destroy())}function u(e){if(l(),0===r.listenerCount(this,"error"))throw e}function l(){n.removeListener("data",i),e.removeListener("drain",o),n.removeListener("end",s),n.removeListener("close",c),n.removeListener("error",u),e.removeListener("error",u),n.removeListener("end",l),n.removeListener("close",l),e.removeListener("close",l)}return n.on("error",u),e.on("error",u),n.on("end",l),n.on("close",l),e.on("close",l),e.emit("pipe",n),e}},{events:297,inherits:307,"readable-stream/duplex.js":324,"readable-stream/passthrough.js":333,"readable-stream/readable.js":334,"readable-stream/transform.js":335,"readable-stream/writable.js":336}],341:[function(e,t,n){"use strict";var r=e("safe-buffer").Buffer,i=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=c,this.end=u,t=4;break;case"utf8":this.fillLast=s,t=4;break;case"base64":this.text=l,this.end=h,t=3;break;default:return this.write=d,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function a(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function s(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,""}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function c(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function u(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function l(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function h(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function d(e){return e.toString(this.encoding)}function f(e){return e&&e.length?this.write(e):""}n.StringDecoder=o,o.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},o.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var i=a(t[r]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--r<n||-2===i?0:(i=a(t[r]))>=0?(i>0&&(e.lastNeed=i-2),i):--r<n||-2===i?0:(i=a(t[r]))>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},{"safe-buffer":338}],342:[function(e,t,n){(function(t,r){var i=e("process/browser.js").nextTick,o=Function.prototype.apply,a=Array.prototype.slice,s={},c=0;function u(e,t){this._id=e,this._clearFn=t}n.setTimeout=function(){return new u(o.call(setTimeout,window,arguments),clearTimeout)},n.setInterval=function(){return new u(o.call(setInterval,window,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(e){e.close()},u.prototype.unref=u.prototype.ref=function(){},u.prototype.close=function(){this._clearFn.call(window,this._id)},n.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},n.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},n._unrefActive=n.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n.setImmediate="function"==typeof t?t:function(e){var t=c++,r=!(arguments.length<2)&&a.call(arguments,1);return s[t]=!0,i((function(){s[t]&&(r?e.apply(null,r):e.call(null),n.clearImmediate(t))})),t},n.clearImmediate="function"==typeof r?r:function(e){delete s[e]}}).call(this,e("timers").setImmediate,e("timers").clearImmediate)},{"process/browser.js":319,timers:342}],343:[function(e,t,n){(function(e){function n(t){try{if(!e.localStorage)return!1}catch(e){return!1}var n=e.localStorage[t];return null!=n&&"true"===String(n).toLowerCase()}t.exports=function(e,t){if(n("noDeprecation"))return e;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}}}).call(this,void 0!==__webpack_require__.g?__webpack_require__.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],344:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],345:[function(e,t,n){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],346:[function(e,t,n){(function(t,r){var i=/%[sdj%]/g;n.format=function(e){if(!v(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(s(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,o=r.length,a=String(e).replace(i,(function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}})),c=r[n];n<o;c=r[++n])g(c)||!b(c)?a+=" "+c:a+=" "+s(c);return a},n.deprecate=function(e,i){if(m(r.process))return function(){return n.deprecate(e,i).apply(this,arguments)};if(!0===t.noDeprecation)return e;var o=!1;return function(){if(!o){if(t.throwDeprecation)throw new Error(i);t.traceDeprecation?console.trace(i):console.error(i),o=!0}return e.apply(this,arguments)}};var o,a={};function s(e,t){var r={seen:[],stylize:u};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),p(t)?r.showHidden=t:t&&n._extend(r,t),m(r.showHidden)&&(r.showHidden=!1),m(r.depth)&&(r.depth=2),m(r.colors)&&(r.colors=!1),m(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=c),l(r,e,r.depth)}function c(e,t){var n=s.styles[t];return n?"["+s.colors[n][0]+"m"+e+"["+s.colors[n][1]+"m":e}function u(e,t){return e}function l(e,t,r){if(e.customInspect&&t&&w(t.inspect)&&t.inspect!==n.inspect&&(!t.constructor||t.constructor.prototype!==t)){var i=t.inspect(r,e);return v(i)||(i=l(e,i,r)),i}var o=function(e,t){if(m(t))return e.stylize("undefined","undefined");if(v(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return A(t)?e.stylize(""+t,"number"):p(t)?e.stylize(""+t,"boolean"):g(t)?e.stylize("null","null"):void 0}(e,t);if(o)return o;var a=Object.keys(t),s=function(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(t)),E(t)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return h(t);if(0===a.length){if(w(t)){var c=t.name?": "+t.name:"";return e.stylize("[Function"+c+"]","special")}if(y(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(_(t))return e.stylize(Date.prototype.toString.call(t),"date");if(E(t))return h(t)}var u,b="",I=!1,C=["{","}"];return f(t)&&(I=!0,C=["[","]"]),w(t)&&(b=" [Function"+(t.name?": "+t.name:"")+"]"),y(t)&&(b=" "+RegExp.prototype.toString.call(t)),_(t)&&(b=" "+Date.prototype.toUTCString.call(t)),E(t)&&(b=" "+h(t)),0!==a.length||I&&0!=t.length?r<0?y(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),u=I?function(e,t,n,r,i){for(var o=[],a=0,s=t.length;a<s;++a)R(t,String(a))?o.push(d(e,t,n,r,String(a),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(d(e,t,n,r,i,!0))})),o}(e,t,r,s,a):a.map((function(n){return d(e,t,r,s,n,I)})),e.seen.pop(),function(e,t,n){return e.reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}(u,b,C)):C[0]+b+C[1]}function h(e){return"["+Error.prototype.toString.call(e)+"]"}function d(e,t,n,r,i,o){var a,s,c;if((c=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?s=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(s=e.stylize("[Setter]","special")),R(r,i)||(a="["+i+"]"),s||(e.seen.indexOf(c.value)<0?(s=g(n)?l(e,c.value,null):l(e,c.value,n-1)).indexOf("\n")>-1&&(s=o?s.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),m(a)){if(o&&i.match(/^\d+$/))return s;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function f(e){return Array.isArray(e)}function p(e){return"boolean"==typeof e}function g(e){return null===e}function A(e){return"number"==typeof e}function v(e){return"string"==typeof e}function m(e){return void 0===e}function y(e){return b(e)&&"[object RegExp]"===I(e)}function b(e){return"object"==typeof e&&null!==e}function _(e){return b(e)&&"[object Date]"===I(e)}function E(e){return b(e)&&("[object Error]"===I(e)||e instanceof Error)}function w(e){return"function"==typeof e}function I(e){return Object.prototype.toString.call(e)}function C(e){return e<10?"0"+e.toString(10):e.toString(10)}n.debuglog=function(e){if(m(o)&&(o=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!a[e])if(new RegExp("\\b"+e+"\\b","i").test(o)){var r=t.pid;a[e]=function(){var t=n.format.apply(n,arguments);console.error("%s %d: %s",e,r,t)}}else a[e]=function(){};return a[e]},n.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=f,n.isBoolean=p,n.isNull=g,n.isNullOrUndefined=function(e){return null==e},n.isNumber=A,n.isString=v,n.isSymbol=function(e){return"symbol"==typeof e},n.isUndefined=m,n.isRegExp=y,n.isObject=b,n.isDate=_,n.isError=E,n.isFunction=w,n.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},n.isBuffer=e("./support/isBuffer");var S=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function T(){var e=new Date,t=[C(e.getHours()),C(e.getMinutes()),C(e.getSeconds())].join(":");return[e.getDate(),S[e.getMonth()],t].join(" ")}function R(e,t){return Object.prototype.hasOwnProperty.call(e,t)}n.log=function(){console.log("%s - %s",T(),n.format.apply(n,arguments))},n.inherits=e("inherits"),n._extend=function(e,t){if(!t||!b(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(this,e("_process"),void 0!==__webpack_require__.g?__webpack_require__.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":345,_process:393,inherits:344}],347:[function(e,t,n){(function(){"use strict";n.stripBOM=function(e){return"\ufeff"===e[0]?e.substring(1):e}}).call(this)},{}],348:[function(e,t,n){(function(){"use strict";var t,r,i,o,a,s={}.hasOwnProperty;t=e("xmlbuilder"),r=e("./defaults").defaults,o=function(e){return"string"==typeof e&&(e.indexOf("&")>=0||e.indexOf(">")>=0||e.indexOf("<")>=0)},a=function(e){return"<![CDATA["+i(e)+"]]>"},i=function(e){return e.replace("]]>","]]]]><![CDATA[>")},n.Builder=function(){function e(e){var t,n,i;for(t in this.options={},n=r[.2])s.call(n,t)&&(i=n[t],this.options[t]=i);for(t in e)s.call(e,t)&&(i=e[t],this.options[t]=i)}return e.prototype.buildObject=function(e){var n,i,c,u,l,h;return n=this.options.attrkey,i=this.options.charkey,1===Object.keys(e).length&&this.options.rootName===r[.2].rootName?e=e[l=Object.keys(e)[0]]:l=this.options.rootName,h=this,c=function(e,t){var r,u,l,d,f,p;if("object"!=typeof t)h.options.cdata&&o(t)?e.raw(a(t)):e.txt(t);else if(Array.isArray(t)){for(d in t)if(s.call(t,d))for(f in u=t[d])l=u[f],e=c(e.ele(f),l).up()}else for(f in t)if(s.call(t,f))if(u=t[f],f===n){if("object"==typeof u)for(r in u)p=u[r],e=e.att(r,p)}else if(f===i)e=h.options.cdata&&o(u)?e.raw(a(u)):e.txt(u);else if(Array.isArray(u))for(d in u)s.call(u,d)&&(e="string"==typeof(l=u[d])?h.options.cdata&&o(l)?e.ele(f).raw(a(l)).up():e.ele(f,l).up():c(e.ele(f),l).up());else"object"==typeof u?e=c(e.ele(f),u).up():"string"==typeof u&&h.options.cdata&&o(u)?e=e.ele(f).raw(a(u)).up():(null==u&&(u=""),e=e.ele(f,u.toString()).up());return e},u=t.create(l,this.options.xmldec,this.options.doctype,{headless:this.options.headless,allowSurrogateChars:this.options.allowSurrogateChars}),c(u,e).end(this.options.renderOpts)},e}()}).call(this)},{"./defaults":349,xmlbuilder:385}],349:[function(e,t,n){(function(){n.defaults={.1:{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,emptyTag:""},.2:{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,preserveChildrenOrder:!1,childkey:"$$",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:"\n"},headless:!1,chunkSize:1e4,emptyTag:"",cdata:!1}}}).call(this)},{}],350:[function(e,t,n){(function(){"use strict";var t,r,i,o,a,s,c,u,l=function(e,t){return function(){return e.apply(t,arguments)}},h={}.hasOwnProperty;c=e("sax"),i=e("events"),t=e("./bom"),s=e("./processors"),u=e("timers").setImmediate,r=e("./defaults").defaults,o=function(e){return"object"==typeof e&&null!=e&&0===Object.keys(e).length},a=function(e,t,n){var r,i;for(r=0,i=e.length;r<i;r++)t=(0,e[r])(t,n);return t},n.Parser=function(e){function i(e){var t,i,o;if(this.parseStringPromise=l(this.parseStringPromise,this),this.parseString=l(this.parseString,this),this.reset=l(this.reset,this),this.assignOrPush=l(this.assignOrPush,this),this.processAsync=l(this.processAsync,this),!(this instanceof n.Parser))return new n.Parser(e);for(t in this.options={},i=r[.2])h.call(i,t)&&(o=i[t],this.options[t]=o);for(t in e)h.call(e,t)&&(o=e[t],this.options[t]=o);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(s.normalize)),this.reset()}return function(e,t){for(var n in t)h.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(i,e),i.prototype.processAsync=function(){var e,t;try{return this.remaining.length<=this.options.chunkSize?(e=this.remaining,this.remaining="",this.saxParser=this.saxParser.write(e),this.saxParser.close()):(e=this.remaining.substr(0,this.options.chunkSize),this.remaining=this.remaining.substr(this.options.chunkSize,this.remaining.length),this.saxParser=this.saxParser.write(e),u(this.processAsync))}catch(e){if(t=e,!this.saxParser.errThrown)return this.saxParser.errThrown=!0,this.emit(t)}},i.prototype.assignOrPush=function(e,t,n){return t in e?(e[t]instanceof Array||(e[t]=[e[t]]),e[t].push(n)):this.options.explicitArray?e[t]=[n]:e[t]=n},i.prototype.reset=function(){var e,t,n,r,i;return this.removeAllListeners(),this.saxParser=c.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=(i=this,function(e){if(i.saxParser.resume(),!i.saxParser.errThrown)return i.saxParser.errThrown=!0,i.emit("error",e)}),this.saxParser.onend=function(e){return function(){if(!e.saxParser.ended)return e.saxParser.ended=!0,e.emit("end",e.resultObject)}}(this),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,r=[],e=this.options.attrkey,t=this.options.charkey,this.saxParser.onopentag=function(n){return function(i){var o,s,c,u,l;if((c={})[t]="",!n.options.ignoreAttrs)for(o in l=i.attributes)h.call(l,o)&&(e in c||n.options.mergeAttrs||(c[e]={}),s=n.options.attrValueProcessors?a(n.options.attrValueProcessors,i.attributes[o],o):i.attributes[o],u=n.options.attrNameProcessors?a(n.options.attrNameProcessors,o):o,n.options.mergeAttrs?n.assignOrPush(c,u,s):c[e][u]=s);return c["#name"]=n.options.tagNameProcessors?a(n.options.tagNameProcessors,i.name):i.name,n.options.xmlns&&(c[n.options.xmlnskey]={uri:i.uri,local:i.local}),r.push(c)}}(this),this.saxParser.onclosetag=function(e){return function(){var n,i,s,c,u,l,d,f,p,g;if(l=r.pop(),u=l["#name"],e.options.explicitChildren&&e.options.preserveChildrenOrder||delete l["#name"],!0===l.cdata&&(n=l.cdata,delete l.cdata),p=r[r.length-1],l[t].match(/^\s*$/)&&!n?(i=l[t],delete l[t]):(e.options.trim&&(l[t]=l[t].trim()),e.options.normalize&&(l[t]=l[t].replace(/\s{2,}/g," ").trim()),l[t]=e.options.valueProcessors?a(e.options.valueProcessors,l[t],u):l[t],1===Object.keys(l).length&&t in l&&!e.EXPLICIT_CHARKEY&&(l=l[t])),o(l)&&(l=""!==e.options.emptyTag?e.options.emptyTag:i),null!=e.options.validator&&(g="/"+function(){var e,t,n;for(n=[],e=0,t=r.length;e<t;e++)c=r[e],n.push(c["#name"]);return n}().concat(u).join("/"),function(){var t;try{l=e.options.validator(g,p&&p[u],l)}catch(n){return t=n,e.emit("error",t)}}()),e.options.explicitChildren&&!e.options.mergeAttrs&&"object"==typeof l)if(e.options.preserveChildrenOrder){if(p){for(s in p[e.options.childkey]=p[e.options.childkey]||[],d={},l)h.call(l,s)&&(d[s]=l[s]);p[e.options.childkey].push(d),delete l["#name"],1===Object.keys(l).length&&t in l&&!e.EXPLICIT_CHARKEY&&(l=l[t])}}else c={},e.options.attrkey in l&&(c[e.options.attrkey]=l[e.options.attrkey],delete l[e.options.attrkey]),!e.options.charsAsChildren&&e.options.charkey in l&&(c[e.options.charkey]=l[e.options.charkey],delete l[e.options.charkey]),Object.getOwnPropertyNames(l).length>0&&(c[e.options.childkey]=l),l=c;return r.length>0?e.assignOrPush(p,u,l):(e.options.explicitRoot&&(f=l,(l={})[u]=f),e.resultObject=l,e.saxParser.ended=!0,e.emit("end",e.resultObject))}}(this),n=function(e){return function(n){var i,o;if(o=r[r.length-1])return o[t]+=n,e.options.explicitChildren&&e.options.preserveChildrenOrder&&e.options.charsAsChildren&&(e.options.includeWhiteChars||""!==n.replace(/\\n/g,"").trim())&&(o[e.options.childkey]=o[e.options.childkey]||[],(i={"#name":"__text__"})[t]=n,e.options.normalize&&(i[t]=i[t].replace(/\s{2,}/g," ").trim()),o[e.options.childkey].push(i)),o}}(this),this.saxParser.ontext=n,this.saxParser.oncdata=function(e){var t;if(t=n(e))return t.cdata=!0}},i.prototype.parseString=function(e,n){var r;null!=n&&"function"==typeof n&&(this.on("end",(function(e){return this.reset(),n(null,e)})),this.on("error",(function(e){return this.reset(),n(e)})));try{return""===(e=e.toString()).trim()?(this.emit("end",null),!0):(e=t.stripBOM(e),this.options.async?(this.remaining=e,u(this.processAsync),this.saxParser):this.saxParser.write(e).close())}catch(e){if(r=e,!this.saxParser.errThrown&&!this.saxParser.ended)return this.emit("error",r),this.saxParser.errThrown=!0;if(this.saxParser.ended)throw r}},i.prototype.parseStringPromise=function(e){return new Promise((t=this,function(n,r){return t.parseString(e,(function(e,t){return e?r(e):n(t)}))}));var t},i}(i),n.parseString=function(e,t,r){var i,o;return null!=r?("function"==typeof r&&(i=r),"object"==typeof t&&(o=t)):("function"==typeof t&&(i=t),o={}),new n.Parser(o).parseString(e,i)},n.parseStringPromise=function(e,t){var r;return"object"==typeof t&&(r=t),new n.Parser(r).parseStringPromise(e)}}).call(this)},{"./bom":347,"./defaults":349,"./processors":351,events:297,sax:339,timers:342}],351:[function(e,t,n){(function(){"use strict";var e;e=new RegExp(/(?!xmlns)^.*:/),n.normalize=function(e){return e.toLowerCase()},n.firstCharLowerCase=function(e){return e.charAt(0).toLowerCase()+e.slice(1)},n.stripPrefix=function(t){return t.replace(e,"")},n.parseNumbers=function(e){return isNaN(e)||(e=e%1==0?parseInt(e,10):parseFloat(e)),e},n.parseBooleans=function(e){return/^(?:true|false)$/i.test(e)&&(e="true"===e.toLowerCase()),e}}).call(this)},{}],352:[function(e,t,n){(function(){"use strict";var t,r,i,o,a={}.hasOwnProperty;r=e("./defaults"),t=e("./builder"),i=e("./parser"),o=e("./processors"),n.defaults=r.defaults,n.processors=o,n.ValidationError=function(e){function t(e){this.message=e}return function(e,t){for(var n in t)a.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,Error),t}(),n.Builder=t.Builder,n.Parser=i.Parser,n.parseString=i.parseString,n.parseStringPromise=i.parseStringPromise}).call(this)},{"./builder":348,"./defaults":349,"./parser":350,"./processors":351}],353:[function(e,t,n){(function(){t.exports={Disconnected:1,Preceding:2,Following:4,Contains:8,ContainedBy:16,ImplementationSpecific:32}}).call(this)},{}],354:[function(e,t,n){(function(){t.exports={Element:1,Attribute:2,Text:3,CData:4,EntityReference:5,EntityDeclaration:6,ProcessingInstruction:7,Comment:8,Document:9,DocType:10,DocumentFragment:11,NotationDeclaration:12,Declaration:201,Raw:202,AttributeDeclaration:203,ElementDeclaration:204,Dummy:205}}).call(this)},{}],355:[function(e,t,n){(function(){var e,n,r,i,o,a,s,c=[].slice,u={}.hasOwnProperty;e=function(){var e,t,n,r,i,a;if(a=arguments[0],i=2<=arguments.length?c.call(arguments,1):[],o(Object.assign))Object.assign.apply(null,arguments);else for(e=0,n=i.length;e<n;e++)if(null!=(r=i[e]))for(t in r)u.call(r,t)&&(a[t]=r[t]);return a},o=function(e){return!!e&&"[object Function]"===Object.prototype.toString.call(e)},a=function(e){var t;return!!e&&("function"==(t=typeof e)||"object"===t)},r=function(e){return o(Array.isArray)?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)},i=function(e){var t;if(r(e))return!e.length;for(t in e)if(u.call(e,t))return!1;return!0},s=function(e){var t,n;return a(e)&&(n=Object.getPrototypeOf(e))&&(t=n.constructor)&&"function"==typeof t&&t instanceof t&&Function.prototype.toString.call(t)===Function.prototype.toString.call(Object)},n=function(e){return o(e.valueOf)?e.valueOf():e},t.exports.assign=e,t.exports.isFunction=o,t.exports.isObject=a,t.exports.isArray=r,t.exports.isEmpty=i,t.exports.isPlainObject=s,t.exports.getValue=n}).call(this)},{}],356:[function(e,t,n){(function(){t.exports={None:0,OpenTag:1,InsideTag:2,CloseTag:3}}).call(this)},{}],357:[function(e,t,n){(function(){var n;n=e("./NodeType"),e("./XMLNode"),t.exports=function(){function e(e,t,r){if(this.parent=e,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),null==t)throw new Error("Missing attribute name. "+this.debugInfo(t));this.name=this.stringify.name(t),this.value=this.stringify.attValue(r),this.type=n.Attribute,this.isId=!1,this.schemaTypeInfo=null}return Object.defineProperty(e.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(e.prototype,"ownerElement",{get:function(){return this.parent}}),Object.defineProperty(e.prototype,"textContent",{get:function(){return this.value},set:function(e){return this.value=e||""}}),Object.defineProperty(e.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(e.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(e.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(e.prototype,"specified",{get:function(){return!0}}),e.prototype.clone=function(){return Object.create(this)},e.prototype.toString=function(e){return this.options.writer.attribute(this,this.options.writer.filterOptions(e))},e.prototype.debugInfo=function(e){return null==(e=e||this.name)?"parent: <"+this.parent.name+">":"attribute: {"+e+"}, parent: <"+this.parent.name+">"},e.prototype.isEqualNode=function(e){return e.namespaceURI===this.namespaceURI&&e.prefix===this.prefix&&e.localName===this.localName&&e.value===this.value},e}()}).call(this)},{"./NodeType":354,"./XMLNode":376}],358:[function(e,t,n){(function(){var n,r,i={}.hasOwnProperty;n=e("./NodeType"),r=e("./XMLCharacterData"),t.exports=function(e){function t(e,r){if(t.__super__.constructor.call(this,e),null==r)throw new Error("Missing CDATA text. "+this.debugInfo());this.name="#cdata-section",this.type=n.CData,this.value=this.stringify.cdata(r)}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,e),t.prototype.clone=function(){return Object.create(this)},t.prototype.toString=function(e){return this.options.writer.cdata(this,this.options.writer.filterOptions(e))},t}(r)}).call(this)},{"./NodeType":354,"./XMLCharacterData":359}],359:[function(e,t,n){(function(){var n,r={}.hasOwnProperty;n=e("./XMLNode"),t.exports=function(e){function t(e){t.__super__.constructor.call(this,e),this.value=""}return function(e,t){for(var n in t)r.call(t,n)&&(e[n]=t[n]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),Object.defineProperty(t.prototype,"data",{get:function(){return this.value},set:function(e){return this.value=e||""}}),Object.defineProperty(t.prototype,"length",{get:function(){return this.value.length}}),Object.defineProperty(t.prototype,"textContent",{get:function(){return this.value},set:function(e){return this.value=e||""}}),t.prototype.clone=function(){return Object.create(this)},t.prototype.substringData=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.appendData=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.insertData=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.deleteData=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.replaceData=function(e,t,n){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.isEqualNode=function(e){return!!t.__super__.isEqualNode.apply(this,arguments).isEqualNode(e)&&e.data===this.data},t}(n)}).call(this)},{"./XMLNode":376}],360:[function(e,t,n){(function(){var n,r,i={}.hasOwnProperty;n=e("./NodeType"),r=e("./XMLCharacterData"),t.exports=function(e){function t(e,r){if(t.__super__.constructor.call(this,e),null==r)throw new Error("Missing comment text. "+this.debugInfo());this.name="#comment",this.type=n.Comment,this.value=this.stringify.comment(r)}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,e),t.prototype.clone=function(){return Object.create(this)},t.prototype.toString=function(e){return this.options.writer.comment(this,this.options.writer.filterOptions(e))},t}(r)}).call(this)},{"./NodeType":354,"./XMLCharacterData":359}],361:[function(e,t,n){(function(){var n,r;n=e("./XMLDOMErrorHandler"),r=e("./XMLDOMStringList"),t.exports=function(){function e(){this.defaultParams={"canonical-form":!1,"cdata-sections":!1,comments:!1,"datatype-normalization":!1,"element-content-whitespace":!0,entities:!0,"error-handler":new n,infoset:!0,"validate-if-schema":!1,namespaces:!0,"namespace-declarations":!0,"normalize-characters":!1,"schema-location":"","schema-type":"","split-cdata-sections":!0,validate:!1,"well-formed":!0},this.params=Object.create(this.defaultParams)}return Object.defineProperty(e.prototype,"parameterNames",{get:function(){return new r(Object.keys(this.defaultParams))}}),e.prototype.getParameter=function(e){return this.params.hasOwnProperty(e)?this.params[e]:null},e.prototype.canSetParameter=function(e,t){return!0},e.prototype.setParameter=function(e,t){return null!=t?this.params[e]=t:delete this.params[e]},e}()}).call(this)},{"./XMLDOMErrorHandler":362,"./XMLDOMStringList":364}],362:[function(e,t,n){(function(){t.exports=function(){function e(){}return e.prototype.handleError=function(e){throw new Error(e)},e}()}).call(this)},{}],363:[function(e,t,n){(function(){t.exports=function(){function e(){}return e.prototype.hasFeature=function(e,t){return!0},e.prototype.createDocumentType=function(e,t,n){throw new Error("This DOM method is not implemented.")},e.prototype.createDocument=function(e,t,n){throw new Error("This DOM method is not implemented.")},e.prototype.createHTMLDocument=function(e){throw new Error("This DOM method is not implemented.")},e.prototype.getFeature=function(e,t){throw new Error("This DOM method is not implemented.")},e}()}).call(this)},{}],364:[function(e,t,n){(function(){t.exports=function(){function e(e){this.arr=e||[]}return Object.defineProperty(e.prototype,"length",{get:function(){return this.arr.length}}),e.prototype.item=function(e){return this.arr[e]||null},e.prototype.contains=function(e){return-1!==this.arr.indexOf(e)},e}()}).call(this)},{}],365:[function(e,t,n){(function(){var n,r,i={}.hasOwnProperty;r=e("./XMLNode"),n=e("./NodeType"),t.exports=function(e){function t(e,r,i,o,a,s){if(t.__super__.constructor.call(this,e),null==r)throw new Error("Missing DTD element name. "+this.debugInfo());if(null==i)throw new Error("Missing DTD attribute name. "+this.debugInfo(r));if(!o)throw new Error("Missing DTD attribute type. "+this.debugInfo(r));if(!a)throw new Error("Missing DTD attribute default. "+this.debugInfo(r));if(0!==a.indexOf("#")&&(a="#"+a),!a.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(r));if(s&&!a.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(r));this.elementName=this.stringify.name(r),this.type=n.AttributeDeclaration,this.attributeName=this.stringify.name(i),this.attributeType=this.stringify.dtdAttType(o),s&&(this.defaultValue=this.stringify.dtdAttDefault(s)),this.defaultValueType=a}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,e),t.prototype.toString=function(e){return this.options.writer.dtdAttList(this,this.options.writer.filterOptions(e))},t}(r)}).call(this)},{"./NodeType":354,"./XMLNode":376}],366:[function(e,t,n){(function(){var n,r,i={}.hasOwnProperty;r=e("./XMLNode"),n=e("./NodeType"),t.exports=function(e){function t(e,r,i){if(t.__super__.constructor.call(this,e),null==r)throw new Error("Missing DTD element name. "+this.debugInfo());i||(i="(#PCDATA)"),Array.isArray(i)&&(i="("+i.join(",")+")"),this.name=this.stringify.name(r),this.type=n.ElementDeclaration,this.value=this.stringify.dtdElementValue(i)}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,e),t.prototype.toString=function(e){return this.options.writer.dtdElement(this,this.options.writer.filterOptions(e))},t}(r)}).call(this)},{"./NodeType":354,"./XMLNode":376}],367:[function(e,t,n){(function(){var n,r,i,o={}.hasOwnProperty;i=e("./Utility").isObject,r=e("./XMLNode"),n=e("./NodeType"),t.exports=function(e){function t(e,r,o,a){if(t.__super__.constructor.call(this,e),null==o)throw new Error("Missing DTD entity name. "+this.debugInfo(o));if(null==a)throw new Error("Missing DTD entity value. "+this.debugInfo(o));if(this.pe=!!r,this.name=this.stringify.name(o),this.type=n.EntityDeclaration,i(a)){if(!a.pubID&&!a.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(o));if(a.pubID&&!a.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(o));if(this.internal=!1,null!=a.pubID&&(this.pubID=this.stringify.dtdPubID(a.pubID)),null!=a.sysID&&(this.sysID=this.stringify.dtdSysID(a.sysID)),null!=a.nData&&(this.nData=this.stringify.dtdNData(a.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(o))}else this.value=this.stringify.dtdEntityValue(a),this.internal=!0}return function(e,t){for(var n in t)o.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,e),Object.defineProperty(t.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(t.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(t.prototype,"notationName",{get:function(){return this.nData||null}}),Object.defineProperty(t.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(t.prototype,"xmlEncoding",{get:function(){return null}}),Object.defineProperty(t.prototype,"xmlVersion",{get:function(){return null}}),t.prototype.toString=function(e){return this.options.writer.dtdEntity(this,this.options.writer.filterOptions(e))},t}(r)}).call(this)},{"./NodeType":354,"./Utility":355,"./XMLNode":376}],368:[function(e,t,n){(function(){var n,r,i={}.hasOwnProperty;r=e("./XMLNode"),n=e("./NodeType"),t.exports=function(e){function t(e,r,i){if(t.__super__.constructor.call(this,e),null==r)throw new Error("Missing DTD notation name. "+this.debugInfo(r));if(!i.pubID&&!i.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(r));this.name=this.stringify.name(r),this.type=n.NotationDeclaration,null!=i.pubID&&(this.pubID=this.stringify.dtdPubID(i.pubID)),null!=i.sysID&&(this.sysID=this.stringify.dtdSysID(i.sysID))}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,e),Object.defineProperty(t.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(t.prototype,"systemId",{get:function(){return this.sysID}}),t.prototype.toString=function(e){return this.options.writer.dtdNotation(this,this.options.writer.filterOptions(e))},t}(r)}).call(this)},{"./NodeType":354,"./XMLNode":376}],369:[function(e,t,n){(function(){var n,r,i,o={}.hasOwnProperty;i=e("./Utility").isObject,r=e("./XMLNode"),n=e("./NodeType"),t.exports=function(e){function t(e,r,o,a){var s;t.__super__.constructor.call(this,e),i(r)&&(r=(s=r).version,o=s.encoding,a=s.standalone),r||(r="1.0"),this.type=n.Declaration,this.version=this.stringify.xmlVersion(r),null!=o&&(this.encoding=this.stringify.xmlEncoding(o)),null!=a&&(this.standalone=this.stringify.xmlStandalone(a))}return function(e,t){for(var n in t)o.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,e),t.prototype.toString=function(e){return this.options.writer.declaration(this,this.options.writer.filterOptions(e))},t}(r)}).call(this)},{"./NodeType":354,"./Utility":355,"./XMLNode":376}],370:[function(e,t,n){(function(){var n,r,i,o,a,s,c,u,l={}.hasOwnProperty;u=e("./Utility").isObject,c=e("./XMLNode"),n=e("./NodeType"),r=e("./XMLDTDAttList"),o=e("./XMLDTDEntity"),i=e("./XMLDTDElement"),a=e("./XMLDTDNotation"),s=e("./XMLNamedNodeMap"),t.exports=function(e){function t(e,r,i){var o,a,s,c,l,h;if(t.__super__.constructor.call(this,e),this.type=n.DocType,e.children)for(a=0,s=(c=e.children).length;a<s;a++)if((o=c[a]).type===n.Element){this.name=o.name;break}this.documentObject=e,u(r)&&(r=(l=r).pubID,i=l.sysID),null==i&&(i=(h=[r,i])[0],r=h[1]),null!=r&&(this.pubID=this.stringify.dtdPubID(r)),null!=i&&(this.sysID=this.stringify.dtdSysID(i))}return function(e,t){for(var n in t)l.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,e),Object.defineProperty(t.prototype,"entities",{get:function(){var e,t,r,i,o;for(i={},t=0,r=(o=this.children).length;t<r;t++)(e=o[t]).type!==n.EntityDeclaration||e.pe||(i[e.name]=e);return new s(i)}}),Object.defineProperty(t.prototype,"notations",{get:function(){var e,t,r,i,o;for(i={},t=0,r=(o=this.children).length;t<r;t++)(e=o[t]).type===n.NotationDeclaration&&(i[e.name]=e);return new s(i)}}),Object.defineProperty(t.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(t.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(t.prototype,"internalSubset",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),t.prototype.element=function(e,t){var n;return n=new i(this,e,t),this.children.push(n),this},t.prototype.attList=function(e,t,n,i,o){var a;return a=new r(this,e,t,n,i,o),this.children.push(a),this},t.prototype.entity=function(e,t){var n;return n=new o(this,!1,e,t),this.children.push(n),this},t.prototype.pEntity=function(e,t){var n;return n=new o(this,!0,e,t),this.children.push(n),this},t.prototype.notation=function(e,t){var n;return n=new a(this,e,t),this.children.push(n),this},t.prototype.toString=function(e){return this.options.writer.docType(this,this.options.writer.filterOptions(e))},t.prototype.ele=function(e,t){return this.element(e,t)},t.prototype.att=function(e,t,n,r,i){return this.attList(e,t,n,r,i)},t.prototype.ent=function(e,t){return this.entity(e,t)},t.prototype.pent=function(e,t){return this.pEntity(e,t)},t.prototype.not=function(e,t){return this.notation(e,t)},t.prototype.up=function(){return this.root()||this.documentObject},t.prototype.isEqualNode=function(e){return!!t.__super__.isEqualNode.apply(this,arguments).isEqualNode(e)&&e.name===this.name&&e.publicId===this.publicId&&e.systemId===this.systemId},t}(c)}).call(this)},{"./NodeType":354,"./Utility":355,"./XMLDTDAttList":365,"./XMLDTDElement":366,"./XMLDTDEntity":367,"./XMLDTDNotation":368,"./XMLNamedNodeMap":375,"./XMLNode":376}],371:[function(e,t,n){(function(){var n,r,i,o,a,s,c,u={}.hasOwnProperty;c=e("./Utility").isPlainObject,i=e("./XMLDOMImplementation"),r=e("./XMLDOMConfiguration"),o=e("./XMLNode"),n=e("./NodeType"),s=e("./XMLStringifier"),a=e("./XMLStringWriter"),t.exports=function(e){function t(e){t.__super__.constructor.call(this,null),this.name="#document",this.type=n.Document,this.documentURI=null,this.domConfig=new r,e||(e={}),e.writer||(e.writer=new a),this.options=e,this.stringify=new s(e)}return function(e,t){for(var n in t)u.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,e),Object.defineProperty(t.prototype,"implementation",{value:new i}),Object.defineProperty(t.prototype,"doctype",{get:function(){var e,t,r,i;for(t=0,r=(i=this.children).length;t<r;t++)if((e=i[t]).type===n.DocType)return e;return null}}),Object.defineProperty(t.prototype,"documentElement",{get:function(){return this.rootObject||null}}),Object.defineProperty(t.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(t.prototype,"strictErrorChecking",{get:function(){return!1}}),Object.defineProperty(t.prototype,"xmlEncoding",{get:function(){return 0!==this.children.length&&this.children[0].type===n.Declaration?this.children[0].encoding:null}}),Object.defineProperty(t.prototype,"xmlStandalone",{get:function(){return 0!==this.children.length&&this.children[0].type===n.Declaration&&"yes"===this.children[0].standalone}}),Object.defineProperty(t.prototype,"xmlVersion",{get:function(){return 0!==this.children.length&&this.children[0].type===n.Declaration?this.children[0].version:"1.0"}}),Object.defineProperty(t.prototype,"URL",{get:function(){return this.documentURI}}),Object.defineProperty(t.prototype,"origin",{get:function(){return null}}),Object.defineProperty(t.prototype,"compatMode",{get:function(){return null}}),Object.defineProperty(t.prototype,"characterSet",{get:function(){return null}}),Object.defineProperty(t.prototype,"contentType",{get:function(){return null}}),t.prototype.end=function(e){var t;return t={},e?c(e)&&(t=e,e=this.options.writer):e=this.options.writer,e.document(this,e.filterOptions(t))},t.prototype.toString=function(e){return this.options.writer.document(this,this.options.writer.filterOptions(e))},t.prototype.createElement=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.createDocumentFragment=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.createTextNode=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.createComment=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.createCDATASection=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.createProcessingInstruction=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.createAttribute=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.createEntityReference=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.getElementsByTagName=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.importNode=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.createElementNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.createAttributeNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.getElementsByTagNameNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.getElementById=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.adoptNode=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.normalizeDocument=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.renameNode=function(e,t,n){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.getElementsByClassName=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.createEvent=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.createRange=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.createNodeIterator=function(e,t,n){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.createTreeWalker=function(e,t,n){throw new Error("This DOM method is not implemented."+this.debugInfo())},t}(o)}).call(this)},{"./NodeType":354,"./Utility":355,"./XMLDOMConfiguration":361,"./XMLDOMImplementation":363,"./XMLNode":376,"./XMLStringWriter":381,"./XMLStringifier":382}],372:[function(e,t,n){(function(){var n,r,i,o,a,s,c,u,l,h,d,f,p,g,A,v,m,y,b,_,E,w,I,C={}.hasOwnProperty;I=e("./Utility"),E=I.isObject,_=I.isFunction,w=I.isPlainObject,b=I.getValue,n=e("./NodeType"),f=e("./XMLDocument"),p=e("./XMLElement"),o=e("./XMLCData"),a=e("./XMLComment"),A=e("./XMLRaw"),y=e("./XMLText"),g=e("./XMLProcessingInstruction"),h=e("./XMLDeclaration"),d=e("./XMLDocType"),s=e("./XMLDTDAttList"),u=e("./XMLDTDEntity"),c=e("./XMLDTDElement"),l=e("./XMLDTDNotation"),i=e("./XMLAttribute"),m=e("./XMLStringifier"),v=e("./XMLStringWriter"),r=e("./WriterState"),t.exports=function(){function e(e,t,r){var i;this.name="?xml",this.type=n.Document,e||(e={}),i={},e.writer?w(e.writer)&&(i=e.writer,e.writer=new v):e.writer=new v,this.options=e,this.writer=e.writer,this.writerOptions=this.writer.filterOptions(i),this.stringify=new m(e),this.onDataCallback=t||function(){},this.onEndCallback=r||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return e.prototype.createChildNode=function(e){var t,r,i,o,a,s,c,u;switch(e.type){case n.CData:this.cdata(e.value);break;case n.Comment:this.comment(e.value);break;case n.Element:for(r in i={},c=e.attribs)C.call(c,r)&&(t=c[r],i[r]=t.value);this.node(e.name,i);break;case n.Dummy:this.dummy();break;case n.Raw:this.raw(e.value);break;case n.Text:this.text(e.value);break;case n.ProcessingInstruction:this.instruction(e.target,e.value);break;default:throw new Error("This XML node type is not supported in a JS object: "+e.constructor.name)}for(a=0,s=(u=e.children).length;a<s;a++)o=u[a],this.createChildNode(o),o.type===n.Element&&this.up();return this},e.prototype.dummy=function(){return this},e.prototype.node=function(e,t,n){var r;if(null==e)throw new Error("Missing node name.");if(this.root&&-1===this.currentLevel)throw new Error("Document can only have one root node. "+this.debugInfo(e));return this.openCurrent(),e=b(e),null==t&&(t={}),t=b(t),E(t)||(n=(r=[t,n])[0],t=r[1]),this.currentNode=new p(this,e,t),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,null!=n&&this.text(n),this},e.prototype.element=function(e,t,r){var i,o,a,s,c,u;if(this.currentNode&&this.currentNode.type===n.DocType)this.dtdElement.apply(this,arguments);else if(Array.isArray(e)||E(e)||_(e))for(s=this.options.noValidation,this.options.noValidation=!0,(u=new f(this.options).element("TEMP_ROOT")).element(e),this.options.noValidation=s,o=0,a=(c=u.children).length;o<a;o++)i=c[o],this.createChildNode(i),i.type===n.Element&&this.up();else this.node(e,t,r);return this},e.prototype.attribute=function(e,t){var n,r;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(e));if(null!=e&&(e=b(e)),E(e))for(n in e)C.call(e,n)&&(r=e[n],this.attribute(n,r));else _(t)&&(t=t.apply()),this.options.keepNullAttributes&&null==t?this.currentNode.attribs[e]=new i(this,e,""):null!=t&&(this.currentNode.attribs[e]=new i(this,e,t));return this},e.prototype.text=function(e){var t;return this.openCurrent(),t=new y(this,e),this.onData(this.writer.text(t,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.cdata=function(e){var t;return this.openCurrent(),t=new o(this,e),this.onData(this.writer.cdata(t,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.comment=function(e){var t;return this.openCurrent(),t=new a(this,e),this.onData(this.writer.comment(t,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.raw=function(e){var t;return this.openCurrent(),t=new A(this,e),this.onData(this.writer.raw(t,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.instruction=function(e,t){var n,r,i,o,a;if(this.openCurrent(),null!=e&&(e=b(e)),null!=t&&(t=b(t)),Array.isArray(e))for(n=0,o=e.length;n<o;n++)r=e[n],this.instruction(r);else if(E(e))for(r in e)C.call(e,r)&&(i=e[r],this.instruction(r,i));else _(t)&&(t=t.apply()),a=new g(this,e,t),this.onData(this.writer.processingInstruction(a,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this},e.prototype.declaration=function(e,t,n){var r;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return r=new h(this,e,t,n),this.onData(this.writer.declaration(r,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.doctype=function(e,t,n){if(this.openCurrent(),null==e)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new d(this,t,n),this.currentNode.rootNodeName=e,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},e.prototype.dtdElement=function(e,t){var n;return this.openCurrent(),n=new c(this,e,t),this.onData(this.writer.dtdElement(n,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.attList=function(e,t,n,r,i){var o;return this.openCurrent(),o=new s(this,e,t,n,r,i),this.onData(this.writer.dtdAttList(o,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.entity=function(e,t){var n;return this.openCurrent(),n=new u(this,!1,e,t),this.onData(this.writer.dtdEntity(n,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.pEntity=function(e,t){var n;return this.openCurrent(),n=new u(this,!0,e,t),this.onData(this.writer.dtdEntity(n,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.notation=function(e,t){var n;return this.openCurrent(),n=new l(this,e,t),this.onData(this.writer.dtdNotation(n,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},e.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},e.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},e.prototype.openNode=function(e){var t,i,o,a;if(!e.isOpen){if(this.root||0!==this.currentLevel||e.type!==n.Element||(this.root=e),i="",e.type===n.Element){for(o in this.writerOptions.state=r.OpenTag,i=this.writer.indent(e,this.writerOptions,this.currentLevel)+"<"+e.name,a=e.attribs)C.call(a,o)&&(t=a[o],i+=this.writer.attribute(t,this.writerOptions,this.currentLevel));i+=(e.children?">":"/>")+this.writer.endline(e,this.writerOptions,this.currentLevel),this.writerOptions.state=r.InsideTag}else this.writerOptions.state=r.OpenTag,i=this.writer.indent(e,this.writerOptions,this.currentLevel)+"<!DOCTYPE "+e.rootNodeName,e.pubID&&e.sysID?i+=' PUBLIC "'+e.pubID+'" "'+e.sysID+'"':e.sysID&&(i+=' SYSTEM "'+e.sysID+'"'),e.children?(i+=" [",this.writerOptions.state=r.InsideTag):(this.writerOptions.state=r.CloseTag,i+=">"),i+=this.writer.endline(e,this.writerOptions,this.currentLevel);return this.onData(i,this.currentLevel),e.isOpen=!0}},e.prototype.closeNode=function(e){var t;if(!e.isClosed)return t="",this.writerOptions.state=r.CloseTag,t=e.type===n.Element?this.writer.indent(e,this.writerOptions,this.currentLevel)+"</"+e.name+">"+this.writer.endline(e,this.writerOptions,this.currentLevel):this.writer.indent(e,this.writerOptions,this.currentLevel)+"]>"+this.writer.endline(e,this.writerOptions,this.currentLevel),this.writerOptions.state=r.None,this.onData(t,this.currentLevel),e.isClosed=!0},e.prototype.onData=function(e,t){return this.documentStarted=!0,this.onDataCallback(e,t+1)},e.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},e.prototype.debugInfo=function(e){return null==e?"":"node: <"+e+">"},e.prototype.ele=function(){return this.element.apply(this,arguments)},e.prototype.nod=function(e,t,n){return this.node(e,t,n)},e.prototype.txt=function(e){return this.text(e)},e.prototype.dat=function(e){return this.cdata(e)},e.prototype.com=function(e){return this.comment(e)},e.prototype.ins=function(e,t){return this.instruction(e,t)},e.prototype.dec=function(e,t,n){return this.declaration(e,t,n)},e.prototype.dtd=function(e,t,n){return this.doctype(e,t,n)},e.prototype.e=function(e,t,n){return this.element(e,t,n)},e.prototype.n=function(e,t,n){return this.node(e,t,n)},e.prototype.t=function(e){return this.text(e)},e.prototype.d=function(e){return this.cdata(e)},e.prototype.c=function(e){return this.comment(e)},e.prototype.r=function(e){return this.raw(e)},e.prototype.i=function(e,t){return this.instruction(e,t)},e.prototype.att=function(){return this.currentNode&&this.currentNode.type===n.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},e.prototype.a=function(){return this.currentNode&&this.currentNode.type===n.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},e.prototype.ent=function(e,t){return this.entity(e,t)},e.prototype.pent=function(e,t){return this.pEntity(e,t)},e.prototype.not=function(e,t){return this.notation(e,t)},e}()}).call(this)},{"./NodeType":354,"./Utility":355,"./WriterState":356,"./XMLAttribute":357,"./XMLCData":358,"./XMLComment":360,"./XMLDTDAttList":365,"./XMLDTDElement":366,"./XMLDTDEntity":367,"./XMLDTDNotation":368,"./XMLDeclaration":369,"./XMLDocType":370,"./XMLDocument":371,"./XMLElement":374,"./XMLProcessingInstruction":378,"./XMLRaw":379,"./XMLStringWriter":381,"./XMLStringifier":382,"./XMLText":383}],373:[function(e,t,n){(function(){var n,r,i={}.hasOwnProperty;r=e("./XMLNode"),n=e("./NodeType"),t.exports=function(e){function t(e){t.__super__.constructor.call(this,e),this.type=n.Dummy}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,e),t.prototype.clone=function(){return Object.create(this)},t.prototype.toString=function(e){return""},t}(r)}).call(this)},{"./NodeType":354,"./XMLNode":376}],374:[function(e,t,n){(function(){var n,r,i,o,a,s,c,u,l={}.hasOwnProperty;u=e("./Utility"),c=u.isObject,s=u.isFunction,a=u.getValue,o=e("./XMLNode"),n=e("./NodeType"),r=e("./XMLAttribute"),i=e("./XMLNamedNodeMap"),t.exports=function(e){function t(e,r,i){var o,a,s,c;if(t.__super__.constructor.call(this,e),null==r)throw new Error("Missing element name. "+this.debugInfo());if(this.name=this.stringify.name(r),this.type=n.Element,this.attribs={},this.schemaTypeInfo=null,null!=i&&this.attribute(i),e.type===n.Document&&(this.isRoot=!0,this.documentObject=e,e.rootObject=this,e.children))for(a=0,s=(c=e.children).length;a<s;a++)if((o=c[a]).type===n.DocType){o.name=this.name;break}}return function(e,t){for(var n in t)l.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,e),Object.defineProperty(t.prototype,"tagName",{get:function(){return this.name}}),Object.defineProperty(t.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(t.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(t.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(t.prototype,"id",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(t.prototype,"className",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(t.prototype,"classList",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(t.prototype,"attributes",{get:function(){return this.attributeMap&&this.attributeMap.nodes||(this.attributeMap=new i(this.attribs)),this.attributeMap}}),t.prototype.clone=function(){var e,t,n,r;for(t in(n=Object.create(this)).isRoot&&(n.documentObject=null),n.attribs={},r=this.attribs)l.call(r,t)&&(e=r[t],n.attribs[t]=e.clone());return n.children=[],this.children.forEach((function(e){var t;return(t=e.clone()).parent=n,n.children.push(t)})),n},t.prototype.attribute=function(e,t){var n,i;if(null!=e&&(e=a(e)),c(e))for(n in e)l.call(e,n)&&(i=e[n],this.attribute(n,i));else s(t)&&(t=t.apply()),this.options.keepNullAttributes&&null==t?this.attribs[e]=new r(this,e,""):null!=t&&(this.attribs[e]=new r(this,e,t));return this},t.prototype.removeAttribute=function(e){var t,n,r;if(null==e)throw new Error("Missing attribute name. "+this.debugInfo());if(e=a(e),Array.isArray(e))for(n=0,r=e.length;n<r;n++)t=e[n],delete this.attribs[t];else delete this.attribs[e];return this},t.prototype.toString=function(e){return this.options.writer.element(this,this.options.writer.filterOptions(e))},t.prototype.att=function(e,t){return this.attribute(e,t)},t.prototype.a=function(e,t){return this.attribute(e,t)},t.prototype.getAttribute=function(e){return this.attribs.hasOwnProperty(e)?this.attribs[e].value:null},t.prototype.setAttribute=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.getAttributeNode=function(e){return this.attribs.hasOwnProperty(e)?this.attribs[e]:null},t.prototype.setAttributeNode=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.removeAttributeNode=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.getElementsByTagName=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.getAttributeNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.setAttributeNS=function(e,t,n){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.removeAttributeNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.getAttributeNodeNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.setAttributeNodeNS=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.getElementsByTagNameNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.hasAttribute=function(e){return this.attribs.hasOwnProperty(e)},t.prototype.hasAttributeNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.setIdAttribute=function(e,t){return this.attribs.hasOwnProperty(e)?this.attribs[e].isId:t},t.prototype.setIdAttributeNS=function(e,t,n){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.setIdAttributeNode=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.getElementsByTagName=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.getElementsByTagNameNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.getElementsByClassName=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.isEqualNode=function(e){var n,r,i;if(!t.__super__.isEqualNode.apply(this,arguments).isEqualNode(e))return!1;if(e.namespaceURI!==this.namespaceURI)return!1;if(e.prefix!==this.prefix)return!1;if(e.localName!==this.localName)return!1;if(e.attribs.length!==this.attribs.length)return!1;for(n=r=0,i=this.attribs.length-1;0<=i?r<=i:r>=i;n=0<=i?++r:--r)if(!this.attribs[n].isEqualNode(e.attribs[n]))return!1;return!0},t}(o)}).call(this)},{"./NodeType":354,"./Utility":355,"./XMLAttribute":357,"./XMLNamedNodeMap":375,"./XMLNode":376}],375:[function(e,t,n){(function(){t.exports=function(){function e(e){this.nodes=e}return Object.defineProperty(e.prototype,"length",{get:function(){return Object.keys(this.nodes).length||0}}),e.prototype.clone=function(){return this.nodes=null},e.prototype.getNamedItem=function(e){return this.nodes[e]},e.prototype.setNamedItem=function(e){var t;return t=this.nodes[e.nodeName],this.nodes[e.nodeName]=e,t||null},e.prototype.removeNamedItem=function(e){var t;return t=this.nodes[e],delete this.nodes[e],t||null},e.prototype.item=function(e){return this.nodes[Object.keys(this.nodes)[e]]||null},e.prototype.getNamedItemNS=function(e,t){throw new Error("This DOM method is not implemented.")},e.prototype.setNamedItemNS=function(e){throw new Error("This DOM method is not implemented.")},e.prototype.removeNamedItemNS=function(e,t){throw new Error("This DOM method is not implemented.")},e}()}).call(this)},{}],376:[function(e,t,n){(function(){var n,r,i,o,a,s,c,u,l,h,d,f,p,g,A,v,m,y={}.hasOwnProperty;m=e("./Utility"),v=m.isObject,A=m.isFunction,g=m.isEmpty,p=m.getValue,u=null,i=null,o=null,a=null,s=null,d=null,f=null,h=null,c=null,r=null,l=null,n=null,t.exports=function(){function t(t){this.parent=t,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.value=null,this.children=[],this.baseURI=null,u||(u=e("./XMLElement"),i=e("./XMLCData"),o=e("./XMLComment"),a=e("./XMLDeclaration"),s=e("./XMLDocType"),d=e("./XMLRaw"),f=e("./XMLText"),h=e("./XMLProcessingInstruction"),c=e("./XMLDummy"),r=e("./NodeType"),l=e("./XMLNodeList"),e("./XMLNamedNodeMap"),n=e("./DocumentPosition"))}return Object.defineProperty(t.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty(t.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(t.prototype,"nodeValue",{get:function(){return this.value}}),Object.defineProperty(t.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty(t.prototype,"childNodes",{get:function(){return this.childNodeList&&this.childNodeList.nodes||(this.childNodeList=new l(this.children)),this.childNodeList}}),Object.defineProperty(t.prototype,"firstChild",{get:function(){return this.children[0]||null}}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.children[this.children.length-1]||null}}),Object.defineProperty(t.prototype,"previousSibling",{get:function(){var e;return e=this.parent.children.indexOf(this),this.parent.children[e-1]||null}}),Object.defineProperty(t.prototype,"nextSibling",{get:function(){var e;return e=this.parent.children.indexOf(this),this.parent.children[e+1]||null}}),Object.defineProperty(t.prototype,"ownerDocument",{get:function(){return this.document()||null}}),Object.defineProperty(t.prototype,"textContent",{get:function(){var e,t,n,i,o;if(this.nodeType===r.Element||this.nodeType===r.DocumentFragment){for(o="",t=0,n=(i=this.children).length;t<n;t++)(e=i[t]).textContent&&(o+=e.textContent);return o}return null},set:function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),t.prototype.setParent=function(e){var t,n,r,i,o;for(this.parent=e,e&&(this.options=e.options,this.stringify=e.stringify),o=[],n=0,r=(i=this.children).length;n<r;n++)t=i[n],o.push(t.setParent(this));return o},t.prototype.element=function(e,t,n){var r,i,o,a,s,c,u,l,h,d,f;if(c=null,null===t&&null==n&&(t=(h=[{},null])[0],n=h[1]),null==t&&(t={}),t=p(t),v(t)||(n=(d=[t,n])[0],t=d[1]),null!=e&&(e=p(e)),Array.isArray(e))for(o=0,u=e.length;o<u;o++)i=e[o],c=this.element(i);else if(A(e))c=this.element(e.apply());else if(v(e)){for(s in e)if(y.call(e,s))if(f=e[s],A(f)&&(f=f.apply()),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&0===s.indexOf(this.stringify.convertAttKey))c=this.attribute(s.substr(this.stringify.convertAttKey.length),f);else if(!this.options.separateArrayItems&&Array.isArray(f)&&g(f))c=this.dummy();else if(v(f)&&g(f))c=this.element(s);else if(this.options.keepNullNodes||null!=f)if(!this.options.separateArrayItems&&Array.isArray(f))for(a=0,l=f.length;a<l;a++)i=f[a],(r={})[s]=i,c=this.element(r);else v(f)?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===s.indexOf(this.stringify.convertTextKey)?c=this.element(f):(c=this.element(s)).element(f):c=this.element(s,f);else c=this.dummy()}else c=this.options.keepNullNodes||null!==n?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===e.indexOf(this.stringify.convertTextKey)?this.text(n):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&0===e.indexOf(this.stringify.convertCDataKey)?this.cdata(n):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&0===e.indexOf(this.stringify.convertCommentKey)?this.comment(n):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&0===e.indexOf(this.stringify.convertRawKey)?this.raw(n):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&0===e.indexOf(this.stringify.convertPIKey)?this.instruction(e.substr(this.stringify.convertPIKey.length),n):this.node(e,t,n):this.dummy();if(null==c)throw new Error("Could not create any elements with: "+e+". "+this.debugInfo());return c},t.prototype.insertBefore=function(e,t,n){var r,i,o,a,s;if(null!=e?e.type:void 0)return a=t,(o=e).setParent(this),a?(i=children.indexOf(a),s=children.splice(i),children.push(o),Array.prototype.push.apply(children,s)):children.push(o),o;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(e));return i=this.parent.children.indexOf(this),s=this.parent.children.splice(i),r=this.parent.element(e,t,n),Array.prototype.push.apply(this.parent.children,s),r},t.prototype.insertAfter=function(e,t,n){var r,i,o;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(e));return i=this.parent.children.indexOf(this),o=this.parent.children.splice(i+1),r=this.parent.element(e,t,n),Array.prototype.push.apply(this.parent.children,o),r},t.prototype.remove=function(){var e;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return e=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[e,e-e+1].concat([])),this.parent},t.prototype.node=function(e,t,n){var r,i;return null!=e&&(e=p(e)),t||(t={}),t=p(t),v(t)||(n=(i=[t,n])[0],t=i[1]),r=new u(this,e,t),null!=n&&r.text(n),this.children.push(r),r},t.prototype.text=function(e){var t;return v(e)&&this.element(e),t=new f(this,e),this.children.push(t),this},t.prototype.cdata=function(e){var t;return t=new i(this,e),this.children.push(t),this},t.prototype.comment=function(e){var t;return t=new o(this,e),this.children.push(t),this},t.prototype.commentBefore=function(e){var t,n;return t=this.parent.children.indexOf(this),n=this.parent.children.splice(t),this.parent.comment(e),Array.prototype.push.apply(this.parent.children,n),this},t.prototype.commentAfter=function(e){var t,n;return t=this.parent.children.indexOf(this),n=this.parent.children.splice(t+1),this.parent.comment(e),Array.prototype.push.apply(this.parent.children,n),this},t.prototype.raw=function(e){var t;return t=new d(this,e),this.children.push(t),this},t.prototype.dummy=function(){return new c(this)},t.prototype.instruction=function(e,t){var n,r,i,o,a;if(null!=e&&(e=p(e)),null!=t&&(t=p(t)),Array.isArray(e))for(o=0,a=e.length;o<a;o++)n=e[o],this.instruction(n);else if(v(e))for(n in e)y.call(e,n)&&(r=e[n],this.instruction(n,r));else A(t)&&(t=t.apply()),i=new h(this,e,t),this.children.push(i);return this},t.prototype.instructionBefore=function(e,t){var n,r;return n=this.parent.children.indexOf(this),r=this.parent.children.splice(n),this.parent.instruction(e,t),Array.prototype.push.apply(this.parent.children,r),this},t.prototype.instructionAfter=function(e,t){var n,r;return n=this.parent.children.indexOf(this),r=this.parent.children.splice(n+1),this.parent.instruction(e,t),Array.prototype.push.apply(this.parent.children,r),this},t.prototype.declaration=function(e,t,n){var i,o;return i=this.document(),o=new a(i,e,t,n),0===i.children.length?i.children.unshift(o):i.children[0].type===r.Declaration?i.children[0]=o:i.children.unshift(o),i.root()||i},t.prototype.dtd=function(e,t){var n,i,o,a,c,u,l,h,d;for(n=this.document(),i=new s(n,e,t),o=a=0,u=(h=n.children).length;a<u;o=++a)if(h[o].type===r.DocType)return n.children[o]=i,i;for(o=c=0,l=(d=n.children).length;c<l;o=++c)if(d[o].isRoot)return n.children.splice(o,0,i),i;return n.children.push(i),i},t.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},t.prototype.root=function(){var e;for(e=this;e;){if(e.type===r.Document)return e.rootObject;if(e.isRoot)return e;e=e.parent}},t.prototype.document=function(){var e;for(e=this;e;){if(e.type===r.Document)return e;e=e.parent}},t.prototype.end=function(e){return this.document().end(e)},t.prototype.prev=function(){var e;if((e=this.parent.children.indexOf(this))<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[e-1]},t.prototype.next=function(){var e;if(-1===(e=this.parent.children.indexOf(this))||e===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[e+1]},t.prototype.importDocument=function(e){var t;return(t=e.root().clone()).parent=this,t.isRoot=!1,this.children.push(t),this},t.prototype.debugInfo=function(e){var t,n;return null!=(e=e||this.name)||(null!=(t=this.parent)?t.name:void 0)?null==e?"parent: <"+this.parent.name+">":(null!=(n=this.parent)?n.name:void 0)?"node: <"+e+">, parent: <"+this.parent.name+">":"node: <"+e+">":""},t.prototype.ele=function(e,t,n){return this.element(e,t,n)},t.prototype.nod=function(e,t,n){return this.node(e,t,n)},t.prototype.txt=function(e){return this.text(e)},t.prototype.dat=function(e){return this.cdata(e)},t.prototype.com=function(e){return this.comment(e)},t.prototype.ins=function(e,t){return this.instruction(e,t)},t.prototype.doc=function(){return this.document()},t.prototype.dec=function(e,t,n){return this.declaration(e,t,n)},t.prototype.e=function(e,t,n){return this.element(e,t,n)},t.prototype.n=function(e,t,n){return this.node(e,t,n)},t.prototype.t=function(e){return this.text(e)},t.prototype.d=function(e){return this.cdata(e)},t.prototype.c=function(e){return this.comment(e)},t.prototype.r=function(e){return this.raw(e)},t.prototype.i=function(e,t){return this.instruction(e,t)},t.prototype.u=function(){return this.up()},t.prototype.importXMLBuilder=function(e){return this.importDocument(e)},t.prototype.replaceChild=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.removeChild=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.appendChild=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.hasChildNodes=function(){return 0!==this.children.length},t.prototype.cloneNode=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.normalize=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.isSupported=function(e,t){return!0},t.prototype.hasAttributes=function(){return 0!==this.attribs.length},t.prototype.compareDocumentPosition=function(e){var t,r;return(t=this)===e?0:this.document()!==e.document()?(r=n.Disconnected|n.ImplementationSpecific,Math.random()<.5?r|=n.Preceding:r|=n.Following,r):t.isAncestor(e)?n.Contains|n.Preceding:t.isDescendant(e)?n.Contains|n.Following:t.isPreceding(e)?n.Preceding:n.Following},t.prototype.isSameNode=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.lookupPrefix=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.isDefaultNamespace=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.lookupNamespaceURI=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.isEqualNode=function(e){var t,n,r;if(e.nodeType!==this.nodeType)return!1;if(e.children.length!==this.children.length)return!1;for(t=n=0,r=this.children.length-1;0<=r?n<=r:n>=r;t=0<=r?++n:--n)if(!this.children[t].isEqualNode(e.children[t]))return!1;return!0},t.prototype.getFeature=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.setUserData=function(e,t,n){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.getUserData=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.contains=function(e){return!!e&&(e===this||this.isDescendant(e))},t.prototype.isDescendant=function(e){var t,n,r,i;for(n=0,r=(i=this.children).length;n<r;n++){if(e===(t=i[n]))return!0;if(t.isDescendant(e))return!0}return!1},t.prototype.isAncestor=function(e){return e.isDescendant(this)},t.prototype.isPreceding=function(e){var t,n;return t=this.treePosition(e),n=this.treePosition(this),-1!==t&&-1!==n&&t<n},t.prototype.isFollowing=function(e){var t,n;return t=this.treePosition(e),n=this.treePosition(this),-1!==t&&-1!==n&&t>n},t.prototype.treePosition=function(e){var t,n;return n=0,t=!1,this.foreachTreeNode(this.document(),(function(r){if(n++,!t&&r===e)return t=!0})),t?n:-1},t.prototype.foreachTreeNode=function(e,t){var n,r,i,o,a;for(e||(e=this.document()),r=0,i=(o=e.children).length;r<i;r++){if(a=t(n=o[r]))return a;if(a=this.foreachTreeNode(n,t))return a}},t}()}).call(this)},{"./DocumentPosition":353,"./NodeType":354,"./Utility":355,"./XMLCData":358,"./XMLComment":360,"./XMLDeclaration":369,"./XMLDocType":370,"./XMLDummy":373,"./XMLElement":374,"./XMLNamedNodeMap":375,"./XMLNodeList":377,"./XMLProcessingInstruction":378,"./XMLRaw":379,"./XMLText":383}],377:[function(e,t,n){(function(){t.exports=function(){function e(e){this.nodes=e}return Object.defineProperty(e.prototype,"length",{get:function(){return this.nodes.length||0}}),e.prototype.clone=function(){return this.nodes=null},e.prototype.item=function(e){return this.nodes[e]||null},e}()}).call(this)},{}],378:[function(e,t,n){(function(){var n,r,i={}.hasOwnProperty;n=e("./NodeType"),r=e("./XMLCharacterData"),t.exports=function(e){function t(e,r,i){if(t.__super__.constructor.call(this,e),null==r)throw new Error("Missing instruction target. "+this.debugInfo());this.type=n.ProcessingInstruction,this.target=this.stringify.insTarget(r),this.name=this.target,i&&(this.value=this.stringify.insValue(i))}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,e),t.prototype.clone=function(){return Object.create(this)},t.prototype.toString=function(e){return this.options.writer.processingInstruction(this,this.options.writer.filterOptions(e))},t.prototype.isEqualNode=function(e){return!!t.__super__.isEqualNode.apply(this,arguments).isEqualNode(e)&&e.target===this.target},t}(r)}).call(this)},{"./NodeType":354,"./XMLCharacterData":359}],379:[function(e,t,n){(function(){var n,r,i={}.hasOwnProperty;n=e("./NodeType"),r=e("./XMLNode"),t.exports=function(e){function t(e,r){if(t.__super__.constructor.call(this,e),null==r)throw new Error("Missing raw text. "+this.debugInfo());this.type=n.Raw,this.value=this.stringify.raw(r)}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,e),t.prototype.clone=function(){return Object.create(this)},t.prototype.toString=function(e){return this.options.writer.raw(this,this.options.writer.filterOptions(e))},t}(r)}).call(this)},{"./NodeType":354,"./XMLNode":376}],380:[function(e,t,n){(function(){var n,r,i,o={}.hasOwnProperty;n=e("./NodeType"),i=e("./XMLWriterBase"),r=e("./WriterState"),t.exports=function(e){function t(e,n){this.stream=e,t.__super__.constructor.call(this,n)}return function(e,t){for(var n in t)o.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,e),t.prototype.endline=function(e,n,i){return e.isLastRootNode&&n.state===r.CloseTag?"":t.__super__.endline.call(this,e,n,i)},t.prototype.document=function(e,t){var n,r,i,o,a,s,c,u,l;for(r=i=0,a=(c=e.children).length;i<a;r=++i)(n=c[r]).isLastRootNode=r===e.children.length-1;for(t=this.filterOptions(t),l=[],o=0,s=(u=e.children).length;o<s;o++)n=u[o],l.push(this.writeChildNode(n,t,0));return l},t.prototype.attribute=function(e,n,r){return this.stream.write(t.__super__.attribute.call(this,e,n,r))},t.prototype.cdata=function(e,n,r){return this.stream.write(t.__super__.cdata.call(this,e,n,r))},t.prototype.comment=function(e,n,r){return this.stream.write(t.__super__.comment.call(this,e,n,r))},t.prototype.declaration=function(e,n,r){return this.stream.write(t.__super__.declaration.call(this,e,n,r))},t.prototype.docType=function(e,t,n){var i,o,a,s;if(n||(n=0),this.openNode(e,t,n),t.state=r.OpenTag,this.stream.write(this.indent(e,t,n)),this.stream.write("<!DOCTYPE "+e.root().name),e.pubID&&e.sysID?this.stream.write(' PUBLIC "'+e.pubID+'" "'+e.sysID+'"'):e.sysID&&this.stream.write(' SYSTEM "'+e.sysID+'"'),e.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(e,t,n)),t.state=r.InsideTag,o=0,a=(s=e.children).length;o<a;o++)i=s[o],this.writeChildNode(i,t,n+1);t.state=r.CloseTag,this.stream.write("]")}return t.state=r.CloseTag,this.stream.write(t.spaceBeforeSlash+">"),this.stream.write(this.endline(e,t,n)),t.state=r.None,this.closeNode(e,t,n)},t.prototype.element=function(e,t,i){var a,s,c,u,l,h,d,f,p;for(d in i||(i=0),this.openNode(e,t,i),t.state=r.OpenTag,this.stream.write(this.indent(e,t,i)+"<"+e.name),f=e.attribs)o.call(f,d)&&(a=f[d],this.attribute(a,t,i));if(u=0===(c=e.children.length)?null:e.children[0],0===c||e.children.every((function(e){return(e.type===n.Text||e.type===n.Raw)&&""===e.value})))t.allowEmpty?(this.stream.write(">"),t.state=r.CloseTag,this.stream.write("</"+e.name+">")):(t.state=r.CloseTag,this.stream.write(t.spaceBeforeSlash+"/>"));else if(!t.pretty||1!==c||u.type!==n.Text&&u.type!==n.Raw||null==u.value){for(this.stream.write(">"+this.endline(e,t,i)),t.state=r.InsideTag,l=0,h=(p=e.children).length;l<h;l++)s=p[l],this.writeChildNode(s,t,i+1);t.state=r.CloseTag,this.stream.write(this.indent(e,t,i)+"</"+e.name+">")}else this.stream.write(">"),t.state=r.InsideTag,t.suppressPrettyCount++,this.writeChildNode(u,t,i+1),t.suppressPrettyCount--,t.state=r.CloseTag,this.stream.write("</"+e.name+">");return this.stream.write(this.endline(e,t,i)),t.state=r.None,this.closeNode(e,t,i)},t.prototype.processingInstruction=function(e,n,r){return this.stream.write(t.__super__.processingInstruction.call(this,e,n,r))},t.prototype.raw=function(e,n,r){return this.stream.write(t.__super__.raw.call(this,e,n,r))},t.prototype.text=function(e,n,r){return this.stream.write(t.__super__.text.call(this,e,n,r))},t.prototype.dtdAttList=function(e,n,r){return this.stream.write(t.__super__.dtdAttList.call(this,e,n,r))},t.prototype.dtdElement=function(e,n,r){return this.stream.write(t.__super__.dtdElement.call(this,e,n,r))},t.prototype.dtdEntity=function(e,n,r){return this.stream.write(t.__super__.dtdEntity.call(this,e,n,r))},t.prototype.dtdNotation=function(e,n,r){return this.stream.write(t.__super__.dtdNotation.call(this,e,n,r))},t}(i)}).call(this)},{"./NodeType":354,"./WriterState":356,"./XMLWriterBase":384}],381:[function(e,t,n){(function(){var n,r={}.hasOwnProperty;n=e("./XMLWriterBase"),t.exports=function(e){function t(e){t.__super__.constructor.call(this,e)}return function(e,t){for(var n in t)r.call(t,n)&&(e[n]=t[n]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.document=function(e,t){var n,r,i,o,a;for(t=this.filterOptions(t),o="",r=0,i=(a=e.children).length;r<i;r++)n=a[r],o+=this.writeChildNode(n,t,0);return t.pretty&&o.slice(-t.newline.length)===t.newline&&(o=o.slice(0,-t.newline.length)),o},t}(n)}).call(this)},{"./XMLWriterBase":384}],382:[function(e,t,n){(function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},n={}.hasOwnProperty;t.exports=function(){function t(t){var r,i,o;for(r in this.assertLegalName=e(this.assertLegalName,this),this.assertLegalChar=e(this.assertLegalChar,this),t||(t={}),this.options=t,this.options.version||(this.options.version="1.0"),i=t.stringify||{})n.call(i,r)&&(o=i[r],this[r]=o)}return t.prototype.name=function(e){return this.options.noValidation?e:this.assertLegalName(""+e||"")},t.prototype.text=function(e){return this.options.noValidation?e:this.assertLegalChar(this.textEscape(""+e||""))},t.prototype.cdata=function(e){return this.options.noValidation?e:(e=(e=""+e||"").replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(e))},t.prototype.comment=function(e){if(this.options.noValidation)return e;if((e=""+e||"").match(/--/))throw new Error("Comment text cannot contain double-hypen: "+e);return this.assertLegalChar(e)},t.prototype.raw=function(e){return this.options.noValidation?e:""+e||""},t.prototype.attValue=function(e){return this.options.noValidation?e:this.assertLegalChar(this.attEscape(e=""+e||""))},t.prototype.insTarget=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},t.prototype.insValue=function(e){if(this.options.noValidation)return e;if((e=""+e||"").match(/\?>/))throw new Error("Invalid processing instruction value: "+e);return this.assertLegalChar(e)},t.prototype.xmlVersion=function(e){if(this.options.noValidation)return e;if(!(e=""+e||"").match(/1\.[0-9]+/))throw new Error("Invalid version number: "+e);return e},t.prototype.xmlEncoding=function(e){if(this.options.noValidation)return e;if(!(e=""+e||"").match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+e);return this.assertLegalChar(e)},t.prototype.xmlStandalone=function(e){return this.options.noValidation?e:e?"yes":"no"},t.prototype.dtdPubID=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},t.prototype.dtdSysID=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},t.prototype.dtdElementValue=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},t.prototype.dtdAttType=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},t.prototype.dtdAttDefault=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},t.prototype.dtdEntityValue=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},t.prototype.dtdNData=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},t.prototype.convertAttKey="@",t.prototype.convertPIKey="?",t.prototype.convertTextKey="#text",t.prototype.convertCDataKey="#cdata",t.prototype.convertCommentKey="#comment",t.prototype.convertRawKey="#raw",t.prototype.assertLegalChar=function(e){var t,n;if(this.options.noValidation)return e;if(t="","1.0"===this.options.version){if(t=/[\0-\x08\x0B\f\x0E-\x1F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,n=e.match(t))throw new Error("Invalid character in string: "+e+" at index "+n.index)}else if("1.1"===this.options.version&&(t=/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,n=e.match(t)))throw new Error("Invalid character in string: "+e+" at index "+n.index);return e},t.prototype.assertLegalName=function(e){var t;if(this.options.noValidation)return e;if(this.assertLegalChar(e),t=/^([:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])([\x2D\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/,!e.match(t))throw new Error("Invalid character in name");return e},t.prototype.textEscape=function(e){var t;return this.options.noValidation?e:(t=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,e.replace(t,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;"))},t.prototype.attEscape=function(e){var t;return this.options.noValidation?e:(t=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,e.replace(t,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"))},t}()}).call(this)},{}],383:[function(e,t,n){(function(){var n,r,i={}.hasOwnProperty;n=e("./NodeType"),r=e("./XMLCharacterData"),t.exports=function(e){function t(e,r){if(t.__super__.constructor.call(this,e),null==r)throw new Error("Missing element text. "+this.debugInfo());this.name="#text",this.type=n.Text,this.value=this.stringify.text(r)}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,e),Object.defineProperty(t.prototype,"isElementContentWhitespace",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(t.prototype,"wholeText",{get:function(){var e,t,n;for(n="",t=this.previousSibling;t;)n=t.data+n,t=t.previousSibling;for(n+=this.data,e=this.nextSibling;e;)n+=e.data,e=e.nextSibling;return n}}),t.prototype.clone=function(){return Object.create(this)},t.prototype.toString=function(e){return this.options.writer.text(this,this.options.writer.filterOptions(e))},t.prototype.splitText=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.replaceWholeText=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},t}(r)}).call(this)},{"./NodeType":354,"./XMLCharacterData":359}],384:[function(e,t,n){(function(){var n,r,i,o={}.hasOwnProperty;i=e("./Utility").assign,n=e("./NodeType"),e("./XMLDeclaration"),e("./XMLDocType"),e("./XMLCData"),e("./XMLComment"),e("./XMLElement"),e("./XMLRaw"),e("./XMLText"),e("./XMLProcessingInstruction"),e("./XMLDummy"),e("./XMLDTDAttList"),e("./XMLDTDElement"),e("./XMLDTDEntity"),e("./XMLDTDNotation"),r=e("./WriterState"),t.exports=function(){function e(e){var t,n,r;for(t in e||(e={}),this.options=e,n=e.writer||{})o.call(n,t)&&(r=n[t],this["_"+t]=this[t],this[t]=r)}return e.prototype.filterOptions=function(e){var t,n,o,a,s,c,u,l;return e||(e={}),e=i({},this.options,e),(t={writer:this}).pretty=e.pretty||!1,t.allowEmpty=e.allowEmpty||!1,t.indent=null!=(n=e.indent)?n:"  ",t.newline=null!=(o=e.newline)?o:"\n",t.offset=null!=(a=e.offset)?a:0,t.dontPrettyTextNodes=null!=(s=null!=(c=e.dontPrettyTextNodes)?c:e.dontprettytextnodes)?s:0,t.spaceBeforeSlash=null!=(u=null!=(l=e.spaceBeforeSlash)?l:e.spacebeforeslash)?u:"",!0===t.spaceBeforeSlash&&(t.spaceBeforeSlash=" "),t.suppressPrettyCount=0,t.user={},t.state=r.None,t},e.prototype.indent=function(e,t,n){var r;return!t.pretty||t.suppressPrettyCount?"":t.pretty&&(r=(n||0)+t.offset+1)>0?new Array(r).join(t.indent):""},e.prototype.endline=function(e,t,n){return!t.pretty||t.suppressPrettyCount?"":t.newline},e.prototype.attribute=function(e,t,n){var r;return this.openAttribute(e,t,n),r=" "+e.name+'="'+e.value+'"',this.closeAttribute(e,t,n),r},e.prototype.cdata=function(e,t,n){var i;return this.openNode(e,t,n),t.state=r.OpenTag,i=this.indent(e,t,n)+"<![CDATA[",t.state=r.InsideTag,i+=e.value,t.state=r.CloseTag,i+="]]>"+this.endline(e,t,n),t.state=r.None,this.closeNode(e,t,n),i},e.prototype.comment=function(e,t,n){var i;return this.openNode(e,t,n),t.state=r.OpenTag,i=this.indent(e,t,n)+"\x3c!-- ",t.state=r.InsideTag,i+=e.value,t.state=r.CloseTag,i+=" --\x3e"+this.endline(e,t,n),t.state=r.None,this.closeNode(e,t,n),i},e.prototype.declaration=function(e,t,n){var i;return this.openNode(e,t,n),t.state=r.OpenTag,i=this.indent(e,t,n)+"<?xml",t.state=r.InsideTag,i+=' version="'+e.version+'"',null!=e.encoding&&(i+=' encoding="'+e.encoding+'"'),null!=e.standalone&&(i+=' standalone="'+e.standalone+'"'),t.state=r.CloseTag,i+=t.spaceBeforeSlash+"?>",i+=this.endline(e,t,n),t.state=r.None,this.closeNode(e,t,n),i},e.prototype.docType=function(e,t,n){var i,o,a,s,c;if(n||(n=0),this.openNode(e,t,n),t.state=r.OpenTag,s=this.indent(e,t,n),s+="<!DOCTYPE "+e.root().name,e.pubID&&e.sysID?s+=' PUBLIC "'+e.pubID+'" "'+e.sysID+'"':e.sysID&&(s+=' SYSTEM "'+e.sysID+'"'),e.children.length>0){for(s+=" [",s+=this.endline(e,t,n),t.state=r.InsideTag,o=0,a=(c=e.children).length;o<a;o++)i=c[o],s+=this.writeChildNode(i,t,n+1);t.state=r.CloseTag,s+="]"}return t.state=r.CloseTag,s+=t.spaceBeforeSlash+">",s+=this.endline(e,t,n),t.state=r.None,this.closeNode(e,t,n),s},e.prototype.element=function(e,t,i){var a,s,c,u,l,h,d,f,p,g,A,v,m,y;for(p in i||(i=0),g=!1,A="",this.openNode(e,t,i),t.state=r.OpenTag,A+=this.indent(e,t,i)+"<"+e.name,v=e.attribs)o.call(v,p)&&(a=v[p],A+=this.attribute(a,t,i));if(u=0===(c=e.children.length)?null:e.children[0],0===c||e.children.every((function(e){return(e.type===n.Text||e.type===n.Raw)&&""===e.value})))t.allowEmpty?(A+=">",t.state=r.CloseTag,A+="</"+e.name+">"+this.endline(e,t,i)):(t.state=r.CloseTag,A+=t.spaceBeforeSlash+"/>"+this.endline(e,t,i));else if(!t.pretty||1!==c||u.type!==n.Text&&u.type!==n.Raw||null==u.value){if(t.dontPrettyTextNodes)for(l=0,d=(m=e.children).length;l<d;l++)if(((s=m[l]).type===n.Text||s.type===n.Raw)&&null!=s.value){t.suppressPrettyCount++,g=!0;break}for(A+=">"+this.endline(e,t,i),t.state=r.InsideTag,h=0,f=(y=e.children).length;h<f;h++)s=y[h],A+=this.writeChildNode(s,t,i+1);t.state=r.CloseTag,A+=this.indent(e,t,i)+"</"+e.name+">",g&&t.suppressPrettyCount--,A+=this.endline(e,t,i),t.state=r.None}else A+=">",t.state=r.InsideTag,t.suppressPrettyCount++,g=!0,A+=this.writeChildNode(u,t,i+1),t.suppressPrettyCount--,g=!1,t.state=r.CloseTag,A+="</"+e.name+">"+this.endline(e,t,i);return this.closeNode(e,t,i),A},e.prototype.writeChildNode=function(e,t,r){switch(e.type){case n.CData:return this.cdata(e,t,r);case n.Comment:return this.comment(e,t,r);case n.Element:return this.element(e,t,r);case n.Raw:return this.raw(e,t,r);case n.Text:return this.text(e,t,r);case n.ProcessingInstruction:return this.processingInstruction(e,t,r);case n.Dummy:return"";case n.Declaration:return this.declaration(e,t,r);case n.DocType:return this.docType(e,t,r);case n.AttributeDeclaration:return this.dtdAttList(e,t,r);case n.ElementDeclaration:return this.dtdElement(e,t,r);case n.EntityDeclaration:return this.dtdEntity(e,t,r);case n.NotationDeclaration:return this.dtdNotation(e,t,r);default:throw new Error("Unknown XML node type: "+e.constructor.name)}},e.prototype.processingInstruction=function(e,t,n){var i;return this.openNode(e,t,n),t.state=r.OpenTag,i=this.indent(e,t,n)+"<?",t.state=r.InsideTag,i+=e.target,e.value&&(i+=" "+e.value),t.state=r.CloseTag,i+=t.spaceBeforeSlash+"?>",i+=this.endline(e,t,n),t.state=r.None,this.closeNode(e,t,n),i},e.prototype.raw=function(e,t,n){var i;return this.openNode(e,t,n),t.state=r.OpenTag,i=this.indent(e,t,n),t.state=r.InsideTag,i+=e.value,t.state=r.CloseTag,i+=this.endline(e,t,n),t.state=r.None,this.closeNode(e,t,n),i},e.prototype.text=function(e,t,n){var i;return this.openNode(e,t,n),t.state=r.OpenTag,i=this.indent(e,t,n),t.state=r.InsideTag,i+=e.value,t.state=r.CloseTag,i+=this.endline(e,t,n),t.state=r.None,this.closeNode(e,t,n),i},e.prototype.dtdAttList=function(e,t,n){var i;return this.openNode(e,t,n),t.state=r.OpenTag,i=this.indent(e,t,n)+"<!ATTLIST",t.state=r.InsideTag,i+=" "+e.elementName+" "+e.attributeName+" "+e.attributeType,"#DEFAULT"!==e.defaultValueType&&(i+=" "+e.defaultValueType),e.defaultValue&&(i+=' "'+e.defaultValue+'"'),t.state=r.CloseTag,i+=t.spaceBeforeSlash+">"+this.endline(e,t,n),t.state=r.None,this.closeNode(e,t,n),i},e.prototype.dtdElement=function(e,t,n){var i;return this.openNode(e,t,n),t.state=r.OpenTag,i=this.indent(e,t,n)+"<!ELEMENT",t.state=r.InsideTag,i+=" "+e.name+" "+e.value,t.state=r.CloseTag,i+=t.spaceBeforeSlash+">"+this.endline(e,t,n),t.state=r.None,this.closeNode(e,t,n),i},e.prototype.dtdEntity=function(e,t,n){var i;return this.openNode(e,t,n),t.state=r.OpenTag,i=this.indent(e,t,n)+"<!ENTITY",t.state=r.InsideTag,e.pe&&(i+=" %"),i+=" "+e.name,e.value?i+=' "'+e.value+'"':(e.pubID&&e.sysID?i+=' PUBLIC "'+e.pubID+'" "'+e.sysID+'"':e.sysID&&(i+=' SYSTEM "'+e.sysID+'"'),e.nData&&(i+=" NDATA "+e.nData)),t.state=r.CloseTag,i+=t.spaceBeforeSlash+">"+this.endline(e,t,n),t.state=r.None,this.closeNode(e,t,n),i},e.prototype.dtdNotation=function(e,t,n){var i;return this.openNode(e,t,n),t.state=r.OpenTag,i=this.indent(e,t,n)+"<!NOTATION",t.state=r.InsideTag,i+=" "+e.name,e.pubID&&e.sysID?i+=' PUBLIC "'+e.pubID+'" "'+e.sysID+'"':e.pubID?i+=' PUBLIC "'+e.pubID+'"':e.sysID&&(i+=' SYSTEM "'+e.sysID+'"'),t.state=r.CloseTag,i+=t.spaceBeforeSlash+">"+this.endline(e,t,n),t.state=r.None,this.closeNode(e,t,n),i},e.prototype.openNode=function(e,t,n){},e.prototype.closeNode=function(e,t,n){},e.prototype.openAttribute=function(e,t,n){},e.prototype.closeAttribute=function(e,t,n){},e}()}).call(this)},{"./NodeType":354,"./Utility":355,"./WriterState":356,"./XMLCData":358,"./XMLComment":360,"./XMLDTDAttList":365,"./XMLDTDElement":366,"./XMLDTDEntity":367,"./XMLDTDNotation":368,"./XMLDeclaration":369,"./XMLDocType":370,"./XMLDummy":373,"./XMLElement":374,"./XMLProcessingInstruction":378,"./XMLRaw":379,"./XMLText":383}],385:[function(e,t,n){(function(){var n,r,i,o,a,s,c,u,l,h;h=e("./Utility"),u=h.assign,l=h.isFunction,i=e("./XMLDOMImplementation"),o=e("./XMLDocument"),a=e("./XMLDocumentCB"),c=e("./XMLStringWriter"),s=e("./XMLStreamWriter"),n=e("./NodeType"),r=e("./WriterState"),t.exports.create=function(e,t,n,r){var i,a;if(null==e)throw new Error("Root element needs a name.");return r=u({},t,n,r),a=(i=new o(r)).element(e),r.headless||(i.declaration(r),null==r.pubID&&null==r.sysID||i.dtd(r)),a},t.exports.begin=function(e,t,n){var r;return l(e)&&(t=(r=[e,t])[0],n=r[1],e={}),t?new a(e,t,n):new o(e)},t.exports.stringWriter=function(e){return new c(e)},t.exports.streamWriter=function(e,t){return new s(e,t)},t.exports.implementation=new i,t.exports.nodeType=n,t.exports.writerState=r}).call(this)},{"./NodeType":354,"./Utility":355,"./WriterState":356,"./XMLDOMImplementation":363,"./XMLDocument":371,"./XMLDocumentCB":372,"./XMLStreamWriter":380,"./XMLStringWriter":381}],386:[function(e,t,n){t.exports=function(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var i in n)r.call(n,i)&&(e[i]=n[i])}return e};var r=Object.prototype.hasOwnProperty},{}],387:[function(e,t,n){"use strict";e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string");var r=e("buffer").Buffer,i={sha1:e("./sha"),md5:e("./md5")},o=64,a=r.alloc(o);function s(e,t){var n=i[e=e||"sha1"],s=[];return n||c("algorithm:",e,"is not yet supported"),{update:function(e){return r.isBuffer(e)||(e=r.from(e)),s.push(e),e.length,this},digest:function(e){var i=r.concat(s),c=t?function(e,t,n){r.isBuffer(t)||(t=r.from(t)),r.isBuffer(n)||(n=r.from(n)),t.length>o?t=e(t):t.length<o&&(t=r.concat([t,a],o));for(var i=r.alloc(o),s=r.alloc(o),c=0;c<o;c++)i[c]=54^t[c],s[c]=92^t[c];var u=e(r.concat([i,n]));return e(r.concat([s,u]))}(n,t,i):n(i);return s=null,e?c.toString(e):c}}}function c(){var e=[].slice.call(arguments).join(" ");throw new Error([e,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}a.fill(0),n.createHash=function(e){return s(e)},n.createHmac=function(e,t){return s(e,t)},n.createCredentials=function(){c("sorry,createCredentials is not implemented yet")},n.createCipher=function(){c("sorry,createCipher is not implemented yet")},n.createCipheriv=function(){c("sorry,createCipheriv is not implemented yet")},n.createDecipher=function(){c("sorry,createDecipher is not implemented yet")},n.createDecipheriv=function(){c("sorry,createDecipheriv is not implemented yet")},n.createSign=function(){c("sorry,createSign is not implemented yet")},n.createVerify=function(){c("sorry,createVerify is not implemented yet")},n.createDiffieHellman=function(){c("sorry,createDiffieHellman is not implemented yet")},n.pbkdf2=function(){c("sorry,pbkdf2 is not implemented yet")}},{"./md5":389,"./sha":390,buffer:98,"core-js/modules/es.array.concat":234,"core-js/modules/es.array.fill":235,"core-js/modules/es.array.join":243,"core-js/modules/es.array.slice":246,"core-js/modules/es.object.to-string":254,"core-js/modules/es.regexp.to-string":257}],388:[function(e,t,n){"use strict";e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill");var r=e("buffer").Buffer,i=r.alloc(4);i.fill(0),t.exports={hash:function(e,t,n,o){r.isBuffer(e)||(e=r.from(e));var a=t(function(e,t){if(e.length%4!=0){var n=e.length+(4-e.length%4);e=r.concat([e,i],n)}for(var o=[],a=t?e.readInt32BE:e.readInt32LE,s=0;s<e.length;s+=4)o.push(a.call(e,s));return o}(e,o),8*e.length);return function(e,t,n){for(var i=r.alloc(t),o=n?i.writeInt32BE:i.writeInt32LE,a=0;a<e.length;a++)o.call(i,e[a],4*a,!0);return i}(a,n,o)}}},{buffer:98,"core-js/modules/es.array.concat":234,"core-js/modules/es.array.fill":235}],389:[function(e,t,n){"use strict";var r=e("./helpers");function i(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var n=1732584193,r=-271733879,i=-1732584194,o=271733878,h=0;h<e.length;h+=16){var d=n,f=r,p=i,g=o;n=a(n,r,i,o,e[h+0],7,-680876936),o=a(o,n,r,i,e[h+1],12,-389564586),i=a(i,o,n,r,e[h+2],17,606105819),r=a(r,i,o,n,e[h+3],22,-1044525330),n=a(n,r,i,o,e[h+4],7,-176418897),o=a(o,n,r,i,e[h+5],12,1200080426),i=a(i,o,n,r,e[h+6],17,-1473231341),r=a(r,i,o,n,e[h+7],22,-45705983),n=a(n,r,i,o,e[h+8],7,1770035416),o=a(o,n,r,i,e[h+9],12,-1958414417),i=a(i,o,n,r,e[h+10],17,-42063),r=a(r,i,o,n,e[h+11],22,-1990404162),n=a(n,r,i,o,e[h+12],7,1804603682),o=a(o,n,r,i,e[h+13],12,-40341101),i=a(i,o,n,r,e[h+14],17,-1502002290),n=s(n,r=a(r,i,o,n,e[h+15],22,1236535329),i,o,e[h+1],5,-165796510),o=s(o,n,r,i,e[h+6],9,-1069501632),i=s(i,o,n,r,e[h+11],14,643717713),r=s(r,i,o,n,e[h+0],20,-373897302),n=s(n,r,i,o,e[h+5],5,-701558691),o=s(o,n,r,i,e[h+10],9,38016083),i=s(i,o,n,r,e[h+15],14,-660478335),r=s(r,i,o,n,e[h+4],20,-405537848),n=s(n,r,i,o,e[h+9],5,568446438),o=s(o,n,r,i,e[h+14],9,-1019803690),i=s(i,o,n,r,e[h+3],14,-187363961),r=s(r,i,o,n,e[h+8],20,1163531501),n=s(n,r,i,o,e[h+13],5,-1444681467),o=s(o,n,r,i,e[h+2],9,-51403784),i=s(i,o,n,r,e[h+7],14,1735328473),n=c(n,r=s(r,i,o,n,e[h+12],20,-1926607734),i,o,e[h+5],4,-378558),o=c(o,n,r,i,e[h+8],11,-2022574463),i=c(i,o,n,r,e[h+11],16,1839030562),r=c(r,i,o,n,e[h+14],23,-35309556),n=c(n,r,i,o,e[h+1],4,-1530992060),o=c(o,n,r,i,e[h+4],11,1272893353),i=c(i,o,n,r,e[h+7],16,-155497632),r=c(r,i,o,n,e[h+10],23,-1094730640),n=c(n,r,i,o,e[h+13],4,681279174),o=c(o,n,r,i,e[h+0],11,-358537222),i=c(i,o,n,r,e[h+3],16,-722521979),r=c(r,i,o,n,e[h+6],23,76029189),n=c(n,r,i,o,e[h+9],4,-640364487),o=c(o,n,r,i,e[h+12],11,-421815835),i=c(i,o,n,r,e[h+15],16,530742520),n=u(n,r=c(r,i,o,n,e[h+2],23,-995338651),i,o,e[h+0],6,-198630844),o=u(o,n,r,i,e[h+7],10,1126891415),i=u(i,o,n,r,e[h+14],15,-1416354905),r=u(r,i,o,n,e[h+5],21,-57434055),n=u(n,r,i,o,e[h+12],6,1700485571),o=u(o,n,r,i,e[h+3],10,-1894986606),i=u(i,o,n,r,e[h+10],15,-1051523),r=u(r,i,o,n,e[h+1],21,-2054922799),n=u(n,r,i,o,e[h+8],6,1873313359),o=u(o,n,r,i,e[h+15],10,-30611744),i=u(i,o,n,r,e[h+6],15,-1560198380),r=u(r,i,o,n,e[h+13],21,1309151649),n=u(n,r,i,o,e[h+4],6,-145523070),o=u(o,n,r,i,e[h+11],10,-1120210379),i=u(i,o,n,r,e[h+2],15,718787259),r=u(r,i,o,n,e[h+9],21,-343485551),n=l(n,d),r=l(r,f),i=l(i,p),o=l(o,g)}return Array(n,r,i,o)}function o(e,t,n,r,i,o){return l((a=l(l(t,e),l(r,o)))<<(s=i)|a>>>32-s,n);var a,s}function a(e,t,n,r,i,a,s){return o(t&n|~t&r,e,t,i,a,s)}function s(e,t,n,r,i,a,s){return o(t&r|n&~r,e,t,i,a,s)}function c(e,t,n,r,i,a,s){return o(t^n^r,e,t,i,a,s)}function u(e,t,n,r,i,a,s){return o(n^(t|~r),e,t,i,a,s)}function l(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}t.exports=function(e){return r.hash(e,i,16)}},{"./helpers":388}],390:[function(e,t,n){"use strict";var r=e("./helpers");function i(e,t){e[t>>5]|=128<<24-t%32,e[15+(t+64>>9<<4)]=t;for(var n=Array(80),r=1732584193,i=-271733879,u=-1732584194,l=271733878,h=-1009589776,d=0;d<e.length;d+=16){for(var f=r,p=i,g=u,A=l,v=h,m=0;m<80;m++){n[m]=m<16?e[d+m]:c(n[m-3]^n[m-8]^n[m-14]^n[m-16],1);var y=s(s(c(r,5),o(m,i,u,l)),s(s(h,n[m]),a(m)));h=l,l=u,u=c(i,30),i=r,r=y}r=s(r,f),i=s(i,p),u=s(u,g),l=s(l,A),h=s(h,v)}return Array(r,i,u,l,h)}function o(e,t,n,r){return e<20?t&n|~t&r:e<40?t^n^r:e<60?t&n|t&r|n&r:t^n^r}function a(e){return e<20?1518500249:e<40?1859775393:e<60?-1894007588:-899497514}function s(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function c(e,t){return e<<t|e>>>32-t}t.exports=function(e){return r.hash(e,i,20,!0)}},{"./helpers":388}],391:[function(e,t,n){"use strict";t.exports=function(){return function(){}}},{}],392:[function(e,t,n){(function(n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault")(e("@babel/runtime/helpers/typeof")),i=e("stream").Stream,o=e("../lib/common/utils/isArray").isArray;t.exports.string=function(e){return"string"==typeof e},t.exports.array=o,t.exports.buffer=n.isBuffer,t.exports.writableStream=function(e){return function(e){return e instanceof i}(e)&&"function"==typeof e._write&&"object"===(0,r.default)(e._writableState)}}).call(this,{isBuffer:e("../node_modules/is-buffer/index.js")})},{"../lib/common/utils/isArray":59,"../node_modules/is-buffer/index.js":308,"@babel/runtime/helpers/interopRequireDefault":71,"@babel/runtime/helpers/typeof":72,stream:340}],393:[function(e,t,n){"use strict";var r=e("immediate"),i=t.exports={};function o(){}i.nextTick=r,i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=o,i.addListener=o,i.once=o,i.off=o,i.removeListener=o,i.removeAllListeners=o,i.emit=o,i.prependListener=o,i.prependOnceListener=o,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{immediate:301}],394:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.last-index-of"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.search"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim");var i=r(e("@babel/runtime/helpers/typeof")),o=e("punycode"),a=e("./util");function s(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}n.parse=_,n.resolve=function(e,t){return _(e,!1,!0).resolve(t)},n.resolveObject=function(e,t){return e?_(e,!1,!0).resolveObject(t):t},n.format=function(e){return a.isString(e)&&(e=_(e)),e instanceof s?e.format():s.prototype.format.call(e)},n.Url=s;var c=/^([a-z0-9.+-]+:)/i,u=/:[0-9]*$/,l=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,h=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),d=["'"].concat(h),f=["%","/","?",";","#"].concat(d),p=["/","?","#"],g=/^[+a-z0-9A-Z_-]{0,63}$/,A=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,v={javascript:!0,"javascript:":!0},m={javascript:!0,"javascript:":!0},y={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},b=e("querystring");function _(e,t,n){if(e&&a.isObject(e)&&e instanceof s)return e;var r=new s;return r.parse(e,t,n),r}s.prototype.parse=function(e,t,n){if(!a.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+(0,i.default)(e));var r=e.indexOf("?"),s=-1!==r&&r<e.indexOf("#")?"?":"#",u=e.split(s);u[0]=u[0].replace(/\\/g,"/");var h=e=u.join(s);if(h=h.trim(),!n&&1===e.split("#").length){var _=l.exec(h);if(_)return this.path=h,this.href=h,this.pathname=_[1],_[2]?(this.search=_[2],this.query=t?b.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var E=c.exec(h);if(E){var w=(E=E[0]).toLowerCase();this.protocol=w,h=h.substr(E.length)}if(n||E||h.match(/^\/\/[^@\/]+@[^@\/]+/)){var I="//"===h.substr(0,2);!I||E&&m[E]||(h=h.substr(2),this.slashes=!0)}if(!m[E]&&(I||E&&!y[E])){for(var C,S,T=-1,R=0;R<p.length;R++)-1!==(k=h.indexOf(p[R]))&&(-1===T||k<T)&&(T=k);for(-1!==(S=-1===T?h.lastIndexOf("@"):h.lastIndexOf("@",T))&&(C=h.slice(0,S),h=h.slice(S+1),this.auth=decodeURIComponent(C)),T=-1,R=0;R<f.length;R++){var k;-1!==(k=h.indexOf(f[R]))&&(-1===T||k<T)&&(T=k)}-1===T&&(T=h.length),this.host=h.slice(0,T),h=h.slice(T),this.parseHost(),this.hostname=this.hostname||"";var O="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!O)for(var N=this.hostname.split("."),x=(R=0,N.length);R<x;R++){var D=N[R];if(D&&!D.match(g)){for(var L="",P=0,B=D.length;P<B;P++)D.charCodeAt(P)>127?L+="x":L+=D[P];if(!L.match(g)){var M=N.slice(0,R),j=N.slice(R+1),U=D.match(A);U&&(M.push(U[1]),j.unshift(U[2])),j.length&&(h="/"+j.join(".")+h),this.hostname=M.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),O||(this.hostname=o.toASCII(this.hostname));var F=this.port?":"+this.port:"",Q=this.hostname||"";this.host=Q+F,this.href+=this.host,O&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==h[0]&&(h="/"+h))}if(!v[w])for(R=0,x=d.length;R<x;R++){var G=d[R];if(-1!==h.indexOf(G)){var q=encodeURIComponent(G);q===G&&(q=escape(G)),h=h.split(G).join(q)}}var V=h.indexOf("#");-1!==V&&(this.hash=h.substr(V),h=h.slice(0,V));var K=h.indexOf("?");if(-1!==K?(this.search=h.substr(K),this.query=h.substr(K+1),t&&(this.query=b.parse(this.query)),h=h.slice(0,K)):t&&(this.search="",this.query={}),h&&(this.pathname=h),y[w]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){F=this.pathname||"";var H=this.search||"";this.path=F+H}return this.href=this.format(),this},s.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,o="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&a.isObject(this.query)&&Object.keys(this.query).length&&(o=b.stringify(this.query));var s=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||y[t])&&!1!==i?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),t+i+(n=n.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(s=s.replace("#","%23"))+r},s.prototype.resolve=function(e){return this.resolveObject(_(e,!1,!0)).format()},s.prototype.resolveObject=function(e){if(a.isString(e)){var t=new s;t.parse(e,!1,!0),e=t}for(var n=new s,r=Object.keys(this),i=0;i<r.length;i++){var o=r[i];n[o]=this[o]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var c=Object.keys(e),u=0;u<c.length;u++){var l=c[u];"protocol"!==l&&(n[l]=e[l])}return y[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!y[e.protocol]){for(var h=Object.keys(e),d=0;d<h.length;d++){var f=h[d];n[f]=e[f]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||m[e.protocol])n.pathname=e.pathname;else{for(var p=(e.pathname||"").split("/");p.length&&!(e.host=p.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),n.pathname=p.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var g=n.pathname||"",A=n.search||"";n.path=g+A}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var v=n.pathname&&"/"===n.pathname.charAt(0),b=e.host||e.pathname&&"/"===e.pathname.charAt(0),_=b||v||n.host&&e.pathname,E=_,w=n.pathname&&n.pathname.split("/")||[],I=(p=e.pathname&&e.pathname.split("/")||[],n.protocol&&!y[n.protocol]);if(I&&(n.hostname="",n.port=null,n.host&&(""===w[0]?w[0]=n.host:w.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===p[0]?p[0]=e.host:p.unshift(e.host)),e.host=null),_=_&&(""===p[0]||""===w[0])),b)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,w=p;else if(p.length)w||(w=[]),w.pop(),w=w.concat(p),n.search=e.search,n.query=e.query;else if(!a.isNullOrUndefined(e.search))return I&&(n.hostname=n.host=w.shift(),(k=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=k.shift(),n.host=n.hostname=k.shift())),n.search=e.search,n.query=e.query,a.isNull(n.pathname)&&a.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!w.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var C=w.slice(-1)[0],S=(n.host||e.host||w.length>1)&&("."===C||".."===C)||""===C,T=0,R=w.length;R>=0;R--)"."===(C=w[R])?w.splice(R,1):".."===C?(w.splice(R,1),T++):T&&(w.splice(R,1),T--);if(!_&&!E)for(;T--;T)w.unshift("..");!_||""===w[0]||w[0]&&"/"===w[0].charAt(0)||w.unshift(""),S&&"/"!==w.join("/").substr(-1)&&w.push("");var k,O=""===w[0]||w[0]&&"/"===w[0].charAt(0);return I&&(n.hostname=n.host=O?"":w.length?w.shift():"",(k=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=k.shift(),n.host=n.hostname=k.shift())),(_=_||n.host&&w.length)&&!O&&w.unshift(""),w.length?n.pathname=w.join("/"):(n.pathname=null,n.path=null),a.isNull(n.pathname)&&a.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},s.prototype.parseHost=function(){var e=this.host,t=u.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},{"./util":395,"@babel/runtime/helpers/interopRequireDefault":71,"@babel/runtime/helpers/typeof":72,"core-js/modules/es.array.concat":234,"core-js/modules/es.array.index-of":241,"core-js/modules/es.array.join":243,"core-js/modules/es.array.last-index-of":244,"core-js/modules/es.array.slice":246,"core-js/modules/es.array.splice":248,"core-js/modules/es.object.keys":253,"core-js/modules/es.regexp.exec":256,"core-js/modules/es.string.match":260,"core-js/modules/es.string.replace":261,"core-js/modules/es.string.search":262,"core-js/modules/es.string.split":263,"core-js/modules/es.string.trim":265,punycode:320,querystring:323}],395:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault")(e("@babel/runtime/helpers/typeof"));t.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"===(0,r.default)(e)&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},{"@babel/runtime/helpers/interopRequireDefault":71,"@babel/runtime/helpers/typeof":72}],396:[function(e,t,n){"use strict";e("core-js/modules/es.number.constructor"),n.encodeURIComponent=function(e){try{return encodeURIComponent(e)}catch(t){return e}},n.escape=e("escape-html"),n.timestamp=function(e){if(e){var t=e;return"string"==typeof t&&(t=Number(t)),10===String(e).length&&(t*=1e3),new Date(t)}return Math.round(Date.now()/1e3)}},{"core-js/modules/es.number.constructor":250,"escape-html":296}],397:[function(e,t,n){(function(t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.join"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise");var o=i(e("@babel/runtime/helpers/typeof")),a=e("util"),s=e("url"),c=e("http"),u=e("https"),l=e("debug")("urllib"),h=e("humanize-ms"),d=0,f=Math.pow(2,31)-10,p=/^https?:\/\//i;function g(e,t){return void 0===e?t:e}function A(e,t){return function(n,r,i){if(n)return t(n);e({data:r,status:i.statusCode,headers:i.headers,res:i})}}n.TIMEOUTS=[h("300s"),h("300s")];var v=["json","text"];n.request=function(e,t,r){return 2===arguments.length&&"function"==typeof t&&(r=t,t=null),"function"==typeof r?n.requestWithCallback(e,t,r):new Promise((function(r,i){n.requestWithCallback(e,t,A(r,i))}))},n.requestWithCallback=function(i,A,m){if(!i||"string"!=typeof i&&"object"!==(0,o.default)(i)){var y=a.format("expect request url to be a string or a http request options, but got %j",i);throw new Error(y)}2===arguments.length&&"function"==typeof A&&(m=A,A=null),d>=f&&(d=0);var b=++d;(A=A||{}).requestUrls=A.requestUrls||[];var _={requestId:b,url:i,args:A,ctx:A.ctx};A.emitter&&A.emitter.emit("request",_),A.timeout=A.timeout||n.TIMEOUTS,A.maxRedirects=A.maxRedirects||10,A.streaming=A.streaming||A.customResponse;var E,w=Date.now();"string"==typeof i?(p.test(i)||(i="http://"+i),E=s.parse(i)):E=i;var I=(A.type||A.method||E.method||"GET").toUpperCase(),C=E.port||80,S=c,T=g(A.agent,n.agent),R=A.fixJSONCtlChars;"https:"===E.protocol&&(S=u,T=g(A.httpsAgent,n.httpsAgent),E.port||(C=443));var k={host:E.hostname||E.host||"localhost",path:E.path||"/",method:I,port:C,agent:T,headers:A.headers||{},lookup:A.lookup};Array.isArray(A.timeout)?k.requestTimeout=A.timeout[A.timeout.length-1]:void 0!==A.timeout&&(k.requestTimeout=A.timeout);for(var O=["pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","secureProtocol","secureOptions"],N=0;N<O.length;N++){var x=O[N];A.hasOwnProperty(x)&&(k[x]=A[x])}!1!==k.rejectUnauthorized||k.hasOwnProperty("secureOptions")||(k.secureOptions=e("constants").SSL_OP_NO_TLSv1_2);var D=A.auth||E.auth;D&&(k.auth=D);var L=A.content||A.data,P="GET"===I||"HEAD"===I||A.dataAsQueryString;if(!A.content&&L&&"string"!=typeof L&&!r.isBuffer(L))if(P)L=A.nestedQuerystring?qs.stringify(L):querystring.stringify(L);else{var B=k.headers["Content-Type"]||k.headers["content-type"];B||(B="json"===A.contentType?"application/json":"application/x-www-form-urlencoded",k.headers["Content-Type"]=B),L="application/json"===parseContentType(B).type?JSON.stringify(L):A.nestedQuerystring?qs.stringify(L):querystring.stringify(L)}P&&L&&(k.path+=(E.query?"&":"?")+L,L=null);var M=0;if(L){var j=L.length;r.isBuffer(L)||(j=r.byteLength(L)),M=k.headers["Content-Length"]=j}"json"===A.dataType&&(k.headers.Accept="application/json"),"function"==typeof A.beforeRequest&&A.beforeRequest(k);var U=null,F=null,Q=null,G=!1,q=!1,V=0,K=-1,H=!1,W="",z="",Y=null;function J(){U&&(clearTimeout(U),U=null)}function X(){F&&(clearTimeout(F),F=null)}function Z(e,r,o){if(X(),!m)return console.warn("[urllib:warn] [%s] [%s] [worker:%s] %s %s callback twice!!!",Date(),b,t.pid,k.method,i),void(e&&console.warn("[urllib:warn] [%s] [%s] [worker:%s] %s: %s\nstack: %s",Date(),b,t.pid,e.name,e.message,e.stack));var a=m;m=null;var s={};if(o&&(K=o.statusCode,s=o.headers),401===K&&s["www-authenticate"]&&(!A.headers||!A.headers.Authorization)&&A.digestAuth){var c=s["www-authenticate"];if(c.indexOf("Digest ")>=0)return l("Request#%d %s: got digest auth header WWW-Authenticate: %s",b,i,c),A.headers=A.headers||{},A.headers.Authorization=digestAuthHeader(k.method,k.path,c,A.digestAuth),l("Request#%d %s: auth with digest header: %s",b,i,A.headers.Authorization),o.headers["set-cookie"]&&(A.headers.Cookie=o.headers["set-cookie"].join(";")),n.requestWithCallback(i,A,a)}var u=Date.now()-w;Y&&(Y.contentDownload=u),l("[%sms] done, %s bytes HTTP %s %s %s %s, keepAliveSocket: %s, timing: %j",u,V,K,k.method,k.host,k.path,q,Y);var h={status:K,statusCode:K,headers:s,size:V,aborted:H,rt:u,keepAliveSocket:q,data:r,requestUrls:A.requestUrls,timing:Y,remoteAddress:W,remotePort:z};if(e){var d="";T&&"function"==typeof T.getCurrentStatus&&(d=", agent status: "+JSON.stringify(T.getCurrentStatus())),e.message+=", "+k.method+" "+i+" "+K+" (connected: "+G+", keepalive socket: "+q+d+")\nheaders: "+JSON.stringify(s),e.data=r,e.path=k.path,e.status=K,e.headers=s,e.res=h}a(e,r,A.streaming?o:h),A.emitter&&(_.url=i,_.socket=re&&re.connection,_.options=k,_.size=M,A.emitter.emit("response",{requestId:b,error:e,ctx:A.ctx,req:_,res:h}))}function $(e){var t=null;if(A.followRedirect&&statuses.redirect[e.statusCode]){A._followRedirectCount=(A._followRedirectCount||0)+1;var r=e.headers.location;if(r){if(!(A._followRedirectCount>A.maxRedirects)){var o=A.formatRedirectUrl?A.formatRedirectUrl(i,r):s.resolve(i,r);l("Request#%d %s: `redirected` from %s to %s",b,k.path,i,o),X(),A.headers&&A.headers.Host&&p.test(r)&&(A.headers.Host=null);var a=m;return m=null,n.requestWithCallback(o,A,a),{redirect:!0,error:null}}(t=new Error("Exceeded maxRedirects. Probably stuck in a redirect loop "+i)).name="MaxRedirectError"}else(t=new Error("Got statusCode "+e.statusCode+" but cannot resolve next location from headers")).name="FollowRedirectError"}return{redirect:!1,error:t}}function ee(e,t,n){return n(null,t,e.headers["content-encoding"])}A.timing&&(Y={queuing:0,dnslookup:0,connected:0,requestSent:0,waiting:0,contentDownload:0}),A.gzip&&(k.headers["Accept-Encoding"]||k.headers["accept-encoding"]||(k.headers["Accept-Encoding"]="gzip"));var te,ne,re,ie=A.writeStream;function oe(e){var t;if(Y&&(Y.waiting=Date.now()-w),l("Request#%d %s `req response` event emit: status %d, headers: %j",b,i,e.statusCode,e.headers),A.streaming)return(t=$(e)).redirect?void e.resume():t.error?(e.resume(),Z(t.error,null,e)):Z(null,null,e);if(e.on("close",(function(){l("Request#%d %s: `res close` event emit, total size %d",b,i,V)})),e.on("error",(function(){l("Request#%d %s: `res error` event emit, total size %d",b,i,V)})),e.on("aborted",(function(){H=!0,l("Request#%d %s: `res aborted` event emit, total size %d",b,i,V)})),ie)return(t=$(e)).redirect?void e.resume():t.error?(e.resume(),ie.end(),Z(t.error,null,e)):(!1===A.consumeWriteStream?e.on("end",Z.bind(null,null,null,e)):isNode010||isNode012?first([[ie,"close"],[e,"aborted"]],(function(t,n,r){l("Request#%d %s: writeStream or res %s event emitted",b,i,r),Z(Q||null,null,e)})):ie.on("close",(function(){l("Request#%d %s: writeStream close event emitted",b,i),Z(Q||null,null,e)})),e.pipe(ie));var n=[];e.on("data",(function(e){l("Request#%d %s: `res data` event emit, size %d",b,i,e.length),V+=e.length,n.push(e)})),e.on("end",(function(){var t=r.concat(n,V);if(l("Request#%d %s: `res end` event emit, total size %d, _dumped: %s",b,i,V,e._dumped),Q)return Z(Q,t,e);var o=$(e);if(o.error)return Z(o.error,t,e);o.redirect||ee(e,t,(function(n,r,o){if(n)return Z(n,t,e);if(!o&&v.indexOf(A.dataType)>=0){try{r=decodeBodyByCharset(r,e)}catch(t){return l("decodeBodyByCharset error: %s",t),Z(null,r,e)}if("json"===A.dataType)if(0===V)r=null;else{var a=parseJSON(r,R);a.error?n=a.error:r=a.data}}H&&l("Request#%d %s: Remote socket was terminated before `response.end()` was called",b,i),Z(n,r,e)}))}))}function ae(){l("Connect timer ticking, timeout: %d",te),U=setTimeout((function(){U=null,-1===K&&(K=-2);var e="Connect timeout for "+te+"ms",t="ConnectionTimeoutError";re.socket||(t="SocketAssignTimeoutError",e+=", working sockets is full"),(Q=new Error(e)).name=t,Q.requestId=b,l("ConnectTimeout: Request#%d %s %s: %s, connected: %s",b,i,Q.name,e,G),ce()}),te)}function se(){l("Response timer ticking, timeout: %d",ne),F=setTimeout((function(){F=null;var e="Response timeout for "+ne+"ms";(Q=new Error(e)).name="ResponseTimeoutError",Q.requestId=b,l("ResponseTimeout: Request#%d %s %s: %s, connected: %s",b,i,Q.name,e,G),ce()}),ne)}l("Request#%d %s %s with headers %j, options.path: %s",b,I,i,k.headers,k.path),A.requestUrls.push(i),Array.isArray(A.timeout)?(te=h(A.timeout[0]),ne=h(A.timeout[1])):te=ne=h(A.timeout),l("ConnectTimeout: %d, ResponseTimeout: %d",te,ne),k.mode=A.mode?A.mode:"";try{re=S.request(k,oe)}catch(e){return Z(e)}function ce(){l("Request#%d %s abort, connected: %s",b,i,G),re.socket||(Q.noSocket=!0,Z(Q)),re.abort()}return"undefined"==typeof window?ae():re.on("requestTimeout",(function(){-1===K&&(K=-2),(Q=new Error("Connect timeout for "+te+"ms")).name="ConnectionTimeoutError",Q.requestId=b,ce()})),Y&&re.on("finish",(function(){Y.requestSent=Date.now()-w})),re.once("socket",(function(e){Y&&(Y.queuing=Date.now()-w),isNode010&&e.socket&&(e=e.socket);var t=e.readyState;if("opening"===t)return e.once("lookup",(function(e,t,n){l("Request#%d %s lookup: %s, %s, %s",b,i,e,t,n),Y&&(Y.dnslookup=Date.now()-w),t&&(W=t)})),void e.once("connect",(function(){Y&&(Y.connected=Date.now()-w),J(),se(),l("Request#%d %s new socket connected",b,i),G=!0,W||(W=e.remoteAddress),z=e.remotePort}));l("Request#%d %s reuse socket connected, readyState: %s",b,i,t),G=!0,q=!0,W||(W=e.remoteAddress),z=e.remotePort,J(),se()})),re.on("error",(function(e){"Error"!==e.name&&"TypeError"!==e.name||(e.name=G?"ResponseError":"RequestError"),e.message+=' (req "error")',l("Request#%d %s `req error` event emit, %s: %s",b,i,e.name,e.message),Z(Q||e)})),ie&&ie.once("error",(function(e){e.message+=' (writeStream "error")',Q=e,l("Request#%d %s `writeStream error` event emit, %s: %s",b,i,e.name,e.message),ce()})),A.stream?(A.stream.pipe(re),A.stream.once("error",(function(e){e.message+=' (stream "error")',Q=e,l("Request#%d %s `readStream error` event emit, %s: %s",b,i,e.name,e.message),ce()}))):re.end(L),re.requestId=b,re}}).call(this,e("_process"),e("buffer").Buffer)},{"@babel/runtime/helpers/interopRequireDefault":71,"@babel/runtime/helpers/typeof":72,_process:393,buffer:98,constants:100,"core-js/modules/es.array.concat":234,"core-js/modules/es.array.index-of":241,"core-js/modules/es.array.join":243,"core-js/modules/es.function.name":249,"core-js/modules/es.object.to-string":254,"core-js/modules/es.promise":255,debug:391,http:79,https:298,"humanize-ms":299,url:394,util:346}]},{},[1])(1)},module.exports=f()},8640:e=>{const t=(e,t)=>new Promise(((n,r)=>{t||(t=[]),t.push(((e,t)=>e?r(e):n(t))),e.apply(null,t)})),n=e=>{if(null===e||"object"!=typeof e)return e;if(Array.isArray(e)){let t=[];for(const r of e)t.push(n(r));return t}{let t={};const r=Object.keys(e);for(const i of r)t[i]=n(e[i]);return t}},r=async e=>{const t=e.exponential?e.interval*e.factor:e.interval;t&&await new Promise((n=>setTimeout(n,t+e.jitter)))};e.exports=async(e,i=[],o={})=>{const a=o.retriesMax||3;let s=o.interval||0;const c=o.jitter?Math.floor(Math.random()*o.jitter)+1:0,u=!Object.prototype.hasOwnProperty.call(o,"exponential")||o.exponential,l=o.factor||2,h="function"==typeof o.onAttemptFail?o.onAttemptFail:r;for(let r=0;r<a;r++)try{if(o.isCb){return await t(e,n(i))}return await e.apply(null,i)}catch(e){if(a===r+1||Object.prototype.hasOwnProperty.call(e,"retryable")&&!e.retryable)throw e;if(!await h({error:e,currentRetry:r,retriesMax:a,interval:s,exponential:u,factor:l,jitter:c})&&"function"==typeof o.onAttemptFail)return}}},9644:(e,t,n)=>{e.exports=n(5644)},353:(e,t,n)=>{"use strict";var r=n(3044),i=n(6955),o=n(8030),a=n(7948),s=n(1875),c=n(842),u=n(8618);e.exports=function(e){return new Promise((function(t,l){var h=e.data,d=e.headers;r.isFormData(h)&&delete d["Content-Type"];var f=new XMLHttpRequest;if(e.auth){var p=e.auth.username||"",g=e.auth.password||"";d.Authorization="Basic "+btoa(p+":"+g)}var A=a(e.baseURL,e.url);if(f.open(e.method.toUpperCase(),o(A,e.params,e.paramsSerializer),!0),f.timeout=e.timeout,f.onreadystatechange=function(){if(f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in f?s(f.getAllResponseHeaders()):null,r={data:e.responseType&&"text"!==e.responseType?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:n,config:e,request:f};i(t,l,r),f=null}},f.onabort=function(){f&&(l(u("Request aborted",e,"ECONNABORTED",f)),f=null)},f.onerror=function(){l(u("Network Error",e,null,f)),f=null},f.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),l(u(t,e,"ECONNABORTED",f)),f=null},r.isStandardBrowserEnv()){var v=n(2233),m=(e.withCredentials||c(A))&&e.xsrfCookieName?v.read(e.xsrfCookieName):void 0;m&&(d[e.xsrfHeaderName]=m)}if("setRequestHeader"in f&&r.forEach(d,(function(e,t){void 0===h&&"content-type"===t.toLowerCase()?delete d[t]:f.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(f.withCredentials=!!e.withCredentials),e.responseType)try{f.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&f.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&f.upload&&f.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){f&&(f.abort(),l(e),f=null)})),void 0===h&&(h=null),f.send(h)}))}},5644:(e,t,n)=>{"use strict";var r=n(3044),i=n(3644),o=n(2215),a=n(2937);function s(e){var t=new o(e),n=i(o.prototype.request,t);return r.extend(n,o.prototype,t),r.extend(n,t),n}var c=s(n(1439));c.Axios=o,c.create=function(e){return s(a(c.defaults,e))},c.Cancel=n(6714),c.CancelToken=n(4089),c.isCancel=n(8041),c.all=function(e){return Promise.all(e)},c.spread=n(783),e.exports=c,e.exports.default=c},6714:e=>{"use strict";function t(e){this.message=e}t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,e.exports=t},4089:(e,t,n)=>{"use strict";var r=n(6714);function i(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var e;return{token:new i((function(t){e=t})),cancel:e}},e.exports=i},8041:e=>{"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},2215:(e,t,n)=>{"use strict";var r=n(3044),i=n(8030),o=n(946),a=n(6895),s=n(2937);function c(e){this.defaults=e,this.interceptors={request:new o,response:new o}}c.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=s(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[a,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)n=n.then(t.shift(),t.shift());return n},c.prototype.getUri=function(e){return e=s(this.defaults,e),i(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){c.prototype[e]=function(t,n){return this.request(r.merge(n||{},{method:e,url:t}))}})),r.forEach(["post","put","patch"],(function(e){c.prototype[e]=function(t,n,i){return this.request(r.merge(i||{},{method:e,url:t,data:n}))}})),e.exports=c},946:(e,t,n)=>{"use strict";var r=n(3044);function i(){this.handlers=[]}i.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=i},7948:(e,t,n)=>{"use strict";var r=n(9192),i=n(8762);e.exports=function(e,t){return e&&!r(t)?i(e,t):t}},8618:(e,t,n)=>{"use strict";var r=n(1935);e.exports=function(e,t,n,i,o){var a=new Error(e);return r(a,t,n,i,o)}},6895:(e,t,n)=>{"use strict";var r=n(3044),i=n(8556),o=n(8041),a=n(1439);function s(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return s(e),e.headers=e.headers||{},e.data=i(e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||a.adapter)(e).then((function(t){return s(e),t.data=i(t.data,t.headers,e.transformResponse),t}),(function(t){return o(t)||(s(e),t&&t.response&&(t.response.data=i(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},1935:e=>{"use strict";e.exports=function(e,t,n,r,i){return e.config=t,n&&(e.code=n),e.request=r,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},2937:(e,t,n)=>{"use strict";var r=n(3044);e.exports=function(e,t){t=t||{};var n={},i=["url","method","params","data"],o=["headers","auth","proxy"],a=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];r.forEach(i,(function(e){void 0!==t[e]&&(n[e]=t[e])})),r.forEach(o,(function(i){r.isObject(t[i])?n[i]=r.deepMerge(e[i],t[i]):void 0!==t[i]?n[i]=t[i]:r.isObject(e[i])?n[i]=r.deepMerge(e[i]):void 0!==e[i]&&(n[i]=e[i])})),r.forEach(a,(function(r){void 0!==t[r]?n[r]=t[r]:void 0!==e[r]&&(n[r]=e[r])}));var s=i.concat(o).concat(a),c=Object.keys(t).filter((function(e){return-1===s.indexOf(e)}));return r.forEach(c,(function(r){void 0!==t[r]?n[r]=t[r]:void 0!==e[r]&&(n[r]=e[r])})),n}},6955:(e,t,n)=>{"use strict";var r=n(8618);e.exports=function(e,t,n){var i=n.config.validateStatus;!i||i(n.status)?e(n):t(r("Request failed with status code "+n.status,n.config,null,n.request,n))}},8556:(e,t,n)=>{"use strict";var r=n(3044);e.exports=function(e,t,n){return r.forEach(n,(function(n){e=n(e,t)})),e}},1439:(e,t,n)=>{"use strict";var r=n(3044),i=n(8868),o={"Content-Type":"application/x-www-form-urlencoded"};function a(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var s,c={adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(s=n(353)),s),transformRequest:[function(e,t){return i(t,"Accept"),i(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(a(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)?(a(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};c.headers={common:{Accept:"application/json, text/plain, */*"}},r.forEach(["delete","get","head"],(function(e){c.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){c.headers[e]=r.merge(o)})),e.exports=c},3644:e=>{"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},8030:(e,t,n)=>{"use strict";var r=n(3044);function i(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(r.isURLSearchParams(t))o=t.toString();else{var a=[];r.forEach(t,(function(e,t){null!=e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),a.push(i(t)+"="+i(e))})))})),o=a.join("&")}if(o){var s=e.indexOf("#");-1!==s&&(e=e.slice(0,s)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}},8762:e=>{"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},2233:(e,t,n)=>{"use strict";var r=n(3044);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,i,o,a){var s=[];s.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(i)&&s.push("path="+i),r.isString(o)&&s.push("domain="+o),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},9192:e=>{"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},842:(e,t,n)=>{"use strict";var r=n(3044);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=i(window.location.href),function(t){var n=r.isString(t)?i(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},8868:(e,t,n)=>{"use strict";var r=n(3044);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},1875:(e,t,n)=>{"use strict";var r=n(3044),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,o,a={};return e?(r.forEach(e.split("\n"),(function(e){if(o=e.indexOf(":"),t=r.trim(e.substr(0,o)).toLowerCase(),n=r.trim(e.substr(o+1)),t){if(a[t]&&i.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([n]):a[t]?a[t]+", "+n:n}})),a):a}},783:e=>{"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},3044:(e,t,n)=>{"use strict";var r=n(3644),i=Object.prototype.toString;function o(e){return"[object Array]"===i.call(e)}function a(e){return void 0===e}function s(e){return null!==e&&"object"==typeof e}function c(e){return"[object Function]"===i.call(e)}function u(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),o(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}e.exports={isArray:o,isArrayBuffer:function(e){return"[object ArrayBuffer]"===i.call(e)},isBuffer:function(e){return null!==e&&!a(e)&&null!==e.constructor&&!a(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:s,isUndefined:a,isDate:function(e){return"[object Date]"===i.call(e)},isFile:function(e){return"[object File]"===i.call(e)},isBlob:function(e){return"[object Blob]"===i.call(e)},isFunction:c,isStream:function(e){return s(e)&&c(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:u,merge:function e(){var t={};function n(n,r){"object"==typeof t[r]&&"object"==typeof n?t[r]=e(t[r],n):t[r]=n}for(var r=0,i=arguments.length;r<i;r++)u(arguments[r],n);return t},deepMerge:function e(){var t={};function n(n,r){"object"==typeof t[r]&&"object"==typeof n?t[r]=e(t[r],n):t[r]="object"==typeof n?e({},n):n}for(var r=0,i=arguments.length;r<i;r++)u(arguments[r],n);return t},extend:function(e,t,n){return u(t,(function(t,i){e[i]=n&&"function"==typeof t?r(t,n):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},2699:e=>{"use strict";var t,n="object"==typeof Reflect?Reflect:null,r=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise((function(n,r){function i(n){e.removeListener(t,o),r(n)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}g(e,t,o,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&g(e,"error",t,n)}(e,i,{once:!0})}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var a=10;function s(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function u(e,t,n,r){var i,o,a,u;if(s(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),a=o[t]),void 0===a)a=o[t]=n,++e._eventsCount;else if("function"==typeof a?a=o[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(i=c(e))>0&&a.length>i&&!a.warned){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=a.length,u=l,console&&console.warn&&console.warn(u)}return e}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=l.bind(r);return i.listener=n,r.wrapFn=i,i}function d(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):p(i,i.length)}function f(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function p(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function g(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(o){r.once&&e.removeEventListener(t,i),n(o)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");a=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return c(this)},o.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var c=o[e];if(void 0===c)return!1;if("function"==typeof c)r(c,this,t);else{var u=c.length,l=p(c,u);for(n=0;n<u;++n)r(l[n],this,t)}return!0},o.prototype.addListener=function(e,t){return u(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return u(this,e,t,!0)},o.prototype.once=function(e,t){return s(t),this.on(e,h(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,h(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,r,i,o,a;if(s(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},o.prototype.listeners=function(e){return d(this,e,!0)},o.prototype.rawListeners=function(e){return d(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):f.call(e,t)},o.prototype.listenerCount=f,o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},2775:(module,exports,__webpack_require__)=>{var __WEBPACK_AMD_DEFINE_RESULT__;(function(){"use strict";var ERROR="input is invalid type",WINDOW="object"==typeof window,root=WINDOW?window:{};root.JS_MD5_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&"object"==typeof self,NODE_JS=!root.JS_MD5_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node;NODE_JS?root=__webpack_require__.g:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_MD5_NO_COMMON_JS&&module.exports,AMD=__webpack_require__.amdO,ARRAY_BUFFER=!root.JS_MD5_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,HEX_CHARS="0123456789abcdef".split(""),EXTRA=[128,32768,8388608,-2147483648],SHIFT=[0,8,16,24],OUTPUT_TYPES=["hex","array","digest","buffer","arrayBuffer","base64"],BASE64_ENCODE_CHAR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),blocks=[],buffer8;if(ARRAY_BUFFER){var buffer=new ArrayBuffer(68);buffer8=new Uint8Array(buffer),blocks=new Uint32Array(buffer)}!root.JS_MD5_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!ARRAY_BUFFER||!root.JS_MD5_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});var createOutputMethod=function(e){return function(t){return new Md5(!0).update(t)[e]()}},createMethod=function(){var e=createOutputMethod("hex");NODE_JS&&(e=nodeWrap(e)),e.create=function(){return new Md5},e.update=function(t){return e.create().update(t)};for(var t=0;t<OUTPUT_TYPES.length;++t){var n=OUTPUT_TYPES[t];e[n]=createOutputMethod(n)}return e},nodeWrap=function(method){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),nodeMethod=function(e){if("string"==typeof e)return crypto.createHash("md5").update(e,"utf8").digest("hex");if(null==e)throw ERROR;return e.constructor===ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||ArrayBuffer.isView(e)||e.constructor===Buffer?crypto.createHash("md5").update(new Buffer(e)).digest("hex"):method(e)};return nodeMethod};function Md5(e){if(e)blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks,this.buffer8=buffer8;else if(ARRAY_BUFFER){var t=new ArrayBuffer(68);this.buffer8=new Uint8Array(t),this.blocks=new Uint32Array(t)}else this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}Md5.prototype.update=function(e){if(!this.finalized){var t,n=typeof e;if("string"!==n){if("object"!==n)throw ERROR;if(null===e)throw ERROR;if(ARRAY_BUFFER&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||ARRAY_BUFFER&&ArrayBuffer.isView(e)))throw ERROR;t=!0}for(var r,i,o=0,a=e.length,s=this.blocks,c=this.buffer8;o<a;){if(this.hashed&&(this.hashed=!1,s[0]=s[16],s[16]=s[1]=s[2]=s[3]=s[4]=s[5]=s[6]=s[7]=s[8]=s[9]=s[10]=s[11]=s[12]=s[13]=s[14]=s[15]=0),t)if(ARRAY_BUFFER)for(i=this.start;o<a&&i<64;++o)c[i++]=e[o];else for(i=this.start;o<a&&i<64;++o)s[i>>2]|=e[o]<<SHIFT[3&i++];else if(ARRAY_BUFFER)for(i=this.start;o<a&&i<64;++o)(r=e.charCodeAt(o))<128?c[i++]=r:r<2048?(c[i++]=192|r>>6,c[i++]=128|63&r):r<55296||r>=57344?(c[i++]=224|r>>12,c[i++]=128|r>>6&63,c[i++]=128|63&r):(r=65536+((1023&r)<<10|1023&e.charCodeAt(++o)),c[i++]=240|r>>18,c[i++]=128|r>>12&63,c[i++]=128|r>>6&63,c[i++]=128|63&r);else for(i=this.start;o<a&&i<64;++o)(r=e.charCodeAt(o))<128?s[i>>2]|=r<<SHIFT[3&i++]:r<2048?(s[i>>2]|=(192|r>>6)<<SHIFT[3&i++],s[i>>2]|=(128|63&r)<<SHIFT[3&i++]):r<55296||r>=57344?(s[i>>2]|=(224|r>>12)<<SHIFT[3&i++],s[i>>2]|=(128|r>>6&63)<<SHIFT[3&i++],s[i>>2]|=(128|63&r)<<SHIFT[3&i++]):(r=65536+((1023&r)<<10|1023&e.charCodeAt(++o)),s[i>>2]|=(240|r>>18)<<SHIFT[3&i++],s[i>>2]|=(128|r>>12&63)<<SHIFT[3&i++],s[i>>2]|=(128|r>>6&63)<<SHIFT[3&i++],s[i>>2]|=(128|63&r)<<SHIFT[3&i++]);this.lastByteIndex=i,this.bytes+=i-this.start,i>=64?(this.start=i-64,this.hash(),this.hashed=!0):this.start=i}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Md5.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[t>>2]|=EXTRA[3&t],t>=56&&(this.hashed||this.hash(),e[0]=e[16],e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.bytes<<3,e[15]=this.hBytes<<3|this.bytes>>>29,this.hash()}},Md5.prototype.hash=function(){var e,t,n,r,i,o,a=this.blocks;this.first?t=((t=((e=((e=a[0]-680876937)<<7|e>>>25)-271733879<<0)^(n=((n=(-271733879^(r=((r=(-1732584194^2004318071&e)+a[1]-117830708)<<12|r>>>20)+e<<0)&(-271733879^e))+a[2]-1126478375)<<17|n>>>15)+r<<0)&(r^e))+a[3]-1316259209)<<22|t>>>10)+n<<0:(e=this.h0,t=this.h1,n=this.h2,t=((t+=((e=((e+=((r=this.h3)^t&(n^r))+a[0]-680876936)<<7|e>>>25)+t<<0)^(n=((n+=(t^(r=((r+=(n^e&(t^n))+a[1]-389564586)<<12|r>>>20)+e<<0)&(e^t))+a[2]+606105819)<<17|n>>>15)+r<<0)&(r^e))+a[3]-1044525330)<<22|t>>>10)+n<<0),t=((t+=((e=((e+=(r^t&(n^r))+a[4]-176418897)<<7|e>>>25)+t<<0)^(n=((n+=(t^(r=((r+=(n^e&(t^n))+a[5]+1200080426)<<12|r>>>20)+e<<0)&(e^t))+a[6]-1473231341)<<17|n>>>15)+r<<0)&(r^e))+a[7]-45705983)<<22|t>>>10)+n<<0,t=((t+=((e=((e+=(r^t&(n^r))+a[8]+1770035416)<<7|e>>>25)+t<<0)^(n=((n+=(t^(r=((r+=(n^e&(t^n))+a[9]-1958414417)<<12|r>>>20)+e<<0)&(e^t))+a[10]-42063)<<17|n>>>15)+r<<0)&(r^e))+a[11]-1990404162)<<22|t>>>10)+n<<0,t=((t+=((e=((e+=(r^t&(n^r))+a[12]+1804603682)<<7|e>>>25)+t<<0)^(n=((n+=(t^(r=((r+=(n^e&(t^n))+a[13]-40341101)<<12|r>>>20)+e<<0)&(e^t))+a[14]-1502002290)<<17|n>>>15)+r<<0)&(r^e))+a[15]+1236535329)<<22|t>>>10)+n<<0,t=((t+=((r=((r+=(t^n&((e=((e+=(n^r&(t^n))+a[1]-165796510)<<5|e>>>27)+t<<0)^t))+a[6]-1069501632)<<9|r>>>23)+e<<0)^e&((n=((n+=(e^t&(r^e))+a[11]+643717713)<<14|n>>>18)+r<<0)^r))+a[0]-373897302)<<20|t>>>12)+n<<0,t=((t+=((r=((r+=(t^n&((e=((e+=(n^r&(t^n))+a[5]-701558691)<<5|e>>>27)+t<<0)^t))+a[10]+38016083)<<9|r>>>23)+e<<0)^e&((n=((n+=(e^t&(r^e))+a[15]-660478335)<<14|n>>>18)+r<<0)^r))+a[4]-405537848)<<20|t>>>12)+n<<0,t=((t+=((r=((r+=(t^n&((e=((e+=(n^r&(t^n))+a[9]+568446438)<<5|e>>>27)+t<<0)^t))+a[14]-1019803690)<<9|r>>>23)+e<<0)^e&((n=((n+=(e^t&(r^e))+a[3]-187363961)<<14|n>>>18)+r<<0)^r))+a[8]+1163531501)<<20|t>>>12)+n<<0,t=((t+=((r=((r+=(t^n&((e=((e+=(n^r&(t^n))+a[13]-1444681467)<<5|e>>>27)+t<<0)^t))+a[2]-51403784)<<9|r>>>23)+e<<0)^e&((n=((n+=(e^t&(r^e))+a[7]+1735328473)<<14|n>>>18)+r<<0)^r))+a[12]-1926607734)<<20|t>>>12)+n<<0,t=((t+=((o=(r=((r+=((i=t^n)^(e=((e+=(i^r)+a[5]-378558)<<4|e>>>28)+t<<0))+a[8]-2022574463)<<11|r>>>21)+e<<0)^e)^(n=((n+=(o^t)+a[11]+1839030562)<<16|n>>>16)+r<<0))+a[14]-35309556)<<23|t>>>9)+n<<0,t=((t+=((o=(r=((r+=((i=t^n)^(e=((e+=(i^r)+a[1]-1530992060)<<4|e>>>28)+t<<0))+a[4]+1272893353)<<11|r>>>21)+e<<0)^e)^(n=((n+=(o^t)+a[7]-155497632)<<16|n>>>16)+r<<0))+a[10]-1094730640)<<23|t>>>9)+n<<0,t=((t+=((o=(r=((r+=((i=t^n)^(e=((e+=(i^r)+a[13]+681279174)<<4|e>>>28)+t<<0))+a[0]-358537222)<<11|r>>>21)+e<<0)^e)^(n=((n+=(o^t)+a[3]-722521979)<<16|n>>>16)+r<<0))+a[6]+76029189)<<23|t>>>9)+n<<0,t=((t+=((o=(r=((r+=((i=t^n)^(e=((e+=(i^r)+a[9]-640364487)<<4|e>>>28)+t<<0))+a[12]-421815835)<<11|r>>>21)+e<<0)^e)^(n=((n+=(o^t)+a[15]+530742520)<<16|n>>>16)+r<<0))+a[2]-995338651)<<23|t>>>9)+n<<0,t=((t+=((r=((r+=(t^((e=((e+=(n^(t|~r))+a[0]-198630844)<<6|e>>>26)+t<<0)|~n))+a[7]+1126891415)<<10|r>>>22)+e<<0)^((n=((n+=(e^(r|~t))+a[14]-1416354905)<<15|n>>>17)+r<<0)|~e))+a[5]-57434055)<<21|t>>>11)+n<<0,t=((t+=((r=((r+=(t^((e=((e+=(n^(t|~r))+a[12]+1700485571)<<6|e>>>26)+t<<0)|~n))+a[3]-1894986606)<<10|r>>>22)+e<<0)^((n=((n+=(e^(r|~t))+a[10]-1051523)<<15|n>>>17)+r<<0)|~e))+a[1]-2054922799)<<21|t>>>11)+n<<0,t=((t+=((r=((r+=(t^((e=((e+=(n^(t|~r))+a[8]+1873313359)<<6|e>>>26)+t<<0)|~n))+a[15]-30611744)<<10|r>>>22)+e<<0)^((n=((n+=(e^(r|~t))+a[6]-1560198380)<<15|n>>>17)+r<<0)|~e))+a[13]+1309151649)<<21|t>>>11)+n<<0,t=((t+=((r=((r+=(t^((e=((e+=(n^(t|~r))+a[4]-145523070)<<6|e>>>26)+t<<0)|~n))+a[11]-1120210379)<<10|r>>>22)+e<<0)^((n=((n+=(e^(r|~t))+a[2]+718787259)<<15|n>>>17)+r<<0)|~e))+a[9]-343485551)<<21|t>>>11)+n<<0,this.first?(this.h0=e+1732584193<<0,this.h1=t-271733879<<0,this.h2=n-1732584194<<0,this.h3=r+271733878<<0,this.first=!1):(this.h0=this.h0+e<<0,this.h1=this.h1+t<<0,this.h2=this.h2+n<<0,this.h3=this.h3+r<<0)},Md5.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,r=this.h3;return HEX_CHARS[e>>4&15]+HEX_CHARS[15&e]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[15&t]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[n>>4&15]+HEX_CHARS[15&n]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]+HEX_CHARS[r>>4&15]+HEX_CHARS[15&r]+HEX_CHARS[r>>12&15]+HEX_CHARS[r>>8&15]+HEX_CHARS[r>>20&15]+HEX_CHARS[r>>16&15]+HEX_CHARS[r>>28&15]+HEX_CHARS[r>>24&15]},Md5.prototype.toString=Md5.prototype.hex,Md5.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,r=this.h3;return[255&e,e>>8&255,e>>16&255,e>>24&255,255&t,t>>8&255,t>>16&255,t>>24&255,255&n,n>>8&255,n>>16&255,n>>24&255,255&r,r>>8&255,r>>16&255,r>>24&255]},Md5.prototype.array=Md5.prototype.digest,Md5.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(16),t=new Uint32Array(e);return t[0]=this.h0,t[1]=this.h1,t[2]=this.h2,t[3]=this.h3,e},Md5.prototype.buffer=Md5.prototype.arrayBuffer,Md5.prototype.base64=function(){for(var e,t,n,r="",i=this.array(),o=0;o<15;)e=i[o++],t=i[o++],n=i[o++],r+=BASE64_ENCODE_CHAR[e>>>2]+BASE64_ENCODE_CHAR[63&(e<<4|t>>>4)]+BASE64_ENCODE_CHAR[63&(t<<2|n>>>6)]+BASE64_ENCODE_CHAR[63&n];return e=i[o],r+=BASE64_ENCODE_CHAR[e>>>2]+BASE64_ENCODE_CHAR[e<<4&63]+"=="};var exports=createMethod();COMMON_JS?module.exports=exports:(root.md5=exports,AMD&&(__WEBPACK_AMD_DEFINE_RESULT__=function(){return exports}.call(exports,__webpack_require__,exports,module),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)))})()},9515:(e,t,n)=>{var r=n(8761)(n(7772),"DataView");e.exports=r},9612:(e,t,n)=>{var r=n(2118),i=n(6909),o=n(8138),a=n(4174),s=n(7942);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=i,c.prototype.get=o,c.prototype.has=a,c.prototype.set=s,e.exports=c},235:(e,t,n)=>{var r=n(3945),i=n(1846),o=n(8028),a=n(2344),s=n(4769);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=i,c.prototype.get=o,c.prototype.has=a,c.prototype.set=s,e.exports=c},326:(e,t,n)=>{var r=n(8761)(n(7772),"Map");e.exports=r},6738:(e,t,n)=>{var r=n(2411),i=n(6417),o=n(6928),a=n(9493),s=n(4150);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=i,c.prototype.get=o,c.prototype.has=a,c.prototype.set=s,e.exports=c},2760:(e,t,n)=>{var r=n(8761)(n(7772),"Promise");e.exports=r},2143:(e,t,n)=>{var r=n(8761)(n(7772),"Set");e.exports=r},6571:(e,t,n)=>{var r=n(235),i=n(5243),o=n(2858),a=n(4417),s=n(8605),c=n(1418);function u(e){var t=this.__data__=new r(e);this.size=t.size}u.prototype.clear=i,u.prototype.delete=o,u.prototype.get=a,u.prototype.has=s,u.prototype.set=c,e.exports=u},857:(e,t,n)=>{var r=n(7772).Symbol;e.exports=r},9162:(e,t,n)=>{var r=n(7772).Uint8Array;e.exports=r},3215:(e,t,n)=>{var r=n(8761)(n(7772),"WeakMap");e.exports=r},2517:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}},7552:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}},1634:(e,t,n)=>{var r=n(6473),i=n(9631),o=n(6152),a=n(3226),s=n(9045),c=n(7598),u=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=o(e),l=!n&&i(e),h=!n&&!l&&a(e),d=!n&&!l&&!h&&c(e),f=n||l||h||d,p=f?r(e.length,String):[],g=p.length;for(var A in e)!t&&!u.call(e,A)||f&&("length"==A||h&&("offset"==A||"parent"==A)||d&&("buffer"==A||"byteLength"==A||"byteOffset"==A)||s(A,g))||p.push(A);return p}},343:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}},5067:e=>{e.exports=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}},91:(e,t,n)=>{var r=n(3940),i=n(1225),o=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var a=e[t];o.call(e,t)&&i(a,n)&&(void 0!==n||t in e)||r(e,t,n)}},2218:(e,t,n)=>{var r=n(1225);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},7993:(e,t,n)=>{var r=n(752),i=n(249);e.exports=function(e,t){return e&&r(t,i(t),e)}},5906:(e,t,n)=>{var r=n(752),i=n(8582);e.exports=function(e,t){return e&&r(t,i(t),e)}},3940:(e,t,n)=>{var r=n(3043);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},8874:(e,t,n)=>{var r=n(6571),i=n(2517),o=n(91),a=n(7993),s=n(5906),c=n(2175),u=n(1522),l=n(7680),h=n(9987),d=n(3483),f=n(6939),p=n(940),g=n(9917),A=n(8222),v=n(8725),m=n(6152),y=n(3226),b=n(4714),_=n(9259),E=n(3679),w=n(249),I=n(8582),C="[object Arguments]",S="[object Function]",T="[object Object]",R={};R[C]=R["[object Array]"]=R["[object ArrayBuffer]"]=R["[object DataView]"]=R["[object Boolean]"]=R["[object Date]"]=R["[object Float32Array]"]=R["[object Float64Array]"]=R["[object Int8Array]"]=R["[object Int16Array]"]=R["[object Int32Array]"]=R["[object Map]"]=R["[object Number]"]=R[T]=R["[object RegExp]"]=R["[object Set]"]=R["[object String]"]=R["[object Symbol]"]=R["[object Uint8Array]"]=R["[object Uint8ClampedArray]"]=R["[object Uint16Array]"]=R["[object Uint32Array]"]=!0,R["[object Error]"]=R[S]=R["[object WeakMap]"]=!1,e.exports=function e(t,n,k,O,N,x){var D,L=1&n,P=2&n,B=4&n;if(k&&(D=N?k(t,O,N,x):k(t)),void 0!==D)return D;if(!_(t))return t;var M=m(t);if(M){if(D=g(t),!L)return u(t,D)}else{var j=p(t),U=j==S||"[object GeneratorFunction]"==j;if(y(t))return c(t,L);if(j==T||j==C||U&&!N){if(D=P||U?{}:v(t),!L)return P?h(t,s(D,t)):l(t,a(D,t))}else{if(!R[j])return N?t:{};D=A(t,j,L)}}x||(x=new r);var F=x.get(t);if(F)return F;x.set(t,D),E(t)?t.forEach((function(r){D.add(e(r,n,k,r,t,x))})):b(t)&&t.forEach((function(r,i){D.set(i,e(r,n,k,i,t,x))}));var Q=M?void 0:(B?P?f:d:P?I:w)(t);return i(Q||t,(function(r,i){Q&&(r=t[i=r]),o(D,i,e(r,n,k,i,t,x))})),D}},9413:(e,t,n)=>{var r=n(9259),i=Object.create,o=function(){function e(){}return function(t){if(!r(t))return{};if(i)return i(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=o},3324:(e,t,n)=>{var r=n(7297),i=n(3812);e.exports=function(e,t){for(var n=0,o=(t=r(t,e)).length;null!=e&&n<o;)e=e[i(t[n++])];return n&&n==o?e:void 0}},1897:(e,t,n)=>{var r=n(5067),i=n(6152);e.exports=function(e,t,n){var o=t(e);return i(e)?o:r(o,n(e))}},3366:(e,t,n)=>{var r=n(857),i=n(2107),o=n(7157),a=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?i(e):o(e)}},5183:(e,t,n)=>{var r=n(3366),i=n(5125);e.exports=function(e){return i(e)&&"[object Arguments]"==r(e)}},4511:(e,t,n)=>{var r=n(940),i=n(5125);e.exports=function(e){return i(e)&&"[object Map]"==r(e)}},6840:(e,t,n)=>{var r=n(1049),i=n(7394),o=n(9259),a=n(7035),s=/^\[object .+?Constructor\]$/,c=Function.prototype,u=Object.prototype,l=c.toString,h=u.hasOwnProperty,d=RegExp("^"+l.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||i(e))&&(r(e)?d:s).test(a(e))}},8436:(e,t,n)=>{var r=n(940),i=n(5125);e.exports=function(e){return i(e)&&"[object Set]"==r(e)}},5522:(e,t,n)=>{var r=n(3366),i=n(1158),o=n(5125),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(e){return o(e)&&i(e.length)&&!!a[r(e)]}},6411:(e,t,n)=>{var r=n(6001),i=n(4248),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return i(e);var t=[];for(var n in Object(e))o.call(e,n)&&"constructor"!=n&&t.push(n);return t}},8390:(e,t,n)=>{var r=n(9259),i=n(6001),o=n(2966),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return o(e);var t=i(e),n=[];for(var s in e)("constructor"!=s||!t&&a.call(e,s))&&n.push(s);return n}},6473:e=>{e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},1054:(e,t,n)=>{var r=n(857),i=n(343),o=n(6152),a=n(4795),s=r?r.prototype:void 0,c=s?s.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(o(t))return i(t,e)+"";if(a(t))return c?c.call(t):"";var n=t+"";return"0"==n&&1/t==-Infinity?"-0":n}},1704:(e,t,n)=>{var r=n(2153),i=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(i,""):e}},7826:e=>{e.exports=function(e){return function(t){return e(t)}}},7297:(e,t,n)=>{var r=n(6152),i=n(1401),o=n(4452),a=n(6188);e.exports=function(e,t){return r(e)?e:i(e,t)?[e]:o(a(e))}},9882:(e,t,n)=>{var r=n(9162);e.exports=function(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}},2175:(e,t,n)=>{e=n.nmd(e);var r=n(7772),i=t&&!t.nodeType&&t,o=i&&e&&!e.nodeType&&e,a=o&&o.exports===i?r.Buffer:void 0,s=a?a.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=s?s(n):new e.constructor(n);return e.copy(r),r}},4727:(e,t,n)=>{var r=n(9882);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}},6058:e=>{var t=/\w*$/;e.exports=function(e){var n=new e.constructor(e.source,t.exec(e));return n.lastIndex=e.lastIndex,n}},169:(e,t,n)=>{var r=n(857),i=r?r.prototype:void 0,o=i?i.valueOf:void 0;e.exports=function(e){return o?Object(o.call(e)):{}}},6190:(e,t,n)=>{var r=n(9882);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},1522:e=>{e.exports=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}},752:(e,t,n)=>{var r=n(91),i=n(3940);e.exports=function(e,t,n,o){var a=!n;n||(n={});for(var s=-1,c=t.length;++s<c;){var u=t[s],l=o?o(n[u],e[u],u,n,e):void 0;void 0===l&&(l=e[u]),a?i(n,u,l):r(n,u,l)}return n}},7680:(e,t,n)=>{var r=n(752),i=n(633);e.exports=function(e,t){return r(e,i(e),t)}},9987:(e,t,n)=>{var r=n(752),i=n(2680);e.exports=function(e,t){return r(e,i(e),t)}},4019:(e,t,n)=>{var r=n(7772)["__core-js_shared__"];e.exports=r},3043:(e,t,n)=>{var r=n(8761),i=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=i},1242:(e,t,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},3483:(e,t,n)=>{var r=n(1897),i=n(633),o=n(249);e.exports=function(e){return r(e,o,i)}},6939:(e,t,n)=>{var r=n(1897),i=n(2680),o=n(8582);e.exports=function(e){return r(e,o,i)}},7937:(e,t,n)=>{var r=n(8304);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},8761:(e,t,n)=>{var r=n(6840),i=n(8109);e.exports=function(e,t){var n=i(e,t);return r(n)?n:void 0}},7353:(e,t,n)=>{var r=n(241)(Object.getPrototypeOf,Object);e.exports=r},2107:(e,t,n)=>{var r=n(857),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;e.exports=function(e){var t=o.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(e){}var i=a.call(e);return r&&(t?e[s]=n:delete e[s]),i}},633:(e,t,n)=>{var r=n(7552),i=n(981),o=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(e){return null==e?[]:(e=Object(e),r(a(e),(function(t){return o.call(e,t)})))}:i;e.exports=s},2680:(e,t,n)=>{var r=n(5067),i=n(7353),o=n(633),a=n(981),s=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)r(t,o(e)),e=i(e);return t}:a;e.exports=s},940:(e,t,n)=>{var r=n(9515),i=n(326),o=n(2760),a=n(2143),s=n(3215),c=n(3366),u=n(7035),l="[object Map]",h="[object Promise]",d="[object Set]",f="[object WeakMap]",p="[object DataView]",g=u(r),A=u(i),v=u(o),m=u(a),y=u(s),b=c;(r&&b(new r(new ArrayBuffer(1)))!=p||i&&b(new i)!=l||o&&b(o.resolve())!=h||a&&b(new a)!=d||s&&b(new s)!=f)&&(b=function(e){var t=c(e),n="[object Object]"==t?e.constructor:void 0,r=n?u(n):"";if(r)switch(r){case g:return p;case A:return l;case v:return h;case m:return d;case y:return f}return t}),e.exports=b},8109:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},2118:(e,t,n)=>{var r=n(9191);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},6909:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},8138:(e,t,n)=>{var r=n(9191),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(t,e)?t[e]:void 0}},4174:(e,t,n)=>{var r=n(9191),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:i.call(t,e)}},7942:(e,t,n)=>{var r=n(9191);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},9917:e=>{var t=Object.prototype.hasOwnProperty;e.exports=function(e){var n=e.length,r=new e.constructor(n);return n&&"string"==typeof e[0]&&t.call(e,"index")&&(r.index=e.index,r.input=e.input),r}},8222:(e,t,n)=>{var r=n(9882),i=n(4727),o=n(6058),a=n(169),s=n(6190);e.exports=function(e,t,n){var c=e.constructor;switch(t){case"[object ArrayBuffer]":return r(e);case"[object Boolean]":case"[object Date]":return new c(+e);case"[object DataView]":return i(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return s(e,n);case"[object Map]":case"[object Set]":return new c;case"[object Number]":case"[object String]":return new c(e);case"[object RegExp]":return o(e);case"[object Symbol]":return a(e)}}},8725:(e,t,n)=>{var r=n(9413),i=n(7353),o=n(6001);e.exports=function(e){return"function"!=typeof e.constructor||o(e)?{}:r(i(e))}},9045:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var r=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&t.test(e))&&e>-1&&e%1==0&&e<n}},1401:(e,t,n)=>{var r=n(6152),i=n(4795),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;e.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!i(e))||(a.test(e)||!o.test(e)||null!=t&&e in Object(t))}},8304:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},7394:(e,t,n)=>{var r,i=n(4019),o=(r=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(e){return!!o&&o in e}},6001:e=>{var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},3945:e=>{e.exports=function(){this.__data__=[],this.size=0}},1846:(e,t,n)=>{var r=n(2218),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():i.call(t,n,1),--this.size,!0)}},8028:(e,t,n)=>{var r=n(2218);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},2344:(e,t,n)=>{var r=n(2218);e.exports=function(e){return r(this.__data__,e)>-1}},4769:(e,t,n)=>{var r=n(2218);e.exports=function(e,t){var n=this.__data__,i=r(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}},2411:(e,t,n)=>{var r=n(9612),i=n(235),o=n(326);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},6417:(e,t,n)=>{var r=n(7937);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},6928:(e,t,n)=>{var r=n(7937);e.exports=function(e){return r(this,e).get(e)}},9493:(e,t,n)=>{var r=n(7937);e.exports=function(e){return r(this,e).has(e)}},4150:(e,t,n)=>{var r=n(7937);e.exports=function(e,t){var n=r(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}},7777:(e,t,n)=>{var r=n(733);e.exports=function(e){var t=r(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}},9191:(e,t,n)=>{var r=n(8761)(Object,"create");e.exports=r},4248:(e,t,n)=>{var r=n(241)(Object.keys,Object);e.exports=r},2966:e=>{e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},4146:(e,t,n)=>{e=n.nmd(e);var r=n(1242),i=t&&!t.nodeType&&t,o=i&&e&&!e.nodeType&&e,a=o&&o.exports===i&&r.process,s=function(){try{var e=o&&o.require&&o.require("util").types;return e||a&&a.binding&&a.binding("util")}catch(e){}}();e.exports=s},7157:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},241:e=>{e.exports=function(e,t){return function(n){return e(t(n))}}},7772:(e,t,n)=>{var r=n(1242),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();e.exports=o},5243:(e,t,n)=>{var r=n(235);e.exports=function(){this.__data__=new r,this.size=0}},2858:e=>{e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},4417:e=>{e.exports=function(e){return this.__data__.get(e)}},8605:e=>{e.exports=function(e){return this.__data__.has(e)}},1418:(e,t,n)=>{var r=n(235),i=n(326),o=n(6738);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var a=n.__data__;if(!i||a.length<199)return a.push([e,t]),this.size=++n.size,this;n=this.__data__=new o(a)}return n.set(e,t),this.size=n.size,this}},4452:(e,t,n)=>{var r=n(7777),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,a=r((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(i,(function(e,n,r,i){t.push(r?i.replace(o,"$1"):n||e)})),t}));e.exports=a},3812:(e,t,n)=>{var r=n(4795);e.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}},7035:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},2153:e=>{var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},9850:(e,t,n)=>{var r=n(8874);e.exports=function(e){return r(e,5)}},4073:(e,t,n)=>{var r=n(9259),i=n(1100),o=n(7642),a=Math.max,s=Math.min;e.exports=function(e,t,n){var c,u,l,h,d,f,p=0,g=!1,A=!1,v=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function m(t){var n=c,r=u;return c=u=void 0,p=t,h=e.apply(r,n)}function y(e){return p=e,d=setTimeout(_,t),g?m(e):h}function b(e){var n=e-f;return void 0===f||n>=t||n<0||A&&e-p>=l}function _(){var e=i();if(b(e))return E(e);d=setTimeout(_,function(e){var n=t-(e-f);return A?s(n,l-(e-p)):n}(e))}function E(e){return d=void 0,v&&c?m(e):(c=u=void 0,h)}function w(){var e=i(),n=b(e);if(c=arguments,u=this,f=e,n){if(void 0===d)return y(f);if(A)return clearTimeout(d),d=setTimeout(_,t),m(f)}return void 0===d&&(d=setTimeout(_,t)),h}return t=o(t)||0,r(n)&&(g=!!n.leading,l=(A="maxWait"in n)?a(o(n.maxWait)||0,t):l,v="trailing"in n?!!n.trailing:v),w.cancel=function(){void 0!==d&&clearTimeout(d),p=0,c=f=u=d=void 0},w.flush=function(){return void 0===d?h:E(i())},w}},1225:e=>{e.exports=function(e,t){return e===t||e!=e&&t!=t}},2579:(e,t,n)=>{var r=n(3324);e.exports=function(e,t,n){var i=null==e?void 0:r(e,t);return void 0===i?n:i}},9631:(e,t,n)=>{var r=n(5183),i=n(5125),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,c=r(function(){return arguments}())?r:function(e){return i(e)&&a.call(e,"callee")&&!s.call(e,"callee")};e.exports=c},6152:e=>{var t=Array.isArray;e.exports=t},7878:(e,t,n)=>{var r=n(1049),i=n(1158);e.exports=function(e){return null!=e&&i(e.length)&&!r(e)}},3226:(e,t,n)=>{e=n.nmd(e);var r=n(7772),i=n(6330),o=t&&!t.nodeType&&t,a=o&&e&&!e.nodeType&&e,s=a&&a.exports===o?r.Buffer:void 0,c=(s?s.isBuffer:void 0)||i;e.exports=c},1049:(e,t,n)=>{var r=n(3366),i=n(9259);e.exports=function(e){if(!i(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},1158:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},4714:(e,t,n)=>{var r=n(4511),i=n(7826),o=n(4146),a=o&&o.isMap,s=a?i(a):r;e.exports=s},9259:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},5125:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},3679:(e,t,n)=>{var r=n(8436),i=n(7826),o=n(4146),a=o&&o.isSet,s=a?i(a):r;e.exports=s},4795:(e,t,n)=>{var r=n(3366),i=n(5125);e.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==r(e)}},7598:(e,t,n)=>{var r=n(5522),i=n(7826),o=n(4146),a=o&&o.isTypedArray,s=a?i(a):r;e.exports=s},249:(e,t,n)=>{var r=n(1634),i=n(6411),o=n(7878);e.exports=function(e){return o(e)?r(e):i(e)}},8582:(e,t,n)=>{var r=n(1634),i=n(8390),o=n(7878);e.exports=function(e){return o(e)?r(e,!0):i(e)}},6635:function(e,t,n){var r;e=n.nmd(e),function(){var i,o="Expected a function",a="__lodash_hash_undefined__",s="__lodash_placeholder__",c=16,u=32,l=64,h=128,d=256,f=1/0,p=9007199254740991,g=NaN,A=4294967295,v=[["ary",h],["bind",1],["bindKey",2],["curry",8],["curryRight",c],["flip",512],["partial",u],["partialRight",l],["rearg",d]],m="[object Arguments]",y="[object Array]",b="[object Boolean]",_="[object Date]",E="[object Error]",w="[object Function]",I="[object GeneratorFunction]",C="[object Map]",S="[object Number]",T="[object Object]",R="[object Promise]",k="[object RegExp]",O="[object Set]",N="[object String]",x="[object Symbol]",D="[object WeakMap]",L="[object ArrayBuffer]",P="[object DataView]",B="[object Float32Array]",M="[object Float64Array]",j="[object Int8Array]",U="[object Int16Array]",F="[object Int32Array]",Q="[object Uint8Array]",G="[object Uint8ClampedArray]",q="[object Uint16Array]",V="[object Uint32Array]",K=/\b__p \+= '';/g,H=/\b(__p \+=) '' \+/g,W=/(__e\(.*?\)|\b__t\)) \+\n'';/g,z=/&(?:amp|lt|gt|quot|#39);/g,Y=/[&<>"']/g,J=RegExp(z.source),X=RegExp(Y.source),Z=/<%-([\s\S]+?)%>/g,$=/<%([\s\S]+?)%>/g,ee=/<%=([\s\S]+?)%>/g,te=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ne=/^\w*$/,re=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ie=/[\\^$.*+?()[\]{}|]/g,oe=RegExp(ie.source),ae=/^\s+/,se=/\s/,ce=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ue=/\{\n\/\* \[wrapped with (.+)\] \*/,le=/,? & /,he=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,de=/[()=,{}\[\]\/\s]/,fe=/\\(\\)?/g,pe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ge=/\w*$/,Ae=/^[-+]0x[0-9a-f]+$/i,ve=/^0b[01]+$/i,me=/^\[object .+?Constructor\]$/,ye=/^0o[0-7]+$/i,be=/^(?:0|[1-9]\d*)$/,_e=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ee=/($^)/,we=/['\n\r\u2028\u2029\\]/g,Ie="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Ce="\\u2700-\\u27bf",Se="a-z\\xdf-\\xf6\\xf8-\\xff",Te="A-Z\\xc0-\\xd6\\xd8-\\xde",Re="\\ufe0e\\ufe0f",ke="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Oe="[']",Ne="[\\ud800-\\udfff]",xe="["+ke+"]",De="["+Ie+"]",Le="\\d+",Pe="[\\u2700-\\u27bf]",Be="["+Se+"]",Me="[^\\ud800-\\udfff"+ke+Le+Ce+Se+Te+"]",je="\\ud83c[\\udffb-\\udfff]",Ue="[^\\ud800-\\udfff]",Fe="(?:\\ud83c[\\udde6-\\uddff]){2}",Qe="[\\ud800-\\udbff][\\udc00-\\udfff]",Ge="["+Te+"]",qe="(?:"+Be+"|"+Me+")",Ve="(?:"+Ge+"|"+Me+")",Ke="(?:['](?:d|ll|m|re|s|t|ve))?",He="(?:['](?:D|LL|M|RE|S|T|VE))?",We="(?:"+De+"|"+je+")"+"?",ze="[\\ufe0e\\ufe0f]?",Ye=ze+We+("(?:\\u200d(?:"+[Ue,Fe,Qe].join("|")+")"+ze+We+")*"),Je="(?:"+[Pe,Fe,Qe].join("|")+")"+Ye,Xe="(?:"+[Ue+De+"?",De,Fe,Qe,Ne].join("|")+")",Ze=RegExp(Oe,"g"),$e=RegExp(De,"g"),et=RegExp(je+"(?="+je+")|"+Xe+Ye,"g"),tt=RegExp([Ge+"?"+Be+"+"+Ke+"(?="+[xe,Ge,"$"].join("|")+")",Ve+"+"+He+"(?="+[xe,Ge+qe,"$"].join("|")+")",Ge+"?"+qe+"+"+Ke,Ge+"+"+He,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Le,Je].join("|"),"g"),nt=RegExp("[\\u200d\\ud800-\\udfff"+Ie+Re+"]"),rt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,it=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ot=-1,at={};at[B]=at[M]=at[j]=at[U]=at[F]=at[Q]=at[G]=at[q]=at[V]=!0,at[m]=at[y]=at[L]=at[b]=at[P]=at[_]=at[E]=at[w]=at[C]=at[S]=at[T]=at[k]=at[O]=at[N]=at[D]=!1;var st={};st[m]=st[y]=st[L]=st[P]=st[b]=st[_]=st[B]=st[M]=st[j]=st[U]=st[F]=st[C]=st[S]=st[T]=st[k]=st[O]=st[N]=st[x]=st[Q]=st[G]=st[q]=st[V]=!0,st[E]=st[w]=st[D]=!1;var ct={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ut=parseFloat,lt=parseInt,ht="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,dt="object"==typeof self&&self&&self.Object===Object&&self,ft=ht||dt||Function("return this")(),pt=t&&!t.nodeType&&t,gt=pt&&e&&!e.nodeType&&e,At=gt&&gt.exports===pt,vt=At&&ht.process,mt=function(){try{var e=gt&&gt.require&&gt.require("util").types;return e||vt&&vt.binding&&vt.binding("util")}catch(e){}}(),yt=mt&&mt.isArrayBuffer,bt=mt&&mt.isDate,_t=mt&&mt.isMap,Et=mt&&mt.isRegExp,wt=mt&&mt.isSet,It=mt&&mt.isTypedArray;function Ct(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function St(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(r,a,n(a),e)}return r}function Tt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function Rt(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function kt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function Ot(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}function Nt(e,t){return!!(null==e?0:e.length)&&Qt(e,t,0)>-1}function xt(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function Dt(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function Lt(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function Pt(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function Bt(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function Mt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var jt=Kt("length");function Ut(e,t,n){var r;return n(e,(function(e,n,i){if(t(e,n,i))return r=n,!1})),r}function Ft(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function Qt(e,t,n){return t==t?function(e,t,n){var r=n-1,i=e.length;for(;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):Ft(e,qt,n)}function Gt(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1}function qt(e){return e!=e}function Vt(e,t){var n=null==e?0:e.length;return n?zt(e,t)/n:g}function Kt(e){return function(t){return null==t?i:t[e]}}function Ht(e){return function(t){return null==e?i:e[t]}}function Wt(e,t,n,r,i){return i(e,(function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)})),n}function zt(e,t){for(var n,r=-1,o=e.length;++r<o;){var a=t(e[r]);a!==i&&(n=n===i?a:n+a)}return n}function Yt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Jt(e){return e?e.slice(0,gn(e)+1).replace(ae,""):e}function Xt(e){return function(t){return e(t)}}function Zt(e,t){return Dt(t,(function(t){return e[t]}))}function $t(e,t){return e.has(t)}function en(e,t){for(var n=-1,r=e.length;++n<r&&Qt(t,e[n],0)>-1;);return n}function tn(e,t){for(var n=e.length;n--&&Qt(t,e[n],0)>-1;);return n}function nn(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}var rn=Ht({:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"}),on=Ht({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function an(e){return"\\"+ct[e]}function sn(e){return nt.test(e)}function cn(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function un(e,t){return function(n){return e(t(n))}}function ln(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n];a!==t&&a!==s||(e[n]=s,o[i++]=n)}return o}function hn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function dn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function fn(e){return sn(e)?function(e){var t=et.lastIndex=0;for(;et.test(e);)++t;return t}(e):jt(e)}function pn(e){return sn(e)?function(e){return e.match(et)||[]}(e):function(e){return e.split("")}(e)}function gn(e){for(var t=e.length;t--&&se.test(e.charAt(t)););return t}var An=Ht({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var vn=function e(t){var n,r=(t=null==t?ft:vn.defaults(ft.Object(),t,vn.pick(ft,it))).Array,se=t.Date,Ie=t.Error,Ce=t.Function,Se=t.Math,Te=t.Object,Re=t.RegExp,ke=t.String,Oe=t.TypeError,Ne=r.prototype,xe=Ce.prototype,De=Te.prototype,Le=t["__core-js_shared__"],Pe=xe.toString,Be=De.hasOwnProperty,Me=0,je=(n=/[^.]+$/.exec(Le&&Le.keys&&Le.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Ue=De.toString,Fe=Pe.call(Te),Qe=ft._,Ge=Re("^"+Pe.call(Be).replace(ie,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),qe=At?t.Buffer:i,Ve=t.Symbol,Ke=t.Uint8Array,He=qe?qe.allocUnsafe:i,We=un(Te.getPrototypeOf,Te),ze=Te.create,Ye=De.propertyIsEnumerable,Je=Ne.splice,Xe=Ve?Ve.isConcatSpreadable:i,et=Ve?Ve.iterator:i,nt=Ve?Ve.toStringTag:i,ct=function(){try{var e=po(Te,"defineProperty");return e({},"",{}),e}catch(e){}}(),ht=t.clearTimeout!==ft.clearTimeout&&t.clearTimeout,dt=se&&se.now!==ft.Date.now&&se.now,pt=t.setTimeout!==ft.setTimeout&&t.setTimeout,gt=Se.ceil,vt=Se.floor,mt=Te.getOwnPropertySymbols,jt=qe?qe.isBuffer:i,Ht=t.isFinite,mn=Ne.join,yn=un(Te.keys,Te),bn=Se.max,_n=Se.min,En=se.now,wn=t.parseInt,In=Se.random,Cn=Ne.reverse,Sn=po(t,"DataView"),Tn=po(t,"Map"),Rn=po(t,"Promise"),kn=po(t,"Set"),On=po(t,"WeakMap"),Nn=po(Te,"create"),xn=On&&new On,Dn={},Ln=Qo(Sn),Pn=Qo(Tn),Bn=Qo(Rn),Mn=Qo(kn),jn=Qo(On),Un=Ve?Ve.prototype:i,Fn=Un?Un.valueOf:i,Qn=Un?Un.toString:i;function Gn(e){if(is(e)&&!Wa(e)&&!(e instanceof Hn)){if(e instanceof Kn)return e;if(Be.call(e,"__wrapped__"))return Go(e)}return new Kn(e)}var qn=function(){function e(){}return function(t){if(!rs(t))return{};if(ze)return ze(t);e.prototype=t;var n=new e;return e.prototype=i,n}}();function Vn(){}function Kn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=i}function Hn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=A,this.__views__=[]}function Wn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function zn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Yn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Jn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Yn;++t<n;)this.add(e[t])}function Xn(e){var t=this.__data__=new zn(e);this.size=t.size}function Zn(e,t){var n=Wa(e),r=!n&&Ha(e),i=!n&&!r&&Xa(e),o=!n&&!r&&!i&&ds(e),a=n||r||i||o,s=a?Yt(e.length,ke):[],c=s.length;for(var u in e)!t&&!Be.call(e,u)||a&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||_o(u,c))||s.push(u);return s}function $n(e){var t=e.length;return t?e[Jr(0,t-1)]:i}function er(e,t){return jo(Ni(e),ur(t,0,e.length))}function tr(e){return jo(Ni(e))}function nr(e,t,n){(n!==i&&!qa(e[t],n)||n===i&&!(t in e))&&sr(e,t,n)}function rr(e,t,n){var r=e[t];Be.call(e,t)&&qa(r,n)&&(n!==i||t in e)||sr(e,t,n)}function ir(e,t){for(var n=e.length;n--;)if(qa(e[n][0],t))return n;return-1}function or(e,t,n,r){return pr(e,(function(e,i,o){t(r,e,n(e),o)})),r}function ar(e,t){return e&&xi(t,Ls(t),e)}function sr(e,t,n){"__proto__"==t&&ct?ct(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function cr(e,t){for(var n=-1,o=t.length,a=r(o),s=null==e;++n<o;)a[n]=s?i:ks(e,t[n]);return a}function ur(e,t,n){return e==e&&(n!==i&&(e=e<=n?e:n),t!==i&&(e=e>=t?e:t)),e}function lr(e,t,n,r,o,a){var s,c=1&t,u=2&t,l=4&t;if(n&&(s=o?n(e,r,o,a):n(e)),s!==i)return s;if(!rs(e))return e;var h=Wa(e);if(h){if(s=function(e){var t=e.length,n=new e.constructor(t);t&&"string"==typeof e[0]&&Be.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!c)return Ni(e,s)}else{var d=vo(e),f=d==w||d==I;if(Xa(e))return Ci(e,c);if(d==T||d==m||f&&!o){if(s=u||f?{}:yo(e),!c)return u?function(e,t){return xi(e,Ao(e),t)}(e,function(e,t){return e&&xi(t,Ps(t),e)}(s,e)):function(e,t){return xi(e,go(e),t)}(e,ar(s,e))}else{if(!st[d])return o?e:{};s=function(e,t,n){var r=e.constructor;switch(t){case L:return Si(e);case b:case _:return new r(+e);case P:return function(e,t){var n=t?Si(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case B:case M:case j:case U:case F:case Q:case G:case q:case V:return Ti(e,n);case C:return new r;case S:case N:return new r(e);case k:return function(e){var t=new e.constructor(e.source,ge.exec(e));return t.lastIndex=e.lastIndex,t}(e);case O:return new r;case x:return i=e,Fn?Te(Fn.call(i)):{}}var i}(e,d,c)}}a||(a=new Xn);var p=a.get(e);if(p)return p;a.set(e,s),us(e)?e.forEach((function(r){s.add(lr(r,t,n,r,e,a))})):os(e)&&e.forEach((function(r,i){s.set(i,lr(r,t,n,i,e,a))}));var g=h?i:(l?u?ao:oo:u?Ps:Ls)(e);return Tt(g||e,(function(r,i){g&&(r=e[i=r]),rr(s,i,lr(r,t,n,i,e,a))})),s}function hr(e,t,n){var r=n.length;if(null==e)return!r;for(e=Te(e);r--;){var o=n[r],a=t[o],s=e[o];if(s===i&&!(o in e)||!a(s))return!1}return!0}function dr(e,t,n){if("function"!=typeof e)throw new Oe(o);return Lo((function(){e.apply(i,n)}),t)}function fr(e,t,n,r){var i=-1,o=Nt,a=!0,s=e.length,c=[],u=t.length;if(!s)return c;n&&(t=Dt(t,Xt(n))),r?(o=xt,a=!1):t.length>=200&&(o=$t,a=!1,t=new Jn(t));e:for(;++i<s;){var l=e[i],h=null==n?l:n(l);if(l=r||0!==l?l:0,a&&h==h){for(var d=u;d--;)if(t[d]===h)continue e;c.push(l)}else o(t,h,r)||c.push(l)}return c}Gn.templateSettings={escape:Z,evaluate:$,interpolate:ee,variable:"",imports:{_:Gn}},Gn.prototype=Vn.prototype,Gn.prototype.constructor=Gn,Kn.prototype=qn(Vn.prototype),Kn.prototype.constructor=Kn,Hn.prototype=qn(Vn.prototype),Hn.prototype.constructor=Hn,Wn.prototype.clear=function(){this.__data__=Nn?Nn(null):{},this.size=0},Wn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Wn.prototype.get=function(e){var t=this.__data__;if(Nn){var n=t[e];return n===a?i:n}return Be.call(t,e)?t[e]:i},Wn.prototype.has=function(e){var t=this.__data__;return Nn?t[e]!==i:Be.call(t,e)},Wn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Nn&&t===i?a:t,this},zn.prototype.clear=function(){this.__data__=[],this.size=0},zn.prototype.delete=function(e){var t=this.__data__,n=ir(t,e);return!(n<0)&&(n==t.length-1?t.pop():Je.call(t,n,1),--this.size,!0)},zn.prototype.get=function(e){var t=this.__data__,n=ir(t,e);return n<0?i:t[n][1]},zn.prototype.has=function(e){return ir(this.__data__,e)>-1},zn.prototype.set=function(e,t){var n=this.__data__,r=ir(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},Yn.prototype.clear=function(){this.size=0,this.__data__={hash:new Wn,map:new(Tn||zn),string:new Wn}},Yn.prototype.delete=function(e){var t=ho(this,e).delete(e);return this.size-=t?1:0,t},Yn.prototype.get=function(e){return ho(this,e).get(e)},Yn.prototype.has=function(e){return ho(this,e).has(e)},Yn.prototype.set=function(e,t){var n=ho(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Jn.prototype.add=Jn.prototype.push=function(e){return this.__data__.set(e,a),this},Jn.prototype.has=function(e){return this.__data__.has(e)},Xn.prototype.clear=function(){this.__data__=new zn,this.size=0},Xn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Xn.prototype.get=function(e){return this.__data__.get(e)},Xn.prototype.has=function(e){return this.__data__.has(e)},Xn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof zn){var r=n.__data__;if(!Tn||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Yn(r)}return n.set(e,t),this.size=n.size,this};var pr=Pi(Er),gr=Pi(wr,!0);function Ar(e,t){var n=!0;return pr(e,(function(e,r,i){return n=!!t(e,r,i)})),n}function vr(e,t,n){for(var r=-1,o=e.length;++r<o;){var a=e[r],s=t(a);if(null!=s&&(c===i?s==s&&!hs(s):n(s,c)))var c=s,u=a}return u}function mr(e,t){var n=[];return pr(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}function yr(e,t,n,r,i){var o=-1,a=e.length;for(n||(n=bo),i||(i=[]);++o<a;){var s=e[o];t>0&&n(s)?t>1?yr(s,t-1,n,r,i):Lt(i,s):r||(i[i.length]=s)}return i}var br=Bi(),_r=Bi(!0);function Er(e,t){return e&&br(e,t,Ls)}function wr(e,t){return e&&_r(e,t,Ls)}function Ir(e,t){return Ot(t,(function(t){return es(e[t])}))}function Cr(e,t){for(var n=0,r=(t=_i(t,e)).length;null!=e&&n<r;)e=e[Fo(t[n++])];return n&&n==r?e:i}function Sr(e,t,n){var r=t(e);return Wa(e)?r:Lt(r,n(e))}function Tr(e){return null==e?e===i?"[object Undefined]":"[object Null]":nt&&nt in Te(e)?function(e){var t=Be.call(e,nt),n=e[nt];try{e[nt]=i;var r=!0}catch(e){}var o=Ue.call(e);r&&(t?e[nt]=n:delete e[nt]);return o}(e):function(e){return Ue.call(e)}(e)}function Rr(e,t){return e>t}function kr(e,t){return null!=e&&Be.call(e,t)}function Or(e,t){return null!=e&&t in Te(e)}function Nr(e,t,n){for(var o=n?xt:Nt,a=e[0].length,s=e.length,c=s,u=r(s),l=1/0,h=[];c--;){var d=e[c];c&&t&&(d=Dt(d,Xt(t))),l=_n(d.length,l),u[c]=!n&&(t||a>=120&&d.length>=120)?new Jn(c&&d):i}d=e[0];var f=-1,p=u[0];e:for(;++f<a&&h.length<l;){var g=d[f],A=t?t(g):g;if(g=n||0!==g?g:0,!(p?$t(p,A):o(h,A,n))){for(c=s;--c;){var v=u[c];if(!(v?$t(v,A):o(e[c],A,n)))continue e}p&&p.push(A),h.push(g)}}return h}function xr(e,t,n){var r=null==(e=Oo(e,t=_i(t,e)))?e:e[Fo($o(t))];return null==r?i:Ct(r,e,n)}function Dr(e){return is(e)&&Tr(e)==m}function Lr(e,t,n,r,o){return e===t||(null==e||null==t||!is(e)&&!is(t)?e!=e&&t!=t:function(e,t,n,r,o,a){var s=Wa(e),c=Wa(t),u=s?y:vo(e),l=c?y:vo(t),h=(u=u==m?T:u)==T,d=(l=l==m?T:l)==T,f=u==l;if(f&&Xa(e)){if(!Xa(t))return!1;s=!0,h=!1}if(f&&!h)return a||(a=new Xn),s||ds(e)?ro(e,t,n,r,o,a):function(e,t,n,r,i,o,a){switch(n){case P:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case L:return!(e.byteLength!=t.byteLength||!o(new Ke(e),new Ke(t)));case b:case _:case S:return qa(+e,+t);case E:return e.name==t.name&&e.message==t.message;case k:case N:return e==t+"";case C:var s=cn;case O:var c=1&r;if(s||(s=hn),e.size!=t.size&&!c)return!1;var u=a.get(e);if(u)return u==t;r|=2,a.set(e,t);var l=ro(s(e),s(t),r,i,o,a);return a.delete(e),l;case x:if(Fn)return Fn.call(e)==Fn.call(t)}return!1}(e,t,u,n,r,o,a);if(!(1&n)){var p=h&&Be.call(e,"__wrapped__"),g=d&&Be.call(t,"__wrapped__");if(p||g){var A=p?e.value():e,v=g?t.value():t;return a||(a=new Xn),o(A,v,n,r,a)}}if(!f)return!1;return a||(a=new Xn),function(e,t,n,r,o,a){var s=1&n,c=oo(e),u=c.length,l=oo(t).length;if(u!=l&&!s)return!1;var h=u;for(;h--;){var d=c[h];if(!(s?d in t:Be.call(t,d)))return!1}var f=a.get(e),p=a.get(t);if(f&&p)return f==t&&p==e;var g=!0;a.set(e,t),a.set(t,e);var A=s;for(;++h<u;){var v=e[d=c[h]],m=t[d];if(r)var y=s?r(m,v,d,t,e,a):r(v,m,d,e,t,a);if(!(y===i?v===m||o(v,m,n,r,a):y)){g=!1;break}A||(A="constructor"==d)}if(g&&!A){var b=e.constructor,_=t.constructor;b==_||!("constructor"in e)||!("constructor"in t)||"function"==typeof b&&b instanceof b&&"function"==typeof _&&_ instanceof _||(g=!1)}return a.delete(e),a.delete(t),g}(e,t,n,r,o,a)}(e,t,n,r,Lr,o))}function Pr(e,t,n,r){var o=n.length,a=o,s=!r;if(null==e)return!a;for(e=Te(e);o--;){var c=n[o];if(s&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++o<a;){var u=(c=n[o])[0],l=e[u],h=c[1];if(s&&c[2]){if(l===i&&!(u in e))return!1}else{var d=new Xn;if(r)var f=r(l,h,u,e,t,d);if(!(f===i?Lr(h,l,3,r,d):f))return!1}}return!0}function Br(e){return!(!rs(e)||(t=e,je&&je in t))&&(es(e)?Ge:me).test(Qo(e));var t}function Mr(e){return"function"==typeof e?e:null==e?ac:"object"==typeof e?Wa(e)?qr(e[0],e[1]):Gr(e):gc(e)}function jr(e){if(!So(e))return yn(e);var t=[];for(var n in Te(e))Be.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Ur(e){if(!rs(e))return function(e){var t=[];if(null!=e)for(var n in Te(e))t.push(n);return t}(e);var t=So(e),n=[];for(var r in e)("constructor"!=r||!t&&Be.call(e,r))&&n.push(r);return n}function Fr(e,t){return e<t}function Qr(e,t){var n=-1,i=Ya(e)?r(e.length):[];return pr(e,(function(e,r,o){i[++n]=t(e,r,o)})),i}function Gr(e){var t=fo(e);return 1==t.length&&t[0][2]?Ro(t[0][0],t[0][1]):function(n){return n===e||Pr(n,e,t)}}function qr(e,t){return wo(e)&&To(t)?Ro(Fo(e),t):function(n){var r=ks(n,e);return r===i&&r===t?Os(n,e):Lr(t,r,3)}}function Vr(e,t,n,r,o){e!==t&&br(t,(function(a,s){if(o||(o=new Xn),rs(a))!function(e,t,n,r,o,a,s){var c=xo(e,n),u=xo(t,n),l=s.get(u);if(l)return void nr(e,n,l);var h=a?a(c,u,n+"",e,t,s):i,d=h===i;if(d){var f=Wa(u),p=!f&&Xa(u),g=!f&&!p&&ds(u);h=u,f||p||g?Wa(c)?h=c:Ja(c)?h=Ni(c):p?(d=!1,h=Ci(u,!0)):g?(d=!1,h=Ti(u,!0)):h=[]:ss(u)||Ha(u)?(h=c,Ha(c)?h=bs(c):rs(c)&&!es(c)||(h=yo(u))):d=!1}d&&(s.set(u,h),o(h,u,r,a,s),s.delete(u));nr(e,n,h)}(e,t,s,n,Vr,r,o);else{var c=r?r(xo(e,s),a,s+"",e,t,o):i;c===i&&(c=a),nr(e,s,c)}}),Ps)}function Kr(e,t){var n=e.length;if(n)return _o(t+=t<0?n:0,n)?e[t]:i}function Hr(e,t,n){t=t.length?Dt(t,(function(e){return Wa(e)?function(t){return Cr(t,1===e.length?e[0]:e)}:e})):[ac];var r=-1;t=Dt(t,Xt(lo()));var i=Qr(e,(function(e,n,i){var o=Dt(t,(function(t){return t(e)}));return{criteria:o,index:++r,value:e}}));return function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(i,(function(e,t){return function(e,t,n){var r=-1,i=e.criteria,o=t.criteria,a=i.length,s=n.length;for(;++r<a;){var c=Ri(i[r],o[r]);if(c)return r>=s?c:c*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)}))}function Wr(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var a=t[r],s=Cr(e,a);n(s,a)&&ti(o,_i(a,e),s)}return o}function zr(e,t,n,r){var i=r?Gt:Qt,o=-1,a=t.length,s=e;for(e===t&&(t=Ni(t)),n&&(s=Dt(e,Xt(n)));++o<a;)for(var c=0,u=t[o],l=n?n(u):u;(c=i(s,l,c,r))>-1;)s!==e&&Je.call(s,c,1),Je.call(e,c,1);return e}function Yr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==o){var o=i;_o(i)?Je.call(e,i,1):fi(e,i)}}return e}function Jr(e,t){return e+vt(In()*(t-e+1))}function Xr(e,t){var n="";if(!e||t<1||t>p)return n;do{t%2&&(n+=e),(t=vt(t/2))&&(e+=e)}while(t);return n}function Zr(e,t){return Po(ko(e,t,ac),e+"")}function $r(e){return $n(qs(e))}function ei(e,t){var n=qs(e);return jo(n,ur(t,0,n.length))}function ti(e,t,n,r){if(!rs(e))return e;for(var o=-1,a=(t=_i(t,e)).length,s=a-1,c=e;null!=c&&++o<a;){var u=Fo(t[o]),l=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return e;if(o!=s){var h=c[u];(l=r?r(h,u,c):i)===i&&(l=rs(h)?h:_o(t[o+1])?[]:{})}rr(c,u,l),c=c[u]}return e}var ni=xn?function(e,t){return xn.set(e,t),e}:ac,ri=ct?function(e,t){return ct(e,"toString",{configurable:!0,enumerable:!1,value:rc(t),writable:!0})}:ac;function ii(e){return jo(qs(e))}function oi(e,t,n){var i=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var a=r(o);++i<o;)a[i]=e[i+t];return a}function ai(e,t){var n;return pr(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}function si(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t==t&&i<=2147483647){for(;r<i;){var o=r+i>>>1,a=e[o];null!==a&&!hs(a)&&(n?a<=t:a<t)?r=o+1:i=o}return i}return ci(e,t,ac,n)}function ci(e,t,n,r){var o=0,a=null==e?0:e.length;if(0===a)return 0;for(var s=(t=n(t))!=t,c=null===t,u=hs(t),l=t===i;o<a;){var h=vt((o+a)/2),d=n(e[h]),f=d!==i,p=null===d,g=d==d,A=hs(d);if(s)var v=r||g;else v=l?g&&(r||f):c?g&&f&&(r||!p):u?g&&f&&!p&&(r||!A):!p&&!A&&(r?d<=t:d<t);v?o=h+1:a=h}return _n(a,4294967294)}function ui(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n],s=t?t(a):a;if(!n||!qa(s,c)){var c=s;o[i++]=0===a?0:a}}return o}function li(e){return"number"==typeof e?e:hs(e)?g:+e}function hi(e){if("string"==typeof e)return e;if(Wa(e))return Dt(e,hi)+"";if(hs(e))return Qn?Qn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function di(e,t,n){var r=-1,i=Nt,o=e.length,a=!0,s=[],c=s;if(n)a=!1,i=xt;else if(o>=200){var u=t?null:Xi(e);if(u)return hn(u);a=!1,i=$t,c=new Jn}else c=t?[]:s;e:for(;++r<o;){var l=e[r],h=t?t(l):l;if(l=n||0!==l?l:0,a&&h==h){for(var d=c.length;d--;)if(c[d]===h)continue e;t&&c.push(h),s.push(l)}else i(c,h,n)||(c!==s&&c.push(h),s.push(l))}return s}function fi(e,t){return null==(e=Oo(e,t=_i(t,e)))||delete e[Fo($o(t))]}function pi(e,t,n,r){return ti(e,t,n(Cr(e,t)),r)}function gi(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?oi(e,r?0:o,r?o+1:i):oi(e,r?o+1:0,r?i:o)}function Ai(e,t){var n=e;return n instanceof Hn&&(n=n.value()),Pt(t,(function(e,t){return t.func.apply(t.thisArg,Lt([e],t.args))}),n)}function vi(e,t,n){var i=e.length;if(i<2)return i?di(e[0]):[];for(var o=-1,a=r(i);++o<i;)for(var s=e[o],c=-1;++c<i;)c!=o&&(a[o]=fr(a[o]||s,e[c],t,n));return di(yr(a,1),t,n)}function mi(e,t,n){for(var r=-1,o=e.length,a=t.length,s={};++r<o;){var c=r<a?t[r]:i;n(s,e[r],c)}return s}function yi(e){return Ja(e)?e:[]}function bi(e){return"function"==typeof e?e:ac}function _i(e,t){return Wa(e)?e:wo(e,t)?[e]:Uo(_s(e))}var Ei=Zr;function wi(e,t,n){var r=e.length;return n=n===i?r:n,!t&&n>=r?e:oi(e,t,n)}var Ii=ht||function(e){return ft.clearTimeout(e)};function Ci(e,t){if(t)return e.slice();var n=e.length,r=He?He(n):new e.constructor(n);return e.copy(r),r}function Si(e){var t=new e.constructor(e.byteLength);return new Ke(t).set(new Ke(e)),t}function Ti(e,t){var n=t?Si(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Ri(e,t){if(e!==t){var n=e!==i,r=null===e,o=e==e,a=hs(e),s=t!==i,c=null===t,u=t==t,l=hs(t);if(!c&&!l&&!a&&e>t||a&&s&&u&&!c&&!l||r&&s&&u||!n&&u||!o)return 1;if(!r&&!a&&!l&&e<t||l&&n&&o&&!r&&!a||c&&n&&o||!s&&o||!u)return-1}return 0}function ki(e,t,n,i){for(var o=-1,a=e.length,s=n.length,c=-1,u=t.length,l=bn(a-s,0),h=r(u+l),d=!i;++c<u;)h[c]=t[c];for(;++o<s;)(d||o<a)&&(h[n[o]]=e[o]);for(;l--;)h[c++]=e[o++];return h}function Oi(e,t,n,i){for(var o=-1,a=e.length,s=-1,c=n.length,u=-1,l=t.length,h=bn(a-c,0),d=r(h+l),f=!i;++o<h;)d[o]=e[o];for(var p=o;++u<l;)d[p+u]=t[u];for(;++s<c;)(f||o<a)&&(d[p+n[s]]=e[o++]);return d}function Ni(e,t){var n=-1,i=e.length;for(t||(t=r(i));++n<i;)t[n]=e[n];return t}function xi(e,t,n,r){var o=!n;n||(n={});for(var a=-1,s=t.length;++a<s;){var c=t[a],u=r?r(n[c],e[c],c,n,e):i;u===i&&(u=e[c]),o?sr(n,c,u):rr(n,c,u)}return n}function Di(e,t){return function(n,r){var i=Wa(n)?St:or,o=t?t():{};return i(n,e,lo(r,2),o)}}function Li(e){return Zr((function(t,n){var r=-1,o=n.length,a=o>1?n[o-1]:i,s=o>2?n[2]:i;for(a=e.length>3&&"function"==typeof a?(o--,a):i,s&&Eo(n[0],n[1],s)&&(a=o<3?i:a,o=1),t=Te(t);++r<o;){var c=n[r];c&&e(t,c,r,a)}return t}))}function Pi(e,t){return function(n,r){if(null==n)return n;if(!Ya(n))return e(n,r);for(var i=n.length,o=t?i:-1,a=Te(n);(t?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function Bi(e){return function(t,n,r){for(var i=-1,o=Te(t),a=r(t),s=a.length;s--;){var c=a[e?s:++i];if(!1===n(o[c],c,o))break}return t}}function Mi(e){return function(t){var n=sn(t=_s(t))?pn(t):i,r=n?n[0]:t.charAt(0),o=n?wi(n,1).join(""):t.slice(1);return r[e]()+o}}function ji(e){return function(t){return Pt(ec(Hs(t).replace(Ze,"")),e,"")}}function Ui(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=qn(e.prototype),r=e.apply(n,t);return rs(r)?r:n}}function Fi(e){return function(t,n,r){var o=Te(t);if(!Ya(t)){var a=lo(n,3);t=Ls(t),n=function(e){return a(o[e],e,o)}}var s=e(t,n,r);return s>-1?o[a?t[s]:s]:i}}function Qi(e){return io((function(t){var n=t.length,r=n,a=Kn.prototype.thru;for(e&&t.reverse();r--;){var s=t[r];if("function"!=typeof s)throw new Oe(o);if(a&&!c&&"wrapper"==co(s))var c=new Kn([],!0)}for(r=c?r:n;++r<n;){var u=co(s=t[r]),l="wrapper"==u?so(s):i;c=l&&Io(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?c[co(l[0])].apply(c,l[3]):1==s.length&&Io(s)?c[u]():c.thru(s)}return function(){var e=arguments,r=e[0];if(c&&1==e.length&&Wa(r))return c.plant(r).value();for(var i=0,o=n?t[i].apply(this,e):r;++i<n;)o=t[i].call(this,o);return o}}))}function Gi(e,t,n,o,a,s,c,u,l,d){var f=t&h,p=1&t,g=2&t,A=24&t,v=512&t,m=g?i:Ui(e);return function i(){for(var h=arguments.length,y=r(h),b=h;b--;)y[b]=arguments[b];if(A)var _=uo(i),E=nn(y,_);if(o&&(y=ki(y,o,a,A)),s&&(y=Oi(y,s,c,A)),h-=E,A&&h<d){var w=ln(y,_);return Yi(e,t,Gi,i.placeholder,n,y,w,u,l,d-h)}var I=p?n:this,C=g?I[e]:e;return h=y.length,u?y=No(y,u):v&&h>1&&y.reverse(),f&&l<h&&(y.length=l),this&&this!==ft&&this instanceof i&&(C=m||Ui(C)),C.apply(I,y)}}function qi(e,t){return function(n,r){return function(e,t,n,r){return Er(e,(function(e,i,o){t(r,n(e),i,o)})),r}(n,e,t(r),{})}}function Vi(e,t){return function(n,r){var o;if(n===i&&r===i)return t;if(n!==i&&(o=n),r!==i){if(o===i)return r;"string"==typeof n||"string"==typeof r?(n=hi(n),r=hi(r)):(n=li(n),r=li(r)),o=e(n,r)}return o}}function Ki(e){return io((function(t){return t=Dt(t,Xt(lo())),Zr((function(n){var r=this;return e(t,(function(e){return Ct(e,r,n)}))}))}))}function Hi(e,t){var n=(t=t===i?" ":hi(t)).length;if(n<2)return n?Xr(t,e):t;var r=Xr(t,gt(e/fn(t)));return sn(t)?wi(pn(r),0,e).join(""):r.slice(0,e)}function Wi(e){return function(t,n,o){return o&&"number"!=typeof o&&Eo(t,n,o)&&(n=o=i),t=As(t),n===i?(n=t,t=0):n=As(n),function(e,t,n,i){for(var o=-1,a=bn(gt((t-e)/(n||1)),0),s=r(a);a--;)s[i?a:++o]=e,e+=n;return s}(t,n,o=o===i?t<n?1:-1:As(o),e)}}function zi(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=ys(t),n=ys(n)),e(t,n)}}function Yi(e,t,n,r,o,a,s,c,h,d){var f=8&t;t|=f?u:l,4&(t&=~(f?l:u))||(t&=-4);var p=[e,t,o,f?a:i,f?s:i,f?i:a,f?i:s,c,h,d],g=n.apply(i,p);return Io(e)&&Do(g,p),g.placeholder=r,Bo(g,e,t)}function Ji(e){var t=Se[e];return function(e,n){if(e=ys(e),(n=null==n?0:_n(vs(n),292))&&Ht(e)){var r=(_s(e)+"e").split("e");return+((r=(_s(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Xi=kn&&1/hn(new kn([,-0]))[1]==f?function(e){return new kn(e)}:hc;function Zi(e){return function(t){var n=vo(t);return n==C?cn(t):n==O?dn(t):function(e,t){return Dt(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function $i(e,t,n,a,f,p,g,A){var v=2&t;if(!v&&"function"!=typeof e)throw new Oe(o);var m=a?a.length:0;if(m||(t&=-97,a=f=i),g=g===i?g:bn(vs(g),0),A=A===i?A:vs(A),m-=f?f.length:0,t&l){var y=a,b=f;a=f=i}var _=v?i:so(e),E=[e,t,n,a,f,y,b,p,g,A];if(_&&function(e,t){var n=e[1],r=t[1],i=n|r,o=i<131,a=r==h&&8==n||r==h&&n==d&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!o&&!a)return e;1&r&&(e[2]=t[2],i|=1&n?0:4);var c=t[3];if(c){var u=e[3];e[3]=u?ki(u,c,t[4]):c,e[4]=u?ln(e[3],s):t[4]}(c=t[5])&&(u=e[5],e[5]=u?Oi(u,c,t[6]):c,e[6]=u?ln(e[5],s):t[6]);(c=t[7])&&(e[7]=c);r&h&&(e[8]=null==e[8]?t[8]:_n(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=i}(E,_),e=E[0],t=E[1],n=E[2],a=E[3],f=E[4],!(A=E[9]=E[9]===i?v?0:e.length:bn(E[9]-m,0))&&24&t&&(t&=-25),t&&1!=t)w=8==t||t==c?function(e,t,n){var o=Ui(e);return function a(){for(var s=arguments.length,c=r(s),u=s,l=uo(a);u--;)c[u]=arguments[u];var h=s<3&&c[0]!==l&&c[s-1]!==l?[]:ln(c,l);return(s-=h.length)<n?Yi(e,t,Gi,a.placeholder,i,c,h,i,i,n-s):Ct(this&&this!==ft&&this instanceof a?o:e,this,c)}}(e,t,A):t!=u&&33!=t||f.length?Gi.apply(i,E):function(e,t,n,i){var o=1&t,a=Ui(e);return function t(){for(var s=-1,c=arguments.length,u=-1,l=i.length,h=r(l+c),d=this&&this!==ft&&this instanceof t?a:e;++u<l;)h[u]=i[u];for(;c--;)h[u++]=arguments[++s];return Ct(d,o?n:this,h)}}(e,t,n,a);else var w=function(e,t,n){var r=1&t,i=Ui(e);return function t(){return(this&&this!==ft&&this instanceof t?i:e).apply(r?n:this,arguments)}}(e,t,n);return Bo((_?ni:Do)(w,E),e,t)}function eo(e,t,n,r){return e===i||qa(e,De[n])&&!Be.call(r,n)?t:e}function to(e,t,n,r,o,a){return rs(e)&&rs(t)&&(a.set(t,e),Vr(e,t,i,to,a),a.delete(t)),e}function no(e){return ss(e)?i:e}function ro(e,t,n,r,o,a){var s=1&n,c=e.length,u=t.length;if(c!=u&&!(s&&u>c))return!1;var l=a.get(e),h=a.get(t);if(l&&h)return l==t&&h==e;var d=-1,f=!0,p=2&n?new Jn:i;for(a.set(e,t),a.set(t,e);++d<c;){var g=e[d],A=t[d];if(r)var v=s?r(A,g,d,t,e,a):r(g,A,d,e,t,a);if(v!==i){if(v)continue;f=!1;break}if(p){if(!Mt(t,(function(e,t){if(!$t(p,t)&&(g===e||o(g,e,n,r,a)))return p.push(t)}))){f=!1;break}}else if(g!==A&&!o(g,A,n,r,a)){f=!1;break}}return a.delete(e),a.delete(t),f}function io(e){return Po(ko(e,i,zo),e+"")}function oo(e){return Sr(e,Ls,go)}function ao(e){return Sr(e,Ps,Ao)}var so=xn?function(e){return xn.get(e)}:hc;function co(e){for(var t=e.name+"",n=Dn[t],r=Be.call(Dn,t)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function uo(e){return(Be.call(Gn,"placeholder")?Gn:e).placeholder}function lo(){var e=Gn.iteratee||sc;return e=e===sc?Mr:e,arguments.length?e(arguments[0],arguments[1]):e}function ho(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function fo(e){for(var t=Ls(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,To(i)]}return t}function po(e,t){var n=function(e,t){return null==e?i:e[t]}(e,t);return Br(n)?n:i}var go=mt?function(e){return null==e?[]:(e=Te(e),Ot(mt(e),(function(t){return Ye.call(e,t)})))}:mc,Ao=mt?function(e){for(var t=[];e;)Lt(t,go(e)),e=We(e);return t}:mc,vo=Tr;function mo(e,t,n){for(var r=-1,i=(t=_i(t,e)).length,o=!1;++r<i;){var a=Fo(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&ns(i)&&_o(a,i)&&(Wa(e)||Ha(e))}function yo(e){return"function"!=typeof e.constructor||So(e)?{}:qn(We(e))}function bo(e){return Wa(e)||Ha(e)||!!(Xe&&e&&e[Xe])}function _o(e,t){var n=typeof e;return!!(t=null==t?p:t)&&("number"==n||"symbol"!=n&&be.test(e))&&e>-1&&e%1==0&&e<t}function Eo(e,t,n){if(!rs(n))return!1;var r=typeof t;return!!("number"==r?Ya(n)&&_o(t,n.length):"string"==r&&t in n)&&qa(n[t],e)}function wo(e,t){if(Wa(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!hs(e))||(ne.test(e)||!te.test(e)||null!=t&&e in Te(t))}function Io(e){var t=co(e),n=Gn[t];if("function"!=typeof n||!(t in Hn.prototype))return!1;if(e===n)return!0;var r=so(n);return!!r&&e===r[0]}(Sn&&vo(new Sn(new ArrayBuffer(1)))!=P||Tn&&vo(new Tn)!=C||Rn&&vo(Rn.resolve())!=R||kn&&vo(new kn)!=O||On&&vo(new On)!=D)&&(vo=function(e){var t=Tr(e),n=t==T?e.constructor:i,r=n?Qo(n):"";if(r)switch(r){case Ln:return P;case Pn:return C;case Bn:return R;case Mn:return O;case jn:return D}return t});var Co=Le?es:yc;function So(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||De)}function To(e){return e==e&&!rs(e)}function Ro(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==i||e in Te(n)))}}function ko(e,t,n){return t=bn(t===i?e.length-1:t,0),function(){for(var i=arguments,o=-1,a=bn(i.length-t,0),s=r(a);++o<a;)s[o]=i[t+o];o=-1;for(var c=r(t+1);++o<t;)c[o]=i[o];return c[t]=n(s),Ct(e,this,c)}}function Oo(e,t){return t.length<2?e:Cr(e,oi(t,0,-1))}function No(e,t){for(var n=e.length,r=_n(t.length,n),o=Ni(e);r--;){var a=t[r];e[r]=_o(a,n)?o[a]:i}return e}function xo(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var Do=Mo(ni),Lo=pt||function(e,t){return ft.setTimeout(e,t)},Po=Mo(ri);function Bo(e,t,n){var r=t+"";return Po(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(ce,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return Tt(v,(function(n){var r="_."+n[0];t&n[1]&&!Nt(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(ue);return t?t[1].split(le):[]}(r),n)))}function Mo(e){var t=0,n=0;return function(){var r=En(),o=16-(r-n);if(n=r,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(i,arguments)}}function jo(e,t){var n=-1,r=e.length,o=r-1;for(t=t===i?r:t;++n<t;){var a=Jr(n,o),s=e[a];e[a]=e[n],e[n]=s}return e.length=t,e}var Uo=function(e){var t=Ma(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(re,(function(e,n,r,i){t.push(r?i.replace(fe,"$1"):n||e)})),t}));function Fo(e){if("string"==typeof e||hs(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Qo(e){if(null!=e){try{return Pe.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Go(e){if(e instanceof Hn)return e.clone();var t=new Kn(e.__wrapped__,e.__chain__);return t.__actions__=Ni(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var qo=Zr((function(e,t){return Ja(e)?fr(e,yr(t,1,Ja,!0)):[]})),Vo=Zr((function(e,t){var n=$o(t);return Ja(n)&&(n=i),Ja(e)?fr(e,yr(t,1,Ja,!0),lo(n,2)):[]})),Ko=Zr((function(e,t){var n=$o(t);return Ja(n)&&(n=i),Ja(e)?fr(e,yr(t,1,Ja,!0),i,n):[]}));function Ho(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:vs(n);return i<0&&(i=bn(r+i,0)),Ft(e,lo(t,3),i)}function Wo(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=r-1;return n!==i&&(o=vs(n),o=n<0?bn(r+o,0):_n(o,r-1)),Ft(e,lo(t,3),o,!0)}function zo(e){return(null==e?0:e.length)?yr(e,1):[]}function Yo(e){return e&&e.length?e[0]:i}var Jo=Zr((function(e){var t=Dt(e,yi);return t.length&&t[0]===e[0]?Nr(t):[]})),Xo=Zr((function(e){var t=$o(e),n=Dt(e,yi);return t===$o(n)?t=i:n.pop(),n.length&&n[0]===e[0]?Nr(n,lo(t,2)):[]})),Zo=Zr((function(e){var t=$o(e),n=Dt(e,yi);return(t="function"==typeof t?t:i)&&n.pop(),n.length&&n[0]===e[0]?Nr(n,i,t):[]}));function $o(e){var t=null==e?0:e.length;return t?e[t-1]:i}var ea=Zr(ta);function ta(e,t){return e&&e.length&&t&&t.length?zr(e,t):e}var na=io((function(e,t){var n=null==e?0:e.length,r=cr(e,t);return Yr(e,Dt(t,(function(e){return _o(e,n)?+e:e})).sort(Ri)),r}));function ra(e){return null==e?e:Cn.call(e)}var ia=Zr((function(e){return di(yr(e,1,Ja,!0))})),oa=Zr((function(e){var t=$o(e);return Ja(t)&&(t=i),di(yr(e,1,Ja,!0),lo(t,2))})),aa=Zr((function(e){var t=$o(e);return t="function"==typeof t?t:i,di(yr(e,1,Ja,!0),i,t)}));function sa(e){if(!e||!e.length)return[];var t=0;return e=Ot(e,(function(e){if(Ja(e))return t=bn(e.length,t),!0})),Yt(t,(function(t){return Dt(e,Kt(t))}))}function ca(e,t){if(!e||!e.length)return[];var n=sa(e);return null==t?n:Dt(n,(function(e){return Ct(t,i,e)}))}var ua=Zr((function(e,t){return Ja(e)?fr(e,t):[]})),la=Zr((function(e){return vi(Ot(e,Ja))})),ha=Zr((function(e){var t=$o(e);return Ja(t)&&(t=i),vi(Ot(e,Ja),lo(t,2))})),da=Zr((function(e){var t=$o(e);return t="function"==typeof t?t:i,vi(Ot(e,Ja),i,t)})),fa=Zr(sa);var pa=Zr((function(e){var t=e.length,n=t>1?e[t-1]:i;return n="function"==typeof n?(e.pop(),n):i,ca(e,n)}));function ga(e){var t=Gn(e);return t.__chain__=!0,t}function Aa(e,t){return t(e)}var va=io((function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,o=function(t){return cr(t,e)};return!(t>1||this.__actions__.length)&&r instanceof Hn&&_o(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:Aa,args:[o],thisArg:i}),new Kn(r,this.__chain__).thru((function(e){return t&&!e.length&&e.push(i),e}))):this.thru(o)}));var ma=Di((function(e,t,n){Be.call(e,n)?++e[n]:sr(e,n,1)}));var ya=Fi(Ho),ba=Fi(Wo);function _a(e,t){return(Wa(e)?Tt:pr)(e,lo(t,3))}function Ea(e,t){return(Wa(e)?Rt:gr)(e,lo(t,3))}var wa=Di((function(e,t,n){Be.call(e,n)?e[n].push(t):sr(e,n,[t])}));var Ia=Zr((function(e,t,n){var i=-1,o="function"==typeof t,a=Ya(e)?r(e.length):[];return pr(e,(function(e){a[++i]=o?Ct(t,e,n):xr(e,t,n)})),a})),Ca=Di((function(e,t,n){sr(e,n,t)}));function Sa(e,t){return(Wa(e)?Dt:Qr)(e,lo(t,3))}var Ta=Di((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));var Ra=Zr((function(e,t){if(null==e)return[];var n=t.length;return n>1&&Eo(e,t[0],t[1])?t=[]:n>2&&Eo(t[0],t[1],t[2])&&(t=[t[0]]),Hr(e,yr(t,1),[])})),ka=dt||function(){return ft.Date.now()};function Oa(e,t,n){return t=n?i:t,t=e&&null==t?e.length:t,$i(e,h,i,i,i,i,t)}function Na(e,t){var n;if("function"!=typeof t)throw new Oe(o);return e=vs(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=i),n}}var xa=Zr((function(e,t,n){var r=1;if(n.length){var i=ln(n,uo(xa));r|=u}return $i(e,r,t,n,i)})),Da=Zr((function(e,t,n){var r=3;if(n.length){var i=ln(n,uo(Da));r|=u}return $i(t,r,e,n,i)}));function La(e,t,n){var r,a,s,c,u,l,h=0,d=!1,f=!1,p=!0;if("function"!=typeof e)throw new Oe(o);function g(t){var n=r,o=a;return r=a=i,h=t,c=e.apply(o,n)}function A(e){return h=e,u=Lo(m,t),d?g(e):c}function v(e){var n=e-l;return l===i||n>=t||n<0||f&&e-h>=s}function m(){var e=ka();if(v(e))return y(e);u=Lo(m,function(e){var n=t-(e-l);return f?_n(n,s-(e-h)):n}(e))}function y(e){return u=i,p&&r?g(e):(r=a=i,c)}function b(){var e=ka(),n=v(e);if(r=arguments,a=this,l=e,n){if(u===i)return A(l);if(f)return Ii(u),u=Lo(m,t),g(l)}return u===i&&(u=Lo(m,t)),c}return t=ys(t)||0,rs(n)&&(d=!!n.leading,s=(f="maxWait"in n)?bn(ys(n.maxWait)||0,t):s,p="trailing"in n?!!n.trailing:p),b.cancel=function(){u!==i&&Ii(u),h=0,r=l=a=u=i},b.flush=function(){return u===i?c:y(ka())},b}var Pa=Zr((function(e,t){return dr(e,1,t)})),Ba=Zr((function(e,t,n){return dr(e,ys(t)||0,n)}));function Ma(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Oe(o);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Ma.Cache||Yn),n}function ja(e){if("function"!=typeof e)throw new Oe(o);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Ma.Cache=Yn;var Ua=Ei((function(e,t){var n=(t=1==t.length&&Wa(t[0])?Dt(t[0],Xt(lo())):Dt(yr(t,1),Xt(lo()))).length;return Zr((function(r){for(var i=-1,o=_n(r.length,n);++i<o;)r[i]=t[i].call(this,r[i]);return Ct(e,this,r)}))})),Fa=Zr((function(e,t){var n=ln(t,uo(Fa));return $i(e,u,i,t,n)})),Qa=Zr((function(e,t){var n=ln(t,uo(Qa));return $i(e,l,i,t,n)})),Ga=io((function(e,t){return $i(e,d,i,i,i,t)}));function qa(e,t){return e===t||e!=e&&t!=t}var Va=zi(Rr),Ka=zi((function(e,t){return e>=t})),Ha=Dr(function(){return arguments}())?Dr:function(e){return is(e)&&Be.call(e,"callee")&&!Ye.call(e,"callee")},Wa=r.isArray,za=yt?Xt(yt):function(e){return is(e)&&Tr(e)==L};function Ya(e){return null!=e&&ns(e.length)&&!es(e)}function Ja(e){return is(e)&&Ya(e)}var Xa=jt||yc,Za=bt?Xt(bt):function(e){return is(e)&&Tr(e)==_};function $a(e){if(!is(e))return!1;var t=Tr(e);return t==E||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!ss(e)}function es(e){if(!rs(e))return!1;var t=Tr(e);return t==w||t==I||"[object AsyncFunction]"==t||"[object Proxy]"==t}function ts(e){return"number"==typeof e&&e==vs(e)}function ns(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=p}function rs(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function is(e){return null!=e&&"object"==typeof e}var os=_t?Xt(_t):function(e){return is(e)&&vo(e)==C};function as(e){return"number"==typeof e||is(e)&&Tr(e)==S}function ss(e){if(!is(e)||Tr(e)!=T)return!1;var t=We(e);if(null===t)return!0;var n=Be.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Pe.call(n)==Fe}var cs=Et?Xt(Et):function(e){return is(e)&&Tr(e)==k};var us=wt?Xt(wt):function(e){return is(e)&&vo(e)==O};function ls(e){return"string"==typeof e||!Wa(e)&&is(e)&&Tr(e)==N}function hs(e){return"symbol"==typeof e||is(e)&&Tr(e)==x}var ds=It?Xt(It):function(e){return is(e)&&ns(e.length)&&!!at[Tr(e)]};var fs=zi(Fr),ps=zi((function(e,t){return e<=t}));function gs(e){if(!e)return[];if(Ya(e))return ls(e)?pn(e):Ni(e);if(et&&e[et])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[et]());var t=vo(e);return(t==C?cn:t==O?hn:qs)(e)}function As(e){return e?(e=ys(e))===f||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function vs(e){var t=As(e),n=t%1;return t==t?n?t-n:t:0}function ms(e){return e?ur(vs(e),0,A):0}function ys(e){if("number"==typeof e)return e;if(hs(e))return g;if(rs(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=rs(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Jt(e);var n=ve.test(e);return n||ye.test(e)?lt(e.slice(2),n?2:8):Ae.test(e)?g:+e}function bs(e){return xi(e,Ps(e))}function _s(e){return null==e?"":hi(e)}var Es=Li((function(e,t){if(So(t)||Ya(t))xi(t,Ls(t),e);else for(var n in t)Be.call(t,n)&&rr(e,n,t[n])})),ws=Li((function(e,t){xi(t,Ps(t),e)})),Is=Li((function(e,t,n,r){xi(t,Ps(t),e,r)})),Cs=Li((function(e,t,n,r){xi(t,Ls(t),e,r)})),Ss=io(cr);var Ts=Zr((function(e,t){e=Te(e);var n=-1,r=t.length,o=r>2?t[2]:i;for(o&&Eo(t[0],t[1],o)&&(r=1);++n<r;)for(var a=t[n],s=Ps(a),c=-1,u=s.length;++c<u;){var l=s[c],h=e[l];(h===i||qa(h,De[l])&&!Be.call(e,l))&&(e[l]=a[l])}return e})),Rs=Zr((function(e){return e.push(i,to),Ct(Ms,i,e)}));function ks(e,t,n){var r=null==e?i:Cr(e,t);return r===i?n:r}function Os(e,t){return null!=e&&mo(e,t,Or)}var Ns=qi((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Ue.call(t)),e[t]=n}),rc(ac)),xs=qi((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Ue.call(t)),Be.call(e,t)?e[t].push(n):e[t]=[n]}),lo),Ds=Zr(xr);function Ls(e){return Ya(e)?Zn(e):jr(e)}function Ps(e){return Ya(e)?Zn(e,!0):Ur(e)}var Bs=Li((function(e,t,n){Vr(e,t,n)})),Ms=Li((function(e,t,n,r){Vr(e,t,n,r)})),js=io((function(e,t){var n={};if(null==e)return n;var r=!1;t=Dt(t,(function(t){return t=_i(t,e),r||(r=t.length>1),t})),xi(e,ao(e),n),r&&(n=lr(n,7,no));for(var i=t.length;i--;)fi(n,t[i]);return n}));var Us=io((function(e,t){return null==e?{}:function(e,t){return Wr(e,t,(function(t,n){return Os(e,n)}))}(e,t)}));function Fs(e,t){if(null==e)return{};var n=Dt(ao(e),(function(e){return[e]}));return t=lo(t),Wr(e,n,(function(e,n){return t(e,n[0])}))}var Qs=Zi(Ls),Gs=Zi(Ps);function qs(e){return null==e?[]:Zt(e,Ls(e))}var Vs=ji((function(e,t,n){return t=t.toLowerCase(),e+(n?Ks(t):t)}));function Ks(e){return $s(_s(e).toLowerCase())}function Hs(e){return(e=_s(e))&&e.replace(_e,rn).replace($e,"")}var Ws=ji((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),zs=ji((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),Ys=Mi("toLowerCase");var Js=ji((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));var Xs=ji((function(e,t,n){return e+(n?" ":"")+$s(t)}));var Zs=ji((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),$s=Mi("toUpperCase");function ec(e,t,n){return e=_s(e),(t=n?i:t)===i?function(e){return rt.test(e)}(e)?function(e){return e.match(tt)||[]}(e):function(e){return e.match(he)||[]}(e):e.match(t)||[]}var tc=Zr((function(e,t){try{return Ct(e,i,t)}catch(e){return $a(e)?e:new Ie(e)}})),nc=io((function(e,t){return Tt(t,(function(t){t=Fo(t),sr(e,t,xa(e[t],e))})),e}));function rc(e){return function(){return e}}var ic=Qi(),oc=Qi(!0);function ac(e){return e}function sc(e){return Mr("function"==typeof e?e:lr(e,1))}var cc=Zr((function(e,t){return function(n){return xr(n,e,t)}})),uc=Zr((function(e,t){return function(n){return xr(e,n,t)}}));function lc(e,t,n){var r=Ls(t),i=Ir(t,r);null!=n||rs(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=Ir(t,Ls(t)));var o=!(rs(n)&&"chain"in n&&!n.chain),a=es(e);return Tt(i,(function(n){var r=t[n];e[n]=r,a&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__),i=n.__actions__=Ni(this.__actions__);return i.push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,Lt([this.value()],arguments))})})),e}function hc(){}var dc=Ki(Dt),fc=Ki(kt),pc=Ki(Mt);function gc(e){return wo(e)?Kt(Fo(e)):function(e){return function(t){return Cr(t,e)}}(e)}var Ac=Wi(),vc=Wi(!0);function mc(){return[]}function yc(){return!1}var bc=Vi((function(e,t){return e+t}),0),_c=Ji("ceil"),Ec=Vi((function(e,t){return e/t}),1),wc=Ji("floor");var Ic,Cc=Vi((function(e,t){return e*t}),1),Sc=Ji("round"),Tc=Vi((function(e,t){return e-t}),0);return Gn.after=function(e,t){if("function"!=typeof t)throw new Oe(o);return e=vs(e),function(){if(--e<1)return t.apply(this,arguments)}},Gn.ary=Oa,Gn.assign=Es,Gn.assignIn=ws,Gn.assignInWith=Is,Gn.assignWith=Cs,Gn.at=Ss,Gn.before=Na,Gn.bind=xa,Gn.bindAll=nc,Gn.bindKey=Da,Gn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Wa(e)?e:[e]},Gn.chain=ga,Gn.chunk=function(e,t,n){t=(n?Eo(e,t,n):t===i)?1:bn(vs(t),0);var o=null==e?0:e.length;if(!o||t<1)return[];for(var a=0,s=0,c=r(gt(o/t));a<o;)c[s++]=oi(e,a,a+=t);return c},Gn.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i},Gn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=r(e-1),n=arguments[0],i=e;i--;)t[i-1]=arguments[i];return Lt(Wa(n)?Ni(n):[n],yr(t,1))},Gn.cond=function(e){var t=null==e?0:e.length,n=lo();return e=t?Dt(e,(function(e){if("function"!=typeof e[1])throw new Oe(o);return[n(e[0]),e[1]]})):[],Zr((function(n){for(var r=-1;++r<t;){var i=e[r];if(Ct(i[0],this,n))return Ct(i[1],this,n)}}))},Gn.conforms=function(e){return function(e){var t=Ls(e);return function(n){return hr(n,e,t)}}(lr(e,1))},Gn.constant=rc,Gn.countBy=ma,Gn.create=function(e,t){var n=qn(e);return null==t?n:ar(n,t)},Gn.curry=function e(t,n,r){var o=$i(t,8,i,i,i,i,i,n=r?i:n);return o.placeholder=e.placeholder,o},Gn.curryRight=function e(t,n,r){var o=$i(t,c,i,i,i,i,i,n=r?i:n);return o.placeholder=e.placeholder,o},Gn.debounce=La,Gn.defaults=Ts,Gn.defaultsDeep=Rs,Gn.defer=Pa,Gn.delay=Ba,Gn.difference=qo,Gn.differenceBy=Vo,Gn.differenceWith=Ko,Gn.drop=function(e,t,n){var r=null==e?0:e.length;return r?oi(e,(t=n||t===i?1:vs(t))<0?0:t,r):[]},Gn.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?oi(e,0,(t=r-(t=n||t===i?1:vs(t)))<0?0:t):[]},Gn.dropRightWhile=function(e,t){return e&&e.length?gi(e,lo(t,3),!0,!0):[]},Gn.dropWhile=function(e,t){return e&&e.length?gi(e,lo(t,3),!0):[]},Gn.fill=function(e,t,n,r){var o=null==e?0:e.length;return o?(n&&"number"!=typeof n&&Eo(e,t,n)&&(n=0,r=o),function(e,t,n,r){var o=e.length;for((n=vs(n))<0&&(n=-n>o?0:o+n),(r=r===i||r>o?o:vs(r))<0&&(r+=o),r=n>r?0:ms(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},Gn.filter=function(e,t){return(Wa(e)?Ot:mr)(e,lo(t,3))},Gn.flatMap=function(e,t){return yr(Sa(e,t),1)},Gn.flatMapDeep=function(e,t){return yr(Sa(e,t),f)},Gn.flatMapDepth=function(e,t,n){return n=n===i?1:vs(n),yr(Sa(e,t),n)},Gn.flatten=zo,Gn.flattenDeep=function(e){return(null==e?0:e.length)?yr(e,f):[]},Gn.flattenDepth=function(e,t){return(null==e?0:e.length)?yr(e,t=t===i?1:vs(t)):[]},Gn.flip=function(e){return $i(e,512)},Gn.flow=ic,Gn.flowRight=oc,Gn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},Gn.functions=function(e){return null==e?[]:Ir(e,Ls(e))},Gn.functionsIn=function(e){return null==e?[]:Ir(e,Ps(e))},Gn.groupBy=wa,Gn.initial=function(e){return(null==e?0:e.length)?oi(e,0,-1):[]},Gn.intersection=Jo,Gn.intersectionBy=Xo,Gn.intersectionWith=Zo,Gn.invert=Ns,Gn.invertBy=xs,Gn.invokeMap=Ia,Gn.iteratee=sc,Gn.keyBy=Ca,Gn.keys=Ls,Gn.keysIn=Ps,Gn.map=Sa,Gn.mapKeys=function(e,t){var n={};return t=lo(t,3),Er(e,(function(e,r,i){sr(n,t(e,r,i),e)})),n},Gn.mapValues=function(e,t){var n={};return t=lo(t,3),Er(e,(function(e,r,i){sr(n,r,t(e,r,i))})),n},Gn.matches=function(e){return Gr(lr(e,1))},Gn.matchesProperty=function(e,t){return qr(e,lr(t,1))},Gn.memoize=Ma,Gn.merge=Bs,Gn.mergeWith=Ms,Gn.method=cc,Gn.methodOf=uc,Gn.mixin=lc,Gn.negate=ja,Gn.nthArg=function(e){return e=vs(e),Zr((function(t){return Kr(t,e)}))},Gn.omit=js,Gn.omitBy=function(e,t){return Fs(e,ja(lo(t)))},Gn.once=function(e){return Na(2,e)},Gn.orderBy=function(e,t,n,r){return null==e?[]:(Wa(t)||(t=null==t?[]:[t]),Wa(n=r?i:n)||(n=null==n?[]:[n]),Hr(e,t,n))},Gn.over=dc,Gn.overArgs=Ua,Gn.overEvery=fc,Gn.overSome=pc,Gn.partial=Fa,Gn.partialRight=Qa,Gn.partition=Ta,Gn.pick=Us,Gn.pickBy=Fs,Gn.property=gc,Gn.propertyOf=function(e){return function(t){return null==e?i:Cr(e,t)}},Gn.pull=ea,Gn.pullAll=ta,Gn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?zr(e,t,lo(n,2)):e},Gn.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?zr(e,t,i,n):e},Gn.pullAt=na,Gn.range=Ac,Gn.rangeRight=vc,Gn.rearg=Ga,Gn.reject=function(e,t){return(Wa(e)?Ot:mr)(e,ja(lo(t,3)))},Gn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;for(t=lo(t,3);++r<o;){var a=e[r];t(a,r,e)&&(n.push(a),i.push(r))}return Yr(e,i),n},Gn.rest=function(e,t){if("function"!=typeof e)throw new Oe(o);return Zr(e,t=t===i?t:vs(t))},Gn.reverse=ra,Gn.sampleSize=function(e,t,n){return t=(n?Eo(e,t,n):t===i)?1:vs(t),(Wa(e)?er:ei)(e,t)},Gn.set=function(e,t,n){return null==e?e:ti(e,t,n)},Gn.setWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:ti(e,t,n,r)},Gn.shuffle=function(e){return(Wa(e)?tr:ii)(e)},Gn.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&Eo(e,t,n)?(t=0,n=r):(t=null==t?0:vs(t),n=n===i?r:vs(n)),oi(e,t,n)):[]},Gn.sortBy=Ra,Gn.sortedUniq=function(e){return e&&e.length?ui(e):[]},Gn.sortedUniqBy=function(e,t){return e&&e.length?ui(e,lo(t,2)):[]},Gn.split=function(e,t,n){return n&&"number"!=typeof n&&Eo(e,t,n)&&(t=n=i),(n=n===i?A:n>>>0)?(e=_s(e))&&("string"==typeof t||null!=t&&!cs(t))&&!(t=hi(t))&&sn(e)?wi(pn(e),0,n):e.split(t,n):[]},Gn.spread=function(e,t){if("function"!=typeof e)throw new Oe(o);return t=null==t?0:bn(vs(t),0),Zr((function(n){var r=n[t],i=wi(n,0,t);return r&&Lt(i,r),Ct(e,this,i)}))},Gn.tail=function(e){var t=null==e?0:e.length;return t?oi(e,1,t):[]},Gn.take=function(e,t,n){return e&&e.length?oi(e,0,(t=n||t===i?1:vs(t))<0?0:t):[]},Gn.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?oi(e,(t=r-(t=n||t===i?1:vs(t)))<0?0:t,r):[]},Gn.takeRightWhile=function(e,t){return e&&e.length?gi(e,lo(t,3),!1,!0):[]},Gn.takeWhile=function(e,t){return e&&e.length?gi(e,lo(t,3)):[]},Gn.tap=function(e,t){return t(e),e},Gn.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new Oe(o);return rs(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),La(e,t,{leading:r,maxWait:t,trailing:i})},Gn.thru=Aa,Gn.toArray=gs,Gn.toPairs=Qs,Gn.toPairsIn=Gs,Gn.toPath=function(e){return Wa(e)?Dt(e,Fo):hs(e)?[e]:Ni(Uo(_s(e)))},Gn.toPlainObject=bs,Gn.transform=function(e,t,n){var r=Wa(e),i=r||Xa(e)||ds(e);if(t=lo(t,4),null==n){var o=e&&e.constructor;n=i?r?new o:[]:rs(e)&&es(o)?qn(We(e)):{}}return(i?Tt:Er)(e,(function(e,r,i){return t(n,e,r,i)})),n},Gn.unary=function(e){return Oa(e,1)},Gn.union=ia,Gn.unionBy=oa,Gn.unionWith=aa,Gn.uniq=function(e){return e&&e.length?di(e):[]},Gn.uniqBy=function(e,t){return e&&e.length?di(e,lo(t,2)):[]},Gn.uniqWith=function(e,t){return t="function"==typeof t?t:i,e&&e.length?di(e,i,t):[]},Gn.unset=function(e,t){return null==e||fi(e,t)},Gn.unzip=sa,Gn.unzipWith=ca,Gn.update=function(e,t,n){return null==e?e:pi(e,t,bi(n))},Gn.updateWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:pi(e,t,bi(n),r)},Gn.values=qs,Gn.valuesIn=function(e){return null==e?[]:Zt(e,Ps(e))},Gn.without=ua,Gn.words=ec,Gn.wrap=function(e,t){return Fa(bi(t),e)},Gn.xor=la,Gn.xorBy=ha,Gn.xorWith=da,Gn.zip=fa,Gn.zipObject=function(e,t){return mi(e||[],t||[],rr)},Gn.zipObjectDeep=function(e,t){return mi(e||[],t||[],ti)},Gn.zipWith=pa,Gn.entries=Qs,Gn.entriesIn=Gs,Gn.extend=ws,Gn.extendWith=Is,lc(Gn,Gn),Gn.add=bc,Gn.attempt=tc,Gn.camelCase=Vs,Gn.capitalize=Ks,Gn.ceil=_c,Gn.clamp=function(e,t,n){return n===i&&(n=t,t=i),n!==i&&(n=(n=ys(n))==n?n:0),t!==i&&(t=(t=ys(t))==t?t:0),ur(ys(e),t,n)},Gn.clone=function(e){return lr(e,4)},Gn.cloneDeep=function(e){return lr(e,5)},Gn.cloneDeepWith=function(e,t){return lr(e,5,t="function"==typeof t?t:i)},Gn.cloneWith=function(e,t){return lr(e,4,t="function"==typeof t?t:i)},Gn.conformsTo=function(e,t){return null==t||hr(e,t,Ls(t))},Gn.deburr=Hs,Gn.defaultTo=function(e,t){return null==e||e!=e?t:e},Gn.divide=Ec,Gn.endsWith=function(e,t,n){e=_s(e),t=hi(t);var r=e.length,o=n=n===i?r:ur(vs(n),0,r);return(n-=t.length)>=0&&e.slice(n,o)==t},Gn.eq=qa,Gn.escape=function(e){return(e=_s(e))&&X.test(e)?e.replace(Y,on):e},Gn.escapeRegExp=function(e){return(e=_s(e))&&oe.test(e)?e.replace(ie,"\\$&"):e},Gn.every=function(e,t,n){var r=Wa(e)?kt:Ar;return n&&Eo(e,t,n)&&(t=i),r(e,lo(t,3))},Gn.find=ya,Gn.findIndex=Ho,Gn.findKey=function(e,t){return Ut(e,lo(t,3),Er)},Gn.findLast=ba,Gn.findLastIndex=Wo,Gn.findLastKey=function(e,t){return Ut(e,lo(t,3),wr)},Gn.floor=wc,Gn.forEach=_a,Gn.forEachRight=Ea,Gn.forIn=function(e,t){return null==e?e:br(e,lo(t,3),Ps)},Gn.forInRight=function(e,t){return null==e?e:_r(e,lo(t,3),Ps)},Gn.forOwn=function(e,t){return e&&Er(e,lo(t,3))},Gn.forOwnRight=function(e,t){return e&&wr(e,lo(t,3))},Gn.get=ks,Gn.gt=Va,Gn.gte=Ka,Gn.has=function(e,t){return null!=e&&mo(e,t,kr)},Gn.hasIn=Os,Gn.head=Yo,Gn.identity=ac,Gn.includes=function(e,t,n,r){e=Ya(e)?e:qs(e),n=n&&!r?vs(n):0;var i=e.length;return n<0&&(n=bn(i+n,0)),ls(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&Qt(e,t,n)>-1},Gn.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:vs(n);return i<0&&(i=bn(r+i,0)),Qt(e,t,i)},Gn.inRange=function(e,t,n){return t=As(t),n===i?(n=t,t=0):n=As(n),function(e,t,n){return e>=_n(t,n)&&e<bn(t,n)}(e=ys(e),t,n)},Gn.invoke=Ds,Gn.isArguments=Ha,Gn.isArray=Wa,Gn.isArrayBuffer=za,Gn.isArrayLike=Ya,Gn.isArrayLikeObject=Ja,Gn.isBoolean=function(e){return!0===e||!1===e||is(e)&&Tr(e)==b},Gn.isBuffer=Xa,Gn.isDate=Za,Gn.isElement=function(e){return is(e)&&1===e.nodeType&&!ss(e)},Gn.isEmpty=function(e){if(null==e)return!0;if(Ya(e)&&(Wa(e)||"string"==typeof e||"function"==typeof e.splice||Xa(e)||ds(e)||Ha(e)))return!e.length;var t=vo(e);if(t==C||t==O)return!e.size;if(So(e))return!jr(e).length;for(var n in e)if(Be.call(e,n))return!1;return!0},Gn.isEqual=function(e,t){return Lr(e,t)},Gn.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:i)?n(e,t):i;return r===i?Lr(e,t,i,n):!!r},Gn.isError=$a,Gn.isFinite=function(e){return"number"==typeof e&&Ht(e)},Gn.isFunction=es,Gn.isInteger=ts,Gn.isLength=ns,Gn.isMap=os,Gn.isMatch=function(e,t){return e===t||Pr(e,t,fo(t))},Gn.isMatchWith=function(e,t,n){return n="function"==typeof n?n:i,Pr(e,t,fo(t),n)},Gn.isNaN=function(e){return as(e)&&e!=+e},Gn.isNative=function(e){if(Co(e))throw new Ie("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Br(e)},Gn.isNil=function(e){return null==e},Gn.isNull=function(e){return null===e},Gn.isNumber=as,Gn.isObject=rs,Gn.isObjectLike=is,Gn.isPlainObject=ss,Gn.isRegExp=cs,Gn.isSafeInteger=function(e){return ts(e)&&e>=-9007199254740991&&e<=p},Gn.isSet=us,Gn.isString=ls,Gn.isSymbol=hs,Gn.isTypedArray=ds,Gn.isUndefined=function(e){return e===i},Gn.isWeakMap=function(e){return is(e)&&vo(e)==D},Gn.isWeakSet=function(e){return is(e)&&"[object WeakSet]"==Tr(e)},Gn.join=function(e,t){return null==e?"":mn.call(e,t)},Gn.kebabCase=Ws,Gn.last=$o,Gn.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=r;return n!==i&&(o=(o=vs(n))<0?bn(r+o,0):_n(o,r-1)),t==t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,o):Ft(e,qt,o,!0)},Gn.lowerCase=zs,Gn.lowerFirst=Ys,Gn.lt=fs,Gn.lte=ps,Gn.max=function(e){return e&&e.length?vr(e,ac,Rr):i},Gn.maxBy=function(e,t){return e&&e.length?vr(e,lo(t,2),Rr):i},Gn.mean=function(e){return Vt(e,ac)},Gn.meanBy=function(e,t){return Vt(e,lo(t,2))},Gn.min=function(e){return e&&e.length?vr(e,ac,Fr):i},Gn.minBy=function(e,t){return e&&e.length?vr(e,lo(t,2),Fr):i},Gn.stubArray=mc,Gn.stubFalse=yc,Gn.stubObject=function(){return{}},Gn.stubString=function(){return""},Gn.stubTrue=function(){return!0},Gn.multiply=Cc,Gn.nth=function(e,t){return e&&e.length?Kr(e,vs(t)):i},Gn.noConflict=function(){return ft._===this&&(ft._=Qe),this},Gn.noop=hc,Gn.now=ka,Gn.pad=function(e,t,n){e=_s(e);var r=(t=vs(t))?fn(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return Hi(vt(i),n)+e+Hi(gt(i),n)},Gn.padEnd=function(e,t,n){e=_s(e);var r=(t=vs(t))?fn(e):0;return t&&r<t?e+Hi(t-r,n):e},Gn.padStart=function(e,t,n){e=_s(e);var r=(t=vs(t))?fn(e):0;return t&&r<t?Hi(t-r,n)+e:e},Gn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),wn(_s(e).replace(ae,""),t||0)},Gn.random=function(e,t,n){if(n&&"boolean"!=typeof n&&Eo(e,t,n)&&(t=n=i),n===i&&("boolean"==typeof t?(n=t,t=i):"boolean"==typeof e&&(n=e,e=i)),e===i&&t===i?(e=0,t=1):(e=As(e),t===i?(t=e,e=0):t=As(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var o=In();return _n(e+o*(t-e+ut("1e-"+((o+"").length-1))),t)}return Jr(e,t)},Gn.reduce=function(e,t,n){var r=Wa(e)?Pt:Wt,i=arguments.length<3;return r(e,lo(t,4),n,i,pr)},Gn.reduceRight=function(e,t,n){var r=Wa(e)?Bt:Wt,i=arguments.length<3;return r(e,lo(t,4),n,i,gr)},Gn.repeat=function(e,t,n){return t=(n?Eo(e,t,n):t===i)?1:vs(t),Xr(_s(e),t)},Gn.replace=function(){var e=arguments,t=_s(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Gn.result=function(e,t,n){var r=-1,o=(t=_i(t,e)).length;for(o||(o=1,e=i);++r<o;){var a=null==e?i:e[Fo(t[r])];a===i&&(r=o,a=n),e=es(a)?a.call(e):a}return e},Gn.round=Sc,Gn.runInContext=e,Gn.sample=function(e){return(Wa(e)?$n:$r)(e)},Gn.size=function(e){if(null==e)return 0;if(Ya(e))return ls(e)?fn(e):e.length;var t=vo(e);return t==C||t==O?e.size:jr(e).length},Gn.snakeCase=Js,Gn.some=function(e,t,n){var r=Wa(e)?Mt:ai;return n&&Eo(e,t,n)&&(t=i),r(e,lo(t,3))},Gn.sortedIndex=function(e,t){return si(e,t)},Gn.sortedIndexBy=function(e,t,n){return ci(e,t,lo(n,2))},Gn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=si(e,t);if(r<n&&qa(e[r],t))return r}return-1},Gn.sortedLastIndex=function(e,t){return si(e,t,!0)},Gn.sortedLastIndexBy=function(e,t,n){return ci(e,t,lo(n,2),!0)},Gn.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=si(e,t,!0)-1;if(qa(e[n],t))return n}return-1},Gn.startCase=Xs,Gn.startsWith=function(e,t,n){return e=_s(e),n=null==n?0:ur(vs(n),0,e.length),t=hi(t),e.slice(n,n+t.length)==t},Gn.subtract=Tc,Gn.sum=function(e){return e&&e.length?zt(e,ac):0},Gn.sumBy=function(e,t){return e&&e.length?zt(e,lo(t,2)):0},Gn.template=function(e,t,n){var r=Gn.templateSettings;n&&Eo(e,t,n)&&(t=i),e=_s(e),t=Is({},t,r,eo);var o,a,s=Is({},t.imports,r.imports,eo),c=Ls(s),u=Zt(s,c),l=0,h=t.interpolate||Ee,d="__p += '",f=Re((t.escape||Ee).source+"|"+h.source+"|"+(h===ee?pe:Ee).source+"|"+(t.evaluate||Ee).source+"|$","g"),p="//# sourceURL="+(Be.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ot+"]")+"\n";e.replace(f,(function(t,n,r,i,s,c){return r||(r=i),d+=e.slice(l,c).replace(we,an),n&&(o=!0,d+="' +\n__e("+n+") +\n'"),s&&(a=!0,d+="';\n"+s+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=c+t.length,t})),d+="';\n";var g=Be.call(t,"variable")&&t.variable;if(g){if(de.test(g))throw new Ie("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(a?d.replace(K,""):d).replace(H,"$1").replace(W,"$1;"),d="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var A=tc((function(){return Ce(c,p+"return "+d).apply(i,u)}));if(A.source=d,$a(A))throw A;return A},Gn.times=function(e,t){if((e=vs(e))<1||e>p)return[];var n=A,r=_n(e,A);t=lo(t),e-=A;for(var i=Yt(r,t);++n<e;)t(n);return i},Gn.toFinite=As,Gn.toInteger=vs,Gn.toLength=ms,Gn.toLower=function(e){return _s(e).toLowerCase()},Gn.toNumber=ys,Gn.toSafeInteger=function(e){return e?ur(vs(e),-9007199254740991,p):0===e?e:0},Gn.toString=_s,Gn.toUpper=function(e){return _s(e).toUpperCase()},Gn.trim=function(e,t,n){if((e=_s(e))&&(n||t===i))return Jt(e);if(!e||!(t=hi(t)))return e;var r=pn(e),o=pn(t);return wi(r,en(r,o),tn(r,o)+1).join("")},Gn.trimEnd=function(e,t,n){if((e=_s(e))&&(n||t===i))return e.slice(0,gn(e)+1);if(!e||!(t=hi(t)))return e;var r=pn(e);return wi(r,0,tn(r,pn(t))+1).join("")},Gn.trimStart=function(e,t,n){if((e=_s(e))&&(n||t===i))return e.replace(ae,"");if(!e||!(t=hi(t)))return e;var r=pn(e);return wi(r,en(r,pn(t))).join("")},Gn.truncate=function(e,t){var n=30,r="...";if(rs(t)){var o="separator"in t?t.separator:o;n="length"in t?vs(t.length):n,r="omission"in t?hi(t.omission):r}var a=(e=_s(e)).length;if(sn(e)){var s=pn(e);a=s.length}if(n>=a)return e;var c=n-fn(r);if(c<1)return r;var u=s?wi(s,0,c).join(""):e.slice(0,c);if(o===i)return u+r;if(s&&(c+=u.length-c),cs(o)){if(e.slice(c).search(o)){var l,h=u;for(o.global||(o=Re(o.source,_s(ge.exec(o))+"g")),o.lastIndex=0;l=o.exec(h);)var d=l.index;u=u.slice(0,d===i?c:d)}}else if(e.indexOf(hi(o),c)!=c){var f=u.lastIndexOf(o);f>-1&&(u=u.slice(0,f))}return u+r},Gn.unescape=function(e){return(e=_s(e))&&J.test(e)?e.replace(z,An):e},Gn.uniqueId=function(e){var t=++Me;return _s(e)+t},Gn.upperCase=Zs,Gn.upperFirst=$s,Gn.each=_a,Gn.eachRight=Ea,Gn.first=Yo,lc(Gn,(Ic={},Er(Gn,(function(e,t){Be.call(Gn.prototype,t)||(Ic[t]=e)})),Ic),{chain:!1}),Gn.VERSION="4.17.21",Tt(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Gn[e].placeholder=Gn})),Tt(["drop","take"],(function(e,t){Hn.prototype[e]=function(n){n=n===i?1:bn(vs(n),0);var r=this.__filtered__&&!t?new Hn(this):this.clone();return r.__filtered__?r.__takeCount__=_n(n,r.__takeCount__):r.__views__.push({size:_n(n,A),type:e+(r.__dir__<0?"Right":"")}),r},Hn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),Tt(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;Hn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:lo(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),Tt(["head","last"],(function(e,t){var n="take"+(t?"Right":"");Hn.prototype[e]=function(){return this[n](1).value()[0]}})),Tt(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");Hn.prototype[e]=function(){return this.__filtered__?new Hn(this):this[n](1)}})),Hn.prototype.compact=function(){return this.filter(ac)},Hn.prototype.find=function(e){return this.filter(e).head()},Hn.prototype.findLast=function(e){return this.reverse().find(e)},Hn.prototype.invokeMap=Zr((function(e,t){return"function"==typeof e?new Hn(this):this.map((function(n){return xr(n,e,t)}))})),Hn.prototype.reject=function(e){return this.filter(ja(lo(e)))},Hn.prototype.slice=function(e,t){e=vs(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Hn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==i&&(n=(t=vs(t))<0?n.dropRight(-t):n.take(t-e)),n)},Hn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Hn.prototype.toArray=function(){return this.take(A)},Er(Hn.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),o=Gn[r?"take"+("last"==t?"Right":""):t],a=r||/^find/.test(t);o&&(Gn.prototype[t]=function(){var t=this.__wrapped__,s=r?[1]:arguments,c=t instanceof Hn,u=s[0],l=c||Wa(t),h=function(e){var t=o.apply(Gn,Lt([e],s));return r&&d?t[0]:t};l&&n&&"function"==typeof u&&1!=u.length&&(c=l=!1);var d=this.__chain__,f=!!this.__actions__.length,p=a&&!d,g=c&&!f;if(!a&&l){t=g?t:new Hn(this);var A=e.apply(t,s);return A.__actions__.push({func:Aa,args:[h],thisArg:i}),new Kn(A,d)}return p&&g?e.apply(this,s):(A=this.thru(h),p?r?A.value()[0]:A.value():A)})})),Tt(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Ne[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);Gn.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(Wa(i)?i:[],e)}return this[n]((function(n){return t.apply(Wa(n)?n:[],e)}))}})),Er(Hn.prototype,(function(e,t){var n=Gn[t];if(n){var r=n.name+"";Be.call(Dn,r)||(Dn[r]=[]),Dn[r].push({name:t,func:n})}})),Dn[Gi(i,2).name]=[{name:"wrapper",func:i}],Hn.prototype.clone=function(){var e=new Hn(this.__wrapped__);return e.__actions__=Ni(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ni(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ni(this.__views__),e},Hn.prototype.reverse=function(){if(this.__filtered__){var e=new Hn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Hn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Wa(e),r=t<0,i=n?e.length:0,o=function(e,t,n){var r=-1,i=n.length;for(;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=_n(t,e+a);break;case"takeRight":e=bn(e,t-a)}}return{start:e,end:t}}(0,i,this.__views__),a=o.start,s=o.end,c=s-a,u=r?s:a-1,l=this.__iteratees__,h=l.length,d=0,f=_n(c,this.__takeCount__);if(!n||!r&&i==c&&f==c)return Ai(e,this.__actions__);var p=[];e:for(;c--&&d<f;){for(var g=-1,A=e[u+=t];++g<h;){var v=l[g],m=v.iteratee,y=v.type,b=m(A);if(2==y)A=b;else if(!b){if(1==y)continue e;break e}}p[d++]=A}return p},Gn.prototype.at=va,Gn.prototype.chain=function(){return ga(this)},Gn.prototype.commit=function(){return new Kn(this.value(),this.__chain__)},Gn.prototype.next=function(){this.__values__===i&&(this.__values__=gs(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?i:this.__values__[this.__index__++]}},Gn.prototype.plant=function(e){for(var t,n=this;n instanceof Vn;){var r=Go(n);r.__index__=0,r.__values__=i,t?o.__wrapped__=r:t=r;var o=r;n=n.__wrapped__}return o.__wrapped__=e,t},Gn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Hn){var t=e;return this.__actions__.length&&(t=new Hn(this)),(t=t.reverse()).__actions__.push({func:Aa,args:[ra],thisArg:i}),new Kn(t,this.__chain__)}return this.thru(ra)},Gn.prototype.toJSON=Gn.prototype.valueOf=Gn.prototype.value=function(){return Ai(this.__wrapped__,this.__actions__)},Gn.prototype.first=Gn.prototype.head,et&&(Gn.prototype[et]=function(){return this}),Gn}();ft._=vn,(r=function(){return vn}.call(t,n,t,e))===i||(e.exports=r)}.call(this)},733:(e,t,n)=>{var r=n(6738);function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(i.Cache||r),n}i.Cache=r,e.exports=i},1100:(e,t,n)=>{var r=n(7772);e.exports=function(){return r.Date.now()}},981:e=>{e.exports=function(){return[]}},6330:e=>{e.exports=function(){return!1}},7642:(e,t,n)=>{var r=n(1704),i=n(9259),o=n(4795),a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,c=/^0o[0-7]+$/i,u=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(o(e))return NaN;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=s.test(e);return n||c.test(e)?u(e.slice(2),n?2:8):a.test(e)?NaN:+e}},6188:(e,t,n)=>{var r=n(1054);e.exports=function(e){return null==e?"":r(e)}},5047:e=>{var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof A?t:A,o=Object.create(i.prototype),a=new R(r||[]);return o._invoke=function(e,t,n){var r=h;return function(i,o){if(r===f)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw o;return O()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=C(a,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===h)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=f;var c=l(e,t,n);if("normal"===c.type){if(r=n.done?p:d,c.arg===g)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=p,n.method="throw",n.arg=c.arg)}}}(e,n,a),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var h="suspendedStart",d="suspendedYield",f="executing",p="completed",g={};function A(){}function v(){}function m(){}var y={};c(y,o,(function(){return this}));var b=Object.getPrototypeOf,_=b&&b(b(k([])));_&&_!==n&&r.call(_,o)&&(y=_);var E=m.prototype=A.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function I(e,t){function n(i,o,a,s){var c=l(e[i],e,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&r.call(h,"__await")?t.resolve(h.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(h).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}var i;this._invoke=function(e,r){function o(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(o,o):o()}}function C(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method))return g;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,g;var o=i.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function k(e){if(e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:O}}function O(){return{value:t,done:!0}}return v.prototype=m,c(E,"constructor",m),c(m,"constructor",v),v.displayName=c(m,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,s,"GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},w(I.prototype),c(I.prototype,a,(function(){return this})),e.AsyncIterator=I,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new I(u(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(E),c(E,s,"Generator"),c(E,o,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,R.prototype={constructor:R,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;T(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:k(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},6353:function(e,t,n){var r;!function(i,o){"use strict";var a="function",s="undefined",c="object",u="model",l="name",h="type",d="vendor",f="version",p="architecture",g="console",A="mobile",v="tablet",m="smarttv",y="wearable",b={extend:function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2==0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"==typeof e?e.replace(/[^\d\.]/g,"").split(".")[0]:o},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},_={rgx:function(e,t){for(var n,r,i,s,u,l,h=0;h<t.length&&!u;){var d=t[h],f=t[h+1];for(n=r=0;n<d.length&&!u;)if(u=d[n++].exec(e))for(i=0;i<f.length;i++)l=u[++r],typeof(s=f[i])===c&&s.length>0?2==s.length?typeof s[1]==a?this[s[0]]=s[1].call(this,l):this[s[0]]=s[1]:3==s.length?typeof s[1]!==a||s[1].exec&&s[1].test?this[s[0]]=l?l.replace(s[1],s[2]):o:this[s[0]]=l?s[1].call(this,l,s[2]):o:4==s.length&&(this[s[0]]=l?s[3].call(this,l.replace(s[1],s[2])):o):this[s]=l||o;h+=2}},str:function(e,t){for(var n in t)if(typeof t[n]===c&&t[n].length>0){for(var r=0;r<t[n].length;r++)if(b.has(t[n][r],e))return"?"===n?o:n}else if(b.has(t[n],e))return"?"===n?o:n;return e}},E={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},w={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]{3,6}).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[l,f],[/(opios)[\/\s]+([\w\.]+)/i],[[l,"Opera Mini"],f],[/\s(opr)\/([\w\.]+)/i],[[l,"Opera"],f],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim)(?:browser)?[\/\s]?([\w\.]*)/i,/(bidubrowser|baidubrowser)[\/\s]?([\w\.]+)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i],[l,f],[/(konqueror)\/([\w\.]+)/i],[[l,"Konqueror"],f],[/(trident).+rv[:\s]([\w\.]{1,9}).+like\sgecko/i],[[l,"IE"],f],[/(edge|edgios|edga|edg)\/((\d+)?[\w\.]+)/i],[[l,"Edge"],f],[/(yabrowser)\/([\w\.]+)/i],[[l,"Yandex"],f],[/(Avast)\/([\w\.]+)/i],[[l,"Avast Secure Browser"],f],[/(AVG)\/([\w\.]+)/i],[[l,"AVG Secure Browser"],f],[/(puffin)\/([\w\.]+)/i],[[l,"Puffin"],f],[/(focus)\/([\w\.]+)/i],[[l,"Firefox Focus"],f],[/(opt)\/([\w\.]+)/i],[[l,"Opera Touch"],f],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[l,"UCBrowser"],f],[/(comodo_dragon)\/([\w\.]+)/i],[[l,/_/g," "],f],[/(windowswechat qbcore)\/([\w\.]+)/i],[[l,"WeChat(Win) Desktop"],f],[/(micromessenger)\/([\w\.]+)/i],[[l,"WeChat"],f],[/(brave)\/([\w\.]+)/i],[[l,"Brave"],f],[/(whale)\/([\w\.]+)/i],[[l,"Whale"],f],[/(qqbrowserlite)\/([\w\.]+)/i],[l,f],[/(QQ)\/([\d\.]+)/i],[l,f],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[l,f],[/(baiduboxapp)[\/\s]?([\w\.]+)/i],[l,f],[/(2345Explorer)[\/\s]?([\w\.]+)/i],[l,f],[/(MetaSr)[\/\s]?([\w\.]+)/i],[l],[/(LBBROWSER)/i],[l],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[f,[l,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[f,[l,"Facebook"]],[/FBAN\/FBIOS|FB_IAB\/FB4A/i],[[l,"Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/android.+(line)\/([\w\.]+)\/iab/i],[l,f],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[f,[l,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[l,/(.+)/,"$1 WebView"],f],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[l,/(.+(?:g|us))(.+)/,"$1 $2"],f],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[f,[l,"Android Browser"]],[/(sailfishbrowser)\/([\w\.]+)/i],[[l,"Sailfish Browser"],f],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[l,f],[/(dolfin)\/([\w\.]+)/i],[[l,"Dolphin"],f],[/(qihu|qhbrowser|qihoobrowser|360browser)/i],[[l,"360 Browser"]],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[l,"Chrome"],f],[/(coast)\/([\w\.]+)/i],[[l,"Opera Coast"],f],[/fxios\/([\w\.-]+)/i],[f,[l,"Firefox"]],[/version\/([\w\.]+)\s.*mobile\/\w+\s(safari)/i],[f,[l,"Mobile Safari"]],[/version\/([\w\.]+)\s.*(mobile\s?safari|safari)/i],[f,l],[/webkit.+?(gsa)\/([\w\.]+)\s.*(mobile\s?safari|safari)(\/[\w\.]+)/i],[[l,"GSA"],f],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[l,[f,_.str,E.browser.oldsafari.version]],[/(webkit|khtml)\/([\w\.]+)/i],[l,f],[/(navigator|netscape)\/([\w\.-]+)/i],[[l,"Netscape"],f],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(firefox)\/([\w\.]+)\s[\w\s\-]+\/[\w\.]+$/i,/(mozilla)\/([\w\.]+)\s.+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[l,f]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[p,"amd64"]],[/(ia32(?=;))/i],[[p,b.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[p,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[p,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[p,/ower/,"",b.lowerize]],[/(sun4\w)[;\)]/i],[[p,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+[;l]))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[p,b.lowerize]]],device:[[/\((ipad|playbook);[\w\s\),;-]+(rim|apple)/i],[u,d,[h,v]],[/applecoremedia\/[\w\.]+ \((ipad)/],[u,[d,"Apple"],[h,v]],[/(apple\s{0,1}tv)/i],[[u,"Apple TV"],[d,"Apple"],[h,m]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[d,u,[h,v]],[/(kf[A-z]+)(\sbuild\/|\)).+silk\//i],[u,[d,"Amazon"],[h,v]],[/(sd|kf)[0349hijorstuw]+(\sbuild\/|\)).+silk\//i],[[u,_.str,E.device.amazon.model],[d,"Amazon"],[h,A]],[/android.+aft([bms])\sbuild/i],[u,[d,"Amazon"],[h,m]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[u,d,[h,A]],[/\((ip[honed|\s\w*]+);/i],[u,[d,"Apple"],[h,A]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[d,u,[h,A]],[/\(bb10;\s(\w+)/i],[u,[d,"BlackBerry"],[h,A]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone|p00c)/i],[u,[d,"Asus"],[h,v]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[d,"Sony"],[u,"Xperia Tablet"],[h,v]],[/android.+\s([c-g]\d{4}|so[-l]\w+)(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[u,[d,"Sony"],[h,A]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[d,u,[h,g]],[/android.+;\s(shield)\sbuild/i],[u,[d,"Nvidia"],[h,g]],[/(playstation\s[34portablevi]+)/i],[u,[d,"Sony"],[h,g]],[/(sprint\s(\w+))/i],[[d,_.str,E.device.sprint.vendor],[u,_.str,E.device.sprint.model],[h,A]],[/(htc)[;_\s-]{1,2}([\w\s]+(?=\)|\sbuild)|\w+)/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[d,[u,/_/g," "],[h,A]],[/(nexus\s9)/i],[u,[d,"HTC"],[h,v]],[/d\/huawei([\w\s-]+)[;\)]/i,/android.+\s(nexus\s6p|vog-[at]?l\d\d|ane-[at]?l[x\d]\d|eml-a?l\d\da?|lya-[at]?l\d[\dc]|clt-a?l\d\di?)/i],[u,[d,"Huawei"],[h,A]],[/android.+(bah2?-a?[lw]\d{2})/i],[u,[d,"Huawei"],[h,v]],[/(microsoft);\s(lumia[\s\w]+)/i],[d,u,[h,A]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[u,[d,"Microsoft"],[h,g]],[/(kin\.[onetw]{3})/i],[[u,/\./g," "],[d,"Microsoft"],[h,A]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w*)/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[u,[d,"Motorola"],[h,A]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[u,[d,"Motorola"],[h,v]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[d,b.trim],[u,b.trim],[h,m]],[/hbbtv.+maple;(\d+)/i],[[u,/^/,"SmartTV"],[d,"Samsung"],[h,m]],[/\(dtv[\);].+(aquos)/i],[u,[d,"Sharp"],[h,m]],[/android.+((sch-i[89]0\d|shw-m380s|SM-P605|SM-P610|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[d,"Samsung"],u,[h,v]],[/smart-tv.+(samsung)/i],[d,[h,m],u],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,/sec-((sgh\w+))/i],[[d,"Samsung"],u,[h,A]],[/sie-(\w*)/i],[u,[d,"Siemens"],[h,A]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]*)/i],[[d,"Nokia"],u,[h,A]],[/android[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i],[u,[d,"Acer"],[h,v]],[/android.+([vl]k\-?\d{3})\s+build/i],[u,[d,"LG"],[h,v]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[d,"LG"],u,[h,v]],[/linux;\snetcast.+smarttv/i,/lg\snetcast\.tv-201\d/i],[[d,"LG"],u,[h,m]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w*)/i,/android.+lg(\-?[\d\w]+)\s+build/i],[u,[d,"LG"],[h,A]],[/(lenovo)\s?(s(?:5000|6000)(?:[\w-]+)|tab(?:[\s\w]+))/i],[d,u,[h,v]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[u,[d,"Lenovo"],[h,v]],[/(lenovo)[_\s-]?([\w-]+)/i],[d,u,[h,A]],[/linux;.+((jolla));/i],[d,u,[h,A]],[/((pebble))app\/[\d\.]+\s/i],[d,u,[h,y]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[d,u,[h,A]],[/crkey/i],[[u,"Chromecast"],[d,"Google"],[h,m]],[/android.+;\s(glass)\s\d/i],[u,[d,"Google"],[h,y]],[/android.+;\s(pixel c)[\s)]/i],[u,[d,"Google"],[h,v]],[/android.+;\s(pixel( [2-9]a?)?( xl)?)[\s)]/i],[u,[d,"Google"],[h,A]],[/android.+;\s(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]?note?[\s_]?(?:\d\w)?)\sbuild/i,/android.+(redmi[\s\-_]?(?:note|k)?(?:[\s_]?[\w\s]+))(?:\sbuild|\))/i,/android.+(mi[\s\-_]?(?:a\d|one|one[\s_]plus|note lte)?[\s_]?(?:\d?\w?)[\s_]?(?:plus)?)\sbuild/i],[[u,/_/g," "],[d,"Xiaomi"],[h,A]],[/android.+(mi[\s\-_]?(?:pad)(?:[\s_]?[\w\s]+))(?:\sbuild|\))/i],[[u,/_/g," "],[d,"Xiaomi"],[h,v]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[u,[d,"Meizu"],[h,A]],[/(mz)-([\w-]{2,})/i],[[d,"Meizu"],u,[h,A]],[/android.+a000(1)\s+build/i,/android.+oneplus\s(a\d{4})[\s)]/i],[u,[d,"OnePlus"],[h,A]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[u,[d,"RCA"],[h,v]],[/android.+[;\/\s](Venue[\d\s]{2,7})\s+build/i],[u,[d,"Dell"],[h,v]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[u,[d,"Verizon"],[h,v]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[d,"Barnes & Noble"],u,[h,v]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[u,[d,"NuVision"],[h,v]],[/android.+;\s(k88)\sbuild/i],[u,[d,"ZTE"],[h,v]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[u,[d,"Swiss"],[h,A]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[u,[d,"Swiss"],[h,v]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[u,[d,"Zeki"],[h,v]],[/(android).+[;\/]\s+([YR]\d{2})\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],[[d,"Dragon Touch"],u,[h,v]],[/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],[u,[d,"Insignia"],[h,v]],[/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],[u,[d,"NextBook"],[h,v]],[/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[d,"Voice"],u,[h,A]],[/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],[[d,"LvTel"],u,[h,A]],[/android.+;\s(PH-1)\s/i],[u,[d,"Essential"],[h,A]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[u,[d,"Envizen"],[h,v]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],[d,u,[h,v]],[/android.+[;\/]\s*(Trio[\s\w\-\.]+)\s+build/i],[u,[d,"MachSpeed"],[h,v]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[d,u,[h,v]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[u,[d,"Rotor"],[h,v]],[/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],[d,u,[h,v]],[/android .+?; ([^;]+?)(?: build|\) applewebkit).+? mobile safari/i],[u,[h,A]],[/android .+?;\s([^;]+?)(?: build|\) applewebkit).+?(?! mobile) safari/i],[u,[h,v]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[h,b.lowerize],d,u],[/[\s\/\(](smart-?tv)[;\)]/i],[[h,m]],[/(android[\w\.\s\-]{0,9});.+build/i],[u,[d,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[f,[l,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[f,[l,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[l,f],[/rv\:([\w\.]{1,9}).+(gecko)/i],[f,l]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[l,f],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[l,[f,_.str,E.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[l,"Windows"],[f,_.str,E.os.windows.version]],[/\((bb)(10);/i],[[l,"BlackBerry"],f],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen|kaios)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i],[l,f],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[l,"Symbian"],f],[/\((series40);/i],[l],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[l,"Firefox OS"],f],[/crkey\/([\d\.]+)/i],[f,[l,"Chromecast"]],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[l,f],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[l,"Chromium OS"],f],[/(sunos)\s?([\w\.\d]*)/i],[[l,"Solaris"],f],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[l,f],[/(haiku)\s(\w+)/i],[l,f],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[f,/_/g,"."],[l,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[l,"Mac OS"],[f,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[l,f]]},I=function(e,t){if("object"==typeof e&&(t=e,e=o),!(this instanceof I))return new I(e,t).getResult();var n=e||(i&&i.navigator&&i.navigator.userAgent?i.navigator.userAgent:""),r=t?b.extend(w,t):w;return this.getBrowser=function(){var e={name:o,version:o};return _.rgx.call(e,n,r.browser),e.major=b.major(e.version),e},this.getCPU=function(){var e={architecture:o};return _.rgx.call(e,n,r.cpu),e},this.getDevice=function(){var e={vendor:o,model:o,type:o};return _.rgx.call(e,n,r.device),e},this.getEngine=function(){var e={name:o,version:o};return _.rgx.call(e,n,r.engine),e},this.getOS=function(){var e={name:o,version:o};return _.rgx.call(e,n,r.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(e){return n=e,this},this};I.VERSION="0.7.23",I.BROWSER={NAME:l,MAJOR:"major",VERSION:f},I.CPU={ARCHITECTURE:p},I.DEVICE={MODEL:u,VENDOR:d,TYPE:h,CONSOLE:g,MOBILE:A,SMARTTV:m,TABLET:v,WEARABLE:y,EMBEDDED:"embedded"},I.ENGINE={NAME:l,VERSION:f},I.OS={NAME:l,VERSION:f},typeof t!==s?(e.exports&&(t=e.exports=I),t.UAParser=I):(r=function(){return I}.call(t,n,t,e))===o||(e.exports=r);var C=i&&(i.jQuery||i.Zepto);if(C&&!C.ua){var S=new I;C.ua=S.getResult(),C.ua.get=function(){return S.getUA()},C.ua.set=function(e){S.setUA(e);var t=S.getResult();for(var n in t)C.ua[n]=t[n]}}}("object"==typeof window?window:this)},1005:e=>{"use strict";e.exports=function(e,t,n,r){var i=self||window;try{try{var o;try{o=new i.Blob([e])}catch(t){(o=new(i.BlobBuilder||i.WebKitBlobBuilder||i.MozBlobBuilder||i.MSBlobBuilder)).append(e),o=o.getBlob()}var a=i.URL||i.webkitURL,s=a.createObjectURL(o),c=new i[t](s,n);return a.revokeObjectURL(s),c}catch(r){return new i[t]("data:application/javascript,".concat(encodeURIComponent(e)),n)}}catch(e){if(!r)throw Error("Inline worker is not supported");return new i[t](r,n)}}},5455:e=>{"use strict";e.exports=require("agora-electron-sdk")},5760:e=>{"use strict";e.exports=__WEBPACK_EXTERNAL_MODULE__5760__}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.loaded=!0,n.exports}__webpack_require__.amdO={},__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),__webpack_require__.p="";var __webpack_exports__={};return(()=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{AGError:()=>Lr,AGErrorWrapper:()=>Pr,AGEventEmitter:()=>y,AGMediaEncryptionMode:()=>vu,AGNetworkQuality:()=>fu,AGRenderMode:()=>yu,AGRtcConnectionType:()=>su,AGRteErrorCode:()=>Rr,AGRteTrackErrorReason:()=>pu,AGScreenShareType:()=>mu,AbstractErrorCenter:()=>Dr,ActionWhenTaskFail:()=>Gu,AgoraMediaControl:()=>qu,AgoraMediaControlEventType:()=>Uu,AgoraRegion:()=>xr,AgoraRoom:()=>wc,AgoraRtcLocalVideoCanvas:()=>Ol,AgoraRtcVideoCanvas:()=>kl,AgoraRteAudioSourceType:()=>eu,AgoraRteCameraVideoTrack:()=>uu,AgoraRteConnectionState:()=>Lu,AgoraRteEngine:()=>Ih,AgoraRteEngineConfig:()=>Ur,AgoraRteEventType:()=>yc,AgoraRteLogLevel:()=>kr,AgoraRteMediaPublishState:()=>tu,AgoraRteMediaSourceState:()=>gu,AgoraRteMediaTrack:()=>cu,AgoraRteMicrophoneAudioTrack:()=>lu,AgoraRteRuntimePlatform:()=>Or,AgoraRteScene:()=>Fu,AgoraRteScreenShareTrack:()=>hu,AgoraRteThread:()=>cl,AgoraRteVideoSourceType:()=>$c,AgoraStream:()=>Ec,AgoraUser:()=>_c,ApiBase:()=>qc,Duration:()=>Wu,Lodash:()=>du,Log:()=>Jr,Logger:()=>mr,RtcState:()=>Au,RteLanguage:()=>Nr,Scheduler:()=>e,bound:()=>iu,lighteningLevel:()=>bu,retryAttempt:()=>ku});var e={};function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function n(e,n){if(e){if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||n(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function s(e){i(a,r,o,s,c,"next",e)}function c(e){i(a,r,o,s,c,"throw",e)}s(void 0)}))}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&u(e,t)}function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t){if(t&&("object"===h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return d(e)}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}__webpack_require__.r(e),__webpack_require__.d(e,{Duration:()=>Wu,createScheduler:()=>Yu,shared:()=>Ju});var g=__webpack_require__(7162),A=__webpack_require__.n(g);function v(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var y=function(){function e(){a(this,e),this._eventMap=new Map}return c(e,[{key:"once",value:function(e,t){var n=this;return this.on(e,(function r(){n.off(e,r),t.apply(void 0,arguments)})),this}},{key:"on",value:function(e,t){var n,r=null!==(n=this._eventMap.get(e))&&void 0!==n?n:[];return r.push(t),this._eventMap.set(e,r),this}},{key:"off",value:function(e,t){var n=this._eventMap.get(e);return n&&this._eventMap.set(e,n.filter((function(e){return e!==t}))),this}},{key:"removeAllEventListeners",value:function(){this._eventMap.clear()}},{key:"emit",value:function(e){for(var t,n=null!==(t=this._eventMap.get(e))&&void 0!==t?t:[],r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];var a,s=v(n);try{for(s.s();!(a=s.n()).done;){var c=a.value;try{c&&c.apply(void 0,i)}catch(t){var u=t,l=u.stack||u.message;console.error("[event] handling event ".concat(e," fail: ").concat(l))}}}catch(e){s.e(e)}finally{s.f()}return this}}]),e}();function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function E(e,t,n){return E=_()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&u(i,n.prototype),i},E.apply(null,arguments)}function w(e){var t="function"==typeof Map?new Map:void 0;return w=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return E(e,arguments,p(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),u(r,e)},w(e)}var I=__webpack_require__(5760),C=__webpack_require__.n(I),S=__webpack_require__(6635),T=__webpack_require__(1005),R=__webpack_require__.n(T);function k(){return R()('(()=>{var e={162:(e,t,n)=>{e.exports=n(47)},857:(e,t,n)=>{var r=n(772).Symbol;e.exports=r},366:(e,t,n)=>{var r=n(857),o=n(107),i=n(157),a=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?o(e):i(e)}},704:(e,t,n)=>{var r=n(153),o=/^\\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(o,""):e}},242:(e,t,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},107:(e,t,n)=>{var r=n(857),o=Object.prototype,i=o.hasOwnProperty,a=o.toString,u=r?r.toStringTag:void 0;e.exports=function(e){var t=i.call(e,u),n=e[u];try{e[u]=void 0;var r=!0}catch(e){}var o=a.call(e);return r&&(t?e[u]=n:delete e[u]),o}},157:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},772:(e,t,n)=>{var r=n(242),o="object"==typeof self&&self&&self.Object===Object&&self,i=r||o||Function("return this")();e.exports=i},153:e=>{var t=/\\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},73:(e,t,n)=>{var r=n(259),o=n(100),i=n(642),a=Math.max,u=Math.min;e.exports=function(e,t,n){var s,c,l,f,h,p,d=0,y=!1,v=!1,m=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function g(t){var n=s,r=c;return s=c=void 0,d=t,f=e.apply(r,n)}function b(e){return d=e,h=setTimeout(_,t),y?g(e):f}function w(e){var n=e-p;return void 0===p||n>=t||n<0||v&&e-d>=l}function _(){var e=o();if(w(e))return x(e);h=setTimeout(_,function(e){var n=t-(e-p);return v?u(n,l-(e-d)):n}(e))}function x(e){return h=void 0,m&&s?g(e):(s=c=void 0,f)}function k(){var e=o(),n=w(e);if(s=arguments,c=this,p=e,n){if(void 0===h)return b(p);if(v)return clearTimeout(h),h=setTimeout(_,t),g(p)}return void 0===h&&(h=setTimeout(_,t)),f}return t=i(t)||0,r(n)&&(y=!!n.leading,l=(v="maxWait"in n)?a(i(n.maxWait)||0,t):l,m="trailing"in n?!!n.trailing:m),k.cancel=function(){void 0!==h&&clearTimeout(h),d=0,s=p=c=h=void 0},k.flush=function(){return void 0===h?f:x(o())},k}},259:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},125:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},795:(e,t,n)=>{var r=n(366),o=n(125);e.exports=function(e){return"symbol"==typeof e||o(e)&&"[object Symbol]"==r(e)}},100:(e,t,n)=>{var r=n(772);e.exports=function(){return r.Date.now()}},642:(e,t,n)=>{var r=n(704),o=n(259),i=n(795),a=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,s=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(i(e))return NaN;if(o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=u.test(e);return n||s.test(e)?c(e.slice(2),n?2:8):a.test(e)?NaN:+e}},47:e=>{var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var o=t&&t.prototype instanceof v?t:v,i=Object.create(o.prototype),a=new S(r||[]);return i._invoke=function(e,t,n){var r=f;return function(o,i){if(r===p)throw new Error("Generator is already running");if(r===d){if("throw"===o)throw i;return K()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var u=E(a,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var s=l(e,t,n);if("normal"===s.type){if(r=n.done?d:h,s.arg===y)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=d,n.method="throw",n.arg=s.arg)}}}(e,n,a),i}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",p="executing",d="completed",y={};function v(){}function m(){}function g(){}var b={};s(b,i,(function(){return this}));var w=Object.getPrototypeOf,_=w&&w(w(A([])));_&&_!==n&&r.call(_,i)&&(b=_);var x=g.prototype=v.prototype=Object.create(b);function k(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function n(o,i,a,u){var s=l(e[o],e,i);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(f).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,u)}))}u(s.arg)}var o;this._invoke=function(e,r){function i(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(i,i):i()}}function E(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,E(e,n),"throw"===n.method))return y;n.method="throw",n.arg=new TypeError("The iterator does not provide a \'throw\' method")}return y}var o=l(r,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,y;var i=o.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,y):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function A(e){if(e){var n=e[i];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:K}}function K(){return{value:t,done:!0}}return m.prototype=g,s(x,"constructor",g),s(g,"constructor",m),m.displayName=s(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,u,"GeneratorFunction")),e.prototype=Object.create(x),e},e.awrap=function(e){return{__await:e}},k(O.prototype),s(O.prototype,a,(function(){return this})),e.AsyncIterator=O,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new O(c(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},k(x),s(x,u,"Generator"),s(x,i,(function(){return this})),s(x,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=A,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return u.type="throw",u.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;j(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:A(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),y}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";function e(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function t(t){return function(){var n=this,r=arguments;return new Promise((function(o,i){var a=t.apply(n,r);function u(t){e(a,o,i,u,s,"next",t)}function s(t){e(a,o,i,u,s,"throw",t)}u(void 0)}))}}var r=n(162),o=n.n(r),i=n(73),a=n.n(i);function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function h(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return e}(e)}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}var d=function(){return d=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},d.apply(this,arguments)};function y(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,u=i.length;a<u;a++,o++)r[o]=i[a];return r}var v=Object.keys,m=Array.isArray,g="undefined"!=typeof self?self:"undefined"!=typeof window?window:global;function b(e,t){return"object"!=typeof t||v(t).forEach((function(n){e[n]=t[n]})),e}"undefined"==typeof Promise||g.Promise||(g.Promise=Promise);var w=Object.getPrototypeOf,_={}.hasOwnProperty;function x(e,t){return _.call(e,t)}function k(e,t){"function"==typeof t&&(t=t(w(e))),v(t).forEach((function(n){E(e,n,t[n])}))}var O=Object.defineProperty;function E(e,t,n,r){O(e,t,b(n&&x(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function P(e){return{from:function(t){return e.prototype=Object.create(t.prototype),E(e.prototype,"constructor",e),{extend:k.bind(null,e.prototype)}}}}var j=Object.getOwnPropertyDescriptor;function S(e,t){var n;return j(e,t)||(n=w(e))&&S(n,t)}var A=[].slice;function K(e,t,n){return A.call(e,t,n)}function T(e,t){return t(e)}function C(e){if(!e)throw new Error("Assertion Failed")}function I(e){g.setImmediate?setImmediate(e):setTimeout(e,0)}function D(e,t){return e.reduce((function(e,n,r){var o=t(n,r);return o&&(e[o[0]]=o[1]),e}),{})}function B(e,t){if(x(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var n=[],r=0,o=t.length;r<o;++r){var i=B(e,t[r]);n.push(i)}return n}var a=t.indexOf(".");if(-1!==a){var u=e[t.substr(0,a)];return void 0===u?void 0:B(u,t.substr(a+1))}}function R(e,t,n){if(e&&void 0!==t&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){C("string"!=typeof n&&"length"in n);for(var r=0,o=t.length;r<o;++r)R(e,t[r],n[r])}else{var i=t.indexOf(".");if(-1!==i){var a=t.substr(0,i),u=t.substr(i+1);if(""===u)void 0===n?m(e)&&!isNaN(parseInt(a))?e.splice(a,1):delete e[a]:e[a]=n;else{var s=e[a];s||(s=e[a]={}),R(s,u,n)}}else void 0===n?m(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function F(e,t){"string"==typeof t?R(e,t,void 0):"length"in t&&[].map.call(t,(function(t){R(e,t,void 0)}))}function N(e){var t={};for(var n in e)x(e,n)&&(t[n]=e[n]);return t}var q=[].concat;function M(e){return q.apply([],e)}var L="Boolean,String,Date,RegExp,Blob,File,FileList,ArrayBuffer,DataView,Uint8ClampedArray,ImageData,Map,Set".split(",").concat(M([8,16,32,64].map((function(e){return["Int","Uint","Float"].map((function(t){return t+e+"Array"}))})))).filter((function(e){return g[e]})),U=L.map((function(e){return g[e]})),V=D(L,(function(e){return[e,!0]}));function G(e){if(!e||"object"!=typeof e)return e;var t;if(m(e)){t=[];for(var n=0,r=e.length;n<r;++n)t.push(G(e[n]))}else if(U.indexOf(e.constructor)>=0)t=e;else for(var o in t=e.constructor?Object.create(e.constructor.prototype):{},e)x(e,o)&&(t[o]=G(e[o]));return t}var W={}.toString;function z(e){return W.call(e).slice(8,-1)}var Y=function(e,t){return"Array"===t?""+e.map((function(e){return Y(e,z(e))})):"ArrayBuffer"===t?""+new Uint8Array(e):"Date"===t?e.getTime():ArrayBuffer.isView(e)?""+new Uint8Array(e.buffer):e};function H(e,t,n,r){return n=n||{},r=r||"",v(e).forEach((function(o){if(x(t,o)){var i=e[o],a=t[o];if("object"==typeof i&&"object"==typeof a&&i&&a){var u=z(i),s=z(a);u===s?V[u]?Y(i,u)!==Y(a,s)&&(n[r+o]=t[o]):H(i,a,n,r+o+"."):n[r+o]=t[o]}else i!==a&&(n[r+o]=t[o])}else n[r+o]=void 0})),v(t).forEach((function(o){x(e,o)||(n[r+o]=t[o])})),n}var Q="undefined"!=typeof Symbol&&Symbol.iterator,X=Q?function(e){var t;return null!=e&&(t=e[Q])&&t.apply(e)}:function(){return null},$={};function J(e){var t,n,r,o;if(1===arguments.length){if(m(e))return e.slice();if(this===$&&"string"==typeof e)return[e];if(o=X(e)){for(n=[];!(r=o.next()).done;)n.push(r.value);return n}if(null==e)return[e];if("number"==typeof(t=e.length)){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var Z="undefined"!=typeof Symbol?function(e){return"AsyncFunction"===e[Symbol.toStringTag]}:function(){return!1},ee="undefined"!=typeof location&&/^(http|https):\\/\\/(localhost|127\\.0\\.0\\.1)/.test(location.href);function te(e,t){ee=e,ne=t}var ne=function(){return!0},re=!new Error("").stack;function oe(){if(re)try{throw new Error}catch(e){return e}return new Error}function ie(e,t){var n=e.stack;return n?(t=t||0,0===n.indexOf(e.name)&&(t+=(e.name+e.message).split("\\n").length),n.split("\\n").slice(t).filter(ne).map((function(e){return"\\n"+e})).join("")):""}var ae=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],ue=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(ae),se={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed"};function ce(e,t){this._e=oe(),this.name=e,this.message=t}function le(e,t){return e+". Errors: "+Object.keys(t).map((function(e){return t[e].toString()})).filter((function(e,t,n){return n.indexOf(e)===t})).join("\\n")}function fe(e,t,n,r){this._e=oe(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=le(e,t)}function he(e,t){this._e=oe(),this.name="BulkError",this.failures=t,this.message=le(e,t)}P(ce).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+ie(this._e,2))}},toString:function(){return this.name+": "+this.message}}),P(fe).from(ce),P(he).from(ce);var pe=ue.reduce((function(e,t){return e[t]=t+"Error",e}),{}),de=ce,ye=ue.reduce((function(e,t){var n=t+"Error";function r(e,r){this._e=oe(),this.name=n,e?"string"==typeof e?(this.message=e+(r?"\\n "+r:""),this.inner=r||null):"object"==typeof e&&(this.message=e.name+" "+e.message,this.inner=e):(this.message=se[t]||n,this.inner=null)}return P(r).from(de),e[t]=r,e}),{});ye.Syntax=SyntaxError,ye.Type=TypeError,ye.Range=RangeError;var ve=ae.reduce((function(e,t){return e[t+"Error"]=ye[t],e}),{});var me=ue.reduce((function(e,t){return-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=ye[t]),e}),{});function ge(){}function be(e){return e}function we(e,t){return null==e||e===be?t:function(n){return t(e(n))}}function _e(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function xe(e,t){return e===ge?t:function(){var n=e.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var i=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?_e(r,this.onsuccess):r),o&&(this.onerror=this.onerror?_e(o,this.onerror):o),void 0!==i?i:n}}function ke(e,t){return e===ge?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?_e(n,this.onsuccess):n),r&&(this.onerror=this.onerror?_e(r,this.onerror):r)}}function Oe(e,t){return e===ge?t:function(n){var r=e.apply(this,arguments);b(n,r);var o=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return o&&(this.onsuccess=this.onsuccess?_e(o,this.onsuccess):o),i&&(this.onerror=this.onerror?_e(i,this.onerror):i),void 0===r?void 0===a?void 0:a:b(r,a)}}function Ee(e,t){return e===ge?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function Pe(e,t){return e===ge?t:function(){var n=e.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,o=arguments.length,i=new Array(o);o--;)i[o]=arguments[o];return n.then((function(){return t.apply(r,i)}))}return t.apply(this,arguments)}}me.ModifyError=fe,me.DexieError=ce,me.BulkError=he;var je={},Se="undefined"==typeof Promise?[]:function(){var e=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[e,e.__proto__,e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,t.__proto__,e]}(),Ae=Se[0],Ke=Se[1],Te=Se[2],Ce=Ke&&Ke.then,Ie=Ae&&Ae.constructor,De=!!Te,Be=!1,Re=Te?function(){Te.then(it)}:g.setImmediate?setImmediate.bind(null,it):g.MutationObserver?function(){var e=document.createElement("div");new MutationObserver((function(){it(),e=null})).observe(e,{attributes:!0}),e.setAttribute("i","1")}:function(){setTimeout(it,0)},Fe=function(e,t){ze.push([e,t]),qe&&(Re(),qe=!1)},Ne=!0,qe=!0,Me=[],Le=[],Ue=null,Ve=be,Ge={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Kt,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach((function(e){try{Kt(e[0],e[1])}catch(e){}}))}},We=Ge,ze=[],Ye=0,He=[];function Qe(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=ge,this._lib=!1;var t=this._PSD=We;if(ee&&(this._stackHolder=oe(),this._prev=null,this._numPrev=0),"function"!=typeof e){if(e!==je)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&Ze(this,this._value))}this._state=null,this._value=null,++t.ref,Je(this,e)}var Xe={get:function(){var e=We,t=yt;function n(n,r){var o=this,i=!e.global&&(e!==We||t!==yt),a=i&&!bt(),u=new Qe((function(t,u){tt(o,new $e(jt(n,e,i,a),jt(r,e,i,a),t,u,e))}));return ee&&ot(u,this),u}return n.prototype=je,n},set:function(e){E(this,"then",e&&e.prototype===je?Xe:{get:function(){return e},set:Xe.set})}};function $e(e,t,n,r,o){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r,this.psd=o}function Je(e,t){try{t((function(t){if(null===e._state){if(t===e)throw new TypeError("A promise cannot be resolved with itself.");var n=e._lib&&at();t&&"function"==typeof t.then?Je(e,(function(e,n){t instanceof Qe?t._then(e,n):t.then(e,n)})):(e._state=!0,e._value=t,et(e)),n&&ut()}}),Ze.bind(null,e))}catch(t){Ze(e,t)}}function Ze(e,t){if(Le.push(t),null===e._state){var n=e._lib&&at();t=Ve(t),e._state=!1,e._value=t,ee&&null!==t&&"object"==typeof t&&!t._promise&&function(e,t,n){try{e.apply(null,n)}catch(e){t&&t(e)}}((function(){var n=S(t,"stack");t._promise=e,E(t,"stack",{get:function(){return Be?n&&(n.get?n.get.apply(t):n.value):e.stack}})})),function(e){Me.some((function(t){return t._value===e._value}))||Me.push(e)}(e),et(e),n&&ut()}}function et(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)tt(e,t[n]);var o=e._PSD;--o.ref||o.finalize(),0===Ye&&(++Ye,Fe((function(){0==--Ye&&st()}),[]))}function tt(e,t){if(null!==e._state){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Ye,Fe(nt,[n,e,t])}else e._listeners.push(t)}function nt(e,t,n){try{Ue=t;var r,o=t._value;t._state?r=e(o):(Le.length&&(Le=[]),r=e(o),-1===Le.indexOf(o)&&function(e){var t=Me.length;for(;t;)if(Me[--t]._value===e._value)return void Me.splice(t,1)}(t)),n.resolve(r)}catch(e){n.reject(e)}finally{Ue=null,0==--Ye&&st(),--n.psd.ref||n.psd.finalize()}}function rt(e,t,n){if(t.length===n)return t;var r="";if(!1===e._state){var o,i,a=e._value;null!=a?(o=a.name||"Error",i=a.message||a,r=ie(a,0)):(o=a,i=""),t.push(o+(i?": "+i:"")+r)}return ee&&((r=ie(e._stackHolder,2))&&-1===t.indexOf(r)&&t.push(r),e._prev&&rt(e._prev,t,n)),t}function ot(e,t){var n=t?t._numPrev+1:0;n<100&&(e._prev=t,e._numPrev=n)}function it(){at()&&ut()}function at(){var e=Ne;return Ne=!1,qe=!1,e}function ut(){var e,t,n;do{for(;ze.length>0;)for(e=ze,ze=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}}while(ze.length>0);Ne=!0,qe=!0}function st(){var e=Me;Me=[],e.forEach((function(e){e._PSD.onunhandled.call(null,e._value,e)}));for(var t=He.slice(0),n=t.length;n;)t[--n]()}function ct(e){return new Qe(je,!1,e)}function lt(e,t){var n=We;return function(){var r=at(),o=We;try{return kt(n,!0),e.apply(this,arguments)}catch(e){t&&t(e)}finally{kt(o,!1),r&&ut()}}}k(Qe.prototype,{then:Xe,_then:function(e,t){tt(this,new $e(null,null,e,t,We))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=arguments[0],n=arguments[1];return"function"==typeof t?this.then(null,(function(e){return e instanceof t?n(e):ct(e)})):this.then(null,(function(e){return e&&e.name===t?n(e):ct(e)}))},finally:function(e){return this.then((function(t){return e(),t}),(function(t){return e(),ct(t)}))},stack:{get:function(){if(this._stack)return this._stack;try{Be=!0;var e=rt(this,[],20).join("\\nFrom previous: ");return null!==this._state&&(this._stack=e),e}finally{Be=!1}}},timeout:function(e,t){var n=this;return e<1/0?new Qe((function(r,o){var i=setTimeout((function(){return o(new ye.Timeout(t))}),e);n.then(r,o).finally(clearTimeout.bind(null,i))})):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&E(Qe.prototype,Symbol.toStringTag,"Dexie.Promise"),Ge.env=Ot(),k(Qe,{all:function(){var e=J.apply(null,arguments).map(wt);return new Qe((function(t,n){0===e.length&&t([]);var r=e.length;e.forEach((function(o,i){return Qe.resolve(o).then((function(n){e[i]=n,--r||t(e)}),n)}))}))},resolve:function(e){if(e instanceof Qe)return e;if(e&&"function"==typeof e.then)return new Qe((function(t,n){e.then(t,n)}));var t=new Qe(je,!0,e);return ot(t,Ue),t},reject:ct,race:function(){var e=J.apply(null,arguments).map(wt);return new Qe((function(t,n){e.map((function(e){return Qe.resolve(e).then(t,n)}))}))},PSD:{get:function(){return We},set:function(e){return We=e}},totalEchoes:{get:function(){return yt}},newPSD:mt,usePSD:Et,scheduler:{get:function(){return Fe},set:function(e){Fe=e}},rejectionMapper:{get:function(){return Ve},set:function(e){Ve=e}},follow:function(e,t){return new Qe((function(n,r){return mt((function(t,n){var r=We;r.unhandleds=[],r.onunhandled=n,r.finalize=_e((function(){var e=this;!function(e){function t(){e(),He.splice(He.indexOf(t),1)}He.push(t),++Ye,Fe((function(){0==--Ye&&st()}),[])}((function(){0===e.unhandleds.length?t():n(e.unhandleds[0])}))}),r.finalize),e()}),t,n,r)}))}}),Ie&&(Ie.allSettled&&E(Qe,"allSettled",(function(){var e=J.apply(null,arguments).map(wt);return new Qe((function(t){0===e.length&&t([]);var n=e.length,r=new Array(n);e.forEach((function(e,o){return Qe.resolve(e).then((function(e){return r[o]={status:"fulfilled",value:e}}),(function(e){return r[o]={status:"rejected",reason:e}})).then((function(){return--n||t(r)}))}))}))})),Ie.any&&"undefined"!=typeof AggregateError&&E(Qe,"any",(function(){var e=J.apply(null,arguments).map(wt);return new Qe((function(t,n){0===e.length&&n(new AggregateError([]));var r=e.length,o=new Array(r);e.forEach((function(e,i){return Qe.resolve(e).then((function(e){return t(e)}),(function(e){o[i]=e,--r||n(new AggregateError(o))}))}))}))})));var ft={awaits:0,echoes:0,id:0},ht=0,pt=[],dt=0,yt=0,vt=0;function mt(e,t,n,r){var o=We,i=Object.create(o);i.parent=o,i.ref=0,i.global=!1,i.id=++vt;var a=Ge.env;i.env=De?{Promise:Qe,PromiseProp:{value:Qe,configurable:!0,writable:!0},all:Qe.all,race:Qe.race,allSettled:Qe.allSettled,any:Qe.any,resolve:Qe.resolve,reject:Qe.reject,nthen:St(a.nthen,i),gthen:St(a.gthen,i)}:{},t&&b(i,t),++o.ref,i.finalize=function(){--this.parent.ref||this.parent.finalize()};var u=Et(i,e,n,r);return 0===i.ref&&i.finalize(),u}function gt(){return ft.id||(ft.id=++ht),++ft.awaits,ft.echoes+=100,ft.id}function bt(){return!!ft.awaits&&(0==--ft.awaits&&(ft.id=0),ft.echoes=100*ft.awaits,!0)}function wt(e){return ft.echoes&&e&&e.constructor===Ie?(gt(),e.then((function(e){return bt(),e}),(function(e){return bt(),Tt(e)}))):e}function _t(e){++yt,ft.echoes&&0!=--ft.echoes||(ft.echoes=ft.id=0),pt.push(We),kt(e,!0)}function xt(){var e=pt[pt.length-1];pt.pop(),kt(e,!1)}function kt(e,t){var n=We;if((t?!ft.echoes||dt++&&e===We:!dt||--dt&&e===We)||Pt(t?_t.bind(null,e):xt),e!==We&&(We=e,n===Ge&&(Ge.env=Ot()),De)){var r=Ge.env.Promise,o=e.env;Ke.then=o.nthen,r.prototype.then=o.gthen,(n.global||e.global)&&(Object.defineProperty(g,"Promise",o.PromiseProp),r.all=o.all,r.race=o.race,r.resolve=o.resolve,r.reject=o.reject,o.allSettled&&(r.allSettled=o.allSettled),o.any&&(r.any=o.any))}}function Ot(){var e=g.Promise;return De?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(g,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:Ke.then,gthen:e.prototype.then}:{}}function Et(e,t,n,r,o){var i=We;try{return kt(e,!0),t(n,r,o)}finally{kt(i,!1)}}function Pt(e){Ce.call(Ae,e)}function jt(e,t,n,r){return"function"!=typeof e?e:function(){var o=We;n&&gt(),kt(t,!0);try{return e.apply(this,arguments)}finally{kt(o,!1),r&&Pt(bt)}}}function St(e,t){return function(n,r){return e.call(this,jt(n,t),jt(r,t))}}-1===(""+Ce).indexOf("[native code]")&&(gt=bt=ge);var At="unhandledrejection";function Kt(e,t){var n;try{n=t.onuncatched(e)}catch(e){}if(!1!==n)try{var r,o={promise:t,reason:e};if(g.document&&document.createEvent?((r=document.createEvent("Event")).initEvent(At,!0,!0),b(r,o)):g.CustomEvent&&b(r=new CustomEvent(At,{detail:o}),o),r&&g.dispatchEvent&&(dispatchEvent(r),!g.PromiseRejectionEvent&&g.onunhandledrejection))try{g.onunhandledrejection(r)}catch(e){}ee&&r&&!r.defaultPrevented&&console.warn("Unhandled rejection: "+(e.stack||e))}catch(e){}}var Tt=Qe.reject;function Ct(e,t,n,r){if(e._state.openComplete||We.letThrough){var o=e._createTransaction(t,n,e._dbSchema);try{o.create()}catch(e){return Tt(e)}return o._promise(t,(function(e,t){return mt((function(){return We.trans=o,r(e,t,o)}))})).then((function(e){return o._completion.then((function(){return e}))}))}if(!e._state.isBeingOpened){if(!e._options.autoOpen)return Tt(new ye.DatabaseClosed);e.open().catch(ge)}return e._state.dbReadyPromise.then((function(){return Ct(e,t,n,r)}))}var It="3.0.3",Dt=String.fromCharCode(65535),Bt=-1/0,Rt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Ft="String expected.",Nt=[],qt="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Mt=qt,Lt=qt,Ut=function(e){return!/(dexie\\.js|dexie\\.min\\.js)/.test(e)},Vt="__dbnames",Gt="readonly",Wt="readwrite";function zt(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var Yt={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Ht(e){return function(t){return void 0===B(t,e)&&F(t=G(t),e),t}}var Qt=function(){function e(){}return e.prototype._trans=function(e,t,n){var r=this._tx||We.trans,o=this.name;function i(e,n,r){if(!r.schema[o])throw new ye.NotFound("Table "+o+" not part of transaction");return t(r.idbtrans,r)}var a=at();try{return r&&r.db===this.db?r===We.trans?r._promise(e,i,n):mt((function(){return r._promise(e,i,n)}),{trans:r,transless:We.transless||We}):Ct(this.db,e,[this.name],i)}finally{a&&ut()}},e.prototype.get=function(e,t){var n=this;return e&&e.constructor===Object?this.where(e).first(t):this._trans("readonly",(function(t){return n.core.get({trans:t,key:e}).then((function(e){return n.hook.reading.fire(e)}))})).then(t)},e.prototype.where=function(e){if("string"==typeof e)return new this.db.WhereClause(this,e);if(m(e))return new this.db.WhereClause(this,"["+e.join("+")+"]");var t=v(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter((function(e){return e.compound&&t.every((function(t){return e.keyPath.indexOf(t)>=0}))&&e.keyPath.every((function(e){return t.indexOf(e)>=0}))}))[0];if(n&&this.db._maxKey!==Dt)return this.where(n.name).equals(n.keyPath.map((function(t){return e[t]})));!n&&ee&&console.warn("The query "+JSON.stringify(e)+" on "+this.name+" would benefit of a compound index ["+t.join("+")+"]");var r=this.schema.idxByName,o=this.db._deps.indexedDB;function i(e,t){try{return 0===o.cmp(e,t)}catch(e){return!1}}var a=t.reduce((function(t,n){var o=t[0],a=t[1],u=r[n],s=e[n];return[o||u,o||!u?zt(a,u&&u.multi?function(e){var t=B(e,n);return m(t)&&t.some((function(e){return i(s,e)}))}:function(e){return i(s,B(e,n))}):a]}),[null,null]),u=a[0],s=a[1];return u?this.where(u.name).equals(e[u.keyPath]).filter(s):n?this.filter(s):this.where(t).equals("")},e.prototype.filter=function(e){return this.toCollection().and(e)},e.prototype.count=function(e){return this.toCollection().count(e)},e.prototype.offset=function(e){return this.toCollection().offset(e)},e.prototype.limit=function(e){return this.toCollection().limit(e)},e.prototype.each=function(e){return this.toCollection().each(e)},e.prototype.toArray=function(e){return this.toCollection().toArray(e)},e.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},e.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,m(e)?"["+e.join("+")+"]":e))},e.prototype.reverse=function(){return this.toCollection().reverse()},e.prototype.mapToClass=function(e){this.schema.mappedClass=e;var t=function(t){if(!t)return t;var n=Object.create(e.prototype);for(var r in t)if(x(t,r))try{n[r]=t[r]}catch(e){}return n};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=t,this.hook("reading",t),e},e.prototype.defineClass=function(){return this.mapToClass((function(e){b(this,e)}))},e.prototype.add=function(e,t){var n=this,r=this.schema.primKey,o=r.auto,i=r.keyPath,a=e;return i&&o&&(a=Ht(i)(e)),this._trans("readwrite",(function(e){return n.core.mutate({trans:e,type:"add",keys:null!=t?[t]:null,values:[a]})})).then((function(e){return e.numFailures?Qe.reject(e.failures[0]):e.lastResult})).then((function(t){if(i)try{R(e,i,t)}catch(e){}return t}))},e.prototype.update=function(e,t){if("object"!=typeof t||m(t))throw new ye.InvalidArgument("Modifications must be an object.");if("object"!=typeof e||m(e))return this.where(":id").equals(e).modify(t);v(t).forEach((function(n){R(e,n,t[n])}));var n=B(e,this.schema.primKey.keyPath);return void 0===n?Tt(new ye.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(n).modify(t)},e.prototype.put=function(e,t){var n=this,r=this.schema.primKey,o=r.auto,i=r.keyPath,a=e;return i&&o&&(a=Ht(i)(e)),this._trans("readwrite",(function(e){return n.core.mutate({trans:e,type:"put",values:[a],keys:null!=t?[t]:null})})).then((function(e){return e.numFailures?Qe.reject(e.failures[0]):e.lastResult})).then((function(t){if(i)try{R(e,i,t)}catch(e){}return t}))},e.prototype.delete=function(e){var t=this;return this._trans("readwrite",(function(n){return t.core.mutate({trans:n,type:"delete",keys:[e]})})).then((function(e){return e.numFailures?Qe.reject(e.failures[0]):void 0}))},e.prototype.clear=function(){var e=this;return this._trans("readwrite",(function(t){return e.core.mutate({trans:t,type:"deleteRange",range:Yt})})).then((function(e){return e.numFailures?Qe.reject(e.failures[0]):void 0}))},e.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",(function(n){return t.core.getMany({keys:e,trans:n}).then((function(e){return e.map((function(e){return t.hook.reading.fire(e)}))}))}))},e.prototype.bulkAdd=function(e,t,n){var r=this,o=Array.isArray(t)?t:void 0,i=(n=n||(o?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",(function(t){var n=r.schema.primKey,a=n.auto,u=n.keyPath;if(u&&o)throw new ye.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(o&&o.length!==e.length)throw new ye.InvalidArgument("Arguments objects and keys must have the same length");var s=e.length,c=u&&a?e.map(Ht(u)):e;return r.core.mutate({trans:t,type:"add",keys:o,values:c,wantResults:i}).then((function(e){var t=e.numFailures,n=e.results,o=e.lastResult,a=e.failures;if(0===t)return i?n:o;throw new he(r.name+".bulkAdd(): "+t+" of "+s+" operations failed",Object.keys(a).map((function(e){return a[e]})))}))}))},e.prototype.bulkPut=function(e,t,n){var r=this,o=Array.isArray(t)?t:void 0,i=(n=n||(o?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",(function(t){var n=r.schema.primKey,a=n.auto,u=n.keyPath;if(u&&o)throw new ye.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(o&&o.length!==e.length)throw new ye.InvalidArgument("Arguments objects and keys must have the same length");var s=e.length,c=u&&a?e.map(Ht(u)):e;return r.core.mutate({trans:t,type:"put",keys:o,values:c,wantResults:i}).then((function(e){var t=e.numFailures,n=e.results,o=e.lastResult,a=e.failures;if(0===t)return i?n:o;throw new he(r.name+".bulkPut(): "+t+" of "+s+" operations failed",Object.keys(a).map((function(e){return a[e]})))}))}))},e.prototype.bulkDelete=function(e){var t=this,n=e.length;return this._trans("readwrite",(function(n){return t.core.mutate({trans:n,type:"delete",keys:e})})).then((function(e){var r=e.numFailures,o=e.lastResult,i=e.failures;if(0===r)return o;throw new he(t.name+".bulkDelete(): "+r+" of "+n+" operations failed",i)}))},e}();function Xt(e){var t={},n=function(n,r){if(r){for(var o=arguments.length,i=new Array(o-1);--o;)i[o-1]=arguments[o];return t[n].subscribe.apply(null,i),e}if("string"==typeof n)return t[n]};n.addEventType=i;for(var r=1,o=arguments.length;r<o;++r)i(arguments[r]);return n;function i(e,r,o){if("object"==typeof e)return a(e);r||(r=Ee),o||(o=ge);var i={subscribers:[],fire:o,subscribe:function(e){-1===i.subscribers.indexOf(e)&&(i.subscribers.push(e),i.fire=r(i.fire,e))},unsubscribe:function(e){i.subscribers=i.subscribers.filter((function(t){return t!==e})),i.fire=i.subscribers.reduce(r,o)}};return t[e]=n[e]=i,i}function a(e){v(e).forEach((function(t){var n=e[t];if(m(n))i(t,e[t][0],e[t][1]);else{if("asap"!==n)throw new ye.InvalidArgument("Invalid event config");var r=i(t,be,(function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];r.subscribers.forEach((function(e){I((function(){e.apply(null,t)}))}))}))}}))}}function $t(e,t){return P(t).from({prototype:e}),t}function Jt(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function Zt(e,t){e.filter=zt(e.filter,t)}function en(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return zt(r(),t())}:t,e.justLimit=n&&!r}function tn(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new ye.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function nn(e,t,n){var r=tn(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:"prev"===e.dir,unique:!!e.unique,query:{index:r,range:e.range}})}function rn(e,t,n,r){var o=e.replayFilter?zt(e.filter,e.replayFilter()):e.filter;if(e.or){var i={},a=function(e,n,r){if(!o||o(n,r,(function(e){return n.stop(e)}),(function(e){return n.fail(e)}))){var a=n.primaryKey,u=""+a;"[object ArrayBuffer]"===u&&(u=""+new Uint8Array(a)),x(i,u)||(i[u]=!0,t(e,n,r))}};return Promise.all([e.or._iterate(a,n),on(nn(e,r,n),e.algorithm,a,!e.keysOnly&&e.valueMapper)])}return on(nn(e,r,n),zt(e.algorithm,o),t,!e.keysOnly&&e.valueMapper)}function on(e,t,n,r){var o=lt(r?function(e,t,o){return n(r(e),t,o)}:n);return e.then((function(e){if(e)return e.start((function(){var n=function(){return e.continue()};t&&!t(e,(function(e){return n=e}),(function(t){e.stop(t),n=ge}),(function(t){e.fail(t),n=ge}))||o(e.value,e,(function(e){return n=e})),n()}))}))}var an=function(){function e(){}return e.prototype._read=function(e,t){var n=this._ctx;return n.error?n.table._trans(null,Tt.bind(null,n.error)):n.table._trans("readonly",e).then(t)},e.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,Tt.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},e.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=zt(t.algorithm,e)},e.prototype._iterate=function(e,t){return rn(this._ctx,e,t,this._ctx.table.core)},e.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&b(n,e),t._ctx=n,t},e.prototype.raw=function(){return this._ctx.valueMapper=null,this},e.prototype.each=function(e){var t=this._ctx;return this._read((function(n){return rn(t,e,n,t.table.core)}))},e.prototype.count=function(e){var t=this;return this._read((function(e){var n=t._ctx,r=n.table.core;if(Jt(n,!0))return r.count({trans:e,query:{index:tn(n,r.schema),range:n.range}}).then((function(e){return Math.min(e,n.limit)}));var o=0;return rn(n,(function(){return++o,!1}),e,r).then((function(){return o}))})).then(e)},e.prototype.sortBy=function(e,t){var n=e.split(".").reverse(),r=n[0],o=n.length-1;function i(e,t){return t?i(e[n[t]],t-1):e[r]}var a="next"===this._ctx.dir?1:-1;function u(e,t){var n=i(e,o),r=i(t,o);return n<r?-a:n>r?a:0}return this.toArray((function(e){return e.sort(u)})).then(t)},e.prototype.toArray=function(e){var t=this;return this._read((function(e){var n=t._ctx;if("next"===n.dir&&Jt(n,!0)&&n.limit>0){var r=n.valueMapper,o=tn(n,n.table.core.schema);return n.table.core.query({trans:e,limit:n.limit,values:!0,query:{index:o,range:n.range}}).then((function(e){var t=e.result;return r?t.map(r):t}))}var i=[];return rn(n,(function(e){return i.push(e)}),e,n.table.core).then((function(){return i}))}),e)},e.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,Jt(t)?en(t,(function(){var t=e;return function(e,n){return 0===t||(1===t?(--t,!1):(n((function(){e.advance(t),t=0})),!1))}})):en(t,(function(){var t=e;return function(){return--t<0}}))),this},e.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),en(this._ctx,(function(){var t=e;return function(e,n,r){return--t<=0&&n(r),t>=0}}),!0),this},e.prototype.until=function(e,t){return Zt(this._ctx,(function(n,r,o){return!e(n.value)||(r(o),t)})),this},e.prototype.first=function(e){return this.limit(1).toArray((function(e){return e[0]})).then(e)},e.prototype.last=function(e){return this.reverse().first(e)},e.prototype.filter=function(e){return Zt(this._ctx,(function(t){return e(t.value)})),function(e,t){e.isMatch=zt(e.isMatch,t)}(this._ctx,e),this},e.prototype.and=function(e){return this.filter(e)},e.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},e.prototype.reverse=function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},e.prototype.desc=function(){return this.reverse()},e.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.key,n)}))},e.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},e.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.primaryKey,n)}))},e.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.key)})).then((function(){return n})).then(e)},e.prototype.primaryKeys=function(e){var t=this._ctx;if("next"===t.dir&&Jt(t,!0)&&t.limit>0)return this._read((function(e){var n=tn(t,t.table.core.schema);return t.table.core.query({trans:e,values:!1,limit:t.limit,query:{index:n,range:t.range}})})).then((function(e){return e.result})).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.primaryKey)})).then((function(){return n})).then(e)},e.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},e.prototype.firstKey=function(e){return this.limit(1).keys((function(e){return e[0]})).then(e)},e.prototype.lastKey=function(e){return this.reverse().firstKey(e)},e.prototype.distinct=function(){var e=this._ctx,t=e.index&&e.table.schema.idxByName[e.index];if(!t||!t.multi)return this;var n={};return Zt(this._ctx,(function(e){var t=e.primaryKey.toString(),r=x(n,t);return n[t]=!0,!r})),this},e.prototype.modify=function(e){var t=this,n=this._ctx;return this._write((function(r){var o;if("function"==typeof e)o=e;else{var i=v(e),a=i.length;o=function(t){for(var n=!1,r=0;r<a;++r){var o=i[r],u=e[o];B(t,o)!==u&&(R(t,o,u),n=!0)}return n}}var u=n.table.core,s=u.schema.primaryKey,c=s.outbound,l=s.extractKey,f="testmode"in $n?1:2e3,h=t.db.core.cmp,p=[],d=0,y=[],m=function(e,t){var n=t.failures,r=t.numFailures;d+=e-r;for(var o=0,i=v(n);o<i.length;o++){var a=i[o];p.push(n[a])}};return t.clone().primaryKeys().then((function(e){var t=function(n){var i=Math.min(f,e.length-n);return u.getMany({trans:r,keys:e.slice(n,n+i)}).then((function(a){for(var s=[],p=[],d=c?[]:null,y=[],v=0;v<i;++v){var g=a[v],b={value:G(g),primKey:e[n+v]};!1!==o.call(b,b.value,b)&&(null==b.value?y.push(e[n+v]):c||0===h(l(g),l(b.value))?(p.push(b.value),c&&d.push(e[n+v])):(y.push(e[n+v]),s.push(b.value)))}return Promise.resolve(s.length>0&&u.mutate({trans:r,type:"add",values:s}).then((function(e){for(var t in e.failures)y.splice(parseInt(t),1);m(s.length,e)}))).then((function(e){return p.length>0&&u.mutate({trans:r,type:"put",keys:d,values:p}).then((function(e){return m(p.length,e)}))})).then((function(){return y.length>0&&u.mutate({trans:r,type:"delete",keys:y}).then((function(e){return m(y.length,e)}))})).then((function(){return e.length>n+i&&t(n+f)}))}))};return t(0).then((function(){if(p.length>0)throw new fe("Error modifying one or more objects",p,d,y);return e.length}))}))}))},e.prototype.delete=function(){var e=this._ctx,t=e.range;return Jt(e)&&(e.isPrimKey&&!Lt||3===t.type)?this._write((function(n){var r=e.table.core.schema.primaryKey,o=t;return e.table.core.count({trans:n,query:{index:r,range:o}}).then((function(t){return e.table.core.mutate({trans:n,type:"deleteRange",range:o}).then((function(e){var n=e.failures,r=(e.lastResult,e.results,e.numFailures);if(r)throw new fe("Could not delete some values",Object.keys(n).map((function(e){return n[e]})),t-r);return t-r}))}))})):this.modify((function(e,t){return t.value=null}))},e}();function un(e,t){return e<t?-1:e===t?0:1}function sn(e,t){return e>t?-1:e===t?0:1}function cn(e,t,n){var r=e instanceof yn?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function ln(e){return new e.Collection(e,(function(){return dn("")})).limit(0)}function fn(e,t,n,r,o,i){for(var a=Math.min(e.length,r.length),u=-1,s=0;s<a;++s){var c=t[s];if(c!==r[s])return o(e[s],n[s])<0?e.substr(0,s)+n[s]+n.substr(s+1):o(e[s],r[s])<0?e.substr(0,s)+r[s]+n.substr(s+1):u>=0?e.substr(0,u)+t[u]+n.substr(u+1):null;o(e[s],c)<0&&(u=s)}return a<r.length&&"next"===i?e+n.substr(e.length):a<e.length&&"prev"===i?e.substr(0,n.length):u<0?null:e.substr(0,u)+r[u]+n.substr(u+1)}function hn(e,t,n,r){var o,i,a,u,s,c,l,f=n.length;if(!n.every((function(e){return"string"==typeof e})))return cn(e,Ft);function h(e){o=function(e){return"next"===e?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()}}(e),i=function(e){return"next"===e?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()}}(e),a="next"===e?un:sn;var t=n.map((function(e){return{lower:i(e),upper:o(e)}})).sort((function(e,t){return a(e.lower,t.lower)}));u=t.map((function(e){return e.upper})),s=t.map((function(e){return e.lower})),c=e,l="next"===e?"":r}h("next");var p=new e.Collection(e,(function(){return pn(u[0],s[f-1]+r)}));p._ondirectionchange=function(e){h(e)};var d=0;return p._addAlgorithm((function(e,n,r){var o=e.key;if("string"!=typeof o)return!1;var h=i(o);if(t(h,s,d))return!0;for(var p=null,y=d;y<f;++y){var v=fn(o,h,u[y],s[y],a,c);null===v&&null===p?d=y+1:(null===p||a(p,v)>0)&&(p=v)}return n(null!==p?function(){e.continue(p+l)}:r),!1})),p}function pn(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function dn(e){return{type:1,lower:e,upper:e}}var yn=function(){function e(){}return Object.defineProperty(e.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!0,configurable:!0}),e.prototype.between=function(e,t,n,r){n=!1!==n,r=!0===r;try{return this._cmp(e,t)>0||0===this._cmp(e,t)&&(n||r)&&(!n||!r)?ln(this):new this.Collection(this,(function(){return pn(e,t,!n,!r)}))}catch(e){return cn(this,Rt)}},e.prototype.equals=function(e){return null==e?cn(this,Rt):new this.Collection(this,(function(){return dn(e)}))},e.prototype.above=function(e){return null==e?cn(this,Rt):new this.Collection(this,(function(){return pn(e,void 0,!0)}))},e.prototype.aboveOrEqual=function(e){return null==e?cn(this,Rt):new this.Collection(this,(function(){return pn(e,void 0,!1)}))},e.prototype.below=function(e){return null==e?cn(this,Rt):new this.Collection(this,(function(){return pn(void 0,e,!1,!0)}))},e.prototype.belowOrEqual=function(e){return null==e?cn(this,Rt):new this.Collection(this,(function(){return pn(void 0,e)}))},e.prototype.startsWith=function(e){return"string"!=typeof e?cn(this,Ft):this.between(e,e+Dt,!0,!0)},e.prototype.startsWithIgnoreCase=function(e){return""===e?this.startsWith(e):hn(this,(function(e,t){return 0===e.indexOf(t[0])}),[e],Dt)},e.prototype.equalsIgnoreCase=function(e){return hn(this,(function(e,t){return e===t[0]}),[e],"")},e.prototype.anyOfIgnoreCase=function(){var e=J.apply($,arguments);return 0===e.length?ln(this):hn(this,(function(e,t){return-1!==t.indexOf(e)}),e,"")},e.prototype.startsWithAnyOfIgnoreCase=function(){var e=J.apply($,arguments);return 0===e.length?ln(this):hn(this,(function(e,t){return t.some((function(t){return 0===e.indexOf(t)}))}),e,Dt)},e.prototype.anyOf=function(){var e=this,t=J.apply($,arguments),n=this._cmp;try{t.sort(n)}catch(e){return cn(this,Rt)}if(0===t.length)return ln(this);var r=new this.Collection(this,(function(){return pn(t[0],t[t.length-1])}));r._ondirectionchange=function(r){n="next"===r?e._ascending:e._descending,t.sort(n)};var o=0;return r._addAlgorithm((function(e,r,i){for(var a=e.key;n(a,t[o])>0;)if(++o===t.length)return r(i),!1;return 0===n(a,t[o])||(r((function(){e.continue(t[o])})),!1)})),r},e.prototype.notEqual=function(e){return this.inAnyRange([[Bt,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},e.prototype.noneOf=function(){var e=J.apply($,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(e){return cn(this,Rt)}var t=e.reduce((function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[Bt,t]]}),null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},e.prototype.inAnyRange=function(e,t){var n=this,r=this._cmp,o=this._ascending,i=this._descending,a=this._min,u=this._max;if(0===e.length)return ln(this);if(!e.every((function(e){return void 0!==e[0]&&void 0!==e[1]&&o(e[0],e[1])<=0})))return cn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ye.InvalidArgument);var s=!t||!1!==t.includeLowers,c=t&&!0===t.includeUppers;var l,f=o;function h(e,t){return f(e[0],t[0])}try{l=e.reduce((function(e,t){for(var n=0,o=e.length;n<o;++n){var i=e[n];if(r(t[0],i[1])<0&&r(t[1],i[0])>0){i[0]=a(i[0],t[0]),i[1]=u(i[1],t[1]);break}}return n===o&&e.push(t),e}),[]),l.sort(h)}catch(e){return cn(this,Rt)}var p=0,d=c?function(e){return o(e,l[p][1])>0}:function(e){return o(e,l[p][1])>=0},y=s?function(e){return i(e,l[p][0])>0}:function(e){return i(e,l[p][0])>=0};var v=d,m=new this.Collection(this,(function(){return pn(l[0][0],l[l.length-1][1],!s,!c)}));return m._ondirectionchange=function(e){"next"===e?(v=d,f=o):(v=y,f=i),l.sort(h)},m._addAlgorithm((function(e,t,r){for(var i=e.key;v(i);)if(++p===l.length)return t(r),!1;return!!function(e){return!d(e)&&!y(e)}(i)||(0===n._cmp(i,l[p][1])||0===n._cmp(i,l[p][0])||t((function(){f===o?e.continue(l[p][0]):e.continue(l[p][1])})),!1)})),m},e.prototype.startsWithAnyOf=function(){var e=J.apply($,arguments);return e.every((function(e){return"string"==typeof e}))?0===e.length?ln(this):this.inAnyRange(e.map((function(e){return[e,e+Dt]}))):cn(this,"startsWithAnyOf() only works with strings")},e}();function vn(e){return 1===e.length?e[0]:e}function mn(e){try{return e.only([[]]),[[]]}catch(e){return Dt}}function gn(e){return lt((function(t){return bn(t),e(t.target.error),!1}))}function bn(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var wn=function(){function e(){}return e.prototype._lock=function(){return C(!We.global),++this._reculock,1!==this._reculock||We.global||(We.lockOwnerFor=this),this},e.prototype._unlock=function(){if(C(!We.global),0==--this._reculock)for(We.global||(We.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{Et(e[1],e[0])}catch(e){}}return this},e.prototype._locked=function(){return this._reculock&&We.lockOwnerFor!==this},e.prototype.create=function(e){var t=this;if(!this.mode)return this;var n=this.db.idbdb,r=this.db._state.dbOpenError;if(C(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new ye.DatabaseClosed(r);case"MissingAPIError":throw new ye.MissingAPI(r.message,r);default:throw new ye.OpenFailed(r)}if(!this.active)throw new ye.TransactionInactive;return C(null===this._completion._state),(e=this.idbtrans=e||n.transaction(vn(this.storeNames),this.mode)).onerror=lt((function(n){bn(n),t._reject(e.error)})),e.onabort=lt((function(n){bn(n),t.active&&t._reject(new ye.Abort(e.error)),t.active=!1,t.on("abort").fire(n)})),e.oncomplete=lt((function(){t.active=!1,t._resolve()})),this},e.prototype._promise=function(e,t,n){var r=this;if("readwrite"===e&&"readwrite"!==this.mode)return Tt(new ye.ReadOnly("Transaction is readonly"));if(!this.active)return Tt(new ye.TransactionInactive);if(this._locked())return new Qe((function(o,i){r._blockedFuncs.push([function(){r._promise(e,t,n).then(o,i)},We])}));if(n)return mt((function(){var e=new Qe((function(e,n){r._lock();var o=t(e,n,r);o&&o.then&&o.then(e,n)}));return e.finally((function(){return r._unlock()})),e._lib=!0,e}));var o=new Qe((function(e,n){var o=t(e,n,r);o&&o.then&&o.then(e,n)}));return o._lib=!0,o},e.prototype._root=function(){return this.parent?this.parent._root():this},e.prototype.waitFor=function(e){var t=this._root(),n=Qe.resolve(e);if(t._waitingFor)t._waitingFor=t._waitingFor.then((function(){return n}));else{t._waitingFor=n,t._waitingQueue=[];var r=t.idbtrans.objectStore(t.storeNames[0]);!function e(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(r.get(-1/0).onsuccess=e)}()}var o=t._waitingFor;return new Qe((function(e,r){n.then((function(n){return t._waitingQueue.push(lt(e.bind(null,n)))}),(function(e){return t._waitingQueue.push(lt(r.bind(null,e)))})).finally((function(){t._waitingFor===o&&(t._waitingFor=null)}))}))},e.prototype.abort=function(){this.active&&this._reject(new ye.Abort),this.active=!1},e.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(x(t,e))return t[e];var n=this.schema[e];if(!n)throw new ye.NotFound("Table "+e+" not part of transaction");var r=new this.db.Table(e,n,this);return r.core=this.db.core.table(e),t[e]=r,r},e}();function _n(e,t,n,r,o,i,a){return{name:e,keyPath:t,unique:n,multi:r,auto:o,compound:i,src:(n&&!a?"&":"")+(r?"*":"")+(o?"++":"")+xn(t)}}function xn(e){return"string"==typeof e?e:e?"["+[].join.call(e,"+")+"]":""}function kn(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:D(n,(function(e){return[e.name,e]}))}}function On(e){return null==e?function(){}:"string"==typeof e?function(e){return 1===e.split(".").length?function(t){return t[e]}:function(t){return B(t,e)}}(e):function(t){return B(t,e)}}function En(e,t){return"delete"===t.type?t.keys:t.keys||t.values.map(e.extractKey)}function Pn(e){return[].slice.call(e)}var jn=0;function Sn(e){return null==e?":id":"string"==typeof e?e:"["+e.join("+")+"]"}function An(e,t,n,r){var o=t.cmp.bind(t);function i(e){if(3===e.type)return null;if(4===e.type)throw new Error("Cannot convert never type to IDBKeyRange");var t=e.lower,r=e.upper,o=e.lowerOpen,i=e.upperOpen;return void 0===t?void 0===r?null:n.upperBound(r,!!i):void 0===r?n.lowerBound(t,!!o):n.bound(t,r,!!o,!!i)}var a=function(e,t){var n=Pn(e.objectStoreNames);return{schema:{name:e.name,tables:n.map((function(e){return t.objectStore(e)})).map((function(e){var t=e.keyPath,n=e.autoIncrement,r=m(t),o=null==t,i={},a={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:o,compound:r,keyPath:t,autoIncrement:n,unique:!0,extractKey:On(t)},indexes:Pn(e.indexNames).map((function(t){return e.index(t)})).map((function(e){var t=e.name,n=e.unique,r=e.multiEntry,o=e.keyPath,a={name:t,compound:m(o),keyPath:o,unique:n,multiEntry:r,extractKey:On(o)};return i[Sn(o)]=a,a})),getIndexByKeyPath:function(e){return i[Sn(e)]}};return i[":id"]=a.primaryKey,null!=t&&(i[Sn(t)]=a.primaryKey),a}))},hasGetAll:n.length>0&&"getAll"in t.objectStore(n[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\\/|Edge\\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\\/(\\d*)/))[1]<604)}}(e,r),u=a.schema,s=a.hasGetAll,c=u.tables.map((function(e){return function(e){var t=e.name;return{name:t,schema:e,mutate:function(n){var r=n.trans,o=n.type,a=n.keys,u=n.values,s=n.range,c=n.wantResults;return new Promise((function(n,l){n=lt(n);var f=r.objectStore(t),h=null==f.keyPath,p="put"===o||"add"===o;if(!p&&"delete"!==o&&"deleteRange"!==o)throw new Error("Invalid operation type: "+o);var d=(a||u||{length:1}).length;if(a&&u&&a.length!==u.length)throw new Error("Given keys array must have same length as given values array.");if(0===d)return n({numFailures:0,failures:{},results:[],lastResult:void 0});var v,m=c&&y(a||En(e.primaryKey,{type:o,keys:a,values:u})),g=[],b=0,w=function(e){++b,bn(e),m&&(m[e.target._reqno]=void 0),g[e.target._reqno]=e.target.error},_=function(e){var t=e.target;m[t._reqno]=t.result};if("deleteRange"===o){if(4===s.type)return n({numFailures:b,failures:g,results:m,lastResult:void 0});v=3===s.type?f.clear():f.delete(i(s))}else{var x=p?h?[u,a]:[u,null]:[a,null],k=x[0],O=x[1];if(p)for(var E=0;E<d;++E)(v=O&&void 0!==O[E]?f[o](k[E],O[E]):f[o](k[E]))._reqno=E,m&&void 0===m[E]&&(v.onsuccess=_),v.onerror=w;else for(E=0;E<d;++E)(v=f[o](k[E]))._reqno=E,v.onerror=w}var P=function(e){var t=e.target.result;m&&(m[d-1]=t),n({numFailures:b,failures:g,results:m,lastResult:t})};v.onerror=function(e){w(e),P(e)},v.onsuccess=P}))},getMany:function(e){var n=e.trans,r=e.keys;return new Promise((function(e,o){e=lt(e);for(var i,a=n.objectStore(t),u=r.length,s=new Array(u),c=0,l=0,f=function(t){var n=t.target;s[n._pos]=n.result,++l===c&&e(s)},h=gn(o),p=0;p<u;++p)null!=r[p]&&((i=a.get(r[p]))._pos=p,i.onsuccess=f,i.onerror=h,++c);0===c&&e(s)}))},get:function(e){var n=e.trans,r=e.key;return new Promise((function(e,o){e=lt(e);var i=n.objectStore(t).get(r);i.onsuccess=function(t){return e(t.target.result)},i.onerror=gn(o)}))},query:function(e){return function(n){return new Promise((function(r,o){r=lt(r);var a=n.trans,u=n.values,s=n.limit,c=n.query,l=s===1/0?void 0:s,f=c.index,h=c.range,p=a.objectStore(t),d=f.isPrimaryKey?p:p.index(f.name),y=i(h);if(0===s)return r({result:[]});if(e){var v=u?d.getAll(y,l):d.getAllKeys(y,l);v.onsuccess=function(e){return r({result:e.target.result})},v.onerror=gn(o)}else{var m=0,g=u||!("openKeyCursor"in d)?d.openCursor(y):d.openKeyCursor(y),b=[];g.onsuccess=function(e){var t=g.result;return t?(b.push(u?t.value:t.primaryKey),++m===s?r({result:b}):void t.continue()):r({result:b})},g.onerror=gn(o)}}))}}(s),openCursor:function(e){var n=e.trans,r=e.values,o=e.query,a=e.reverse,u=e.unique;return new Promise((function(e,s){e=lt(e);var c=o.index,l=o.range,f=n.objectStore(t),h=c.isPrimaryKey?f:f.index(c.name),p=a?u?"prevunique":"prev":u?"nextunique":"next",d=r||!("openKeyCursor"in h)?h.openCursor(i(l),p):h.openKeyCursor(i(l),p);d.onerror=gn(s),d.onsuccess=lt((function(t){var r=d.result;if(r){r.___id=++jn,r.done=!1;var o=r.continue.bind(r),i=r.continuePrimaryKey;i&&(i=i.bind(r));var a=r.advance.bind(r),u=function(){throw new Error("Cursor not stopped")};r.trans=n,r.stop=r.continue=r.continuePrimaryKey=r.advance=function(){throw new Error("Cursor not started")},r.fail=lt(s),r.next=function(){var e=this,t=1;return this.start((function(){return t--?e.continue():e.stop()})).then((function(){return e}))},r.start=function(e){var t=new Promise((function(e,t){e=lt(e),d.onerror=gn(t),r.fail=t,r.stop=function(t){r.stop=r.continue=r.continuePrimaryKey=r.advance=u,e(t)}})),n=function(){if(d.result)try{e()}catch(e){r.fail(e)}else r.done=!0,r.start=function(){throw new Error("Cursor behind last entry")},r.stop()};return d.onsuccess=lt((function(e){d.onsuccess=n,n()})),r.continue=o,r.continuePrimaryKey=i,r.advance=a,n(),t},e(r)}else e(null)}),s)}))},count:function(e){var n=e.query,r=e.trans,o=n.index,a=n.range;return new Promise((function(e,n){var u=r.objectStore(t),s=o.isPrimaryKey?u:u.index(o.name),c=i(a),l=c?s.count(c):s.count();l.onsuccess=lt((function(t){return e(t.target.result)})),l.onerror=gn(n)}))}}}(e)})),l={};return c.forEach((function(e){return l[e.name]=e})),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(e){if(!l[e])throw new Error("Table \'"+e+"\' not found");return l[e]},cmp:o,MIN_KEY:-1/0,MAX_KEY:mn(n),schema:u}}function Kn(e,t,n,r){var o=n.IDBKeyRange,i=function(e,t){return t.reduce((function(e,t){var n=t.create;return d(d({},e),n(e))}),e)}(An(t,n.indexedDB,o,r),e.dbcore);return{dbcore:i}}function Tn(e,t){var n=t.db,r=Kn(e._middlewares,n,e._deps,t);e.core=r.dbcore,e.tables.forEach((function(t){var n=t.name;e.core.schema.tables.some((function(e){return e.name===n}))&&(t.core=e.core.table(n),e[n]instanceof e.Table&&(e[n].core=t.core))}))}function Cn(e,t,n,r){n.forEach((function(n){var o=r[n];t.forEach((function(t){var r=S(t,n);(!r||"value"in r&&void 0===r.value)&&(t===e.Transaction.prototype||t instanceof e.Transaction?E(t,n,{get:function(){return this.table(n)},set:function(e){O(this,n,{value:e,writable:!0,configurable:!0,enumerable:!0})}}):t[n]=new e.Table(n,o))}))}))}function In(e,t){t.forEach((function(t){for(var n in t)t[n]instanceof e.Table&&delete t[n]}))}function Dn(e,t){return e._cfg.version-t._cfg.version}function Bn(e,t,n,r){var o=e._dbSchema,i=e._createTransaction("readwrite",e._storeNames,o);i.create(n),i._completion.catch(r);var a=i._reject.bind(i),u=We.transless||We;mt((function(){We.trans=i,We.transless=u,0===t?(v(o).forEach((function(e){Fn(n,e,o[e].primKey,o[e].indexes)})),Tn(e,n),Qe.follow((function(){return e.on.populate.fire(i)})).catch(a)):function(e,t,n,r){var o=[],i=e._versions,a=e._dbSchema=qn(e,e.idbdb,r),u=!1;function s(){return o.length?Qe.resolve(o.shift()(n.idbtrans)).then(s):Qe.resolve()}return i.filter((function(e){return e._cfg.version>=t})).forEach((function(i){o.push((function(){var o=a,s=i._cfg.dbschema;Mn(e,o,r),Mn(e,s,r),a=e._dbSchema=s;var c=Rn(o,s);c.add.forEach((function(e){Fn(r,e[0],e[1].primKey,e[1].indexes)})),c.change.forEach((function(e){if(e.recreate)throw new ye.Upgrade("Not yet support for changing primary key");var t=r.objectStore(e.name);e.add.forEach((function(e){return Nn(t,e)})),e.change.forEach((function(e){t.deleteIndex(e.name),Nn(t,e)})),e.del.forEach((function(e){return t.deleteIndex(e)}))}));var l=i._cfg.contentUpgrade;if(l&&i._cfg.version>t){Tn(e,r),n._memoizedTables={},u=!0;var f=N(s);c.del.forEach((function(e){f[e]=o[e]})),In(e,[e.Transaction.prototype]),Cn(e,[e.Transaction.prototype],v(f),f),n.schema=f;var h,p=Z(l);p&&gt();var d=Qe.follow((function(){if((h=l(n))&&p){var e=bt.bind(null,null);h.then(e,e)}}));return h&&"function"==typeof h.then?Qe.resolve(h):d.then((function(){return h}))}})),o.push((function(t){u&&Mt||function(e,t){for(var n=0;n<t.db.objectStoreNames.length;++n){var r=t.db.objectStoreNames[n];null==e[r]&&t.db.deleteObjectStore(r)}}(i._cfg.dbschema,t);In(e,[e.Transaction.prototype]),Cn(e,[e.Transaction.prototype],e._storeNames,e._dbSchema),n.schema=e._dbSchema}))})),s().then((function(){var e,t;t=r,v(e=a).forEach((function(n){t.db.objectStoreNames.contains(n)||Fn(t,n,e[n].primKey,e[n].indexes)}))}))}(e,t,i,n).catch(a)}))}function Rn(e,t){var n,r={del:[],add:[],change:[]};for(n in e)t[n]||r.del.push(n);for(n in t){var o=e[n],i=t[n];if(o){var a={name:n,def:i,recreate:!1,del:[],add:[],change:[]};if(""+(o.primKey.keyPath||"")!=""+(i.primKey.keyPath||"")||o.primKey.auto!==i.primKey.auto&&!qt)a.recreate=!0,r.change.push(a);else{var u=o.idxByName,s=i.idxByName,c=void 0;for(c in u)s[c]||a.del.push(c);for(c in s){var l=u[c],f=s[c];l?l.src!==f.src&&a.change.push(f):a.add.push(f)}(a.del.length>0||a.add.length>0||a.change.length>0)&&r.change.push(a)}}else r.add.push([n,i])}return r}function Fn(e,t,n,r){var o=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach((function(e){return Nn(o,e)})),o}function Nn(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function qn(e,t,n){var r={};return K(t.objectStoreNames,0).forEach((function(e){for(var t=n.objectStore(e),o=t.keyPath,i=_n(xn(o),o||"",!1,!1,!!t.autoIncrement,o&&"string"!=typeof o,!0),a=[],u=0;u<t.indexNames.length;++u){var s=t.index(t.indexNames[u]);o=s.keyPath;var c=_n(s.name,o,!!s.unique,!!s.multiEntry,!1,o&&"string"!=typeof o,!1);a.push(c)}r[e]=kn(e,i,a)})),r}function Mn(e,t,n){for(var r=n.db.objectStoreNames,o=0;o<r.length;++o){var i=r[o],a=n.objectStore(i);e._hasGetAll="getAll"in a;for(var u=0;u<a.indexNames.length;++u){var s=a.indexNames[u],c=a.index(s).keyPath,l="string"==typeof c?c:"["+K(c).join("+")+"]";if(t[i]){var f=t[i].idxByName[l];f&&(f.name=s,delete t[i].idxByName[l],t[i].idxByName[s]=f)}}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\\/|Edge\\/)/.test(navigator.userAgent)&&g.WorkerGlobalScope&&g instanceof g.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\\/(\\d*)/))[1]<604&&(e._hasGetAll=!1)}var Ln,Un=function(){function e(){}return e.prototype._parseStoresSpec=function(e,t){v(e).forEach((function(n){if(null!==e[n]){var r=e[n].split(",").map((function(e,t){var n=(e=e.trim()).replace(/([&*]|\\+\\+)/g,""),r=/^\\[/.test(n)?n.match(/^\\[(.*)\\]$/)[1].split("+"):n;return _n(n,r||null,/\\&/.test(e),/\\*/.test(e),/\\+\\+/.test(e),m(r),0===t)})),o=r.shift();if(o.multi)throw new ye.Schema("Primary key cannot be multi-valued");r.forEach((function(e){if(e.auto)throw new ye.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new ye.Schema("Index must have a name and cannot be an empty string")})),t[n]=kn(n,o,r)}}))},e.prototype.stores=function(e){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?b(this._cfg.storesSource,e):e;var n=t._versions,r={},o={};return n.forEach((function(e){b(r,e._cfg.storesSource),o=e._cfg.dbschema={},e._parseStoresSpec(r,o)})),t._dbSchema=o,In(t,[t._allTables,t,t.Transaction.prototype]),Cn(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],v(o),o),t._storeNames=v(o),this},e.prototype.upgrade=function(e){return this._cfg.contentUpgrade=e,this},e}();function Vn(e){return mt((function(){return We.letThrough=!0,e()}))}function Gn(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then((function(){return t.dbOpenError?Tt(t.dbOpenError):e}));ee&&(t.openCanceller._stackHolder=oe()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.dbReadyResolve,o=null;return Qe.race([t.openCanceller,new Qe((function(r,i){if(!n)throw new ye.MissingAPI("indexedDB API not found. If using IE10+, make sure to run your code on a server URL (not locally). If using old Safari versions, make sure to include indexedDB polyfill.");var a=e.name,u=t.autoSchema?n.open(a):n.open(a,Math.round(10*e.verno));if(!u)throw new ye.MissingAPI("IndexedDB API not available");u.onerror=gn(i),u.onblocked=lt(e._fireOnBlocked),u.onupgradeneeded=lt((function(r){if(o=u.transaction,t.autoSchema&&!e._options.allowEmptyDB){u.onerror=bn,o.abort(),u.result.close();var s=n.deleteDatabase(a);s.onsuccess=s.onerror=lt((function(){i(new ye.NoSuchDatabase("Database "+a+" doesnt exist"))}))}else{o.onerror=gn(i);var c=r.oldVersion>Math.pow(2,62)?0:r.oldVersion;e.idbdb=u.result,Bn(e,c/10,o,i)}}),i),u.onsuccess=lt((function(){o=null;var n=e.idbdb=u.result,i=K(n.objectStoreNames);if(i.length>0)try{var s=n.transaction(vn(i),"readonly");t.autoSchema?function(e,t,n){e.verno=t.version/10;var r=e._dbSchema=qn(0,t,n);e._storeNames=K(t.objectStoreNames,0),Cn(e,[e._allTables],v(r),r)}(e,n,s):(Mn(e,e._dbSchema,s),function(e,t){var n=Rn(qn(0,e.idbdb,t),e._dbSchema);return!(n.add.length||n.change.some((function(e){return e.add.length||e.change.length})))}(e,s)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),Tn(e,s)}catch(e){}Nt.push(e),n.onversionchange=lt((function(n){t.vcFired=!0,e.on("versionchange").fire(n)})),Ln.add(a),r()}),i)}))]).then((function(){return t.onReadyBeingFired=[],Qe.resolve(Vn(e.on.ready.fire)).then((function e(){if(t.onReadyBeingFired.length>0){var n=t.onReadyBeingFired.reduce(Pe,ge);return t.onReadyBeingFired=[],Qe.resolve(Vn(n)).then(e)}}))})).finally((function(){t.onReadyBeingFired=null})).then((function(){return t.isBeingOpened=!1,e})).catch((function(n){try{o&&o.abort()}catch(e){}return t.isBeingOpened=!1,e.close(),t.dbOpenError=n,Tt(t.dbOpenError)})).finally((function(){t.openComplete=!0,r()}))}function Wn(e){var t=function(t){return e.next(t)},n=o(t),r=o((function(t){return e.throw(t)}));function o(e){return function(t){var o=e(t),i=o.value;return o.done?i:i&&"function"==typeof i.then?i.then(n,r):m(i)?Promise.all(i).then(n,r):n(i)}}return o(t)()}function zn(e,t,n){var r=arguments.length;if(r<2)throw new ye.InvalidArgument("Too few arguments");for(var o=new Array(r-1);--r;)o[r-1]=arguments[r];n=o.pop();var i=M(o);return[e,i,n]}function Yn(e,t,n,r,o){return Qe.resolve().then((function(){var i=We.transless||We,a=e._createTransaction(t,n,e._dbSchema,r),u={trans:a,transless:i};r?a.idbtrans=r.idbtrans:a.create();var s,c=Z(o);c&&gt();var l=Qe.follow((function(){if(s=o.call(a,a))if(c){var e=bt.bind(null,null);s.then(e,e)}else"function"==typeof s.next&&"function"==typeof s.throw&&(s=Wn(s))}),u);return(s&&"function"==typeof s.then?Qe.resolve(s).then((function(e){return a.active?e:Tt(new ye.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))})):l.then((function(){return s}))).then((function(e){return r&&a._resolve(),a._completion.then((function(){return e}))})).catch((function(e){return a._reject(e),Tt(e)}))}))}function Hn(e,t,n){for(var r=m(e)?e.slice():[e],o=0;o<n;++o)r.push(t);return r}var Qn={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return d(d({},e),{table:function(t){var n=e.table(t),r=n.schema,o={},i=[];function a(e,t,n){var r=Sn(e),u=o[r]=o[r]||[],s=null==e?0:"string"==typeof e?1:e.length,c=t>0,l=d(d({},n),{isVirtual:c,isPrimaryKey:!c&&n.isPrimaryKey,keyTail:t,keyLength:s,extractKey:On(e),unique:!c&&n.unique});(u.push(l),l.isPrimaryKey||i.push(l),s>1)&&a(2===s?e[0]:e.slice(0,s-1),t+1,n);return u.sort((function(e,t){return e.keyTail-t.keyTail})),l}var u=a(r.primaryKey.keyPath,0,r.primaryKey);o[":id"]=[u];for(var s=0,c=r.indexes;s<c.length;s++){var l=c[s];a(l.keyPath,0,l)}function f(t){var n,r,o=t.query.index;return o.isVirtual?d(d({},t),{query:{index:o,range:(n=t.query.range,r=o.keyTail,{type:1===n.type?2:n.type,lower:Hn(n.lower,n.lowerOpen?e.MAX_KEY:e.MIN_KEY,r),lowerOpen:!0,upper:Hn(n.upper,n.upperOpen?e.MIN_KEY:e.MAX_KEY,r),upperOpen:!0})}}):t}var h=d(d({},n),{schema:d(d({},r),{primaryKey:u,indexes:i,getIndexByKeyPath:function(e){var t=o[Sn(e)];return t&&t[0]}}),count:function(e){return n.count(f(e))},query:function(e){return n.query(f(e))},openCursor:function(t){var r=t.query.index,o=r.keyTail,i=r.isVirtual,a=r.keyLength;if(!i)return n.openCursor(t);return n.openCursor(f(t)).then((function(n){return n&&function(n){var r=Object.create(n,{continue:{value:function(r){null!=r?n.continue(Hn(r,t.reverse?e.MAX_KEY:e.MIN_KEY,o)):t.unique?n.continue(Hn(n.key,t.reverse?e.MIN_KEY:e.MAX_KEY,o)):n.continue()}},continuePrimaryKey:{value:function(t,r){n.continuePrimaryKey(Hn(t,e.MAX_KEY,o),r)}},key:{get:function(){var e=n.key;return 1===a?e[0]:e.slice(0,a)}},value:{get:function(){return n.value}}});return r}(n)}))}});return h}})}},Xn={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return d(d({},e),{table:function(t){var n=e.table(t),r=n.schema.primaryKey,o=d(d({},n),{mutate:function(e){var o=We.trans,i=o.table(t).hook,a=i.deleting,u=i.creating,s=i.updating;switch(e.type){case"add":if(u.fire===ge)break;return o._promise("readwrite",(function(){return c(e)}),!0);case"put":if(u.fire===ge&&s.fire===ge)break;return o._promise("readwrite",(function(){return c(e)}),!0);case"delete":if(a.fire===ge)break;return o._promise("readwrite",(function(){return c(e)}),!0);case"deleteRange":if(a.fire===ge)break;return o._promise("readwrite",(function(){return function(e){return l(e.trans,e.range,1e4)}(e)}),!0)}return n.mutate(e);function c(e){var t=We.trans,o=e.keys||En(r,e);if(!o)throw new Error("Keys missing");return"delete"!==(e="add"===e.type||"put"===e.type?d(d({},e),{keys:o,wantResults:!0}):d({},e)).type&&(e.values=y(e.values)),e.keys&&(e.keys=y(e.keys)),function(e,t,n){return"add"===t.type?Promise.resolve(new Array(t.values.length)):e.getMany({trans:t.trans,keys:n})}(n,e,o).then((function(i){var c=o.map((function(n,o){var c=i[o],l={onerror:null,onsuccess:null};if("delete"===e.type)a.fire.call(l,n,c,t);else if("add"===e.type||void 0===c){var f=u.fire.call(l,n,e.values[o],t);null==n&&null!=f&&(n=f,e.keys[o]=n,r.outbound||R(e.values[o],r.keyPath,n))}else{var h=H(c,e.values[o]),p=s.fire.call(l,h,n,c,t);if(p){var d=e.values[o];Object.keys(p).forEach((function(e){x(d,e)?d[e]=p[e]:R(d,e,p[e])}))}}return l}));return n.mutate(e).then((function(t){for(var n=t.failures,r=t.results,a=t.numFailures,u=t.lastResult,s=0;s<o.length;++s){var l=r?r[s]:o[s],f=c[s];null==l?f.onerror&&f.onerror(n[s]):f.onsuccess&&f.onsuccess("put"===e.type&&i[s]?e.values[s]:l)}return{failures:n,results:r,numFailures:a,lastResult:u}})).catch((function(e){return c.forEach((function(t){return t.onerror&&t.onerror(e)})),Promise.reject(e)}))}))}function l(e,t,o){return n.query({trans:e,values:!1,query:{index:r,range:t},limit:o}).then((function(n){var r=n.result;return c({type:"delete",keys:r,trans:e}).then((function(n){return n.numFailures>0?Promise.reject(n.failures[0]):r.length<o?{failures:[],numFailures:0,lastResult:void 0}:l(e,d(d({},t),{lower:r[r.length-1],lowerOpen:!0}),o)}))}))}}});return o}})}},$n=function(){function e(t,n){var r=this;this._middlewares={},this.verno=0;var o=e.dependencies;this._options=n=d({addons:e.addons,autoOpen:!0,indexedDB:o.indexedDB,IDBKeyRange:o.IDBKeyRange},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};var i=n.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null;var a={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ge,dbReadyPromise:null,cancelOpen:ge,openCanceller:null,autoSchema:!0};a.dbReadyPromise=new Qe((function(e){a.dbReadyResolve=e})),a.openCanceller=new Qe((function(e,t){a.cancelOpen=t})),this._state=a,this.name=t,this.on=Xt(this,"populate","blocked","versionchange",{ready:[Pe,ge]}),this.on.ready.subscribe=T(this.on.ready.subscribe,(function(t){return function(n,o){e.vip((function(){var e=r._state;if(e.openComplete)e.dbOpenError||Qe.resolve().then(n),o&&t(n);else if(e.onReadyBeingFired)e.onReadyBeingFired.push(n),o&&t(n);else{t(n);var i=r;o||t((function e(){i.on.ready.unsubscribe(n),i.on.ready.unsubscribe(e)}))}}))}})),this.Collection=function(e){return $t(an.prototype,(function(t,n){this.db=e;var r=Yt,o=null;if(n)try{r=n()}catch(e){o=e}var i=t._ctx,a=i.table,u=a.hook.reading.fire;this._ctx={table:a,index:i.index,isPrimKey:!i.index||a.schema.primKey.keyPath&&i.index===a.schema.primKey.name,range:r,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:o,or:i.or,valueMapper:u!==be?u:null}}))}(this),this.Table=function(e){return $t(Qt.prototype,(function(t,n,r){this.db=e,this._tx=r,this.name=t,this.schema=n,this.hook=e._allTables[t]?e._allTables[t].hook:Xt(null,{creating:[xe,ge],reading:[we,be],updating:[Oe,ge],deleting:[ke,ge]})}))}(this),this.Transaction=function(e){return $t(wn.prototype,(function(t,n,r,o){var i=this;this.db=e,this.mode=t,this.storeNames=n,this.schema=r,this.idbtrans=null,this.on=Xt(this,"complete","error","abort"),this.parent=o||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Qe((function(e,t){i._resolve=e,i._reject=t})),this._completion.then((function(){i.active=!1,i.on.complete.fire()}),(function(e){var t=i.active;return i.active=!1,i.on.error.fire(e),i.parent?i.parent._reject(e):t&&i.idbtrans&&i.idbtrans.abort(),Tt(e)}))}))}(this),this.Version=function(e){return $t(Un.prototype,(function(t){this.db=e,this._cfg={version:t,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}}))}(this),this.WhereClause=function(e){return $t(yn.prototype,(function(t,n,r){this.db=e,this._ctx={table:t,index:":id"===n?null:n,or:r};var o=e._deps.indexedDB;if(!o)throw new ye.MissingAPI("indexedDB API missing");this._cmp=this._ascending=o.cmp.bind(o),this._descending=function(e,t){return o.cmp(t,e)},this._max=function(e,t){return o.cmp(e,t)>0?e:t},this._min=function(e,t){return o.cmp(e,t)<0?e:t},this._IDBKeyRange=e._deps.IDBKeyRange}))}(this),this.on("versionchange",(function(e){e.newVersion>0?console.warn("Another connection wants to upgrade database \'"+r.name+"\'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database \'"+r.name+"\'. Closing db now to resume the delete request."),r.close()})),this.on("blocked",(function(e){!e.newVersion||e.newVersion<e.oldVersion?console.warn("Dexie.delete(\'"+r.name+"\') was blocked"):console.warn("Upgrade \'"+r.name+"\' blocked by other connection holding version "+e.oldVersion/10)})),this._maxKey=mn(n.IDBKeyRange),this._createTransaction=function(e,t,n,o){return new r.Transaction(e,t,n,o)},this._fireOnBlocked=function(e){r.on("blocked").fire(e),Nt.filter((function(e){return e.name===r.name&&e!==r&&!e._state.vcFired})).map((function(t){return t.on("versionchange").fire(e)}))},this.use(Qn),this.use(Xn),i.forEach((function(e){return e(r)}))}return e.prototype.version=function(e){if(isNaN(e)||e<.1)throw new ye.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new ye.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,n=t.filter((function(t){return t._cfg.version===e}))[0];return n||(n=new this.Version(e),t.push(n),t.sort(Dn),n.stores({}),this._state.autoSchema=!1,n)},e.prototype._whenReady=function(e){var t=this;return this._state.openComplete||We.letThrough?e():new Qe((function(e,n){if(!t._state.isBeingOpened){if(!t._options.autoOpen)return void n(new ye.DatabaseClosed);t.open().catch(ge)}t._state.dbReadyPromise.then(e,n)})).then(e)},e.prototype.use=function(e){var t=e.stack,n=e.create,r=e.level,o=e.name;o&&this.unuse({stack:t,name:o});var i=this._middlewares[t]||(this._middlewares[t]=[]);return i.push({stack:t,create:n,level:null==r?10:r,name:o}),i.sort((function(e,t){return e.level-t.level})),this},e.prototype.unuse=function(e){var t=e.stack,n=e.name,r=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter((function(e){return r?e.create!==r:!!n&&e.name!==n}))),this},e.prototype.open=function(){return Gn(this)},e.prototype.close=function(){var e=Nt.indexOf(this),t=this._state;if(e>=0&&Nt.splice(e,1),this.idbdb){try{this.idbdb.close()}catch(e){}this.idbdb=null}this._options.autoOpen=!1,t.dbOpenError=new ye.DatabaseClosed,t.isBeingOpened&&t.cancelOpen(t.dbOpenError),t.dbReadyPromise=new Qe((function(e){t.dbReadyResolve=e})),t.openCanceller=new Qe((function(e,n){t.cancelOpen=n}))},e.prototype.delete=function(){var e=this,t=arguments.length>0,n=this._state;return new Qe((function(r,o){var i=function(){e.close();var t=e._deps.indexedDB.deleteDatabase(e.name);t.onsuccess=lt((function(){Ln.remove(e.name),r()})),t.onerror=gn(o),t.onblocked=e._fireOnBlocked};if(t)throw new ye.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(i):i()}))},e.prototype.backendDB=function(){return this.idbdb},e.prototype.isOpen=function(){return null!==this.idbdb},e.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name},e.prototype.hasFailed=function(){return null!==this._state.dbOpenError},e.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(e.prototype,"tables",{get:function(){var e=this;return v(this._allTables).map((function(t){return e._allTables[t]}))},enumerable:!0,configurable:!0}),e.prototype.transaction=function(){var e=zn.apply(this,arguments);return this._transaction.apply(this,e)},e.prototype._transaction=function(e,t,n){var r=this,o=We.trans;o&&o.db===this&&-1===e.indexOf("!")||(o=null);var i,a,u=-1!==e.indexOf("?");e=e.replace("!","").replace("?","");try{if(a=t.map((function(e){var t=e instanceof r.Table?e.name:e;if("string"!=typeof t)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return t})),"r"==e||e===Gt)i=Gt;else{if("rw"!=e&&e!=Wt)throw new ye.InvalidArgument("Invalid transaction mode: "+e);i=Wt}if(o){if(o.mode===Gt&&i===Wt){if(!u)throw new ye.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");o=null}o&&a.forEach((function(e){if(o&&-1===o.storeNames.indexOf(e)){if(!u)throw new ye.SubTransaction("Table "+e+" not included in parent transaction.");o=null}})),u&&o&&!o.active&&(o=null)}}catch(e){return o?o._promise(null,(function(t,n){n(e)})):Tt(e)}var s=Yn.bind(null,this,i,a,o,n);return o?o._promise(i,s,"lock"):We.trans?Et(We.transless,(function(){return r._whenReady(s)})):this._whenReady(s)},e.prototype.table=function(e){if(!x(this._allTables,e))throw new ye.InvalidTable("Table "+e+" does not exist");return this._allTables[e]},e}(),Jn=$n;k(Jn,d(d({},me),{delete:function(e){return new Jn(e).delete()},exists:function(e){return new Jn(e,{addons:[]}).open().then((function(e){return e.close(),!0})).catch("NoSuchDatabaseError",(function(){return!1}))},getDatabaseNames:function(e){return Ln?Ln.getDatabaseNames().then(e):Qe.resolve([])},defineClass:function(){return function(e){b(this,e)}},ignoreTransaction:function(e){return We.trans?Et(We.transless,e):e()},vip:Vn,async:function(e){return function(){try{var t=Wn(e.apply(this,arguments));return t&&"function"==typeof t.then?t:Qe.resolve(t)}catch(e){return Tt(e)}}},spawn:function(e,t,n){try{var r=Wn(e.apply(n,t||[]));return r&&"function"==typeof r.then?r:Qe.resolve(r)}catch(e){return Tt(e)}},currentTransaction:{get:function(){return We.trans||null}},waitFor:function(e,t){var n=Qe.resolve("function"==typeof e?Jn.ignoreTransaction(e):e).timeout(t||6e4);return We.trans?We.trans.waitFor(n):n},Promise:Qe,debug:{get:function(){return ee},set:function(e){te(e,"dexie"===e?function(){return!0}:Ut)}},derive:P,extend:b,props:k,override:T,Events:Xt,getByKeyPath:B,setByKeyPath:R,delByKeyPath:F,shallowClone:N,deepClone:G,getObjectDiff:H,asap:I,minKey:Bt,addons:[],connections:Nt,errnames:pe,dependencies:function(){try{return{indexedDB:g.indexedDB||g.mozIndexedDB||g.webkitIndexedDB||g.msIndexedDB,IDBKeyRange:g.IDBKeyRange||g.webkitIDBKeyRange}}catch(e){return{indexedDB:null,IDBKeyRange:null}}}(),semVer:It,version:It.split(".").map((function(e){return parseInt(e)})).reduce((function(e,t,n){return e+t/Math.pow(10,2*n)})),default:Jn,Dexie:Jn})),Jn.maxKey=mn(Jn.dependencies.IDBKeyRange),function(e){try{Ln=function(e){var t,n=e&&"function"==typeof e.databases;if(!n){var r=new $n(Vt,{addons:[]});r.version(1).stores({dbnames:"name"}),t=r.table("dbnames")}return{getDatabaseNames:function(){return n?Qe.resolve(e.databases()).then((function(e){return e.map((function(e){return e.name})).filter((function(e){return e!==Vt}))})):t.toCollection().primaryKeys()},add:function(e){return!n&&e!==Vt&&t.put({name:e}).catch(ge)},remove:function(e){return!n&&e!==Vt&&t.delete(e).catch(ge)}}}(e)}catch(e){}}($n.dependencies.indexedDB),Qe.rejectionMapper=function(e,t){if(!e||e instanceof ce||e instanceof TypeError||e instanceof SyntaxError||!e.name||!ve[e.name])return e;var n=new ve[e.name](t||e.message,e);return"stack"in e&&E(n,"stack",{get:function(){return this.inner.stack}}),n},te(ee,Ut);function Zn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h(this,n)}}var er=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&l(e,t)}(n,e);var t=Zn(n);function n(){var e;return u(this,n),(e=t.call(this,"AgoraLogger")).logs=void 0,e.openDatabase(),e.logs=e.table("logs"),e}return c(n,[{key:"openDatabase",value:function(){this.version(1).stores({logs:"++id, content, created_at"})}}]),n}($n)),tr=function(){function e(){u(this,e),this.mutex=Promise.resolve()}var n;return c(e,[{key:"lock",value:function(){var e=function(e){};return this.mutex=this.mutex.then((function(){return new Promise(e)})),new Promise((function(t){e=t}))}},{key:"dispatch",value:(n=t(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.lock();case 2:return n=e.sent,e.prev=3,e.next=6,Promise.resolve(t());case 6:return e.abrupt("return",e.sent);case 7:return e.prev=7,n(),e.finish(7);case 10:case"end":return e.stop()}}),e,this,[[3,,7,10]])}))),function(e){return n.apply(this,arguments)})}]),e}();console.log("[log worker] log worker initialzied");var nr=self,rr=new tr,or=[],ir=function(){var e;(e=console).debug.apply(e,arguments)},ar=a()((function(){rr.dispatch(t(o().mark((function e(){var t,n,r,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(new Date).getTime(),n=or,or=[],e.prev=3,e.next=6,er.logs.count();case 6:if(r=e.sent,!((i=n.length+r-5e4)>0)){e.next=12;break}return e.next=11,er.logs.orderBy(":id").reverse().limit(i).delete();case 11:console.debug("[log worker] clear ".concat(i," records"));case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),console.error("[log worker] clear db failed");case 17:return e.prev=17,e.next=20,er.logs.bulkPut(n);case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(17),console.error("[log worker] bulkPut ".concat(n.length," failed"));case 25:a=(new Date).getTime(),ir("[log worker] done writing ".concat(n.length," records in ").concat(a-t,"ms"));case 27:case"end":return e.stop()}}),e,null,[[3,14],[17,22]])}))))}),2e3,{maxWait:3e4});nr.onmessage=function(){var e=t(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.data&&"log"===t.data.type&&(n=new Date,or.push({content:t.data.data,created_at:+Date.now(),timestamp:"".concat(n)}),ar());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})()})();',"Worker",void 0,__webpack_require__.p+"index.worker.js")}var O=function(){return O=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},O.apply(this,arguments)};function N(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}var x=Object.keys,D=Array.isArray,L="undefined"!=typeof self?self:"undefined"!=typeof window?window:global;function P(e,t){return"object"!=typeof t||x(t).forEach((function(n){e[n]=t[n]})),e}"undefined"==typeof Promise||L.Promise||(L.Promise=Promise);var B=Object.getPrototypeOf,M={}.hasOwnProperty;function j(e,t){return M.call(e,t)}function U(e,t){"function"==typeof t&&(t=t(B(e))),x(t).forEach((function(n){Q(e,n,t[n])}))}var F=Object.defineProperty;function Q(e,t,n,r){F(e,t,P(n&&j(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function G(e){return{from:function(t){return e.prototype=Object.create(t.prototype),Q(e.prototype,"constructor",e),{extend:U.bind(null,e.prototype)}}}}var q=Object.getOwnPropertyDescriptor;function V(e,t){var n;return q(e,t)||(n=B(e))&&V(n,t)}var K=[].slice;function H(e,t,n){return K.call(e,t,n)}function W(e,t){return t(e)}function z(e){if(!e)throw new Error("Assertion Failed")}function Y(e){L.setImmediate?setImmediate(e):setTimeout(e,0)}function J(e,t){return e.reduce((function(e,n,r){var i=t(n,r);return i&&(e[i[0]]=i[1]),e}),{})}function X(e,t){if(j(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var n=[],r=0,i=t.length;r<i;++r){var o=X(e,t[r]);n.push(o)}return n}var a=t.indexOf(".");if(-1!==a){var s=e[t.substr(0,a)];return void 0===s?void 0:X(s,t.substr(a+1))}}function Z(e,t,n){if(e&&void 0!==t&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){z("string"!=typeof n&&"length"in n);for(var r=0,i=t.length;r<i;++r)Z(e,t[r],n[r])}else{var o=t.indexOf(".");if(-1!==o){var a=t.substr(0,o),s=t.substr(o+1);if(""===s)void 0===n?D(e)&&!isNaN(parseInt(a))?e.splice(a,1):delete e[a]:e[a]=n;else{var c=e[a];c||(c=e[a]={}),Z(c,s,n)}}else void 0===n?D(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function $(e,t){"string"==typeof t?Z(e,t,void 0):"length"in t&&[].map.call(t,(function(t){Z(e,t,void 0)}))}function ee(e){var t={};for(var n in e)j(e,n)&&(t[n]=e[n]);return t}var te=[].concat;function ne(e){return te.apply([],e)}var re="Boolean,String,Date,RegExp,Blob,File,FileList,ArrayBuffer,DataView,Uint8ClampedArray,ImageData,Map,Set".split(",").concat(ne([8,16,32,64].map((function(e){return["Int","Uint","Float"].map((function(t){return t+e+"Array"}))})))).filter((function(e){return L[e]})),ie=re.map((function(e){return L[e]})),oe=J(re,(function(e){return[e,!0]}));function ae(e){if(!e||"object"!=typeof e)return e;var t;if(D(e)){t=[];for(var n=0,r=e.length;n<r;++n)t.push(ae(e[n]))}else if(ie.indexOf(e.constructor)>=0)t=e;else for(var i in t=e.constructor?Object.create(e.constructor.prototype):{},e)j(e,i)&&(t[i]=ae(e[i]));return t}var se={}.toString;function ce(e){return se.call(e).slice(8,-1)}var ue=function(e,t){return"Array"===t?""+e.map((function(e){return ue(e,ce(e))})):"ArrayBuffer"===t?""+new Uint8Array(e):"Date"===t?e.getTime():ArrayBuffer.isView(e)?""+new Uint8Array(e.buffer):e};function le(e,t,n,r){return n=n||{},r=r||"",x(e).forEach((function(i){if(j(t,i)){var o=e[i],a=t[i];if("object"==typeof o&&"object"==typeof a&&o&&a){var s=ce(o),c=ce(a);s===c?oe[s]?ue(o,s)!==ue(a,c)&&(n[r+i]=t[i]):le(o,a,n,r+i+"."):n[r+i]=t[i]}else o!==a&&(n[r+i]=t[i])}else n[r+i]=void 0})),x(t).forEach((function(i){j(e,i)||(n[r+i]=t[i])})),n}var he="undefined"!=typeof Symbol&&Symbol.iterator,de=he?function(e){var t;return null!=e&&(t=e[he])&&t.apply(e)}:function(){return null},fe={};function pe(e){var t,n,r,i;if(1===arguments.length){if(D(e))return e.slice();if(this===fe&&"string"==typeof e)return[e];if(i=de(e)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(null==e)return[e];if("number"==typeof(t=e.length)){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var ge="undefined"!=typeof Symbol?function(e){return"AsyncFunction"===e[Symbol.toStringTag]}:function(){return!1},Ae="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ve(e,t){Ae=e,me=t}var me=function(){return!0},ye=!new Error("").stack;function be(){if(ye)try{throw new Error}catch(e){return e}return new Error}function _e(e,t){var n=e.stack;return n?(t=t||0,0===n.indexOf(e.name)&&(t+=(e.name+e.message).split("\n").length),n.split("\n").slice(t).filter(me).map((function(e){return"\n"+e})).join("")):""}var Ee=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],we=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Ee),Ie={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed"};function Ce(e,t){this._e=be(),this.name=e,this.message=t}function Se(e,t){return e+". Errors: "+Object.keys(t).map((function(e){return t[e].toString()})).filter((function(e,t,n){return n.indexOf(e)===t})).join("\n")}function Te(e,t,n,r){this._e=be(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=Se(e,t)}function Re(e,t){this._e=be(),this.name="BulkError",this.failures=t,this.message=Se(e,t)}G(Ce).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+_e(this._e,2))}},toString:function(){return this.name+": "+this.message}}),G(Te).from(Ce),G(Re).from(Ce);var ke=we.reduce((function(e,t){return e[t]=t+"Error",e}),{}),Oe=Ce,Ne=we.reduce((function(e,t){var n=t+"Error";function r(e,r){this._e=be(),this.name=n,e?"string"==typeof e?(this.message=e+(r?"\n "+r:""),this.inner=r||null):"object"==typeof e&&(this.message=e.name+" "+e.message,this.inner=e):(this.message=Ie[t]||n,this.inner=null)}return G(r).from(Oe),e[t]=r,e}),{});Ne.Syntax=SyntaxError,Ne.Type=TypeError,Ne.Range=RangeError;var xe=Ee.reduce((function(e,t){return e[t+"Error"]=Ne[t],e}),{});var De=we.reduce((function(e,t){return-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=Ne[t]),e}),{});function Le(){}function Pe(e){return e}function Be(e,t){return null==e||e===Pe?t:function(n){return t(e(n))}}function Me(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function je(e,t){return e===Le?t:function(){var n=e.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Me(r,this.onsuccess):r),i&&(this.onerror=this.onerror?Me(i,this.onerror):i),void 0!==o?o:n}}function Ue(e,t){return e===Le?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Me(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Me(r,this.onerror):r)}}function Fe(e,t){return e===Le?t:function(n){var r=e.apply(this,arguments);P(n,r);var i=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?Me(i,this.onsuccess):i),o&&(this.onerror=this.onerror?Me(o,this.onerror):o),void 0===r?void 0===a?void 0:a:P(r,a)}}function Qe(e,t){return e===Le?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function Ge(e,t){return e===Le?t:function(){var n=e.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,i=arguments.length,o=new Array(i);i--;)o[i]=arguments[i];return n.then((function(){return t.apply(r,o)}))}return t.apply(this,arguments)}}De.ModifyError=Te,De.DexieError=Ce,De.BulkError=Re;var qe={},Ve="undefined"==typeof Promise?[]:function(){var e=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[e,e.__proto__,e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,t.__proto__,e]}(),Ke=Ve[0],He=Ve[1],We=Ve[2],ze=He&&He.then,Ye=Ke&&Ke.constructor,Je=!!We,Xe=!1,Ze=We?function(){We.then(_t)}:L.setImmediate?setImmediate.bind(null,_t):L.MutationObserver?function(){var e=document.createElement("div");new MutationObserver((function(){_t(),e=null})).observe(e,{attributes:!0}),e.setAttribute("i","1")}:function(){setTimeout(_t,0)},$e=function(e,t){ct.push([e,t]),tt&&(Ze(),tt=!1)},et=!0,tt=!0,nt=[],rt=[],it=null,ot=Pe,at={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Ht,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach((function(e){try{Ht(e[0],e[1])}catch(e){}}))}},st=at,ct=[],ut=0,lt=[];function ht(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=Le,this._lib=!1;var t=this._PSD=st;if(Ae&&(this._stackHolder=be(),this._prev=null,this._numPrev=0),"function"!=typeof e){if(e!==qe)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&gt(this,this._value))}this._state=null,this._value=null,++t.ref,pt(this,e)}var dt={get:function(){var e=st,t=Nt;function n(n,r){var i=this,o=!e.global&&(e!==st||t!==Nt),a=o&&!Pt(),s=new ht((function(t,s){vt(i,new ft(qt(n,e,o,a),qt(r,e,o,a),t,s,e))}));return Ae&&bt(s,this),s}return n.prototype=qe,n},set:function(e){Q(this,"then",e&&e.prototype===qe?dt:{get:function(){return e},set:dt.set})}};function ft(e,t,n,r,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r,this.psd=i}function pt(e,t){try{t((function(t){if(null===e._state){if(t===e)throw new TypeError("A promise cannot be resolved with itself.");var n=e._lib&&Et();t&&"function"==typeof t.then?pt(e,(function(e,n){t instanceof ht?t._then(e,n):t.then(e,n)})):(e._state=!0,e._value=t,At(e)),n&&wt()}}),gt.bind(null,e))}catch(t){gt(e,t)}}function gt(e,t){if(rt.push(t),null===e._state){var n=e._lib&&Et();t=ot(t),e._state=!1,e._value=t,Ae&&null!==t&&"object"==typeof t&&!t._promise&&function(e,t,n){try{e.apply(null,n)}catch(e){t&&t(e)}}((function(){var n=V(t,"stack");t._promise=e,Q(t,"stack",{get:function(){return Xe?n&&(n.get?n.get.apply(t):n.value):e.stack}})})),function(e){nt.some((function(t){return t._value===e._value}))||nt.push(e)}(e),At(e),n&&wt()}}function At(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)vt(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),0===ut&&(++ut,$e((function(){0==--ut&&It()}),[]))}function vt(e,t){if(null!==e._state){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++ut,$e(mt,[n,e,t])}else e._listeners.push(t)}function mt(e,t,n){try{it=t;var r,i=t._value;t._state?r=e(i):(rt.length&&(rt=[]),r=e(i),-1===rt.indexOf(i)&&function(e){var t=nt.length;for(;t;)if(nt[--t]._value===e._value)return void nt.splice(t,1)}(t)),n.resolve(r)}catch(e){n.reject(e)}finally{it=null,0==--ut&&It(),--n.psd.ref||n.psd.finalize()}}function yt(e,t,n){if(t.length===n)return t;var r="";if(!1===e._state){var i,o,a=e._value;null!=a?(i=a.name||"Error",o=a.message||a,r=_e(a,0)):(i=a,o=""),t.push(i+(o?": "+o:"")+r)}return Ae&&((r=_e(e._stackHolder,2))&&-1===t.indexOf(r)&&t.push(r),e._prev&&yt(e._prev,t,n)),t}function bt(e,t){var n=t?t._numPrev+1:0;n<100&&(e._prev=t,e._numPrev=n)}function _t(){Et()&&wt()}function Et(){var e=et;return et=!1,tt=!1,e}function wt(){var e,t,n;do{for(;ct.length>0;)for(e=ct,ct=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}}while(ct.length>0);et=!0,tt=!0}function It(){var e=nt;nt=[],e.forEach((function(e){e._PSD.onunhandled.call(null,e._value,e)}));for(var t=lt.slice(0),n=t.length;n;)t[--n]()}function Ct(e){return new ht(qe,!1,e)}function St(e,t){var n=st;return function(){var r=Et(),i=st;try{return Ut(n,!0),e.apply(this,arguments)}catch(e){t&&t(e)}finally{Ut(i,!1),r&&wt()}}}U(ht.prototype,{then:dt,_then:function(e,t){vt(this,new ft(null,null,e,t,st))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=arguments[0],n=arguments[1];return"function"==typeof t?this.then(null,(function(e){return e instanceof t?n(e):Ct(e)})):this.then(null,(function(e){return e&&e.name===t?n(e):Ct(e)}))},finally:function(e){return this.then((function(t){return e(),t}),(function(t){return e(),Ct(t)}))},stack:{get:function(){if(this._stack)return this._stack;try{Xe=!0;var e=yt(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=e),e}finally{Xe=!1}}},timeout:function(e,t){var n=this;return e<1/0?new ht((function(r,i){var o=setTimeout((function(){return i(new Ne.Timeout(t))}),e);n.then(r,i).finally(clearTimeout.bind(null,o))})):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&Q(ht.prototype,Symbol.toStringTag,"Dexie.Promise"),at.env=Ft(),U(ht,{all:function(){var e=pe.apply(null,arguments).map(Bt);return new ht((function(t,n){0===e.length&&t([]);var r=e.length;e.forEach((function(i,o){return ht.resolve(i).then((function(n){e[o]=n,--r||t(e)}),n)}))}))},resolve:function(e){if(e instanceof ht)return e;if(e&&"function"==typeof e.then)return new ht((function(t,n){e.then(t,n)}));var t=new ht(qe,!0,e);return bt(t,it),t},reject:Ct,race:function(){var e=pe.apply(null,arguments).map(Bt);return new ht((function(t,n){e.map((function(e){return ht.resolve(e).then(t,n)}))}))},PSD:{get:function(){return st},set:function(e){return st=e}},totalEchoes:{get:function(){return Nt}},newPSD:Dt,usePSD:Qt,scheduler:{get:function(){return $e},set:function(e){$e=e}},rejectionMapper:{get:function(){return ot},set:function(e){ot=e}},follow:function(e,t){return new ht((function(n,r){return Dt((function(t,n){var r=st;r.unhandleds=[],r.onunhandled=n,r.finalize=Me((function(){var e=this;!function(e){function t(){e(),lt.splice(lt.indexOf(t),1)}lt.push(t),++ut,$e((function(){0==--ut&&It()}),[])}((function(){0===e.unhandleds.length?t():n(e.unhandleds[0])}))}),r.finalize),e()}),t,n,r)}))}}),Ye&&(Ye.allSettled&&Q(ht,"allSettled",(function(){var e=pe.apply(null,arguments).map(Bt);return new ht((function(t){0===e.length&&t([]);var n=e.length,r=new Array(n);e.forEach((function(e,i){return ht.resolve(e).then((function(e){return r[i]={status:"fulfilled",value:e}}),(function(e){return r[i]={status:"rejected",reason:e}})).then((function(){return--n||t(r)}))}))}))})),Ye.any&&"undefined"!=typeof AggregateError&&Q(ht,"any",(function(){var e=pe.apply(null,arguments).map(Bt);return new ht((function(t,n){0===e.length&&n(new AggregateError([]));var r=e.length,i=new Array(r);e.forEach((function(e,o){return ht.resolve(e).then((function(e){return t(e)}),(function(e){i[o]=e,--r||n(new AggregateError(i))}))}))}))})));var Tt={awaits:0,echoes:0,id:0},Rt=0,kt=[],Ot=0,Nt=0,xt=0;function Dt(e,t,n,r){var i=st,o=Object.create(i);o.parent=i,o.ref=0,o.global=!1,o.id=++xt;var a=at.env;o.env=Je?{Promise:ht,PromiseProp:{value:ht,configurable:!0,writable:!0},all:ht.all,race:ht.race,allSettled:ht.allSettled,any:ht.any,resolve:ht.resolve,reject:ht.reject,nthen:Vt(a.nthen,o),gthen:Vt(a.gthen,o)}:{},t&&P(o,t),++i.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()};var s=Qt(o,e,n,r);return 0===o.ref&&o.finalize(),s}function Lt(){return Tt.id||(Tt.id=++Rt),++Tt.awaits,Tt.echoes+=100,Tt.id}function Pt(){return!!Tt.awaits&&(0==--Tt.awaits&&(Tt.id=0),Tt.echoes=100*Tt.awaits,!0)}function Bt(e){return Tt.echoes&&e&&e.constructor===Ye?(Lt(),e.then((function(e){return Pt(),e}),(function(e){return Pt(),Wt(e)}))):e}function Mt(e){++Nt,Tt.echoes&&0!=--Tt.echoes||(Tt.echoes=Tt.id=0),kt.push(st),Ut(e,!0)}function jt(){var e=kt[kt.length-1];kt.pop(),Ut(e,!1)}function Ut(e,t){var n=st;if((t?!Tt.echoes||Ot++&&e===st:!Ot||--Ot&&e===st)||Gt(t?Mt.bind(null,e):jt),e!==st&&(st=e,n===at&&(at.env=Ft()),Je)){var r=at.env.Promise,i=e.env;He.then=i.nthen,r.prototype.then=i.gthen,(n.global||e.global)&&(Object.defineProperty(L,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function Ft(){var e=L.Promise;return Je?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(L,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:He.then,gthen:e.prototype.then}:{}}function Qt(e,t,n,r,i){var o=st;try{return Ut(e,!0),t(n,r,i)}finally{Ut(o,!1)}}function Gt(e){ze.call(Ke,e)}function qt(e,t,n,r){return"function"!=typeof e?e:function(){var i=st;n&&Lt(),Ut(t,!0);try{return e.apply(this,arguments)}finally{Ut(i,!1),r&&Gt(Pt)}}}function Vt(e,t){return function(n,r){return e.call(this,qt(n,t),qt(r,t))}}-1===(""+ze).indexOf("[native code]")&&(Lt=Pt=Le);var Kt="unhandledrejection";function Ht(e,t){var n;try{n=t.onuncatched(e)}catch(e){}if(!1!==n)try{var r,i={promise:t,reason:e};if(L.document&&document.createEvent?((r=document.createEvent("Event")).initEvent(Kt,!0,!0),P(r,i)):L.CustomEvent&&P(r=new CustomEvent(Kt,{detail:i}),i),r&&L.dispatchEvent&&(dispatchEvent(r),!L.PromiseRejectionEvent&&L.onunhandledrejection))try{L.onunhandledrejection(r)}catch(e){}Ae&&r&&!r.defaultPrevented&&console.warn("Unhandled rejection: "+(e.stack||e))}catch(e){}}var Wt=ht.reject;function zt(e,t,n,r){if(e._state.openComplete||st.letThrough){var i=e._createTransaction(t,n,e._dbSchema);try{i.create()}catch(e){return Wt(e)}return i._promise(t,(function(e,t){return Dt((function(){return st.trans=i,r(e,t,i)}))})).then((function(e){return i._completion.then((function(){return e}))}))}if(!e._state.isBeingOpened){if(!e._options.autoOpen)return Wt(new Ne.DatabaseClosed);e.open().catch(Le)}return e._state.dbReadyPromise.then((function(){return zt(e,t,n,r)}))}var Yt="3.0.3",Jt=String.fromCharCode(65535),Xt=-1/0,Zt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",$t="String expected.",en=[],tn="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),nn=tn,rn=tn,on=function(e){return!/(dexie\.js|dexie\.min\.js)/.test(e)},an="__dbnames",sn="readonly",cn="readwrite";function un(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var ln={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function hn(e){return function(t){return void 0===X(t,e)&&$(t=ae(t),e),t}}var dn=function(){function e(){}return e.prototype._trans=function(e,t,n){var r=this._tx||st.trans,i=this.name;function o(e,n,r){if(!r.schema[i])throw new Ne.NotFound("Table "+i+" not part of transaction");return t(r.idbtrans,r)}var a=Et();try{return r&&r.db===this.db?r===st.trans?r._promise(e,o,n):Dt((function(){return r._promise(e,o,n)}),{trans:r,transless:st.transless||st}):zt(this.db,e,[this.name],o)}finally{a&&wt()}},e.prototype.get=function(e,t){var n=this;return e&&e.constructor===Object?this.where(e).first(t):this._trans("readonly",(function(t){return n.core.get({trans:t,key:e}).then((function(e){return n.hook.reading.fire(e)}))})).then(t)},e.prototype.where=function(e){if("string"==typeof e)return new this.db.WhereClause(this,e);if(D(e))return new this.db.WhereClause(this,"["+e.join("+")+"]");var t=x(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter((function(e){return e.compound&&t.every((function(t){return e.keyPath.indexOf(t)>=0}))&&e.keyPath.every((function(e){return t.indexOf(e)>=0}))}))[0];if(n&&this.db._maxKey!==Jt)return this.where(n.name).equals(n.keyPath.map((function(t){return e[t]})));!n&&Ae&&console.warn("The query "+JSON.stringify(e)+" on "+this.name+" would benefit of a compound index ["+t.join("+")+"]");var r=this.schema.idxByName,i=this.db._deps.indexedDB;function o(e,t){try{return 0===i.cmp(e,t)}catch(e){return!1}}var a=t.reduce((function(t,n){var i=t[0],a=t[1],s=r[n],c=e[n];return[i||s,i||!s?un(a,s&&s.multi?function(e){var t=X(e,n);return D(t)&&t.some((function(e){return o(c,e)}))}:function(e){return o(c,X(e,n))}):a]}),[null,null]),s=a[0],c=a[1];return s?this.where(s.name).equals(e[s.keyPath]).filter(c):n?this.filter(c):this.where(t).equals("")},e.prototype.filter=function(e){return this.toCollection().and(e)},e.prototype.count=function(e){return this.toCollection().count(e)},e.prototype.offset=function(e){return this.toCollection().offset(e)},e.prototype.limit=function(e){return this.toCollection().limit(e)},e.prototype.each=function(e){return this.toCollection().each(e)},e.prototype.toArray=function(e){return this.toCollection().toArray(e)},e.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},e.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,D(e)?"["+e.join("+")+"]":e))},e.prototype.reverse=function(){return this.toCollection().reverse()},e.prototype.mapToClass=function(e){this.schema.mappedClass=e;var t=function(t){if(!t)return t;var n=Object.create(e.prototype);for(var r in t)if(j(t,r))try{n[r]=t[r]}catch(e){}return n};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=t,this.hook("reading",t),e},e.prototype.defineClass=function(){return this.mapToClass((function(e){P(this,e)}))},e.prototype.add=function(e,t){var n=this,r=this.schema.primKey,i=r.auto,o=r.keyPath,a=e;return o&&i&&(a=hn(o)(e)),this._trans("readwrite",(function(e){return n.core.mutate({trans:e,type:"add",keys:null!=t?[t]:null,values:[a]})})).then((function(e){return e.numFailures?ht.reject(e.failures[0]):e.lastResult})).then((function(t){if(o)try{Z(e,o,t)}catch(e){}return t}))},e.prototype.update=function(e,t){if("object"!=typeof t||D(t))throw new Ne.InvalidArgument("Modifications must be an object.");if("object"!=typeof e||D(e))return this.where(":id").equals(e).modify(t);x(t).forEach((function(n){Z(e,n,t[n])}));var n=X(e,this.schema.primKey.keyPath);return void 0===n?Wt(new Ne.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(n).modify(t)},e.prototype.put=function(e,t){var n=this,r=this.schema.primKey,i=r.auto,o=r.keyPath,a=e;return o&&i&&(a=hn(o)(e)),this._trans("readwrite",(function(e){return n.core.mutate({trans:e,type:"put",values:[a],keys:null!=t?[t]:null})})).then((function(e){return e.numFailures?ht.reject(e.failures[0]):e.lastResult})).then((function(t){if(o)try{Z(e,o,t)}catch(e){}return t}))},e.prototype.delete=function(e){var t=this;return this._trans("readwrite",(function(n){return t.core.mutate({trans:n,type:"delete",keys:[e]})})).then((function(e){return e.numFailures?ht.reject(e.failures[0]):void 0}))},e.prototype.clear=function(){var e=this;return this._trans("readwrite",(function(t){return e.core.mutate({trans:t,type:"deleteRange",range:ln})})).then((function(e){return e.numFailures?ht.reject(e.failures[0]):void 0}))},e.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",(function(n){return t.core.getMany({keys:e,trans:n}).then((function(e){return e.map((function(e){return t.hook.reading.fire(e)}))}))}))},e.prototype.bulkAdd=function(e,t,n){var r=this,i=Array.isArray(t)?t:void 0,o=(n=n||(i?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",(function(t){var n=r.schema.primKey,a=n.auto,s=n.keyPath;if(s&&i)throw new Ne.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new Ne.InvalidArgument("Arguments objects and keys must have the same length");var c=e.length,u=s&&a?e.map(hn(s)):e;return r.core.mutate({trans:t,type:"add",keys:i,values:u,wantResults:o}).then((function(e){var t=e.numFailures,n=e.results,i=e.lastResult,a=e.failures;if(0===t)return o?n:i;throw new Re(r.name+".bulkAdd(): "+t+" of "+c+" operations failed",Object.keys(a).map((function(e){return a[e]})))}))}))},e.prototype.bulkPut=function(e,t,n){var r=this,i=Array.isArray(t)?t:void 0,o=(n=n||(i?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",(function(t){var n=r.schema.primKey,a=n.auto,s=n.keyPath;if(s&&i)throw new Ne.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new Ne.InvalidArgument("Arguments objects and keys must have the same length");var c=e.length,u=s&&a?e.map(hn(s)):e;return r.core.mutate({trans:t,type:"put",keys:i,values:u,wantResults:o}).then((function(e){var t=e.numFailures,n=e.results,i=e.lastResult,a=e.failures;if(0===t)return o?n:i;throw new Re(r.name+".bulkPut(): "+t+" of "+c+" operations failed",Object.keys(a).map((function(e){return a[e]})))}))}))},e.prototype.bulkDelete=function(e){var t=this,n=e.length;return this._trans("readwrite",(function(n){return t.core.mutate({trans:n,type:"delete",keys:e})})).then((function(e){var r=e.numFailures,i=e.lastResult,o=e.failures;if(0===r)return i;throw new Re(t.name+".bulkDelete(): "+r+" of "+n+" operations failed",o)}))},e}();function fn(e){var t={},n=function(n,r){if(r){for(var i=arguments.length,o=new Array(i-1);--i;)o[i-1]=arguments[i];return t[n].subscribe.apply(null,o),e}if("string"==typeof n)return t[n]};n.addEventType=o;for(var r=1,i=arguments.length;r<i;++r)o(arguments[r]);return n;function o(e,r,i){if("object"==typeof e)return a(e);r||(r=Qe),i||(i=Le);var o={subscribers:[],fire:i,subscribe:function(e){-1===o.subscribers.indexOf(e)&&(o.subscribers.push(e),o.fire=r(o.fire,e))},unsubscribe:function(e){o.subscribers=o.subscribers.filter((function(t){return t!==e})),o.fire=o.subscribers.reduce(r,i)}};return t[e]=n[e]=o,o}function a(e){x(e).forEach((function(t){var n=e[t];if(D(n))o(t,e[t][0],e[t][1]);else{if("asap"!==n)throw new Ne.InvalidArgument("Invalid event config");var r=o(t,Pe,(function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];r.subscribers.forEach((function(e){Y((function(){e.apply(null,t)}))}))}))}}))}}function pn(e,t){return G(t).from({prototype:e}),t}function gn(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function An(e,t){e.filter=un(e.filter,t)}function vn(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return un(r(),t())}:t,e.justLimit=n&&!r}function mn(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new Ne.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function yn(e,t,n){var r=mn(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:"prev"===e.dir,unique:!!e.unique,query:{index:r,range:e.range}})}function bn(e,t,n,r){var i=e.replayFilter?un(e.filter,e.replayFilter()):e.filter;if(e.or){var o={},a=function(e,n,r){if(!i||i(n,r,(function(e){return n.stop(e)}),(function(e){return n.fail(e)}))){var a=n.primaryKey,s=""+a;"[object ArrayBuffer]"===s&&(s=""+new Uint8Array(a)),j(o,s)||(o[s]=!0,t(e,n,r))}};return Promise.all([e.or._iterate(a,n),_n(yn(e,r,n),e.algorithm,a,!e.keysOnly&&e.valueMapper)])}return _n(yn(e,r,n),un(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function _n(e,t,n,r){var i=St(r?function(e,t,i){return n(r(e),t,i)}:n);return e.then((function(e){if(e)return e.start((function(){var n=function(){return e.continue()};t&&!t(e,(function(e){return n=e}),(function(t){e.stop(t),n=Le}),(function(t){e.fail(t),n=Le}))||i(e.value,e,(function(e){return n=e})),n()}))}))}var En=function(){function e(){}return e.prototype._read=function(e,t){var n=this._ctx;return n.error?n.table._trans(null,Wt.bind(null,n.error)):n.table._trans("readonly",e).then(t)},e.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,Wt.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},e.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=un(t.algorithm,e)},e.prototype._iterate=function(e,t){return bn(this._ctx,e,t,this._ctx.table.core)},e.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&P(n,e),t._ctx=n,t},e.prototype.raw=function(){return this._ctx.valueMapper=null,this},e.prototype.each=function(e){var t=this._ctx;return this._read((function(n){return bn(t,e,n,t.table.core)}))},e.prototype.count=function(e){var t=this;return this._read((function(e){var n=t._ctx,r=n.table.core;if(gn(n,!0))return r.count({trans:e,query:{index:mn(n,r.schema),range:n.range}}).then((function(e){return Math.min(e,n.limit)}));var i=0;return bn(n,(function(){return++i,!1}),e,r).then((function(){return i}))})).then(e)},e.prototype.sortBy=function(e,t){var n=e.split(".").reverse(),r=n[0],i=n.length-1;function o(e,t){return t?o(e[n[t]],t-1):e[r]}var a="next"===this._ctx.dir?1:-1;function s(e,t){var n=o(e,i),r=o(t,i);return n<r?-a:n>r?a:0}return this.toArray((function(e){return e.sort(s)})).then(t)},e.prototype.toArray=function(e){var t=this;return this._read((function(e){var n=t._ctx;if("next"===n.dir&&gn(n,!0)&&n.limit>0){var r=n.valueMapper,i=mn(n,n.table.core.schema);return n.table.core.query({trans:e,limit:n.limit,values:!0,query:{index:i,range:n.range}}).then((function(e){var t=e.result;return r?t.map(r):t}))}var o=[];return bn(n,(function(e){return o.push(e)}),e,n.table.core).then((function(){return o}))}),e)},e.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,gn(t)?vn(t,(function(){var t=e;return function(e,n){return 0===t||(1===t?(--t,!1):(n((function(){e.advance(t),t=0})),!1))}})):vn(t,(function(){var t=e;return function(){return--t<0}}))),this},e.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),vn(this._ctx,(function(){var t=e;return function(e,n,r){return--t<=0&&n(r),t>=0}}),!0),this},e.prototype.until=function(e,t){return An(this._ctx,(function(n,r,i){return!e(n.value)||(r(i),t)})),this},e.prototype.first=function(e){return this.limit(1).toArray((function(e){return e[0]})).then(e)},e.prototype.last=function(e){return this.reverse().first(e)},e.prototype.filter=function(e){var t,n;return An(this._ctx,(function(t){return e(t.value)})),t=this._ctx,n=e,t.isMatch=un(t.isMatch,n),this},e.prototype.and=function(e){return this.filter(e)},e.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},e.prototype.reverse=function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},e.prototype.desc=function(){return this.reverse()},e.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.key,n)}))},e.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},e.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.primaryKey,n)}))},e.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.key)})).then((function(){return n})).then(e)},e.prototype.primaryKeys=function(e){var t=this._ctx;if("next"===t.dir&&gn(t,!0)&&t.limit>0)return this._read((function(e){var n=mn(t,t.table.core.schema);return t.table.core.query({trans:e,values:!1,limit:t.limit,query:{index:n,range:t.range}})})).then((function(e){return e.result})).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.primaryKey)})).then((function(){return n})).then(e)},e.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},e.prototype.firstKey=function(e){return this.limit(1).keys((function(e){return e[0]})).then(e)},e.prototype.lastKey=function(e){return this.reverse().firstKey(e)},e.prototype.distinct=function(){var e=this._ctx,t=e.index&&e.table.schema.idxByName[e.index];if(!t||!t.multi)return this;var n={};return An(this._ctx,(function(e){var t=e.primaryKey.toString(),r=j(n,t);return n[t]=!0,!r})),this},e.prototype.modify=function(e){var t=this,n=this._ctx;return this._write((function(r){var i;if("function"==typeof e)i=e;else{var o=x(e),a=o.length;i=function(t){for(var n=!1,r=0;r<a;++r){var i=o[r],s=e[i];X(t,i)!==s&&(Z(t,i,s),n=!0)}return n}}var s=n.table.core,c=s.schema.primaryKey,u=c.outbound,l=c.extractKey,h="testmode"in fr?1:2e3,d=t.db.core.cmp,f=[],p=0,g=[],A=function(e,t){var n=t.failures,r=t.numFailures;p+=e-r;for(var i=0,o=x(n);i<o.length;i++){var a=o[i];f.push(n[a])}};return t.clone().primaryKeys().then((function(e){var t=function(n){var o=Math.min(h,e.length-n);return s.getMany({trans:r,keys:e.slice(n,n+o)}).then((function(a){for(var c=[],f=[],p=u?[]:null,g=[],v=0;v<o;++v){var m=a[v],y={value:ae(m),primKey:e[n+v]};!1!==i.call(y,y.value,y)&&(null==y.value?g.push(e[n+v]):u||0===d(l(m),l(y.value))?(f.push(y.value),u&&p.push(e[n+v])):(g.push(e[n+v]),c.push(y.value)))}return Promise.resolve(c.length>0&&s.mutate({trans:r,type:"add",values:c}).then((function(e){for(var t in e.failures)g.splice(parseInt(t),1);A(c.length,e)}))).then((function(e){return f.length>0&&s.mutate({trans:r,type:"put",keys:p,values:f}).then((function(e){return A(f.length,e)}))})).then((function(){return g.length>0&&s.mutate({trans:r,type:"delete",keys:g}).then((function(e){return A(g.length,e)}))})).then((function(){return e.length>n+o&&t(n+h)}))}))};return t(0).then((function(){if(f.length>0)throw new Te("Error modifying one or more objects",f,p,g);return e.length}))}))}))},e.prototype.delete=function(){var e=this._ctx,t=e.range;return gn(e)&&(e.isPrimKey&&!rn||3===t.type)?this._write((function(n){var r=e.table.core.schema.primaryKey,i=t;return e.table.core.count({trans:n,query:{index:r,range:i}}).then((function(t){return e.table.core.mutate({trans:n,type:"deleteRange",range:i}).then((function(e){var n=e.failures,r=(e.lastResult,e.results,e.numFailures);if(r)throw new Te("Could not delete some values",Object.keys(n).map((function(e){return n[e]})),t-r);return t-r}))}))})):this.modify((function(e,t){return t.value=null}))},e}();function wn(e,t){return e<t?-1:e===t?0:1}function In(e,t){return e>t?-1:e===t?0:1}function Cn(e,t,n){var r=e instanceof Nn?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function Sn(e){return new e.Collection(e,(function(){return On("")})).limit(0)}function Tn(e,t,n,r,i,o){for(var a=Math.min(e.length,r.length),s=-1,c=0;c<a;++c){var u=t[c];if(u!==r[c])return i(e[c],n[c])<0?e.substr(0,c)+n[c]+n.substr(c+1):i(e[c],r[c])<0?e.substr(0,c)+r[c]+n.substr(c+1):s>=0?e.substr(0,s)+t[s]+n.substr(s+1):null;i(e[c],u)<0&&(s=c)}return a<r.length&&"next"===o?e+n.substr(e.length):a<e.length&&"prev"===o?e.substr(0,n.length):s<0?null:e.substr(0,s)+r[s]+n.substr(s+1)}function Rn(e,t,n,r){var i,o,a,s,c,u,l,h=n.length;if(!n.every((function(e){return"string"==typeof e})))return Cn(e,$t);function d(e){i=function(e){return"next"===e?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()}}(e),o=function(e){return"next"===e?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()}}(e),a="next"===e?wn:In;var t=n.map((function(e){return{lower:o(e),upper:i(e)}})).sort((function(e,t){return a(e.lower,t.lower)}));s=t.map((function(e){return e.upper})),c=t.map((function(e){return e.lower})),u=e,l="next"===e?"":r}d("next");var f=new e.Collection(e,(function(){return kn(s[0],c[h-1]+r)}));f._ondirectionchange=function(e){d(e)};var p=0;return f._addAlgorithm((function(e,n,r){var i=e.key;if("string"!=typeof i)return!1;var d=o(i);if(t(d,c,p))return!0;for(var f=null,g=p;g<h;++g){var A=Tn(i,d,s[g],c[g],a,u);null===A&&null===f?p=g+1:(null===f||a(f,A)>0)&&(f=A)}return n(null!==f?function(){e.continue(f+l)}:r),!1})),f}function kn(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function On(e){return{type:1,lower:e,upper:e}}var Nn=function(){function e(){}return Object.defineProperty(e.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!0,configurable:!0}),e.prototype.between=function(e,t,n,r){n=!1!==n,r=!0===r;try{return this._cmp(e,t)>0||0===this._cmp(e,t)&&(n||r)&&(!n||!r)?Sn(this):new this.Collection(this,(function(){return kn(e,t,!n,!r)}))}catch(e){return Cn(this,Zt)}},e.prototype.equals=function(e){return null==e?Cn(this,Zt):new this.Collection(this,(function(){return On(e)}))},e.prototype.above=function(e){return null==e?Cn(this,Zt):new this.Collection(this,(function(){return kn(e,void 0,!0)}))},e.prototype.aboveOrEqual=function(e){return null==e?Cn(this,Zt):new this.Collection(this,(function(){return kn(e,void 0,!1)}))},e.prototype.below=function(e){return null==e?Cn(this,Zt):new this.Collection(this,(function(){return kn(void 0,e,!1,!0)}))},e.prototype.belowOrEqual=function(e){return null==e?Cn(this,Zt):new this.Collection(this,(function(){return kn(void 0,e)}))},e.prototype.startsWith=function(e){return"string"!=typeof e?Cn(this,$t):this.between(e,e+Jt,!0,!0)},e.prototype.startsWithIgnoreCase=function(e){return""===e?this.startsWith(e):Rn(this,(function(e,t){return 0===e.indexOf(t[0])}),[e],Jt)},e.prototype.equalsIgnoreCase=function(e){return Rn(this,(function(e,t){return e===t[0]}),[e],"")},e.prototype.anyOfIgnoreCase=function(){var e=pe.apply(fe,arguments);return 0===e.length?Sn(this):Rn(this,(function(e,t){return-1!==t.indexOf(e)}),e,"")},e.prototype.startsWithAnyOfIgnoreCase=function(){var e=pe.apply(fe,arguments);return 0===e.length?Sn(this):Rn(this,(function(e,t){return t.some((function(t){return 0===e.indexOf(t)}))}),e,Jt)},e.prototype.anyOf=function(){var e=this,t=pe.apply(fe,arguments),n=this._cmp;try{t.sort(n)}catch(e){return Cn(this,Zt)}if(0===t.length)return Sn(this);var r=new this.Collection(this,(function(){return kn(t[0],t[t.length-1])}));r._ondirectionchange=function(r){n="next"===r?e._ascending:e._descending,t.sort(n)};var i=0;return r._addAlgorithm((function(e,r,o){for(var a=e.key;n(a,t[i])>0;)if(++i===t.length)return r(o),!1;return 0===n(a,t[i])||(r((function(){e.continue(t[i])})),!1)})),r},e.prototype.notEqual=function(e){return this.inAnyRange([[Xt,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},e.prototype.noneOf=function(){var e=pe.apply(fe,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(e){return Cn(this,Zt)}var t=e.reduce((function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[Xt,t]]}),null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},e.prototype.inAnyRange=function(e,t){var n=this,r=this._cmp,i=this._ascending,o=this._descending,a=this._min,s=this._max;if(0===e.length)return Sn(this);if(!e.every((function(e){return void 0!==e[0]&&void 0!==e[1]&&i(e[0],e[1])<=0})))return Cn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Ne.InvalidArgument);var c=!t||!1!==t.includeLowers,u=t&&!0===t.includeUppers;var l,h=i;function d(e,t){return h(e[0],t[0])}try{l=e.reduce((function(e,t){for(var n=0,i=e.length;n<i;++n){var o=e[n];if(r(t[0],o[1])<0&&r(t[1],o[0])>0){o[0]=a(o[0],t[0]),o[1]=s(o[1],t[1]);break}}return n===i&&e.push(t),e}),[]),l.sort(d)}catch(e){return Cn(this,Zt)}var f=0,p=u?function(e){return i(e,l[f][1])>0}:function(e){return i(e,l[f][1])>=0},g=c?function(e){return o(e,l[f][0])>0}:function(e){return o(e,l[f][0])>=0};var A=p,v=new this.Collection(this,(function(){return kn(l[0][0],l[l.length-1][1],!c,!u)}));return v._ondirectionchange=function(e){"next"===e?(A=p,h=i):(A=g,h=o),l.sort(d)},v._addAlgorithm((function(e,t,r){for(var o=e.key;A(o);)if(++f===l.length)return t(r),!1;return!!function(e){return!p(e)&&!g(e)}(o)||(0===n._cmp(o,l[f][1])||0===n._cmp(o,l[f][0])||t((function(){h===i?e.continue(l[f][0]):e.continue(l[f][1])})),!1)})),v},e.prototype.startsWithAnyOf=function(){var e=pe.apply(fe,arguments);return e.every((function(e){return"string"==typeof e}))?0===e.length?Sn(this):this.inAnyRange(e.map((function(e){return[e,e+Jt]}))):Cn(this,"startsWithAnyOf() only works with strings")},e}();function xn(e){return 1===e.length?e[0]:e}function Dn(e){try{return e.only([[]]),[[]]}catch(e){return Jt}}function Ln(e){return St((function(t){return Pn(t),e(t.target.error),!1}))}function Pn(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var Bn=function(){function e(){}return e.prototype._lock=function(){return z(!st.global),++this._reculock,1!==this._reculock||st.global||(st.lockOwnerFor=this),this},e.prototype._unlock=function(){if(z(!st.global),0==--this._reculock)for(st.global||(st.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{Qt(e[1],e[0])}catch(e){}}return this},e.prototype._locked=function(){return this._reculock&&st.lockOwnerFor!==this},e.prototype.create=function(e){var t=this;if(!this.mode)return this;var n=this.db.idbdb,r=this.db._state.dbOpenError;if(z(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new Ne.DatabaseClosed(r);case"MissingAPIError":throw new Ne.MissingAPI(r.message,r);default:throw new Ne.OpenFailed(r)}if(!this.active)throw new Ne.TransactionInactive;return z(null===this._completion._state),(e=this.idbtrans=e||n.transaction(xn(this.storeNames),this.mode)).onerror=St((function(n){Pn(n),t._reject(e.error)})),e.onabort=St((function(n){Pn(n),t.active&&t._reject(new Ne.Abort(e.error)),t.active=!1,t.on("abort").fire(n)})),e.oncomplete=St((function(){t.active=!1,t._resolve()})),this},e.prototype._promise=function(e,t,n){var r=this;if("readwrite"===e&&"readwrite"!==this.mode)return Wt(new Ne.ReadOnly("Transaction is readonly"));if(!this.active)return Wt(new Ne.TransactionInactive);if(this._locked())return new ht((function(i,o){r._blockedFuncs.push([function(){r._promise(e,t,n).then(i,o)},st])}));if(n)return Dt((function(){var e=new ht((function(e,n){r._lock();var i=t(e,n,r);i&&i.then&&i.then(e,n)}));return e.finally((function(){return r._unlock()})),e._lib=!0,e}));var i=new ht((function(e,n){var i=t(e,n,r);i&&i.then&&i.then(e,n)}));return i._lib=!0,i},e.prototype._root=function(){return this.parent?this.parent._root():this},e.prototype.waitFor=function(e){var t=this._root(),n=ht.resolve(e);if(t._waitingFor)t._waitingFor=t._waitingFor.then((function(){return n}));else{t._waitingFor=n,t._waitingQueue=[];var r=t.idbtrans.objectStore(t.storeNames[0]);!function e(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(r.get(-1/0).onsuccess=e)}()}var i=t._waitingFor;return new ht((function(e,r){n.then((function(n){return t._waitingQueue.push(St(e.bind(null,n)))}),(function(e){return t._waitingQueue.push(St(r.bind(null,e)))})).finally((function(){t._waitingFor===i&&(t._waitingFor=null)}))}))},e.prototype.abort=function(){this.active&&this._reject(new Ne.Abort),this.active=!1},e.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(j(t,e))return t[e];var n=this.schema[e];if(!n)throw new Ne.NotFound("Table "+e+" not part of transaction");var r=new this.db.Table(e,n,this);return r.core=this.db.core.table(e),t[e]=r,r},e}();function Mn(e,t,n,r,i,o,a){return{name:e,keyPath:t,unique:n,multi:r,auto:i,compound:o,src:(n&&!a?"&":"")+(r?"*":"")+(i?"++":"")+jn(t)}}function jn(e){return"string"==typeof e?e:e?"["+[].join.call(e,"+")+"]":""}function Un(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:J(n,(function(e){return[e.name,e]}))}}function Fn(e){return null==e?function(){}:"string"==typeof e?function(e){return 1===e.split(".").length?function(t){return t[e]}:function(t){return X(t,e)}}(e):function(t){return X(t,e)}}function Qn(e,t){return"delete"===t.type?t.keys:t.keys||t.values.map(e.extractKey)}function Gn(e){return[].slice.call(e)}var qn=0;function Vn(e){return null==e?":id":"string"==typeof e?e:"["+e.join("+")+"]"}function Kn(e,t,n,r){var i=t.cmp.bind(t);function o(e){if(3===e.type)return null;if(4===e.type)throw new Error("Cannot convert never type to IDBKeyRange");var t=e.lower,r=e.upper,i=e.lowerOpen,o=e.upperOpen;return void 0===t?void 0===r?null:n.upperBound(r,!!o):void 0===r?n.lowerBound(t,!!i):n.bound(t,r,!!i,!!o)}var a=function(e,t){var n=Gn(e.objectStoreNames);return{schema:{name:e.name,tables:n.map((function(e){return t.objectStore(e)})).map((function(e){var t=e.keyPath,n=e.autoIncrement,r=D(t),i=null==t,o={},a={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:i,compound:r,keyPath:t,autoIncrement:n,unique:!0,extractKey:Fn(t)},indexes:Gn(e.indexNames).map((function(t){return e.index(t)})).map((function(e){var t=e.name,n=e.unique,r=e.multiEntry,i=e.keyPath,a={name:t,compound:D(i),keyPath:i,unique:n,multiEntry:r,extractKey:Fn(i)};return o[Vn(i)]=a,a})),getIndexByKeyPath:function(e){return o[Vn(e)]}};return o[":id"]=a.primaryKey,null!=t&&(o[Vn(t)]=a.primaryKey),a}))},hasGetAll:n.length>0&&"getAll"in t.objectStore(n[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(e,r),s=a.schema,c=a.hasGetAll,u=s.tables.map((function(e){return function(e){var t=e.name;return{name:t,schema:e,mutate:function(n){var r=n.trans,i=n.type,a=n.keys,s=n.values,c=n.range,u=n.wantResults;return new Promise((function(n,l){n=St(n);var h=r.objectStore(t),d=null==h.keyPath,f="put"===i||"add"===i;if(!f&&"delete"!==i&&"deleteRange"!==i)throw new Error("Invalid operation type: "+i);var p=(a||s||{length:1}).length;if(a&&s&&a.length!==s.length)throw new Error("Given keys array must have same length as given values array.");if(0===p)return n({numFailures:0,failures:{},results:[],lastResult:void 0});var g,A=u&&N(a||Qn(e.primaryKey,{type:i,keys:a,values:s})),v=[],m=0,y=function(e){++m,Pn(e),A&&(A[e.target._reqno]=void 0),v[e.target._reqno]=e.target.error},b=function(e){var t=e.target;A[t._reqno]=t.result};if("deleteRange"===i){if(4===c.type)return n({numFailures:m,failures:v,results:A,lastResult:void 0});g=3===c.type?h.clear():h.delete(o(c))}else{var _=f?d?[s,a]:[s,null]:[a,null],E=_[0],w=_[1];if(f)for(var I=0;I<p;++I)(g=w&&void 0!==w[I]?h[i](E[I],w[I]):h[i](E[I]))._reqno=I,A&&void 0===A[I]&&(g.onsuccess=b),g.onerror=y;else for(I=0;I<p;++I)(g=h[i](E[I]))._reqno=I,g.onerror=y}var C=function(e){var t=e.target.result;A&&(A[p-1]=t),n({numFailures:m,failures:v,results:A,lastResult:t})};g.onerror=function(e){y(e),C(e)},g.onsuccess=C}))},getMany:function(e){var n=e.trans,r=e.keys;return new Promise((function(e,i){e=St(e);for(var o,a=n.objectStore(t),s=r.length,c=new Array(s),u=0,l=0,h=function(t){var n=t.target;c[n._pos]=n.result,++l===u&&e(c)},d=Ln(i),f=0;f<s;++f)null!=r[f]&&((o=a.get(r[f]))._pos=f,o.onsuccess=h,o.onerror=d,++u);0===u&&e(c)}))},get:function(e){var n=e.trans,r=e.key;return new Promise((function(e,i){e=St(e);var o=n.objectStore(t).get(r);o.onsuccess=function(t){return e(t.target.result)},o.onerror=Ln(i)}))},query:function(e){return function(n){return new Promise((function(r,i){r=St(r);var a=n.trans,s=n.values,c=n.limit,u=n.query,l=c===1/0?void 0:c,h=u.index,d=u.range,f=a.objectStore(t),p=h.isPrimaryKey?f:f.index(h.name),g=o(d);if(0===c)return r({result:[]});if(e){var A=s?p.getAll(g,l):p.getAllKeys(g,l);A.onsuccess=function(e){return r({result:e.target.result})},A.onerror=Ln(i)}else{var v=0,m=s||!("openKeyCursor"in p)?p.openCursor(g):p.openKeyCursor(g),y=[];m.onsuccess=function(e){var t=m.result;return t?(y.push(s?t.value:t.primaryKey),++v===c?r({result:y}):void t.continue()):r({result:y})},m.onerror=Ln(i)}}))}}(c),openCursor:function(e){var n=e.trans,r=e.values,i=e.query,a=e.reverse,s=e.unique;return new Promise((function(e,c){e=St(e);var u=i.index,l=i.range,h=n.objectStore(t),d=u.isPrimaryKey?h:h.index(u.name),f=a?s?"prevunique":"prev":s?"nextunique":"next",p=r||!("openKeyCursor"in d)?d.openCursor(o(l),f):d.openKeyCursor(o(l),f);p.onerror=Ln(c),p.onsuccess=St((function(t){var r=p.result;if(r){r.___id=++qn,r.done=!1;var i=r.continue.bind(r),o=r.continuePrimaryKey;o&&(o=o.bind(r));var a=r.advance.bind(r),s=function(){throw new Error("Cursor not stopped")};r.trans=n,r.stop=r.continue=r.continuePrimaryKey=r.advance=function(){throw new Error("Cursor not started")},r.fail=St(c),r.next=function(){var e=this,t=1;return this.start((function(){return t--?e.continue():e.stop()})).then((function(){return e}))},r.start=function(e){var t=new Promise((function(e,t){e=St(e),p.onerror=Ln(t),r.fail=t,r.stop=function(t){r.stop=r.continue=r.continuePrimaryKey=r.advance=s,e(t)}})),n=function(){if(p.result)try{e()}catch(e){r.fail(e)}else r.done=!0,r.start=function(){throw new Error("Cursor behind last entry")},r.stop()};return p.onsuccess=St((function(e){p.onsuccess=n,n()})),r.continue=i,r.continuePrimaryKey=o,r.advance=a,n(),t},e(r)}else e(null)}),c)}))},count:function(e){var n=e.query,r=e.trans,i=n.index,a=n.range;return new Promise((function(e,n){var s=r.objectStore(t),c=i.isPrimaryKey?s:s.index(i.name),u=o(a),l=u?c.count(u):c.count();l.onsuccess=St((function(t){return e(t.target.result)})),l.onerror=Ln(n)}))}}}(e)})),l={};return u.forEach((function(e){return l[e.name]=e})),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(e){if(!l[e])throw new Error("Table '"+e+"' not found");return l[e]},cmp:i,MIN_KEY:-1/0,MAX_KEY:Dn(n),schema:s}}function Hn(e,t,n,r){var i=n.IDBKeyRange,o=function(e,t){return t.reduce((function(e,t){var n=t.create;return O(O({},e),n(e))}),e)}(Kn(t,n.indexedDB,i,r),e.dbcore);return{dbcore:o}}function Wn(e,t){var n=t.db,r=Hn(e._middlewares,n,e._deps,t);e.core=r.dbcore,e.tables.forEach((function(t){var n=t.name;e.core.schema.tables.some((function(e){return e.name===n}))&&(t.core=e.core.table(n),e[n]instanceof e.Table&&(e[n].core=t.core))}))}function zn(e,t,n,r){n.forEach((function(n){var i=r[n];t.forEach((function(t){var r=V(t,n);(!r||"value"in r&&void 0===r.value)&&(t===e.Transaction.prototype||t instanceof e.Transaction?Q(t,n,{get:function(){return this.table(n)},set:function(e){F(this,n,{value:e,writable:!0,configurable:!0,enumerable:!0})}}):t[n]=new e.Table(n,i))}))}))}function Yn(e,t){t.forEach((function(t){for(var n in t)t[n]instanceof e.Table&&delete t[n]}))}function Jn(e,t){return e._cfg.version-t._cfg.version}function Xn(e,t,n,r){var i=e._dbSchema,o=e._createTransaction("readwrite",e._storeNames,i);o.create(n),o._completion.catch(r);var a=o._reject.bind(o),s=st.transless||st;Dt((function(){st.trans=o,st.transless=s,0===t?(x(i).forEach((function(e){$n(n,e,i[e].primKey,i[e].indexes)})),Wn(e,n),ht.follow((function(){return e.on.populate.fire(o)})).catch(a)):function(e,t,n,r){var i=[],o=e._versions,a=e._dbSchema=tr(e,e.idbdb,r),s=!1;function c(){return i.length?ht.resolve(i.shift()(n.idbtrans)).then(c):ht.resolve()}return o.filter((function(e){return e._cfg.version>=t})).forEach((function(o){i.push((function(){var i=a,c=o._cfg.dbschema;nr(e,i,r),nr(e,c,r),a=e._dbSchema=c;var u=Zn(i,c);u.add.forEach((function(e){$n(r,e[0],e[1].primKey,e[1].indexes)})),u.change.forEach((function(e){if(e.recreate)throw new Ne.Upgrade("Not yet support for changing primary key");var t=r.objectStore(e.name);e.add.forEach((function(e){return er(t,e)})),e.change.forEach((function(e){t.deleteIndex(e.name),er(t,e)})),e.del.forEach((function(e){return t.deleteIndex(e)}))}));var l=o._cfg.contentUpgrade;if(l&&o._cfg.version>t){Wn(e,r),n._memoizedTables={},s=!0;var h=ee(c);u.del.forEach((function(e){h[e]=i[e]})),Yn(e,[e.Transaction.prototype]),zn(e,[e.Transaction.prototype],x(h),h),n.schema=h;var d,f=ge(l);f&&Lt();var p=ht.follow((function(){if((d=l(n))&&f){var e=Pt.bind(null,null);d.then(e,e)}}));return d&&"function"==typeof d.then?ht.resolve(d):p.then((function(){return d}))}})),i.push((function(t){s&&nn||function(e,t){for(var n=0;n<t.db.objectStoreNames.length;++n){var r=t.db.objectStoreNames[n];null==e[r]&&t.db.deleteObjectStore(r)}}(o._cfg.dbschema,t);Yn(e,[e.Transaction.prototype]),zn(e,[e.Transaction.prototype],e._storeNames,e._dbSchema),n.schema=e._dbSchema}))})),c().then((function(){var e,t;t=r,x(e=a).forEach((function(n){t.db.objectStoreNames.contains(n)||$n(t,n,e[n].primKey,e[n].indexes)}))}))}(e,t,o,n).catch(a)}))}function Zn(e,t){var n,r={del:[],add:[],change:[]};for(n in e)t[n]||r.del.push(n);for(n in t){var i=e[n],o=t[n];if(i){var a={name:n,def:o,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(o.primKey.keyPath||"")||i.primKey.auto!==o.primKey.auto&&!tn)a.recreate=!0,r.change.push(a);else{var s=i.idxByName,c=o.idxByName,u=void 0;for(u in s)c[u]||a.del.push(u);for(u in c){var l=s[u],h=c[u];l?l.src!==h.src&&a.change.push(h):a.add.push(h)}(a.del.length>0||a.add.length>0||a.change.length>0)&&r.change.push(a)}}else r.add.push([n,o])}return r}function $n(e,t,n,r){var i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach((function(e){return er(i,e)})),i}function er(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function tr(e,t,n){var r={};return H(t.objectStoreNames,0).forEach((function(e){for(var t=n.objectStore(e),i=t.keyPath,o=Mn(jn(i),i||"",!1,!1,!!t.autoIncrement,i&&"string"!=typeof i,!0),a=[],s=0;s<t.indexNames.length;++s){var c=t.index(t.indexNames[s]);i=c.keyPath;var u=Mn(c.name,i,!!c.unique,!!c.multiEntry,!1,i&&"string"!=typeof i,!1);a.push(u)}r[e]=Un(e,o,a)})),r}function nr(e,t,n){for(var r=n.db.objectStoreNames,i=0;i<r.length;++i){var o=r[i],a=n.objectStore(o);e._hasGetAll="getAll"in a;for(var s=0;s<a.indexNames.length;++s){var c=a.indexNames[s],u=a.index(c).keyPath,l="string"==typeof u?u:"["+H(u).join("+")+"]";if(t[o]){var h=t[o].idxByName[l];h&&(h.name=c,delete t[o].idxByName[l],t[o].idxByName[c]=h)}}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&L.WorkerGlobalScope&&L instanceof L.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}var rr,ir=function(){function e(){}return e.prototype._parseStoresSpec=function(e,t){x(e).forEach((function(n){if(null!==e[n]){var r=e[n].split(",").map((function(e,t){var n=(e=e.trim()).replace(/([&*]|\+\+)/g,""),r=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;return Mn(n,r||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),D(r),0===t)})),i=r.shift();if(i.multi)throw new Ne.Schema("Primary key cannot be multi-valued");r.forEach((function(e){if(e.auto)throw new Ne.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new Ne.Schema("Index must have a name and cannot be an empty string")})),t[n]=Un(n,i,r)}}))},e.prototype.stores=function(e){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?P(this._cfg.storesSource,e):e;var n=t._versions,r={},i={};return n.forEach((function(e){P(r,e._cfg.storesSource),i=e._cfg.dbschema={},e._parseStoresSpec(r,i)})),t._dbSchema=i,Yn(t,[t._allTables,t,t.Transaction.prototype]),zn(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],x(i),i),t._storeNames=x(i),this},e.prototype.upgrade=function(e){return this._cfg.contentUpgrade=e,this},e}();function or(e){return Dt((function(){return st.letThrough=!0,e()}))}function ar(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then((function(){return t.dbOpenError?Wt(t.dbOpenError):e}));Ae&&(t.openCanceller._stackHolder=be()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.dbReadyResolve,i=null;return ht.race([t.openCanceller,new ht((function(r,o){if(!n)throw new Ne.MissingAPI("indexedDB API not found. If using IE10+, make sure to run your code on a server URL (not locally). If using old Safari versions, make sure to include indexedDB polyfill.");var a=e.name,s=t.autoSchema?n.open(a):n.open(a,Math.round(10*e.verno));if(!s)throw new Ne.MissingAPI("IndexedDB API not available");s.onerror=Ln(o),s.onblocked=St(e._fireOnBlocked),s.onupgradeneeded=St((function(r){if(i=s.transaction,t.autoSchema&&!e._options.allowEmptyDB){s.onerror=Pn,i.abort(),s.result.close();var c=n.deleteDatabase(a);c.onsuccess=c.onerror=St((function(){o(new Ne.NoSuchDatabase("Database "+a+" doesnt exist"))}))}else{i.onerror=Ln(o);var u=r.oldVersion>Math.pow(2,62)?0:r.oldVersion;e.idbdb=s.result,Xn(e,u/10,i,o)}}),o),s.onsuccess=St((function(){i=null;var n=e.idbdb=s.result,o=H(n.objectStoreNames);if(o.length>0)try{var c=n.transaction(xn(o),"readonly");t.autoSchema?function(e,t,n){e.verno=t.version/10;var r=e._dbSchema=tr(0,t,n);e._storeNames=H(t.objectStoreNames,0),zn(e,[e._allTables],x(r),r)}(e,n,c):(nr(e,e._dbSchema,c),function(e,t){var n=Zn(tr(0,e.idbdb,t),e._dbSchema);return!(n.add.length||n.change.some((function(e){return e.add.length||e.change.length})))}(e,c)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),Wn(e,c)}catch(e){}en.push(e),n.onversionchange=St((function(n){t.vcFired=!0,e.on("versionchange").fire(n)})),rr.add(a),r()}),o)}))]).then((function(){return t.onReadyBeingFired=[],ht.resolve(or(e.on.ready.fire)).then((function e(){if(t.onReadyBeingFired.length>0){var n=t.onReadyBeingFired.reduce(Ge,Le);return t.onReadyBeingFired=[],ht.resolve(or(n)).then(e)}}))})).finally((function(){t.onReadyBeingFired=null})).then((function(){return t.isBeingOpened=!1,e})).catch((function(n){try{i&&i.abort()}catch(e){}return t.isBeingOpened=!1,e.close(),t.dbOpenError=n,Wt(t.dbOpenError)})).finally((function(){t.openComplete=!0,r()}))}function sr(e){var t=function(t){return e.next(t)},n=i(t),r=i((function(t){return e.throw(t)}));function i(e){return function(t){var i=e(t),o=i.value;return i.done?o:o&&"function"==typeof o.then?o.then(n,r):D(o)?Promise.all(o).then(n,r):n(o)}}return i(t)()}function cr(e,t,n){var r=arguments.length;if(r<2)throw new Ne.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];n=i.pop();var o=ne(i);return[e,o,n]}function ur(e,t,n,r,i){return ht.resolve().then((function(){var o=st.transless||st,a=e._createTransaction(t,n,e._dbSchema,r),s={trans:a,transless:o};r?a.idbtrans=r.idbtrans:a.create();var c,u=ge(i);u&&Lt();var l=ht.follow((function(){if(c=i.call(a,a))if(u){var e=Pt.bind(null,null);c.then(e,e)}else"function"==typeof c.next&&"function"==typeof c.throw&&(c=sr(c))}),s);return(c&&"function"==typeof c.then?ht.resolve(c).then((function(e){return a.active?e:Wt(new Ne.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))})):l.then((function(){return c}))).then((function(e){return r&&a._resolve(),a._completion.then((function(){return e}))})).catch((function(e){return a._reject(e),Wt(e)}))}))}function lr(e,t,n){for(var r=D(e)?e.slice():[e],i=0;i<n;++i)r.push(t);return r}var hr={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return O(O({},e),{table:function(t){var n=e.table(t),r=n.schema,i={},o=[];function a(e,t,n){var r=Vn(e),s=i[r]=i[r]||[],c=null==e?0:"string"==typeof e?1:e.length,u=t>0,l=O(O({},n),{isVirtual:u,isPrimaryKey:!u&&n.isPrimaryKey,keyTail:t,keyLength:c,extractKey:Fn(e),unique:!u&&n.unique});(s.push(l),l.isPrimaryKey||o.push(l),c>1)&&a(2===c?e[0]:e.slice(0,c-1),t+1,n);return s.sort((function(e,t){return e.keyTail-t.keyTail})),l}var s=a(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[s];for(var c=0,u=r.indexes;c<u.length;c++){var l=u[c];a(l.keyPath,0,l)}function h(t){var n,r,i=t.query.index;return i.isVirtual?O(O({},t),{query:{index:i,range:(n=t.query.range,r=i.keyTail,{type:1===n.type?2:n.type,lower:lr(n.lower,n.lowerOpen?e.MAX_KEY:e.MIN_KEY,r),lowerOpen:!0,upper:lr(n.upper,n.upperOpen?e.MIN_KEY:e.MAX_KEY,r),upperOpen:!0})}}):t}var d=O(O({},n),{schema:O(O({},r),{primaryKey:s,indexes:o,getIndexByKeyPath:function(e){var t=i[Vn(e)];return t&&t[0]}}),count:function(e){return n.count(h(e))},query:function(e){return n.query(h(e))},openCursor:function(t){var r=t.query.index,i=r.keyTail,o=r.isVirtual,a=r.keyLength;if(!o)return n.openCursor(t);return n.openCursor(h(t)).then((function(n){return n&&function(n){var r=Object.create(n,{continue:{value:function(r){null!=r?n.continue(lr(r,t.reverse?e.MAX_KEY:e.MIN_KEY,i)):t.unique?n.continue(lr(n.key,t.reverse?e.MIN_KEY:e.MAX_KEY,i)):n.continue()}},continuePrimaryKey:{value:function(t,r){n.continuePrimaryKey(lr(t,e.MAX_KEY,i),r)}},key:{get:function(){var e=n.key;return 1===a?e[0]:e.slice(0,a)}},value:{get:function(){return n.value}}});return r}(n)}))}});return d}})}},dr={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return O(O({},e),{table:function(t){var n=e.table(t),r=n.schema.primaryKey,i=O(O({},n),{mutate:function(e){var i=st.trans,o=i.table(t).hook,a=o.deleting,s=o.creating,c=o.updating;switch(e.type){case"add":if(s.fire===Le)break;return i._promise("readwrite",(function(){return u(e)}),!0);case"put":if(s.fire===Le&&c.fire===Le)break;return i._promise("readwrite",(function(){return u(e)}),!0);case"delete":if(a.fire===Le)break;return i._promise("readwrite",(function(){return u(e)}),!0);case"deleteRange":if(a.fire===Le)break;return i._promise("readwrite",(function(){return function(e){return l(e.trans,e.range,1e4)}(e)}),!0)}return n.mutate(e);function u(e){var t=st.trans,i=e.keys||Qn(r,e);if(!i)throw new Error("Keys missing");return"delete"!==(e="add"===e.type||"put"===e.type?O(O({},e),{keys:i,wantResults:!0}):O({},e)).type&&(e.values=N(e.values)),e.keys&&(e.keys=N(e.keys)),function(e,t,n){return"add"===t.type?Promise.resolve(new Array(t.values.length)):e.getMany({trans:t.trans,keys:n})}(n,e,i).then((function(o){var u=i.map((function(n,i){var u=o[i],l={onerror:null,onsuccess:null};if("delete"===e.type)a.fire.call(l,n,u,t);else if("add"===e.type||void 0===u){var h=s.fire.call(l,n,e.values[i],t);null==n&&null!=h&&(n=h,e.keys[i]=n,r.outbound||Z(e.values[i],r.keyPath,n))}else{var d=le(u,e.values[i]),f=c.fire.call(l,d,n,u,t);if(f){var p=e.values[i];Object.keys(f).forEach((function(e){j(p,e)?p[e]=f[e]:Z(p,e,f[e])}))}}return l}));return n.mutate(e).then((function(t){for(var n=t.failures,r=t.results,a=t.numFailures,s=t.lastResult,c=0;c<i.length;++c){var l=r?r[c]:i[c],h=u[c];null==l?h.onerror&&h.onerror(n[c]):h.onsuccess&&h.onsuccess("put"===e.type&&o[c]?e.values[c]:l)}return{failures:n,results:r,numFailures:a,lastResult:s}})).catch((function(e){return u.forEach((function(t){return t.onerror&&t.onerror(e)})),Promise.reject(e)}))}))}function l(e,t,i){return n.query({trans:e,values:!1,query:{index:r,range:t},limit:i}).then((function(n){var r=n.result;return u({type:"delete",keys:r,trans:e}).then((function(n){return n.numFailures>0?Promise.reject(n.failures[0]):r.length<i?{failures:[],numFailures:0,lastResult:void 0}:l(e,O(O({},t),{lower:r[r.length-1],lowerOpen:!0}),i)}))}))}}});return i}})}},fr=function(){function e(t,n){var r=this;this._middlewares={},this.verno=0;var i=e.dependencies;this._options=n=O({addons:e.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};var o=n.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null;var a={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Le,dbReadyPromise:null,cancelOpen:Le,openCanceller:null,autoSchema:!0};a.dbReadyPromise=new ht((function(e){a.dbReadyResolve=e})),a.openCanceller=new ht((function(e,t){a.cancelOpen=t})),this._state=a,this.name=t,this.on=fn(this,"populate","blocked","versionchange",{ready:[Ge,Le]}),this.on.ready.subscribe=W(this.on.ready.subscribe,(function(t){return function(n,i){e.vip((function(){var e=r._state;if(e.openComplete)e.dbOpenError||ht.resolve().then(n),i&&t(n);else if(e.onReadyBeingFired)e.onReadyBeingFired.push(n),i&&t(n);else{t(n);var o=r;i||t((function e(){o.on.ready.unsubscribe(n),o.on.ready.unsubscribe(e)}))}}))}})),this.Collection=function(e){return pn(En.prototype,(function(t,n){this.db=e;var r=ln,i=null;if(n)try{r=n()}catch(e){i=e}var o=t._ctx,a=o.table,s=a.hook.reading.fire;this._ctx={table:a,index:o.index,isPrimKey:!o.index||a.schema.primKey.keyPath&&o.index===a.schema.primKey.name,range:r,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:i,or:o.or,valueMapper:s!==Pe?s:null}}))}(this),this.Table=function(e){return pn(dn.prototype,(function(t,n,r){this.db=e,this._tx=r,this.name=t,this.schema=n,this.hook=e._allTables[t]?e._allTables[t].hook:fn(null,{creating:[je,Le],reading:[Be,Pe],updating:[Fe,Le],deleting:[Ue,Le]})}))}(this),this.Transaction=function(e){return pn(Bn.prototype,(function(t,n,r,i){var o=this;this.db=e,this.mode=t,this.storeNames=n,this.schema=r,this.idbtrans=null,this.on=fn(this,"complete","error","abort"),this.parent=i||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ht((function(e,t){o._resolve=e,o._reject=t})),this._completion.then((function(){o.active=!1,o.on.complete.fire()}),(function(e){var t=o.active;return o.active=!1,o.on.error.fire(e),o.parent?o.parent._reject(e):t&&o.idbtrans&&o.idbtrans.abort(),Wt(e)}))}))}(this),this.Version=function(e){return pn(ir.prototype,(function(t){this.db=e,this._cfg={version:t,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}}))}(this),this.WhereClause=function(e){return pn(Nn.prototype,(function(t,n,r){this.db=e,this._ctx={table:t,index:":id"===n?null:n,or:r};var i=e._deps.indexedDB;if(!i)throw new Ne.MissingAPI("indexedDB API missing");this._cmp=this._ascending=i.cmp.bind(i),this._descending=function(e,t){return i.cmp(t,e)},this._max=function(e,t){return i.cmp(e,t)>0?e:t},this._min=function(e,t){return i.cmp(e,t)<0?e:t},this._IDBKeyRange=e._deps.IDBKeyRange}))}(this),this.on("versionchange",(function(e){e.newVersion>0?console.warn("Another connection wants to upgrade database '"+r.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+r.name+"'. Closing db now to resume the delete request."),r.close()})),this.on("blocked",(function(e){!e.newVersion||e.newVersion<e.oldVersion?console.warn("Dexie.delete('"+r.name+"') was blocked"):console.warn("Upgrade '"+r.name+"' blocked by other connection holding version "+e.oldVersion/10)})),this._maxKey=Dn(n.IDBKeyRange),this._createTransaction=function(e,t,n,i){return new r.Transaction(e,t,n,i)},this._fireOnBlocked=function(e){r.on("blocked").fire(e),en.filter((function(e){return e.name===r.name&&e!==r&&!e._state.vcFired})).map((function(t){return t.on("versionchange").fire(e)}))},this.use(hr),this.use(dr),o.forEach((function(e){return e(r)}))}return e.prototype.version=function(e){if(isNaN(e)||e<.1)throw new Ne.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new Ne.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,n=t.filter((function(t){return t._cfg.version===e}))[0];return n||(n=new this.Version(e),t.push(n),t.sort(Jn),n.stores({}),this._state.autoSchema=!1,n)},e.prototype._whenReady=function(e){var t=this;return this._state.openComplete||st.letThrough?e():new ht((function(e,n){if(!t._state.isBeingOpened){if(!t._options.autoOpen)return void n(new Ne.DatabaseClosed);t.open().catch(Le)}t._state.dbReadyPromise.then(e,n)})).then(e)},e.prototype.use=function(e){var t=e.stack,n=e.create,r=e.level,i=e.name;i&&this.unuse({stack:t,name:i});var o=this._middlewares[t]||(this._middlewares[t]=[]);return o.push({stack:t,create:n,level:null==r?10:r,name:i}),o.sort((function(e,t){return e.level-t.level})),this},e.prototype.unuse=function(e){var t=e.stack,n=e.name,r=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter((function(e){return r?e.create!==r:!!n&&e.name!==n}))),this},e.prototype.open=function(){return ar(this)},e.prototype.close=function(){var e=en.indexOf(this),t=this._state;if(e>=0&&en.splice(e,1),this.idbdb){try{this.idbdb.close()}catch(e){}this.idbdb=null}this._options.autoOpen=!1,t.dbOpenError=new Ne.DatabaseClosed,t.isBeingOpened&&t.cancelOpen(t.dbOpenError),t.dbReadyPromise=new ht((function(e){t.dbReadyResolve=e})),t.openCanceller=new ht((function(e,n){t.cancelOpen=n}))},e.prototype.delete=function(){var e=this,t=arguments.length>0,n=this._state;return new ht((function(r,i){var o=function(){e.close();var t=e._deps.indexedDB.deleteDatabase(e.name);t.onsuccess=St((function(){rr.remove(e.name),r()})),t.onerror=Ln(i),t.onblocked=e._fireOnBlocked};if(t)throw new Ne.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(o):o()}))},e.prototype.backendDB=function(){return this.idbdb},e.prototype.isOpen=function(){return null!==this.idbdb},e.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name},e.prototype.hasFailed=function(){return null!==this._state.dbOpenError},e.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(e.prototype,"tables",{get:function(){var e=this;return x(this._allTables).map((function(t){return e._allTables[t]}))},enumerable:!0,configurable:!0}),e.prototype.transaction=function(){var e=cr.apply(this,arguments);return this._transaction.apply(this,e)},e.prototype._transaction=function(e,t,n){var r=this,i=st.trans;i&&i.db===this&&-1===e.indexOf("!")||(i=null);var o,a,s=-1!==e.indexOf("?");e=e.replace("!","").replace("?","");try{if(a=t.map((function(e){var t=e instanceof r.Table?e.name:e;if("string"!=typeof t)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return t})),"r"==e||e===sn)o=sn;else{if("rw"!=e&&e!=cn)throw new Ne.InvalidArgument("Invalid transaction mode: "+e);o=cn}if(i){if(i.mode===sn&&o===cn){if(!s)throw new Ne.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&a.forEach((function(e){if(i&&-1===i.storeNames.indexOf(e)){if(!s)throw new Ne.SubTransaction("Table "+e+" not included in parent transaction.");i=null}})),s&&i&&!i.active&&(i=null)}}catch(e){return i?i._promise(null,(function(t,n){n(e)})):Wt(e)}var c=ur.bind(null,this,o,a,i,n);return i?i._promise(o,c,"lock"):st.trans?Qt(st.transless,(function(){return r._whenReady(c)})):this._whenReady(c)},e.prototype.table=function(e){if(!j(this._allTables,e))throw new Ne.InvalidTable("Table "+e+" does not exist");return this._allTables[e]},e}(),pr=fr;U(pr,O(O({},De),{delete:function(e){return new pr(e).delete()},exists:function(e){return new pr(e,{addons:[]}).open().then((function(e){return e.close(),!0})).catch("NoSuchDatabaseError",(function(){return!1}))},getDatabaseNames:function(e){return rr?rr.getDatabaseNames().then(e):ht.resolve([])},defineClass:function(){return function(e){P(this,e)}},ignoreTransaction:function(e){return st.trans?Qt(st.transless,e):e()},vip:or,async:function(e){return function(){try{var t=sr(e.apply(this,arguments));return t&&"function"==typeof t.then?t:ht.resolve(t)}catch(e){return Wt(e)}}},spawn:function(e,t,n){try{var r=sr(e.apply(n,t||[]));return r&&"function"==typeof r.then?r:ht.resolve(r)}catch(e){return Wt(e)}},currentTransaction:{get:function(){return st.trans||null}},waitFor:function(e,t){var n=ht.resolve("function"==typeof e?pr.ignoreTransaction(e):e).timeout(t||6e4);return st.trans?st.trans.waitFor(n):n},Promise:ht,debug:{get:function(){return Ae},set:function(e){ve(e,"dexie"===e?function(){return!0}:on)}},derive:G,extend:P,props:U,override:W,Events:fn,getByKeyPath:X,setByKeyPath:Z,delByKeyPath:$,shallowClone:ee,deepClone:ae,getObjectDiff:le,asap:Y,minKey:Xt,addons:[],connections:en,errnames:ke,dependencies:function(){try{return{indexedDB:L.indexedDB||L.mozIndexedDB||L.webkitIndexedDB||L.msIndexedDB,IDBKeyRange:L.IDBKeyRange||L.webkitIDBKeyRange}}catch(e){return{indexedDB:null,IDBKeyRange:null}}}(),semVer:Yt,version:Yt.split(".").map((function(e){return parseInt(e)})).reduce((function(e,t,n){return e+t/Math.pow(10,2*n)})),default:pr,Dexie:pr})),pr.maxKey=Dn(pr.dependencies.IDBKeyRange),function(e){try{rr=function(e){var t,n=e&&"function"==typeof e.databases;if(!n){var r=new fr(an,{addons:[]});r.version(1).stores({dbnames:"name"}),t=r.table("dbnames")}return{getDatabaseNames:function(){return n?ht.resolve(e.databases()).then((function(e){return e.map((function(e){return e.name})).filter((function(e){return e!==an}))})):t.toCollection().primaryKeys()},add:function(e){return!n&&e!==an&&t.put({name:e}).catch(Le)},remove:function(e){return!n&&e!==an&&t.delete(e).catch(Le)}}}(e)}catch(e){}}(fr.dependencies.indexedDB),ht.rejectionMapper=function(e,t){if(!e||e instanceof Ce||e instanceof TypeError||e instanceof SyntaxError||!e.name||!xe[e.name])return e;var n=new xe[e.name](t||e.message,e);return"stack"in e&&Q(n,"stack",{get:function(){return this.inner.stack}}),n},ve(Ae,on);function gr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var i=p(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f(this,n)}}var Ar,vr=new(function(e){l(n,e);var t=gr(n);function n(){var e;return a(this,n),(e=t.call(this,"AgoraLogger")).logs=void 0,e.openDatabase(),e.logs=e.table("logs"),e}return c(n,[{key:"openDatabase",value:function(){this.version(1).stores({logs:"++id, content, created_at"})}}]),n}(fr)),mr=function(){function e(){a(this,e),this._lastObjectIndex=-1,this.thread=new k}var t,n,r;return c(e,[{key:"collectConsoleLogs",value:(r=o(A().mark((function e(){var t,n,r,i=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="",e.next=3,vr.logs.each((function(e){t+=e.content+"\n",i._lastObjectIndex=e.id}));case 3:return n=+Date.now(),r=new File([t],"".concat(n)),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),function(){return r.apply(this,arguments)})},{key:"cleanupConsoleLogs",value:(n=o(A().mark((function e(){var t;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vr.logs.where("id").belowOrEqual(this._lastObjectIndex).delete();case 2:t=e.sent,console.log("[logger] delete ".concat(t," logs"));case 4:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"_addLocalFolderAsync",value:function(e,t){return new Promise((function(n,r){e.addLocalFolderAsync(t,(function(e,t){if(t)return r(t);n()}))}))}},{key:"_readFile",value:function(e){return new Promise((function(t,n){window.require("fs").readFile(e,(function(e,r){return e?n(e):t(r)}))}))}},{key:"collectElectronLogs",value:(t=o(A().mark((function e(t,n){var r,i,o,a,s,c;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=+Date.now(),i=window.require("adm-zip"),o=window.require("path"),a=new i,e.next=6,this._addLocalFolderAsync(a,n);case 6:return s=o.resolve(t,"logs.zip"),a.writeZip(s),e.next=10,this._readFile(s);case 10:return c=e.sent,e.abrupt("return",new File([c],"".concat(r)));case 12:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})}],[{key:"warn",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.log.apply(e,[kr.WARN].concat(n))}},{key:"debug",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.log.apply(e,[kr.DEBUG].concat(n))}},{key:"info",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.log.apply(e,[kr.INFO].concat(n))}},{key:"error",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.log.apply(e,[kr.ERROR].concat(n))}},{key:"log",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o=Ur.logLevel;if(!(e>o)){var a="AgoraEdu-SDK [".concat(e,"]: "),s=[],c=(b(t={},"".concat(kr.WARN),{call:function(){s=[a].concat(r),console.warn.apply(console,s)}}),b(t,"".concat(kr.DEBUG),{call:function(){s=[a].concat(r),console.debug.apply(console,s)}}),b(t,"".concat(kr.INFO),{call:function(){s=[a].concat(r),console.info.apply(console,s)}}),b(t,"".concat(kr.ERROR),{call:function(){s=[a].concat(r),console.error.apply(console,s)}}),t),u="".concat(e);c.hasOwnProperty(u)?c[u].call():(s=[a].concat(r),console.log.apply(console,s))}}},{key:"setupConsoleHijack",value:function(){console.log("[logger] setup hijack..");var e=this.logger.thread,t=function(e,t){return"".concat(C()().format("YYYY-MM-DD HH:mm:ss")," ").concat((0,S.upperCase)(e||"unknown")," ").concat((0,S.escape)(t))};Object.keys(console).filter((function(e){return["info","error","warn","log","debug"].indexOf(e)>=0})).forEach((function(n,r){console[n]=function(n,r){return function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];var s=t(r.name,o.join(" "));e.postMessage({type:"log",data:s}),r.apply(n,o)}}(console,console[n])})),window.console=console}}]),e}();mr.logger=new mr,mr.originConsole=window.console;var yr=new Uint8Array(16);function br(){if(!Ar&&!(Ar="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ar(yr)}const _r=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const Er=function(e){return"string"==typeof e&&_r.test(e)};for(var wr=[],Ir=0;Ir<256;++Ir)wr.push((Ir+256).toString(16).substr(1));const Cr=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(wr[e[t+0]]+wr[e[t+1]]+wr[e[t+2]]+wr[e[t+3]]+"-"+wr[e[t+4]]+wr[e[t+5]]+"-"+wr[e[t+6]]+wr[e[t+7]]+"-"+wr[e[t+8]]+wr[e[t+9]]+"-"+wr[e[t+10]]+wr[e[t+11]]+wr[e[t+12]]+wr[e[t+13]]+wr[e[t+14]]+wr[e[t+15]]).toLowerCase();if(!Er(n))throw TypeError("Stringified UUID is invalid");return n};const Sr=function(e,t,n){var r=(e=e||{}).random||(e.rng||br)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return Cr(r)};function Tr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var i=p(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f(this,n)}}var Rr,kr,Or,Nr,xr,Dr=function(e){l(n,e);var t=Tr(n);function n(){return a(this,n),t.apply(this,arguments)}return c(n)}(y),Lr=function(e){l(n,e);var t=Tr(n);function n(e,r,i){var o;return a(this,n),(o=t.call(this))._extra=i,o.id=Sr(),o.original=void 0,o.codeList=void 0,o.message=r.message,o.original=r,o.codeList=[e],o.stack=r.stack,o}return c(n,[{key:"servCode",get:function(){var e;return null===(e=this._extra)||void 0===e?void 0:e.servCode}}],[{key:"isOf",value:function(e){if(!(e instanceof n))return!1;for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return r.includes(e.servCode)}}]),n}(w(Error)),Pr=function(e,t){return t instanceof Lr?(t.codeList.push(e),t):new Lr(e,t)},Br=function(e){l(n,e);var t=Tr(n);function n(){return a(this,n),t.apply(this,arguments)}return c(n,[{key:"_handleError",value:function(e,t){var n=(null==t?void 0:t.stack)||(null==t?void 0:t.message);mr.error("[RteErrorCenter] error ".concat(e,": ").concat(n))}},{key:"handleThrowableError",value:function(e,t){var n=Pr(e,t);throw this._handleError(e,n),n}},{key:"handleNonThrowableError",value:function(e,t){var n=Pr(e,t);this._handleError(e,n)}}]),n}(Dr);function Mr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mr(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Br.shared=new Br,function(e){e.RTE_ERR_MISSING_PARAMS="100000",e.RTE_ERR_SCENE_NOT_READY="100001",e.RTE_ERR_INVALID_DATA_STRUCT="100002",e.RTE_ERR_LOG_UPLOAD_FAIL="100003",e.RTE_ERR_RESTFUL_SERVICE_ERR="100004",e.RTE_ERR_RESTFUL_HTTP_CLIENT_ERR="100005",e.RTE_ERR_AGORA_FETCH_ERR="100006",e.RTE_ERR_ELECTRON_LOG_UPLOAD_ERR="100007",e.RTE_ERR_WEB_LOG_UPLOAD_ERR="100008",e.RTE_ERR_JOIN_SCENE_FAILED="100009",e.RTE_ERR_LEAVE_SCENE_FAIL="100010",e.RTE_ERR_EVENT_CALLBACK_ERR="100011",e.RTE_ERR_SCENE_ALREADY_JOINED="100012",e.RTE_ERR_ENGINE_NOT_READY="100013",e.RTE_ERR_CONFIG_NOT_READY="100014",e.RTE_ERR_RESTFUL_NETWORK_ERR="100015",e.RTE_ERR_RESTFUL_NETWORK_TIMEOUT_ERR="100016",e.RTM_ERR_LOGGED_IN_ALREADY="200000",e.RTM_ERR_JOIN_FAILED="200001",e.RTM_ERR_LEAVE_FAILED="200002",e.RTM_ERR_DESTROY_FAILED="200003",e.RTM_ERR_LOGIN_FAIL="200004",e.RTM_ERR_REGION_NOT_SPECIFIED="200005",e.RTC_ERR_CAM_ERR="300000",e.RTC_ERR_MIC_ERR="300001",e.RTC_ERR_TRACK_PUBLISH_FAIL="300002",e.RTC_ERR_TRACK_UNPUBLISH_FAIL="300003",e.RTC_ERR_TRACK_SUBSCRIBE_FAIL="300004",e.RTC_ERR_TRACK_UNSUBSCRIBE_FAIL="300005",e.RTC_ERR_NO_CHANNEL_EXISTS="300006",e.RTC_ERR_INVALID_CANVAS="300007",e.RTC_ERR_SCREEN_SHARE_ERR="300008",e.RTC_ERR_CLIENT_LEAVE_CHANNEL_FAIL="300009",e.RTC_ERR_LEAVE_MAIN_CHANNEL_FAIL="300010",e.RTC_ERR_LEAVE_SUB_CHANNEL_FAIL="300011",e.RTC_ERR_LEAVE_CHANNEL_FAIL="300012",e.RTC_ERR_VDM_GET_DEVICES_FAIL="300013",e.RTC_ERR_ADM_GET_RECORD_DEVICES_FAIL="300014",e.RTC_ERR_ADM_GET_PLAYBACK_DEVICES_FAIL="300015",e.RTC_ERR_REGION_NOT_SPECIFIED="300016",e.RTC_ERR_RTC_ENGINE_INITIALZIE_FAILED="300017",e.RTC_ERR_RTC_VDM_NOT_READY="300018",e.RTC_ERR_RTC_ADM_NOT_READY="300019"}(Rr||(Rr={})),function(e){e[e.OFF=0]="OFF",e[e.ERROR=1]="ERROR",e[e.WARN=2]="WARN",e[e.INFO=3]="INFO",e[e.DEBUG=4]="DEBUG",e[e.VERBOSE=5]="VERBOSE"}(kr||(kr={})),function(e){e[e.Electron=0]="Electron",e[e.Web=1]="Web"}(Or||(Or={})),function(e){e.zh="zh",e.en="en"}(Nr||(Nr={})),function(e){e.CN="CN",e.AP="AP",e.EU="EU",e.NA="NA"}(xr||(xr={}));var Ur=function(){function e(t,n){a(this,e),this.appId=void 0,this.service={},this.rtcConfigs={},this.logFilePath=void 0,this.userId="",this.token="",this.ignoreUrlRegionPrefix=!1,this.language=Nr.zh,this.debugI18n=!1,this.region=xr.CN,this.SCENE_JOIN_RETRY_ATTEMPTS=3,this.appId=t,n&&(n.language&&(this.language=n.language),n.region&&(this.region=n.region),n.rtcConfigs&&(this.rtcConfigs=jr(jr({},this.rtcConfigs),n.rtcConfigs)))}return c(e,null,[{key:"shared",get:function(){return this._config?this._config:Br.shared.handleThrowableError(Rr.RTE_ERR_CONFIG_NOT_READY,new Error("classroom config not ready"))}},{key:"setConfig",value:function(e){this._config=e}},{key:"platform",get:function(){return navigator.userAgent.toLowerCase().indexOf(" electron/")>-1?Or.Electron:Or.Web}},{key:"version",get:function(){return"2.0.0"}}]),e}();Ur._config=void 0,Ur.logLevel=kr.DEBUG;var Fr,Qr,Gr=function(e,t){var n=e.__$$ignoreMethods||[];n=n.concat(t),e.__$$ignoreMethods=n};function qr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var i=p(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f(this,n)}}!function(e){e[e.pre=0]="pre",e[e.post=1]="post"}(Fr||(Fr={})),Qr||(Qr={});var Vr=function(e,t,n){if(!n)try{return e.apply(null,t)}catch(e){}},Kr=function(e,t,n,r,i,o,a){var s=function(e,t){return e.__$$ignoreMethods&&e.__$$ignoreMethods.indexOf(t)>-1}(n,r);Vr(o,[{type:Fr.pre,arguments:i,method:r,class:n.constructor.name,context:a}],s);var c,u,l=t.apply(e,i),h=function(e,t){Vr(o,[{type:Fr.post,arguments:i,return:e,method:r,class:n.constructor.name,context:a,error:t}],s)};l&&!!l.then?l.then((function(e){c=e})).catch((function(e){u=e})).finally((function(){h(c,u)})):h(l);return l},Hr=function(e,t,n,r,i){return function(){for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return Kr(this,e,t,n,a,r,i)}},Wr=function(e){return Object.getOwnPropertyNames(e).filter((function(t){return"function"==typeof e[t]}))},zr=function(){},Yr=function(e){var t=mr[e]||zr;return function(e){if(e.type===Fr.pre){var n;e.context.start=(new Date).getTime();var r=["[".concat(e.class,"] >>> [").concat(e.method,"]")];(null===(n=e.arguments)||void 0===n?void 0:n.length)&&r.push(", args:",e.arguments),t.apply(void 0,r)}else{var i=(new Date).getTime()-e.context.start,o=["[".concat(e.class,"] <<< [").concat(e.method,"]")];e.return&&o.push(", return:",e.return),e.error&&o.push(", err:",e.error),o.push(", Time elapsed: ".concat(i,"ms")),t.apply(void 0,o)}}},Jr={info:function(e,t,n){var r=Yr("info"),i=e[t],o=Hr(i,e,t,r,{});return{configurable:!0,enumerable:!1,get:function(){return o.bind(this)}}},warn:function(e,t,n){var r=Yr("warn"),i=e[t],o=Hr(i,e,t,r,{});return{configurable:!0,enumerable:!1,get:function(){return o.bind(this)}}},error:function(e,t,n){var r=Yr("error"),i=e[t],o=Hr(i,e,t,r,{});return{configurable:!0,enumerable:!1,get:function(){return o.bind(this)}}},attach:function(e){var t=e.level,n=void 0===t?kr.INFO:t,r=e.proxyMethods,i=void 0===r||r;return function(e){var t=Yr([,"error","warn","info","info","info"][n]),r=function(e){return Object.freeze({info:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];mr.info.apply(mr,["[".concat(e.name,"]")].concat(n))},warn:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];mr.warn.apply(mr,["[".concat(e.name,"]")].concat(n))},error:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];mr.error.apply(mr,["[".concat(e.name,"]")].concat(n))},debug:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];mr.debug.apply(mr,["[".concat(e.name,"]")].concat(n))}})}(e);return function(e,t,n,r,i){var o=e.prototype;return function(e){l(u,e);var s=qr(u);function u(){var e;a(this,u);for(var c=arguments.length,l=new Array(c),h=0;h<c;h++)l[h]=arguments[h];(e=s.call.apply(s,[this].concat(l)),Gr(o,[]),i)&&Wr(o).forEach((function(r){var i=o[r];e[r]=Hr(i,o,r,t,n).bind(d(e))}));return Object.keys(r).forEach((function(t){e[t]=r[t]})),e}return c(u)}(e)}(e,t,{},{logger:r},i)}},silence:function(e,t){Gr(e,[t])}};function Xr(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||n(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Zr=32,$r=31,ei={};function ti(e){e&&(e.value=!0)}function ni(){}function ri(e){return void 0===e.size&&(e.size=e.__iterate(oi)),e.size}function ii(e,t){if("number"!=typeof t){var n=t>>>0;if(""+n!==t||4294967295===n)return NaN;t=n}return t<0?ri(e)+t:t}function oi(){return!0}function ai(e,t,n){return(0===e&&!li(e)||void 0!==n&&e<=-n)&&(void 0===t||void 0!==n&&t>=n)}function si(e,t){return ui(e,t,0)}function ci(e,t){return ui(e,t,t)}function ui(e,t,n){return void 0===e?n:li(e)?t===1/0?t:0|Math.max(0,t+e):void 0===t||t===e?e:0|Math.min(t,e)}function li(e){return e<0||0===e&&1/e==-1/0}var hi="@@__IMMUTABLE_ITERABLE__@@";function di(e){return Boolean(e&&e[hi])}var fi="@@__IMMUTABLE_KEYED__@@";function pi(e){return Boolean(e&&e[fi])}var gi="@@__IMMUTABLE_INDEXED__@@";function Ai(e){return Boolean(e&&e[gi])}function vi(e){return pi(e)||Ai(e)}var mi=function(e){return di(e)?e:Qi(e)},yi=function(e){function t(e){return pi(e)?e:Gi(e)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(mi),bi=function(e){function t(e){return Ai(e)?e:qi(e)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(mi),_i=function(e){function t(e){return di(e)&&!vi(e)?e:Vi(e)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(mi);mi.Keyed=yi,mi.Indexed=bi,mi.Set=_i;var Ei="@@__IMMUTABLE_SEQ__@@";function wi(e){return Boolean(e&&e[Ei])}var Ii="@@__IMMUTABLE_RECORD__@@";function Ci(e){return Boolean(e&&e[Ii])}function Si(e){return di(e)||Ci(e)}var Ti="@@__IMMUTABLE_ORDERED__@@";function Ri(e){return Boolean(e&&e[Ti])}var ki="function"==typeof Symbol&&Symbol.iterator,Oi="@@iterator",Ni=ki||Oi,xi=function(e){this.next=e};function Di(e,t,n,r){var i=0===e?t:1===e?n:[t,n];return r?r.value=i:r={value:i,done:!1},r}function Li(){return{value:void 0,done:!0}}function Pi(e){return!!Array.isArray(e)||!!ji(e)}function Bi(e){return e&&"function"==typeof e.next}function Mi(e){var t=ji(e);return t&&t.call(e)}function ji(e){var t=e&&(ki&&e[ki]||e["@@iterator"]);if("function"==typeof t)return t}xi.prototype.toString=function(){return"[Iterator]"},xi.KEYS=0,xi.VALUES=1,xi.ENTRIES=2,xi.prototype.inspect=xi.prototype.toSource=function(){return this.toString()},xi.prototype[Ni]=function(){return this};var Ui=Object.prototype.hasOwnProperty;function Fi(e){return!(!Array.isArray(e)&&"string"!=typeof e)||e&&"object"==typeof e&&Number.isInteger(e.length)&&e.length>=0&&(0===e.length?1===Object.keys(e).length:e.hasOwnProperty(e.length-1))}var Qi=function(e){function t(e){return null==e?Yi():Si(e)?e.toSeq():function(e){var t=Zi(e);if(t)return(r=ji(n=e))&&r===n.entries?t.fromEntrySeq():function(e){var t=ji(e);return t&&t===e.keys}(e)?t.toSetSeq():t;var n,r;if("object"==typeof e)return new Hi(e);throw new TypeError("Expected Array or collection object of values, or keyed object: "+e)}(e)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.toSeq=function(){return this},t.prototype.toString=function(){return this.__toString("Seq {","}")},t.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},t.prototype.__iterate=function(e,t){var n=this._cache;if(n){for(var r=n.length,i=0;i!==r;){var o=n[t?r-++i:i++];if(!1===e(o[1],o[0],this))break}return i}return this.__iterateUncached(e,t)},t.prototype.__iterator=function(e,t){var n=this._cache;if(n){var r=n.length,i=0;return new xi((function(){if(i===r)return{value:void 0,done:!0};var o=n[t?r-++i:i++];return Di(e,o[0],o[1])}))}return this.__iteratorUncached(e,t)},t}(mi),Gi=function(e){function t(e){return null==e?Yi().toKeyedSeq():di(e)?pi(e)?e.toSeq():e.fromEntrySeq():Ci(e)?e.toSeq():Ji(e)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.toKeyedSeq=function(){return this},t}(Qi),qi=function(e){function t(e){return null==e?Yi():di(e)?pi(e)?e.entrySeq():e.toIndexedSeq():Ci(e)?e.toSeq().entrySeq():Xi(e)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return t(arguments)},t.prototype.toIndexedSeq=function(){return this},t.prototype.toString=function(){return this.__toString("Seq [","]")},t}(Qi),Vi=function(e){function t(e){return(di(e)&&!vi(e)?e:qi(e)).toSetSeq()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return t(arguments)},t.prototype.toSetSeq=function(){return this},t}(Qi);Qi.isSeq=wi,Qi.Keyed=Gi,Qi.Set=Vi,Qi.Indexed=qi,Qi.prototype[Ei]=!0;var Ki=function(e){function t(e){this._array=e,this.size=e.length}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(e,t){return this.has(e)?this._array[ii(this,e)]:t},t.prototype.__iterate=function(e,t){for(var n=this._array,r=n.length,i=0;i!==r;){var o=t?r-++i:i++;if(!1===e(n[o],o,this))break}return i},t.prototype.__iterator=function(e,t){var n=this._array,r=n.length,i=0;return new xi((function(){if(i===r)return{value:void 0,done:!0};var o=t?r-++i:i++;return Di(e,o,n[o])}))},t}(qi),Hi=function(e){function t(e){var t=Object.keys(e);this._object=e,this._keys=t,this.size=t.length}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(e,t){return void 0===t||this.has(e)?this._object[e]:t},t.prototype.has=function(e){return Ui.call(this._object,e)},t.prototype.__iterate=function(e,t){for(var n=this._object,r=this._keys,i=r.length,o=0;o!==i;){var a=r[t?i-++o:o++];if(!1===e(n[a],a,this))break}return o},t.prototype.__iterator=function(e,t){var n=this._object,r=this._keys,i=r.length,o=0;return new xi((function(){if(o===i)return{value:void 0,done:!0};var a=r[t?i-++o:o++];return Di(e,a,n[a])}))},t}(Gi);Hi.prototype[Ti]=!0;var Wi,zi=function(e){function t(e){this._collection=e,this.size=e.length||e.size}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.__iterateUncached=function(e,t){if(t)return this.cacheResult().__iterate(e,t);var n=Mi(this._collection),r=0;if(Bi(n))for(var i;!(i=n.next()).done&&!1!==e(i.value,r++,this););return r},t.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var n=Mi(this._collection);if(!Bi(n))return new xi(Li);var r=0;return new xi((function(){var t=n.next();return t.done?t:Di(e,r++,t.value)}))},t}(qi);function Yi(){return Wi||(Wi=new Ki([]))}function Ji(e){var t=Zi(e);if(t)return t.fromEntrySeq();if("object"==typeof e)return new Hi(e);throw new TypeError("Expected Array or collection object of [k, v] entries, or keyed object: "+e)}function Xi(e){var t=Zi(e);if(t)return t;throw new TypeError("Expected Array or collection object of values: "+e)}function Zi(e){return Fi(e)?new Ki(e):Pi(e)?new zi(e):void 0}var $i="@@__IMMUTABLE_MAP__@@";function eo(e){return Boolean(e&&e[$i])}function to(e){return eo(e)&&Ri(e)}function no(e){return Boolean(e&&"function"==typeof e.equals&&"function"==typeof e.hashCode)}function ro(e,t){if(e===t||e!=e&&t!=t)return!0;if(!e||!t)return!1;if("function"==typeof e.valueOf&&"function"==typeof t.valueOf){if((e=e.valueOf())===(t=t.valueOf())||e!=e&&t!=t)return!0;if(!e||!t)return!1}return!!(no(e)&&no(t)&&e.equals(t))}var io="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(e,t){var n=65535&(e|=0),r=65535&(t|=0);return n*r+((e>>>16)*r+n*(t>>>16)<<16>>>0)|0};function oo(e){return e>>>1&1073741824|3221225471&e}var ao=Object.prototype.valueOf;function so(e){if(null==e)return co(e);if("function"==typeof e.hashCode)return oo(e.hashCode(e));var t,n=(t=e).valueOf!==ao&&"function"==typeof t.valueOf?t.valueOf(t):t;if(null==n)return co(n);switch(typeof n){case"boolean":return n?1108378657:1108378656;case"number":return function(e){if(e!=e||e===1/0)return 0;var t=0|e;t!==e&&(t^=4294967295*e);for(;e>4294967295;)t^=e/=4294967295;return oo(t)}(n);case"string":return n.length>yo?function(e){var t=Eo[e];void 0===t&&(t=uo(e),_o===bo&&(_o=0,Eo={}),_o++,Eo[e]=t);return t}(n):uo(n);case"object":case"function":return function(e){var t;if(go&&void 0!==(t=po.get(e)))return t;if(void 0!==(t=e[mo]))return t;if(!ho){if(void 0!==(t=e.propertyIsEnumerable&&e.propertyIsEnumerable[mo]))return t;if(void 0!==(t=function(e){if(e&&e.nodeType>0)switch(e.nodeType){case 1:return e.uniqueID;case 9:return e.documentElement&&e.documentElement.uniqueID}}(e)))return t}if(t=fo(),go)po.set(e,t);else{if(void 0!==lo&&!1===lo(e))throw new Error("Non-extensible objects are not allowed as keys.");if(ho)Object.defineProperty(e,mo,{enumerable:!1,configurable:!1,writable:!1,value:t});else if(void 0!==e.propertyIsEnumerable&&e.propertyIsEnumerable===e.constructor.prototype.propertyIsEnumerable)e.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},e.propertyIsEnumerable[mo]=t;else{if(void 0===e.nodeType)throw new Error("Unable to set a non-enumerable property on object.");e[mo]=t}}return t}(n);case"symbol":return function(e){var t=Ao[e];if(void 0!==t)return t;return t=fo(),Ao[e]=t,t}(n);default:if("function"==typeof n.toString)return uo(n.toString());throw new Error("Value type "+typeof n+" cannot be hashed.")}}function co(e){return null===e?1108378658:1108378659}function uo(e){for(var t=0,n=0;n<e.length;n++)t=31*t+e.charCodeAt(n)|0;return oo(t)}var lo=Object.isExtensible,ho=function(){try{return Object.defineProperty({},"@",{}),!0}catch(e){return!1}}();function fo(){var e=++vo;return 1073741824&vo&&(vo=0),e}var po,go="function"==typeof WeakMap;go&&(po=new WeakMap);var Ao=Object.create(null),vo=0,mo="__immutablehash__";"function"==typeof Symbol&&(mo=Symbol(mo));var yo=16,bo=255,_o=0,Eo={},wo=function(e){function t(e,t){this._iter=e,this._useKeys=t,this.size=e.size}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(e,t){return this._iter.get(e,t)},t.prototype.has=function(e){return this._iter.has(e)},t.prototype.valueSeq=function(){return this._iter.valueSeq()},t.prototype.reverse=function(){var e=this,t=ko(this,!0);return this._useKeys||(t.valueSeq=function(){return e._iter.toSeq().reverse()}),t},t.prototype.map=function(e,t){var n=this,r=Ro(this,e,t);return this._useKeys||(r.valueSeq=function(){return n._iter.toSeq().map(e,t)}),r},t.prototype.__iterate=function(e,t){var n=this;return this._iter.__iterate((function(t,r){return e(t,r,n)}),t)},t.prototype.__iterator=function(e,t){return this._iter.__iterator(e,t)},t}(Gi);wo.prototype[Ti]=!0;var Io=function(e){function t(e){this._iter=e,this.size=e.size}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.includes=function(e){return this._iter.includes(e)},t.prototype.__iterate=function(e,t){var n=this,r=0;return t&&ri(this),this._iter.__iterate((function(i){return e(i,t?n.size-++r:r++,n)}),t)},t.prototype.__iterator=function(e,t){var n=this,r=this._iter.__iterator(1,t),i=0;return t&&ri(this),new xi((function(){var o=r.next();return o.done?o:Di(e,t?n.size-++i:i++,o.value,o)}))},t}(qi),Co=function(e){function t(e){this._iter=e,this.size=e.size}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.has=function(e){return this._iter.includes(e)},t.prototype.__iterate=function(e,t){var n=this;return this._iter.__iterate((function(t){return e(t,t,n)}),t)},t.prototype.__iterator=function(e,t){var n=this._iter.__iterator(1,t);return new xi((function(){var t=n.next();return t.done?t:Di(e,t.value,t.value,t)}))},t}(Vi),So=function(e){function t(e){this._iter=e,this.size=e.size}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.entrySeq=function(){return this._iter.toSeq()},t.prototype.__iterate=function(e,t){var n=this;return this._iter.__iterate((function(t){if(t){Fo(t);var r=di(t);return e(r?t.get(1):t[1],r?t.get(0):t[0],n)}}),t)},t.prototype.__iterator=function(e,t){var n=this._iter.__iterator(1,t);return new xi((function(){for(;;){var t=n.next();if(t.done)return t;var r=t.value;if(r){Fo(r);var i=di(r);return Di(e,i?r.get(0):r[0],i?r.get(1):r[1],t)}}}))},t}(Gi);function To(e){var t=Go(e);return t._iter=e,t.size=e.size,t.flip=function(){return e},t.reverse=function(){var t=e.reverse.apply(this);return t.flip=function(){return e.reverse()},t},t.has=function(t){return e.includes(t)},t.includes=function(t){return e.has(t)},t.cacheResult=qo,t.__iterateUncached=function(t,n){var r=this;return e.__iterate((function(e,n){return!1!==t(n,e,r)}),n)},t.__iteratorUncached=function(t,n){if(2===t){var r=e.__iterator(t,n);return new xi((function(){var e=r.next();if(!e.done){var t=e.value[0];e.value[0]=e.value[1],e.value[1]=t}return e}))}return e.__iterator(1===t?0:1,n)},t}function Ro(e,t,n){var r=Go(e);return r.size=e.size,r.has=function(t){return e.has(t)},r.get=function(r,i){var o=e.get(r,ei);return o===ei?i:t.call(n,o,r,e)},r.__iterateUncached=function(r,i){var o=this;return e.__iterate((function(e,i,a){return!1!==r(t.call(n,e,i,a),i,o)}),i)},r.__iteratorUncached=function(r,i){var o=e.__iterator(2,i);return new xi((function(){var i=o.next();if(i.done)return i;var a=i.value,s=a[0];return Di(r,s,t.call(n,a[1],s,e),i)}))},r}function ko(e,t){var n=this,r=Go(e);return r._iter=e,r.size=e.size,r.reverse=function(){return e},e.flip&&(r.flip=function(){var t=To(e);return t.reverse=function(){return e.flip()},t}),r.get=function(n,r){return e.get(t?n:-1-n,r)},r.has=function(n){return e.has(t?n:-1-n)},r.includes=function(t){return e.includes(t)},r.cacheResult=qo,r.__iterate=function(n,r){var i=this,o=0;return r&&ri(e),e.__iterate((function(e,a){return n(e,t?a:r?i.size-++o:o++,i)}),!r)},r.__iterator=function(r,i){var o=0;i&&ri(e);var a=e.__iterator(2,!i);return new xi((function(){var e=a.next();if(e.done)return e;var s=e.value;return Di(r,t?s[0]:i?n.size-++o:o++,s[1],e)}))},r}function Oo(e,t,n,r){var i=Go(e);return r&&(i.has=function(r){var i=e.get(r,ei);return i!==ei&&!!t.call(n,i,r,e)},i.get=function(r,i){var o=e.get(r,ei);return o!==ei&&t.call(n,o,r,e)?o:i}),i.__iterateUncached=function(i,o){var a=this,s=0;return e.__iterate((function(e,o,c){if(t.call(n,e,o,c))return s++,i(e,r?o:s-1,a)}),o),s},i.__iteratorUncached=function(i,o){var a=e.__iterator(2,o),s=0;return new xi((function(){for(;;){var o=a.next();if(o.done)return o;var c=o.value,u=c[0],l=c[1];if(t.call(n,l,u,e))return Di(i,r?u:s++,l,o)}}))},i}function No(e,t,n,r){var i=e.size;if(ai(t,n,i))return e;var o=si(t,i),a=ci(n,i);if(o!=o||a!=a)return No(e.toSeq().cacheResult(),t,n,r);var s,c=a-o;c==c&&(s=c<0?0:c);var u=Go(e);return u.size=0===s?s:e.size&&s||void 0,!r&&wi(e)&&s>=0&&(u.get=function(t,n){return(t=ii(this,t))>=0&&t<s?e.get(t+o,n):n}),u.__iterateUncached=function(t,n){var i=this;if(0===s)return 0;if(n)return this.cacheResult().__iterate(t,n);var a=0,c=!0,u=0;return e.__iterate((function(e,n){if(!c||!(c=a++<o))return u++,!1!==t(e,r?n:u-1,i)&&u!==s})),u},u.__iteratorUncached=function(t,n){if(0!==s&&n)return this.cacheResult().__iterator(t,n);if(0===s)return new xi(Li);var i=e.__iterator(t,n),a=0,c=0;return new xi((function(){for(;a++<o;)i.next();if(++c>s)return{value:void 0,done:!0};var e=i.next();return r||1===t||e.done?e:Di(t,c-1,0===t?void 0:e.value[1],e)}))},u}function xo(e,t,n,r){var i=Go(e);return i.__iterateUncached=function(i,o){var a=this;if(o)return this.cacheResult().__iterate(i,o);var s=!0,c=0;return e.__iterate((function(e,o,u){if(!s||!(s=t.call(n,e,o,u)))return c++,i(e,r?o:c-1,a)})),c},i.__iteratorUncached=function(i,o){var a=this;if(o)return this.cacheResult().__iterator(i,o);var s=e.__iterator(2,o),c=!0,u=0;return new xi((function(){var e,o,l;do{if((e=s.next()).done)return r||1===i?e:Di(i,u++,0===i?void 0:e.value[1],e);var h=e.value;o=h[0],l=h[1],c&&(c=t.call(n,l,o,a))}while(c);return 2===i?e:Di(i,o,l,e)}))},i}function Do(e,t){var n=pi(e),r=[e].concat(t).map((function(e){return di(e)?n&&(e=yi(e)):e=n?Ji(e):Xi(Array.isArray(e)?e:[e]),e})).filter((function(e){return 0!==e.size}));if(0===r.length)return e;if(1===r.length){var i=r[0];if(i===e||n&&pi(i)||Ai(e)&&Ai(i))return i}var o=new Ki(r);return n?o=o.toKeyedSeq():Ai(e)||(o=o.toSetSeq()),(o=o.flatten(!0)).size=r.reduce((function(e,t){if(void 0!==e){var n=t.size;if(void 0!==n)return e+n}}),0),o}function Lo(e,t,n){var r=Go(e);return r.__iterateUncached=function(i,o){if(o)return this.cacheResult().__iterate(i,o);var a=0,s=!1;return function e(c,u){c.__iterate((function(o,c){return(!t||u<t)&&di(o)?e(o,u+1):(a++,!1===i(o,n?c:a-1,r)&&(s=!0)),!s}),o)}(e,0),a},r.__iteratorUncached=function(r,i){if(i)return this.cacheResult().__iterator(r,i);var o=e.__iterator(r,i),a=[],s=0;return new xi((function(){for(;o;){var e=o.next();if(!1===e.done){var c=e.value;if(2===r&&(c=c[1]),t&&!(a.length<t)||!di(c))return n?e:Di(r,s++,c,e);a.push(o),o=c.__iterator(r,i)}else o=a.pop()}return{value:void 0,done:!0}}))},r}function Po(e,t,n){t||(t=Vo);var r=pi(e),i=0,o=e.toSeq().map((function(t,r){return[r,t,i++,n?n(t,r,e):t]})).valueSeq().toArray();return o.sort((function(e,n){return t(e[3],n[3])||e[2]-n[2]})).forEach(r?function(e,t){o[t].length=2}:function(e,t){o[t]=e[1]}),r?Gi(o):Ai(e)?qi(o):Vi(o)}function Bo(e,t,n){if(t||(t=Vo),n){var r=e.toSeq().map((function(t,r){return[t,n(t,r,e)]})).reduce((function(e,n){return Mo(t,e[1],n[1])?n:e}));return r&&r[0]}return e.reduce((function(e,n){return Mo(t,e,n)?n:e}))}function Mo(e,t,n){var r=e(n,t);return 0===r&&n!==t&&(null==n||n!=n)||r>0}function jo(e,t,n,r){var i=Go(e),o=new Ki(n).map((function(e){return e.size}));return i.size=r?o.max():o.min(),i.__iterate=function(e,t){for(var n,r=this.__iterator(1,t),i=0;!(n=r.next()).done&&!1!==e(n.value,i++,this););return i},i.__iteratorUncached=function(e,i){var o=n.map((function(e){return e=mi(e),Mi(i?e.reverse():e)})),a=0,s=!1;return new xi((function(){var n;return s||(n=o.map((function(e){return e.next()})),s=r?n.every((function(e){return e.done})):n.some((function(e){return e.done}))),s?{value:void 0,done:!0}:Di(e,a++,t.apply(null,n.map((function(e){return e.value}))))}))},i}function Uo(e,t){return e===t?e:wi(e)?t:e.constructor(t)}function Fo(e){if(e!==Object(e))throw new TypeError("Expected [K, V] tuple: "+e)}function Qo(e){return pi(e)?yi:Ai(e)?bi:_i}function Go(e){return Object.create((pi(e)?Gi:Ai(e)?qi:Vi).prototype)}function qo(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):Qi.prototype.cacheResult.call(this)}function Vo(e,t){return void 0===e&&void 0===t?0:void 0===e?1:void 0===t?-1:e>t?1:e<t?-1:0}function Ko(e,t){t=t||0;for(var n=Math.max(0,e.length-t),r=new Array(n),i=0;i<n;i++)r[i]=e[i+t];return r}function Ho(e,t){if(!e)throw new Error(t)}function Wo(e){Ho(e!==1/0,"Cannot perform this action with an infinite size.")}function zo(e){if(Fi(e)&&"string"!=typeof e)return e;if(Ri(e))return e.toArray();throw new TypeError("Invalid keyPath: expected Ordered Collection or Array: "+e)}Io.prototype.cacheResult=wo.prototype.cacheResult=Co.prototype.cacheResult=So.prototype.cacheResult=qo;var Yo=Object.prototype.toString;function Jo(e){if(!e||"object"!=typeof e||"[object Object]"!==Yo.call(e))return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var n=t,r=Object.getPrototypeOf(t);null!==r;)n=r,r=Object.getPrototypeOf(n);return n===t}function Xo(e){return"object"==typeof e&&(Si(e)||Array.isArray(e)||Jo(e))}function Zo(e){try{return"string"==typeof e?JSON.stringify(e):String(e)}catch(t){return JSON.stringify(e)}}function $o(e,t){return Si(e)?e.has(t):Xo(e)&&Ui.call(e,t)}function ea(e,t,n){return Si(e)?e.get(t,n):$o(e,t)?"function"==typeof e.get?e.get(t):e[t]:n}function ta(e){if(Array.isArray(e))return Ko(e);var t={};for(var n in e)Ui.call(e,n)&&(t[n]=e[n]);return t}function na(e,t){if(!Xo(e))throw new TypeError("Cannot update non-data-structure value: "+e);if(Si(e)){if(!e.remove)throw new TypeError("Cannot update immutable value without .remove() method: "+e);return e.remove(t)}if(!Ui.call(e,t))return e;var n=ta(e);return Array.isArray(n)?n.splice(t,1):delete n[t],n}function ra(e,t,n){if(!Xo(e))throw new TypeError("Cannot update non-data-structure value: "+e);if(Si(e)){if(!e.set)throw new TypeError("Cannot update immutable value without .set() method: "+e);return e.set(t,n)}if(Ui.call(e,t)&&n===e[t])return e;var r=ta(e);return r[t]=n,r}function ia(e,t,n,r){r||(r=n,n=void 0);var i=oa(Si(e),e,zo(t),0,n,r);return i===ei?n:i}function oa(e,t,n,r,i,o){var a=t===ei;if(r===n.length){var s=a?i:t,c=o(s);return c===s?t:c}if(!a&&!Xo(t))throw new TypeError("Cannot update within non-data-structure value in path ["+n.slice(0,r).map(Zo)+"]: "+t);var u=n[r],l=a?ei:ea(t,u,ei),h=oa(l===ei?e:Si(l),l,n,r+1,i,o);return h===l?t:h===ei?na(t,u):ra(a?e?ja():{}:t,u,h)}function aa(e,t,n){return ia(e,t,ei,(function(){return n}))}function sa(e,t){return aa(this,e,t)}function ca(e,t){return ia(e,t,(function(){return ei}))}function ua(e){return ca(this,e)}function la(e,t,n,r){return ia(e,[t],n,r)}function ha(e,t,n){return 1===arguments.length?e(this):la(this,e,t,n)}function da(e,t,n){return ia(this,e,t,n)}function fa(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return ga(this,e)}function pa(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];if("function"!=typeof e)throw new TypeError("Invalid merger function: "+e);return ga(this,t,e)}function ga(e,t,n){for(var r=[],i=0;i<t.length;i++){var o=yi(t[i]);0!==o.size&&r.push(o)}return 0===r.length?e:0!==e.toSeq().size||e.__ownerID||1!==r.length?e.withMutations((function(e){for(var t=n?function(t,r){la(e,r,ei,(function(e){return e===ei?t:n(e,t,r)}))}:function(t,n){e.set(n,t)},i=0;i<r.length;i++)r[i].forEach(t)})):e.constructor(r[0])}function Aa(e,t,n){return va(e,t,function(e){function t(n,r,i){return Xo(n)&&Xo(r)&&(o=r,a=Qi(n),s=Qi(o),Ai(a)===Ai(s)&&pi(a)===pi(s))?va(n,[r],t):e?e(n,r,i):r;var o,a,s}return t}(n))}function va(e,t,n){if(!Xo(e))throw new TypeError("Cannot merge into non-data-structure value: "+e);if(Si(e))return"function"==typeof n&&e.mergeWith?e.mergeWith.apply(e,[n].concat(t)):e.merge?e.merge.apply(e,t):e.concat.apply(e,t);for(var r=Array.isArray(e),i=e,o=r?bi:yi,a=r?function(t){i===e&&(i=ta(i)),i.push(t)}:function(t,r){var o=Ui.call(i,r),a=o&&n?n(i[r],t,r):t;o&&a===i[r]||(i===e&&(i=ta(i)),i[r]=a)},s=0;s<t.length;s++)o(t[s]).forEach(a);return i}function ma(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return Aa(this,e)}function ya(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];return Aa(this,t,e)}function ba(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];return ia(this,e,ja(),(function(e){return va(e,t)}))}function _a(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];return ia(this,e,ja(),(function(e){return Aa(e,t)}))}function Ea(e){var t=this.asMutable();return e(t),t.wasAltered()?t.__ensureOwner(this.__ownerID):this}function wa(){return this.__ownerID?this:this.__ensureOwner(new ni)}function Ia(){return this.__ensureOwner()}function Ca(){return this.__altered}var Sa=function(e){function t(t){return null==t?ja():eo(t)&&!Ri(t)?t:ja().withMutations((function(n){var r=e(t);Wo(r.size),r.forEach((function(e,t){return n.set(t,e)}))}))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return ja().withMutations((function(t){for(var n=0;n<e.length;n+=2){if(n+1>=e.length)throw new Error("Missing value for key: "+e[n]);t.set(e[n],e[n+1])}}))},t.prototype.toString=function(){return this.__toString("Map {","}")},t.prototype.get=function(e,t){return this._root?this._root.get(0,void 0,e,t):t},t.prototype.set=function(e,t){return Ua(this,e,t)},t.prototype.remove=function(e){return Ua(this,e,ei)},t.prototype.deleteAll=function(e){var t=mi(e);return 0===t.size?this:this.withMutations((function(e){t.forEach((function(t){return e.remove(t)}))}))},t.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):ja()},t.prototype.sort=function(e){return ls(Po(this,e))},t.prototype.sortBy=function(e,t){return ls(Po(this,t,e))},t.prototype.map=function(e,t){var n=this;return this.withMutations((function(r){r.forEach((function(i,o){r.set(o,e.call(t,i,o,n))}))}))},t.prototype.__iterator=function(e,t){return new La(this,e,t)},t.prototype.__iterate=function(e,t){var n=this,r=0;return this._root&&this._root.iterate((function(t){return r++,e(t[1],t[0],n)}),t),r},t.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?Ma(this.size,this._root,e,this.__hash):0===this.size?ja():(this.__ownerID=e,this.__altered=!1,this)},t}(yi);Sa.isMap=eo;var Ta=Sa.prototype;Ta[$i]=!0,Ta.delete=Ta.remove,Ta.removeAll=Ta.deleteAll,Ta.setIn=sa,Ta.removeIn=Ta.deleteIn=ua,Ta.update=ha,Ta.updateIn=da,Ta.merge=Ta.concat=fa,Ta.mergeWith=pa,Ta.mergeDeep=ma,Ta.mergeDeepWith=ya,Ta.mergeIn=ba,Ta.mergeDeepIn=_a,Ta.withMutations=Ea,Ta.wasAltered=Ca,Ta.asImmutable=Ia,Ta["@@transducer/init"]=Ta.asMutable=wa,Ta["@@transducer/step"]=function(e,t){return e.set(t[0],t[1])},Ta["@@transducer/result"]=function(e){return e.asImmutable()};var Ra=function(e,t){this.ownerID=e,this.entries=t};Ra.prototype.get=function(e,t,n,r){for(var i=this.entries,o=0,a=i.length;o<a;o++)if(ro(n,i[o][0]))return i[o][1];return r},Ra.prototype.update=function(e,t,n,r,i,o,a){for(var s=i===ei,c=this.entries,u=0,l=c.length;u<l&&!ro(r,c[u][0]);u++);var h=u<l;if(h?c[u][1]===i:s)return this;if(ti(a),(s||!h)&&ti(o),!s||1!==c.length){if(!h&&!s&&c.length>=Ka)return function(e,t,n,r){e||(e=new ni);for(var i=new xa(e,so(n),[n,r]),o=0;o<t.length;o++){var a=t[o];i=i.update(e,0,void 0,a[0],a[1])}return i}(e,c,r,i);var d=e&&e===this.ownerID,f=d?c:Ko(c);return h?s?u===l-1?f.pop():f[u]=f.pop():f[u]=[r,i]:f.push([r,i]),d?(this.entries=f,this):new Ra(e,f)}};var ka=function(e,t,n){this.ownerID=e,this.bitmap=t,this.nodes=n};ka.prototype.get=function(e,t,n,r){void 0===t&&(t=so(n));var i=1<<((0===e?t:t>>>e)&$r),o=this.bitmap;return 0==(o&i)?r:this.nodes[qa(o&i-1)].get(e+5,t,n,r)},ka.prototype.update=function(e,t,n,r,i,o,a){void 0===n&&(n=so(r));var s=(0===t?n:n>>>t)&$r,c=1<<s,u=this.bitmap,l=0!=(u&c);if(!l&&i===ei)return this;var h=qa(u&c-1),d=this.nodes,f=l?d[h]:void 0,p=Fa(f,e,t+5,n,r,i,o,a);if(p===f)return this;if(!l&&p&&d.length>=Ha)return function(e,t,n,r,i){for(var o=0,a=new Array(Zr),s=0;0!==n;s++,n>>>=1)a[s]=1&n?t[o++]:void 0;return a[r]=i,new Oa(e,o+1,a)}(e,d,u,s,p);if(l&&!p&&2===d.length&&Qa(d[1^h]))return d[1^h];if(l&&p&&1===d.length&&Qa(p))return p;var g=e&&e===this.ownerID,A=l?p?u:u^c:u|c,v=l?p?Va(d,h,p,g):function(e,t,n){var r=e.length-1;if(n&&t===r)return e.pop(),e;for(var i=new Array(r),o=0,a=0;a<r;a++)a===t&&(o=1),i[a]=e[a+o];return i}(d,h,g):function(e,t,n,r){var i=e.length+1;if(r&&t+1===i)return e[t]=n,e;for(var o=new Array(i),a=0,s=0;s<i;s++)s===t?(o[s]=n,a=-1):o[s]=e[s+a];return o}(d,h,p,g);return g?(this.bitmap=A,this.nodes=v,this):new ka(e,A,v)};var Oa=function(e,t,n){this.ownerID=e,this.count=t,this.nodes=n};Oa.prototype.get=function(e,t,n,r){void 0===t&&(t=so(n));var i=(0===e?t:t>>>e)&$r,o=this.nodes[i];return o?o.get(e+5,t,n,r):r},Oa.prototype.update=function(e,t,n,r,i,o,a){void 0===n&&(n=so(r));var s=(0===t?n:n>>>t)&$r,c=i===ei,u=this.nodes,l=u[s];if(c&&!l)return this;var h=Fa(l,e,t+5,n,r,i,o,a);if(h===l)return this;var d=this.count;if(l){if(!h&&--d<Wa)return function(e,t,n,r){for(var i=0,o=0,a=new Array(n),s=0,c=1,u=t.length;s<u;s++,c<<=1){var l=t[s];void 0!==l&&s!==r&&(i|=c,a[o++]=l)}return new ka(e,i,a)}(e,u,d,s)}else d++;var f=e&&e===this.ownerID,p=Va(u,s,h,f);return f?(this.count=d,this.nodes=p,this):new Oa(e,d,p)};var Na=function(e,t,n){this.ownerID=e,this.keyHash=t,this.entries=n};Na.prototype.get=function(e,t,n,r){for(var i=this.entries,o=0,a=i.length;o<a;o++)if(ro(n,i[o][0]))return i[o][1];return r},Na.prototype.update=function(e,t,n,r,i,o,a){void 0===n&&(n=so(r));var s=i===ei;if(n!==this.keyHash)return s?this:(ti(a),ti(o),Ga(this,e,t,n,[r,i]));for(var c=this.entries,u=0,l=c.length;u<l&&!ro(r,c[u][0]);u++);var h=u<l;if(h?c[u][1]===i:s)return this;if(ti(a),(s||!h)&&ti(o),s&&2===l)return new xa(e,this.keyHash,c[1^u]);var d=e&&e===this.ownerID,f=d?c:Ko(c);return h?s?u===l-1?f.pop():f[u]=f.pop():f[u]=[r,i]:f.push([r,i]),d?(this.entries=f,this):new Na(e,this.keyHash,f)};var xa=function(e,t,n){this.ownerID=e,this.keyHash=t,this.entry=n};xa.prototype.get=function(e,t,n,r){return ro(n,this.entry[0])?this.entry[1]:r},xa.prototype.update=function(e,t,n,r,i,o,a){var s=i===ei,c=ro(r,this.entry[0]);return(c?i===this.entry[1]:s)?this:(ti(a),s?void ti(o):c?e&&e===this.ownerID?(this.entry[1]=i,this):new xa(e,this.keyHash,[r,i]):(ti(o),Ga(this,e,t,so(r),[r,i])))},Ra.prototype.iterate=Na.prototype.iterate=function(e,t){for(var n=this.entries,r=0,i=n.length-1;r<=i;r++)if(!1===e(n[t?i-r:r]))return!1},ka.prototype.iterate=Oa.prototype.iterate=function(e,t){for(var n=this.nodes,r=0,i=n.length-1;r<=i;r++){var o=n[t?i-r:r];if(o&&!1===o.iterate(e,t))return!1}},xa.prototype.iterate=function(e,t){return e(this.entry)};var Da,La=function(e){function t(e,t,n){this._type=t,this._reverse=n,this._stack=e._root&&Ba(e._root)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.next=function(){for(var e=this._type,t=this._stack;t;){var n=t.node,r=t.index++,i=void 0;if(n.entry){if(0===r)return Pa(e,n.entry)}else if(n.entries){if(r<=(i=n.entries.length-1))return Pa(e,n.entries[this._reverse?i-r:r])}else if(r<=(i=n.nodes.length-1)){var o=n.nodes[this._reverse?i-r:r];if(o){if(o.entry)return Pa(e,o.entry);t=this._stack=Ba(o,t)}continue}t=this._stack=this._stack.__prev}return{value:void 0,done:!0}},t}(xi);function Pa(e,t){return Di(e,t[0],t[1])}function Ba(e,t){return{node:e,index:0,__prev:t}}function Ma(e,t,n,r){var i=Object.create(Ta);return i.size=e,i._root=t,i.__ownerID=n,i.__hash=r,i.__altered=!1,i}function ja(){return Da||(Da=Ma(0))}function Ua(e,t,n){var r,i;if(e._root){var o={value:!1},a={value:!1};if(r=Fa(e._root,e.__ownerID,0,void 0,t,n,o,a),!a.value)return e;i=e.size+(o.value?n===ei?-1:1:0)}else{if(n===ei)return e;i=1,r=new Ra(e.__ownerID,[[t,n]])}return e.__ownerID?(e.size=i,e._root=r,e.__hash=void 0,e.__altered=!0,e):r?Ma(i,r):ja()}function Fa(e,t,n,r,i,o,a,s){return e?e.update(t,n,r,i,o,a,s):o===ei?e:(ti(s),ti(a),new xa(t,r,[i,o]))}function Qa(e){return e.constructor===xa||e.constructor===Na}function Ga(e,t,n,r,i){if(e.keyHash===r)return new Na(t,r,[e.entry,i]);var o,a=(0===n?e.keyHash:e.keyHash>>>n)&$r,s=(0===n?r:r>>>n)&$r,c=a===s?[Ga(e,t,n+5,r,i)]:(o=new xa(t,r,i),a<s?[e,o]:[o,e]);return new ka(t,1<<a|1<<s,c)}function qa(e){return e=(e=(858993459&(e-=e>>1&1431655765))+(e>>2&858993459))+(e>>4)&252645135,e+=e>>8,127&(e+=e>>16)}function Va(e,t,n,r){var i=r?e:Ko(e);return i[t]=n,i}var Ka=8,Ha=16,Wa=8,za="@@__IMMUTABLE_LIST__@@";function Ya(e){return Boolean(e&&e[za])}var Ja=function(e){function t(t){var n=rs();if(null==t)return n;if(Ya(t))return t;var r=e(t),i=r.size;return 0===i?n:(Wo(i),i>0&&i<Zr?ns(0,i,5,null,new Za(r.toArray())):n.withMutations((function(e){e.setSize(i),r.forEach((function(t,n){return e.set(n,t)}))})))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.prototype.toString=function(){return this.__toString("List [","]")},t.prototype.get=function(e,t){if((e=ii(this,e))>=0&&e<this.size){var n=as(this,e+=this._origin);return n&&n.array[e&$r]}return t},t.prototype.set=function(e,t){return function(e,t,n){if((t=ii(e,t))!=t)return e;if(t>=e.size||t<0)return e.withMutations((function(e){t<0?ss(e,t).set(0,n):ss(e,0,t+1).set(t,n)}));t+=e._origin;var r=e._tail,i=e._root,o={value:!1};t>=cs(e._capacity)?r=is(r,e.__ownerID,0,t,n,o):i=is(i,e.__ownerID,e._level,t,n,o);if(!o.value)return e;if(e.__ownerID)return e._root=i,e._tail=r,e.__hash=void 0,e.__altered=!0,e;return ns(e._origin,e._capacity,e._level,i,r)}(this,e,t)},t.prototype.remove=function(e){return this.has(e)?0===e?this.shift():e===this.size-1?this.pop():this.splice(e,1):this},t.prototype.insert=function(e,t){return this.splice(e,0,t)},t.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=5,this._root=this._tail=this.__hash=void 0,this.__altered=!0,this):rs()},t.prototype.push=function(){var e=arguments,t=this.size;return this.withMutations((function(n){ss(n,0,t+e.length);for(var r=0;r<e.length;r++)n.set(t+r,e[r])}))},t.prototype.pop=function(){return ss(this,0,-1)},t.prototype.unshift=function(){var e=arguments;return this.withMutations((function(t){ss(t,-e.length);for(var n=0;n<e.length;n++)t.set(n,e[n])}))},t.prototype.shift=function(){return ss(this,1)},t.prototype.concat=function(){for(var t=arguments,n=[],r=0;r<arguments.length;r++){var i=t[r],o=e("string"!=typeof i&&Pi(i)?i:[i]);0!==o.size&&n.push(o)}return 0===n.length?this:0!==this.size||this.__ownerID||1!==n.length?this.withMutations((function(e){n.forEach((function(t){return t.forEach((function(t){return e.push(t)}))}))})):this.constructor(n[0])},t.prototype.setSize=function(e){return ss(this,0,e)},t.prototype.map=function(e,t){var n=this;return this.withMutations((function(r){for(var i=0;i<n.size;i++)r.set(i,e.call(t,r.get(i),i,n))}))},t.prototype.slice=function(e,t){var n=this.size;return ai(e,t,n)?this:ss(this,si(e,n),ci(t,n))},t.prototype.__iterator=function(e,t){var n=t?this.size:0,r=ts(this,t);return new xi((function(){var i=r();return i===es?{value:void 0,done:!0}:Di(e,t?--n:n++,i)}))},t.prototype.__iterate=function(e,t){for(var n,r=t?this.size:0,i=ts(this,t);(n=i())!==es&&!1!==e(n,t?--r:r++,this););return r},t.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?ns(this._origin,this._capacity,this._level,this._root,this._tail,e,this.__hash):0===this.size?rs():(this.__ownerID=e,this.__altered=!1,this)},t}(bi);Ja.isList=Ya;var Xa=Ja.prototype;Xa[za]=!0,Xa.delete=Xa.remove,Xa.merge=Xa.concat,Xa.setIn=sa,Xa.deleteIn=Xa.removeIn=ua,Xa.update=ha,Xa.updateIn=da,Xa.mergeIn=ba,Xa.mergeDeepIn=_a,Xa.withMutations=Ea,Xa.wasAltered=Ca,Xa.asImmutable=Ia,Xa["@@transducer/init"]=Xa.asMutable=wa,Xa["@@transducer/step"]=function(e,t){return e.push(t)},Xa["@@transducer/result"]=function(e){return e.asImmutable()};var Za=function(e,t){this.array=e,this.ownerID=t};Za.prototype.removeBefore=function(e,t,n){if(n===t?1<<t:0===this.array.length)return this;var r=n>>>t&$r;if(r>=this.array.length)return new Za([],e);var i,o=0===r;if(t>0){var a=this.array[r];if((i=a&&a.removeBefore(e,t-5,n))===a&&o)return this}if(o&&!i)return this;var s=os(this,e);if(!o)for(var c=0;c<r;c++)s.array[c]=void 0;return i&&(s.array[r]=i),s},Za.prototype.removeAfter=function(e,t,n){if(n===(t?1<<t:0)||0===this.array.length)return this;var r,i=n-1>>>t&$r;if(i>=this.array.length)return this;if(t>0){var o=this.array[i];if((r=o&&o.removeAfter(e,t-5,n))===o&&i===this.array.length-1)return this}var a=os(this,e);return a.array.splice(i+1),r&&(a.array[i]=r),a};var $a,es={};function ts(e,t){var n=e._origin,r=e._capacity,i=cs(r),o=e._tail;return a(e._root,e._level,0);function a(e,s,c){return 0===s?function(e,a){var s=a===i?o&&o.array:e&&e.array,c=a>n?0:n-a,u=r-a;u>Zr&&(u=Zr);return function(){if(c===u)return es;var e=t?--u:c++;return s&&s[e]}}(e,c):function(e,i,o){var s,c=e&&e.array,u=o>n?0:n-o>>i,l=1+(r-o>>i);l>Zr&&(l=Zr);return function(){for(;;){if(s){var e=s();if(e!==es)return e;s=null}if(u===l)return es;var n=t?--l:u++;s=a(c&&c[n],i-5,o+(n<<i))}}}(e,s,c)}}function ns(e,t,n,r,i,o,a){var s=Object.create(Xa);return s.size=t-e,s._origin=e,s._capacity=t,s._level=n,s._root=r,s._tail=i,s.__ownerID=o,s.__hash=a,s.__altered=!1,s}function rs(){return $a||($a=ns(0,0,5))}function is(e,t,n,r,i,o){var a,s=r>>>n&$r,c=e&&s<e.array.length;if(!c&&void 0===i)return e;if(n>0){var u=e&&e.array[s],l=is(u,t,n-5,r,i,o);return l===u?e:((a=os(e,t)).array[s]=l,a)}return c&&e.array[s]===i?e:(o&&ti(o),a=os(e,t),void 0===i&&s===a.array.length-1?a.array.pop():a.array[s]=i,a)}function os(e,t){return t&&e&&t===e.ownerID?e:new Za(e?e.array.slice():[],t)}function as(e,t){if(t>=cs(e._capacity))return e._tail;if(t<1<<e._level+5){for(var n=e._root,r=e._level;n&&r>0;)n=n.array[t>>>r&$r],r-=5;return n}}function ss(e,t,n){void 0!==t&&(t|=0),void 0!==n&&(n|=0);var r=e.__ownerID||new ni,i=e._origin,o=e._capacity,a=i+t,s=void 0===n?o:n<0?o+n:i+n;if(a===i&&s===o)return e;if(a>=s)return e.clear();for(var c=e._level,u=e._root,l=0;a+l<0;)u=new Za(u&&u.array.length?[void 0,u]:[],r),l+=1<<(c+=5);l&&(a+=l,i+=l,s+=l,o+=l);for(var h=cs(o),d=cs(s);d>=1<<c+5;)u=new Za(u&&u.array.length?[u]:[],r),c+=5;var f=e._tail,p=d<h?as(e,s-1):d>h?new Za([],r):f;if(f&&d>h&&a<o&&f.array.length){for(var g=u=os(u,r),A=c;A>5;A-=5){var v=h>>>A&$r;g=g.array[v]=os(g.array[v],r)}g.array[h>>>5&$r]=f}if(s<o&&(p=p&&p.removeAfter(r,0,s)),a>=d)a-=d,s-=d,c=5,u=null,p=p&&p.removeBefore(r,0,a);else if(a>i||d<h){for(l=0;u;){var m=a>>>c&$r;if(m!==d>>>c&$r)break;m&&(l+=(1<<c)*m),c-=5,u=u.array[m]}u&&a>i&&(u=u.removeBefore(r,c,a-l)),u&&d<h&&(u=u.removeAfter(r,c,d-l)),l&&(a-=l,s-=l)}return e.__ownerID?(e.size=s-a,e._origin=a,e._capacity=s,e._level=c,e._root=u,e._tail=p,e.__hash=void 0,e.__altered=!0,e):ns(a,s,c,u,p)}function cs(e){return e<Zr?0:e-1>>>5<<5}var us,ls=function(e){function t(e){return null==e?ds():to(e)?e:ds().withMutations((function(t){var n=yi(e);Wo(n.size),n.forEach((function(e,n){return t.set(n,e)}))}))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.prototype.toString=function(){return this.__toString("OrderedMap {","}")},t.prototype.get=function(e,t){var n=this._map.get(e);return void 0!==n?this._list.get(n)[1]:t},t.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this.__altered=!0,this):ds()},t.prototype.set=function(e,t){return fs(this,e,t)},t.prototype.remove=function(e){return fs(this,e,ei)},t.prototype.__iterate=function(e,t){var n=this;return this._list.__iterate((function(t){return t&&e(t[1],t[0],n)}),t)},t.prototype.__iterator=function(e,t){return this._list.fromEntrySeq().__iterator(e,t)},t.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e),n=this._list.__ensureOwner(e);return e?hs(t,n,e,this.__hash):0===this.size?ds():(this.__ownerID=e,this.__altered=!1,this._map=t,this._list=n,this)},t}(Sa);function hs(e,t,n,r){var i=Object.create(ls.prototype);return i.size=e?e.size:0,i._map=e,i._list=t,i.__ownerID=n,i.__hash=r,i.__altered=!1,i}function ds(){return us||(us=hs(ja(),rs()))}function fs(e,t,n){var r,i,o=e._map,a=e._list,s=o.get(t),c=void 0!==s;if(n===ei){if(!c)return e;a.size>=Zr&&a.size>=2*o.size?(r=(i=a.filter((function(e,t){return void 0!==e&&s!==t}))).toKeyedSeq().map((function(e){return e[0]})).flip().toMap(),e.__ownerID&&(r.__ownerID=i.__ownerID=e.__ownerID)):(r=o.remove(t),i=s===a.size-1?a.pop():a.set(s,void 0))}else if(c){if(n===a.get(s)[1])return e;r=o,i=a.set(s,[t,n])}else r=o.set(t,a.size),i=a.set(a.size,[t,n]);return e.__ownerID?(e.size=r.size,e._map=r,e._list=i,e.__hash=void 0,e.__altered=!0,e):hs(r,i)}ls.isOrderedMap=to,ls.prototype[Ti]=!0,ls.prototype.delete=ls.prototype.remove;var ps="@@__IMMUTABLE_STACK__@@";function gs(e){return Boolean(e&&e[ps])}var As=function(e){function t(e){return null==e?bs():gs(e)?e:bs().pushAll(e)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.prototype.toString=function(){return this.__toString("Stack [","]")},t.prototype.get=function(e,t){var n=this._head;for(e=ii(this,e);n&&e--;)n=n.next;return n?n.value:t},t.prototype.peek=function(){return this._head&&this._head.value},t.prototype.push=function(){var e=arguments;if(0===arguments.length)return this;for(var t=this.size+arguments.length,n=this._head,r=arguments.length-1;r>=0;r--)n={value:e[r],next:n};return this.__ownerID?(this.size=t,this._head=n,this.__hash=void 0,this.__altered=!0,this):ys(t,n)},t.prototype.pushAll=function(t){if(0===(t=e(t)).size)return this;if(0===this.size&&gs(t))return t;Wo(t.size);var n=this.size,r=this._head;return t.__iterate((function(e){n++,r={value:e,next:r}}),!0),this.__ownerID?(this.size=n,this._head=r,this.__hash=void 0,this.__altered=!0,this):ys(n,r)},t.prototype.pop=function(){return this.slice(1)},t.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):bs()},t.prototype.slice=function(t,n){if(ai(t,n,this.size))return this;var r=si(t,this.size);if(ci(n,this.size)!==this.size)return e.prototype.slice.call(this,t,n);for(var i=this.size-r,o=this._head;r--;)o=o.next;return this.__ownerID?(this.size=i,this._head=o,this.__hash=void 0,this.__altered=!0,this):ys(i,o)},t.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?ys(this.size,this._head,e,this.__hash):0===this.size?bs():(this.__ownerID=e,this.__altered=!1,this)},t.prototype.__iterate=function(e,t){var n=this;if(t)return new Ki(this.toArray()).__iterate((function(t,r){return e(t,r,n)}),t);for(var r=0,i=this._head;i&&!1!==e(i.value,r++,this);)i=i.next;return r},t.prototype.__iterator=function(e,t){if(t)return new Ki(this.toArray()).__iterator(e,t);var n=0,r=this._head;return new xi((function(){if(r){var t=r.value;return r=r.next,Di(e,n++,t)}return{value:void 0,done:!0}}))},t}(bi);As.isStack=gs;var vs,ms=As.prototype;function ys(e,t,n,r){var i=Object.create(ms);return i.size=e,i._head=t,i.__ownerID=n,i.__hash=r,i.__altered=!1,i}function bs(){return vs||(vs=ys(0))}ms[ps]=!0,ms.shift=ms.pop,ms.unshift=ms.push,ms.unshiftAll=ms.pushAll,ms.withMutations=Ea,ms.wasAltered=Ca,ms.asImmutable=Ia,ms["@@transducer/init"]=ms.asMutable=wa,ms["@@transducer/step"]=function(e,t){return e.unshift(t)},ms["@@transducer/result"]=function(e){return e.asImmutable()};var _s="@@__IMMUTABLE_SET__@@";function Es(e){return Boolean(e&&e[_s])}function ws(e){return Es(e)&&Ri(e)}function Is(e,t){if(e===t)return!0;if(!di(t)||void 0!==e.size&&void 0!==t.size&&e.size!==t.size||void 0!==e.__hash&&void 0!==t.__hash&&e.__hash!==t.__hash||pi(e)!==pi(t)||Ai(e)!==Ai(t)||Ri(e)!==Ri(t))return!1;if(0===e.size&&0===t.size)return!0;var n=!vi(e);if(Ri(e)){var r=e.entries();return t.every((function(e,t){var i=r.next().value;return i&&ro(i[1],e)&&(n||ro(i[0],t))}))&&r.next().done}var i=!1;if(void 0===e.size)if(void 0===t.size)"function"==typeof e.cacheResult&&e.cacheResult();else{i=!0;var o=e;e=t,t=o}var a=!0,s=t.__iterate((function(t,r){if(n?!e.has(t):i?!ro(t,e.get(r,ei)):!ro(e.get(r,ei),t))return a=!1,!1}));return a&&e.size===s}function Cs(e,t){var n=function(n){e.prototype[n]=t[n]};return Object.keys(t).forEach(n),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach(n),e}function Ss(e){if(!e||"object"!=typeof e)return e;if(!di(e)){if(!Xo(e))return e;e=Qi(e)}if(pi(e)){var t={};return e.__iterate((function(e,n){t[n]=Ss(e)})),t}var n=[];return e.__iterate((function(e){n.push(Ss(e))})),n}var Ts=function(e){function t(t){return null==t?xs():Es(t)&&!Ri(t)?t:xs().withMutations((function(n){var r=e(t);Wo(r.size),r.forEach((function(e){return n.add(e)}))}))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.fromKeys=function(e){return this(yi(e).keySeq())},t.intersect=function(e){return(e=mi(e).toArray()).length?ks.intersect.apply(t(e.pop()),e):xs()},t.union=function(e){return(e=mi(e).toArray()).length?ks.union.apply(t(e.pop()),e):xs()},t.prototype.toString=function(){return this.__toString("Set {","}")},t.prototype.has=function(e){return this._map.has(e)},t.prototype.add=function(e){return Os(this,this._map.set(e,e))},t.prototype.remove=function(e){return Os(this,this._map.remove(e))},t.prototype.clear=function(){return Os(this,this._map.clear())},t.prototype.map=function(e,t){var n=this,r=!1,i=Os(this,this._map.mapEntries((function(i){var o=i[1],a=e.call(t,o,o,n);return a!==o&&(r=!0),[a,a]}),t));return r?i:this},t.prototype.union=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return 0===(t=t.filter((function(e){return 0!==e.size}))).length?this:0!==this.size||this.__ownerID||1!==t.length?this.withMutations((function(n){for(var r=0;r<t.length;r++)e(t[r]).forEach((function(e){return n.add(e)}))})):this.constructor(t[0])},t.prototype.intersect=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];if(0===t.length)return this;t=t.map((function(t){return e(t)}));var r=[];return this.forEach((function(e){t.every((function(t){return t.includes(e)}))||r.push(e)})),this.withMutations((function(e){r.forEach((function(t){e.remove(t)}))}))},t.prototype.subtract=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];if(0===t.length)return this;t=t.map((function(t){return e(t)}));var r=[];return this.forEach((function(e){t.some((function(t){return t.includes(e)}))&&r.push(e)})),this.withMutations((function(e){r.forEach((function(t){e.remove(t)}))}))},t.prototype.sort=function(e){return Xs(Po(this,e))},t.prototype.sortBy=function(e,t){return Xs(Po(this,t,e))},t.prototype.wasAltered=function(){return this._map.wasAltered()},t.prototype.__iterate=function(e,t){var n=this;return this._map.__iterate((function(t){return e(t,t,n)}),t)},t.prototype.__iterator=function(e,t){return this._map.__iterator(e,t)},t.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e);return e?this.__make(t,e):0===this.size?this.__empty():(this.__ownerID=e,this._map=t,this)},t}(_i);Ts.isSet=Es;var Rs,ks=Ts.prototype;function Os(e,t){return e.__ownerID?(e.size=t.size,e._map=t,e):t===e._map?e:0===t.size?e.__empty():e.__make(t)}function Ns(e,t){var n=Object.create(ks);return n.size=e?e.size:0,n._map=e,n.__ownerID=t,n}function xs(){return Rs||(Rs=Ns(ja()))}ks[_s]=!0,ks.delete=ks.remove,ks.merge=ks.concat=ks.union,ks.withMutations=Ea,ks.asImmutable=Ia,ks["@@transducer/init"]=ks.asMutable=wa,ks["@@transducer/step"]=function(e,t){return e.add(t)},ks["@@transducer/result"]=function(e){return e.asImmutable()},ks.__empty=xs,ks.__make=Ns;var Ds,Ls=function(e){function t(e,n,r){if(!(this instanceof t))return new t(e,n,r);if(Ho(0!==r,"Cannot step a Range by 0"),e=e||0,void 0===n&&(n=1/0),r=void 0===r?1:Math.abs(r),n<e&&(r=-r),this._start=e,this._end=n,this._step=r,this.size=Math.max(0,Math.ceil((n-e)/r-1)+1),0===this.size){if(Ds)return Ds;Ds=this}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},t.prototype.get=function(e,t){return this.has(e)?this._start+ii(this,e)*this._step:t},t.prototype.includes=function(e){var t=(e-this._start)/this._step;return t>=0&&t<this.size&&t===Math.floor(t)},t.prototype.slice=function(e,n){return ai(e,n,this.size)?this:(e=si(e,this.size),(n=ci(n,this.size))<=e?new t(0,0):new t(this.get(e,this._end),this.get(n,this._end),this._step))},t.prototype.indexOf=function(e){var t=e-this._start;if(t%this._step==0){var n=t/this._step;if(n>=0&&n<this.size)return n}return-1},t.prototype.lastIndexOf=function(e){return this.indexOf(e)},t.prototype.__iterate=function(e,t){for(var n=this.size,r=this._step,i=t?this._start+(n-1)*r:this._start,o=0;o!==n&&!1!==e(i,t?n-++o:o++,this);)i+=t?-r:r;return o},t.prototype.__iterator=function(e,t){var n=this.size,r=this._step,i=t?this._start+(n-1)*r:this._start,o=0;return new xi((function(){if(o===n)return{value:void 0,done:!0};var a=i;return i+=t?-r:r,Di(e,t?n-++o:o++,a)}))},t.prototype.equals=function(e){return e instanceof t?this._start===e._start&&this._end===e._end&&this._step===e._step:Is(this,e)},t}(qi);function Ps(e,t,n){for(var r=zo(t),i=0;i!==r.length;)if((e=ea(e,r[i++],ei))===ei)return n;return e}function Bs(e,t){return Ps(this,e,t)}function Ms(e,t){return Ps(e,t,ei)!==ei}function js(){Wo(this.size);var e={};return this.__iterate((function(t,n){e[n]=t})),e}mi.isIterable=di,mi.isKeyed=pi,mi.isIndexed=Ai,mi.isAssociative=vi,mi.isOrdered=Ri,mi.Iterator=xi,Cs(mi,{toArray:function(){Wo(this.size);var e=new Array(this.size||0),t=pi(this),n=0;return this.__iterate((function(r,i){e[n++]=t?[i,r]:r})),e},toIndexedSeq:function(){return new Io(this)},toJS:function(){return Ss(this)},toKeyedSeq:function(){return new wo(this,!0)},toMap:function(){return Sa(this.toKeyedSeq())},toObject:js,toOrderedMap:function(){return ls(this.toKeyedSeq())},toOrderedSet:function(){return Xs(pi(this)?this.valueSeq():this)},toSet:function(){return Ts(pi(this)?this.valueSeq():this)},toSetSeq:function(){return new Co(this)},toSeq:function(){return Ai(this)?this.toIndexedSeq():pi(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return As(pi(this)?this.valueSeq():this)},toList:function(){return Ja(pi(this)?this.valueSeq():this)},toString:function(){return"[Collection]"},__toString:function(e,t){return 0===this.size?e+t:e+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+t},concat:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return Uo(this,Do(this,e))},includes:function(e){return this.some((function(t){return ro(t,e)}))},entries:function(){return this.__iterator(2)},every:function(e,t){Wo(this.size);var n=!0;return this.__iterate((function(r,i,o){if(!e.call(t,r,i,o))return n=!1,!1})),n},filter:function(e,t){return Uo(this,Oo(this,e,t,!0))},find:function(e,t,n){var r=this.findEntry(e,t);return r?r[1]:n},forEach:function(e,t){return Wo(this.size),this.__iterate(t?e.bind(t):e)},join:function(e){Wo(this.size),e=void 0!==e?""+e:",";var t="",n=!0;return this.__iterate((function(r){n?n=!1:t+=e,t+=null!=r?r.toString():""})),t},keys:function(){return this.__iterator(0)},map:function(e,t){return Uo(this,Ro(this,e,t))},reduce:function(e,t,n){return qs(this,e,t,n,arguments.length<2,!1)},reduceRight:function(e,t,n){return qs(this,e,t,n,arguments.length<2,!0)},reverse:function(){return Uo(this,ko(this,!0))},slice:function(e,t){return Uo(this,No(this,e,t,!0))},some:function(e,t){return!this.every(Hs(e),t)},sort:function(e){return Uo(this,Po(this,e))},values:function(){return this.__iterator(1)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some((function(){return!0}))},count:function(e,t){return ri(e?this.toSeq().filter(e,t):this)},countBy:function(e,t){return function(e,t,n){var r=Sa().asMutable();return e.__iterate((function(i,o){r.update(t.call(n,i,o,e),0,(function(e){return e+1}))})),r.asImmutable()}(this,e,t)},equals:function(e){return Is(this,e)},entrySeq:function(){var e=this;if(e._cache)return new Ki(e._cache);var t=e.toSeq().map(Ks).toIndexedSeq();return t.fromEntrySeq=function(){return e.toSeq()},t},filterNot:function(e,t){return this.filter(Hs(e),t)},findEntry:function(e,t,n){var r=n;return this.__iterate((function(n,i,o){if(e.call(t,n,i,o))return r=[i,n],!1})),r},findKey:function(e,t){var n=this.findEntry(e,t);return n&&n[0]},findLast:function(e,t,n){return this.toKeyedSeq().reverse().find(e,t,n)},findLastEntry:function(e,t,n){return this.toKeyedSeq().reverse().findEntry(e,t,n)},findLastKey:function(e,t){return this.toKeyedSeq().reverse().findKey(e,t)},first:function(e){return this.find(oi,null,e)},flatMap:function(e,t){return Uo(this,function(e,t,n){var r=Qo(e);return e.toSeq().map((function(i,o){return r(t.call(n,i,o,e))})).flatten(!0)}(this,e,t))},flatten:function(e){return Uo(this,Lo(this,e,!0))},fromEntrySeq:function(){return new So(this)},get:function(e,t){return this.find((function(t,n){return ro(n,e)}),void 0,t)},getIn:Bs,groupBy:function(e,t){return function(e,t,n){var r=pi(e),i=(Ri(e)?ls():Sa()).asMutable();e.__iterate((function(o,a){i.update(t.call(n,o,a,e),(function(e){return(e=e||[]).push(r?[a,o]:o),e}))}));var o=Qo(e);return i.map((function(t){return Uo(e,o(t))})).asImmutable()}(this,e,t)},has:function(e){return this.get(e,ei)!==ei},hasIn:function(e){return Ms(this,e)},isSubset:function(e){return e="function"==typeof e.includes?e:mi(e),this.every((function(t){return e.includes(t)}))},isSuperset:function(e){return(e="function"==typeof e.isSubset?e:mi(e)).isSubset(this)},keyOf:function(e){return this.findKey((function(t){return ro(t,e)}))},keySeq:function(){return this.toSeq().map(Vs).toIndexedSeq()},last:function(e){return this.toSeq().reverse().first(e)},lastKeyOf:function(e){return this.toKeyedSeq().reverse().keyOf(e)},max:function(e){return Bo(this,e)},maxBy:function(e,t){return Bo(this,t,e)},min:function(e){return Bo(this,e?Ws(e):Ys)},minBy:function(e,t){return Bo(this,t?Ws(t):Ys,e)},rest:function(){return this.slice(1)},skip:function(e){return 0===e?this:this.slice(Math.max(0,e))},skipLast:function(e){return 0===e?this:this.slice(0,-Math.max(0,e))},skipWhile:function(e,t){return Uo(this,xo(this,e,t,!0))},skipUntil:function(e,t){return this.skipWhile(Hs(e),t)},sortBy:function(e,t){return Uo(this,Po(this,t,e))},take:function(e){return this.slice(0,Math.max(0,e))},takeLast:function(e){return this.slice(-Math.max(0,e))},takeWhile:function(e,t){return Uo(this,function(e,t,n){var r=Go(e);return r.__iterateUncached=function(r,i){var o=this;if(i)return this.cacheResult().__iterate(r,i);var a=0;return e.__iterate((function(e,i,s){return t.call(n,e,i,s)&&++a&&r(e,i,o)})),a},r.__iteratorUncached=function(r,i){var o=this;if(i)return this.cacheResult().__iterator(r,i);var a=e.__iterator(2,i),s=!0;return new xi((function(){if(!s)return{value:void 0,done:!0};var e=a.next();if(e.done)return e;var i=e.value,c=i[0],u=i[1];return t.call(n,u,c,o)?2===r?e:Di(r,c,u,e):(s=!1,{value:void 0,done:!0})}))},r}(this,e,t))},takeUntil:function(e,t){return this.takeWhile(Hs(e),t)},update:function(e){return e(this)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=function(e){if(e.size===1/0)return 0;var t=Ri(e),n=pi(e),r=t?1:0;return function(e,t){return t=io(t,3432918353),t=io(t<<15|t>>>-15,461845907),t=io(t<<13|t>>>-13,5),t=io((t=(t+3864292196|0)^e)^t>>>16,2246822507),t=oo((t=io(t^t>>>13,3266489909))^t>>>16)}(e.__iterate(n?t?function(e,t){r=31*r+Js(so(e),so(t))|0}:function(e,t){r=r+Js(so(e),so(t))|0}:t?function(e){r=31*r+so(e)|0}:function(e){r=r+so(e)|0}),r)}(this))}});var Us=mi.prototype;Us[hi]=!0,Us[Ni]=Us.values,Us.toJSON=Us.toArray,Us.__toStringMapper=Zo,Us.inspect=Us.toSource=function(){return this.toString()},Us.chain=Us.flatMap,Us.contains=Us.includes,Cs(yi,{flip:function(){return Uo(this,To(this))},mapEntries:function(e,t){var n=this,r=0;return Uo(this,this.toSeq().map((function(i,o){return e.call(t,[o,i],r++,n)})).fromEntrySeq())},mapKeys:function(e,t){var n=this;return Uo(this,this.toSeq().flip().map((function(r,i){return e.call(t,r,i,n)})).flip())}});var Fs=yi.prototype;Fs[fi]=!0,Fs[Ni]=Us.entries,Fs.toJSON=js,Fs.__toStringMapper=function(e,t){return Zo(t)+": "+Zo(e)},Cs(bi,{toKeyedSeq:function(){return new wo(this,!1)},filter:function(e,t){return Uo(this,Oo(this,e,t,!1))},findIndex:function(e,t){var n=this.findEntry(e,t);return n?n[0]:-1},indexOf:function(e){var t=this.keyOf(e);return void 0===t?-1:t},lastIndexOf:function(e){var t=this.lastKeyOf(e);return void 0===t?-1:t},reverse:function(){return Uo(this,ko(this,!1))},slice:function(e,t){return Uo(this,No(this,e,t,!1))},splice:function(e,t){var n=arguments.length;if(t=Math.max(t||0,0),0===n||2===n&&!t)return this;e=si(e,e<0?this.count():this.size);var r=this.slice(0,e);return Uo(this,1===n?r:r.concat(Ko(arguments,2),this.slice(e+t)))},findLastIndex:function(e,t){var n=this.findLastEntry(e,t);return n?n[0]:-1},first:function(e){return this.get(0,e)},flatten:function(e){return Uo(this,Lo(this,e,!1))},get:function(e,t){return(e=ii(this,e))<0||this.size===1/0||void 0!==this.size&&e>this.size?t:this.find((function(t,n){return n===e}),void 0,t)},has:function(e){return(e=ii(this,e))>=0&&(void 0!==this.size?this.size===1/0||e<this.size:-1!==this.indexOf(e))},interpose:function(e){return Uo(this,function(e,t){var n=Go(e);return n.size=e.size&&2*e.size-1,n.__iterateUncached=function(n,r){var i=this,o=0;return e.__iterate((function(e){return(!o||!1!==n(t,o++,i))&&!1!==n(e,o++,i)}),r),o},n.__iteratorUncached=function(n,r){var i,o=e.__iterator(1,r),a=0;return new xi((function(){return(!i||a%2)&&(i=o.next()).done?i:a%2?Di(n,a++,t):Di(n,a++,i.value,i)}))},n}(this,e))},interleave:function(){var e=[this].concat(Ko(arguments)),t=jo(this.toSeq(),qi.of,e),n=t.flatten(!0);return t.size&&(n.size=t.size*e.length),Uo(this,n)},keySeq:function(){return Ls(0,this.size)},last:function(e){return this.get(-1,e)},skipWhile:function(e,t){return Uo(this,xo(this,e,t,!1))},zip:function(){var e=[this].concat(Ko(arguments));return Uo(this,jo(this,zs,e))},zipAll:function(){var e=[this].concat(Ko(arguments));return Uo(this,jo(this,zs,e,!0))},zipWith:function(e){var t=Ko(arguments);return t[0]=this,Uo(this,jo(this,e,t))}});var Qs=bi.prototype;Qs[gi]=!0,Qs[Ti]=!0,Cs(_i,{get:function(e,t){return this.has(e)?e:t},includes:function(e){return this.has(e)},keySeq:function(){return this.valueSeq()}});var Gs=_i.prototype;function qs(e,t,n,r,i,o){return Wo(e.size),e.__iterate((function(e,o,a){i?(i=!1,n=e):n=t.call(r,n,e,o,a)}),o),n}function Vs(e,t){return t}function Ks(e,t){return[t,e]}function Hs(e){return function(){return!e.apply(this,arguments)}}function Ws(e){return function(){return-e.apply(this,arguments)}}function zs(){return Ko(arguments)}function Ys(e,t){return e<t?1:e>t?-1:0}function Js(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}Gs.has=Us.includes,Gs.contains=Gs.includes,Gs.keys=Gs.values,Cs(Gi,Fs),Cs(qi,Qs),Cs(Vi,Gs);var Xs=function(e){function t(e){return null==e?tc():ws(e)?e:tc().withMutations((function(t){var n=_i(e);Wo(n.size),n.forEach((function(e){return t.add(e)}))}))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.fromKeys=function(e){return this(yi(e).keySeq())},t.prototype.toString=function(){return this.__toString("OrderedSet {","}")},t}(Ts);Xs.isOrderedSet=ws;var Zs,$s=Xs.prototype;function ec(e,t){var n=Object.create($s);return n.size=e?e.size:0,n._map=e,n.__ownerID=t,n}function tc(){return Zs||(Zs=ec(ds()))}$s[Ti]=!0,$s.zip=Qs.zip,$s.zipWith=Qs.zipWith,$s.zipAll=Qs.zipAll,$s.__empty=tc,$s.__make=ec;var nc=function(e,t){var n;!function(e){if(Ci(e))throw new Error("Can not call `Record` with an immutable Record as default values. Use a plain javascript object instead.");if(Si(e))throw new Error("Can not call `Record` with an immutable Collection as default values. Use a plain javascript object instead.");if(null===e||"object"!=typeof e)throw new Error("Can not call `Record` with a non-object as default values. Use a plain javascript object instead.")}(e);var r=function(o){var a=this;if(o instanceof r)return o;if(!(this instanceof r))return new r(o);if(!n){n=!0;var s=Object.keys(e),c=i._indices={};i._name=t,i._keys=s,i._defaultValues=e;for(var u=0;u<s.length;u++){var l=s[u];c[l]=u,i[l]?"object"==typeof console&&console.warn&&console.warn("Cannot define "+oc(this)+' with property "'+l+'" since that property name is part of the Record API.'):sc(i,l)}}return this.__ownerID=void 0,this._values=Ja().withMutations((function(e){e.setSize(a._keys.length),yi(o).forEach((function(t,n){e.set(a._indices[n],t===a._defaultValues[n]?void 0:t)}))})),this},i=r.prototype=Object.create(rc);return i.constructor=r,t&&(r.displayName=t),r};nc.prototype.toString=function(){for(var e,t=oc(this)+" { ",n=this._keys,r=0,i=n.length;r!==i;r++)t+=(r?", ":"")+(e=n[r])+": "+Zo(this.get(e));return t+" }"},nc.prototype.equals=function(e){return this===e||e&&ac(this).equals(ac(e))},nc.prototype.hashCode=function(){return ac(this).hashCode()},nc.prototype.has=function(e){return this._indices.hasOwnProperty(e)},nc.prototype.get=function(e,t){if(!this.has(e))return t;var n=this._indices[e],r=this._values.get(n);return void 0===r?this._defaultValues[e]:r},nc.prototype.set=function(e,t){if(this.has(e)){var n=this._values.set(this._indices[e],t===this._defaultValues[e]?void 0:t);if(n!==this._values&&!this.__ownerID)return ic(this,n)}return this},nc.prototype.remove=function(e){return this.set(e)},nc.prototype.clear=function(){var e=this._values.clear().setSize(this._keys.length);return this.__ownerID?this:ic(this,e)},nc.prototype.wasAltered=function(){return this._values.wasAltered()},nc.prototype.toSeq=function(){return ac(this)},nc.prototype.toJS=function(){return Ss(this)},nc.prototype.entries=function(){return this.__iterator(2)},nc.prototype.__iterator=function(e,t){return ac(this).__iterator(e,t)},nc.prototype.__iterate=function(e,t){return ac(this).__iterate(e,t)},nc.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._values.__ensureOwner(e);return e?ic(this,t,e):(this.__ownerID=e,this._values=t,this)},nc.isRecord=Ci,nc.getDescriptiveName=oc;var rc=nc.prototype;function ic(e,t,n){var r=Object.create(Object.getPrototypeOf(e));return r._values=t,r.__ownerID=n,r}function oc(e){return e.constructor.displayName||e.constructor.name||"Record"}function ac(e){return Ji(e._keys.map((function(t){return[t,e.get(t)]})))}function sc(e,t){try{Object.defineProperty(e,t,{get:function(){return this.get(t)},set:function(e){Ho(this.__ownerID,"Cannot set on an immutable record."),this.set(t,e)}})}catch(e){}}rc[Ii]=!0,rc.delete=rc.remove,rc.deleteIn=rc.removeIn=ua,rc.getIn=Bs,rc.hasIn=Us.hasIn,rc.merge=fa,rc.mergeWith=pa,rc.mergeIn=ba,rc.mergeDeep=ma,rc.mergeDeepWith=ya,rc.mergeDeepIn=_a,rc.setIn=sa,rc.update=ha,rc.updateIn=da,rc.withMutations=Ea,rc.asMutable=wa,rc.asImmutable=Ia,rc[Ni]=rc.entries,rc.toJSON=rc.toObject=Us.toObject,rc.inspect=rc.toSource=function(){return this.toString()};var cc,uc=function(e){function t(e,n){if(!(this instanceof t))return new t(e,n);if(this._value=e,this.size=void 0===n?1/0:Math.max(0,n),0===this.size){if(cc)return cc;cc=this}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},t.prototype.get=function(e,t){return this.has(e)?this._value:t},t.prototype.includes=function(e){return ro(this._value,e)},t.prototype.slice=function(e,n){var r=this.size;return ai(e,n,r)?this:new t(this._value,ci(n,r)-si(e,r))},t.prototype.reverse=function(){return this},t.prototype.indexOf=function(e){return ro(this._value,e)?0:-1},t.prototype.lastIndexOf=function(e){return ro(this._value,e)?this.size:-1},t.prototype.__iterate=function(e,t){for(var n=this.size,r=0;r!==n&&!1!==e(this._value,t?n-++r:r++,this););return r},t.prototype.__iterator=function(e,t){var n=this,r=this.size,i=0;return new xi((function(){return i===r?{value:void 0,done:!0}:Di(e,t?r-++i:i++,n._value)}))},t.prototype.equals=function(e){return e instanceof t?ro(this._value,e._value):Is(e)},t}(qi);function lc(e,t,n,r,i,o){if("string"!=typeof n&&!Si(n)&&(Fi(n)||Pi(n)||Jo(n))){if(~e.indexOf(n))throw new TypeError("Cannot convert circular structure to Immutable");e.push(n),i&&""!==r&&i.push(r);var a=t.call(o,r,Qi(n).map((function(r,o){return lc(e,t,r,o,i,n)})),i&&i.slice());return e.pop(),i&&i.pop(),a}return n}function hc(e,t){return Ai(t)?t.toList():pi(t)?t.toMap():t.toSet()}var dc={version:"4.0.0",Collection:mi,Iterable:mi,Seq:Qi,Map:Sa,OrderedMap:ls,List:Ja,Stack:As,Set:Ts,OrderedSet:Xs,Record:nc,Range:Ls,Repeat:uc,is:ro,fromJS:function(e,t){return lc([],t||hc,e,"",t&&t.length>2?[]:void 0,{"":e})},hash:so,isImmutable:Si,isCollection:di,isKeyed:pi,isIndexed:Ai,isAssociative:vi,isOrdered:Ri,isValueObject:no,isPlainObject:Jo,isSeq:wi,isList:Ya,isMap:eo,isOrderedMap:to,isStack:gs,isSet:Es,isOrderedSet:ws,isRecord:Ci,get:ea,getIn:Ps,has:$o,hasIn:Ms,merge:function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];return va(e,t)},mergeDeep:function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];return Aa(e,t)},mergeWith:function(e,t){for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];return va(t,n,e)},mergeDeepWith:function(e,t){for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];return Aa(t,n,e)},remove:na,removeIn:ca,set:ra,setIn:aa,update:la,updateIn:ia};const fc=dc;function pc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pc(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ac,vc,mc,yc,bc=function(){function e(t){var n=this;a(this,e),this.sequence=void 0,this.users=new Map,this.streams=new Map,this.roomProperties=fc.Map(),this.room=void 0;var r=t.seq,i=t.users,o=t.roomProperties,s=t.roomInfo;this.sequence=r,i.forEach((function(e){var t=_c.fromData(e),r=e.streams;(void 0===r?[]:r).forEach((function(e){n.streams.set(e.streamUuid,Ec.fromData(gc(gc({},e),{},{fromUser:{userName:t.userName,role:t.userRole,userUuid:t.userUuid}})))})),n.users.set(e.userUuid,t)})),this.roomProperties=fc.Map(o),this.room=wc.fromData(s)}return c(e,null,[{key:"fromData",value:function(t){return new e(t)}}]),e}(),_c=function(){function e(t){a(this,e),this.userUuid=void 0,this.userName=void 0,this.userRole=void 0,this.userProperties=void 0,this.userName=t.userName,this.userRole=t.role,this.userUuid=t.userUuid,this.userProperties=fc.Map(t.userProperties)}return c(e,[{key:"setUserProperties",value:function(e){this.userProperties=fc.Map(e)}},{key:"toString",value:function(){return this.userUuid}}],[{key:"fromData",value:function(t){return new e(t)}}]),e}(),Ec=function(){function e(t){a(this,e),this.streamUuid=void 0,this.streamName=void 0,this.fromUser=void 0,this.videoSourceType=void 0,this.audioSourceType=void 0,this.videoState=void 0,this.audioState=void 0,this.videoSourceState=void 0,this.audioSourceState=void 0,this.previous=void 0,this.streamUuid=t.streamUuid,this.streamName=t.streamName,this.fromUser=t.fromUser,this.videoSourceType=t.videoSourceType,this.audioSourceType=t.audioSourceType,this.videoState=t.videoState,this.audioState=t.audioState,this.videoSourceState=t.videoSourceState,this.audioSourceState=t.audioSourceState,["streamUuid","fromUser","videoSourceType","audioSourceType","videoState","audioState","videoSourceState","audioSourceState"].forEach((function(e){void 0===t[e]&&mr.warn("stream key ".concat(e," is unexpectedly undefined"))})),this.fromUser||(mr.error("[stream-data-struct] stream must has owner info"),Br.shared.handleThrowableError(Rr.RTE_ERR_INVALID_DATA_STRUCT,new Error("invalid stream data")))}return c(e,[{key:"toString",value:function(){return this.streamUuid}}],[{key:"fromData",value:function(t){return new e(t)}}]),e}(),wc=function(){function e(t){a(this,e),this.roomName=void 0,this.roomUuid=void 0,this.roomScenario=void 0,this.roomName=t.roomName,this.roomUuid=t.roomUuid,this.roomScenario=t.roomScenario}return c(e,null,[{key:"fromData",value:function(t){return new e(t)}}]),e}(),Ic=function(){function e(t){a(this,e),this.fromUser=void 0,this.message=void 0,this.type=void 0,this.sendTime=void 0,this.sensitiveWords=void 0,this.messageId=void 0,this.fromUser=t.fromUser,this.message=t.message,this.type=t.type,this.sendTime=t.sendTime,this.sensitiveWords=t.sensitiveWords,this.messageId=t.messageId||t.peerMessageId}return c(e,[{key:"toString",value:function(){return"".concat(this.fromUser.userName,": ").concat(this.message)}}],[{key:"fromData",value:function(t){return new e(t)}}]),e}(),Cc=__webpack_require__(9850),Sc=__webpack_require__.n(Cc),Tc=__webpack_require__(2579),Rc=__webpack_require__.n(Tc);function kc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Oc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kc(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Nc(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return xc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xc(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function xc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Dc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var i=p(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f(this,n)}}!function(e){e[e.Chat=3]="Chat",e[e.RoomProperty=4]="RoomProperty",e[e.RoomProperties=5]="RoomProperties",e[e.UserInOut=20]="UserInOut",e[e.UserInfo=21]="UserInfo",e[e.UserProperty=22]="UserProperty",e[e.UserProperties=23]="UserProperties",e[e.StreamInOut=40]="StreamInOut",e[e.StreamsInOut=41]="StreamsInOut",e[e.MessageExtension=99]="MessageExtension"}(vc||(vc={})),function(e){e[e.PeerChat=1]="PeerChat"}(mc||(mc={})),function(e){e.SnapshotUpdated="snapshot-updated",e.ChatReceived="chat-received",e.UserAdded="user-added",e.UserUpdated="user-updated",e.UserRemoved="user-removed",e.RoomPropertyUpdated="room-property-updated",e.UserPropertyUpdated="user-property-updated",e.LocalStreamAdded="local-stream-added",e.LocalStreamUpdate="local-stream-update",e.LocalStreamRemove="local-stream-removed",e.RemoteStreamAdded="remote-stream-added",e.RemoteStreamUpdate="remote-stream-update",e.RemoteStreamRemove="remote-stream-removed",e.ChatUserMessage="user-chat-message",e.ChatRoomMessage="room-chat-message",e.NetworkStats="network-stats",e.LocalAudioVolume="local-audio-volume",e.AudioVolumes="audio-volumes",e.LocalVideoCameraListChanged="local-video-camera-list-changed",e.LocalAudioRecordingListChanged="local-audio-recording-list-changed",e.LocalAudioPlaybackListChanged="local-audio-playback-list-changed",e.LocalVideoTrackStateChanged="local-video-track-state-changed",e.LocalAudioTrackStateChanged="local-audio-track-state-changed",e.RtcConnectionStateChanged="rtc-connection-state-changed",e.RtmConnectionStateChanged="rtm-connection-state-changed",e.RteConnectionStateChanged="rte-connection-state-changed"}(yc||(yc={}));var Lc,Pc=Jr.attach({proxyMethods:!1})(Ac=function(e){l(n,e);var t=Dc(n);function n(e,r){var i,o=r.sceneId,s=r.userUuid,c=r.streamUuid;return a(this,n),(i=t.call(this)).logger=void 0,i._dataStore=void 0,i.sceneId=void 0,i.userUuid=void 0,i.streamUuid=void 0,i.sceneId=o,i.userUuid=s,i.streamUuid=c,i._dataStore=e,i}return c(n,[{key:"handleSnapshot",value:function(e){this._dataStore.setUsers(e.users),this._dataStore.setStreams(e.streams),this._dataStore.setRoomProperties(e.roomProperties),this._dataStore.setRoomInfo(e.room),this.emit(yc.SnapshotUpdated,e)}},{key:"handleMessage",value:function(e){switch(e.sequence.cmd){case vc.Chat:this._handleChat(e);break;case vc.RoomProperty:case vc.RoomProperties:this._handleRoomProperties(e);break;case vc.UserInOut:this._handleUserInOut(e);break;case vc.UserInfo:this._handleUserInfo(e);break;case vc.UserProperty:this._handleUserProperty(e);break;case vc.UserProperties:this._handleUserProperties(e);break;case vc.StreamInOut:this._handleStreamInOut(e);break;case vc.StreamsInOut:this._handleStreamsInOut(e);break;case vc.MessageExtension:this._handleMessageExtension(e)}}},{key:"handlePeerMessage",value:function(e){if(e.cmd===mc.PeerChat)this._handlePeerChat(e)}},{key:"_handlePeerChat",value:function(e){var t=e.data,n=Ic.fromData(t);this._dataStore.addMessage(n),this.emit(yc.ChatUserMessage,n)}},{key:"_handleChat",value:function(e){var t=e.sequence.data,n=Ic.fromData(t);this._dataStore.addMessage(n),this.emit(yc.ChatReceived,n)}},{key:"_mergeProperties",value:function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n],o=i.split(".");if(0!==o.length){var a,s=o.filter((function(e){return e})),c=e,u=Nc(s);try{for(u.s();!(a=u.n()).done;){var l=a.value;c[l]=c[l]||{},c=c[l]}}catch(e){u.e(e)}finally{u.f()}var h=1===s.length?e:Rc()(e,Xr(s).splice(0,s.length-1).join("."),{}),d=Sc()(t[i]);"deleted"===d?delete h[Xr(s).pop()]:h[Xr(s).pop()]=d}else this.logger.error("invalid key when batch set room properties ".concat(i))}return e}},{key:"_handleRoomProperties",value:function(e){var t=e.sequence.data,n=t.changeProperties,r=t.cause,i=t.operator;this._dataStore.setRoomProperties(this._mergeProperties(this._dataStore.roomProperties.toJS(),n));var o=Array.from(new Set(Object.keys(n).map((function(e){return e.split(".")[0]}))));this.emit(yc.RoomPropertyUpdated,o,this._dataStore.roomProperties,i,r)}},{key:"_handleUserInOut",value:function(e){var t=this,n=e.sequence.data,r=n.offlineUsers,i=n.onlineUsers,o=r.map((function(e){var n=_c.fromData(e);return t._dataStore.deleteStream(e.streamUuid),t._dataStore.deleteUser(e.userUuid),n})),a=i.map((function(e){var n=_c.fromData(e);t._dataStore.setUser(n.userUuid,n);var r=e.streams;return(void 0===r?[]:r).forEach((function(e){var r=Ec.fromData(Oc(Oc({},e),{},{fromUser:{userUuid:n.userUuid,role:n.userRole,userName:n.userName}}));t._dataStore.setStream(r.streamUuid,r)})),n}));if(a.length>0&&this.emit(yc.UserAdded,a),o.length>0){var s=r.length?r[0].type:void 0;this.emit(yc.UserRemoved,o,s)}}},{key:"_handleUserInfo",value:function(e){var t=e.sequence.data,n=t.userUuid,r=t.userName,i=t.role,o=this._dataStore.findUser(n);if(!o)return this.logger.warn("user ".concat(n," not exists, update info failed"));o.userName=r,o.userRole=i,this.emit(yc.UserUpdated,o)}},{key:"_handleUserProperty",value:function(e){throw"not_implemented"}},{key:"_handleUserProperties",value:function(e){var t=e.sequence.data,n=t.changeProperties,r=t.cause,i=t.fromUser,o=t.operator,a=i.userUuid,s=this._dataStore.findUser(a);if(!s)return this.logger.warn("user ".concat(a," not exists, update property failed"));s.setUserProperties(this._mergeProperties(s.userProperties.toJS(),n)),this.emit(yc.UserPropertyUpdated,a,s.userProperties.toObject(),o,r)}},{key:"_processStreamEvent",value:function(e,t){var n=t.fromUser.userUuid===this.userUuid;if(3===e){var r=this._dataStore.findStream(t.streamUuid);return this._dataStore.deleteStream(t.streamUuid),t.previous=r,n?yc.LocalStreamRemove:yc.RemoteStreamRemove}if(2===e){var i=this._dataStore.findStream(t.streamUuid);return this._dataStore.setStream(t.streamUuid,t),t.previous=i,n?yc.LocalStreamUpdate:yc.RemoteStreamUpdate}return t.previous=void 0,this._dataStore.setStream(t.streamUuid,t),n?yc.LocalStreamAdded:yc.RemoteStreamAdded}},{key:"_handleStreamInOut",value:function(e){var t=e.sequence.data,n=t.action,r=t.fromUser,i=t.streamUuid,o=t.streamName,a=t.videoSourceType,s=t.audioSourceType,c=t.videoSourceState,u=t.audioSourceState,l=t.videoState,h=t.audioState,d=t.operator,f=Ec.fromData({streamName:o,streamUuid:i,fromUser:r,videoSourceType:a,audioSourceType:s,videoState:l,audioState:h,videoSourceState:c,audioSourceState:u}),p=this._processStreamEvent(n,f);this.emit(p,[f],d)}},{key:"_handleStreamsInOut",value:function(e){var t=this,n=e.sequence.data,r=n.streams,i=n.operator,o=(n.cause,new Map);r.forEach((function(e){var n=e.action,r=Ec.fromData(e),i=t._processStreamEvent(n,r);o.has(i)?o.set(i,o.get(i).concat([r])):o.set(i,[r])})),o.forEach((function(e,n){t.emit(n,e,i)}))}},{key:"_handleMessageExtension",value:function(e){}}]),n}(y))||Ac,Bc=Jr.attach({proxyMethods:!1})(Lc=function(){function e(t,n){var r=this,i=n.sceneId,o=n.userUuid,s=n.streamUuid,c=n.channelObserver,u=n.rtm;a(this,e),this.logger=void 0,this.sceneId=void 0,this.userUuid=void 0,this.streamUuid=void 0,this._channelObserver=void 0,this._snapshot=void 0,this._queueTasks=[],this._currentTask=void 0,this._lastSeq=-1,this._requestingGap=!1,this._handleChannelMessage=void 0,this._handlePeerMessage=void 0,this.handle=void 0,this.runNextTask=function(){if(r._currentTask)r.logger.debug("Task Running");else{var e=r.dequeueTask();e?(r._currentTask=e,r.processTask(r._currentTask).then((function(){r._currentTask=void 0,r.notifyTaskQueueUpdate()})).catch((function(e){r.logger.error("message handle failed: ".concat(e)),r._currentTask=void 0,r.notifyTaskQueueUpdate()}))):r.logger.debug("message handle queue clear")}},this.sceneId=i,this.streamUuid=s,this.userUuid=o,this._handleChannelMessage=this.handleChannelMessage.bind(this),this._handlePeerMessage=this.handlePeerMessage.bind(this),this._channelObserver=c,this._channelObserver.on("ChannelMessage",this._handleChannelMessage),u.on("MessageFromPeer",this._handlePeerMessage),this.handle=new Pc(t,{sceneId:i,userUuid:o,streamUuid:s})}var t,n;return c(e,[{key:"handlePeerMessage",value:function(e){var t=e.message;if("server"===e.peerId){this.logger.debug("peer message",t);try{var n=JSON.parse(t);this.handle.handlePeerMessage(n)}catch(e){this.logger.error("".concat(e.message," original: ").concat(t))}}}},{key:"handleChannelMessage",value:function(e){var t=e.message;if("server"===e.memberId){this.logger.debug("channel message",t.text);try{var n=JSON.parse(t.text);this.addTask({sequence:n})}catch(e){this.logger.error("".concat(e.message," original: ").concat(t.text))}}}},{key:"syncSnapshot",value:function(e){this._snapshot=e,this.handle.handleSnapshot(e),this._lastSeq=e.sequence,this.notifyTaskQueueUpdate()}},{key:"findSequenceGap",value:function(){if(0===this._queueTasks.length)return null;var e=this._queueTasks[0].sequence.sequence;return e-this._lastSeq>1?{seq:this._lastSeq+1,count:e-this._lastSeq-1,queueHeadSeq:e}:null}},{key:"sortTasks",value:function(){this._queueTasks=this._queueTasks.sort((function(e,t){return e.sequence.sequence-t.sequence.sequence}))}},{key:"addTask",value:function(e){this._queueTasks.push(e),this.sortTasks(),this.notifyTaskQueueUpdate()}},{key:"prependTasks",value:function(e){this._queueTasks=e.concat(this._queueTasks),this.sortTasks()}},{key:"notifyTaskQueueUpdate",value:function(){if(this._snapshot){var e=this.findSequenceGap();if(e){var t=e.seq,n=e.count,r=e.queueHeadSeq;return this.logger.warn("gap ".concat(this._lastSeq," - ").concat(r," exists, need fill ").concat(t," ").concat(n,". stop task processing before gap is resolved")),void this.syncSequenceUntilSuccess(t,n)}this.runNextTask()}else this.logger.warn("Snapshot not ready yet..wait")}},{key:"dequeueTask",value:function(){return 0===this._queueTasks.length?null:this._queueTasks.shift()}},{key:"processTask",value:(n=o(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._snapshot){e.next=2;break}return e.abrupt("return");case 2:if(!(t.sequence.sequence<=this._lastSeq)){e.next=5;break}return this.logger.debug("skip sequence ".concat(t.sequence.sequence,", snapshot ").concat(this._snapshot.sequence)),e.abrupt("return");case 5:return this.logger.debug("process sequence ".concat(t.sequence.sequence,", snapshot ").concat(this._snapshot.sequence,", last ").concat(this._lastSeq)),this.handle.handleMessage(t),this._lastSeq=t.sequence.sequence,e.next=10,new Promise((function(e){return setTimeout(e,0)}));case 10:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"syncSequenceUntilSuccess",value:(t=o(A().mark((function e(t,n){var r,i,o,a,s;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._requestingGap){e.next=2;break}return e.abrupt("return");case 2:this._requestingGap=!0,r=!1,this.logger.info("begin resolve gap ".concat(t," - ").concat(n));case 5:return e.prev=5,e.next=8,Ih.engine.getApiService().syncSequence(this.sceneId,t,n);case 8:i=e.sent,o=i.list,a=Math.min(n,o.length),s=o.slice(0,a).map((function(e){return{sequence:e}})),this.prependTasks(s),r=!0,this.logger.info("gap resolved, new ".concat(s.length," tasks prepended ")),this.notifyTaskQueueUpdate(),e.next=23;break;case 18:return e.prev=18,e.t0=e.catch(5),this.logger.error("syncSequence failed: ".concat(e.t0)),e.next=23,new Promise((function(e){return setTimeout(e,3e3)}));case 23:if(!r){e.next=5;break}case 24:this._requestingGap=!1;case 25:case"end":return e.stop()}}),e,this,[[5,18]])}))),function(e,n){return t.apply(this,arguments)})},{key:"reset",value:function(){this._channelObserver.off("ChannelMessage",this._handleChannelMessage)}}]),e}())||Lc,Mc=__webpack_require__(2699),jc=__webpack_require__(3136),Uc=__webpack_require__.n(jc);function Fc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fc(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Gc=function(){var e=o(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){var i=new AbortController,o=setTimeout((function(){return i.abort()}),5e3);fetch(t,Qc(Qc({},n),{},{signal:i.signal})).then((function(t){return e(t)})).catch((function(e){r(e)})).finally((function(){clearTimeout(o)}))})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),qc=function(){function e(){a(this,e),this.host=void 0,this.pathPrefix=void 0,this.headers=void 0}var t;return c(e,[{key:"fetch",value:(t=o(A().mark((function e(t){var n,i,o,a,s,c,u,l,h,d,f,p,g,v,m,y;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.method,i=t.data,o=t.full_url,a=t.path,s=t.query,c=void 0===s?{}:s,u=Ur.shared.service,l=u.host,h=u.pathPrefix,d={method:n,headers:Object.assign({},Ur.shared.service.headers,this.headers,t.headers)},f=Object.entries(c).filter((function(e){return!!r(e,2)[1]})).map((function(e){var t=r(e,2),n=t[0],i=t[1];return"".concat(n,"=").concat(i)})),p=f.length>0?"?".concat(f.join("&")):"",i&&(d.body=JSON.stringify(i)),e.prev=6,!o){e.next=13;break}return e.next=10,Gc("".concat(o),d);case 10:g=e.sent,e.next=16;break;case 13:return e.next=15,Gc("".concat(t.host||this.host||l).concat(t.pathPrefix||this.pathPrefix||h||"").concat(a).concat(p),d);case 15:g=e.sent;case 16:e.next=24;break;case 18:if(e.prev=18,e.t0=e.catch(6),20!==(v=e.t0).code){e.next=23;break}return e.abrupt("return",Br.shared.handleThrowableError(Rr.RTE_ERR_RESTFUL_NETWORK_TIMEOUT_ERR,v));case 23:return e.abrupt("return",Br.shared.handleThrowableError(Rr.RTE_ERR_RESTFUL_NETWORK_ERR,v));case 24:return e.next=26,g.json();case 26:if(m=e.sent,0==(y=+m.code)){e.next=34;break}if(!isNaN(y)){e.next=33;break}return e.abrupt("return",Br.shared.handleThrowableError(Rr.RTE_ERR_RESTFUL_SERVICE_ERR,new Lr(Rr.RTE_ERR_RESTFUL_SERVICE_ERR,new Error(m.msg),{servCode:-1})));case 33:return e.abrupt("return",Br.shared.handleThrowableError(Rr.RTE_ERR_RESTFUL_SERVICE_ERR,new Lr(Rr.RTE_ERR_RESTFUL_SERVICE_ERR,new Error(m.msg),{servCode:y})));case 34:return e.abrupt("return",m);case 35:case"end":return e.stop()}}),e,this,[[6,18]])}))),function(e){return t.apply(this,arguments)})}]),e}(),Vc=__webpack_require__(2775),Kc=__webpack_require__.n(Vc);function Hc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var i=p(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f(this,n)}}var Wc,zc=function(e){l(h,e);var t,n,r,i,s,u=Hc(h);function h(){var e;a(this,h);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=u.call.apply(u,[this].concat(n))).tickerMap=new Map,e.timer=void 0,e}return c(h,[{key:"guardParams",value:function(){var e=Ur.shared.appId,t=Ur.shared.userId;if(e&&t)return!0;Br.shared.handleThrowableError(Rr.RTE_ERR_MISSING_PARAMS,new Error("invalid params"))}},{key:"platform",get:function(){return Ur.platform===Or.Electron?"electron":"web"}},{key:"buildBaseParams",value:function(e,t,n,r,i,o,a){var s=(new Date).getTime(),c=Kc()("src=".concat(t,"&ts=").concat(s)),u=i.result,l=i.errCode,h=i.httpCode,d=i.api;return{pts:[{m:n,ls:{ctype:e,platform:this.platform,version:Ih.getVersion(),appId:Ur.shared.appId,event:o,category:a,result:void 0===u?void 0:"".concat(+u),errCode:l,httpCode:h,api:d},vs:r}],sign:c,src:t,ts:s}}},{key:"buildEventParams",value:function(e,t,n,r){return this.buildBaseParams("flexibleClass","rte","event",n,r,e,t)}},{key:"buildHBParams",value:function(){return this.buildBaseParams("flexibleClass","rte","online_user",{count:1},{})}},{key:"reportHB",value:(s=o(A().mark((function e(){var t;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.guardParams()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.fetch({path:"/v1/report",method:"POST",data:this.buildHBParams()});case 4:return t=e.sent,e.abrupt("return",t.data);case 6:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"report",value:(i=o(A().mark((function e(t,n,r,i){var o;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.guardParams()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.fetch({path:"/v1/report",method:"POST",data:this.buildEventParams(t,n,r,i||{})});case 4:return o=e.sent,e.abrupt("return",o.data);case 6:case"end":return e.stop()}}),e,this)}))),function(e,t,n,r){return i.apply(this,arguments)})},{key:"tickerKey",value:function(e,t,n){return"".concat(e,"/").concat(t,"/").concat(n||"")}},{key:"startTick",value:function(e,t,n){this.tickerMap.set(this.tickerKey(e,t,n),(new Date).getTime())}},{key:"startHB",value:function(){}},{key:"stopHB",value:function(){clearTimeout(this.timer),this.timer=null}},{key:"getElapse",value:function(e,t,n){var r=this.tickerKey(e,t,n);return this.tickerMap.has(r)?(new Date).getTime()-this.tickerMap.get(r):0}},{key:"reportEC",value:(r=o(A().mark((function e(t,n,r){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.report(t,n,{count:1},r));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return r.apply(this,arguments)})},{key:"reportElapse",value:(n=o(A().mark((function e(t,n,r){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.report(t,n,{elapse:this.getElapse(t,n,null==r?void 0:r.api)},r));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return n.apply(this,arguments)})},{key:"reportHttp",value:(t=o(A().mark((function e(t,n,r,i,o,a){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.report(t,n,{elapse:this.getElapse(t,n,r)},{api:r,httpCode:i,result:o,errCode:a}));case 1:case"end":return e.stop()}}),e,this)}))),function(e,n,r,i,o,a){return t.apply(this,arguments)})}]),h}(qc);function Yc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var i=p(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f(this,n)}}zc.shared=new zc,function(e){e.DISCONNECTED="DISCONNECTED",e.CONNECTING="CONNECTING",e.CONNECTED="CONNECTED",e.RECONNECTING="RECONNECTING",e.ABORTED="ABORTED"}(Wc||(Wc={}));var Jc=function(e){return void 0!==e.text},Xc=function(e){l(h,e);var t,n,r,i,s,u=Yc(h);function h(){var e;return a(this,h),(e=u.call(this)).connectionState=Wc.DISCONNECTED,e.prevConnectionState=Wc.DISCONNECTED,e.channels={},e._client=void 0,e.connectionState=Wc.DISCONNECTED,e.prevConnectionState=Wc.DISCONNECTED,e.channels={},e._client=void 0,e}return c(h,[{key:"client",get:function(){return this._client}},{key:"sessionId",get:function(){return this.client.context.sid}},{key:"logFilter",get:function(){var e=Uc().LOG_FILTER_INFO;switch(Ur.logLevel){case kr.WARN:e=Uc().LOG_FILTER_WARNING;break;case kr.OFF:e=Uc().LOG_FILTER_OFF;break;case kr.ERROR:e=Uc().LOG_FILTER_ERROR}return e}},{key:"_region",get:function(){switch(Ur.shared.region){case xr.CN:return"GLOBAL";case xr.AP:return"ASIA";case xr.EU:return"EUROPE";case xr.NA:return"NORTH_AMERICA"}}},{key:"login",value:(s=o(A().mark((function e(t,n,r){var i,o=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Uc().setArea({areaCodes:[this._region]}),i=Uc().createInstance(Ur.shared.appId,{enableLogUpload:r.uploadLog,logFilter:this.logFilter}),mr.info("[rtm] wrapper init"),i.on("ConnectionStateChanged",(function(e,t){mr.info("[rtm] [Wrapper] ConnectionStateChanged",e,t),o.prevConnectionState=o.connectionState,o.connectionState=e,o.emit(yc.RtmConnectionStateChanged,{newState:e,reason:t})})),i.on("MessageFromPeer",(function(e,t,n){Jc(e)&&(mr.debug("[rtm] [Wrapper] MessageFromPeer ".concat(e.text)),o.emit("MessageFromPeer",{message:e.text,peerId:t,props:n}))})),e.next=8,i.login({uid:n,token:t});case 8:this._client=i,e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),this._destroyRtm(i),Br.shared.handleThrowableError(Rr.RTM_ERR_LOGIN_FAIL,e.t0);case 15:case"end":return e.stop()}}),e,this,[[0,11]])}))),function(e,t,n){return s.apply(this,arguments)})},{key:"createObserverChannel",value:function(e){return[this.client.createChannel(e),new Mc.EventEmitter]}},{key:"join",value:(i=o(A().mark((function e(t,n,r){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,zc.shared.startTick("joinRoom","rtm","joinChannel"),this.channels[r]!==t){e.next=4;break}return e.abrupt("return",mr.warn("[rtm] skip channel ".concat(r," join as the channel is already joined")));case 4:return t.on("ChannelMessage",(function(e,t,i){n.emit("ChannelMessage",{channelName:r,message:e,memberId:t,messagePros:i})})),t.on("MemberJoined",(function(e){n.emit("MemberJoined",{channelName:r,memberId:e})})),t.on("MemberLeft",(function(e){n.emit("MemberLeft",{channelName:r,memberId:e})})),t.on("MemberCountUpdated",(function(e){n.emit("MemberCountUpdated",{channelName:r,memberCount:e})})),e.next=10,t.join();case 10:this.channels[r]=t,zc.shared.reportElapse("joinRoom","rtm",{api:"joinChannel",result:!0}),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),zc.shared.reportElapse("joinRoom","rtm",{api:"joinChannel",result:!1,errCode:"".concat(e.t0.message)}),Br.shared.handleThrowableError(Rr.RTM_ERR_JOIN_FAILED,e.t0);case 18:case"end":return e.stop()}}),e,this,[[0,14]])}))),function(e,t,n){return i.apply(this,arguments)})},{key:"leave",value:(r=o(A().mark((function e(t){var n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(n=this.channels[t])){e.next=7;break}return e.next=5,n.leave();case 5:n.removeAllListeners(),delete this.channels[t];case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),Br.shared.handleNonThrowableError(Rr.RTM_ERR_LEAVE_FAILED,e.t0);case 12:case"end":return e.stop()}}),e,this,[[0,9]])}))),function(e){return r.apply(this,arguments)})},{key:"releaseChannels",value:function(){for(var e=0,t=Object.keys(this.channels);e<t.length;e++){var n=t[e];this.channels[n]&&this.release(this.channels[n]),this.channels[n]=void 0}}},{key:"releaseClient",value:function(){this._client&&this.release(this._client)}},{key:"release",value:function(e){e.removeAllListeners(),mr.info("[AGRtmManager]  eventClient removeAllListeners ")}},{key:"reset",value:function(){this.connectionState=Wc.DISCONNECTED,this.prevConnectionState=Wc.DISCONNECTED,this.releaseClient(),this.releaseChannels(),this.channels={},this.client&&(this.client.removeAllListeners(),mr.info("[AGRtmManager] removeAllListeners")),this._client=void 0,this.removeAllListeners(),mr.info("[AGRtmManager] self removeAllListeners")}},{key:"_destroyRtm",value:function(e){try{null==e||e.logout()}catch(e){Br.shared.handleNonThrowableError(Rr.RTM_ERR_DESTROY_FAILED,e)}}},{key:"destroyRtm",value:function(){this._destroyRtm(this._client),this._client=void 0}},{key:"sendChannelMessage",value:(n=o(A().mark((function e(t,n,r){var i;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.channels[t],e.next=3,i.sendMessage(n,{enableHistoricalMessaging:r.enableHistoricalMessaging});case 3:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return n.apply(this,arguments)})},{key:"sendPeerMessage",value:(t=o(A().mark((function e(t,n,r){var i;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.client.sendMessageToPeer(n,t,{enableHistoricalMessaging:r.enableHistoricalMessaging});case 2:return i=e.sent,e.abrupt("return",i.hasPeerReceived);case 4:case"end":return e.stop()}}),e,this)}))),function(e,n,r){return t.apply(this,arguments)})}]),h}(Mc.EventEmitter);function Zc(e,t,n,r,i){var o={};return Object.keys(r).forEach((function(e){o[e]=r[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var $c,eu,tu,nu=__webpack_require__(4073),ru=__webpack_require__.n(nu),iu=function(e,t,n){var r=n.value;return{configurable:!0,enumerable:!1,get:function(){var e=this.__cacheMap;return e||(e=new WeakMap,this.__cacheMap=e),e.has(r)||e.set(r,r.bind(this)),e.get(r)},set:function(e){var t=this.__cacheMap;t||(t=new WeakMap,this.__cacheMap=t),t.set(e,e.bind(this))}}};function ou(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var i=p(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f(this,n)}}!function(e){e[e.None=0]="None",e[e.Camera=1]="Camera",e[e.ScreenShare=2]="ScreenShare"}($c||($c={})),function(e){e[e.None=0]="None",e[e.Mic=1]="Mic",e[e.Mix=2]="Mix"}(eu||(eu={})),function(e){e[e.Unpublished=0]="Unpublished",e[e.Published=1]="Published"}(tu||(tu={}));var au,su,cu=c((function e(t,n){var r=n.videoSourceType,i=n.audioSourceType;a(this,e),this.videoSourceType=$c.None,this.audioSourceType=eu.None,this.rtc=void 0,this.rtc=t,r&&(this.videoSourceType=r),i&&(this.audioSourceType=i)})),uu=function(e){l(n,e);var t=ou(n);function n(e){var r;return a(this,n),(r=t.call(this,e,{videoSourceType:$c.Camera})).state=gu.stopped,e.onLocalVideoTrackStateChanged((function(e,t){t===$c.Camera&&(r.state=e)})),r}return c(n,[{key:"setView",value:function(e){this.rtc.setupLocalVideo(e,$c.Camera)}},{key:"setDeviceId",value:function(e){this.rtc.setVideoCameraDevice(e)}},{key:"setVideoEncoderConfiguration",value:function(){}},{key:"start",value:function(){return this.rtc.enableLocalVideo(!0)}},{key:"stop",value:function(){return this.rtc.enableLocalVideo(!1)}}]),n}(cu),lu=function(e){l(n,e);var t=ou(n);function n(e){var r;return a(this,n),(r=t.call(this,e,{audioSourceType:eu.Mic})).state=gu.stopped,e.onLocalAudioTrackStateChanged((function(e,t){t===eu.Mic&&(r.state=e)})),r}return c(n,[{key:"setRecordingDevice",value:function(e){return this.rtc.setAudioRecordingDevice(e)}},{key:"setPlaybackDevice",value:function(e){return this.rtc.setAudioPlaybackDevice(e)}},{key:"start",value:function(){return this.rtc.enableLocalAudio(!0)}},{key:"stop",value:function(){return this.rtc.enableLocalAudio(!1)}}]),n}(cu),hu=function(e){l(n,e);var t=ou(n);function n(e){return a(this,n),t.call(this,e,{videoSourceType:$c.ScreenShare})}return c(n,[{key:"setView",value:function(e){this.rtc.setupLocalVideo(e,$c.ScreenShare)}},{key:"start",value:function(){return this.rtc.startScreenCapture()}},{key:"startWithParams",value:function(e,t){return this.rtc.startScreenCapture(e,t)}},{key:"stop",value:function(){return this.rtc.stopScreenCapture()}}]),n}(cu),du={debounced:function(e,t){return function(n,r,i){return{configurable:!0,enumerable:!1,get:function(){return(0,S.debounce)(i.value,e,t).bind(this)}}}},throttled:function(e,t){return function(n,r,i){return{configurable:!0,enumerable:!1,get:function(){return(0,S.throttle)(i.value,e,t).bind(this)}}}}};!function(e){e[e.main=0]="main",e[e.sub=1]="sub"}(su||(su={}));var fu,pu,gu,Au,vu,mu,yu,bu,_u,Eu=Jr.attach({level:kr.DEBUG})(au=function(){function e(t,n){a(this,e),this.channelName=void 0,this._adapter=void 0,this._adapter=n,this.channelName=t}return c(e,[{key:"connectionType",value:function(e){return void 0===e?su.main:e}},{key:"getRtcSid",value:function(){return this._adapter.getSessionId()}},{key:"join",value:function(e,t,n){return this._adapter.join(e,t,this.connectionType(n))}},{key:"leave",value:function(e){return this._adapter.leave(e)}},{key:"setClientRole",value:function(e){return this._adapter.setClientRole(e)}},{key:"muteLocalVideoStream",value:function(e,t){return this._adapter.muteLocalVideo(e,this.connectionType(t))}},{key:"muteLocalAudioStream",value:function(e,t){return this._adapter.muteLocalAudio(e,this.connectionType(t))}},{key:"muteLocalScreenStream",value:function(e,t){return this._adapter.muteLocalScreenShare(e,this.connectionType(t))}},{key:"muteRemoteVideoStream",value:function(e,t){return this._adapter.muteRemoteVideo(e,t)}},{key:"muteRemoteAudioStream",value:function(e,t){return this._adapter.muteRemoteAudio(e,t)}},{key:"onNetworkStats",value:function(e){return this._adapter.onNetworkStats(e)}},{key:"onAudioVolumeIndication",value:function(e){return this._adapter.onAudioVolumeIndication(e)}},{key:"onConnectionStageChanged",value:function(e){return this._adapter.onConnectionStateChanged(e)}}]),e}())||au;!function(e){e[e.unknown=99]="unknown",e[e.bad=1]="bad",e[e.poor=2]="poor",e[e.good=3]="good",e[e.great=4]="great"}(fu||(fu={})),function(e){e[e.Unknown=0]="Unknown",e[e.PermissionDenied=1]="PermissionDenied"}(pu||(pu={})),function(e){e[e.stopped=0]="stopped",e[e.starting=2]="starting",e[e.started=1]="started",e[e.error=-1]="error"}(gu||(gu={})),function(e){e[e.Idle=0]="Idle",e[e.Connecting=1]="Connecting",e[e.Connected=2]="Connected",e[e.Reconnecting=3]="Reconnecting"}(Au||(Au={})),function(e){e[e.AES_128_XTS=1]="AES_128_XTS",e[e.AES_128_ECB=2]="AES_128_ECB",e[e.AES_256_XTS=3]="AES_256_XTS",e[e.SM4_128_ECB=4]="SM4_128_ECB",e[e.AES_128_GCM=5]="AES_128_GCM",e[e.AES_256_GCM=6]="AES_256_GCM"}(vu||(vu={})),function(e){e[e.Window=0]="Window",e[e.Screen=1]="Screen"}(mu||(mu={})),function(e){e[e.fit=0]="fit",e[e.fill=1]="fill"}(yu||(yu={})),function(e){e[e.low=0]="low",e[e.normal=1]="normal",e[e.height=2]="height"}(bu||(bu={}));var wu=(_u=function(){function e(t,n){var r=n.userUuid,i=n.userName,o=n.userRole,s=n.streamUuid,c=n.sceneId,u=n.rtcToken,l=n.rtc;a(this,e),this.userUuid=void 0,this.userName=void 0,this.userRole=void 0,this.streamUuid=void 0,this.sceneId=void 0,this.rtcToken=void 0,this._rtc=void 0,this._scene=void 0,this._debouncedSyncVideo=ru()(this._syncVideoSourceState,500),this._debouncedSyncAudio=ru()(this._syncAudioSourceState,500),this.subStream=void 0,this.userUuid=r,this.userName=i,this.userRole=o,this.streamUuid=s,this.sceneId=c,this.rtcToken=u,this._rtc=l,this._scene=t,this._addEventHandler()}var t,n,r,i,s,u,l,h,d,f;return c(e,[{key:"destroy",value:function(){Ih.engine.getAgoraMediaControl().off(Uu.localVideoTrackChanged,this._handleVideoTrackStateChange),Ih.engine.getAgoraMediaControl().off(Uu.localAudioTrackChanged,this._handleAudioTrackStateChange)}},{key:"_addEventHandler",value:function(){Ih.engine.getAgoraMediaControl().on(Uu.localVideoTrackChanged,this._handleVideoTrackStateChange),Ih.engine.getAgoraMediaControl().on(Uu.localAudioTrackChanged,this._handleAudioTrackStateChange)}},{key:"_handleVideoTrackStateChange",value:function(e,t){t===$c.Camera&&e!==gu.starting&&this._debouncedSyncVideo(e)}},{key:"_handleAudioTrackStateChange",value:function(e,t){t===eu.Mic&&e!==gu.starting&&this._debouncedSyncAudio(e)}},{key:"_syncVideoSourceState",value:function(e){mr.info("sync video state ".concat(e)),this.updateLocalMediaState({videoSourceState:e})}},{key:"_syncAudioSourceState",value:function(e){mr.info("sync audio state ".concat(e)),this.updateLocalMediaState({audioSourceState:e})}},{key:"setSceneProperties",value:(f=o(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ih.engine.getApiService().updateRoomProperties({roomUuid:this.sceneId,properties:t,cause:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return f.apply(this,arguments)})},{key:"deleteSceneProperties",value:(d=o(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ih.engine.getApiService().deleteRoomProperties({roomUuid:this.sceneId,properties:t,cause:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return d.apply(this,arguments)})},{key:"setUserProperties",value:(h=o(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ih.engine.getApiService().updateUserProperties({userUuid:this.userUuid,roomUuid:this.sceneId,properties:t,cause:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return h.apply(this,arguments)})},{key:"deleteUserProperties",value:(l=o(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ih.engine.getApiService().deleteUserProperties({userUuid:this.userUuid,roomUuid:this.sceneId,properties:t,cause:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return l.apply(this,arguments)})},{key:"updateLocalMediaState",value:(u=o(A().mark((function e(t,n){var r,i,o;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.videoSourceState,o=t.audioSourceState,e.next=3,Ih.engine.getApiService().updateDeviceState(this.sceneId,this.userUuid,n&&n===su.sub?(null===(r=this.subStream)||void 0===r?void 0:r.streamUuid)||"0":this.streamUuid,{videoSourceState:i,audioSourceState:o});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return u.apply(this,arguments)})},{key:"updateLocalMediaStream",value:(s=o(A().mark((function e(t,n){var r,i,o;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.publishVideo,o=t.publishAudio,e.next=3,Ih.engine.getApiService().upsertStream(this.sceneId,this.userUuid,n&&n===su.sub?(null===(r=this.subStream)||void 0===r?void 0:r.streamUuid)||"0":this.streamUuid,{publishVideo:i,publishAudio:o});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return s.apply(this,arguments)})},{key:"updateRemoteMediaStream",value:(i=o(A().mark((function e(t,n,r,i){var o,a;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=r.publishVideo,a=r.publishAudio,e.next=3,Ih.engine.getApiService().upsertStream(this.sceneId,t,n,{publishVideo:o,publishAudio:a});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t,n,r){return i.apply(this,arguments)})},{key:"deleteLocalMediaStream",value:(r=o(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ih.engine.getApiService().deleteStream(this.sceneId,this.userUuid,this.streamUuid);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"deleteLocalScreenStream",value:(n=o(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.subStream){e.next=4;break}return e.next=3,Ih.engine.getApiService().deleteStream(this.sceneId,this.userUuid,this.subStream.streamUuid);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"sendRoomMessage",value:(t=o(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ih.engine.getApiService().sendRoomChatMessage(t,this.sceneId);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"setupRemoteVideo",value:function(e){this._rtc.setupRemoteVideo(e)}}]),e}(),Zc(_u.prototype,"_handleVideoTrackStateChange",[iu],Object.getOwnPropertyDescriptor(_u.prototype,"_handleVideoTrackStateChange"),_u.prototype),Zc(_u.prototype,"_handleAudioTrackStateChange",[iu],Object.getOwnPropertyDescriptor(_u.prototype,"_handleAudioTrackStateChange"),_u.prototype),Zc(_u.prototype,"_syncVideoSourceState",[iu],Object.getOwnPropertyDescriptor(_u.prototype,"_syncVideoSourceState"),_u.prototype),Zc(_u.prototype,"_syncAudioSourceState",[iu],Object.getOwnPropertyDescriptor(_u.prototype,"_syncAudioSourceState"),_u.prototype),_u),Iu=__webpack_require__(8640),Cu=__webpack_require__.n(Iu);function Su(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Su(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Su(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ru=function(){function e(t,n,r){a(this,e),this.fn=void 0,this.args=void 0,this.onRetryAttemptFail=void 0,this.onRetryAbort=void 0,this.opts=void 0,this.fn=t,this.args=n,this.opts=r}var t;return c(e,[{key:"fail",value:function(e){return this.onRetryAttemptFail=e,this}},{key:"abort",value:function(e){return this.onRetryAbort=e,this}},{key:"exec",value:(t=o(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Cu()(this.fn,this.args,Tu(Tu({retriesMax:3},this.opts),{},{onAttemptFail:this.onRetryAttemptFail}));case 3:e.next=12;break;case 5:if(e.prev=5,e.t0=e.catch(0),e.t1=this.onRetryAbort,!e.t1){e.next=11;break}return e.next=11,this.onRetryAbort(e.t0);case 11:throw e.t0;case 12:case"end":return e.stop()}}),e,this,[[0,5]])}))),function(){return t.apply(this,arguments)})}]),e}(),ku=function(e,t,n){return new Ru(e,t,n)},Ou=function(e){try{return JSON.stringify(e)}catch(e){}return"invalid json"},Nu=function(){function e(){a(this,e),this._users=fc.Map(),this._roomProperties=fc.Map({}),this._streams=fc.Map(),this._roomInfo=fc.Map(),this._messages=fc.List([])}return c(e,[{key:"users",get:function(){return this._users}},{key:"setUsers",value:function(e){this._users=fc.Map(e)}},{key:"setUser",value:function(e,t){this._users=this._users.set(e,t)}},{key:"deleteUser",value:function(e){this._users=this._users.delete(e)}},{key:"findUser",value:function(e){return this._users.get(e)}},{key:"roomProperties",get:function(){return this._roomProperties}},{key:"setRoomProperties",value:function(e){this._roomProperties=fc.Map(e)}},{key:"streams",get:function(){return this._streams}},{key:"setStreams",value:function(e){this._streams=fc.Map(e)}},{key:"findUserStreams",value:function(e){return Array.from(this._streams.values()).filter((function(t){return t.fromUser.userUuid===e}))}},{key:"setStream",value:function(e,t){this._streams=this._streams.set(e,t)}},{key:"deleteStream",value:function(e){this._streams=this._streams.delete(e)}},{key:"findStream",value:function(e){return this._streams.get(e)}},{key:"roomInfo",get:function(){return this._roomInfo}},{key:"setRoomInfo",value:function(e){this._roomInfo=fc.Map(e)}},{key:"messages",get:function(){return this._messages}},{key:"addMessage",value:function(e){this._messages.push(e)}}]),e}();function xu(e,t){return e.then((function(e){return[null,e]})).catch((function(e){return t&&Object.assign(e,t),[e,void 0]}))}const Du=xu;var Lu,Pu,Bu,Mu;function ju(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var i=p(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f(this,n)}}!function(e){e[e.Idle=0]="Idle",e[e.Connecting=1]="Connecting",e[e.Connected=2]="Connected",e[e.Reconnecting=3]="Reconnecting",e[e.Error=4]="Error"}(Lu||(Lu={})),function(e){e[e.Communication=0]="Communication",e[e.LiveBroadcasting=1]="LiveBroadcasting"}(Pu||(Pu={})),function(e){e[e.Host=0]="Host",e[e.Audience=1]="Audience"}(Bu||(Bu={}));var Uu,Fu=Jr.attach({proxyMethods:!1})(Mu=function(e){l(h,e);var t,n,i,s,u=ju(h);function h(e,t){var n;a(this,h),(n=u.call(this)).logger=void 0,n.sceneId=void 0,n._localUser=void 0,n._sceneState=Lu.Idle,n._initialSync=!1,n.dataStore=void 0,n._rtmManager=void 0,n._rtcManager=void 0,n._rtmChannel=void 0,n._rtcChannel=void 0,n._rtmChannelObserver=void 0,n._synchronizer=void 0,n.createTs=void 0,n.sceneId=e,n._rtmManager=t.rtm,n._rtcManager=t.rtc,n._rtmChannel=t.rtmChannel,n._rtmChannelObserver=t.rtmChannelObserver,n._rtcChannel=t.rtcChannel,n.dataStore=new Nu;var r=n._rtcChannel,i=n._rtmManager;return r.onNetworkStats((function(e){n.emit(yc.NetworkStats,e)})),r.onAudioVolumeIndication((function(e){n.emit(yc.AudioVolumes,e)})),r.onConnectionStageChanged((function(e,t){n.emit(yc.RtcConnectionStateChanged,e,t)})),i.on(yc.RtmConnectionStateChanged,(function(e){n._recalculateRteState(e.reason)})),n}return c(h,[{key:"localUser",get:function(){return this._localUser}},{key:"rtcSid",get:function(){return this._rtcChannel.getRtcSid()}},{key:"rtmSid",get:function(){return this._rtmManager.sessionId}},{key:"joinScene",value:(s=o(A().mark((function e(t){var n,r,i,o,a,s,c,u,l,h,d,f;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._sceneState===Lu.Idle){e.next=3;break}return mr.warn("scene not idle"),e.abrupt("return");case 3:return e.prev=3,this._setRteConnectionState(Lu.Connecting),n=Ih.engine.getAgoraMediaControl(),e.next=8,Ih.engine.getApiService().entryRoom({userUuid:Ur.shared.userId,roomUuid:this.sceneId,userName:t.userName,streamUuid:t.streamId,role:t.userRole,stream:{videoSourceState:n.createCameraVideoTrack().state,audioSourceState:n.createMicrophoneAudioTrack().state}});case 8:return r=e.sent,i=r.user,o=r.room,this.createTs=o.roomState.createTime,Object.assign(Ur.shared.service.headers,{token:i.userToken}),e.next=15,this._rtmManager.join(this._rtmChannel,this._rtmChannelObserver,this.sceneId);case 15:return a=i.streamUuid,s=i.userName,c=i.userRole,u=i.rtcToken,l=i.streams,h=void 0===l?[]:l,this._localUser=new wu(this,{userUuid:Ur.shared.userId,userName:s,userRole:c,streamUuid:a,sceneId:this.sceneId,rtcToken:u,rtc:this._rtcManager}),2===h.length&&(d=h.find((function(e){return e.streamUuid!==a})),this._localUser.subStream=d),this._synchronizer=new Bc(this.dataStore,{sceneId:this.sceneId,userUuid:Ur.shared.userId,streamUuid:a,channelObserver:this._rtmChannelObserver,rtm:this._rtmManager}),this._addEventListeners(this._synchronizer.handle),e.next=22,Ih.engine.getApiService().syncSnapShot(this.sceneId);case 22:f=e.sent,this._synchronizer.syncSnapshot(bc.fromData(f)),e.next=30;break;case 26:return e.prev=26,e.t0=e.catch(3),this._cleanup(),e.abrupt("return",Br.shared.handleThrowableError(Rr.RTE_ERR_JOIN_SCENE_FAILED,e.t0));case 30:case"end":return e.stop()}}),e,this,[[3,26]])}))),function(e){return s.apply(this,arguments)})},{key:"leaveScene",value:(i=o(A().mark((function e(){var t,n,i;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Du(this._rtmManager.leave(this.sceneId));case 2:t=e.sent,n=r(t,1),(i=n[0])&&Br.shared.handleNonThrowableError(Rr.RTE_ERR_LEAVE_SCENE_FAIL,i),this._cleanup();case 7:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"joinRTC",value:(n=o(A().mark((function e(t){var n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._initialSync&&this.localUser){e.next=2;break}return e.abrupt("return",Br.shared.handleThrowableError(Rr.RTE_ERR_SCENE_NOT_READY,new Error("try to join rtc before scene is ready ".concat(!!this._initialSync," ").concat(!!this.localUser))));case 2:if(!t){e.next=8;break}return e.next=5,this._rtcChannel.join(t.token,t.streamUuid,t.connectionType);case 5:case 10:return e.abrupt("return",e.sent);case 8:return e.next=10,this._rtcChannel.join(this.localUser.rtcToken,null===(n=this.localUser)||void 0===n?void 0:n.streamUuid);case 11:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"leaveRTC",value:(t=o(A().mark((function e(t){var n,i,o;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Du(this._rtcChannel.leave(t));case 2:n=e.sent,i=r(n,1),(o=i[0])&&Br.shared.handleNonThrowableError(Rr.RTC_ERR_LEAVE_CHANNEL_FAIL,o);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"_cleanup",value:function(){var e;null===(e=this._localUser)||void 0===e||e.destroy(),this._localUser=void 0,this._synchronizer=void 0,this._initialSync=!1}},{key:"_setRteConnectionState",value:function(e,t){var n=this._sceneState;this._sceneState=e,this._sceneState!==n&&this.emit(yc.RteConnectionStateChanged,e,t)}},{key:"_setInitialSnapshotSync",value:function(e){this._initialSync=e,this._recalculateRteState()}},{key:"_recalculateRteState",value:function(e){var t=this._rtmManager.connectionState,n=this._initialSync;return t===Wc.DISCONNECTED?this._setRteConnectionState(Lu.Idle):t===Wc.CONNECTING?this._setRteConnectionState(Lu.Connecting):t===Wc.CONNECTED?n?this._setRteConnectionState(Lu.Connected):this._setRteConnectionState(Lu.Connecting):t===Wc.RECONNECTING?n?this._setRteConnectionState(Lu.Reconnecting):this._setRteConnectionState(Lu.Connecting):t===Wc.ABORTED?this._setRteConnectionState(Lu.Error,e):void mr.warn("unhandled rte connection state: rtm: ".concat(t,", snapshot: ").concat(n))}},{key:"_addEventListeners",value:function(e){var t=this;e.on(yc.SnapshotUpdated,(function(){t.logger.info("snapshot updated"),t._setInitialSnapshotSync(!0);var e=Array.from(t.dataStore.users.values());e.length>0&&t._handleUserAdded(e),t._handleRoomPropertyChange(Array.from(t.dataStore.roomProperties.keys()),t.dataStore.roomProperties,{},{})})),e.on(yc.ChatReceived,(function(e){t.emit(yc.ChatReceived,e)})),e.on(yc.UserAdded,(function(e){t.logger.info("user-added [".concat(e.join(","),"]")),t._handleUserAdded(e)})),e.on(yc.UserUpdated,(function(e){t.logger.info("user-updated ".concat(e))})),e.on(yc.UserRemoved,(function(e,n){t.logger.info("user-removed [".concat(e.join(","),"]")),t._handleUserRemoved(e,n)})),e.on(yc.RoomPropertyUpdated,(function(e,n,r,i){t.logger.debug("room-property-updated ".concat(Ou(n)," ").concat(Ou(r)," ").concat(Ou(i))),t._handleRoomPropertyChange(e,n,r,i)})),e.on(yc.UserPropertyUpdated,(function(e,n,r,i){t.logger.debug("user-property-updated ".concat(e," ").concat(Ou(n)," ").concat(Ou(r)," ").concat(Ou(i))),t.emit(yc.UserPropertyUpdated,e,n,r,i)})),e.on(yc.LocalStreamAdded,(function(e,n){t.logger.info("local-stream-added [".concat(e.join(","),"]")),t._handleLocalStreamAdded(e,n)})),e.on(yc.LocalStreamUpdate,(function(e,n){t.logger.info("local-stream-upsert [".concat(e.join(","),"]")),t._handleLocalStreamChanged(e,n)})),e.on(yc.LocalStreamRemove,(function(e,n){t.logger.info("local-stream-removed [".concat(e.join(","),"]")),t._handleLocalStreamRemoved(e,n)})),e.on(yc.RemoteStreamAdded,(function(e,n){t.logger.info("remote-stream-added [".concat(e.join(","),"]")),t._handleRemoteStreamsAdded(e,n)})),e.on(yc.RemoteStreamUpdate,(function(e,n){t.logger.info("remote-stream-upsert [".concat(e.join(","),"]")),t._handleRemoteStreamsChanged(e,n)})),e.on(yc.RemoteStreamRemove,(function(e,n){t.logger.info("remote-stream-removed [".concat(e.join(","),"]")),t._handleRemoteStreamsRemoved(e,n)})),e.on(yc.ChatUserMessage,(function(e){t.emit(yc.ChatUserMessage,e)}))}},{key:"_handleLocalStreamAdded",value:function(e,t){var n=this;0!==e.length&&(this.logger.info("_handleLocalStreamAdded [".concat(e.join(","),"]")),e.forEach((function(e){var t="secondary"===e.streamName||e.videoSourceType===$c.ScreenShare?su.sub:su.main;switch(e.videoState){case tu.Published:e.videoSourceType===$c.Camera?n._rtcChannel.muteLocalVideoStream(!1,t):e.videoSourceType===$c.ScreenShare&&n._rtcChannel.muteLocalScreenStream(!1,t);break;case tu.Unpublished:e.videoSourceType===$c.Camera?n._rtcChannel.muteLocalVideoStream(!0,t):e.videoSourceType===$c.ScreenShare&&n._rtcChannel.muteLocalScreenStream(!0,t)}switch(e.audioState){case tu.Published:n._rtcChannel.muteLocalAudioStream(!1);break;case tu.Unpublished:n._rtcChannel.muteLocalAudioStream(!0)}})),this.emit(yc.LocalStreamAdded,e,t))}},{key:"_handleLocalStreamChanged",value:function(e,t){var n=this;0!==e.length&&(this.logger.info("_handleLocalStreamChanged [".concat(e.join(","),"]")),e.forEach((function(e){var t="secondary"===e.streamName||e.videoSourceType===$c.ScreenShare?su.sub:su.main;switch(e.videoState){case tu.Published:e.videoSourceType===$c.Camera?n._rtcChannel.muteLocalVideoStream(!1,t):e.videoSourceType===$c.ScreenShare&&n._rtcChannel.muteLocalScreenStream(!1,t);break;case tu.Unpublished:e.videoSourceType===$c.Camera?n._rtcChannel.muteLocalVideoStream(!0,t):e.videoSourceType===$c.ScreenShare&&n._rtcChannel.muteLocalScreenStream(!0,t)}switch(e.audioState){case tu.Published:n._rtcChannel.muteLocalAudioStream(!1);break;case tu.Unpublished:n._rtcChannel.muteLocalAudioStream(!0)}})),this.emit(yc.LocalStreamUpdate,e,t))}},{key:"_handleLocalStreamRemoved",value:function(e,t){var n=this;0!==e.length&&(this.logger.info("_handleLocalStreamRemoved [".concat(e.join(","),"]")),e.forEach((function(e){var t="secondary"===e.streamName||e.videoSourceType===$c.ScreenShare?su.sub:su.main;e.videoSourceType===$c.Camera?(n._rtcChannel.muteLocalVideoStream(!0,t),Ih.engine.getAgoraMediaControl().createCameraVideoTrack().stop()):e.videoSourceType===$c.ScreenShare?(n._rtcChannel.muteLocalScreenStream(!0,t),Ih.engine.getAgoraMediaControl().createScreenShareTrack().stop()):(e.videoSourceType,$c.None),e.audioSourceType===eu.Mic?(n._rtcChannel.muteLocalAudioStream(!0,t),t===su.main&&Ih.engine.getAgoraMediaControl().createMicrophoneAudioTrack().stop()):(e.audioSourceType,eu.None)})),this.emit(yc.LocalStreamRemove,e,t))}},{key:"_handleRemoteStreamsAdded",value:function(e,t){var n=this;0!==e.length&&(this.logger.info("_handleRemoteStreamsAdded [".concat(e.join(","),"]")),e.forEach((function(e){switch(e.videoState){case tu.Published:n._rtcChannel.muteRemoteVideoStream(e.streamUuid,!1);break;case tu.Unpublished:n._rtcChannel.muteRemoteVideoStream(e.streamUuid,!0)}switch(e.audioState){case tu.Published:n._rtcChannel.muteRemoteAudioStream(e.streamUuid,!1);break;case tu.Unpublished:n._rtcChannel.muteRemoteAudioStream(e.streamUuid,!0)}})),this.emit(yc.RemoteStreamAdded,e,t))}},{key:"_handleRemoteStreamsChanged",value:function(e,t){var n=this;this.logger.info("_handleRemoteStreamsChanged [".concat(e.join(","),"]")),e.forEach((function(e){switch(e.videoState){case tu.Published:n._rtcChannel.muteRemoteVideoStream(e.streamUuid,!1);break;case tu.Unpublished:n._rtcChannel.muteRemoteVideoStream(e.streamUuid,!0)}switch(e.audioState){case tu.Published:n._rtcChannel.muteRemoteAudioStream(e.streamUuid,!1);break;case tu.Unpublished:n._rtcChannel.muteRemoteAudioStream(e.streamUuid,!0)}})),this.emit(yc.RemoteStreamUpdate,e,t)}},{key:"_handleRemoteStreamsRemoved",value:function(e,t){var n=this;0!==e.length&&(this.logger.info("_handleRemoteStreamsRemoved [".concat(e.join(","),"]")),e.forEach((function(e){n._rtcChannel.muteRemoteVideoStream(e.streamUuid,!0),n._rtcChannel.muteRemoteAudioStream(e.streamUuid,!0)})),this.emit(yc.RemoteStreamRemove,e,t))}},{key:"_handleUserAdded",value:function(e){var t=this,n=[],r=[];e.forEach((function(e){var i;if((null===(i=t.localUser)||void 0===i?void 0:i.userUuid)===e.userUuid){var o=t.dataStore.findUserStreams(e.userUuid);o&&(n=n.concat(o))}else{var a=t.dataStore.findUserStreams(e.userUuid);a&&(r=r.concat(a))}})),this._handleLocalStreamAdded(n),this._handleRemoteStreamsAdded(r),this.emit(yc.UserAdded,e)}},{key:"_handleUserRemoved",value:function(e,t){var n=this,r=[],i=[];e.forEach((function(e){var t;if((null===(t=n.localUser)||void 0===t?void 0:t.userUuid)===e.userUuid){var o=n.dataStore.findUserStreams(e.userUuid);o&&(r=r.concat(o))}else{var a=n.dataStore.findUserStreams(e.userUuid);a&&(i=i.concat(a))}})),this._handleLocalStreamRemoved(r),this._handleRemoteStreamsRemoved(i),this.emit(yc.UserRemoved,e,t)}},{key:"_handleRoomPropertyChange",value:function(e,t,n,r){this.emit(yc.RoomPropertyUpdated,e,t.toObject(),n,r)}}]),h}(Mc.EventEmitter))||Mu;function Qu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var i=p(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f(this,n)}}!function(e){e.cameraListChanged="camera-list-changed",e.localAudioVolume="local-audio-volume",e.localAudioRecordingListChanged="local-audio-recording-list-changed",e.localVideoTrackChanged="local-video-track-changed",e.localAudioTrackChanged="local-audio-track-changed",e.trackStateChanged="track-state-changed",e.playbackDeviceListChanged="playback-device-list-changed",e.recordingDeviceListChanged="recording-device-list-changed",e.localAudioPlaybackVolumeIndicator="start-test-audio-playback-volume-indicator",e.audioPlaybackStateChanged="audio-playback-state-changed"}(Uu||(Uu={}));var Gu,qu=function(e){l(n,e);var t=Qu(n);function n(e){var r;return a(this,n),(r=t.call(this)).camera=void 0,r.microphone=void 0,r.screen=void 0,r._rtc=void 0,r._rtc=e,r._addEventListener(e),r}return c(n,[{key:"_addEventListener",value:function(e){var t=this;e.getVideoDeviceManager().onLocalCameraListChanged((function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.emit.apply(t,[Uu.cameraListChanged].concat(n))})),e.getAudioDeviceManager().onLocalRecordingDeviceListChanged((function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.emit.apply(t,[Uu.recordingDeviceListChanged].concat(n))})),e.getAudioDeviceManager().onLocalPlaybackDeviceListChanged((function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.emit.apply(t,[Uu.playbackDeviceListChanged].concat(n))})),e.getVideoDeviceManager().onLocalVideoTrackStateChanged((function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.emit.apply(t,[Uu.localVideoTrackChanged].concat(n))})),e.getAudioDeviceManager().onLocalAudioTrackStateChanged((function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.emit.apply(t,[Uu.localAudioTrackChanged].concat(n))})),e.getAudioDeviceManager().onLocalAudioVolume((function(e){t.emit(Uu.localAudioVolume,e)})),e.getAudioDeviceManager().onLocalAudioPlaybackTestVolumeChanged((function(e){t.emit(Uu.localAudioPlaybackVolumeIndicator,e)})),e.onLocalScreenShareTrackStateChanged((function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.emit.apply(t,[Uu.localVideoTrackChanged].concat(n))}))}},{key:"createCameraVideoTrack",value:function(){return this.camera||(this.camera=new uu(this._rtc)),this.camera}},{key:"createMicrophoneAudioTrack",value:function(){return this.microphone||(this.microphone=new lu(this._rtc)),this.microphone}},{key:"createScreenShareTrack",value:function(){return this.screen||(this.screen=new hu(this._rtc)),this.screen}},{key:"getVideoCameraList",value:function(){return this._rtc.getVideoDeviceManager().getVideoCameraDevices()}},{key:"getAudioRecordingList",value:function(){return this._rtc.getAudioDeviceManager().getAudioRecordingDevices()}},{key:"getAudioPlaybackList",value:function(){return this._rtc.getAudioDeviceManager().getAudioPlaybackDevices()}},{key:"isScreenDeviceEnumerateSupported",value:function(){return this._rtc.isScreenDeviceEnumerateSupported()}},{key:"hasScreenSharePermission",value:function(){return this._rtc.hasScreenSharePermission()}},{key:"getWindowDevices",value:function(){return this._rtc.getWindowDevices()}},{key:"getDisplayDevices",value:function(){return this._rtc.getDisplayDevices()}},{key:"startAudioRecordingDeviceTest",value:function(e){return this._rtc.startAudioRecordingDeviceTest(e)}},{key:"stopAudioRecordingDeviceTest",value:function(){return this._rtc.stopAudioRecordingDeviceTest()}},{key:"startAudioPlaybackDeviceTest",value:function(e){return this._rtc.startAudioPlaybackDeviceTest(e)}},{key:"stopAudioPlaybackDeviceTest",value:function(){return this._rtc.stopAudioPlaybackDeviceTest()}},{key:"setBeautyEffectOptions",value:function(e,t){return this._rtc.setBeautyEffectOptions(e,t)}}]),n}(y);!function(e){e[e.continue=0]="continue",e[e.exit=1]="exit"}(Gu||(Gu={}));var Vu=function(e){return new Promise(function(){var t=o(A().mark((function t(n,r){var i;return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e();case 3:i=t.sent,n(i),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),r(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,n){return t.apply(this,arguments)}}())},Ku=function(){function e(t){a(this,e),this.__arguments=t,this.__timer=void 0,this.__running=!1}return c(e,[{key:"start",value:function(){var e=this;if(this.__running)throw new Error("Task is already running");this.__running=!0,this.__arguments.immediate?Vu(this.__arguments.runnable).then((function(){e.poll()})):this.poll()}},{key:"poll",value:function(){var e=this;if(!this.__running)return this.stop();this.__timer=setTimeout(o(A().mark((function t(){return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Vu(e.__arguments.runnable).catch((function(t){e.__arguments.onFail(t)===Gu.exit&&(e.__running=!1)}));case 2:!e.__arguments.once&&e.poll();case 3:case"end":return t.stop()}}),t)}))),this.__arguments.interval)}},{key:"stop",value:function(){clearTimeout(this.__timer),this.__running=!1}},{key:"isStopped",get:function(){return!this.__running}}]),e}(),Hu=function(){function e(t){a(this,e),this.__arguments=t,this.__timer=void 0,this.__running=!1}return c(e,[{key:"start",value:function(){var e=this;if(this.__running)throw new Error("Task is already running");this.__running=!0;var t=this.__arguments,n=t.immediate,r=t.interval;n&&this.poll(),this.__timer=setInterval((function(){e.poll()}),r)}},{key:"poll",value:function(){var e=this;if(!this.__running)return this.stop();var t=this.__arguments.runnable;Vu(t).catch((function(t){e.__arguments.onFail(t)===Gu.exit&&(e.__running=!1)}))}},{key:"stop",value:function(){clearInterval(this.__timer),this.__running=!1}},{key:"isStopped",get:function(){return!this.__running}}]),e}(),Wu=function(){function e(){a(this,e)}return c(e,null,[{key:"second",value:function(e){return this._factors.second*e}},{key:"minute",value:function(e){return this._factors.minute*e}},{key:"hour",value:function(e){return this._factors.hour*e}}]),e}();Wu._factors={hour:36e5,minute:6e4,second:1e3};var zu=function(){function e(){a(this,e),this._tasks=new WeakSet}return c(e,[{key:"addPollingTask",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){return Gu.continue},i=new Ku({runnable:e,interval:t,immediate:n,onFail:r});return i.start(),this._tasks.add(i),i}},{key:"addDelayTask",value:function(e,t){var n=this,r=new Ku({runnable:e,interval:t,once:!0,onFail:function(){return Gu.exit},onComplete:function(){n._tasks.delete(r)}});return r.start(),this._tasks.add(r),r}},{key:"addIntervalTask",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){return Gu.continue},i=new Hu({runnable:e,interval:t,immediate:n,onFail:r});return i.start(),this._tasks.add(i),i}}]),e}(),Yu=function(){return new zu},Ju=Yu();function Xu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var i=p(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f(this,n)}}var Zu=function(e){l(n,e);var t=Xu(n);function n(){return a(this,n),t.apply(this,arguments)}return c(n)}(y),$u=function(e){l(n,e);var t=Xu(n);function n(){return a(this,n),t.apply(this,arguments)}return c(n)}(y),el=function(e){l(n,e);var t=Xu(n);function n(){return a(this,n),t.apply(this,arguments)}return c(n)}(y),tl=function(e){l(n,e);var t=Xu(n);function n(){return a(this,n),t.apply(this,arguments)}return c(n,null,[{key:"getRtcVersion",value:function(){return""}}]),n}(y);function nl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var i=p(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f(this,n)}}var rl=function(e){l(n,e);var t=nl(n);function n(e){var r;return a(this,n),(r=t.call(this)).adapter=e,r._deviceInfo=new Map,r._deviceIds=new Set,r._initializeDeviceList(),r}return c(n,[{key:"onLocalVideoTrackStateChanged",value:function(e){return this.adapter.onLocalVideoTrackStateChanged(e),0}},{key:"onLocalCameraListChanged",value:function(e){return this.on(Uu.cameraListChanged,e),0}},{key:"getVideoCameraDevices",value:function(){return this.cameraList}},{key:"cameraList",get:function(){var e=this,t=[];return this._deviceIds.forEach((function(n){var r=e._deviceInfo.get(n);r&&t.push({deviceid:r.deviceid,devicename:r.devicename})})),t}},{key:"_emitCameraListChanged",value:function(e,t,n){this.emit(Uu.cameraListChanged,e,t,n)}},{key:"_initializeDeviceList",value:function(){var e=this;this.fetchDeviceList(),this.adapter.rtcEngine.on("videoDeviceStateChanged",(function(){e.fetchDeviceList()}))}},{key:"fetchDeviceList",value:function(){var e=this,t=this.adapter.rtcEngine.getVideoDevices(),n=[];this._deviceIds.clear(),this._deviceInfo.clear(),t.forEach((function(t){e._deviceInfo.set(t.deviceid,t),e._deviceIds.add(t.deviceid),n.push(t)})),this._emitCameraListChanged(!0,n,this.cameraList)}}]),n}(Zu),il=function(e){l(n,e);var t=nl(n);function n(e){var r;return a(this,n),(r=t.call(this)).adapter=e,r._recordingDeviceInfo=new Map,r._recordingDeviceIds=new Set,r._playbackDeviceInfo=new Map,r._playbackDeviceIds=new Set,r._initializeDeviceList(),r}return c(n,[{key:"_initializeDeviceList",value:function(){var e=this;this._fetchRecordingDeviceList(),this._fetchPlaybackDeviceList(),this.adapter.rtcEngine.on("audioDeviceStateChanged",(function(){e._fetchRecordingDeviceList(),e._fetchPlaybackDeviceList()}))}},{key:"onLocalAudioPlaybackTestVolumeChanged",value:function(e){return this.adapter.onLocalAudioPlaybackTestVolumeChanged(e)}},{key:"onLocalAudioTrackStateChanged",value:function(e){return this.adapter.onLocalAudioTrackStateChanged(e)}},{key:"onLocalAudioVolume",value:function(e){return this.adapter.onLocalAudioVolume(e)}},{key:"onLocalRecordingDeviceListChanged",value:function(e){return this.on(Uu.recordingDeviceListChanged,e),0}},{key:"onLocalPlaybackDeviceListChanged",value:function(e){return this.on(Uu.playbackDeviceListChanged,e),0}},{key:"getAudioPlaybackDevices",value:function(){return this.speakerList}},{key:"getAudioRecordingDevices",value:function(){return this.microphoneList}},{key:"microphoneList",get:function(){var e=this,t=[];return this._recordingDeviceIds.forEach((function(n){var r=e._recordingDeviceInfo.get(n);r&&t.push({deviceid:r.deviceid,devicename:r.devicename})})),t}},{key:"speakerList",get:function(){var e=this,t=[];return this._playbackDeviceIds.forEach((function(n){var r=e._playbackDeviceInfo.get(n);r&&t.push({deviceid:r.deviceid,devicename:r.devicename})})),t}},{key:"_emitPlaybackListChanged",value:function(e,t,n){this.emit(Uu.playbackDeviceListChanged,e,t,n)}},{key:"_emitRecordingListChanged",value:function(e,t,n){this.emit(Uu.recordingDeviceListChanged,e,t,n)}},{key:"_fetchPlaybackDeviceList",value:function(){var e=this,t=this.adapter.rtcEngine.getAudioPlaybackDevices(),n=[];this._playbackDeviceInfo.clear(),this._playbackDeviceIds.clear(),t.forEach((function(t){e._playbackDeviceInfo.set(t.deviceid,t),e._playbackDeviceIds.add(t.deviceid),n.push(t)})),this._emitPlaybackListChanged(!0,n,this.speakerList)}},{key:"_fetchRecordingDeviceList",value:function(){var e=this,t=this.adapter.rtcEngine.getAudioRecordingDevices(),n=[];this._recordingDeviceInfo.clear(),this._recordingDeviceIds.clear(),t.forEach((function(t){e._recordingDeviceInfo.set(t.deviceid,t),e._recordingDeviceIds.add(t.deviceid),n.push(t)})),this._emitRecordingListChanged(!0,n,this.microphoneList)}}]),n}($u),ol=function(){function e(){a(this,e),this.rtt=void 0,this.downlinkNetworkQuality=0,this.uplinkNetworkQuality=0,this.end2EndDelay=0,this.txVideoPacketLoss=0,this.rxVideoPacketLoss=0,this.cpu=-1,this.cpuTotal=-1}return c(e,[{key:"toAGQuality",value:function(e){var t=fu.unknown;return void 0!==e&&(0===e?t=fu.unknown:5===e||6===e?t=fu.bad:4===e?t=fu.poor:e>=2&&e<=3?t=fu.good:e>=1&&e<=2&&(t=fu.great)),t}},{key:"networkStats",value:function(){return{packetLoss:Math.max(this.txVideoPacketLoss,this.rxVideoPacketLoss),cpu:this.cpu,cpuTotal:this.cpuTotal,delay:this.end2EndDelay,networkQuality:Math.min(this.toAGQuality(this.downlinkNetworkQuality),this.toAGQuality(this.uplinkNetworkQuality))}}}]),e}();function al(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var i=p(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f(this,n)}}var sl,cl=function(e){l(r,e);var t,n=al(r);function r(){var e;a(this,r);for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return(e=n.call.apply(n,[this].concat(i))).logger=void 0,e.running=!1,e.runnable=!0,e}return c(r,[{key:"run",value:function(){var e=this;if(!this.running&&this.runnable){this.running=!0;var t=setTimeout(o(A().mark((function n(){return A().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(t),n.next=3,e.onExecution();case 3:e.running=!1;case 4:case"end":return n.stop()}}),n)}))),0)}}},{key:"onExecution",value:(t=o(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})},{key:"stop",value:function(){this.running=!1}}]),r}(y);function ul(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var i=p(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f(this,n)}}var ll,hl,dl,fl,pl=Jr.attach({proxyMethods:!1})(sl=function(e){l(r,e);var t,n=ul(r);function r(e){var t;return a(this,r),(t=n.call(this)).logger=void 0,t.canvas=void 0,t.trackState=gu.stopped,t.cameraEnable=!1,t._adapter=void 0,t.currentCanvas=void 0,t.videoStreamState=0,t._adapter=e,t}return c(r,[{key:"setCameraTrackState",value:function(e,t){this.trackState!==e&&(this.trackState=e,this.emit(Uu.trackStateChanged,e,$c.Camera,t))}},{key:"onExecution",value:(t=o(A().mark((function e(){var t,n=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.logger.debug("thread notify start..."),!this.cameraEnable){e.next=17;break}if(0!==(t=this.videoStreamState)&&3!==t){e.next=10;break}return e.delegateYield(A().mark((function e(){var r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.logger.debug("starting camera..."),n.setCameraTrackState(gu.starting),r=void 0,e.prev=3,0!==t){e.next=7;break}return e.next=7,new Promise((function(e){r=function(t){1!==t&&2!==t||e()},n._adapter.rtcEngine.on("localVideoStateChanged",r),n._adapter.rtcEngine.enableLocalVideo(!0);var t=Ur.shared.rtcConfigs.defaultCameraEncoderConfigurations,i=t?{width:t.width,height:t.height,frameRate:t.frameRate,bitrate:t.bitrate,minFrameRate:0,orientationMode:0,minBitrate:0,mirrorMode:0,degradationPreference:1}:void 0;i&&(n._adapter.rtcEngine.setVideoEncoderConfiguration(i),n._adapter.rtcEngine.setVideoRenderFPS(i.frameRate))}));case 7:n.setCameraTrackState(gu.started),r&&n._adapter.rtcEngine.off("localVideoStateChanged",r),n.logger.debug("camera started."),e.next=17;break;case 12:return e.prev=12,e.t0=e.catch(3),n.setCameraTrackState(gu.error),r&&n._adapter.rtcEngine.off("localVideoStateChanged",r),e.abrupt("return","break");case 17:case"end":return e.stop()}}),e,null,[[3,12]])}))(),"t0",5);case 5:if("break"!==e.t0){e.next=8;break}return e.abrupt("break",23);case 8:e.next=11;break;case 10:this.trackState!==gu.started&&this.setCameraTrackState(gu.started);case 11:if(this.trackState!==gu.started){e.next=15;break}return(!this.currentCanvas&&this.canvas||this.currentCanvas&&this.canvas&&this.canvas.view!==this.currentCanvas.view)&&(this._adapter.rtcEngine.setupLocalVideo(this.canvas.view),this.currentCanvas=this.canvas),this.currentCanvas&&this.currentCanvas.view,e.abrupt("break",23);case 15:e.next=20;break;case 17:if(this.trackState!==gu.stopped&&(this.logger.debug("stopping camera..."),this._adapter.rtcEngine.enableLocalVideo(!1),this.currentCanvas&&this.currentCanvas.view,this.setCameraTrackState(gu.stopped),this.logger.debug("camera stopped")),this.trackState!==gu.stopped){e.next=20;break}return e.abrupt("break",23);case 20:return e.next=22,new Promise((function(e){return setTimeout(e,500)}));case 22:if(this.running){e.next=0;break}case 23:this.logger.debug("thread sleep...");case 24:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),r}(cl))||sl;function gl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Al(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var i=p(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f(this,n)}}var vl=c((function e(){a(this,e)}));try{vl=__webpack_require__(5455).default}catch(e){Ur.platform===Or.Electron&&mr.warn("load electron sdk failed: ".concat(e))}var ml=Jr.attach({proxyMethods:!1})((dl=hl=function(e){l(n,e);var t=Al(n);function n(){var e;a(this,n),(e=t.call(this)).logger=void 0,e._vdm=void 0,e._adm=void 0,e._channels=new Map,e._configs={},e._screenEventBus=new y,e.cameraThread=void 0,e._localVideoEnabled=!1,e._localAudioEnabled=!1,e.screenShareId=void 0,e.screenShareType=void 0,n.rtcEngine||(n.rtcEngine=new vl);var r=n.logPath,i=0;if(r){mr.info("[RtcAdapterElectron] sdk log path: ".concat(r));window.require("path");i=e.rtcEngine.initialize(Ur.shared.appId,e._region,{filePath:r,fileSize:1024,level:1})}else mr.warn("[RtcAdapterElectron] no log path found, sdk logs will be put in default folder"),i=e.rtcEngine.initialize(Ur.shared.appId,e._region);return 0!==i&&Br.shared.handleThrowableError(Rr.RTC_ERR_RTC_ENGINE_INITIALZIE_FAILED,new Error("rtc engine initialize failed ".concat(i))),e._adm=new il(d(e)),e._vdm=new rl(d(e)),e.cameraThread=new pl(d(e)),e._addEventListeners(),e}return c(n,[{key:"configs",get:function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gl(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this._configs)}},{key:"rtcEngine",get:function(){return n.rtcEngine}},{key:"createRtcChannel",value:function(e,t){var n=this._channels.get(e);return n||(n=new yl(e,this.configs,t),this._channels.set(e,n)),n}},{key:"getVideoDeviceManager",value:function(){return this._vdm}},{key:"getAudioDeviceManager",value:function(){return this._adm}},{key:"getWindowDevices",value:function(){return this.rtcEngine.getScreenWindowsInfo().map((function(e){return{id:e.windowId,type:mu.Window,title:e.name||e.ownerName,image:e.image,isCurrent:"".concat(e.processId)===window.main_pid}}))}},{key:"getDiaplayDevices",value:function(){return this.rtcEngine.getScreenDisplaysInfo().map((function(e){return{id:e.displayId,type:mu.Screen,title:"Display",image:e.image}}))}},{key:"isScreenDeviceEnumerateSupported",value:function(){return!0}},{key:"setVideoCameraDevice",value:function(e){return this.rtcEngine.setVideoDevice(e)}},{key:"setAudioRecordingDevice",value:function(e){return this.rtcEngine.setAudioRecordingDevice(e)}},{key:"setAudioPlaybackDevice",value:function(e){return this.rtcEngine.setAudioPlaybackDevice(e)}},{key:"enableLocalVideo",value:function(e){return this._localVideoEnabled=e,this.updateRole(),this.cameraThread.cameraEnable=e,this.cameraThread.run(),0}},{key:"enableLocalAudio",value:function(e){return this._localAudioEnabled=e,this.updateRole(),this.rtcEngine.enableLocalAudio(e)}},{key:"setupLocalVideo",value:function(e,t){return t===$c.Camera?(this.cameraThread.canvas=e,this.cameraThread.run()):t===$c.ScreenShare&&this.rtcEngine.setupLocalVideoSource(e.view),0}},{key:"setupRemoteVideo",value:function(e){return this.rtcEngine.setupRemoteVideo(+e.streamUuid,e.view),this.rtcEngine.setupViewContentMode(+e.streamUuid,e.renderMode===yu.fill?0:1,void 0),0}},{key:"startAudioRecordingDeviceTest",value:function(e){return this.rtcEngine.startAudioRecordingDeviceTest(e)}},{key:"stopAudioRecordingDeviceTest",value:function(){return this.rtcEngine.stopAudioRecordingDeviceTest()}},{key:"startAudioPlaybackDeviceTest",value:function(e){return this.rtcEngine.startAudioPlaybackDeviceTest(e)}},{key:"stopAudioPlaybackDeviceTest",value:function(){return this.rtcEngine.stopAudioPlaybackDeviceTest()}},{key:"startScreenCapture",value:function(e,t){return this.rtcEngine.videoSourceInitialize(Ur.shared.appId),void 0!==e&&(this.screenShareId=e,this.screenShareType=t,this._screenEventBus.emit(Uu.trackStateChanged,gu.started,$c.ScreenShare)),0}},{key:"stopScreenCapture",value:function(){return this.screenShareId=void 0,this.screenShareType=void 0,this.rtcEngine.stopScreenCapture2(),this._screenEventBus.emit(Uu.trackStateChanged,gu.stopped,$c.ScreenShare),0}},{key:"onLocalAudioPlaybackTestVolumeChanged",value:function(e){return this.on(Uu.localAudioPlaybackVolumeIndicator,e),0}},{key:"onLocalVideoTrackStateChanged",value:function(e){return this.cameraThread.on(Uu.trackStateChanged,e),0}},{key:"onLocalAudioTrackStateChanged",value:function(e){return this.on(Uu.localAudioTrackChanged,e),0}},{key:"onLocalAudioVolume",value:function(e){return this.on(Uu.localAudioVolume,e),0}},{key:"onLocalScreenShareTrackStateChanged",value:function(e){return this._screenEventBus.on(Uu.trackStateChanged,e),0}},{key:"setBeautyEffectOptions",value:function(e,t){return this.rtcEngine.setBeautyEffectOptions(e,t)}},{key:"hasScreenSharePermission",value:function(){return!n.remote||"denied"!==n.remote.systemPreferences.getMediaAccessStatus("screen")}},{key:"destroy",value:function(){var e=this.rtcEngine.release();return n.rtcEngine=void 0,e}},{key:"_region",get:function(){switch(Ur.shared.region){case xr.CN:return 4294967295;case xr.AP:return 8;case xr.EU:return 4;case xr.NA:return 2}}},{key:"_addEventListeners",value:function(){var e=this;this.rtcEngine.on("localVideoStateChanged",(function(t,n){e.logger.info("[rtc] video state changed ".concat(t," ").concat(n)),e.cameraThread.videoStreamState=t})),this.rtcEngine.on("localAudioStateChanged",(function(t){0===t&&e.emit(Uu.localAudioTrackChanged,gu.stopped,eu.Mic),2!==t&&1!==t||e.emit(Uu.localAudioTrackChanged,gu.started,eu.Mic)})),this.rtcEngine.on("groupAudioVolumeIndication",(function(t){var n=t.find((function(e){return 0===e.uid})),r=t.find((function(e){return 1===e.uid}));n&&e.emit(Uu.localAudioVolume,n.volume/255),r&&e.emit(Uu.localAudioPlaybackVolumeIndicator,r.volume/255)}))}},{key:"updateRole",value:function(){this._localVideoEnabled||this._localAudioEnabled?(this.logger.info("update rtc role to host"),this.rtcEngine.setClientRole(1)):(this.logger.info("update rtc role to audience"),this.rtcEngine.setClientRole(2))}}],[{key:"remote",get:function(){var e=window.require("electron").remote;if(e)return e;mr.warn("enableRemoteModule is not set, we will not be able to tell you screenshare access status in this case. You can still use screenshare feature though")}},{key:"getRtcVersion",value:function(){if(!this.version){var e=this.rtcEngine;e||(e=new vl),this.version=e.getVersion(),this.rtcEngine||e.release()}var t=this.version,n=t.version,r=t.build;return"".concat(n,".").concat(r)}},{key:"logBasePath",get:function(){if(n.remote)return n.remote.app.getPath("logs")}},{key:"logFolderPath",get:function(){if(this.logBasePath)return window.require("path").resolve(this.logBasePath,"logs")}},{key:"logPath",get:function(){var e=this.logFolderPath;if(e)return window.require("path").resolve(e,"sdk.log")}}]),n}(tl),hl.rtcEngine=void 0,hl.version=void 0,ll=dl))||ll,yl=Jr.attach({proxyMethods:!1})(fl=function(e){l(n,e);var t=Al(n);function n(e,r,i){var o;return a(this,n),(o=t.call(this)).logger=void 0,o.channelName=void 0,o.base=void 0,o._networkStats=new ol,o.channelName=e,o.base=i,Ju.addPollingTask((function(){o.emit(yc.NetworkStats,o._networkStats.networkStats())}),Wu.second(2)),o._addEventListeners(),o}return c(n,[{key:"_channelProfile",get:function(){var e;return null!==(e=Ur.shared.rtcConfigs.channelProfile)&&void 0!==e?e:Pu.LiveBroadcasting}},{key:"getSessionId",value:function(){return this.base.rtcEngine.getCallId()}},{key:"onConnectionStateChanged",value:function(e){return this.on(yc.RtcConnectionStateChanged,e),0}},{key:"leave",value:function(e){return(null!=e?e:su.main)===su.main?this.base.rtcEngine.leaveChannel():this.base.rtcEngine.videoSourceLeave(),Promise.resolve()}},{key:"setChannelProfile",value:function(e){return this.base.rtcEngine.setChannelProfile(e===Pu.Communication?0:1)}},{key:"setClientRole",value:function(e){return this.base.rtcEngine.setClientRole(e===Bu.Host?1:2)}},{key:"onNetworkStats",value:function(e){return this.on(yc.NetworkStats,e),0}},{key:"onAudioVolumeIndication",value:function(e){return this.on(yc.AudioVolumes,e),0}},{key:"muteRemoteVideo",value:function(e,t){return this.base.rtcEngine.muteRemoteVideoStream(+e,t)}},{key:"muteRemoteAudio",value:function(e,t){return this.base.rtcEngine.muteRemoteAudioStream(+e,t)}},{key:"_startScreenCapture",value:function(){var e=this.base.screenShareType,t=this.base.screenShareId;void 0!==t&&void 0!==e&&(e===mu.Screen?this.base.rtcEngine.videoSourceStartScreenCaptureByScreen(t,{width:0,height:0,x:0,y:0},{width:0,height:0,frameRate:0,captureMouseCursor:!0,windowFocus:!0,bitrate:0,excludeWindowCount:0,excludeWindowList:[]}):e===mu.Window&&this.base.rtcEngine.videoSourceStartScreenCaptureByWindow(t,{width:0,height:0,x:0,y:0},{width:0,height:0,frameRate:0,captureMouseCursor:!0,windowFocus:!0,bitrate:0,excludeWindowCount:0,excludeWindowList:[]}))}},{key:"join",value:function(e,t,n){var r=this;return new Promise((function(i,o){var a=r.base.rtcEngine;if(n===su.main)a.once("joinedChannel",(function(){i()})),a.setChannelProfile(r._channelProfile),a.enableAudioVolumeIndication(500,3),a.joinChannel(e,r.channelName,"",+t);else if(n===su.sub){a.once("videoSourceJoinedSuccess",(function(){r._startScreenCapture(),i()})),a.videoSourceSetChannelProfile(r._channelProfile);var s=a.videoSourceJoin(e,r.channelName,"",+t);r.logger.info("[rtc] videosource join ".concat(s))}}))}},{key:"muteLocalVideo",value:function(e,t){return this.base.rtcEngine.muteLocalVideoStream(e)}},{key:"muteLocalAudio",value:function(e,t){return this.base.rtcEngine.muteLocalAudioStream(e)}},{key:"muteLocalScreenShare",value:function(e,t){return 0}},{key:"_getRtcState",value:function(e){switch(e){case 1:case 5:return Au.Idle;case 2:return Au.Connecting;case 3:return Au.Connected;case 4:return Au.Reconnecting}}},{key:"_addEventListeners",value:function(){var e=this,t=this.base.rtcEngine;t.on("networkQuality",(function(t,n,r){0===t&&(e._networkStats.downlinkNetworkQuality=r,e._networkStats.uplinkNetworkQuality=n)})),t.on("rtcStats",(function(t){var n=t.txPacketLossRate,r=t.rxPacketLossRate,i=t.cpuAppUsage,o=t.cpuTotalUsage,a=t.lastmileDelay,s=t.gatewayRtt;e._networkStats.txVideoPacketLoss=n/100,e._networkStats.rxVideoPacketLoss=r/100,e._networkStats.rtt=s,e._networkStats.end2EndDelay=a,e._networkStats.cpu=i/100,e._networkStats.cpuTotal=o/100})),t.on("groupAudioVolumeIndication",(function(t){var n=new Map;t.forEach((function(e){return n.set(""+e.uid,e.volume)})),e.emit(yc.AudioVolumes,n)})),t.on("connectionStateChanged",(function(t){e.emit(yc.RtcConnectionStateChanged,e._getRtcState(t))})),t.on("videoSourceJoinedSuccess",(function(){e.emit(yc.RtcConnectionStateChanged,Au.Connected,su.sub)})),t.on("videoSourceLeaveChannel",(function(){e.emit(yc.RtcConnectionStateChanged,Au.Idle,su.sub)}))}}]),n}(el))||fl,bl=__webpack_require__(5904),_l=__webpack_require__.n(bl);function El(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var i=p(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f(this,n)}}var wl,Il,Cl,Sl,Tl,Rl,kl=function(){function e(t,n,r,i,o){a(this,e),this.streamUuid=void 0,this.channelName=void 0,this.view=void 0,this.mirror=!1,this.renderMode=yu.fill,this.streamUuid=t,this.channelName=n,this.view=r,this.mirror=i,o&&void 0!==o.renderMode&&(this.renderMode=o.renderMode)}return c(e,null,[{key:"key",value:function(e,t){return"".concat(e,"-").concat(t)}}]),e}(),Ol=function(e){l(n,e);var t=El(n);function n(e,r){return a(this,n),t.call(this,"0","",e,r)}return c(n)}(kl);function Nl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var i=p(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f(this,n)}}var xl=function(e){l(n,e);var t=Nl(n);function n(){var e;a(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).track=void 0,e}return c(n)}(cl),Dl=Jr.attach({proxyMethods:!1})(wl=function(e){l(r,e);var t,n=Nl(r);function r(){var e;a(this,r);for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return(e=n.call.apply(n,[this].concat(i))).canvas=void 0,e.trackState=gu.stopped,e.cameraEnable=!1,e._deviceId=void 0,e._deviceChanged=!1,e}return c(r,[{key:"setCameraTrackState",value:function(e,t){this.trackState!==e&&(this.trackState=e,this.emit(Uu.trackStateChanged,e,$c.Camera,t))}},{key:"setDevice",value:function(e){this._deviceId=e,this._deviceChanged=!0}},{key:"onExecution",value:(t=o(A().mark((function e(){var t,n,r,i=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.logger.debug("thread notify start..."),!this.cameraEnable){e.next=40;break}if(!this._deviceChanged){e.next=15;break}if(!this.track){e.next=14;break}if(e.prev=4,!this._deviceId){e.next=8;break}return e.next=8,this.track.setDevice(this._deviceId);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(4),Br.shared.handleNonThrowableError(Rr.RTC_ERR_CAM_ERR,e.t0),e.abrupt("break",46);case 14:this._deviceChanged=!1;case 15:if(this.track){e.next=35;break}return this.logger.debug("starting camera..."),this.setCameraTrackState(gu.starting),e.prev=18,t=Ur.shared.rtcConfigs,n=t.defaultCameraEncoderConfigurations,r=n?{width:n.width,height:n.height,frameRate:n.frameRate,bitrateMax:n.bitrate}:void 0,e.next=24,_l().createCameraVideoTrack({cameraId:this._deviceId,encoderConfig:r});case 24:this.track=e.sent,this.track.on("track-ended",(function(){var e;i.logger.warn("camera track ended"),null===(e=i.track)||void 0===e||e.close(),i.track=void 0,i.setCameraTrackState(gu.stopped)})),this.setCameraTrackState(gu.started),e.next=34;break;case 29:return e.prev=29,e.t1=e.catch(18),Br.shared.handleNonThrowableError(Rr.RTC_ERR_CAM_ERR,e.t1),this.setCameraTrackState(gu.error),e.abrupt("break",46);case 34:this.logger.debug("camera started.");case 35:if(this.track&&this.canvas&&this.canvas.view&&(this.track.play(this.canvas.view),this.setCameraTrackState(gu.started)),!this.track||!(this.canvas&&this.canvas.view&&this.track.isPlaying)&&this.canvas&&this.canvas.view){e.next=38;break}return e.abrupt("break",46);case 38:e.next=43;break;case 40:if(this.track&&(this.logger.debug("stopping camera..."),this.track.stop(),this.track.close(),this.track=void 0,this.setCameraTrackState(gu.stopped),this.logger.debug("camera stopped")),this.track){e.next=43;break}return e.abrupt("break",46);case 43:return e.next=45,new Promise((function(e){return setTimeout(e,500)}));case 45:if(this.running){e.next=0;break}case 46:this.logger.debug("thread sleep...");case 47:case"end":return e.stop()}}),e,this,[[4,10],[18,29]])}))),function(){return t.apply(this,arguments)})}]),r}(xl))||wl,Ll=Jr.attach({proxyMethods:!1})(Il=function(e){l(r,e);var t,n=Nl(r);function r(){var e;a(this,r);for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return(e=n.call.apply(n,[this].concat(i))).micEnable=!1,e._recordingDeviceId=void 0,e._recordingDeviceChanged=!1,e.trackState=gu.stopped,e._volumePollingTask=void 0,e}return c(r,[{key:"setMicTrackState",value:function(e,t){var n,r=this;this.trackState!==e&&(this.trackState=e,this.emit(Uu.trackStateChanged,e,eu.Mic,t),e===gu.started?this._volumePollingTask||(this._volumePollingTask=Ju.addPollingTask((function(){if(r.track){var e=r.track.getVolumeLevel();e=Math.min(3*e,1),r.emit(Uu.localAudioVolume,e)}}),Wu.second(.5))):(null===(n=this._volumePollingTask)||void 0===n||n.stop(),this._volumePollingTask=void 0))}},{key:"setRecordingDevice",value:function(e){this._recordingDeviceId=e,this._recordingDeviceChanged=!0}},{key:"onExecution",value:(t=o(A().mark((function e(){var t=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.logger.debug("thread notify start...");case 1:if(!this.micEnable){e.next=37;break}if(!this._recordingDeviceChanged){e.next=16;break}if(!this.track){e.next=15;break}if(e.prev=4,!this._recordingDeviceId){e.next=8;break}return e.next=8,this.track.setDevice(this._recordingDeviceId);case 8:e.next=15;break;case 10:return e.prev=10,e.t0=e.catch(4),Br.shared.handleNonThrowableError(Rr.RTC_ERR_MIC_ERR,e.t0),this.setMicTrackState(gu.error),e.abrupt("break",43);case 15:this._recordingDeviceChanged=!1;case 16:if(this.track){e.next=33;break}return this.logger.debug("starting mic..."),this.setMicTrackState(gu.starting),e.prev=19,e.next=22,_l().createMicrophoneAudioTrack({microphoneId:this._recordingDeviceId});case 22:this.track=e.sent,this.track.on("track-ended",(function(){var e;t.logger.warn("mic track ended"),null===(e=t.track)||void 0===e||e.close(),t.track=void 0,t.setMicTrackState(gu.stopped)})),this.setMicTrackState(gu.started),e.next=32;break;case 27:return e.prev=27,e.t1=e.catch(19),Br.shared.handleNonThrowableError(Rr.RTC_ERR_MIC_ERR,e.t1),this.setMicTrackState(gu.error),e.abrupt("break",43);case 32:this.logger.debug("mic started.");case 33:if(!this.track){e.next=35;break}return e.abrupt("break",43);case 35:e.next=40;break;case 37:if(this.track&&(this.track.stop(),this.track.close(),this.track=void 0,this.setMicTrackState(gu.stopped)),this.track){e.next=40;break}return e.abrupt("break",43);case 40:return e.next=42,new Promise((function(e){return setTimeout(e,500)}));case 42:if(this.running){e.next=1;break}case 43:this.logger.debug("thread sleep...");case 44:case"end":return e.stop()}}),e,this,[[4,10],[19,27]])}))),function(){return t.apply(this,arguments)})}]),r}(xl))||Il,Pl=Jr.attach({proxyMethods:!1})(Cl=function(e){l(r,e);var t,n=Nl(r);function r(){var e;a(this,r);for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return(e=n.call.apply(n,[this].concat(i))).canvas=void 0,e.audioTrack=void 0,e.withAudio=!1,e.screenEnable=!1,e.trackState=gu.stopped,e}return c(r,[{key:"playing",get:function(){return this.track&&this.track.isPlaying&&(!this.audioTrack||this.audioTrack&&this.audioTrack.isPlaying)}},{key:"setScreenShareTrackState",value:function(e,t){this.trackState!==e&&(this.trackState=e,this.emit(Uu.trackStateChanged,e,$c.ScreenShare,t))}},{key:"onExecution",value:(t=o(A().mark((function e(){var t,n,r,i,o=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.logger.debug("thread notify start..."),!this.screenEnable){e.next=35;break}if(this.track){e.next=30;break}if(this.logger.debug("starting screenshare..."),this.setScreenShareTrackState(gu.starting),e.prev=5,t=Ur.shared.rtcConfigs,n=t.defaultScreenEncoderConfigurations,r=n?{width:n.width,height:n.height,frameRate:n.frameRate,bitrateMax:n.bitrate}:void 0,!this.withAudio){e.next=17;break}return e.next=12,_l().createScreenVideoTrack({encoderConfig:r},"enable");case 12:i=e.sent,this.track=i[0],this.audioTrack=i[1],e.next=20;break;case 17:return e.next=19,_l().createScreenVideoTrack({encoderConfig:r},"disable");case 19:this.track=e.sent;case 20:this.track.on("track-ended",(function(){var e;o.logger.warn("camera track ended"),null===(e=o.track)||void 0===e||e.close(),o.track=void 0,o.setScreenShareTrackState(gu.stopped)})),this.setScreenShareTrackState(gu.started),e.next=29;break;case 24:return e.prev=24,e.t0=e.catch(5),Br.shared.handleNonThrowableError(Rr.RTC_ERR_SCREEN_SHARE_ERR,e.t0),this.setScreenShareTrackState(gu.error,"PERMISSION_DENIED"===e.t0.code?pu.PermissionDenied:pu.Unknown),e.abrupt("break",42);case 29:this.logger.debug("screenshare started.");case 30:if(this.track&&this.canvas&&this.canvas.view&&this.track.play(this.canvas.view),!(!this.canvas||this.canvas&&this.playing)){e.next=33;break}return e.abrupt("break",42);case 33:e.next=39;break;case 35:if(this.track&&(this.logger.debug("stopping screenshare..."),this.track.stop(),this.track.close(),this.track=void 0,this.logger.debug("screenshare stopped"),this.setScreenShareTrackState(gu.stopped)),this.audioTrack&&(this.logger.debug("stopping screenshare audio..."),this.audioTrack.stop(),this.audioTrack.close(),this.audioTrack=void 0,this.logger.debug("screenshare audio stopped")),this.track||this.audioTrack){e.next=39;break}return e.abrupt("break",42);case 39:return e.next=41,new Promise((function(e){return setTimeout(e,500)}));case 41:if(this.running){e.next=0;break}case 42:this.logger.debug("thread sleep...");case 43:case"end":return e.stop()}}),e,this,[[5,24]])}))),function(){return t.apply(this,arguments)})}]),r}(xl))||Cl,Bl=Jr.attach({proxyMethods:!1})((Tl=function(e){l(r,e);var t,n=Nl(r);function r(e){var t;return a(this,r),(t=n.call(this))._client=void 0,t.mute=!1,t._trackThread=void 0,t._client=e,t}return c(r,[{key:"track",get:function(){var e;return null===(e=this._trackThread)||void 0===e?void 0:e.track}},{key:"setTrackThread",value:function(e){var t;null===(t=this._trackThread)||void 0===t||t.off(Uu.trackStateChanged,this.handleTrackStateChanged),this._trackThread=e,e.on(Uu.trackStateChanged,this.handleTrackStateChanged)}},{key:"handleTrackStateChanged",value:function(e){e===gu.started&&this.run()}},{key:"isTrackPublished",value:function(e){return void 0!==this._client.localTracks.find((function(t){return t===e}))}},{key:"onExecution",value:(t=o(A().mark((function e(){var t,n,r=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.logger.debug("thread notify start...");case 1:if(t=0,this.mute){e.next=25;break}if(!this.track||this.isTrackPublished(this.track)){e.next=21;break}return this.logger.debug("publishing..."),e.prev=5,e.next=8,this._client.setClientRole("host");case 8:if(!(n=this._client.localTracks.find((function(e){var t,n;return e.trackMediaType===(null===(t=r._trackThread)||void 0===t||null===(n=t.track)||void 0===n?void 0:n.trackMediaType)})))){e.next=13;break}return this.logger.warn("unpublishing old ".concat(n.trackMediaType," track...")),e.next=13,this._client.unpublish(n);case 13:return e.next=15,this._client.publish(this.track);case 15:this.logger.debug("published."),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(5),Br.shared.handleNonThrowableError(Rr.RTC_ERR_TRACK_PUBLISH_FAIL,e.t0);case 21:if(!this.track||!this.isTrackPublished(this.track)){e.next=23;break}return e.abrupt("break",48);case 23:e.next=43;break;case 25:if(!this.track||!this.isTrackPublished(this.track)){e.next=41;break}return this.logger.debug("unpublishing..."),e.prev=27,e.next=30,this._client.unpublish(this.track);case 30:if(0!==this._client.localTracks.length){e.next=33;break}return e.next=33,this._client.setClientRole("audience");case 33:e.next=40;break;case 35:return e.prev=35,e.t1=e.catch(27),Br.shared.handleNonThrowableError(Rr.RTC_ERR_TRACK_UNPUBLISH_FAIL,e.t1),this.emit("trackUnpublishErr",e.t1),e.abrupt("break",48);case 40:this.logger.debug("unpublished.");case 41:if(!this.track||this.isTrackPublished(this.track)){e.next=43;break}return e.abrupt("break",48);case 43:return e.next=45,new Promise((function(e){return setTimeout(e,500)}));case 45:++t%10==0&&this.logger.debug("thread running...");case 47:if(this.running){e.next=1;break}case 48:this.logger.debug("thread sleep...");case 49:case"end":return e.stop()}}),e,this,[[5,18],[27,35]])}))),function(){return t.apply(this,arguments)})}]),r}(cl),Zc(Tl.prototype,"handleTrackStateChanged",[iu],Object.getOwnPropertyDescriptor(Tl.prototype,"handleTrackStateChanged"),Tl.prototype),Sl=Tl))||Sl,Ml=Jr.attach({proxyMethods:!1})(Rl=function(e){l(r,e);var t,n=Nl(r);function r(e,t,i){var o,s=i.channelName,c=i.muteMap,u=i.canvasMap,l=i.mediaType;return a(this,r),(o=n.call(this))._client=void 0,o._user=void 0,o._channelName=void 0,o._muteMap=void 0,o._canvasMap=void 0,o._mediaType=void 0,o._volumePollingTask=void 0,o._client=e,o._user=t,o._muteMap=c,o._mediaType=l,o._canvasMap=u,o._channelName=s,o}return c(r,[{key:"mute",get:function(){return!!this._muteMap.has(this.streamUuid)&&this._muteMap.get(this.streamUuid)}},{key:"streamUuid",get:function(){return"".concat(this._user.uid)}},{key:"canvas",get:function(){if("audio"!==this._mediaType&&this._canvasMap){var e=kl.key(this.streamUuid,this._channelName);return this._canvasMap.get(e)}}},{key:"isTrackSubscribed",value:function(){return"video"===this._mediaType?!!this._user.videoTrack:!!this._user.audioTrack}},{key:"track",get:function(){return"video"===this._mediaType?this._user.videoTrack:this._user.audioTrack}},{key:"onExecution",value:(t=o(A().mark((function e(){var t,n=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.logger.debug("thread notify start...");case 1:if(t=0,this.mute){e.next=19;break}if(this.isTrackSubscribed()){e.next=14;break}return this.logger.debug("[".concat(this._user.uid,"] subscribing ").concat(this._mediaType,"...")),e.prev=5,e.next=8,this._client.subscribe(this._user,this._mediaType);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),Br.shared.handleNonThrowableError(Rr.RTC_ERR_TRACK_SUBSCRIBE_FAIL,e.t0);case 13:this.logger.debug("[".concat(this._user.uid,"] subscribed."));case 14:if("video"===this._mediaType?this.track&&this.canvas&&this.canvas.view&&this.track.play(this.canvas.view,{fit:this.canvas.renderMode===yu.fill?"cover":"contain"}):this.track&&(this._volumePollingTask||(this._volumePollingTask=Ju.addPollingTask((function(){var e=n.track.getVolumeLevel();e=Math.min(3*e,1),n.emit("audio-volume-indication",e)}),Wu.second(.5))),this.track.play()),!this.isTrackSubscribed()){e.next=17;break}return e.abrupt("break",40);case 17:e.next=35;break;case 19:if(!this.isTrackSubscribed()){e.next=32;break}return this.logger.debug("[".concat(this._user.uid,"] unpublishing...")),e.prev=21,e.next=24,this._client.unsubscribe(this._user,this._mediaType);case 24:e.next=31;break;case 26:return e.prev=26,e.t1=e.catch(21),Br.shared.handleNonThrowableError(Rr.RTC_ERR_TRACK_UNSUBSCRIBE_FAIL,e.t1),this.emit("trackPublishErr",e.t1),e.abrupt("break",40);case 31:this.logger.debug("[".concat(this._user.uid,"] unpublished."));case 32:if(this.track&&(this.logger.debug("[".concat(this._user.uid,"] stopping track...")),this.track.stop(),this._volumePollingTask&&this._volumePollingTask.stop(),this.logger.debug("[".concat(this._user.uid,"] track stopped"))),this.isTrackSubscribed()){e.next=35;break}return e.abrupt("break",40);case 35:return e.next=37,new Promise((function(e){return setTimeout(e,500)}));case 37:++t%10==0&&this.logger.info("thread running...");case 39:if(this.running){e.next=1;break}case 40:this.logger.info("thread sleep...");case 41:case"end":return e.stop()}}),e,this,[[5,10],[21,26]])}))),function(){return t.apply(this,arguments)})}]),r}(cl))||Rl;function jl(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}function Ul(){return Ul="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=jl(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Ul.apply(this,arguments)}var Fl,Ql,Gl=function(){function e(){a(this,e),this.rtt=void 0,this.downlinkNetworkQuality=0,this.uplinkNetworkQuality=0,this.end2EndDelay=0,this.txVideoPacketLoss=0,this.rxVideoPacketLoss=0}return c(e,[{key:"toAGQuality",value:function(e){var t=fu.unknown;return void 0!==e&&(0===e?t=fu.unknown:5===e||6===e?t=fu.bad:4===e?t=fu.poor:e>=2&&e<=3?t=fu.good:1===e&&(t=fu.great)),t}},{key:"networkStats",value:function(){return{packetLoss:Math.max(this.txVideoPacketLoss,this.rxVideoPacketLoss),cpu:-1,delay:this.end2EndDelay,networkQuality:Math.min(this.toAGQuality(this.downlinkNetworkQuality),this.toAGQuality(this.uplinkNetworkQuality))}}}]),e}();function ql(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var i=p(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f(this,n)}}var Vl=Jr.attach({proxyMethods:!1})(Fl=function(e){l(s,e);var t,n,i=ql(s);function s(e,t,n,r){var o;a(this,s),(o=i.call(this)).logger=void 0,o._client=void 0,o._base=void 0,o._videoPublishThread=void 0,o._audioPublishThread=void 0,o._screenPublishThread=void 0,o.configs=void 0,o._connectionState=Au.Idle,o.channelName=void 0,o.connectionType=void 0,o.channelName=e,o.configs=t,o._base=n,o.connectionType=r,_l().setArea({areaCode:[o._rtcRegion()]}),o._client=_l().createClient({codec:o.configs.codec,mode:o.configs.mode});var c=Ur.shared.rtcConfigs.encryption;return c&&o._client.setEncryptionConfig(o._getEncryptionMode(c.mode),c.key),o._videoPublishThread=new Bl(o._client),o._audioPublishThread=new Bl(o._client),o._screenPublishThread=new Bl(o._client),o._videoPublishThread.runnable=!1,o._audioPublishThread.runnable=!1,o._screenPublishThread.runnable=!1,o._client.on("connection-state-change",(function(e){o.setConnectionState(o._getRtcState(e))})),o}return c(s,[{key:"base",get:function(){return this._base}},{key:"ready",get:function(){return this._connectionState===Au.Connected}},{key:"setConnectionState",value:function(e){this._connectionState=e,e===Au.Connected&&(this._videoPublishThread.runnable=!0,this._audioPublishThread.runnable=!0,this._screenPublishThread.runnable=!0,this._videoPublishThread.run(),this._audioPublishThread.run(),this._screenPublishThread.run()),e===Au.Idle&&(this._videoPublishThread.runnable=!1,this._audioPublishThread.runnable=!1,this._screenPublishThread.runnable=!1),this.emit("rtc-connection-state-changed",e,this.connectionType)}},{key:"getClientSessionId",value:function(){return this._client._sessionId}},{key:"join",value:(n=o(A().mark((function e(t,n,r){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._client.join(t,this.channelName,n,+r);case 2:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return n.apply(this,arguments)})},{key:"leave",value:(t=o(A().mark((function e(){var t,n,i;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Du(this._client.leave());case 2:t=e.sent,n=r(t,1),(i=n[0])&&Br.shared.handleNonThrowableError(Rr.RTC_ERR_CLIENT_LEAVE_CHANNEL_FAIL,i);case 6:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"muteLocalVideo",value:function(e){return this.logger.info("muteLocalVideo ".concat(e)),this.base.cameraThread?(this._videoPublishThread.mute=e,this._videoPublishThread.setTrackThread(this.base.cameraThread),this._videoPublishThread.run(),0):-1}},{key:"muteLocalAudio",value:function(e){return this.logger.info("muteLocalAudio ".concat(e)),this.base.micThread?(this._audioPublishThread.mute=e,this._audioPublishThread.setTrackThread(this.base.micThread),this._audioPublishThread.run(),0):-1}},{key:"muteLocalScreenShare",value:function(e){return this.logger.info("muteLocalScreenShare ".concat(e)),this.base.screenThread?(this._screenPublishThread.mute=e,this._screenPublishThread.setTrackThread(this.base.screenThread),this._screenPublishThread.run(),0):-1}},{key:"_rtcRegion",value:function(){switch(Ur.shared.region){case xr.CN:return"GLOBAL";case xr.AP:return"ASIA";case xr.EU:return"EUROPE";case xr.NA:return"NORTH_AMERICA"}}},{key:"_getRtcState",value:function(e){switch(e){case"CONNECTED":return Au.Connected;case"CONNECTING":return Au.Connecting;case"DISCONNECTING":case"DISCONNECTED":return Au.Idle;case"RECONNECTING":return Au.Reconnecting}}},{key:"_getEncryptionMode",value:function(e){switch(e){case vu.AES_128_ECB:return"aes-128-ecb";case vu.AES_128_GCM:return"aes-128-gcm";case vu.AES_128_XTS:return"aes-128-xts";case vu.AES_256_XTS:return"aes-256-xts";case vu.AES_256_GCM:return"aes-256-gcm";case vu.AES_256_XTS:return"aes-256-xts"}return"none"}}]),s}(y))||Fl,Kl=(Ql=function(e){l(n,e);var t=ql(n);function n(e,r,i,o){var s;a(this,n),(s=t.call(this,e,r,i,o))._networkStats=new Gl,s._remoteRtcUsers=new Map,s._muteRemoteVideo=new Map,s._muteRemoteAudio=new Map,s._audioVolumes=new Map,s._subscribeVideoThreads=new Map,s._subscribeAudioThreads=new Map;var c=(0,S.throttle)(s._notifyStreamVolumes,500);return s._client.on("user-published",(function(e,t){var n="".concat(e.uid);if(s._remoteRtcUsers.set(n,e),"video"===t){var r=new Ml(s._client,e,{channelName:s.channelName,muteMap:s._muteRemoteVideo,mediaType:"video",canvasMap:s.base.remoteCanvas});s._subscribeVideoThreads.set(n,r),r.runnable=s.ready}else{var i=new Ml(s._client,e,{channelName:s.channelName,muteMap:s._muteRemoteAudio,mediaType:"audio"});i.on("audio-volume-indication",(function(e){s._audioVolumes.set(n,e),c()})),s._subscribeAudioThreads.set(n,i),i.runnable=s.ready}s._notifySubscribeThreads(n,t)})),s._client.on("user-unpublished",(function(e){if(!e.hasAudio&&!e.hasVideo){var t="".concat(e.uid);s._remoteRtcUsers.delete(t);var n=s._subscribeVideoThreads.get(t),r=s._subscribeVideoThreads.get(t);n&&(n.stop(),s._subscribeVideoThreads.delete(t)),r&&(r.stop(),s._audioVolumes.delete(t),s._subscribeAudioThreads.delete(t))}})),s._client.on("network-quality",(function(e){s._networkStats.uplinkNetworkQuality=e.uplinkNetworkQuality,s._networkStats.downlinkNetworkQuality=e.downlinkNetworkQuality;var t=s._client.getLocalVideoStats(),n=s._client.getRemoteVideoStats(),r=s._client.getRTCStats();s._networkStats.rtt=r.RTT,s._networkStats.txVideoPacketLoss=t.sendPacketsLost/t.sendPackets;for(var i=0,o=0,a=0,c=Object.values(n),u=0,l=c;u<l.length;u++){var h=l[u];i+=h.receivePacketsLost,o+=h.receivePackets,a+=h.end2EndDelay}c.length>0&&(s._networkStats.rxVideoPacketLoss=i/o,s._networkStats.end2EndDelay=a/c.length),s.emit("network-stats-changed",s._networkStats.networkStats())})),s}return c(n,[{key:"videoSubscribeThread",value:function(e){return this._subscribeVideoThreads.get(e)}},{key:"_notifyStreamVolumes",value:function(){this.emit("audio-volume-indication",this._audioVolumes)}},{key:"_notifySubscribeThreads",value:function(e,t){var n="video"===t?this._subscribeVideoThreads.get(e):this._subscribeAudioThreads.get(e);n&&n.run()}},{key:"setConnectionState",value:function(e){e===Au.Connected&&(this._subscribeVideoThreads.forEach((function(e){e.runnable=!0,e.run()})),this._subscribeAudioThreads.forEach((function(e){e.runnable=!0,e.run()}))),e===Au.Idle&&(this._subscribeVideoThreads.forEach((function(e){e.runnable=!1})),this._subscribeAudioThreads.forEach((function(e){e.runnable=!1,e.run()}))),Ul(p(n.prototype),"setConnectionState",this).call(this,e)}},{key:"muteRemoteVideo",value:function(e,t){return this.logger.info("muteRemoteVideo ".concat(e," ").concat(t)),this._muteRemoteVideo.set(e,t),this._notifySubscribeThreads(e,"video"),0}},{key:"muteRemoteAudio",value:function(e,t){return this.logger.info("muteRemoteAudio ".concat(e," ").concat(t)),this._muteRemoteAudio.set(e,t),this._notifySubscribeThreads(e,"audio"),0}}]),n}(Vl),Zc(Ql.prototype,"_notifyStreamVolumes",[iu],Object.getOwnPropertyDescriptor(Ql.prototype,"_notifyStreamVolumes"),Ql.prototype),Ql),Hl=function(e){l(n,e);var t=ql(n);function n(){return a(this,n),t.apply(this,arguments)}return c(n)}(Vl);function Wl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var i=p(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f(this,n)}}var zl=function(e){l(i,e);var t,n=Wl(i);function i(e,t){var r;return a(this,i),(r=n.call(this)).adapter=e,r._deviceInfo=new Map,r._deviceIds=new Set,r._initializeDeviceList(t),r}return c(i,[{key:"onLocalVideoTrackStateChanged",value:function(e){return this.adapter.onLocalVideoTrackStateChanged(e),0}},{key:"onLocalCameraListChanged",value:function(e){return this.on(Uu.cameraListChanged,e),0}},{key:"getVideoCameraDevices",value:function(){return this.cameraList}},{key:"cameraList",get:function(){var e=this,t=[];return this._deviceIds.forEach((function(n){var r=e._deviceInfo.get(n);r&&t.push({deviceid:r.deviceid,devicename:r.devicename})})),t}},{key:"_emitCameraListChanged",value:function(e,t,n){this.emit(Uu.cameraListChanged,e,t,n)}},{key:"_initializeDeviceList",value:(t=o(A().mark((function e(t){var n,i,o,a,s,c=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Du(_l().getCameras(t));case 2:n=e.sent,i=r(n,2),o=i[0],a=i[1],o&&Br.shared.handleThrowableError(Rr.RTC_ERR_VDM_GET_DEVICES_FAIL,o),a&&(s=[],a.forEach((function(e){if("default"!==e.deviceId){var t={deviceid:e.deviceId,devicename:e.label};c._deviceInfo.set(e.deviceId,t),c._deviceIds.add(e.deviceId),s.push(t)}})),this._emitCameraListChanged(!0,s,this.cameraList)),_l().onCameraChanged=function(e){var t={deviceid:e.device.deviceId,devicename:e.device.label};"ACTIVE"===e.state?(c._deviceInfo.set(e.device.deviceId,t),c._deviceIds.add(e.device.deviceId),c._emitCameraListChanged(!0,[t],c.cameraList)):"INACTIVE"===e.state&&(c._deviceInfo.delete(e.device.deviceId),c._deviceIds.delete(e.device.deviceId),c._emitCameraListChanged(!1,[t],c.cameraList))};case 9:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),i}(Zu),Yl=function(e){l(s,e);var t,n,i=Wl(s);function s(e,t){var n;return a(this,s),(n=i.call(this)).adapter=e,n._recordingDeviceInfo=new Map,n._recordingDeviceIds=new Set,n._playbackDeviceInfo=new Map,n._playbackDeviceIds=new Set,n._initializeDeviceList(t),n._initializePlaybackDeviceList(t),n}return c(s,[{key:"onLocalAudioPlaybackTestVolumeChanged",value:function(e){return this.adapter.onLocalAudioPlaybackTestVolumeChanged(e)}},{key:"onLocalAudioTrackStateChanged",value:function(e){return this.adapter.onLocalAudioTrackStateChanged(e)}},{key:"onLocalAudioVolume",value:function(e){return this.adapter.onLocalAudioVolume(e)}},{key:"onLocalRecordingDeviceListChanged",value:function(e){return this.on(Uu.recordingDeviceListChanged,e),0}},{key:"onLocalPlaybackDeviceListChanged",value:function(e){return this.on(Uu.playbackDeviceListChanged,e),0}},{key:"microphoneList",get:function(){var e=this,t=[];return this._recordingDeviceIds.forEach((function(n){var r=e._recordingDeviceInfo.get(n);r&&t.push({deviceid:r.deviceid,devicename:r.devicename})})),t}},{key:"speakerList",get:function(){var e=this,t=[];return this._playbackDeviceIds.forEach((function(n){var r=e._playbackDeviceInfo.get(n);r&&t.push({deviceid:r.deviceid,devicename:r.devicename})})),t}},{key:"_emitPlaybackListChanged",value:function(e,t,n){this.emit(Uu.playbackDeviceListChanged,e,t,n)}},{key:"_emitRecordingListChanged",value:function(e,t,n){this.emit(Uu.recordingDeviceListChanged,e,t,n)}},{key:"_initializePlaybackDeviceList",value:(n=o(A().mark((function e(t){var n,i,o,a,s,c=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Du(_l().getPlaybackDevices(t));case 2:n=e.sent,i=r(n,2),o=i[0],a=i[1],o&&Br.shared.handleThrowableError(Rr.RTC_ERR_ADM_GET_PLAYBACK_DEVICES_FAIL,o),a&&(s=[],a.forEach((function(e){if("default"!==e.deviceId){var t={deviceid:e.deviceId,devicename:e.label};c._playbackDeviceInfo.set(e.deviceId,t),c._playbackDeviceIds.add(e.deviceId),s.push(t)}})),this._emitPlaybackListChanged(!0,s,this.speakerList)),_l().onPlaybackDeviceChanged=function(e){var t={deviceid:e.device.deviceId,devicename:e.device.label};"ACTIVE"===e.state?(c._playbackDeviceInfo.set(e.device.deviceId,t),c._playbackDeviceIds.add(e.device.deviceId),c._emitPlaybackListChanged(!0,[t],c.speakerList)):"INACTIVE"===e.state&&(c._playbackDeviceInfo.delete(e.device.deviceId),c._playbackDeviceIds.delete(e.device.deviceId),c._emitPlaybackListChanged(!1,[t],c.speakerList))};case 9:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"_initializeDeviceList",value:(t=o(A().mark((function e(t){var n,i,o,a,s,c=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Du(_l().getMicrophones(t));case 2:n=e.sent,i=r(n,2),o=i[0],a=i[1],o&&Br.shared.handleThrowableError(Rr.RTC_ERR_ADM_GET_RECORD_DEVICES_FAIL,o),a&&(s=[],a.forEach((function(e){if("default"!==e.deviceId){var t={deviceid:e.deviceId,devicename:e.label};c._recordingDeviceInfo.set(e.deviceId,t),c._recordingDeviceIds.add(e.deviceId),s.push(t)}})),this._emitRecordingListChanged(!0,s,this.microphoneList)),_l().onMicrophoneChanged=function(e){var t={deviceid:e.device.deviceId,devicename:e.device.label};"ACTIVE"===e.state?(c._recordingDeviceInfo.set(e.device.deviceId,t),c._recordingDeviceIds.add(e.device.deviceId),c._emitRecordingListChanged(!0,[t],c.microphoneList)):"INACTIVE"===e.state&&(c._recordingDeviceInfo.delete(e.device.deviceId),c._recordingDeviceIds.delete(e.device.deviceId),c._emitRecordingListChanged(!1,[t],c.microphoneList))};case 9:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"getAudioPlaybackDevices",value:function(){return this.speakerList}},{key:"getAudioRecordingDevices",value:function(){return this.microphoneList}}]),s}($u);function Jl(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Xl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xl(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Xl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Zl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var i=p(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f(this,n)}}var $l,eh,th,nh,rh=function(e){l(n,e);var t=Zl(n);function n(){var e;a(this,n),(e=t.call(this)).logger=void 0,e._audioContext=void 0,e._audioTagId=Sr(),e._playingSourceNode=void 0,e._analyserNode=void 0,e._volumePollingTask=void 0;try{window.AudioContext=window.AudioContext||window.webkitAudioContext,e._audioContext=new AudioContext,e._analyserNode=e._audioContext.createAnalyser(),e._analyserNode.smoothingTimeConstant=.3,e._analyserNode.fftSize=1024}catch(e){mr.error("[audio player] initialize audio context failed ".concat(e,"."))}return e}return c(n,[{key:"_getAudioVirtualDom",value:function(){if(document){var e=document.getElementById(this._audioTagId);if(!e){var t=document.createElement("audio");t.id=this._audioTagId,t.hidden=!0,document.body.appendChild(t),e=t}return e}mr.error("[audio player] audio element creation failed.")}},{key:"play",value:function(e){var t=this;this.stop();var n=this._audioContext,r=this._getAudioVirtualDom();if(r&&n){var i=n.createMediaElementSource(r);if(i.connect(n.destination),r.src=e,this._analyserNode){var o=this._analyserNode;i.connect(o);var a=new Float32Array(o.fftSize);this._volumePollingTask=Ju.addPollingTask((function(){o.getFloatTimeDomainData(a);var e,n=0,r=Jl(a);try{for(r.s();!(e=r.n()).done;){var i=e.value;n+=i*i}}catch(e){r.e(e)}finally{r.f()}var s=Math.sqrt(n/a.length);t.emit(Uu.localAudioPlaybackVolumeIndicator,Math.min(s,1))}),Wu.second(.2))}r.addEventListener("ended",(function(){t.stop()})),this._playingSourceNode=i,r.play()}else mr.error("[audio player] start audio playback test failed.")}},{key:"stop",value:function(){var e=this._audioContext,t=this._getAudioVirtualDom();if(t&&e){var n;if(t.pause(),t.currentTime=0,this._analyserNode)try{var r;null===(r=this._playingSourceNode)||void 0===r||r.disconnect(this._analyserNode)}catch(e){mr.warn("[audio player] failed to detach analyser node")}if(this._audioContext)try{var i;null===(i=this._playingSourceNode)||void 0===i||i.disconnect(e.destination)}catch(e){mr.warn("[audio player] failed to detach audio context")}null===(n=this._volumePollingTask)||void 0===n||n.stop(),this._volumePollingTask=void 0,t.remove(),this.emit(Uu.localAudioPlaybackVolumeIndicator,0)}}}]),n}(y);function ih(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ih(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ih(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ah(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var i=p(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f(this,n)}}var sh,ch=Jr.attach({proxyMethods:!1})((th=eh=function(e){l(n,e);var t=ah(n);function n(e){var r;return a(this,n),(r=t.call(this)).logger=void 0,r._channels=new Map,r._vdm=new zl(d(r),Ur.shared.rtcConfigs.noDevicePermission),r._adm=new Yl(d(r),Ur.shared.rtcConfigs.noDevicePermission),r.cameraThread=new Dl,r.micThread=new Ll,r.screenThread=new Pl,r.remoteCanvas=new Map,r._audioPlayer=new rh,r._configs=void 0,r._configs=e,r}return c(n,[{key:"configs",get:function(){return oh(oh({},n.defaultConfigs),this._configs)}},{key:"createRtcChannel",value:function(e,t){var n=this._channels.get(e);return n||(n=new uh(e,this.configs,t),this._channels.set(e,n)),n}},{key:"getVideoDeviceManager",value:function(){return this._vdm}},{key:"setVideoCameraDevice",value:function(e){return this.cameraThread.setDevice(e),this.cameraThread.run(),0}},{key:"setAudioRecordingDevice",value:function(e){return this.micThread.setRecordingDevice(e),this.micThread.run(),0}},{key:"setAudioPlaybackDevice",value:function(e){throw new Error("Method not implemented.")}},{key:"getAudioDeviceManager",value:function(){return this._adm}},{key:"getWindowDevices",value:function(){throw new Error("Method not supported.")}},{key:"getDiaplayDevices",value:function(){throw new Error("Method not supported.")}},{key:"isScreenDeviceEnumerateSupported",value:function(){return!1}},{key:"enableLocalVideo",value:function(e){return this.cameraThread.cameraEnable=e,this.cameraThread.run(),0}},{key:"enableLocalAudio",value:function(e){return this.micThread.micEnable=e,this.micThread.run(),0}},{key:"setupLocalVideo",value:function(e,t){return t===$c.Camera?(this.cameraThread.canvas=e,this.cameraThread.run()):(this.screenThread.canvas=e,this.screenThread.run()),0}},{key:"setupRemoteVideo",value:function(e){if(!e.channelName)return Br.shared.handleThrowableError(Rr.RTC_ERR_NO_CHANNEL_EXISTS,new Error("invalid canvas w/o canvas name")),-1;this.remoteCanvas.set("".concat(e.streamUuid,"-").concat(e.channelName),e);var t=this._channels.get(e.channelName),n=null==t?void 0:t.main.videoSubscribeThread(e.streamUuid);return n&&n.run(),0}},{key:"startAudioRecordingDeviceTest",value:function(e){return this.logger.warn("web platform does not support this, it silence the error as recording device can be started testing w/o this api"),0}},{key:"stopAudioRecordingDeviceTest",value:function(){return this.logger.warn("web platform does not support this, it silence the error as recording device can be started testing w/o this api"),0}},{key:"startAudioPlaybackDeviceTest",value:function(e){return this._audioPlayer.play(e),0}},{key:"stopAudioPlaybackDeviceTest",value:function(){return this._audioPlayer.stop(),0}},{key:"startScreenCapture",value:function(e,t){return this.screenThread.screenEnable=!0,this.screenThread.run(),0}},{key:"stopScreenCapture",value:function(){return this.screenThread.screenEnable=!1,this.screenThread.run(),0}},{key:"onLocalAudioPlaybackTestVolumeChanged",value:function(e){return this._audioPlayer.on(Uu.localAudioPlaybackVolumeIndicator,e),0}},{key:"onLocalVideoTrackStateChanged",value:function(e){return this.cameraThread.on(Uu.trackStateChanged,e),0}},{key:"onLocalAudioTrackStateChanged",value:function(e){return this.micThread.on(Uu.trackStateChanged,e),0}},{key:"onLocalScreenShareTrackStateChanged",value:function(e){return this.screenThread.on(Uu.trackStateChanged,e),0}},{key:"onLocalAudioVolume",value:function(e){return this.micThread.on(Uu.localAudioVolume,e),0}},{key:"setBeautyEffectOptions",value:function(e,t){return this.logger.warn("web platform does not support this"),0}},{key:"hasScreenSharePermission",value:function(){return!0}},{key:"destroy",value:function(){return this._channels.forEach((function(e){return e.leave()})),this.enableLocalVideo(!1),this.enableLocalAudio(!1),this.stopScreenCapture(),0}}],[{key:"getRtcVersion",value:function(){return _l().VERSION}}]),n}(tl),eh.defaultConfigs={codec:"vp8",mode:"live"},$l=th))||$l,uh=Jr.attach({proxyMethods:!1})(nh=function(e){l(s,e);var t,n,i=ah(s);function s(e,t,n){var r;return a(this,s),(r=i.call(this)).logger=void 0,r.main=void 0,r.sub=void 0,r.channelName=void 0,r.channelName=e,r.main=new Kl(e,t,n,su.main),r.sub=new Hl(e,t,n,su.sub),r}return c(s,[{key:"getSessionId",value:function(){return this.main.getClientSessionId()}},{key:"client",value:function(e){return e===su.main?this.main:this.sub}},{key:"join",value:(n=o(A().mark((function e(t,n,r){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.client(r).join(Ur.shared.appId,t,n);case 2:r===su.sub&&(this.main.muteRemoteVideo(n,!0),this.main.muteRemoteAudio(n,!0));case 3:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return n.apply(this,arguments)})},{key:"leave",value:(t=o(A().mark((function e(t){var n,i,o,a,s;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.sub.ready){e.next=7;break}return e.next=3,Du(this.sub.leave());case 3:i=e.sent,o=r(i,1),(n=o[0])&&Br.shared.handleNonThrowableError(Rr.RTC_ERR_LEAVE_SUB_CHANNEL_FAIL,n);case 7:if(t===su.sub){e.next=14;break}return e.next=10,Du(this.main.leave());case 10:a=e.sent,s=r(a,1),(n=s[0])&&Br.shared.handleNonThrowableError(Rr.RTC_ERR_LEAVE_MAIN_CHANNEL_FAIL,n);case 14:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"setClientRole",value:function(e){return 0}},{key:"muteLocalVideo",value:function(e,t){return this.logger.info("muteLocalVideo ".concat(e)),this.client(t).muteLocalVideo(e)}},{key:"muteLocalAudio",value:function(e,t){return this.logger.info("muteLocalAudio ".concat(e)),this.client(t).muteLocalAudio(e)}},{key:"muteLocalScreenShare",value:function(e,t){return this.logger.info("muteLocalScreenShare ".concat(e)),this.client(t).muteLocalScreenShare(e)}},{key:"muteRemoteVideo",value:function(e,t){return this.logger.info("muteRemoteVideo ".concat(e," ").concat(t)),this.main.muteRemoteVideo(e,t)}},{key:"muteRemoteAudio",value:function(e,t){return this.logger.info("muteRemoteAudio ".concat(e," ").concat(t)),this.main.muteRemoteAudio(e,t)}},{key:"onNetworkStats",value:function(e){return this.main.on("network-stats-changed",e),0}},{key:"onAudioVolumeIndication",value:function(e){return this.main.on("audio-volume-indication",e),0}},{key:"onConnectionStateChanged",value:function(e){return this.main.on("rtc-connection-state-changed",e),this.sub.on("rtc-connection-state-changed",e),0}}]),s}(el))||nh,lh=function(){function e(){a(this,e)}return c(e,null,[{key:"getAdapter",value:function(e,t){switch(e){case Or.Electron:return new ml;case Or.Web:return new ch(null==t?void 0:t.web)}}}]),e}(),hh=Jr.attach({level:kr.DEBUG})(sh=function(){function e(t){a(this,e),this._adapter=void 0,this._channels=new Map,this._adapter=lh.getAdapter(Ur.platform,t)}return c(e,[{key:"getRtcChannel",value:function(e){var t=this._channels.get(e);if(!t){var n=this._adapter.createRtcChannel(e,this._adapter);t=new Eu(e,n),this._channels.set(e,t)}return t}},{key:"getVideoDeviceManager",value:function(){return this._adapter.getVideoDeviceManager()}},{key:"getAudioDeviceManager",value:function(){return this._adapter.getAudioDeviceManager()}},{key:"getWindowDevices",value:function(){return this._adapter.getWindowDevices()}},{key:"getDisplayDevices",value:function(){return this._adapter.getDiaplayDevices()}},{key:"isScreenDeviceEnumerateSupported",value:function(){return this._adapter.isScreenDeviceEnumerateSupported()}},{key:"setVideoCameraDevice",value:function(e){return this._adapter.setVideoCameraDevice(e)}},{key:"setAudioRecordingDevice",value:function(e){return this._adapter.setAudioRecordingDevice(e)}},{key:"setAudioPlaybackDevice",value:function(e){return this._adapter.setAudioPlaybackDevice(e)}},{key:"enableLocalVideo",value:function(e){return this._adapter.enableLocalVideo(e)}},{key:"setupLocalVideo",value:function(e,t){return e.view.style.setProperty("transform",e.mirror?"rotateY(180deg)":""),this._adapter.setupLocalVideo(e,t)}},{key:"setupRemoteVideo",value:function(e){return e.view.style.setProperty("transform",e.mirror?"rotateY(180deg)":""),this._adapter.setupRemoteVideo(e)}},{key:"enableLocalAudio",value:function(e){return this._adapter.enableLocalAudio(e)}},{key:"startScreenCapture",value:function(e,t){return this._adapter.startScreenCapture(e,t)}},{key:"stopScreenCapture",value:function(){return this._adapter.stopScreenCapture()}},{key:"onLocalScreenShareTrackStateChanged",value:function(e){return this._adapter.onLocalScreenShareTrackStateChanged(e)}},{key:"startAudioRecordingDeviceTest",value:function(e){return this._adapter.startAudioRecordingDeviceTest(e)}},{key:"stopAudioRecordingDeviceTest",value:function(){return this._adapter.stopAudioRecordingDeviceTest()}},{key:"startAudioPlaybackDeviceTest",value:function(e){return this._adapter.startAudioPlaybackDeviceTest(e)}},{key:"stopAudioPlaybackDeviceTest",value:function(){return this._adapter.stopAudioPlaybackDeviceTest()}},{key:"onLocalCameraListChanged",value:function(e){return this._adapter.getVideoDeviceManager().onLocalCameraListChanged(e)}},{key:"onLocalRecordingDeviceListChanged",value:function(e){return this._adapter.getAudioDeviceManager().onLocalRecordingDeviceListChanged(e)}},{key:"onLocalPlaybackListChanged",value:function(e){return this._adapter.getAudioDeviceManager().onLocalPlaybackDeviceListChanged(e)}},{key:"onLocalVideoTrackStateChanged",value:function(e){return this._adapter.getVideoDeviceManager().onLocalVideoTrackStateChanged(e)}},{key:"onLocalAudioTrackStateChanged",value:function(e){return this._adapter.getAudioDeviceManager().onLocalAudioTrackStateChanged(e)}},{key:"onLocalAudioVolume",value:function(e){return this._adapter.getAudioDeviceManager().onLocalAudioVolume(e)}},{key:"setBeautyEffectOptions",value:function(e,t){return this._adapter.setBeautyEffectOptions(e,t)}},{key:"hasScreenSharePermission",value:function(){return this._adapter.hasScreenSharePermission()}},{key:"destroy",value:function(){return this._adapter.destroy()}}]),e}())||sh;function dh(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var i=p(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f(this,n)}}var fh=function(e){l(y,e);var t,n,r,i,s,u,h,d,f,p,g,v,m=dh(y);function y(){return a(this,y),m.call(this)}return c(y,[{key:"checkIn",value:(v=o(A().mark((function e(t,n,r,i,o){var a,s;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetch({path:"/v2/rooms/".concat(t,"/users/").concat(n),pathPrefix:"/edu/apps/".concat(Ur.shared.appId),method:"PUT",data:{boardRegion:"cn-hz",duration:18e3,role:o,roomName:r,roomType:4,userName:i,userProperties:{}}});case 2:return a=e.sent,s=a.data,e.abrupt("return",s);case 5:case"end":return e.stop()}}),e,this)}))),function(e,t,n,r,i){return v.apply(this,arguments)})},{key:"entryRoom",value:(g=o(A().mark((function e(t){var n,r,i;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return zc.shared.startTick("joinRoom","http","entry"),e.next=3,this.fetch({path:"/v1/rooms/".concat(t.roomUuid,"/users/").concat(t.userUuid,"/entry"),method:"POST",data:t});case 3:return n=e.sent,r=n.__status,i=n.code,zc.shared.reportHttp("joinRoom","http","entry",r,200===r,i),e.abrupt("return",n.data);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return g.apply(this,arguments)})},{key:"syncSnapShot",value:(p=o(A().mark((function e(t){var n,r,i,o,a,s,c,u;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetch({path:"/v1/rooms/".concat(t,"/snapshot"),method:"GET"});case 2:return r=e.sent,i=r.data,o=null!==(n=i.sequence)&&void 0!==n?n:0,a=Rc()(i,"snapshot.room.roomInfo",null),s=Rc()(i,"snapshot.room.roomProperties",null),c=Rc()(i,"snapshot.room.roomState"),u=Rc()(i,"snapshot.users",[]),e.abrupt("return",{seq:o,roomInfo:a,roomState:c,roomProperties:s,users:u});case 10:case"end":return e.stop()}}),e,this)}))),function(e){return p.apply(this,arguments)})},{key:"syncSequence",value:(f=o(A().mark((function e(t,n,r){var i;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetch({path:"/v1/rooms/".concat(t,"/sequences?nextId=").concat(n,"&count=").concat(r),method:"GET"});case 2:return i=e.sent,e.abrupt("return",i.data);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return f.apply(this,arguments)})},{key:"updateRoomProperties",value:(d=o(A().mark((function e(t){var n,r,i,o,a;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.roomUuid,r=t.properties,i=t.cause,o={properties:r},i&&(o.cause=i),e.next=5,this.fetch({path:"/v1/rooms/".concat(n,"/properties"),method:"PUT",data:o});case 5:return a=e.sent,e.abrupt("return",a.data);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)})},{key:"deleteRoomProperties",value:(h=o(A().mark((function e(t){var n,r,i,o,a;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.roomUuid,r=t.properties,i=t.cause,o={properties:r},i&&(o.cause=i),e.next=5,this.fetch({path:"/v1/rooms/".concat(n,"/properties"),method:"DELETE",data:o});case 5:return a=e.sent,e.abrupt("return",a.data);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)})},{key:"updateUserProperties",value:(u=o(A().mark((function e(t){var n,r,i,o,a,s;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.roomUuid,r=t.userUuid,i=t.properties,o=t.cause,a={properties:i,cause:void 0===o?void 0:o},e.next=4,this.fetch({path:"/v1/rooms/".concat(n,"/users/").concat(r,"/properties"),method:"PUT",data:a});case 4:return s=e.sent,e.abrupt("return",s.data);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"deleteUserProperties",value:(s=o(A().mark((function e(t){var n,r,i,o,a,s,c;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.roomUuid,r=t.userUuid,i=t.properties,o=t.cause,s={properties:i},(a=void 0===o?void 0:o)&&(s.cause=a),e.next=5,this.fetch({path:"/v1/rooms/".concat(n,"/users/").concat(r,"/properties"),method:"DELETE",data:s});case 5:return c=e.sent,e.abrupt("return",c.data);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"upsertStream",value:(i=o(A().mark((function e(t,n,r,i){var o,a;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=i.publishVideo,a=i.publishAudio,e.next=3,this.fetch({path:"/v1/rooms/".concat(t,"/users/").concat(n,"/streams/").concat(r),method:"PUT",data:{videoState:o,audioState:a}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t,n,r){return i.apply(this,arguments)})},{key:"deleteStream",value:(r=o(A().mark((function e(t,n,r){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetch({path:"/v1/rooms/".concat(t,"/users/").concat(n,"/streams/").concat(r),method:"DELETE"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return r.apply(this,arguments)})},{key:"updateDeviceState",value:(n=o(A().mark((function e(t,n,r,i){var o,a;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=i.videoSourceState,a=i.audioSourceState,e.next=3,this.fetch({path:"/v1/rooms/".concat(t,"/users/").concat(n,"/streams/").concat(r),method:"PATCH",data:{videoSourceState:o,audioSourceState:a}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t,r,i){return n.apply(this,arguments)})},{key:"sendRoomChatMessage",value:(t=o(A().mark((function e(t,n){var r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetch({path:"/v1/rooms/".concat(n,"/chat/channel"),method:"POST",data:{message:t,type:1}});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})}]),y}(qc),ph=__webpack_require__(3977),gh=__webpack_require__.n(ph),Ah=__webpack_require__(9644),vh=__webpack_require__.n(Ah),mh=(new(__webpack_require__(6353).UAParser)).getResult(),yh=function(){function e(t,n){a(this,e),this._appId=t,this._tagInfo=n,this._adapter=void 0,this._adapter=new bh(this._appId,this._tagInfo)}var t;return c(e,[{key:"upload",value:(t=o(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._adapter.upload(t,n);case 2:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})}]),e}(),bh=function(){function e(t,n){a(this,e),this._appId=t,this._tagInfo=n,this._apiService=new qc,this._checkpoints=new Map}var t,n,r,i;return c(e,[{key:"_uploadByAli",value:(i=o(A().mark((function e(t,n,r,i){var o,a,s,c,u,l,h,d,f,p,g,v,m,y,b=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=r.ossKey,a=r.accessKeyId,s=r.accessKeySecret,c=r.bucketName,u=r.ossEndpoint,l=r.securityToken,h=i.callbackHost,d=i.callbackBody,f=i.callbackContentType,p=new(gh())({accessKeyId:a,accessKeySecret:s,bucket:c,endpoint:u,secure:!0,stsToken:l}),g=this._checkpoints.get(n),v="".concat(h,"/edu/apps/").concat(this._appId,"/v1/rooms/").concat(this._tagInfo.roomUuid,"/resources/callback"),e.next=7,p.multipartUpload(o,t,{progress:function(e,t){b._checkpoints.set(n,t)},callback:{url:v,body:d,contentType:f},checkpoint:g});case 7:if(m=e.sent,200===(y=m.res).status){e.next=11;break}throw new Error("upload to ali oss error, status is ".concat(y.status));case 11:this._checkpoints.delete(n),p.generateObjectUrl(o);case 13:case"end":return e.stop()}}),e,this)}))),function(e,t,n,r){return i.apply(this,arguments)})},{key:"_uploadByAws",value:(r=o(A().mark((function e(t,n,r,i){var o,a,s,c,u,l;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=r.preSignedUrl,a=i.callbackHost,s=i.callbackBody,c=i.callbackContentType,u="".concat(a,"/edu/apps/").concat(this._appId,"/v1/rooms/").concat(this._tagInfo.roomUuid,"/resources/callback"),e.next=5,vh().put(o,t,{headers:{"Content-Type":t.type}});case 5:return e.next=7,vh().post(u,JSON.parse(s),{headers:b({},"content-type",c)});case 7:if(200===(l=e.sent).status){e.next=10;break}throw new Error("upload to aws oss error, status is ".concat(l.status));case 10:this._checkpoints.delete(n);case 11:case"end":return e.stop()}}),e,this)}))),function(e,t,n,i){return r.apply(this,arguments)})},{key:"_fetchStsToken",value:(n=o(A().mark((function e(t,n){var r,i,o,a,s,c,u;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(new Date).getTime(),i={appId:Ur.shared.appId,appVersion:Ur.version,deviceName:mh.os.name,deviceVersion:mh.os.version,fileExt:n,platform:"web",tag:t},o=JSON.stringify(i),a="7AIsPeMJgQAppO0Z"+o+r,s=Kc()(a),e.next=8,this._apiService.fetch({path:"/monitor/v1/log/oss/policy",data:i,method:"POST",headers:{sign:s,timestamp:r}});case 8:return c=e.sent,u=c.data,e.abrupt("return",{bucketName:u.bucketName,callbackBody:u.callbackBody,callbackContentType:u.callbackContentType,accessKeyId:u.accessKeyId,accessKeySecret:u.accessKeySecret,securityToken:u.securityToken,ossKey:u.ossKey,callbackHost:u.callbackHost,preSignedUrl:u.preSignedUrl,vendor:u.vendor,ossEndpoint:u.ossEndpoint});case 11:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"upload",value:(t=o(A().mark((function e(t,n){var r,i,o,a,s,c,u,l,h,d,f,p,g,v,m,y,b;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._fetchStsToken(this._tagInfo,n);case 2:if(r=e.sent,i=r.vendor,1!==(o=void 0===i?-1:i)){e.next=10;break}return a=r.ossKey,s=r.callbackBody,c=r.callbackContentType,u=r.callbackHost,l=r.preSignedUrl,e.next=8,this._uploadByAws(t,a,{preSignedUrl:l},{callbackBody:s,callbackContentType:c,callbackHost:u});case 8:case 14:e.next=17;break;case 10:if(2!==o){e.next=16;break}return h=r.accessKeyId,d=r.accessKeySecret,f=r.bucketName,p=r.ossEndpoint,g=r.securityToken,v=r.ossKey,m=r.callbackBody,y=r.callbackContentType,b=r.callbackHost,e.next=14,this._uploadByAli(t,v,{accessKeyId:h,accessKeySecret:d,bucketName:f,ossEndpoint:p,securityToken:g,ossKey:v},{callbackBody:m,callbackContentType:y,callbackHost:b});case 16:throw new Error("vendor ".concat(o," is not supported"));case 17:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})}]),e}();function _h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var i=p(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f(this,n)}}var Eh=function(e){l(u,e);var t,n,r,i,s=_h(u);function u(){return a(this,u),s.apply(this,arguments)}return c(u,[{key:"uploadZipLogFile",value:(i=o(A().mark((function e(t,n){var r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.uploadToOss(t,n,"zip");case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)})},{key:"uploadLogFile",value:(r=o(A().mark((function e(t,n){var r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.uploadToOss(t,n,"log");case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"uploadToOss",value:(n=o(A().mark((function e(t,n,r){var i;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=new yh(Ur.shared.appId,t),e.next=4,i.upload(n,r);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),Br.shared.handleThrowableError(Rr.RTE_ERR_LOG_UPLOAD_FAIL,e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])}))),function(e,t,r){return n.apply(this,arguments)})},{key:"uploadElectronLog",value:(t=o(A().mark((function e(t){var n,r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.doGzip){e.next=8;break}return e.next=3,window.doGzip();case 3:return n=e.sent,e.next=6,this.uploadZipLogFile(t,n);case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),u}(qc);function wh(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var i=p(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f(this,n)}}var Ih=function(e){l(s,e);var t,n,i=wh(s);function s(e){var t;return a(this,s),(t=i.call(this))._mediaControl=void 0,t._apiService=void 0,t._logService=void 0,t._rtmManager=void 0,t._rtcManager=void 0,Ur.setConfig(e),mr.setupConsoleHijack(),t._apiService=new fh,t._logService=new Eh,t._rtmManager=new Xc,t._rtcManager=new hh(e.rtcConfigs),t._mediaControl=new qu(t._rtcManager),t}return c(s,[{key:"login",value:(n=o(A().mark((function e(t,n){var r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return zc.shared.host="https://api.agora.io",zc.shared.pathPrefix="/cn/v1.0/projects/".concat(Ur.shared.appId,"/app-dev-report"),r=Ur.shared.ignoreUrlRegionPrefix,this._apiService.pathPrefix="".concat(r?"":"/"+Ur.shared.region.toLowerCase(),"/scene/apps/").concat(Ur.shared.appId),Ur.shared.token=t,Ur.shared.userId=n,Ur.shared.service.headers={"Content-Type":"application/json","x-agora-token":t,"x-agora-uid":n},e.next=9,this._rtmManager.login(t,n,{uploadLog:!1});case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"logout",value:function(){this._rtcManager.destroy(),this._rtmManager.destroyRtm()}},{key:"createAgoraRteScene",value:function(e){var t=r(this._rtmManager.createObserverChannel(e),2),n=t[0],i=t[1],o=this._rtcManager.getRtcChannel(e);return new Fu(e,{rtc:this._rtcManager,rtcChannel:o,rtm:this._rtmManager,rtmChannel:n,rtmChannelObserver:i})}},{key:"getAgoraMediaControl",value:function(){return this._mediaControl}},{key:"getApiService",value:function(){return this._apiService}},{key:"uploadSDKLogToAgoraService",value:(t=o(A().mark((function e(t){var n,i,o,a,s,c,u,l,h,d,f;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xu(mr.logger.collectConsoleLogs());case 2:if(a=e.sent,s=r(a,2),n=s[0],i=s[1],n){e.next=20;break}return e.next=9,xu(this._logService.uploadLogFile(t,i));case 9:if(c=e.sent,u=r(c,1),!(n=u[0])){e.next=16;break}Br.shared.handleNonThrowableError(Rr.RTE_ERR_WEB_LOG_UPLOAD_ERR,n),e.next=18;break;case 16:return e.next=18,xu(mr.logger.cleanupConsoleLogs());case 18:e.next=21;break;case 20:Br.shared.handleNonThrowableError(Rr.RTE_ERR_WEB_LOG_UPLOAD_ERR,n);case 21:if(Ur.platform!==Or.Electron){e.next=38;break}return e.next=24,xu(mr.logger.collectElectronLogs(ml.logBasePath,ml.logFolderPath));case 24:if(l=e.sent,h=r(l,2),n=h[0],o=h[1],n){e.next=37;break}return e.next=31,xu(this._logService.uploadZipLogFile(t,o));case 31:d=e.sent,f=r(d,1),(n=f[0])&&Br.shared.handleNonThrowableError(Rr.RTE_ERR_ELECTRON_LOG_UPLOAD_ERR,n),e.next=38;break;case 37:Br.shared.handleNonThrowableError(Rr.RTE_ERR_ELECTRON_LOG_UPLOAD_ERR,n);case 38:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}],[{key:"engine",get:function(){return this._engine?this._engine:Br.shared.handleThrowableError(Rr.RTE_ERR_ENGINE_NOT_READY,new Error("engine not ready"))}},{key:"createWithConfig",value:function(e){return this._engine||(this._engine=new s(e)),this._engine}},{key:"destroy",value:function(){var e,t,n,r;mr.info("rte engine destroy"),null===(e=this._engine)||void 0===e||e.getAgoraMediaControl().createCameraVideoTrack().stop(),null===(t=this._engine)||void 0===t||t.getAgoraMediaControl().createMicrophoneAudioTrack().stop(),null===(n=this._engine)||void 0===n||n.getAgoraMediaControl().createScreenShareTrack().stop(),null===(r=this._engine)||void 0===r||r.logout(),this._engine=void 0}},{key:"getVersion",value:function(){return Ur.version}},{key:"getRtcVersion",value:function(){return Ur.platform===Or.Electron?ml.getRtcVersion():ch.getRtcVersion()}}]),s}(y);Ih._engine=void 0})(),__webpack_exports__})()}));